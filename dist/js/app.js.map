{
  "version": 3,
  "sources": ["../../node_modules/codemirror/lib/codemirror.js", "../../node_modules/codemirror/mode/javascript/javascript.js", "../../node_modules/codemirror/mode/perl/perl.js", "../../node_modules/xterm/lib/webpack:/xterm/webpack/universalModuleDefinition", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/AccessibilityManager.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Clipboard.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Color.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/ColorContrastCache.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/ColorManager.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Dom.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Lifecycle.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Linkifier.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Linkifier2.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/LocalizableStrings.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/MouseZoneManager.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/RenderDebouncer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/ScreenDprMonitor.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Terminal.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/TimeBasedDebouncer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/Viewport.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/input/CompositionHelper.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/input/Mouse.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/input/MoveToCell.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/BaseRenderLayer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/CursorRenderLayer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/CustomGlyphs.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/GridCache.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/LinkRenderLayer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/Renderer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/RendererUtils.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/SelectionRenderLayer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/TextRenderLayer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/BaseCharAtlas.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/CharAtlasCache.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/CharAtlasUtils.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/Constants.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/DynamicCharAtlas.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/atlas/LRUMap.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/dom/DomRenderer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/renderer/dom/DomRendererRowFactory.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/selection/SelectionModel.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/CharSizeService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/CharacterJoinerService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/CoreBrowserService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/MouseService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/RenderService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/SelectionService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/Services.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/services/SoundService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/CircularList.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/Clone.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/CoreTerminal.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/EventEmitter.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/InputHandler.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/Lifecycle.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/Platform.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/TypedArrayUtils.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/WindowsMode.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/AttributeData.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/Buffer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/BufferLine.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/BufferRange.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/BufferReflow.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/BufferSet.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/CellData.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/Constants.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/buffer/Marker.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/data/Charsets.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/data/EscapeSequences.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/input/Keyboard.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/input/TextDecoder.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/input/UnicodeV6.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/input/WriteBuffer.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/input/XParseColor.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/parser/Constants.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/parser/DcsParser.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/parser/EscapeSequenceParser.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/parser/OscParser.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/parser/Params.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/AddonManager.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/BufferApiView.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/BufferLineApiView.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/BufferNamespaceApi.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/ParserApi.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/public/UnicodeApi.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/BufferService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/CharsetService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/CoreMouseService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/CoreService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/DirtyRowService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/InstantiationService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/LogService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/OptionsService.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/ServiceRegistry.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/Services.ts", "../../node_modules/xterm/lib/webpack:/xterm/src/common/services/UnicodeService.ts", "../../node_modules/xterm/lib/webpack:/xterm/webpack/bootstrap", "../../node_modules/xterm/lib/webpack:/xterm/src/browser/public/Terminal.ts", "../../node_modules/codemirror/addon/display/placeholder.js", "../../node_modules/codemirror/addon/edit/closebrackets.js", "../../node_modules/codemirror/addon/edit/matchbrackets.js", "../../js/Decoders/Base64.ts", "../../js/Decoders/Default.ts", "../../js/Lang.ts", "../../js/langs/javascript-browser/JavaScript.ts", "../../js/langs/webperl-5.28.1/Perl.ts", "../../js/UI.ts", "../../node_modules/xterm-addon-fit/src/FitAddon.ts", "../../js/Decoders.ts", "../../js/IO.ts", "../../js/Langs.ts", "../../js/Decoders/Xxd.ts", "../../js/app.ts"],
  "sourcesContent": ["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n\n  // Add a span to a line.\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet));\n    if (inThisOp && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n      if (inThisOp) { inThisOp.add(line.markedSpans); }\n    }\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++)\n        { if (lineView.rest[i] == line)\n          { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n      for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n        { if (lineNo(lineView.rest[i$1]) > lineN)\n          { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n    }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    var customCursor = cm.options.$customCursor;\n    if (customCursor) { primary = true; }\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (customCursor) {\n        var head = customCursor(cm, range);\n        if (head) { drawSelectionCursor(cm, head, curFragment); }\n      } else if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (/\\bcm-fat-cursor\\b/.test(cm.getWrapperElement().className)) {\n      var charPos = charCoords(cm, head, \"div\", null, null);\n      var width = charPos.right - charPos.left;\n      cursor.style.width = (width > 0 ? width : cm.defaultCharWidth()) + \"px\";\n    }\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n      if (!cm.state.focused) { onFocus(cm); }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      if (cm.state.focused) { onBlur(cm); }\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    var viewTop = Math.max(0, display.scroller.getBoundingClientRect().top);\n    var oldHeight = display.lineDiv.getBoundingClientRect().top;\n    var mustScroll = 0;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      oldHeight += cur.line.height;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        if (oldHeight < viewTop) { mustScroll -= diff; }\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n    if (Math.abs(mustScroll) > 2) { display.scroller.scrollTop += mustScroll; }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.scrollTop = 0;\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,          // Unique ID\n      markArrays: null         // Used by addMarkedSpan\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n    // Send an event to consumers responding to changes in gutter width.\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // This attribute is respected by automatic translation systems such as Google Translate,\n    // and may also be respected by tools used by human translators.\n    d.wrapper.setAttribute('translate', 'no');\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n    var pixelsPerUnit = wheelPixelsPerUnit;\n    if (e.deltaMode === 0) {\n      dx = e.deltaX;\n      dy = e.deltaY;\n      pixelsPerUnit = 1;\n    }\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && pixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * pixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * pixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && pixelsPerUnit != null) {\n      var pixels = dy * pixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20 && e.deltaMode !== 0) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      if (lineSep === '') { return lines.join('') }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head || ranges[i].anchor)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) { cm.state.delayingBlurEvent = false; }\n        else { delayBlurEvent(cm); }\n      }\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { return display.input.focus(); }, 20);\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) { delayBlurEvent(cm); }\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt();\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt() == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt() != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n      var this$1 = this;\n\n    var input = this;\n    if (this.selectionInEditor())\n      { setTimeout(function () { return this$1.pollSelection(); }, 20); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, \u2026*/) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.65.0\";\n\n  return CodeMirror;\n\n})));\n", "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var trackScope = parserConfig.trackScope !== false\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\" && stream.peek() == \"!\") {\n      stream.skipToEnd();\n      return ret(\"meta\", \"meta\");\n    } else if (ch == \"#\" && stream.eatWhile(wordRE)) {\n      return ret(\"variable\", \"property\")\n    } else if (ch == \"<\" && stream.match(\"!--\") ||\n               (ch == \"-\" && stream.match(\"->\") && !/\\S/.test(stream.string.slice(0, stream.start)))) {\n      stream.skipToEnd()\n      return ret(\"comment\", \"comment\")\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-|&?]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      if (ch == \"?\" && stream.eat(\".\")) return ret(\".\")\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*([^*]|\\*(?!\\/))*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/`]/.test(ch)) {\n        for (;; --pos) {\n          if (pos == 0) return\n          var next = stream.string.charAt(pos - 1)\n          if (next == ch && stream.string.charAt(pos - 2) != \"\\\\\") { pos--; break }\n        }\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true,\n                     \"regexp\": true, \"this\": true, \"import\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    if (!trackScope) return false\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (!trackScope) return\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\" || type == \"}\" || type == \")\" || type == \"]\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), pushblockcontext, forspec, statement, popcontext, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) {\n      cx.marked = \"keyword\"\n      return cont(pushlex(\"form\", type == \"class\" ? type : value), className, poplex)\n    }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typename, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, statement, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(maybeexpression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^<>]|<[^<>]*>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(maybeexpression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      if (sep && sep.indexOf(\";\") > -1) return pass(what)\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function maybetypeOrIn(type, value) {\n    if (isTS && (type == \":\" || value == \"in\")) return cont(typeexpr)\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\" || value == \"infer\" || value == \"readonly\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"typeof\" ? expressionNoComma : typeexpr)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (value == \"|\" || value == \"&\") return cont(typeexpr)\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), typeprops, poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType, afterType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n    if (type == \"quasi\") { return pass(quasiType, afterType); }\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprops(type) {\n    if (type.match(/[\\}\\)\\]]/)) return cont()\n    if (type == \",\" || type == \";\") return cont(typeprops)\n    return pass(typeprop, typeprops)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\" || type == \"number\" || type == \"string\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expect(\"variable\"), maybetypeOrIn, expect(\"]\"), typeprop)\n    } else if (type == \"(\") {\n      return pass(functiondecl, typeprop)\n    } else if (!type.match(/[;\\}\\)\\],]/)) {\n      return cont()\n    }\n  }\n  function quasiType(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasiType);\n    return cont(typeexpr, continueQuasiType);\n  }\n  function continueQuasiType(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasiType);\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    if (type == \"spread\") return cont(typearg)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(typeexpr, expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n    if (value == \"?\") return cont(typeexpr, expect(\":\"), typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(eltpattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    if (type == \"[\") return cont(expression, expect(']'), expect(':'), proppattern);\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function eltpattern() {\n    return pass(pattern, maybeAssign)\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, forspec2);\n    if (type == \"variable\") return cont(forspec2);\n    return pass(forspec2)\n  }\n  function forspec2(type, value) {\n    if (type == \")\") return cont()\n    if (type == \";\") return cont(forspec2)\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression, forspec2) }\n    return pass(expression, forspec2)\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function functiondecl(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondecl);}\n    if (type == \"variable\") {register(value); return cont(functiondecl);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondecl)\n  }\n  function typename(type, value) {\n    if (type == \"keyword\" || type == \"variable\") {\n      cx.marked = \"type\"\n      return cont(typename)\n    } else if (value == \"<\") {\n      return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex)\n    }\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    if (isTS && type == \"this\") return cont(maybetype, maybeAssign)\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(classfield, classBody);\n    }\n    if (type == \"number\" || type == \"string\") return cont(classfield, classBody);\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), classfield, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (isTS && type == \"(\") return pass(functiondecl, classBody)\n    if (type == \";\" || type == \",\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"!\") return cont(classfield)\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    var context = cx.state.lexical.prev, isInterface = context && context.info == \"interface\"\n    return pass(isInterface ? functiondecl : functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    if (type == \".\") return pass(maybeoperatorComma);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment || state.tokenize == tokenQuasi) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse && c != popcontext) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      parseJS(state, \"atom\", \"atom\", \"true\", new CodeMirror.StringStream(\"\", 2, null))\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/manifest+json\", { name: \"javascript\", json: true })\nCodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n", "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// CodeMirror2 mode/perl/perl.js (text/x-perl) beta 0.10 (2011-11-08)\n// This is a part of CodeMirror from https://github.com/sabaca/CodeMirror_mode_perl (mail@sabaca.com)\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"perl\",function(){\n        // http://perldoc.perl.org\n        var PERL={                                      //   null - magic touch\n                                                        //   1 - keyword\n                                                        //   2 - def\n                                                        //   3 - atom\n                                                        //   4 - operator\n                                                        //   5 - variable-2 (predefined)\n                                                        //   [x,y] - x=1,2,3; y=must be defined if x{...}\n                                                //      PERL operators\n                '->'                            :   4,\n                '++'                            :   4,\n                '--'                            :   4,\n                '**'                            :   4,\n                                                        //   ! ~ \\ and unary + and -\n                '=~'                            :   4,\n                '!~'                            :   4,\n                '*'                             :   4,\n                '/'                             :   4,\n                '%'                             :   4,\n                'x'                             :   4,\n                '+'                             :   4,\n                '-'                             :   4,\n                '.'                             :   4,\n                '<<'                            :   4,\n                '>>'                            :   4,\n                                                        //   named unary operators\n                '<'                             :   4,\n                '>'                             :   4,\n                '<='                            :   4,\n                '>='                            :   4,\n                'lt'                            :   4,\n                'gt'                            :   4,\n                'le'                            :   4,\n                'ge'                            :   4,\n                '=='                            :   4,\n                '!='                            :   4,\n                '<=>'                           :   4,\n                'eq'                            :   4,\n                'ne'                            :   4,\n                'cmp'                           :   4,\n                '~~'                            :   4,\n                '&'                             :   4,\n                '|'                             :   4,\n                '^'                             :   4,\n                '&&'                            :   4,\n                '||'                            :   4,\n                '//'                            :   4,\n                '..'                            :   4,\n                '...'                           :   4,\n                '?'                             :   4,\n                ':'                             :   4,\n                '='                             :   4,\n                '+='                            :   4,\n                '-='                            :   4,\n                '*='                            :   4,  //   etc. ???\n                ','                             :   4,\n                '=>'                            :   4,\n                '::'                            :   4,\n                                                        //   list operators (rightward)\n                'not'                           :   4,\n                'and'                           :   4,\n                'or'                            :   4,\n                'xor'                           :   4,\n                                                //      PERL predefined variables (I know, what this is a paranoid idea, but may be needed for people, who learn PERL, and for me as well, ...and may be for you?;)\n                'BEGIN'                         :   [5,1],\n                'END'                           :   [5,1],\n                'PRINT'                         :   [5,1],\n                'PRINTF'                        :   [5,1],\n                'GETC'                          :   [5,1],\n                'READ'                          :   [5,1],\n                'READLINE'                      :   [5,1],\n                'DESTROY'                       :   [5,1],\n                'TIE'                           :   [5,1],\n                'TIEHANDLE'                     :   [5,1],\n                'UNTIE'                         :   [5,1],\n                'STDIN'                         :    5,\n                'STDIN_TOP'                     :    5,\n                'STDOUT'                        :    5,\n                'STDOUT_TOP'                    :    5,\n                'STDERR'                        :    5,\n                'STDERR_TOP'                    :    5,\n                '$ARG'                          :    5,\n                '$_'                            :    5,\n                '@ARG'                          :    5,\n                '@_'                            :    5,\n                '$LIST_SEPARATOR'               :    5,\n                '$\"'                            :    5,\n                '$PROCESS_ID'                   :    5,\n                '$PID'                          :    5,\n                '$$'                            :    5,\n                '$REAL_GROUP_ID'                :    5,\n                '$GID'                          :    5,\n                '$('                            :    5,\n                '$EFFECTIVE_GROUP_ID'           :    5,\n                '$EGID'                         :    5,\n                '$)'                            :    5,\n                '$PROGRAM_NAME'                 :    5,\n                '$0'                            :    5,\n                '$SUBSCRIPT_SEPARATOR'          :    5,\n                '$SUBSEP'                       :    5,\n                '$;'                            :    5,\n                '$REAL_USER_ID'                 :    5,\n                '$UID'                          :    5,\n                '$<'                            :    5,\n                '$EFFECTIVE_USER_ID'            :    5,\n                '$EUID'                         :    5,\n                '$>'                            :    5,\n                '$a'                            :    5,\n                '$b'                            :    5,\n                '$COMPILING'                    :    5,\n                '$^C'                           :    5,\n                '$DEBUGGING'                    :    5,\n                '$^D'                           :    5,\n                '${^ENCODING}'                  :    5,\n                '$ENV'                          :    5,\n                '%ENV'                          :    5,\n                '$SYSTEM_FD_MAX'                :    5,\n                '$^F'                           :    5,\n                '@F'                            :    5,\n                '${^GLOBAL_PHASE}'              :    5,\n                '$^H'                           :    5,\n                '%^H'                           :    5,\n                '@INC'                          :    5,\n                '%INC'                          :    5,\n                '$INPLACE_EDIT'                 :    5,\n                '$^I'                           :    5,\n                '$^M'                           :    5,\n                '$OSNAME'                       :    5,\n                '$^O'                           :    5,\n                '${^OPEN}'                      :    5,\n                '$PERLDB'                       :    5,\n                '$^P'                           :    5,\n                '$SIG'                          :    5,\n                '%SIG'                          :    5,\n                '$BASETIME'                     :    5,\n                '$^T'                           :    5,\n                '${^TAINT}'                     :    5,\n                '${^UNICODE}'                   :    5,\n                '${^UTF8CACHE}'                 :    5,\n                '${^UTF8LOCALE}'                :    5,\n                '$PERL_VERSION'                 :    5,\n                '$^V'                           :    5,\n                '${^WIN32_SLOPPY_STAT}'         :    5,\n                '$EXECUTABLE_NAME'              :    5,\n                '$^X'                           :    5,\n                '$1'                            :    5, // - regexp $1, $2...\n                '$MATCH'                        :    5,\n                '$&'                            :    5,\n                '${^MATCH}'                     :    5,\n                '$PREMATCH'                     :    5,\n                '$`'                            :    5,\n                '${^PREMATCH}'                  :    5,\n                '$POSTMATCH'                    :    5,\n                \"$'\"                            :    5,\n                '${^POSTMATCH}'                 :    5,\n                '$LAST_PAREN_MATCH'             :    5,\n                '$+'                            :    5,\n                '$LAST_SUBMATCH_RESULT'         :    5,\n                '$^N'                           :    5,\n                '@LAST_MATCH_END'               :    5,\n                '@+'                            :    5,\n                '%LAST_PAREN_MATCH'             :    5,\n                '%+'                            :    5,\n                '@LAST_MATCH_START'             :    5,\n                '@-'                            :    5,\n                '%LAST_MATCH_START'             :    5,\n                '%-'                            :    5,\n                '$LAST_REGEXP_CODE_RESULT'      :    5,\n                '$^R'                           :    5,\n                '${^RE_DEBUG_FLAGS}'            :    5,\n                '${^RE_TRIE_MAXBUF}'            :    5,\n                '$ARGV'                         :    5,\n                '@ARGV'                         :    5,\n                'ARGV'                          :    5,\n                'ARGVOUT'                       :    5,\n                '$OUTPUT_FIELD_SEPARATOR'       :    5,\n                '$OFS'                          :    5,\n                '$,'                            :    5,\n                '$INPUT_LINE_NUMBER'            :    5,\n                '$NR'                           :    5,\n                '$.'                            :    5,\n                '$INPUT_RECORD_SEPARATOR'       :    5,\n                '$RS'                           :    5,\n                '$/'                            :    5,\n                '$OUTPUT_RECORD_SEPARATOR'      :    5,\n                '$ORS'                          :    5,\n                '$\\\\'                           :    5,\n                '$OUTPUT_AUTOFLUSH'             :    5,\n                '$|'                            :    5,\n                '$ACCUMULATOR'                  :    5,\n                '$^A'                           :    5,\n                '$FORMAT_FORMFEED'              :    5,\n                '$^L'                           :    5,\n                '$FORMAT_PAGE_NUMBER'           :    5,\n                '$%'                            :    5,\n                '$FORMAT_LINES_LEFT'            :    5,\n                '$-'                            :    5,\n                '$FORMAT_LINE_BREAK_CHARACTERS' :    5,\n                '$:'                            :    5,\n                '$FORMAT_LINES_PER_PAGE'        :    5,\n                '$='                            :    5,\n                '$FORMAT_TOP_NAME'              :    5,\n                '$^'                            :    5,\n                '$FORMAT_NAME'                  :    5,\n                '$~'                            :    5,\n                '${^CHILD_ERROR_NATIVE}'        :    5,\n                '$EXTENDED_OS_ERROR'            :    5,\n                '$^E'                           :    5,\n                '$EXCEPTIONS_BEING_CAUGHT'      :    5,\n                '$^S'                           :    5,\n                '$WARNING'                      :    5,\n                '$^W'                           :    5,\n                '${^WARNING_BITS}'              :    5,\n                '$OS_ERROR'                     :    5,\n                '$ERRNO'                        :    5,\n                '$!'                            :    5,\n                '%OS_ERROR'                     :    5,\n                '%ERRNO'                        :    5,\n                '%!'                            :    5,\n                '$CHILD_ERROR'                  :    5,\n                '$?'                            :    5,\n                '$EVAL_ERROR'                   :    5,\n                '$@'                            :    5,\n                '$OFMT'                         :    5,\n                '$#'                            :    5,\n                '$*'                            :    5,\n                '$ARRAY_BASE'                   :    5,\n                '$['                            :    5,\n                '$OLD_PERL_VERSION'             :    5,\n                '$]'                            :    5,\n                                                //      PERL blocks\n                'if'                            :[1,1],\n                elsif                           :[1,1],\n                'else'                          :[1,1],\n                'while'                         :[1,1],\n                unless                          :[1,1],\n                'for'                           :[1,1],\n                foreach                         :[1,1],\n                                                //      PERL functions\n                'abs'                           :1,     // - absolute value function\n                accept                          :1,     // - accept an incoming socket connect\n                alarm                           :1,     // - schedule a SIGALRM\n                'atan2'                         :1,     // - arctangent of Y/X in the range -PI to PI\n                bind                            :1,     // - binds an address to a socket\n                binmode                         :1,     // - prepare binary files for I/O\n                bless                           :1,     // - create an object\n                bootstrap                       :1,     //\n                'break'                         :1,     // - break out of a \"given\" block\n                caller                          :1,     // - get context of the current subroutine call\n                chdir                           :1,     // - change your current working directory\n                chmod                           :1,     // - changes the permissions on a list of files\n                chomp                           :1,     // - remove a trailing record separator from a string\n                chop                            :1,     // - remove the last character from a string\n                chown                           :1,     // - change the ownership on a list of files\n                chr                             :1,     // - get character this number represents\n                chroot                          :1,     // - make directory new root for path lookups\n                close                           :1,     // - close file (or pipe or socket) handle\n                closedir                        :1,     // - close directory handle\n                connect                         :1,     // - connect to a remote socket\n                'continue'                      :[1,1], // - optional trailing block in a while or foreach\n                'cos'                           :1,     // - cosine function\n                crypt                           :1,     // - one-way passwd-style encryption\n                dbmclose                        :1,     // - breaks binding on a tied dbm file\n                dbmopen                         :1,     // - create binding on a tied dbm file\n                'default'                       :1,     //\n                defined                         :1,     // - test whether a value, variable, or function is defined\n                'delete'                        :1,     // - deletes a value from a hash\n                die                             :1,     // - raise an exception or bail out\n                'do'                            :1,     // - turn a BLOCK into a TERM\n                dump                            :1,     // - create an immediate core dump\n                each                            :1,     // - retrieve the next key/value pair from a hash\n                endgrent                        :1,     // - be done using group file\n                endhostent                      :1,     // - be done using hosts file\n                endnetent                       :1,     // - be done using networks file\n                endprotoent                     :1,     // - be done using protocols file\n                endpwent                        :1,     // - be done using passwd file\n                endservent                      :1,     // - be done using services file\n                eof                             :1,     // - test a filehandle for its end\n                'eval'                          :1,     // - catch exceptions or compile and run code\n                'exec'                          :1,     // - abandon this program to run another\n                exists                          :1,     // - test whether a hash key is present\n                exit                            :1,     // - terminate this program\n                'exp'                           :1,     // - raise I to a power\n                fcntl                           :1,     // - file control system call\n                fileno                          :1,     // - return file descriptor from filehandle\n                flock                           :1,     // - lock an entire file with an advisory lock\n                fork                            :1,     // - create a new process just like this one\n                format                          :1,     // - declare a picture format with use by the write() function\n                formline                        :1,     // - internal function used for formats\n                getc                            :1,     // - get the next character from the filehandle\n                getgrent                        :1,     // - get next group record\n                getgrgid                        :1,     // - get group record given group user ID\n                getgrnam                        :1,     // - get group record given group name\n                gethostbyaddr                   :1,     // - get host record given its address\n                gethostbyname                   :1,     // - get host record given name\n                gethostent                      :1,     // - get next hosts record\n                getlogin                        :1,     // - return who logged in at this tty\n                getnetbyaddr                    :1,     // - get network record given its address\n                getnetbyname                    :1,     // - get networks record given name\n                getnetent                       :1,     // - get next networks record\n                getpeername                     :1,     // - find the other end of a socket connection\n                getpgrp                         :1,     // - get process group\n                getppid                         :1,     // - get parent process ID\n                getpriority                     :1,     // - get current nice value\n                getprotobyname                  :1,     // - get protocol record given name\n                getprotobynumber                :1,     // - get protocol record numeric protocol\n                getprotoent                     :1,     // - get next protocols record\n                getpwent                        :1,     // - get next passwd record\n                getpwnam                        :1,     // - get passwd record given user login name\n                getpwuid                        :1,     // - get passwd record given user ID\n                getservbyname                   :1,     // - get services record given its name\n                getservbyport                   :1,     // - get services record given numeric port\n                getservent                      :1,     // - get next services record\n                getsockname                     :1,     // - retrieve the sockaddr for a given socket\n                getsockopt                      :1,     // - get socket options on a given socket\n                given                           :1,     //\n                glob                            :1,     // - expand filenames using wildcards\n                gmtime                          :1,     // - convert UNIX time into record or string using Greenwich time\n                'goto'                          :1,     // - create spaghetti code\n                grep                            :1,     // - locate elements in a list test true against a given criterion\n                hex                             :1,     // - convert a string to a hexadecimal number\n                'import'                        :1,     // - patch a module's namespace into your own\n                index                           :1,     // - find a substring within a string\n                'int'                           :1,     // - get the integer portion of a number\n                ioctl                           :1,     // - system-dependent device control system call\n                'join'                          :1,     // - join a list into a string using a separator\n                keys                            :1,     // - retrieve list of indices from a hash\n                kill                            :1,     // - send a signal to a process or process group\n                last                            :1,     // - exit a block prematurely\n                lc                              :1,     // - return lower-case version of a string\n                lcfirst                         :1,     // - return a string with just the next letter in lower case\n                length                          :1,     // - return the number of bytes in a string\n                'link'                          :1,     // - create a hard link in the filesystem\n                listen                          :1,     // - register your socket as a server\n                local                           : 2,    // - create a temporary value for a global variable (dynamic scoping)\n                localtime                       :1,     // - convert UNIX time into record or string using local time\n                lock                            :1,     // - get a thread lock on a variable, subroutine, or method\n                'log'                           :1,     // - retrieve the natural logarithm for a number\n                lstat                           :1,     // - stat a symbolic link\n                m                               :null,  // - match a string with a regular expression pattern\n                map                             :1,     // - apply a change to a list to get back a new list with the changes\n                mkdir                           :1,     // - create a directory\n                msgctl                          :1,     // - SysV IPC message control operations\n                msgget                          :1,     // - get SysV IPC message queue\n                msgrcv                          :1,     // - receive a SysV IPC message from a message queue\n                msgsnd                          :1,     // - send a SysV IPC message to a message queue\n                my                              : 2,    // - declare and assign a local variable (lexical scoping)\n                'new'                           :1,     //\n                next                            :1,     // - iterate a block prematurely\n                no                              :1,     // - unimport some module symbols or semantics at compile time\n                oct                             :1,     // - convert a string to an octal number\n                open                            :1,     // - open a file, pipe, or descriptor\n                opendir                         :1,     // - open a directory\n                ord                             :1,     // - find a character's numeric representation\n                our                             : 2,    // - declare and assign a package variable (lexical scoping)\n                pack                            :1,     // - convert a list into a binary representation\n                'package'                       :1,     // - declare a separate global namespace\n                pipe                            :1,     // - open a pair of connected filehandles\n                pop                             :1,     // - remove the last element from an array and return it\n                pos                             :1,     // - find or set the offset for the last/next m//g search\n                print                           :1,     // - output a list to a filehandle\n                printf                          :1,     // - output a formatted list to a filehandle\n                prototype                       :1,     // - get the prototype (if any) of a subroutine\n                push                            :1,     // - append one or more elements to an array\n                q                               :null,  // - singly quote a string\n                qq                              :null,  // - doubly quote a string\n                qr                              :null,  // - Compile pattern\n                quotemeta                       :null,  // - quote regular expression magic characters\n                qw                              :null,  // - quote a list of words\n                qx                              :null,  // - backquote quote a string\n                rand                            :1,     // - retrieve the next pseudorandom number\n                read                            :1,     // - fixed-length buffered input from a filehandle\n                readdir                         :1,     // - get a directory from a directory handle\n                readline                        :1,     // - fetch a record from a file\n                readlink                        :1,     // - determine where a symbolic link is pointing\n                readpipe                        :1,     // - execute a system command and collect standard output\n                recv                            :1,     // - receive a message over a Socket\n                redo                            :1,     // - start this loop iteration over again\n                ref                             :1,     // - find out the type of thing being referenced\n                rename                          :1,     // - change a filename\n                require                         :1,     // - load in external functions from a library at runtime\n                reset                           :1,     // - clear all variables of a given name\n                'return'                        :1,     // - get out of a function early\n                reverse                         :1,     // - flip a string or a list\n                rewinddir                       :1,     // - reset directory handle\n                rindex                          :1,     // - right-to-left substring search\n                rmdir                           :1,     // - remove a directory\n                s                               :null,  // - replace a pattern with a string\n                say                             :1,     // - print with newline\n                scalar                          :1,     // - force a scalar context\n                seek                            :1,     // - reposition file pointer for random-access I/O\n                seekdir                         :1,     // - reposition directory pointer\n                select                          :1,     // - reset default output or do I/O multiplexing\n                semctl                          :1,     // - SysV semaphore control operations\n                semget                          :1,     // - get set of SysV semaphores\n                semop                           :1,     // - SysV semaphore operations\n                send                            :1,     // - send a message over a socket\n                setgrent                        :1,     // - prepare group file for use\n                sethostent                      :1,     // - prepare hosts file for use\n                setnetent                       :1,     // - prepare networks file for use\n                setpgrp                         :1,     // - set the process group of a process\n                setpriority                     :1,     // - set a process's nice value\n                setprotoent                     :1,     // - prepare protocols file for use\n                setpwent                        :1,     // - prepare passwd file for use\n                setservent                      :1,     // - prepare services file for use\n                setsockopt                      :1,     // - set some socket options\n                shift                           :1,     // - remove the first element of an array, and return it\n                shmctl                          :1,     // - SysV shared memory operations\n                shmget                          :1,     // - get SysV shared memory segment identifier\n                shmread                         :1,     // - read SysV shared memory\n                shmwrite                        :1,     // - write SysV shared memory\n                shutdown                        :1,     // - close down just half of a socket connection\n                'sin'                           :1,     // - return the sine of a number\n                sleep                           :1,     // - block for some number of seconds\n                socket                          :1,     // - create a socket\n                socketpair                      :1,     // - create a pair of sockets\n                'sort'                          :1,     // - sort a list of values\n                splice                          :1,     // - add or remove elements anywhere in an array\n                'split'                         :1,     // - split up a string using a regexp delimiter\n                sprintf                         :1,     // - formatted print into a string\n                'sqrt'                          :1,     // - square root function\n                srand                           :1,     // - seed the random number generator\n                stat                            :1,     // - get a file's status information\n                state                           :1,     // - declare and assign a state variable (persistent lexical scoping)\n                study                           :1,     // - optimize input data for repeated searches\n                'sub'                           :1,     // - declare a subroutine, possibly anonymously\n                'substr'                        :1,     // - get or alter a portion of a string\n                symlink                         :1,     // - create a symbolic link to a file\n                syscall                         :1,     // - execute an arbitrary system call\n                sysopen                         :1,     // - open a file, pipe, or descriptor\n                sysread                         :1,     // - fixed-length unbuffered input from a filehandle\n                sysseek                         :1,     // - position I/O pointer on handle used with sysread and syswrite\n                system                          :1,     // - run a separate program\n                syswrite                        :1,     // - fixed-length unbuffered output to a filehandle\n                tell                            :1,     // - get current seekpointer on a filehandle\n                telldir                         :1,     // - get current seekpointer on a directory handle\n                tie                             :1,     // - bind a variable to an object class\n                tied                            :1,     // - get a reference to the object underlying a tied variable\n                time                            :1,     // - return number of seconds since 1970\n                times                           :1,     // - return elapsed time for self and child processes\n                tr                              :null,  // - transliterate a string\n                truncate                        :1,     // - shorten a file\n                uc                              :1,     // - return upper-case version of a string\n                ucfirst                         :1,     // - return a string with just the next letter in upper case\n                umask                           :1,     // - set file creation mode mask\n                undef                           :1,     // - remove a variable or function definition\n                unlink                          :1,     // - remove one link to a file\n                unpack                          :1,     // - convert binary structure into normal perl variables\n                unshift                         :1,     // - prepend more elements to the beginning of a list\n                untie                           :1,     // - break a tie binding to a variable\n                use                             :1,     // - load in a module at compile time\n                utime                           :1,     // - set a file's last access and modify times\n                values                          :1,     // - return a list of the values in a hash\n                vec                             :1,     // - test or set particular bits in a string\n                wait                            :1,     // - wait for any child process to die\n                waitpid                         :1,     // - wait for a particular child process to die\n                wantarray                       :1,     // - get void vs scalar vs list context of current subroutine call\n                warn                            :1,     // - print debugging info\n                when                            :1,     //\n                write                           :1,     // - print a picture record\n                y                               :null}; // - transliterate a string\n\n        var RXstyle=\"string-2\";\n        var RXmodifiers=/[goseximacplud]/;              // NOTE: \"m\", \"s\", \"y\" and \"tr\" need to correct real modifiers for each regexp type\n\n        function tokenChain(stream,state,chain,style,tail){     // NOTE: chain.length > 2 is not working now (it's for s[...][...]geos;)\n                state.chain=null;                               //                                                          12   3tail\n                state.style=null;\n                state.tail=null;\n                state.tokenize=function(stream,state){\n                        var e=false,c,i=0;\n                        while(c=stream.next()){\n                                if(c===chain[i]&&!e){\n                                        if(chain[++i]!==undefined){\n                                                state.chain=chain[i];\n                                                state.style=style;\n                                                state.tail=tail;}\n                                        else if(tail)\n                                                stream.eatWhile(tail);\n                                        state.tokenize=tokenPerl;\n                                        return style;}\n                                e=!e&&c==\"\\\\\";}\n                        return style;};\n                return state.tokenize(stream,state);}\n\n        function tokenSOMETHING(stream,state,string){\n                state.tokenize=function(stream,state){\n                        if(stream.string==string)\n                                state.tokenize=tokenPerl;\n                        stream.skipToEnd();\n                        return \"string\";};\n                return state.tokenize(stream,state);}\n\n        function tokenPerl(stream,state){\n                if(stream.eatSpace())\n                        return null;\n                if(state.chain)\n                        return tokenChain(stream,state,state.chain,state.style,state.tail);\n                if(stream.match(/^\\-?[\\d\\.]/,false))\n                        if(stream.match(/^(\\-?(\\d*\\.\\d+(e[+-]?\\d+)?|\\d+\\.\\d*)|0x[\\da-fA-F]+|0b[01]+|\\d+(e[+-]?\\d+)?)/))\n                                return 'number';\n                if(stream.match(/^<<(?=[_a-zA-Z])/)){                  // NOTE: <<SOMETHING\\n...\\nSOMETHING\\n\n                        stream.eatWhile(/\\w/);\n                        return tokenSOMETHING(stream,state,stream.current().substr(2));}\n                if(stream.sol()&&stream.match(/^\\=item(?!\\w)/)){// NOTE: \\n=item...\\n=cut\\n\n                        return tokenSOMETHING(stream,state,'=cut');}\n                var ch=stream.next();\n                if(ch=='\"'||ch==\"'\"){                           // NOTE: ' or \" or <<'SOMETHING'\\n...\\nSOMETHING\\n or <<\"SOMETHING\"\\n...\\nSOMETHING\\n\n                        if(prefix(stream, 3)==\"<<\"+ch){\n                                var p=stream.pos;\n                                stream.eatWhile(/\\w/);\n                                var n=stream.current().substr(1);\n                                if(n&&stream.eat(ch))\n                                        return tokenSOMETHING(stream,state,n);\n                                stream.pos=p;}\n                        return tokenChain(stream,state,[ch],\"string\");}\n                if(ch==\"q\"){\n                        var c=look(stream, -2);\n                        if(!(c&&/\\w/.test(c))){\n                                c=look(stream, 0);\n                                if(c==\"x\"){\n                                        c=look(stream, 1);\n                                        if(c==\"(\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\")\"],RXstyle,RXmodifiers);}\n                                        if(c==\"[\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"]\"],RXstyle,RXmodifiers);}\n                                        if(c==\"{\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"}\"],RXstyle,RXmodifiers);}\n                                        if(c==\"<\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\">\"],RXstyle,RXmodifiers);}\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[stream.eat(c)],RXstyle,RXmodifiers);}}\n                                else if(c==\"q\"){\n                                        c=look(stream, 1);\n                                        if(c==\"(\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\")\"],\"string\");}\n                                        if(c==\"[\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"]\"],\"string\");}\n                                        if(c==\"{\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"}\"],\"string\");}\n                                        if(c==\"<\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\">\"],\"string\");}\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[stream.eat(c)],\"string\");}}\n                                else if(c==\"w\"){\n                                        c=look(stream, 1);\n                                        if(c==\"(\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\")\"],\"bracket\");}\n                                        if(c==\"[\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"]\"],\"bracket\");}\n                                        if(c==\"{\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"}\"],\"bracket\");}\n                                        if(c==\"<\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\">\"],\"bracket\");}\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[stream.eat(c)],\"bracket\");}}\n                                else if(c==\"r\"){\n                                        c=look(stream, 1);\n                                        if(c==\"(\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\")\"],RXstyle,RXmodifiers);}\n                                        if(c==\"[\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"]\"],RXstyle,RXmodifiers);}\n                                        if(c==\"{\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\"}\"],RXstyle,RXmodifiers);}\n                                        if(c==\"<\"){\n                                                eatSuffix(stream, 2);\n                                                return tokenChain(stream,state,[\">\"],RXstyle,RXmodifiers);}\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[stream.eat(c)],RXstyle,RXmodifiers);}}\n                                else if(/[\\^'\"!~\\/(\\[{<]/.test(c)){\n                                        if(c==\"(\"){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[\")\"],\"string\");}\n                                        if(c==\"[\"){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[\"]\"],\"string\");}\n                                        if(c==\"{\"){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[\"}\"],\"string\");}\n                                        if(c==\"<\"){\n                                                eatSuffix(stream, 1);\n                                                return tokenChain(stream,state,[\">\"],\"string\");}\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                return tokenChain(stream,state,[stream.eat(c)],\"string\");}}}}\n                if(ch==\"m\"){\n                        var c=look(stream, -2);\n                        if(!(c&&/\\w/.test(c))){\n                                c=stream.eat(/[(\\[{<\\^'\"!~\\/]/);\n                                if(c){\n                                        if(/[\\^'\"!~\\/]/.test(c)){\n                                                return tokenChain(stream,state,[c],RXstyle,RXmodifiers);}\n                                        if(c==\"(\"){\n                                                return tokenChain(stream,state,[\")\"],RXstyle,RXmodifiers);}\n                                        if(c==\"[\"){\n                                                return tokenChain(stream,state,[\"]\"],RXstyle,RXmodifiers);}\n                                        if(c==\"{\"){\n                                                return tokenChain(stream,state,[\"}\"],RXstyle,RXmodifiers);}\n                                        if(c==\"<\"){\n                                                return tokenChain(stream,state,[\">\"],RXstyle,RXmodifiers);}}}}\n                if(ch==\"s\"){\n                        var c=/[\\/>\\]})\\w]/.test(look(stream, -2));\n                        if(!c){\n                                c=stream.eat(/[(\\[{<\\^'\"!~\\/]/);\n                                if(c){\n                                        if(c==\"[\")\n                                                return tokenChain(stream,state,[\"]\",\"]\"],RXstyle,RXmodifiers);\n                                        if(c==\"{\")\n                                                return tokenChain(stream,state,[\"}\",\"}\"],RXstyle,RXmodifiers);\n                                        if(c==\"<\")\n                                                return tokenChain(stream,state,[\">\",\">\"],RXstyle,RXmodifiers);\n                                        if(c==\"(\")\n                                                return tokenChain(stream,state,[\")\",\")\"],RXstyle,RXmodifiers);\n                                        return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers);}}}\n                if(ch==\"y\"){\n                        var c=/[\\/>\\]})\\w]/.test(look(stream, -2));\n                        if(!c){\n                                c=stream.eat(/[(\\[{<\\^'\"!~\\/]/);\n                                if(c){\n                                        if(c==\"[\")\n                                                return tokenChain(stream,state,[\"]\",\"]\"],RXstyle,RXmodifiers);\n                                        if(c==\"{\")\n                                                return tokenChain(stream,state,[\"}\",\"}\"],RXstyle,RXmodifiers);\n                                        if(c==\"<\")\n                                                return tokenChain(stream,state,[\">\",\">\"],RXstyle,RXmodifiers);\n                                        if(c==\"(\")\n                                                return tokenChain(stream,state,[\")\",\")\"],RXstyle,RXmodifiers);\n                                        return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers);}}}\n                if(ch==\"t\"){\n                        var c=/[\\/>\\]})\\w]/.test(look(stream, -2));\n                        if(!c){\n                                c=stream.eat(\"r\");if(c){\n                                c=stream.eat(/[(\\[{<\\^'\"!~\\/]/);\n                                if(c){\n                                        if(c==\"[\")\n                                                return tokenChain(stream,state,[\"]\",\"]\"],RXstyle,RXmodifiers);\n                                        if(c==\"{\")\n                                                return tokenChain(stream,state,[\"}\",\"}\"],RXstyle,RXmodifiers);\n                                        if(c==\"<\")\n                                                return tokenChain(stream,state,[\">\",\">\"],RXstyle,RXmodifiers);\n                                        if(c==\"(\")\n                                                return tokenChain(stream,state,[\")\",\")\"],RXstyle,RXmodifiers);\n                                        return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers);}}}}\n                if(ch==\"`\"){\n                        return tokenChain(stream,state,[ch],\"variable-2\");}\n                if(ch==\"/\"){\n                        if(!/~\\s*$/.test(prefix(stream)))\n                                return \"operator\";\n                        else\n                                return tokenChain(stream,state,[ch],RXstyle,RXmodifiers);}\n                if(ch==\"$\"){\n                        var p=stream.pos;\n                        if(stream.eatWhile(/\\d/)||stream.eat(\"{\")&&stream.eatWhile(/\\d/)&&stream.eat(\"}\"))\n                                return \"variable-2\";\n                        else\n                                stream.pos=p;}\n                if(/[$@%]/.test(ch)){\n                        var p=stream.pos;\n                        if(stream.eat(\"^\")&&stream.eat(/[A-Z]/)||!/[@$%&]/.test(look(stream, -2))&&stream.eat(/[=|\\\\\\-#?@;:&`~\\^!\\[\\]*'\"$+.,\\/<>()]/)){\n                                var c=stream.current();\n                                if(PERL[c])\n                                        return \"variable-2\";}\n                        stream.pos=p;}\n                if(/[$@%&]/.test(ch)){\n                        if(stream.eatWhile(/[\\w$]/)||stream.eat(\"{\")&&stream.eatWhile(/[\\w$]/)&&stream.eat(\"}\")){\n                                var c=stream.current();\n                                if(PERL[c])\n                                        return \"variable-2\";\n                                else\n                                        return \"variable\";}}\n                if(ch==\"#\"){\n                        if(look(stream, -2)!=\"$\"){\n                                stream.skipToEnd();\n                                return \"comment\";}}\n                if(/[:+\\-\\^*$&%@=<>!?|\\/~\\.]/.test(ch)){\n                        var p=stream.pos;\n                        stream.eatWhile(/[:+\\-\\^*$&%@=<>!?|\\/~\\.]/);\n                        if(PERL[stream.current()])\n                                return \"operator\";\n                        else\n                                stream.pos=p;}\n                if(ch==\"_\"){\n                        if(stream.pos==1){\n                                if(suffix(stream, 6)==\"_END__\"){\n                                        return tokenChain(stream,state,['\\0'],\"comment\");}\n                                else if(suffix(stream, 7)==\"_DATA__\"){\n                                        return tokenChain(stream,state,['\\0'],\"variable-2\");}\n                                else if(suffix(stream, 7)==\"_C__\"){\n                                        return tokenChain(stream,state,['\\0'],\"string\");}}}\n                if(/\\w/.test(ch)){\n                        var p=stream.pos;\n                        if(look(stream, -2)==\"{\"&&(look(stream, 0)==\"}\"||stream.eatWhile(/\\w/)&&look(stream, 0)==\"}\"))\n                                return \"string\";\n                        else\n                                stream.pos=p;}\n                if(/[A-Z]/.test(ch)){\n                        var l=look(stream, -2);\n                        var p=stream.pos;\n                        stream.eatWhile(/[A-Z_]/);\n                        if(/[\\da-z]/.test(look(stream, 0))){\n                                stream.pos=p;}\n                        else{\n                                var c=PERL[stream.current()];\n                                if(!c)\n                                        return \"meta\";\n                                if(c[1])\n                                        c=c[0];\n                                if(l!=\":\"){\n                                        if(c==1)\n                                                return \"keyword\";\n                                        else if(c==2)\n                                                return \"def\";\n                                        else if(c==3)\n                                                return \"atom\";\n                                        else if(c==4)\n                                                return \"operator\";\n                                        else if(c==5)\n                                                return \"variable-2\";\n                                        else\n                                                return \"meta\";}\n                                else\n                                        return \"meta\";}}\n                if(/[a-zA-Z_]/.test(ch)){\n                        var l=look(stream, -2);\n                        stream.eatWhile(/\\w/);\n                        var c=PERL[stream.current()];\n                        if(!c)\n                                return \"meta\";\n                        if(c[1])\n                                c=c[0];\n                        if(l!=\":\"){\n                                if(c==1)\n                                        return \"keyword\";\n                                else if(c==2)\n                                        return \"def\";\n                                else if(c==3)\n                                        return \"atom\";\n                                else if(c==4)\n                                        return \"operator\";\n                                else if(c==5)\n                                        return \"variable-2\";\n                                else\n                                        return \"meta\";}\n                        else\n                                return \"meta\";}\n                return null;}\n\n        return {\n            startState: function() {\n                return {\n                    tokenize: tokenPerl,\n                    chain: null,\n                    style: null,\n                    tail: null\n                };\n            },\n            token: function(stream, state) {\n                return (state.tokenize || tokenPerl)(stream, state);\n            },\n            lineComment: '#'\n        };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"perl\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/x-perl\", \"perl\");\n\n// it's like \"peek\", but need for look-ahead or look-behind if index < 0\nfunction look(stream, c){\n  return stream.string.charAt(stream.pos+(c||0));\n}\n\n// return a part of prefix of current stream from current position\nfunction prefix(stream, c){\n  if(c){\n    var x=stream.pos-c;\n    return stream.string.substr((x>=0?x:0),c);}\n  else{\n    return stream.string.substr(0,stream.pos-1);\n  }\n}\n\n// return a part of suffix of current stream from current position\nfunction suffix(stream, c){\n  var y=stream.string.length;\n  var x=y-stream.pos+1;\n  return stream.string.substr(stream.pos,(c&&c<y?c:x));\n}\n\n// eating and vomiting a part of stream from current position\nfunction eatSuffix(stream, c){\n  var x=stream.pos+c;\n  var y;\n  if(x<=0)\n    stream.pos=0;\n  else if(x>=(y=stream.string.length-1))\n    stream.pos=y;\n  else\n    stream.pos=x;\n}\n\n});\n", "(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport * as Strings from 'browser/LocalizableStrings';\nimport { ITerminal, IRenderDebouncer } from 'browser/Types';\nimport { IBuffer } from 'common/buffer/Types';\nimport { isMac } from 'common/Platform';\nimport { TimeBasedDebouncer } from 'browser/TimeBasedDebouncer';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { Disposable } from 'common/Lifecycle';\nimport { ScreenDprMonitor } from 'browser/ScreenDprMonitor';\nimport { IRenderService } from 'browser/services/Services';\nimport { removeElementFromParent } from 'browser/Dom';\n\nconst MAX_ROWS_TO_READ = 20;\n\nconst enum BoundaryPosition {\n  TOP,\n  BOTTOM\n}\n\nexport class AccessibilityManager extends Disposable {\n  private _accessibilityTreeRoot: HTMLElement;\n  private _rowContainer: HTMLElement;\n  private _rowElements: HTMLElement[];\n  private _liveRegion: HTMLElement;\n  private _liveRegionLineCount: number = 0;\n\n  private _renderRowsDebouncer: IRenderDebouncer;\n  private _screenDprMonitor: ScreenDprMonitor;\n\n  private _topBoundaryFocusListener: (e: FocusEvent) => void;\n  private _bottomBoundaryFocusListener: (e: FocusEvent) => void;\n\n  /**\n   * This queue has a character pushed to it for keys that are pressed, if the\n   * next character added to the terminal is equal to the key char then it is\n   * not announced (added to live region) because it has already been announced\n   * by the textarea event (which cannot be canceled). There are some race\n   * condition cases if there is typing while data is streaming, but this covers\n   * the main case of typing into the prompt and inputting the answer to a\n   * question (Y/N, etc.).\n   */\n  private _charsToConsume: string[] = [];\n\n  private _charsToAnnounce: string = '';\n\n  constructor(\n    private readonly _terminal: ITerminal,\n    private readonly _renderService: IRenderService\n  ) {\n    super();\n    this._accessibilityTreeRoot = document.createElement('div');\n    this._accessibilityTreeRoot.setAttribute('role', 'document');\n    this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n    this._accessibilityTreeRoot.tabIndex = 0;\n\n    this._rowContainer = document.createElement('div');\n    this._rowContainer.setAttribute('role', 'list');\n    this._rowContainer.classList.add('xterm-accessibility-tree');\n    this._rowElements = [];\n    for (let i = 0; i < this._terminal.rows; i++) {\n      this._rowElements[i] = this._createAccessibilityTreeNode();\n      this._rowContainer.appendChild(this._rowElements[i]);\n    }\n\n    this._topBoundaryFocusListener = e => this._onBoundaryFocus(e, BoundaryPosition.TOP);\n    this._bottomBoundaryFocusListener = e => this._onBoundaryFocus(e, BoundaryPosition.BOTTOM);\n    this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    this._refreshRowsDimensions();\n    this._accessibilityTreeRoot.appendChild(this._rowContainer);\n\n    this._renderRowsDebouncer = new TimeBasedDebouncer(this._renderRows.bind(this));\n    this._refreshRows();\n\n    this._liveRegion = document.createElement('div');\n    this._liveRegion.classList.add('live-region');\n    this._liveRegion.setAttribute('aria-live', 'assertive');\n    this._accessibilityTreeRoot.appendChild(this._liveRegion);\n\n    if (!this._terminal.element) {\n      throw new Error('Cannot enable accessibility before Terminal.open');\n    }\n    this._terminal.element.insertAdjacentElement('afterbegin', this._accessibilityTreeRoot);\n\n    this.register(this._renderRowsDebouncer);\n    this.register(this._terminal.onResize(e => this._onResize(e.rows)));\n    this.register(this._terminal.onRender(e => this._refreshRows(e.start, e.end)));\n    this.register(this._terminal.onScroll(() => this._refreshRows()));\n    // Line feed is an issue as the prompt won't be read out after a command is run\n    this.register(this._terminal.onA11yChar(char => this._onChar(char)));\n    this.register(this._terminal.onLineFeed(() => this._onChar('\\n')));\n    this.register(this._terminal.onA11yTab(spaceCount => this._onTab(spaceCount)));\n    this.register(this._terminal.onKey(e => this._onKey(e.key)));\n    this.register(this._terminal.onBlur(() => this._clearLiveRegion()));\n    this.register(this._renderService.onDimensionsChange(() => this._refreshRowsDimensions()));\n\n    this._screenDprMonitor = new ScreenDprMonitor();\n    this.register(this._screenDprMonitor);\n    this._screenDprMonitor.setListener(() => this._refreshRowsDimensions());\n    // This shouldn't be needed on modern browsers but is present in case the\n    // media query that drives the ScreenDprMonitor isn't supported\n    this.register(addDisposableDomListener(window, 'resize', () => this._refreshRowsDimensions()));\n  }\n\n  public dispose(): void {\n    super.dispose();\n    removeElementFromParent(this._accessibilityTreeRoot);\n    this._rowElements.length = 0;\n  }\n\n  private _onBoundaryFocus(e: FocusEvent, position: BoundaryPosition): void {\n    const boundaryElement = e.target as HTMLElement;\n    const beforeBoundaryElement = this._rowElements[position === BoundaryPosition.TOP ? 1 : this._rowElements.length - 2];\n\n    // Don't scroll if the buffer top has reached the end in that direction\n    const posInSet = boundaryElement.getAttribute('aria-posinset');\n    const lastRowPos = position === BoundaryPosition.TOP ? '1' : `${this._terminal.buffer.lines.length}`;\n    if (posInSet === lastRowPos) {\n      return;\n    }\n\n    // Don't scroll when the last focused item was not the second row (focus is going the other\n    // direction)\n    if (e.relatedTarget !== beforeBoundaryElement) {\n      return;\n    }\n\n    // Remove old boundary element from array\n    let topBoundaryElement: HTMLElement;\n    let bottomBoundaryElement: HTMLElement;\n    if (position === BoundaryPosition.TOP) {\n      topBoundaryElement = boundaryElement;\n      bottomBoundaryElement = this._rowElements.pop()!;\n      this._rowContainer.removeChild(bottomBoundaryElement);\n    } else {\n      topBoundaryElement = this._rowElements.shift()!;\n      bottomBoundaryElement = boundaryElement;\n      this._rowContainer.removeChild(topBoundaryElement);\n    }\n\n    // Remove listeners from old boundary elements\n    topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n    bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Add new element to array/DOM\n    if (position === BoundaryPosition.TOP) {\n      const newElement = this._createAccessibilityTreeNode();\n      this._rowElements.unshift(newElement);\n      this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n    } else {\n      const newElement = this._createAccessibilityTreeNode();\n      this._rowElements.push(newElement);\n      this._rowContainer.appendChild(newElement);\n    }\n\n    // Add listeners to new boundary elements\n    this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Scroll up\n    this._terminal.scrollLines(position === BoundaryPosition.TOP ? -1 : 1);\n\n    // Focus new boundary before element\n    this._rowElements[position === BoundaryPosition.TOP ? 1 : this._rowElements.length - 2].focus();\n\n    // Prevent the standard behavior\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  private _onResize(rows: number): void {\n    // Remove bottom boundary listener\n    this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n\n    // Grow rows as required\n    for (let i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n      this._rowElements[i] = this._createAccessibilityTreeNode();\n      this._rowContainer.appendChild(this._rowElements[i]);\n    }\n    // Shrink rows as required\n    while (this._rowElements.length > rows) {\n      this._rowContainer.removeChild(this._rowElements.pop()!);\n    }\n\n    // Add bottom boundary listener\n    this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n\n    this._refreshRowsDimensions();\n  }\n\n  private _createAccessibilityTreeNode(): HTMLElement {\n    const element = document.createElement('div');\n    element.setAttribute('role', 'listitem');\n    element.tabIndex = -1;\n    this._refreshRowDimensions(element);\n    return element;\n  }\n\n  private _onTab(spaceCount: number): void {\n    for (let i = 0; i < spaceCount; i++) {\n      this._onChar(' ');\n    }\n  }\n\n  private _onChar(char: string): void {\n    if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n      if (this._charsToConsume.length > 0) {\n        // Have the screen reader ignore the char if it was just input\n        const shiftedChar = this._charsToConsume.shift();\n        if (shiftedChar !== char) {\n          this._charsToAnnounce += char;\n        }\n      } else {\n        this._charsToAnnounce += char;\n      }\n\n      if (char === '\\n') {\n        this._liveRegionLineCount++;\n        if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n          this._liveRegion.textContent += Strings.tooMuchOutput;\n        }\n      }\n\n      // Only detach/attach on mac as otherwise messages can go unaccounced\n      if (isMac) {\n        if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n          setTimeout(() => {\n            this._accessibilityTreeRoot.appendChild(this._liveRegion);\n          }, 0);\n        }\n      }\n    }\n  }\n\n  private _clearLiveRegion(): void {\n    this._liveRegion.textContent = '';\n    this._liveRegionLineCount = 0;\n\n    // Only detach/attach on mac as otherwise messages can go unaccounced\n    if (isMac) {\n      removeElementFromParent(this._liveRegion);\n    }\n  }\n\n  private _onKey(keyChar: string): void {\n    this._clearLiveRegion();\n    this._charsToConsume.push(keyChar);\n  }\n\n  private _refreshRows(start?: number, end?: number): void {\n    this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n  }\n\n  private _renderRows(start: number, end: number): void {\n    const buffer: IBuffer = this._terminal.buffer;\n    const setSize = buffer.lines.length.toString();\n    for (let i = start; i <= end; i++) {\n      const lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n      const posInSet = (buffer.ydisp + i + 1).toString();\n      const element = this._rowElements[i];\n      if (element) {\n        if (lineData.length === 0) {\n          element.innerText = '\\u00a0';\n        } else {\n          element.textContent = lineData;\n        }\n        element.setAttribute('aria-posinset', posInSet);\n        element.setAttribute('aria-setsize', setSize);\n      }\n    }\n    this._announceCharacters();\n  }\n\n  private _refreshRowsDimensions(): void {\n    if (!this._renderService.dimensions.actualCellHeight) {\n      return;\n    }\n    if (this._rowElements.length !== this._terminal.rows) {\n      this._onResize(this._terminal.rows);\n    }\n    for (let i = 0; i < this._terminal.rows; i++) {\n      this._refreshRowDimensions(this._rowElements[i]);\n    }\n  }\n\n  private _refreshRowDimensions(element: HTMLElement): void {\n    element.style.height = `${this._renderService.dimensions.actualCellHeight}px`;\n  }\n\n  private _announceCharacters(): void {\n    if (this._charsToAnnounce.length === 0) {\n      return;\n    }\n    this._liveRegion.textContent += this._charsToAnnounce;\n    this._charsToAnnounce = '';\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ISelectionService } from 'browser/services/Services';\nimport { ICoreService } from 'common/services/Services';\n\n/**\n * Prepares text to be pasted into the terminal by normalizing the line endings\n * @param text The pasted text that needs processing before inserting into the terminal\n */\nexport function prepareTextForTerminal(text: string): string {\n  return text.replace(/\\r?\\n/g, '\\r');\n}\n\n/**\n * Bracket text for paste, if necessary, as per https://cirw.in/blog/bracketed-paste\n * @param text The pasted text to bracket\n */\nexport function bracketTextForPaste(text: string, bracketedPasteMode: boolean): string {\n  if (bracketedPasteMode) {\n    return '\\x1b[200~' + text + '\\x1b[201~';\n  }\n  return text;\n}\n\n/**\n * Binds copy functionality to the given terminal.\n * @param ev The original copy event to be handled\n */\nexport function copyHandler(ev: ClipboardEvent, selectionService: ISelectionService): void {\n  if (ev.clipboardData) {\n    ev.clipboardData.setData('text/plain', selectionService.selectionText);\n  }\n  // Prevent or the original text will be copied.\n  ev.preventDefault();\n}\n\n/**\n * Redirect the clipboard's data to the terminal's input handler.\n * @param ev The original paste event to be handled\n * @param term The terminal on which to apply the handled paste event\n */\nexport function handlePasteEvent(ev: ClipboardEvent, textarea: HTMLTextAreaElement, coreService: ICoreService): void {\n  ev.stopPropagation();\n  if (ev.clipboardData) {\n    const text = ev.clipboardData.getData('text/plain');\n    paste(text, textarea, coreService);\n  }\n}\n\nexport function paste(text: string, textarea: HTMLTextAreaElement, coreService: ICoreService): void {\n  text = prepareTextForTerminal(text);\n  text = bracketTextForPaste(text, coreService.decPrivateModes.bracketedPasteMode);\n  coreService.triggerDataEvent(text, true);\n  textarea.value = '';\n}\n\n/**\n * Moves the textarea under the mouse cursor and focuses it.\n * @param ev The original right click event to be handled.\n * @param textarea The terminal's textarea.\n */\nexport function moveTextAreaUnderMouseCursor(ev: MouseEvent, textarea: HTMLTextAreaElement, screenElement: HTMLElement): void {\n\n  // Calculate textarea position relative to the screen element\n  const pos = screenElement.getBoundingClientRect();\n  const left = ev.clientX - pos.left - 10;\n  const top = ev.clientY - pos.top - 10;\n\n  // Bring textarea at the cursor position\n  textarea.style.width = '20px';\n  textarea.style.height = '20px';\n  textarea.style.left = `${left}px`;\n  textarea.style.top = `${top}px`;\n  textarea.style.zIndex = '1000';\n\n  textarea.focus();\n}\n\n/**\n * Bind to right-click event and allow right-click copy and paste.\n * @param ev The original right click event to be handled.\n * @param textarea The terminal's textarea.\n * @param selectionService The terminal's selection manager.\n * @param shouldSelectWord If true and there is no selection the current word will be selected\n */\nexport function rightClickHandler(ev: MouseEvent, textarea: HTMLTextAreaElement, screenElement: HTMLElement, selectionService: ISelectionService, shouldSelectWord: boolean): void {\n  moveTextAreaUnderMouseCursor(ev, textarea, screenElement);\n\n  if (shouldSelectWord) {\n    selectionService.rightClickSelect(ev);\n  }\n\n  // Get textarea ready to copy from the context menu\n  textarea.value = selectionService.selectionText;\n  textarea.select();\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColor } from 'browser/Types';\nimport { IColorRGB } from 'common/Types';\n\n/**\n * Helper functions where the source type is \"channels\" (individual color channels as numbers).\n */\nexport namespace channels {\n  export function toCss(r: number, g: number, b: number, a?: number): string {\n    if (a !== undefined) {\n      return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}${toPaddedHex(a)}`;\n    }\n    return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}`;\n  }\n\n  export function toRgba(r: number, g: number, b: number, a: number = 0xFF): number {\n    // Note: The aggregated number is RGBA32 (BE), thus needs to be converted to ABGR32\n    // on LE systems, before it can be used for direct 32-bit buffer writes.\n    // >>> 0 forces an unsigned int\n    return (r << 24 | g << 16 | b << 8 | a) >>> 0;\n  }\n}\n\n/**\n * Helper functions where the source type is `IColor`.\n */\nexport namespace color {\n  export function blend(bg: IColor, fg: IColor): IColor {\n    const a = (fg.rgba & 0xFF) / 255;\n    if (a === 1) {\n      return {\n        css: fg.css,\n        rgba: fg.rgba\n      };\n    }\n    const fgR = (fg.rgba >> 24) & 0xFF;\n    const fgG = (fg.rgba >> 16) & 0xFF;\n    const fgB = (fg.rgba >> 8) & 0xFF;\n    const bgR = (bg.rgba >> 24) & 0xFF;\n    const bgG = (bg.rgba >> 16) & 0xFF;\n    const bgB = (bg.rgba >> 8) & 0xFF;\n    const r = bgR + Math.round((fgR - bgR) * a);\n    const g = bgG + Math.round((fgG - bgG) * a);\n    const b = bgB + Math.round((fgB - bgB) * a);\n    const css = channels.toCss(r, g, b);\n    const rgba = channels.toRgba(r, g, b);\n    return { css, rgba };\n  }\n\n  export function isOpaque(color: IColor): boolean {\n    return (color.rgba & 0xFF) === 0xFF;\n  }\n\n  export function ensureContrastRatio(bg: IColor, fg: IColor, ratio: number): IColor | undefined {\n    const result = rgba.ensureContrastRatio(bg.rgba, fg.rgba, ratio);\n    if (!result) {\n      return undefined;\n    }\n    return rgba.toColor(\n      (result >> 24 & 0xFF),\n      (result >> 16 & 0xFF),\n      (result >> 8  & 0xFF)\n    );\n  }\n\n  export function opaque(color: IColor): IColor {\n    const rgbaColor = (color.rgba | 0xFF) >>> 0;\n    const [r, g, b] = rgba.toChannels(rgbaColor);\n    return {\n      css: channels.toCss(r, g, b),\n      rgba: rgbaColor\n    };\n  }\n\n  export function opacity(color: IColor, opacity: number): IColor {\n    const a = Math.round(opacity * 0xFF);\n    const [r, g, b] = rgba.toChannels(color.rgba);\n    return {\n      css: channels.toCss(r, g, b, a),\n      rgba: channels.toRgba(r, g, b, a)\n    };\n  }\n\n  export function toColorRGB(color: IColor): IColorRGB {\n    return [(color.rgba >> 24) & 0xFF, (color.rgba >> 16) & 0xFF, (color.rgba >> 8) & 0xFF];\n  }\n}\n\n/**\n * Helper functions where the source type is \"css\" (string: '#rgb', '#rgba', '#rrggbb', '#rrggbbaa').\n */\nexport namespace css {\n  export function toColor(css: string): IColor {\n    switch (css.length) {\n      case 7: // #rrggbb\n        return {\n          css,\n          rgba: (parseInt(css.slice(1), 16) << 8 | 0xFF) >>> 0\n        };\n      case 9: // #rrggbbaa\n        return {\n          css,\n          rgba: parseInt(css.slice(1), 16) >>> 0\n        };\n    }\n    throw new Error('css.toColor: Unsupported css format');\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgb\" (number: 0xrrggbb).\n */\nexport namespace rgb {\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param rgb The color to use.\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance(rgb: number): number {\n    return relativeLuminance2(\n      (rgb >> 16) & 0xFF,\n      (rgb >> 8 ) & 0xFF,\n      (rgb      ) & 0xFF);\n  }\n\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param r The red channel (0x00 to 0xFF).\n   * @param g The green channel (0x00 to 0xFF).\n   * @param b The blue channel (0x00 to 0xFF).\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance2(r: number, g: number, b: number): number {\n    const rs = r / 255;\n    const gs = g / 255;\n    const bs = b / 255;\n    const rr = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);\n    const rg = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);\n    const rb = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);\n    return rr * 0.2126 + rg * 0.7152 + rb * 0.0722;\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgba\" (number: 0xrrggbbaa).\n */\nexport namespace rgba {\n  export function ensureContrastRatio(bgRgba: number, fgRgba: number, ratio: number): number | undefined {\n    const bgL = rgb.relativeLuminance(bgRgba >> 8);\n    const fgL = rgb.relativeLuminance(fgRgba >> 8);\n    const cr = contrastRatio(bgL, fgL);\n    if (cr < ratio) {\n      if (fgL < bgL) {\n        return reduceLuminance(bgRgba, fgRgba, ratio);\n      }\n      return increaseLuminance(bgRgba, fgRgba, ratio);\n    }\n    return undefined;\n  }\n\n  export function reduceLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to reducing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR > 0 || fgG > 0 || fgB > 0)) {\n      // Reduce by 10% until the ratio is hit\n      fgR -= Math.max(0, Math.ceil(fgR * 0.1));\n      fgG -= Math.max(0, Math.ceil(fgG * 0.1));\n      fgB -= Math.max(0, Math.ceil(fgB * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  export function increaseLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to increasing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR < 0xFF || fgG < 0xFF || fgB < 0xFF)) {\n      // Increase by 10% until the ratio is hit\n      fgR = Math.min(0xFF, fgR + Math.ceil((255 - fgR) * 0.1));\n      fgG = Math.min(0xFF, fgG + Math.ceil((255 - fgG) * 0.1));\n      fgB = Math.min(0xFF, fgB + Math.ceil((255 - fgB) * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  // FIXME: Move this to channels NS?\n  export function toChannels(value: number): [number, number, number, number] {\n    return [(value >> 24) & 0xFF, (value >> 16) & 0xFF, (value >> 8) & 0xFF, value & 0xFF];\n  }\n\n  export function toColor(r: number, g: number, b: number): IColor {\n    return {\n      css: channels.toCss(r, g, b),\n      rgba: channels.toRgba(r, g, b)\n    };\n  }\n}\n\nexport function toPaddedHex(c: number): string {\n  const s = c.toString(16);\n  return s.length < 2 ? '0' + s : s;\n}\n\n/**\n * Gets the contrast ratio between two relative luminance values.\n * @param l1 The first relative luminance.\n * @param l2 The first relative luminance.\n * @see https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n */\nexport function contrastRatio(l1: number, l2: number): number {\n  if (l1 < l2) {\n    return (l2 + 0.05) / (l1 + 0.05);\n  }\n  return (l1 + 0.05) / (l2 + 0.05);\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColor, IColorContrastCache } from 'browser/Types';\n\nexport class ColorContrastCache implements IColorContrastCache {\n  private _color: { [bg: number]: { [fg: number]: IColor | null | undefined } | undefined } = {};\n  private _rgba: { [bg: number]: { [fg: number]: string | null | undefined } | undefined } = {};\n\n  public clear(): void {\n    this._color = {};\n    this._rgba = {};\n  }\n\n  public setCss(bg: number, fg: number, value: string | null): void {\n    if (!this._rgba[bg]) {\n      this._rgba[bg] = {};\n    }\n    this._rgba[bg]![fg] = value;\n  }\n\n  public getCss(bg: number, fg: number): string | null | undefined {\n    return this._rgba[bg] ? this._rgba[bg]![fg] : undefined;\n  }\n\n  public setColor(bg: number, fg: number, value: IColor | null): void {\n    if (!this._color[bg]) {\n      this._color[bg] = {};\n    }\n    this._color[bg]![fg] = value;\n  }\n\n  public getColor(bg: number, fg: number): IColor | null | undefined {\n    return this._color[bg] ? this._color[bg]![fg] : undefined;\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColorManager, IColor, IColorSet, IColorContrastCache } from 'browser/Types';\nimport { ITheme } from 'common/services/Services';\nimport { channels, color, css } from 'browser/Color';\nimport { ColorContrastCache } from 'browser/ColorContrastCache';\nimport { ColorIndex } from 'common/Types';\n\n\ninterface IRestoreColorSet {\n  foreground: IColor;\n  background: IColor;\n  cursor: IColor;\n  ansi: IColor[];\n}\n\n\nconst DEFAULT_FOREGROUND = css.toColor('#ffffff');\nconst DEFAULT_BACKGROUND = css.toColor('#000000');\nconst DEFAULT_CURSOR = css.toColor('#ffffff');\nconst DEFAULT_CURSOR_ACCENT = css.toColor('#000000');\nconst DEFAULT_SELECTION = {\n  css: 'rgba(255, 255, 255, 0.3)',\n  rgba: 0xFFFFFF4D\n};\n\n// An IIFE to generate DEFAULT_ANSI_COLORS.\nexport const DEFAULT_ANSI_COLORS = Object.freeze((() => {\n  const colors = [\n    // dark:\n    css.toColor('#2e3436'),\n    css.toColor('#cc0000'),\n    css.toColor('#4e9a06'),\n    css.toColor('#c4a000'),\n    css.toColor('#3465a4'),\n    css.toColor('#75507b'),\n    css.toColor('#06989a'),\n    css.toColor('#d3d7cf'),\n    // bright:\n    css.toColor('#555753'),\n    css.toColor('#ef2929'),\n    css.toColor('#8ae234'),\n    css.toColor('#fce94f'),\n    css.toColor('#729fcf'),\n    css.toColor('#ad7fa8'),\n    css.toColor('#34e2e2'),\n    css.toColor('#eeeeec')\n  ];\n\n  // Fill in the remaining 240 ANSI colors.\n  // Generate colors (16-231)\n  const v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n  for (let i = 0; i < 216; i++) {\n    const r = v[(i / 36) % 6 | 0];\n    const g = v[(i / 6) % 6 | 0];\n    const b = v[i % 6];\n    colors.push({\n      css: channels.toCss(r, g, b),\n      rgba: channels.toRgba(r, g, b)\n    });\n  }\n\n  // Generate greys (232-255)\n  for (let i = 0; i < 24; i++) {\n    const c = 8 + i * 10;\n    colors.push({\n      css: channels.toCss(c, c, c),\n      rgba: channels.toRgba(c, c, c)\n    });\n  }\n\n  return colors;\n})());\n\n/**\n * Manages the source of truth for a terminal's colors.\n */\nexport class ColorManager implements IColorManager {\n  public colors: IColorSet;\n  private _ctx: CanvasRenderingContext2D;\n  private _litmusColor: CanvasGradient;\n  private _contrastCache: IColorContrastCache;\n  private _restoreColors!: IRestoreColorSet;\n\n  constructor(document: Document, public allowTransparency: boolean) {\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Could not get rendering context');\n    }\n    this._ctx = ctx;\n    this._ctx.globalCompositeOperation = 'copy';\n    this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n    this._contrastCache = new ColorContrastCache();\n    this.colors = {\n      foreground: DEFAULT_FOREGROUND,\n      background: DEFAULT_BACKGROUND,\n      cursor: DEFAULT_CURSOR,\n      cursorAccent: DEFAULT_CURSOR_ACCENT,\n      selectionTransparent: DEFAULT_SELECTION,\n      selectionOpaque: color.blend(DEFAULT_BACKGROUND, DEFAULT_SELECTION),\n      ansi: DEFAULT_ANSI_COLORS.slice(),\n      contrastCache: this._contrastCache\n    };\n    this._updateRestoreColors();\n  }\n\n  public onOptionsChange(key: string): void {\n    if (key === 'minimumContrastRatio') {\n      this._contrastCache.clear();\n    }\n  }\n\n  /**\n   * Sets the terminal's theme.\n   * @param theme The  theme to use. If a partial theme is provided then default\n   * colors will be used where colors are not defined.\n   */\n  public setTheme(theme: ITheme = {}): void {\n    this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n    this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n    this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n    this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n    this.colors.selectionTransparent = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n    this.colors.selectionOpaque = color.blend(this.colors.background, this.colors.selectionTransparent);\n    /**\n     * If selection color is opaque, blend it with background with 0.3 opacity\n     * Issue #2737\n     */\n    if (color.isOpaque(this.colors.selectionTransparent)) {\n      const opacity = 0.3;\n      this.colors.selectionTransparent = color.opacity(this.colors.selectionTransparent, opacity);\n    }\n    this.colors.ansi[0] = this._parseColor(theme.black, DEFAULT_ANSI_COLORS[0]);\n    this.colors.ansi[1] = this._parseColor(theme.red, DEFAULT_ANSI_COLORS[1]);\n    this.colors.ansi[2] = this._parseColor(theme.green, DEFAULT_ANSI_COLORS[2]);\n    this.colors.ansi[3] = this._parseColor(theme.yellow, DEFAULT_ANSI_COLORS[3]);\n    this.colors.ansi[4] = this._parseColor(theme.blue, DEFAULT_ANSI_COLORS[4]);\n    this.colors.ansi[5] = this._parseColor(theme.magenta, DEFAULT_ANSI_COLORS[5]);\n    this.colors.ansi[6] = this._parseColor(theme.cyan, DEFAULT_ANSI_COLORS[6]);\n    this.colors.ansi[7] = this._parseColor(theme.white, DEFAULT_ANSI_COLORS[7]);\n    this.colors.ansi[8] = this._parseColor(theme.brightBlack, DEFAULT_ANSI_COLORS[8]);\n    this.colors.ansi[9] = this._parseColor(theme.brightRed, DEFAULT_ANSI_COLORS[9]);\n    this.colors.ansi[10] = this._parseColor(theme.brightGreen, DEFAULT_ANSI_COLORS[10]);\n    this.colors.ansi[11] = this._parseColor(theme.brightYellow, DEFAULT_ANSI_COLORS[11]);\n    this.colors.ansi[12] = this._parseColor(theme.brightBlue, DEFAULT_ANSI_COLORS[12]);\n    this.colors.ansi[13] = this._parseColor(theme.brightMagenta, DEFAULT_ANSI_COLORS[13]);\n    this.colors.ansi[14] = this._parseColor(theme.brightCyan, DEFAULT_ANSI_COLORS[14]);\n    this.colors.ansi[15] = this._parseColor(theme.brightWhite, DEFAULT_ANSI_COLORS[15]);\n    // Clear our the cache\n    this._contrastCache.clear();\n    this._updateRestoreColors();\n  }\n\n  public restoreColor(slot?: ColorIndex): void {\n    // unset slot restores all ansi colors\n    if (slot === undefined) {\n      for (let i = 0; i < this._restoreColors.ansi.length; ++i) {\n        this.colors.ansi[i] = this._restoreColors.ansi[i];\n      }\n      return;\n    }\n    switch (slot) {\n      case ColorIndex.FOREGROUND:\n        this.colors.foreground = this._restoreColors.foreground;\n        break;\n      case ColorIndex.BACKGROUND:\n        this.colors.background = this._restoreColors.background;\n        break;\n      case ColorIndex.CURSOR:\n        this.colors.cursor = this._restoreColors.cursor;\n        break;\n      default:\n        this.colors.ansi[slot] = this._restoreColors.ansi[slot];\n    }\n  }\n\n  private _updateRestoreColors(): void {\n    this._restoreColors = {\n      foreground: this.colors.foreground,\n      background: this.colors.background,\n      cursor: this.colors.cursor,\n      ansi: [...this.colors.ansi]\n    };\n  }\n\n  private _parseColor(\n    css: string | undefined,\n    fallback: IColor,\n    allowTransparency: boolean = this.allowTransparency\n  ): IColor {\n    if (css === undefined) {\n      return fallback;\n    }\n\n    // If parsing the value results in failure, then it must be ignored, and the attribute must\n    // retain its previous value.\n    // -- https://html.spec.whatwg.org/multipage/canvas.html#fill-and-stroke-styles\n    this._ctx.fillStyle = this._litmusColor;\n    this._ctx.fillStyle = css;\n    if (typeof this._ctx.fillStyle !== 'string') {\n      console.warn(`Color: ${css} is invalid using fallback ${fallback.css}`);\n      return fallback;\n    }\n\n    this._ctx.fillRect(0, 0, 1, 1);\n    const data = this._ctx.getImageData(0, 0, 1, 1).data;\n\n    // Check if the printed color was transparent\n    if (data[3] !== 0xFF) {\n      if (!allowTransparency) {\n        // Ideally we'd just ignore the alpha channel, but...\n        //\n        // Browsers may not give back exactly the same RGB values we put in, because most/all\n        // convert the color to a pre-multiplied representation. getImageData converts that back to\n        // a un-premultipled representation, but the precision loss may make the RGB channels unuable\n        // on their own.\n        //\n        // E.g. In Chrome #12345610 turns into #10305010, and in the extreme case, 0xFFFFFF00 turns\n        // into 0x00000000.\n        //\n        // \"Note: Due to the lossy nature of converting to and from premultiplied alpha color values,\n        // pixels that have just been set using putImageData() might be returned to an equivalent\n        // getImageData() as different values.\"\n        // -- https://html.spec.whatwg.org/multipage/canvas.html#pixel-manipulation\n        //\n        // So let's just use the fallback color in this case instead.\n        console.warn(\n          `Color: ${css} is using transparency, but allowTransparency is false. ` +\n          `Using fallback ${fallback.css}.`\n        );\n        return fallback;\n      }\n\n      // https://html.spec.whatwg.org/multipage/canvas.html#serialisation-of-a-color\n      // the color value has alpha less than 1.0, and the string is the color value in the CSS rgba()\n      const [r, g, b, a] = this._ctx.fillStyle.substring(5, this._ctx.fillStyle.length - 1).split(',').map(component => Number(component));\n      const alpha = Math.round(a * 255);\n      const rgba: number = channels.toRgba(r, g, b, alpha);\n      return {\n        rgba,\n        css\n      };\n    }\n\n    return {\n      // https://html.spec.whatwg.org/multipage/canvas.html#serialisation-of-a-color\n      // if it has alpha equal to 1.0, then the string is a lowercase six-digit hex value, prefixed with a \"#\" character\n      css: this._ctx.fillStyle,\n      rgba: channels.toRgba(data[0], data[1], data[2], data[3])\n    };\n  }\n}\n", "/**\n * Copyright (c) 2020 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function removeElementFromParent(...elements: (HTMLElement | undefined)[]): void {\n  for (const e of elements) {\n    e?.parentElement?.removeChild(e);\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\n/**\n * Adds a disposable listener to a node in the DOM, returning the disposable.\n * @param type The event type.\n * @param handler The handler for the listener.\n */\nexport function addDisposableDomListener(\n  node: Element | Window | Document,\n  type: string,\n  handler: (e: any) => void,\n  options?: boolean | AddEventListenerOptions\n): IDisposable {\n  node.addEventListener(type, handler, options);\n  let disposed = false;\n  return {\n    dispose: () => {\n      if (disposed) {\n        return;\n      }\n      disposed = true;\n      node.removeEventListener(type, handler, options);\n    }\n  };\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILinkifierEvent, ILinkMatcher, LinkMatcherHandler, ILinkMatcherOptions, ILinkifier, IMouseZoneManager, IMouseZone, IRegisteredLinkMatcher } from 'browser/Types';\nimport { IBufferStringIteratorResult } from 'common/buffer/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { ILogService, IBufferService, IOptionsService, IUnicodeService } from 'common/services/Services';\n\n/**\n * Limit of the unwrapping line expansion (overscan) at the top and bottom\n * of the actual viewport in ASCII characters.\n * A limit of 2000 should match most sane urls.\n */\nconst OVERSCAN_CHAR_LIMIT = 2000;\n\n/**\n * The Linkifier applies links to rows shortly after they have been refreshed.\n */\nexport class Linkifier implements ILinkifier {\n  /**\n   * The time to wait after a row is changed before it is linkified. This prevents\n   * the costly operation of searching every row multiple times, potentially a\n   * huge amount of times.\n   */\n  protected static _timeBeforeLatency = 200;\n\n  protected _linkMatchers: IRegisteredLinkMatcher[] = [];\n\n  private _mouseZoneManager: IMouseZoneManager | undefined;\n  private _element: HTMLElement | undefined;\n\n  private _rowsTimeoutId: number | undefined;\n  private _nextLinkMatcherId = 0;\n  private _rowsToLinkify: { start: number | undefined, end: number | undefined };\n\n  private _onShowLinkUnderline = new EventEmitter<ILinkifierEvent>();\n  public get onShowLinkUnderline(): IEvent<ILinkifierEvent> { return this._onShowLinkUnderline.event; }\n  private _onHideLinkUnderline = new EventEmitter<ILinkifierEvent>();\n  public get onHideLinkUnderline(): IEvent<ILinkifierEvent> { return this._onHideLinkUnderline.event; }\n  private _onLinkTooltip = new EventEmitter<ILinkifierEvent>();\n  public get onLinkTooltip(): IEvent<ILinkifierEvent> { return this._onLinkTooltip.event; }\n\n  constructor(\n    @IBufferService protected readonly _bufferService: IBufferService,\n    @ILogService private readonly _logService: ILogService,\n    @IUnicodeService private readonly _unicodeService: IUnicodeService\n  ) {\n    this._rowsToLinkify = {\n      start: undefined,\n      end: undefined\n    };\n  }\n\n  /**\n   * Attaches the linkifier to the DOM, enabling linkification.\n   * @param mouseZoneManager The mouse zone manager to register link zones with.\n   */\n  public attachToDom(element: HTMLElement, mouseZoneManager: IMouseZoneManager): void {\n    this._element = element;\n    this._mouseZoneManager = mouseZoneManager;\n  }\n\n  /**\n   * Queue linkification on a set of rows.\n   * @param start The row to linkify from (inclusive).\n   * @param end The row to linkify to (inclusive).\n   */\n  public linkifyRows(start: number, end: number): void {\n    // Don't attempt linkify if not yet attached to DOM\n    if (!this._mouseZoneManager) {\n      return;\n    }\n\n    // Increase range to linkify\n    if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {\n      this._rowsToLinkify.start = start;\n      this._rowsToLinkify.end = end;\n    } else {\n      this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n      this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n    }\n\n    // Clear out any existing links on this row range\n    this._mouseZoneManager.clearAll(start, end);\n\n    // Restart timer\n    if (this._rowsTimeoutId) {\n      clearTimeout(this._rowsTimeoutId);\n    }\n\n    // Cannot use window.setTimeout since tests need to run in node\n    this._rowsTimeoutId = setTimeout(() => this._linkifyRows(), Linkifier._timeBeforeLatency) as any as number;\n  }\n\n  /**\n   * Linkifies the rows requested.\n   */\n  private _linkifyRows(): void {\n    this._rowsTimeoutId = undefined;\n    const buffer = this._bufferService.buffer;\n\n    if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {\n      this._logService.debug('_rowToLinkify was unset before _linkifyRows was called');\n      return;\n    }\n\n    // Ensure the start row exists\n    const absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n    if (absoluteRowIndexStart >= buffer.lines.length) {\n      return;\n    }\n\n    // Invalidate bad end row values (if a resize happened)\n    const absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._bufferService.rows) + 1;\n\n    // Iterate over the range of unwrapped content strings within start..end\n    // (excluding).\n    // _doLinkifyRow gets full unwrapped lines with the start row as buffer offset\n    // for every matcher.\n    // The unwrapping is needed to also match content that got wrapped across\n    // several buffer lines. To avoid a worst case scenario where the whole buffer\n    // contains just a single unwrapped string we limit this line expansion beyond\n    // the viewport to +OVERSCAN_CHAR_LIMIT chars (overscan) at top and bottom.\n    // This comes with the tradeoff that matches longer than OVERSCAN_CHAR_LIMIT\n    // chars will not match anymore at the viewport borders.\n    const overscanLineLimit = Math.ceil(OVERSCAN_CHAR_LIMIT / this._bufferService.cols);\n    const iterator = this._bufferService.buffer.iterator(\n      false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n    while (iterator.hasNext()) {\n      const lineData: IBufferStringIteratorResult = iterator.next();\n      for (let i = 0; i < this._linkMatchers.length; i++) {\n        this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n      }\n    }\n\n    this._rowsToLinkify.start = undefined;\n    this._rowsToLinkify.end = undefined;\n  }\n\n  /**\n   * Registers a link matcher, allowing custom link patterns to be matched and\n   * handled.\n   * @param regex The regular expression to search for. Specifically, this\n   * searches the textContent of the rows. You will want to use \\s to match a\n   * space ' ' character for example.\n   * @param handler The callback when the link is called.\n   * @param options Options for the link matcher.\n   * @return The ID of the new matcher, this can be used to deregister.\n   */\n  public registerLinkMatcher(regex: RegExp, handler: LinkMatcherHandler, options: ILinkMatcherOptions = {}): number {\n    if (!handler) {\n      throw new Error('handler must be defined');\n    }\n    const matcher: IRegisteredLinkMatcher = {\n      id: this._nextLinkMatcherId++,\n      regex,\n      handler,\n      matchIndex: options.matchIndex,\n      validationCallback: options.validationCallback,\n      hoverTooltipCallback: options.tooltipCallback,\n      hoverLeaveCallback: options.leaveCallback,\n      willLinkActivate: options.willLinkActivate,\n      priority: options.priority || 0\n    };\n    this._addLinkMatcherToList(matcher);\n    return matcher.id;\n  }\n\n  /**\n   * Inserts a link matcher to the list in the correct position based on the\n   * priority of each link matcher. New link matchers of equal priority are\n   * considered after older link matchers.\n   * @param matcher The link matcher to be added.\n   */\n  private _addLinkMatcherToList(matcher: IRegisteredLinkMatcher): void {\n    if (this._linkMatchers.length === 0) {\n      this._linkMatchers.push(matcher);\n      return;\n    }\n\n    for (let i = this._linkMatchers.length - 1; i >= 0; i--) {\n      if (matcher.priority <= this._linkMatchers[i].priority) {\n        this._linkMatchers.splice(i + 1, 0, matcher);\n        return;\n      }\n    }\n\n    this._linkMatchers.splice(0, 0, matcher);\n  }\n\n  /**\n   * Deregisters a link matcher if it has been registered.\n   * @param matcherId The link matcher's ID (returned after register)\n   * @return Whether a link matcher was found and deregistered.\n   */\n  public deregisterLinkMatcher(matcherId: number): boolean {\n    for (let i = 0; i < this._linkMatchers.length; i++) {\n      if (this._linkMatchers[i].id === matcherId) {\n        this._linkMatchers.splice(i, 1);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Linkifies a row given a specific handler.\n   * @param rowIndex The row index to linkify (absolute index).\n   * @param text string content of the unwrapped row.\n   * @param matcher The link matcher for this line.\n   */\n  private _doLinkifyRow(rowIndex: number, text: string, matcher: ILinkMatcher): void {\n    // clone regex to do a global search on text\n    const rex = new RegExp(matcher.regex.source, (matcher.regex.flags || '') + 'g');\n    let match;\n    let stringIndex = -1;\n    while ((match = rex.exec(text)) !== null) {\n      const uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n      if (!uri) {\n        // something matched but does not comply with the given matchIndex\n        // since this is most likely a bug the regex itself we simply do nothing here\n        this._logService.debug('match found without corresponding matchIndex', match, matcher);\n        break;\n      }\n\n      // Get index, match.index is for the outer match which includes negated chars\n      // therefore we cannot use match.index directly, instead we search the position\n      // of the match group in text again\n      // also correct regex and string search offsets for the next loop run\n      stringIndex = text.indexOf(uri, stringIndex + 1);\n      rex.lastIndex = stringIndex + uri.length;\n      if (stringIndex < 0) {\n        // invalid stringIndex (should not have happened)\n        break;\n      }\n\n      // get the buffer index as [absolute row, col] for the match\n      const bufferIndex = this._bufferService.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n      if (bufferIndex[0] < 0) {\n        // invalid bufferIndex (should not have happened)\n        break;\n      }\n\n      const line = this._bufferService.buffer.lines.get(bufferIndex[0]);\n      if (!line) {\n        break;\n      }\n\n      const attr = line.getFg(bufferIndex[1]);\n      const fg = attr ? (attr >> 9) & 0x1ff : undefined;\n\n      if (matcher.validationCallback) {\n        matcher.validationCallback(uri, isValid => {\n          // Discard link if the line has already changed\n          if (this._rowsTimeoutId) {\n            return;\n          }\n          if (isValid) {\n            this._addLink(bufferIndex[1], bufferIndex[0] - this._bufferService.buffer.ydisp, uri, matcher, fg);\n          }\n        });\n      } else {\n        this._addLink(bufferIndex[1], bufferIndex[0] - this._bufferService.buffer.ydisp, uri, matcher, fg);\n      }\n    }\n  }\n\n  /**\n   * Registers a link to the mouse zone manager.\n   * @param x The column the link starts.\n   * @param y The row the link is on.\n   * @param uri The URI of the link.\n   * @param matcher The link matcher for the link.\n   * @param fg The link color for hover event.\n   */\n  private _addLink(x: number, y: number, uri: string, matcher: ILinkMatcher, fg: number | undefined): void {\n    if (!this._mouseZoneManager || !this._element) {\n      return;\n    }\n    // FIXME: get cell length from buffer to avoid mismatch after Unicode version change\n    const width = this._unicodeService.getStringCellWidth(uri);\n    const x1 = x % this._bufferService.cols;\n    const y1 = y + Math.floor(x / this._bufferService.cols);\n    let x2 = (x1 + width) % this._bufferService.cols;\n    let y2 = y1 + Math.floor((x1 + width) / this._bufferService.cols);\n    if (x2 === 0) {\n      x2 = this._bufferService.cols;\n      y2--;\n    }\n\n    this._mouseZoneManager.add(new MouseZone(\n      x1 + 1,\n      y1 + 1,\n      x2 + 1,\n      y2 + 1,\n      e => {\n        if (matcher.handler) {\n          return matcher.handler(e, uri);\n        }\n        const newWindow = window.open();\n        if (newWindow) {\n          newWindow.opener = null;\n          newWindow.location.href = uri;\n        } else {\n          console.warn('Opening link blocked as opener could not be cleared');\n        }\n      },\n      () => {\n        this._onShowLinkUnderline.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        this._element!.classList.add('xterm-cursor-pointer');\n      },\n      e => {\n        this._onLinkTooltip.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        if (matcher.hoverTooltipCallback) {\n          // Note that IViewportRange use 1-based coordinates to align with escape sequences such\n          // as CUP which use 1,1 as the default for row/col\n          matcher.hoverTooltipCallback(e, uri, { start: { x: x1, y: y1 }, end: { x: x2, y: y2 } });\n        }\n      },\n      () => {\n        this._onHideLinkUnderline.fire(this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n        this._element!.classList.remove('xterm-cursor-pointer');\n        if (matcher.hoverLeaveCallback) {\n          matcher.hoverLeaveCallback();\n        }\n      },\n      e => {\n        if (matcher.willLinkActivate) {\n          return matcher.willLinkActivate(e, uri);\n        }\n        return true;\n      }\n    ));\n  }\n\n  private _createLinkHoverEvent(x1: number, y1: number, x2: number, y2: number, fg: number | undefined): ILinkifierEvent {\n    return { x1, y1, x2, y2, cols: this._bufferService.cols, fg };\n  }\n}\n\nexport class MouseZone implements IMouseZone {\n  constructor(\n    public x1: number,\n    public y1: number,\n    public x2: number,\n    public y2: number,\n    public clickCallback: (e: MouseEvent) => any,\n    public hoverCallback: (e: MouseEvent) => any,\n    public tooltipCallback: (e: MouseEvent) => any,\n    public leaveCallback: () => void,\n    public willLinkActivate: (e: MouseEvent) => boolean\n  ) {\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILinkifier2, ILinkProvider, IBufferCellPosition, ILink, ILinkifierEvent, ILinkDecorations, ILinkWithState } from 'browser/Types';\nimport { IDisposable } from 'common/Types';\nimport { IMouseService, IRenderService } from './services/Services';\nimport { IBufferService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable, getDisposeArrayDisposable, disposeArray } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\n\nexport class Linkifier2 extends Disposable implements ILinkifier2 {\n  private _element: HTMLElement | undefined;\n  private _mouseService: IMouseService | undefined;\n  private _renderService: IRenderService | undefined;\n  private _linkProviders: ILinkProvider[] = [];\n  public get currentLink(): ILinkWithState | undefined { return this._currentLink; }\n  protected _currentLink: ILinkWithState | undefined;\n  private _lastMouseEvent: MouseEvent | undefined;\n  private _linkCacheDisposables: IDisposable[] = [];\n  private _lastBufferCell: IBufferCellPosition | undefined;\n  private _isMouseOut: boolean = true;\n  private _activeProviderReplies: Map<Number, ILinkWithState[] | undefined> | undefined;\n  private _activeLine: number = -1;\n\n  private _onShowLinkUnderline = this.register(new EventEmitter<ILinkifierEvent>());\n  public get onShowLinkUnderline(): IEvent<ILinkifierEvent> { return this._onShowLinkUnderline.event; }\n  private _onHideLinkUnderline = this.register(new EventEmitter<ILinkifierEvent>());\n  public get onHideLinkUnderline(): IEvent<ILinkifierEvent> { return this._onHideLinkUnderline.event; }\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this.register(getDisposeArrayDisposable(this._linkCacheDisposables));\n  }\n\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    this._linkProviders.push(linkProvider);\n    return {\n      dispose: () => {\n        // Remove the link provider from the list\n        const providerIndex = this._linkProviders.indexOf(linkProvider);\n\n        if (providerIndex !== -1) {\n          this._linkProviders.splice(providerIndex, 1);\n        }\n      }\n    };\n  }\n\n  public attachToDom(element: HTMLElement, mouseService: IMouseService, renderService: IRenderService): void {\n    this._element = element;\n    this._mouseService = mouseService;\n    this._renderService = renderService;\n\n    this.register(addDisposableDomListener(this._element, 'mouseleave', () => {\n      this._isMouseOut = true;\n      this._clearCurrentLink();\n    }));\n    this.register(addDisposableDomListener(this._element, 'mousemove', this._onMouseMove.bind(this)));\n    this.register(addDisposableDomListener(this._element, 'click', this._onClick.bind(this)));\n  }\n\n  private _onMouseMove(event: MouseEvent): void {\n    this._lastMouseEvent = event;\n\n    if (!this._element || !this._mouseService) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(event, this._element, this._mouseService);\n    if (!position) {\n      return;\n    }\n    this._isMouseOut = false;\n\n    // Ignore the event if it's an embedder created hover widget\n    const composedPath = event.composedPath() as HTMLElement[];\n    for (let i = 0; i < composedPath.length; i++) {\n      const target = composedPath[i];\n      // Hit Terminal.element, break and continue\n      if (target.classList.contains('xterm')) {\n        break;\n      }\n      // It's a hover, don't respect hover event\n      if (target.classList.contains('xterm-hover')) {\n        return;\n      }\n    }\n\n    if (!this._lastBufferCell || (position.x !== this._lastBufferCell.x || position.y !== this._lastBufferCell.y)) {\n      this._onHover(position);\n      this._lastBufferCell = position;\n    }\n  }\n\n  private _onHover(position: IBufferCellPosition): void {\n    // TODO: This currently does not cache link provider results across wrapped lines, activeLine should be something like `activeRange: {startY, endY}`\n    // Check if we need to clear the link\n    if (this._activeLine !== position.y) {\n      this._clearCurrentLink();\n      this._askForLink(position, false);\n      return;\n    }\n\n    // Check the if the link is in the mouse position\n    const isCurrentLinkInPosition = this._currentLink && this._linkAtPosition(this._currentLink.link, position);\n    if (!isCurrentLinkInPosition) {\n      this._clearCurrentLink();\n      this._askForLink(position, true);\n    }\n  }\n\n  private _askForLink(position: IBufferCellPosition, useLineCache: boolean): void {\n    if (!this._activeProviderReplies || !useLineCache) {\n      this._activeProviderReplies?.forEach(reply => {\n        reply?.forEach(linkWithState => {\n          if (linkWithState.link.dispose) {\n            linkWithState.link.dispose();\n          }\n        });\n      });\n      this._activeProviderReplies = new Map();\n      this._activeLine = position.y;\n    }\n    let linkProvided = false;\n\n    // There is no link cached, so ask for one\n    this._linkProviders.forEach((linkProvider, i) => {\n      if (useLineCache) {\n        const existingReply = this._activeProviderReplies?.get(i);\n        // If there isn't a reply, the provider hasn't responded yet.\n\n        // TODO: If there isn't a reply yet it means that the provider is still resolving. Ensuring\n        // provideLinks isn't triggered again saves ILink.hover firing twice though. This probably\n        // needs promises to get fixed\n        if (existingReply) {\n          linkProvided = this._checkLinkProviderResult(i, position, linkProvided);\n        }\n      } else {\n        linkProvider.provideLinks(position.y, (links: ILink[] | undefined) => {\n          if (this._isMouseOut) {\n            return;\n          }\n          const linksWithState: ILinkWithState[] | undefined = links?.map(link  => ({ link }));\n          this._activeProviderReplies?.set(i, linksWithState);\n          linkProvided = this._checkLinkProviderResult(i, position, linkProvided);\n\n          // If all providers have responded, remove lower priority links that intersect ranges of\n          // higher priority links\n          if (this._activeProviderReplies?.size === this._linkProviders.length) {\n            this._removeIntersectingLinks(position.y, this._activeProviderReplies);\n          }\n        });\n      }\n    });\n  }\n\n  private _removeIntersectingLinks(y: number, replies: Map<Number, ILinkWithState[] | undefined>): void {\n    const occupiedCells = new Set<number>();\n    for (let i = 0; i < replies.size; i++) {\n      const providerReply = replies.get(i);\n      if (!providerReply) {\n        continue;\n      }\n      for (let i = 0; i < providerReply.length; i++) {\n        const linkWithState = providerReply[i];\n        const startX = linkWithState.link.range.start.y < y ? 0 : linkWithState.link.range.start.x;\n        const endX = linkWithState.link.range.end.y > y ? this._bufferService.cols : linkWithState.link.range.end.x;\n        for (let x = startX; x <= endX; x++) {\n          if (occupiedCells.has(x)) {\n            providerReply.splice(i--, 1);\n            break;\n          }\n          occupiedCells.add(x);\n        }\n      }\n    }\n  }\n\n  private _checkLinkProviderResult(index: number, position: IBufferCellPosition, linkProvided: boolean): boolean {\n    if (!this._activeProviderReplies) {\n      return linkProvided;\n    }\n\n    const links = this._activeProviderReplies.get(index);\n\n    // Check if every provider before this one has come back undefined\n    let hasLinkBefore = false;\n    for (let j = 0; j < index; j++) {\n      if (!this._activeProviderReplies.has(j) || this._activeProviderReplies.get(j)) {\n        hasLinkBefore = true;\n      }\n    }\n\n    // If all providers with higher priority came back undefined, then this provider's link for\n    // the position should be used\n    if (!hasLinkBefore && links) {\n      const linkAtPosition = links.find(link => this._linkAtPosition(link.link, position));\n      if (linkAtPosition) {\n        linkProvided = true;\n        this._handleNewLink(linkAtPosition);\n      }\n    }\n\n    // Check if all the providers have responded\n    if (this._activeProviderReplies.size === this._linkProviders.length && !linkProvided) {\n      // Respect the order of the link providers\n      for (let j = 0; j < this._activeProviderReplies.size; j++) {\n        const currentLink = this._activeProviderReplies.get(j)?.find(link => this._linkAtPosition(link.link, position));\n        if (currentLink) {\n          linkProvided = true;\n          this._handleNewLink(currentLink);\n          break;\n        }\n      }\n    }\n\n    return linkProvided;\n  }\n\n  private _onClick(event: MouseEvent): void {\n    if (!this._element || !this._mouseService || !this._currentLink) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(event, this._element, this._mouseService);\n\n    if (!position) {\n      return;\n    }\n\n    if (this._linkAtPosition(this._currentLink.link, position)) {\n      this._currentLink.link.activate(event, this._currentLink.link.text);\n    }\n  }\n\n  private _clearCurrentLink(startRow?: number, endRow?: number): void {\n    if (!this._element || !this._currentLink || !this._lastMouseEvent) {\n      return;\n    }\n\n    // If we have a start and end row, check that the link is within it\n    if (!startRow || !endRow || (this._currentLink.link.range.start.y >= startRow && this._currentLink.link.range.end.y <= endRow)) {\n      this._linkLeave(this._element, this._currentLink.link, this._lastMouseEvent);\n      this._currentLink = undefined;\n      disposeArray(this._linkCacheDisposables);\n    }\n  }\n\n  private _handleNewLink(linkWithState: ILinkWithState): void {\n    if (!this._element || !this._lastMouseEvent || !this._mouseService) {\n      return;\n    }\n\n    const position = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);\n\n    if (!position) {\n      return;\n    }\n\n    // Trigger hover if the we have a link at the position\n    if (this._linkAtPosition(linkWithState.link, position)) {\n      this._currentLink = linkWithState;\n      this._currentLink.state = {\n        decorations: {\n          underline: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.underline,\n          pointerCursor: linkWithState.link.decorations === undefined ? true : linkWithState.link.decorations.pointerCursor\n        },\n        isHovered: true\n      };\n      this._linkHover(this._element, linkWithState.link, this._lastMouseEvent);\n\n      // Add listener for tracking decorations changes\n      linkWithState.link.decorations = {} as ILinkDecorations;\n      Object.defineProperties(linkWithState.link.decorations, {\n        pointerCursor: {\n          get: () => this._currentLink?.state?.decorations.pointerCursor,\n          set: v => {\n            if (this._currentLink?.state && this._currentLink.state.decorations.pointerCursor !== v) {\n              this._currentLink.state.decorations.pointerCursor = v;\n              if (this._currentLink.state.isHovered) {\n                this._element?.classList.toggle('xterm-cursor-pointer', v);\n              }\n            }\n          }\n        },\n        underline: {\n          get: () => this._currentLink?.state?.decorations.underline,\n          set: v => {\n            if (this._currentLink?.state && this._currentLink?.state?.decorations.underline !== v) {\n              this._currentLink.state.decorations.underline = v;\n              if (this._currentLink.state.isHovered) {\n                this._fireUnderlineEvent(linkWithState.link, v);\n              }\n            }\n          }\n        }\n      });\n\n      // Add listener for rerendering\n      if (this._renderService) {\n        this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(e => {\n          // When start is 0 a scroll most likely occurred, make sure links above the fold also get\n          // cleared.\n          const start = e.start === 0 ? 0 : e.start + 1 + this._bufferService.buffer.ydisp;\n          this._clearCurrentLink(start, e.end + 1 + this._bufferService.buffer.ydisp);\n        }));\n      }\n    }\n  }\n\n  protected _linkHover(element: HTMLElement, link: ILink, event: MouseEvent): void {\n    if (this._currentLink?.state) {\n      this._currentLink.state.isHovered = true;\n      if (this._currentLink.state.decorations.underline) {\n        this._fireUnderlineEvent(link, true);\n      }\n      if (this._currentLink.state.decorations.pointerCursor) {\n        element.classList.add('xterm-cursor-pointer');\n      }\n    }\n\n    if (link.hover) {\n      link.hover(event, link.text);\n    }\n  }\n\n  private _fireUnderlineEvent(link: ILink, showEvent: boolean): void {\n    const range = link.range;\n    const scrollOffset = this._bufferService.buffer.ydisp;\n    const event = this._createLinkUnderlineEvent(range.start.x - 1, range.start.y - scrollOffset - 1, range.end.x, range.end.y - scrollOffset - 1, undefined);\n    const emitter = showEvent ? this._onShowLinkUnderline : this._onHideLinkUnderline;\n    emitter.fire(event);\n  }\n\n  protected _linkLeave(element: HTMLElement, link: ILink, event: MouseEvent): void {\n    if (this._currentLink?.state) {\n      this._currentLink.state.isHovered = false;\n      if (this._currentLink.state.decorations.underline) {\n        this._fireUnderlineEvent(link, false);\n      }\n      if (this._currentLink.state.decorations.pointerCursor) {\n        element.classList.remove('xterm-cursor-pointer');\n      }\n    }\n\n    if (link.leave) {\n      link.leave(event, link.text);\n    }\n  }\n\n  /**\n   * Check if the buffer position is within the link\n   * @param link\n   * @param position\n   */\n  private _linkAtPosition(link: ILink, position: IBufferCellPosition): boolean {\n    const sameLine = link.range.start.y === link.range.end.y;\n    const wrappedFromLeft = link.range.start.y < position.y;\n    const wrappedToRight = link.range.end.y > position.y;\n\n    // If the start and end have the same y, then the position must be between start and end x\n    // If not, then handle each case seperately, depending on which way it wraps\n    return ((sameLine && link.range.start.x <= position.x && link.range.end.x >= position.x) ||\n      (wrappedFromLeft && link.range.end.x >= position.x) ||\n      (wrappedToRight && link.range.start.x <= position.x) ||\n      (wrappedFromLeft && wrappedToRight)) &&\n      link.range.start.y <= position.y &&\n      link.range.end.y >= position.y;\n  }\n\n  /**\n   * Get the buffer position from a mouse event\n   * @param event\n   */\n  private _positionFromMouseEvent(event: MouseEvent, element: HTMLElement, mouseService: IMouseService): IBufferCellPosition | undefined {\n    const coords = mouseService.getCoords(event, element, this._bufferService.cols, this._bufferService.rows);\n    if (!coords) {\n      return;\n    }\n\n    return { x: coords[0], y: coords[1] + this._bufferService.buffer.ydisp };\n  }\n\n  private _createLinkUnderlineEvent(x1: number, y1: number, x2: number, y2: number, fg: number | undefined): ILinkifierEvent {\n    return { x1, y1, x2, y2, cols: this._bufferService.cols, fg };\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n// eslint-disable-next-line prefer-const\nexport let promptLabel = 'Terminal input';\n\n// eslint-disable-next-line prefer-const\nexport let tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IMouseService, ISelectionService } from 'browser/services/Services';\nimport { IMouseZoneManager, IMouseZone } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\n/**\n * The MouseZoneManager allows components to register zones within the terminal\n * that trigger hover and click callbacks.\n *\n * This class was intentionally made not so robust initially as the only case it\n * needed to support was single-line links which never overlap. Improvements can\n * be made in the future.\n */\nexport class MouseZoneManager extends Disposable implements IMouseZoneManager {\n  private _zones: IMouseZone[] = [];\n\n  private _areZonesActive: boolean = false;\n  private _mouseMoveListener: (e: MouseEvent) => any;\n  private _mouseLeaveListener: (e: MouseEvent) => any;\n  private _clickListener: (e: MouseEvent) => any;\n\n  private _tooltipTimeout: number | undefined;\n  private _currentZone: IMouseZone | undefined;\n  private _lastHoverCoords: [number | undefined, number | undefined] = [undefined, undefined];\n  private _initialSelectionLength: number = 0;\n\n  constructor(\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IMouseService private readonly _mouseService: IMouseService,\n    @ISelectionService private readonly _selectionService: ISelectionService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n\n    this.register(addDisposableDomListener(this._element, 'mousedown', e => this._onMouseDown(e)));\n\n    // These events are expensive, only listen to it when mouse zones are active\n    this._mouseMoveListener = e => this._onMouseMove(e);\n    this._mouseLeaveListener = e => this._onMouseLeave(e);\n    this._clickListener = e => this._onClick(e);\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this._deactivate();\n  }\n\n  public add(zone: IMouseZone): void {\n    this._zones.push(zone);\n    if (this._zones.length === 1) {\n      this._activate();\n    }\n  }\n\n  public clearAll(start?: number, end?: number): void {\n    // Exit if there's nothing to clear\n    if (this._zones.length === 0) {\n      return;\n    }\n\n    // Clear all if start/end weren't set\n    if (!start || !end) {\n      start = 0;\n      end = this._bufferService.rows - 1;\n    }\n\n    // Iterate through zones and clear them out if they're within the range\n    for (let i = 0; i < this._zones.length; i++) {\n      const zone = this._zones[i];\n      if ((zone.y1 > start && zone.y1 <= end + 1) ||\n          (zone.y2 > start && zone.y2 <= end + 1) ||\n          (zone.y1 < start && zone.y2 > end + 1)) {\n        if (this._currentZone && this._currentZone === zone) {\n          this._currentZone.leaveCallback();\n          this._currentZone = undefined;\n        }\n        this._zones.splice(i--, 1);\n      }\n    }\n\n    // Deactivate the mouse zone manager if all the zones have been removed\n    if (this._zones.length === 0) {\n      this._deactivate();\n    }\n  }\n\n  private _activate(): void {\n    if (!this._areZonesActive) {\n      this._areZonesActive = true;\n      this._element.addEventListener('mousemove', this._mouseMoveListener);\n      this._element.addEventListener('mouseleave', this._mouseLeaveListener);\n      this._element.addEventListener('click', this._clickListener);\n    }\n  }\n\n  private _deactivate(): void {\n    if (this._areZonesActive) {\n      this._areZonesActive = false;\n      this._element.removeEventListener('mousemove', this._mouseMoveListener);\n      this._element.removeEventListener('mouseleave', this._mouseLeaveListener);\n      this._element.removeEventListener('click', this._clickListener);\n    }\n  }\n\n  private _onMouseMove(e: MouseEvent): void {\n    // TODO: Ideally this would only clear the hover state when the mouse moves\n    // outside of the mouse zone\n    if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n      this._onHover(e);\n      // Record the current coordinates\n      this._lastHoverCoords = [e.pageX, e.pageY];\n    }\n  }\n\n  private _onHover(e: MouseEvent): void {\n    const zone = this._findZoneEventAt(e);\n\n    // Do nothing if the zone is the same\n    if (zone === this._currentZone) {\n      return;\n    }\n\n    // Fire the hover end callback and cancel any existing timer if a new zone\n    // is being hovered\n    if (this._currentZone) {\n      this._currentZone.leaveCallback();\n      this._currentZone = undefined;\n      if (this._tooltipTimeout) {\n        clearTimeout(this._tooltipTimeout);\n      }\n    }\n\n    // Exit if there is not zone\n    if (!zone) {\n      return;\n    }\n    this._currentZone = zone;\n\n    // Trigger the hover callback\n    if (zone.hoverCallback) {\n      zone.hoverCallback(e);\n    }\n\n    // Restart the tooltip timeout\n    this._tooltipTimeout = window.setTimeout(() => this._onTooltip(e), this._optionsService.options.linkTooltipHoverDuration);\n  }\n\n  private _onTooltip(e: MouseEvent): void {\n    this._tooltipTimeout = undefined;\n    const zone = this._findZoneEventAt(e);\n    zone?.tooltipCallback(e);\n  }\n\n  private _onMouseDown(e: MouseEvent): void {\n    // Store current terminal selection length, to check if we're performing\n    // a selection operation\n    this._initialSelectionLength = this._getSelectionLength();\n\n    // Ignore the event if there are no zones active\n    if (!this._areZonesActive) {\n      return;\n    }\n\n    // Find the active zone, prevent event propagation if found to prevent other\n    // components from handling the mouse event.\n    const zone = this._findZoneEventAt(e);\n    if (zone?.willLinkActivate(e)) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  private _onMouseLeave(e: MouseEvent): void {\n    // Fire the hover end callback and cancel any existing timer if the mouse\n    // leaves the terminal element\n    if (this._currentZone) {\n      this._currentZone.leaveCallback();\n      this._currentZone = undefined;\n      if (this._tooltipTimeout) {\n        clearTimeout(this._tooltipTimeout);\n      }\n    }\n  }\n\n  private _onClick(e: MouseEvent): void {\n    // Find the active zone and click it if found and no selection was\n    // being performed\n    const zone = this._findZoneEventAt(e);\n    const currentSelectionLength = this._getSelectionLength();\n\n    if (zone && currentSelectionLength === this._initialSelectionLength) {\n      zone.clickCallback(e);\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }\n\n  private _getSelectionLength(): number {\n    const selectionText = this._selectionService.selectionText;\n    return selectionText ? selectionText.length : 0;\n  }\n\n  private _findZoneEventAt(e: MouseEvent): IMouseZone | undefined {\n    const coords = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows);\n    if (!coords) {\n      return undefined;\n    }\n    const x = coords[0];\n    const y = coords[1];\n    for (let i = 0; i < this._zones.length; i++) {\n      const zone = this._zones[i];\n      if (zone.y1 === zone.y2) {\n        // Single line link\n        if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n          return zone;\n        }\n      } else {\n        // Multi-line link\n        if ((y === zone.y1 && x >= zone.x1) ||\n            (y === zone.y2 && x < zone.x2) ||\n            (y > zone.y1 && y < zone.y2)) {\n          return zone;\n        }\n      }\n    }\n    return undefined;\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDebouncer } from 'browser/Types';\n\n/**\n * Debounces calls to render terminal rows using animation frames.\n */\nexport class RenderDebouncer implements IRenderDebouncer {\n  private _rowStart: number | undefined;\n  private _rowEnd: number | undefined;\n  private _rowCount: number | undefined;\n  private _animationFrame: number | undefined;\n\n  constructor(\n    private _renderCallback: (start: number, end: number) => void\n  ) {\n  }\n\n  public dispose(): void {\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public refresh(rowStart: number | undefined, rowEnd: number | undefined, rowCount: number): void {\n    this._rowCount = rowCount;\n    // Get the min/max row start/end for the arg values\n    rowStart = rowStart !== undefined ? rowStart : 0;\n    rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n    // Set the properties to the updated values\n    this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n    this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n\n    if (this._animationFrame) {\n      return;\n    }\n\n    this._animationFrame = window.requestAnimationFrame(() => this._innerRefresh());\n  }\n\n  private _innerRefresh(): void {\n    // Make sure values are set\n    if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n      return;\n    }\n\n    // Clamp values\n    const start = Math.max(this._rowStart, 0);\n    const end = Math.min(this._rowEnd, this._rowCount - 1);\n\n    // Reset debouncer (this happens before render callback as the render could trigger it again)\n    this._rowStart = undefined;\n    this._rowEnd = undefined;\n    this._animationFrame = undefined;\n\n    // Run render callback\n    this._renderCallback(start, end);\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\n\nexport type ScreenDprListener = (newDevicePixelRatio?: number, oldDevicePixelRatio?: number) => void;\n\n/**\n * The screen device pixel ratio monitor allows listening for when the\n * window.devicePixelRatio value changes. This is done not with polling but with\n * the use of window.matchMedia to watch media queries. When the event fires,\n * the listener will be reattached using a different media query to ensure that\n * any further changes will register.\n *\n * The listener should fire on both window zoom changes and switching to a\n * monitor with a different DPI.\n */\nexport class ScreenDprMonitor extends Disposable {\n  private _currentDevicePixelRatio: number = window.devicePixelRatio;\n  private _outerListener: ((this: MediaQueryList, ev: MediaQueryListEvent) => any) | undefined;\n  private _listener: ScreenDprListener | undefined;\n  private _resolutionMediaMatchList: MediaQueryList | undefined;\n\n  public setListener(listener: ScreenDprListener): void {\n    if (this._listener) {\n      this.clearListener();\n    }\n    this._listener = listener;\n    this._outerListener = () => {\n      if (!this._listener) {\n        return;\n      }\n      this._listener(window.devicePixelRatio, this._currentDevicePixelRatio);\n      this._updateDpr();\n    };\n    this._updateDpr();\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this.clearListener();\n  }\n\n  private _updateDpr(): void {\n    if (!this._outerListener) {\n      return;\n    }\n\n    // Clear listeners for old DPR\n    this._resolutionMediaMatchList?.removeListener(this._outerListener);\n\n    // Add listeners for new DPR\n    this._currentDevicePixelRatio = window.devicePixelRatio;\n    this._resolutionMediaMatchList = window.matchMedia(`screen and (resolution: ${window.devicePixelRatio}dppx)`);\n    this._resolutionMediaMatchList.addListener(this._outerListener);\n  }\n\n  public clearListener(): void {\n    if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n      return;\n    }\n    this._resolutionMediaMatchList.removeListener(this._outerListener);\n    this._resolutionMediaMatchList = undefined;\n    this._listener = undefined;\n    this._outerListener = undefined;\n  }\n}\n", "/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n *\n * Terminal Emulation References:\n *   http://vt100.net/\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.txt\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.html\n *   http://invisible-island.net/vttest/\n *   http://www.inwap.com/pdp10/ansicode.txt\n *   http://linux.die.net/man/4/console_codes\n *   http://linux.die.net/man/7/urxvt\n */\n\nimport { ICompositionHelper, ITerminal, IBrowser, CustomKeyEventHandler, ILinkifier, IMouseZoneManager, LinkMatcherHandler, ILinkMatcherOptions, IViewport, ILinkifier2, CharacterJoinerHandler } from 'browser/Types';\nimport { IRenderer } from 'browser/renderer/Types';\nimport { CompositionHelper } from 'browser/input/CompositionHelper';\nimport { Viewport } from 'browser/Viewport';\nimport { rightClickHandler, moveTextAreaUnderMouseCursor, handlePasteEvent, copyHandler, paste } from 'browser/Clipboard';\nimport { C0 } from 'common/data/EscapeSequences';\nimport { WindowsOptionsReportType } from '../common/InputHandler';\nimport { Renderer } from 'browser/renderer/Renderer';\nimport { Linkifier } from 'browser/Linkifier';\nimport { SelectionService } from 'browser/services/SelectionService';\nimport * as Browser from 'common/Platform';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport * as Strings from 'browser/LocalizableStrings';\nimport { SoundService } from 'browser/services/SoundService';\nimport { MouseZoneManager } from 'browser/MouseZoneManager';\nimport { AccessibilityManager } from './AccessibilityManager';\nimport { ITheme, IMarker, IDisposable, ISelectionPosition, ILinkProvider } from 'xterm';\nimport { DomRenderer } from 'browser/renderer/dom/DomRenderer';\nimport { KeyboardResultType, CoreMouseEventType, CoreMouseButton, CoreMouseAction, ITerminalOptions, ScrollSource, IColorEvent, ColorIndex, ColorRequestType } from 'common/Types';\nimport { evaluateKeyboardEvent } from 'common/input/Keyboard';\nimport { EventEmitter, IEvent, forwardEvent } from 'common/EventEmitter';\nimport { DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { ColorManager } from 'browser/ColorManager';\nimport { RenderService } from 'browser/services/RenderService';\nimport { ICharSizeService, IRenderService, IMouseService, ISelectionService, ISoundService, ICoreBrowserService, ICharacterJoinerService } from 'browser/services/Services';\nimport { CharSizeService } from 'browser/services/CharSizeService';\nimport { IBuffer } from 'common/buffer/Types';\nimport { MouseService } from 'browser/services/MouseService';\nimport { Linkifier2 } from 'browser/Linkifier2';\nimport { CoreBrowserService } from 'browser/services/CoreBrowserService';\nimport { CoreTerminal } from 'common/CoreTerminal';\nimport { color, rgba } from 'browser/Color';\nimport { CharacterJoinerService } from 'browser/services/CharacterJoinerService';\nimport { toRgbString } from 'common/input/XParseColor';\n\n// Let it work inside Node.js for automated testing purposes.\nconst document: Document = (typeof window !== 'undefined') ? window.document : null as any;\n\nexport class Terminal extends CoreTerminal implements ITerminal {\n  public textarea: HTMLTextAreaElement | undefined;\n  public element: HTMLElement | undefined;\n  public screenElement: HTMLElement | undefined;\n\n  private _document: Document | undefined;\n  private _viewportScrollArea: HTMLElement | undefined;\n  private _viewportElement: HTMLElement | undefined;\n  private _helperContainer: HTMLElement | undefined;\n  private _compositionView: HTMLElement | undefined;\n\n  // private _visualBellTimer: number;\n\n  public browser: IBrowser = Browser as any;\n\n  private _customKeyEventHandler: CustomKeyEventHandler | undefined;\n\n  // browser services\n  private _charSizeService: ICharSizeService | undefined;\n  private _mouseService: IMouseService | undefined;\n  private _renderService: IRenderService | undefined;\n  private _characterJoinerService: ICharacterJoinerService | undefined;\n  private _selectionService: ISelectionService | undefined;\n  private _soundService: ISoundService | undefined;\n\n  /**\n   * Records whether the keydown event has already been handled and triggered a data event, if so\n   * the keypress event should not trigger a data event but should still print to the textarea so\n   * screen readers will announce it.\n   */\n  private _keyDownHandled: boolean = false;\n\n  /**\n   * Records whether the keypress event has already been handled and triggered a data event, if so\n   * the input event should not trigger a data event but should still print to the textarea so\n   * screen readers will announce it.\n   */\n  private _keyPressHandled: boolean = false;\n\n  /**\n   * Records whether there has been a keydown event for a dead key without a corresponding keydown\n   * event for the composed/alternative character. If we cancel the keydown event for the dead key,\n   * no events will be emitted for the final character.\n   */\n  private _unprocessedDeadKey: boolean = false;\n\n  public linkifier: ILinkifier;\n  public linkifier2: ILinkifier2;\n  public viewport: IViewport | undefined;\n  private _compositionHelper: ICompositionHelper | undefined;\n  private _mouseZoneManager: IMouseZoneManager | undefined;\n  private _accessibilityManager: AccessibilityManager | undefined;\n  private _colorManager: ColorManager | undefined;\n  private _theme: ITheme | undefined;\n\n  private _onCursorMove = new EventEmitter<void>();\n  public get onCursorMove(): IEvent<void> { return this._onCursorMove.event; }\n  private _onKey = new EventEmitter<{ key: string, domEvent: KeyboardEvent }>();\n  public get onKey(): IEvent<{ key: string, domEvent: KeyboardEvent }> { return this._onKey.event; }\n  private _onRender = new EventEmitter<{ start: number, end: number }>();\n  public get onRender(): IEvent<{ start: number, end: number }> { return this._onRender.event; }\n  private _onSelectionChange = new EventEmitter<void>();\n  public get onSelectionChange(): IEvent<void> { return this._onSelectionChange.event; }\n  private _onTitleChange = new EventEmitter<string>();\n  public get onTitleChange(): IEvent<string> { return this._onTitleChange.event; }\n  private _onBell = new EventEmitter<void>();\n  public get onBell(): IEvent<void> { return this._onBell.event; }\n\n  private _onFocus = new EventEmitter<void>();\n  public get onFocus(): IEvent<void> { return this._onFocus.event; }\n  private _onBlur = new EventEmitter<void>();\n  public get onBlur(): IEvent<void> { return this._onBlur.event; }\n  private _onA11yCharEmitter = new EventEmitter<string>();\n  public get onA11yChar(): IEvent<string> { return this._onA11yCharEmitter.event; }\n  private _onA11yTabEmitter = new EventEmitter<number>();\n  public get onA11yTab(): IEvent<number> { return this._onA11yTabEmitter.event; }\n\n  /**\n   * Creates a new `Terminal` object.\n   *\n   * @param options An object containing a set of options, the available options are:\n   *   - `cursorBlink` (boolean): Whether the terminal cursor blinks\n   *   - `cols` (number): The number of columns of the terminal (horizontal size)\n   *   - `rows` (number): The number of rows of the terminal (vertical size)\n   *\n   * @public\n   * @class Xterm Xterm\n   * @alias module:xterm/src/xterm\n   */\n  constructor(\n    options: Partial<ITerminalOptions> = {}\n  ) {\n    super(options);\n\n    this._setup();\n\n    this.linkifier = this._instantiationService.createInstance(Linkifier);\n    this.linkifier2 = this.register(this._instantiationService.createInstance(Linkifier2));\n\n    // Setup InputHandler listeners\n    this.register(this._inputHandler.onRequestBell(() => this.bell()));\n    this.register(this._inputHandler.onRequestRefreshRows((start, end) => this.refresh(start, end)));\n    this.register(this._inputHandler.onRequestSendFocus(() => this._reportFocus()));\n    this.register(this._inputHandler.onRequestReset(() => this.reset()));\n    this.register(this._inputHandler.onRequestWindowsOptionsReport(type => this._reportWindowsOptions(type)));\n    this.register(this._inputHandler.onColor((event) => this._handleColorEvent(event)));\n    this.register(forwardEvent(this._inputHandler.onCursorMove, this._onCursorMove));\n    this.register(forwardEvent(this._inputHandler.onTitleChange, this._onTitleChange));\n    this.register(forwardEvent(this._inputHandler.onA11yChar, this._onA11yCharEmitter));\n    this.register(forwardEvent(this._inputHandler.onA11yTab, this._onA11yTabEmitter));\n\n    // Setup listeners\n    this.register(this._bufferService.onResize(e => this._afterResize(e.cols, e.rows)));\n  }\n\n  /**\n   * Handle color event from inputhandler for OSC 4|104 | 10|110 | 11|111 | 12|112.\n   * An event from OSC 4|104 may contain multiple set or report requests, and multiple\n   * or none restore requests (resetting all),\n   * while an event from OSC 10|110 | 11|111 | 12|112 always contains a single request.\n   */\n  private _handleColorEvent(event: IColorEvent): void {\n    if (!this._colorManager) return;\n    for (const req of event) {\n      let acc: 'foreground' | 'background' | 'cursor' | 'ansi' | undefined = undefined;\n      let ident = '';\n      switch (req.index) {\n        case ColorIndex.FOREGROUND: // OSC 10 | 110\n          acc = 'foreground';\n          ident = '10';\n          break;\n        case ColorIndex.BACKGROUND: // OSC 11 | 111\n          acc = 'background';\n          ident = '11';\n          break;\n        case ColorIndex.CURSOR: // OSC 12 | 112\n          acc = 'cursor';\n          ident = '12';\n          break;\n        default: // OSC 4 | 104\n          // we can skip the [0..255] range check here (already done in inputhandler)\n          acc = 'ansi';\n          ident = '4;' + req.index;\n      }\n      if (acc) {\n        switch (req.type) {\n          case ColorRequestType.REPORT:\n            const channels = color.toColorRGB(acc === 'ansi'\n              ? this._colorManager.colors.ansi[req.index]\n              : this._colorManager.colors[acc]);\n            this.coreService.triggerDataEvent(`${C0.ESC}]${ident};${toRgbString(channels)}${C0.BEL}`);\n            break;\n          case ColorRequestType.SET:\n            if (acc === 'ansi') this._colorManager.colors.ansi[req.index] = rgba.toColor(...req.color);\n            else this._colorManager.colors[acc] = rgba.toColor(...req.color);\n            break;\n          case ColorRequestType.RESTORE:\n            this._colorManager.restoreColor(req.index);\n            break;\n        }\n      }\n    }\n    this._renderService?.setColors(this._colorManager.colors);\n    this.viewport?.onThemeChange(this._colorManager.colors);\n  }\n\n  public dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._renderService?.dispose();\n    this._customKeyEventHandler = undefined;\n    this.write = () => { };\n    this.element?.parentNode?.removeChild(this.element);\n  }\n\n  protected _setup(): void {\n    super._setup();\n\n    this._customKeyEventHandler = undefined;\n  }\n\n  /**\n   * Convenience property to active buffer.\n   */\n  public get buffer(): IBuffer {\n    return this.buffers.active;\n  }\n\n  /**\n   * Focus the terminal. Delegates focus handling to the terminal's DOM element.\n   */\n  public focus(): void {\n    if (this.textarea) {\n      this.textarea.focus({ preventScroll: true });\n    }\n  }\n\n  protected _updateOptions(key: string): void {\n    super._updateOptions(key);\n\n    // TODO: These listeners should be owned by individual components\n    switch (key) {\n      case 'fontFamily':\n      case 'fontSize':\n        // When the font changes the size of the cells may change which requires a renderer clear\n        this._renderService?.clear();\n        this._charSizeService?.measure();\n        break;\n      case 'cursorBlink':\n      case 'cursorStyle':\n        // The DOM renderer needs a row refresh to update the cursor styles\n        this.refresh(this.buffer.y, this.buffer.y);\n        break;\n      case 'customGlyphs':\n      case 'drawBoldTextInBrightColors':\n      case 'letterSpacing':\n      case 'lineHeight':\n      case 'fontWeight':\n      case 'fontWeightBold':\n      case 'minimumContrastRatio':\n        // When the font changes the size of the cells may change which requires a renderer clear\n        if (this._renderService) {\n          this._renderService.clear();\n          this._renderService.onResize(this.cols, this.rows);\n          this.refresh(0, this.rows - 1);\n        }\n        break;\n      case 'rendererType':\n        if (this._renderService) {\n          this._renderService.setRenderer(this._createRenderer());\n          this._renderService.onResize(this.cols, this.rows);\n        }\n        break;\n      case 'scrollback':\n        this.viewport?.syncScrollArea();\n        break;\n      case 'screenReaderMode':\n        if (this.optionsService.options.screenReaderMode) {\n          if (!this._accessibilityManager && this._renderService) {\n            this._accessibilityManager = new AccessibilityManager(this, this._renderService);\n          }\n        } else {\n          this._accessibilityManager?.dispose();\n          this._accessibilityManager = undefined;\n        }\n        break;\n      case 'tabStopWidth': this.buffers.setupTabStops(); break;\n      case 'theme':\n        this._setTheme(this.optionsService.options.theme);\n        break;\n    }\n  }\n\n  /**\n   * Binds the desired focus behavior on a given terminal object.\n   */\n  private _onTextAreaFocus(ev: KeyboardEvent): void {\n    if (this.coreService.decPrivateModes.sendFocus) {\n      this.coreService.triggerDataEvent(C0.ESC + '[I');\n    }\n    this.updateCursorStyle(ev);\n    this.element!.classList.add('focus');\n    this._showCursor();\n    this._onFocus.fire();\n  }\n\n  /**\n   * Blur the terminal, calling the blur function on the terminal's underlying\n   * textarea.\n   */\n  public blur(): void {\n    return this.textarea?.blur();\n  }\n\n  /**\n   * Binds the desired blur behavior on a given terminal object.\n   */\n  private _onTextAreaBlur(): void {\n    // Text can safely be removed on blur. Doing it earlier could interfere with\n    // screen readers reading it out.\n    this.textarea!.value = '';\n    this.refresh(this.buffer.y, this.buffer.y);\n    if (this.coreService.decPrivateModes.sendFocus) {\n      this.coreService.triggerDataEvent(C0.ESC + '[O');\n    }\n    this.element!.classList.remove('focus');\n    this._onBlur.fire();\n  }\n\n  private _syncTextArea(): void {\n    if (!this.textarea || !this.buffer.isCursorInViewport || this._compositionHelper!.isComposing || !this._renderService) {\n      return;\n    }\n    const cursorY = this.buffer.ybase + this.buffer.y;\n    const bufferLine = this.buffer.lines.get(cursorY);\n    if (!bufferLine) {\n      return;\n    }\n    const cursorX = Math.min(this.buffer.x, this.cols - 1);\n    const cellHeight = this._renderService.dimensions.actualCellHeight;\n    const width = bufferLine.getWidth(cursorX);\n    const cellWidth = this._renderService.dimensions.actualCellWidth * width;\n    const cursorTop = this.buffer.y * this._renderService.dimensions.actualCellHeight;\n    const cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;\n\n    // Sync the textarea to the exact position of the composition view so the IME knows where the\n    // text is.\n    this.textarea.style.left = cursorLeft + 'px';\n    this.textarea.style.top = cursorTop + 'px';\n    this.textarea.style.width = cellWidth + 'px';\n    this.textarea.style.height = cellHeight + 'px';\n    this.textarea.style.lineHeight = cellHeight + 'px';\n    this.textarea.style.zIndex = '-5';\n  }\n\n  /**\n   * Initialize default behavior\n   */\n  private _initGlobal(): void {\n    this._bindKeys();\n\n    // Bind clipboard functionality\n    this.register(addDisposableDomListener(this.element!, 'copy', (event: ClipboardEvent) => {\n      // If mouse events are active it means the selection manager is disabled and\n      // copy should be handled by the host program.\n      if (!this.hasSelection()) {\n        return;\n      }\n      copyHandler(event, this._selectionService!);\n    }));\n    const pasteHandlerWrapper = (event: ClipboardEvent): void => handlePasteEvent(event, this.textarea!, this.coreService);\n    this.register(addDisposableDomListener(this.textarea!, 'paste', pasteHandlerWrapper));\n    this.register(addDisposableDomListener(this.element!, 'paste', pasteHandlerWrapper));\n\n    // Handle right click context menus\n    if (Browser.isFirefox) {\n      // Firefox doesn't appear to fire the contextmenu event on right click\n      this.register(addDisposableDomListener(this.element!, 'mousedown', (event: MouseEvent) => {\n        if (event.button === 2) {\n          rightClickHandler(event, this.textarea!, this.screenElement!, this._selectionService!, this.options.rightClickSelectsWord);\n        }\n      }));\n    } else {\n      this.register(addDisposableDomListener(this.element!, 'contextmenu', (event: MouseEvent) => {\n        rightClickHandler(event, this.textarea!, this.screenElement!, this._selectionService!, this.options.rightClickSelectsWord);\n      }));\n    }\n\n    // Move the textarea under the cursor when middle clicking on Linux to ensure\n    // middle click to paste selection works. This only appears to work in Chrome\n    // at the time is writing.\n    if (Browser.isLinux) {\n      // Use auxclick event over mousedown the latter doesn't seem to work. Note\n      // that the regular click event doesn't fire for the middle mouse button.\n      this.register(addDisposableDomListener(this.element!, 'auxclick', (event: MouseEvent) => {\n        if (event.button === 1) {\n          moveTextAreaUnderMouseCursor(event, this.textarea!, this.screenElement!);\n        }\n      }));\n    }\n  }\n\n  /**\n   * Apply key handling to the terminal\n   */\n  private _bindKeys(): void {\n    this.register(addDisposableDomListener(this.textarea!, 'keyup', (ev: KeyboardEvent) => this._keyUp(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'keydown', (ev: KeyboardEvent) => this._keyDown(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'keypress', (ev: KeyboardEvent) => this._keyPress(ev), true));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionstart', () => this._compositionHelper!.compositionstart()));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionupdate', (e: CompositionEvent) => this._compositionHelper!.compositionupdate(e)));\n    this.register(addDisposableDomListener(this.textarea!, 'compositionend', () => this._compositionHelper!.compositionend()));\n    this.register(addDisposableDomListener(this.textarea!, 'input', (ev: InputEvent) => this._inputEvent(ev), true));\n    this.register(this.onRender(() => this._compositionHelper!.updateCompositionElements()));\n    this.register(this.onRender(e => this._queueLinkification(e.start, e.end)));\n  }\n\n  /**\n   * Opens the terminal within an element.\n   *\n   * @param parent The element to create the terminal within.\n   */\n  public open(parent: HTMLElement): void {\n    if (!parent) {\n      throw new Error('Terminal requires a parent element.');\n    }\n\n    if (!parent.isConnected) {\n      this._logService.debug('Terminal.open was called on an element that was not attached to the DOM');\n    }\n\n    this._document = parent.ownerDocument!;\n\n    // Create main element container\n    this.element = this._document.createElement('div');\n    this.element.dir = 'ltr';   // xterm.css assumes LTR\n    this.element.classList.add('terminal');\n    this.element.classList.add('xterm');\n    this.element.setAttribute('tabindex', '0');\n    parent.appendChild(this.element);\n\n    // Performance: Use a document fragment to build the terminal\n    // viewport and helper elements detached from the DOM\n    const fragment = document.createDocumentFragment();\n    this._viewportElement = document.createElement('div');\n    this._viewportElement.classList.add('xterm-viewport');\n    fragment.appendChild(this._viewportElement);\n    this._viewportScrollArea = document.createElement('div');\n    this._viewportScrollArea.classList.add('xterm-scroll-area');\n    this._viewportElement.appendChild(this._viewportScrollArea);\n\n    this.screenElement = document.createElement('div');\n    this.screenElement.classList.add('xterm-screen');\n    // Create the container that will hold helpers like the textarea for\n    // capturing DOM Events. Then produce the helpers.\n    this._helperContainer = document.createElement('div');\n    this._helperContainer.classList.add('xterm-helpers');\n    this.screenElement.appendChild(this._helperContainer);\n    fragment.appendChild(this.screenElement);\n\n    this.textarea = document.createElement('textarea');\n    this.textarea.classList.add('xterm-helper-textarea');\n    this.textarea.setAttribute('aria-label', Strings.promptLabel);\n    this.textarea.setAttribute('aria-multiline', 'false');\n    this.textarea.setAttribute('autocorrect', 'off');\n    this.textarea.setAttribute('autocapitalize', 'off');\n    this.textarea.setAttribute('spellcheck', 'false');\n    this.textarea.tabIndex = 0;\n    this.register(addDisposableDomListener(this.textarea, 'focus', (ev: KeyboardEvent) => this._onTextAreaFocus(ev)));\n    this.register(addDisposableDomListener(this.textarea, 'blur', () => this._onTextAreaBlur()));\n    this._helperContainer.appendChild(this.textarea);\n\n    const coreBrowserService = this._instantiationService.createInstance(CoreBrowserService, this.textarea);\n    this._instantiationService.setService(ICoreBrowserService, coreBrowserService);\n\n    this._charSizeService = this._instantiationService.createInstance(CharSizeService, this._document, this._helperContainer);\n    this._instantiationService.setService(ICharSizeService, this._charSizeService);\n\n    this._theme = this.options.theme || this._theme;\n    this._colorManager = new ColorManager(document, this.options.allowTransparency);\n    this.register(this.optionsService.onOptionChange(e => this._colorManager!.onOptionsChange(e)));\n    this._colorManager.setTheme(this._theme);\n\n    this._characterJoinerService = this._instantiationService.createInstance(CharacterJoinerService);\n    this._instantiationService.setService(ICharacterJoinerService, this._characterJoinerService);\n\n    const renderer = this._createRenderer();\n    this._renderService = this.register(this._instantiationService.createInstance(RenderService, renderer, this.rows, this.screenElement));\n    this._instantiationService.setService(IRenderService, this._renderService);\n    this.register(this._renderService.onRenderedBufferChange(e => this._onRender.fire(e)));\n    this.onResize(e => this._renderService!.resize(e.cols, e.rows));\n\n    this._compositionView = document.createElement('div');\n    this._compositionView.classList.add('composition-view');\n    this._compositionHelper = this._instantiationService.createInstance(CompositionHelper, this.textarea, this._compositionView);\n    this._helperContainer.appendChild(this._compositionView);\n\n    // Performance: Add viewport and helper elements from the fragment\n    this.element.appendChild(fragment);\n\n    this._soundService = this._instantiationService.createInstance(SoundService);\n    this._instantiationService.setService(ISoundService, this._soundService);\n    this._mouseService = this._instantiationService.createInstance(MouseService);\n    this._instantiationService.setService(IMouseService, this._mouseService);\n\n    this.viewport = this._instantiationService.createInstance(Viewport,\n      (amount: number) => this.scrollLines(amount, true, ScrollSource.VIEWPORT),\n      this._viewportElement,\n      this._viewportScrollArea,\n      this.element\n    );\n    this.viewport.onThemeChange(this._colorManager.colors);\n    this.register(this._inputHandler.onRequestSyncScrollBar(() => this.viewport!.syncScrollArea()));\n    this.register(this.viewport);\n\n    this.register(this.onCursorMove(() => {\n      this._renderService!.onCursorMove();\n      this._syncTextArea();\n    }));\n    this.register(this.onResize(() => this._renderService!.onResize(this.cols, this.rows)));\n    this.register(this.onBlur(() => this._renderService!.onBlur()));\n    this.register(this.onFocus(() => this._renderService!.onFocus()));\n    this.register(this._renderService.onDimensionsChange(() => this.viewport!.syncScrollArea()));\n\n    this._selectionService = this.register(this._instantiationService.createInstance(SelectionService,\n      this.element,\n      this.screenElement,\n      this.linkifier2\n    ));\n    this._instantiationService.setService(ISelectionService, this._selectionService);\n    this.register(this._selectionService.onRequestScrollLines(e => this.scrollLines(e.amount, e.suppressScrollEvent)));\n    this.register(this._selectionService.onSelectionChange(() => this._onSelectionChange.fire()));\n    this.register(this._selectionService.onRequestRedraw(e => this._renderService!.onSelectionChanged(e.start, e.end, e.columnSelectMode)));\n    this.register(this._selectionService.onLinuxMouseSelection(text => {\n      // If there's a new selection, put it into the textarea, focus and select it\n      // in order to register it as a selection on the OS. This event is fired\n      // only on Linux to enable middle click to paste selection.\n      this.textarea!.value = text;\n      this.textarea!.focus();\n      this.textarea!.select();\n    }));\n    this.register(this._onScroll.event(ev => {\n      this.viewport!.syncScrollArea();\n      this._selectionService!.refresh();\n    }));\n    this.register(addDisposableDomListener(this._viewportElement, 'scroll', () => this._selectionService!.refresh()));\n\n    this._mouseZoneManager = this._instantiationService.createInstance(MouseZoneManager, this.element, this.screenElement);\n    this.register(this._mouseZoneManager);\n    this.register(this.onScroll(() => this._mouseZoneManager!.clearAll()));\n    this.linkifier.attachToDom(this.element, this._mouseZoneManager);\n    this.linkifier2.attachToDom(this.screenElement, this._mouseService, this._renderService);\n\n    // This event listener must be registered aftre MouseZoneManager is created\n    this.register(addDisposableDomListener(this.element, 'mousedown', (e: MouseEvent) => this._selectionService!.onMouseDown(e)));\n\n    // apply mouse event classes set by escape codes before terminal was attached\n    if (this.coreMouseService.areMouseEventsActive) {\n      this._selectionService.disable();\n      this.element.classList.add('enable-mouse-events');\n    } else {\n      this._selectionService.enable();\n    }\n\n    if (this.options.screenReaderMode) {\n      // Note that this must be done *after* the renderer is created in order to\n      // ensure the correct order of the dprchange event\n      this._accessibilityManager = new AccessibilityManager(this, this._renderService);\n    }\n\n    // Measure the character size\n    this._charSizeService.measure();\n\n    // Setup loop that draws to screen\n    this.refresh(0, this.rows - 1);\n\n    // Initialize global actions that need to be taken on the document.\n    this._initGlobal();\n\n    // Listen for mouse events and translate\n    // them into terminal mouse protocols.\n    this.bindMouse();\n  }\n\n  private _createRenderer(): IRenderer {\n    switch (this.options.rendererType) {\n      case 'canvas': return this._instantiationService.createInstance(Renderer, this._colorManager!.colors, this.screenElement!, this.linkifier, this.linkifier2);\n      case 'dom': return this._instantiationService.createInstance(DomRenderer, this._colorManager!.colors, this.element!, this.screenElement!, this._viewportElement!, this.linkifier, this.linkifier2);\n      default: throw new Error(`Unrecognized rendererType \"${this.options.rendererType}\"`);\n    }\n  }\n\n  /**\n   * Sets the theme on the renderer. The renderer must have been initialized.\n   * @param theme The theme to set.\n   */\n  private _setTheme(theme: ITheme): void {\n    this._theme = theme;\n    this._colorManager?.setTheme(theme);\n    this._renderService?.setColors(this._colorManager!.colors);\n    this.viewport?.onThemeChange(this._colorManager!.colors);\n  }\n\n  /**\n   * Bind certain mouse events to the terminal.\n   * By default only 3 button + wheel up/down is ativated. For higher buttons\n   * no mouse report will be created. Typically the standard actions will be active.\n   *\n   * There are several reasons not to enable support for higher buttons/wheel:\n   * - Button 4 and 5 are typically used for history back and forward navigation,\n   *   there is no straight forward way to supress/intercept those standard actions.\n   * - Support for higher buttons does not work in some platform/browser combinations.\n   * - Left/right wheel was not tested.\n   * - Emulators vary in mouse button support, typically only 3 buttons and\n   *   wheel up/down work reliable.\n   *\n   * TODO: Move mouse event code into its own file.\n   */\n  public bindMouse(): void {\n    const self = this;\n    const el = this.element!;\n\n    // send event to CoreMouseService\n    function sendEvent(ev: MouseEvent | WheelEvent): boolean {\n      // get mouse coordinates\n      const pos = self._mouseService!.getRawByteCoords(ev, self.screenElement!, self.cols, self.rows);\n      if (!pos) {\n        return false;\n      }\n\n      let but: CoreMouseButton;\n      let action: CoreMouseAction | undefined;\n      switch ((ev as any).overrideType || ev.type) {\n        case 'mousemove':\n          action = CoreMouseAction.MOVE;\n          if (ev.buttons === undefined) {\n            // buttons is not supported on macOS, try to get a value from button instead\n            but = CoreMouseButton.NONE;\n            if (ev.button !== undefined) {\n              but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n            }\n          } else {\n            // according to MDN buttons only reports up to button 5 (AUX2)\n            but = ev.buttons & 1 ? CoreMouseButton.LEFT :\n              ev.buttons & 4 ? CoreMouseButton.MIDDLE :\n                ev.buttons & 2 ? CoreMouseButton.RIGHT :\n                  CoreMouseButton.NONE; // fallback to NONE\n          }\n          break;\n        case 'mouseup':\n          action = CoreMouseAction.UP;\n          but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n          break;\n        case 'mousedown':\n          action = CoreMouseAction.DOWN;\n          but = ev.button < 3 ? ev.button : CoreMouseButton.NONE;\n          break;\n        case 'wheel':\n          // only UP/DOWN wheel events are respected\n          if ((ev as WheelEvent).deltaY !== 0) {\n            action = (ev as WheelEvent).deltaY < 0 ? CoreMouseAction.UP : CoreMouseAction.DOWN;\n          }\n          but = CoreMouseButton.WHEEL;\n          break;\n        default:\n          // dont handle other event types by accident\n          return false;\n      }\n\n      // exit if we cannot determine valid button/action values\n      // do nothing for higher buttons than wheel\n      if (action === undefined || but === undefined || but > CoreMouseButton.WHEEL) {\n        return false;\n      }\n\n      return self.coreMouseService.triggerMouseEvent({\n        col: pos.x - 33, // FIXME: why -33 here?\n        row: pos.y - 33,\n        button: but,\n        action,\n        ctrl: ev.ctrlKey,\n        alt: ev.altKey,\n        shift: ev.shiftKey\n      });\n    }\n\n    /**\n     * Event listener state handling.\n     * We listen to the onProtocolChange event of CoreMouseService and put\n     * requested listeners in `requestedEvents`. With this the listeners\n     * have all bits to do the event listener juggling.\n     * Note: 'mousedown' currently is \"always on\" and not managed\n     * by onProtocolChange.\n     */\n    const requestedEvents: { [key: string]: ((ev: Event) => void) | null } = {\n      mouseup: null,\n      wheel: null,\n      mousedrag: null,\n      mousemove: null\n    };\n    const eventListeners: { [key: string]: (ev: any) => void | boolean } = {\n      mouseup: (ev: MouseEvent) => {\n        sendEvent(ev);\n        if (!ev.buttons) {\n          // if no other button is held remove global handlers\n          this._document!.removeEventListener('mouseup', requestedEvents.mouseup!);\n          if (requestedEvents.mousedrag) {\n            this._document!.removeEventListener('mousemove', requestedEvents.mousedrag);\n          }\n        }\n        return this.cancel(ev);\n      },\n      wheel: (ev: WheelEvent) => {\n        sendEvent(ev);\n        return this.cancel(ev, true);\n      },\n      mousedrag: (ev: MouseEvent) => {\n        // deal only with move while a button is held\n        if (ev.buttons) {\n          sendEvent(ev);\n        }\n      },\n      mousemove: (ev: MouseEvent) => {\n        // deal only with move without any button\n        if (!ev.buttons) {\n          sendEvent(ev);\n        }\n      }\n    };\n    this.register(this.coreMouseService.onProtocolChange(events => {\n      // apply global changes on events\n      if (events) {\n        if (this.optionsService.options.logLevel === 'debug') {\n          this._logService.debug('Binding to mouse events:', this.coreMouseService.explainEvents(events));\n        }\n        this.element!.classList.add('enable-mouse-events');\n        this._selectionService!.disable();\n      } else {\n        this._logService.debug('Unbinding from mouse events.');\n        this.element!.classList.remove('enable-mouse-events');\n        this._selectionService!.enable();\n      }\n\n      // add/remove handlers from requestedEvents\n\n      if (!(events & CoreMouseEventType.MOVE)) {\n        el.removeEventListener('mousemove', requestedEvents.mousemove!);\n        requestedEvents.mousemove = null;\n      } else if (!requestedEvents.mousemove) {\n        el.addEventListener('mousemove', eventListeners.mousemove);\n        requestedEvents.mousemove = eventListeners.mousemove;\n      }\n\n      if (!(events & CoreMouseEventType.WHEEL)) {\n        el.removeEventListener('wheel', requestedEvents.wheel!);\n        requestedEvents.wheel = null;\n      } else if (!requestedEvents.wheel) {\n        el.addEventListener('wheel', eventListeners.wheel, { passive: false });\n        requestedEvents.wheel = eventListeners.wheel;\n      }\n\n      if (!(events & CoreMouseEventType.UP)) {\n        this._document!.removeEventListener('mouseup', requestedEvents.mouseup!);\n        requestedEvents.mouseup = null;\n      } else if (!requestedEvents.mouseup) {\n        requestedEvents.mouseup = eventListeners.mouseup;\n      }\n\n      if (!(events & CoreMouseEventType.DRAG)) {\n        this._document!.removeEventListener('mousemove', requestedEvents.mousedrag!);\n        requestedEvents.mousedrag = null;\n      } else if (!requestedEvents.mousedrag) {\n        requestedEvents.mousedrag = eventListeners.mousedrag;\n      }\n    }));\n    // force initial onProtocolChange so we dont miss early mouse requests\n    this.coreMouseService.activeProtocol = this.coreMouseService.activeProtocol;\n\n    /**\n     * \"Always on\" event listeners.\n     */\n    this.register(addDisposableDomListener(el, 'mousedown', (ev: MouseEvent) => {\n      ev.preventDefault();\n      this.focus();\n\n      // Don't send the mouse button to the pty if mouse events are disabled or\n      // if the selection manager is having selection forced (ie. a modifier is\n      // held).\n      if (!this.coreMouseService.areMouseEventsActive || this._selectionService!.shouldForceSelection(ev)) {\n        return;\n      }\n\n      sendEvent(ev);\n\n      // Register additional global handlers which should keep reporting outside\n      // of the terminal element.\n      // Note: Other emulators also do this for 'mousedown' while a button\n      // is held, we currently limit 'mousedown' to the terminal only.\n      if (requestedEvents.mouseup) {\n        this._document!.addEventListener('mouseup', requestedEvents.mouseup);\n      }\n      if (requestedEvents.mousedrag) {\n        this._document!.addEventListener('mousemove', requestedEvents.mousedrag);\n      }\n\n      return this.cancel(ev);\n    }));\n\n    this.register(addDisposableDomListener(el, 'wheel', (ev: WheelEvent) => {\n      // do nothing, if app side handles wheel itself\n      if (requestedEvents.wheel) return;\n\n      if (!this.buffer.hasScrollback) {\n        // Convert wheel events into up/down events when the buffer does not have scrollback, this\n        // enables scrolling in apps hosted in the alt buffer such as vim or tmux.\n        const amount = this.viewport!.getLinesScrolled(ev);\n\n        // Do nothing if there's no vertical scroll\n        if (amount === 0) {\n          return;\n        }\n\n        // Construct and send sequences\n        const sequence = C0.ESC + (this.coreService.decPrivateModes.applicationCursorKeys ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n        let data = '';\n        for (let i = 0; i < Math.abs(amount); i++) {\n          data += sequence;\n        }\n        this.coreService.triggerDataEvent(data, true);\n        return this.cancel(ev, true);\n      }\n\n      // normal viewport scrolling\n      // conditionally stop event, if the viewport still had rows to scroll within\n      if (this.viewport!.onWheel(ev)) {\n        return this.cancel(ev);\n      }\n    }, { passive: false }));\n\n    this.register(addDisposableDomListener(el, 'touchstart', (ev: TouchEvent) => {\n      if (this.coreMouseService.areMouseEventsActive) return;\n      this.viewport!.onTouchStart(ev);\n      return this.cancel(ev);\n    }, { passive: true }));\n\n    this.register(addDisposableDomListener(el, 'touchmove', (ev: TouchEvent) => {\n      if (this.coreMouseService.areMouseEventsActive) return;\n      if (!this.viewport!.onTouchMove(ev)) {\n        return this.cancel(ev);\n      }\n    }, { passive: false }));\n  }\n\n\n  /**\n   * Tells the renderer to refresh terminal content between two rows (inclusive) at the next\n   * opportunity.\n   * @param start The row to start from (between 0 and this.rows - 1).\n   * @param end The row to end at (between start and this.rows - 1).\n   */\n  public refresh(start: number, end: number): void {\n    this._renderService?.refreshRows(start, end);\n  }\n\n  /**\n   * Queues linkification for the specified rows.\n   * @param start The row to start from (between 0 and this.rows - 1).\n   * @param end The row to end at (between start and this.rows - 1).\n   */\n  private _queueLinkification(start: number, end: number): void {\n    this.linkifier?.linkifyRows(start, end);\n  }\n\n  /**\n   * Change the cursor style for different selection modes\n   */\n  public updateCursorStyle(ev: KeyboardEvent): void {\n    if (this._selectionService?.shouldColumnSelect(ev)) {\n      this.element!.classList.add('column-select');\n    } else {\n      this.element!.classList.remove('column-select');\n    }\n  }\n\n  /**\n   * Display the cursor element\n   */\n  private _showCursor(): void {\n    if (!this.coreService.isCursorInitialized) {\n      this.coreService.isCursorInitialized = true;\n      this.refresh(this.buffer.y, this.buffer.y);\n    }\n  }\n\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source = ScrollSource.TERMINAL): void {\n    super.scrollLines(disp, suppressScrollEvent, source);\n    this.refresh(0, this.rows - 1);\n  }\n\n  public paste(data: string): void {\n    paste(data, this.textarea!, this.coreService);\n  }\n\n  /**\n   * Attaches a custom key event handler which is run before keys are processed,\n   * giving consumers of xterm.js ultimate control as to what keys should be\n   * processed by the terminal and what keys should not.\n   * @param customKeyEventHandler The custom KeyboardEvent handler to attach.\n   * This is a function that takes a KeyboardEvent, allowing consumers to stop\n   * propagation and/or prevent the default action. The function returns whether\n   * the event should be processed by xterm.js.\n   */\n  public attachCustomKeyEventHandler(customKeyEventHandler: CustomKeyEventHandler): void {\n    this._customKeyEventHandler = customKeyEventHandler;\n  }\n\n  /**\n   * Registers a link matcher, allowing custom link patterns to be matched and\n   * handled.\n   * @param regex The regular expression to search for, specifically\n   * this searches the textContent of the rows. You will want to use \\s to match\n   * a space ' ' character for example.\n   * @param handler The callback when the link is called.\n   * @param options Options for the link matcher.\n   * @return The ID of the new matcher, this can be used to deregister.\n   */\n  public registerLinkMatcher(regex: RegExp, handler: LinkMatcherHandler, options?: ILinkMatcherOptions): number {\n    const matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n    this.refresh(0, this.rows - 1);\n    return matcherId;\n  }\n\n  /**\n   * Deregisters a link matcher if it has been registered.\n   * @param matcherId The link matcher's ID (returned after register)\n   */\n  public deregisterLinkMatcher(matcherId: number): void {\n    if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n      this.refresh(0, this.rows - 1);\n    }\n  }\n\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    return this.linkifier2.registerLinkProvider(linkProvider);\n  }\n\n  public registerCharacterJoiner(handler: CharacterJoinerHandler): number {\n    if (!this._characterJoinerService) {\n      throw new Error('Terminal must be opened first');\n    }\n    const joinerId = this._characterJoinerService.register(handler);\n    this.refresh(0, this.rows - 1);\n    return joinerId;\n  }\n\n  public deregisterCharacterJoiner(joinerId: number): void {\n    if (!this._characterJoinerService) {\n      throw new Error('Terminal must be opened first');\n    }\n    if (this._characterJoinerService.deregister(joinerId)) {\n      this.refresh(0, this.rows - 1);\n    }\n  }\n\n  public get markers(): IMarker[] {\n    return this.buffer.markers;\n  }\n\n  public addMarker(cursorYOffset: number): IMarker | undefined {\n    // Disallow markers on the alt buffer\n    if (this.buffer !== this.buffers.normal) {\n      return;\n    }\n\n    return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n  }\n\n  /**\n   * Gets whether the terminal has an active selection.\n   */\n  public hasSelection(): boolean {\n    return this._selectionService ? this._selectionService.hasSelection : false;\n  }\n\n  /**\n   * Selects text within the terminal.\n   * @param column The column the selection starts at..\n   * @param row The row the selection starts at.\n   * @param length The length of the selection.\n   */\n  public select(column: number, row: number, length: number): void {\n    this._selectionService!.setSelection(column, row, length);\n  }\n\n  /**\n   * Gets the terminal's current selection, this is useful for implementing copy\n   * behavior outside of xterm.js.\n   */\n  public getSelection(): string {\n    return this._selectionService ? this._selectionService.selectionText : '';\n  }\n\n  public getSelectionPosition(): ISelectionPosition | undefined {\n    if (!this._selectionService || !this._selectionService.hasSelection) {\n      return undefined;\n    }\n\n    return {\n      startColumn: this._selectionService.selectionStart![0],\n      startRow: this._selectionService.selectionStart![1],\n      endColumn: this._selectionService.selectionEnd![0],\n      endRow: this._selectionService.selectionEnd![1]\n    };\n  }\n\n  /**\n   * Clears the current terminal selection.\n   */\n  public clearSelection(): void {\n    this._selectionService?.clearSelection();\n  }\n\n  /**\n   * Selects all text within the terminal.\n   */\n  public selectAll(): void {\n    this._selectionService?.selectAll();\n  }\n\n  public selectLines(start: number, end: number): void {\n    this._selectionService?.selectLines(start, end);\n  }\n\n  /**\n   * Handle a keydown event\n   * Key Resources:\n   *   - https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent\n   * @param ev The keydown event to be handled.\n   */\n  protected _keyDown(event: KeyboardEvent): boolean | undefined {\n    this._keyDownHandled = false;\n\n    if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n      return false;\n    }\n\n    if (!this._compositionHelper!.keydown(event)) {\n      if (this.buffer.ybase !== this.buffer.ydisp) {\n        this._bufferService.scrollToBottom();\n      }\n      return false;\n    }\n\n    if (event.key === 'Dead' || event.key === 'AltGraph') {\n      this._unprocessedDeadKey = true;\n    }\n\n    const result = evaluateKeyboardEvent(event, this.coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);\n\n    this.updateCursorStyle(event);\n\n    if (result.type === KeyboardResultType.PAGE_DOWN || result.type === KeyboardResultType.PAGE_UP) {\n      const scrollCount = this.rows - 1;\n      this.scrollLines(result.type === KeyboardResultType.PAGE_UP ? -scrollCount : scrollCount);\n      return this.cancel(event, true);\n    }\n\n    if (result.type === KeyboardResultType.SELECT_ALL) {\n      this.selectAll();\n    }\n\n    if (this._isThirdLevelShift(this.browser, event)) {\n      return true;\n    }\n\n    if (result.cancel) {\n      // The event is canceled at the end already, is this necessary?\n      this.cancel(event, true);\n    }\n\n    if (!result.key) {\n      return true;\n    }\n\n    if (this._unprocessedDeadKey) {\n      this._unprocessedDeadKey = false;\n      return true;\n    }\n\n    // If ctrl+c or enter is being sent, clear out the textarea. This is done so that screen readers\n    // will announce deleted characters. This will not work 100% of the time but it should cover\n    // most scenarios.\n    if (result.key === C0.ETX || result.key === C0.CR) {\n      this.textarea!.value = '';\n    }\n\n    this._onKey.fire({ key: result.key, domEvent: event });\n    this._showCursor();\n    this.coreService.triggerDataEvent(result.key, true);\n\n    // Cancel events when not in screen reader mode so events don't get bubbled up and handled by\n    // other listeners. When screen reader mode is enabled, this could cause issues if the event\n    // is handled at a higher level, this is a compromise in order to echo keys to the screen\n    // reader.\n    if (!this.optionsService.options.screenReaderMode) {\n      return this.cancel(event, true);\n    }\n\n    this._keyDownHandled = true;\n  }\n\n  private _isThirdLevelShift(browser: IBrowser, ev: KeyboardEvent): boolean {\n    const thirdLevelKey =\n      (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n      (browser.isWindows && ev.altKey && ev.ctrlKey && !ev.metaKey) ||\n      (browser.isWindows && ev.getModifierState('AltGraph'));\n\n    if (ev.type === 'keypress') {\n      return thirdLevelKey;\n    }\n\n    // Don't invoke for arrows, pageDown, home, backspace, etc. (on non-keypress events)\n    return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n  }\n\n  protected _keyUp(ev: KeyboardEvent): void {\n    if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n      return;\n    }\n\n    if (!wasModifierKeyOnlyEvent(ev)) {\n      this.focus();\n    }\n\n    this.updateCursorStyle(ev);\n    this._keyPressHandled = false;\n  }\n\n  /**\n   * Handle a keypress event.\n   * Key Resources:\n   *   - https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent\n   * @param ev The keypress event to be handled.\n   */\n  protected _keyPress(ev: KeyboardEvent): boolean {\n    let key;\n\n    this._keyPressHandled = false;\n\n    if (this._keyDownHandled) {\n      return false;\n    }\n\n    if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n      return false;\n    }\n\n    this.cancel(ev);\n\n    if (ev.charCode) {\n      key = ev.charCode;\n    } else if (ev.which === null || ev.which === undefined) {\n      key = ev.keyCode;\n    } else if (ev.which !== 0 && ev.charCode !== 0) {\n      key = ev.which;\n    } else {\n      return false;\n    }\n\n    if (!key || (\n      (ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev)\n    )) {\n      return false;\n    }\n\n    key = String.fromCharCode(key);\n\n    this._onKey.fire({ key, domEvent: ev });\n    this._showCursor();\n    this.coreService.triggerDataEvent(key, true);\n\n    this._keyPressHandled = true;\n\n    // The key was handled so clear the dead key state, otherwise certain keystrokes like arrow\n    // keys could be ignored\n    this._unprocessedDeadKey = false;\n\n    return true;\n  }\n\n  /**\n   * Handle an input event.\n   * Key Resources:\n   *   - https://developer.mozilla.org/en-US/docs/Web/API/InputEvent\n   * @param ev The input event to be handled.\n   */\n  protected _inputEvent(ev: InputEvent): boolean {\n    // Only support emoji IMEs when screen reader mode is disabled as the event must bubble up to\n    // support reading out character input which can doubling up input characters\n    if (ev.data && ev.inputType === 'insertText' && !ev.composed && !this.optionsService.options.screenReaderMode) {\n      if (this._keyPressHandled) {\n        return false;\n      }\n\n      // The key was handled so clear the dead key state, otherwise certain keystrokes like arrow\n      // keys could be ignored\n      this._unprocessedDeadKey = false;\n\n      const text = ev.data;\n      this.coreService.triggerDataEvent(text, true);\n\n      this.cancel(ev);\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Ring the bell.\n   * Note: We could do sweet things with webaudio here\n   */\n  public bell(): void {\n    if (this._soundBell()) {\n      this._soundService?.playBellSound();\n    }\n\n    this._onBell.fire();\n\n    // if (this._visualBell()) {\n    //   this.element.classList.add('visual-bell-active');\n    //   clearTimeout(this._visualBellTimer);\n    //   this._visualBellTimer = window.setTimeout(() => {\n    //     this.element.classList.remove('visual-bell-active');\n    //   }, 200);\n    // }\n  }\n\n  /**\n   * Resizes the terminal.\n   *\n   * @param x The number of columns to resize to.\n   * @param y The number of rows to resize to.\n   */\n  public resize(x: number, y: number): void {\n    if (x === this.cols && y === this.rows) {\n      // Check if we still need to measure the char size (fixes #785).\n      if (this._charSizeService && !this._charSizeService.hasValidSize) {\n        this._charSizeService.measure();\n      }\n      return;\n    }\n\n    super.resize(x, y);\n  }\n\n  private _afterResize(x: number, y: number): void {\n    this._charSizeService?.measure();\n\n    // Sync the scroll area to make sure scroll events don't fire and scroll the viewport to an\n    // invalid location\n    this.viewport?.syncScrollArea(true);\n  }\n\n  /**\n   * Clear the entire buffer, making the prompt line the new first line.\n   */\n  public clear(): void {\n    if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n      // Don't clear if it's already clear\n      return;\n    }\n    this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y)!);\n    this.buffer.lines.length = 1;\n    this.buffer.ydisp = 0;\n    this.buffer.ybase = 0;\n    this.buffer.y = 0;\n    for (let i = 1; i < this.rows; i++) {\n      this.buffer.lines.push(this.buffer.getBlankLine(DEFAULT_ATTR_DATA));\n    }\n    this.refresh(0, this.rows - 1);\n    this._onScroll.fire({ position: this.buffer.ydisp, source: ScrollSource.TERMINAL });\n  }\n\n  /**\n   * Reset terminal.\n   * Note: Calling this directly from JS is synchronous but does not clear\n   * input buffers and does not reset the parser, thus the terminal will\n   * continue to apply pending input data.\n   * If you need in band reset (synchronous with input data) consider\n   * using DECSTR (soft reset, CSI ! p) or RIS instead (hard reset, ESC c).\n   */\n  public reset(): void {\n    /**\n     * Since _setup handles a full terminal creation, we have to carry forward\n     * a few things that should not reset.\n     */\n    this.options.rows = this.rows;\n    this.options.cols = this.cols;\n    const customKeyEventHandler = this._customKeyEventHandler;\n\n    this._setup();\n    super.reset();\n    this._selectionService?.reset();\n\n    // reattach\n    this._customKeyEventHandler = customKeyEventHandler;\n\n    // do a full screen refresh\n    this.refresh(0, this.rows - 1);\n    this.viewport?.syncScrollArea();\n  }\n\n  public clearTextureAtlas(): void {\n    this._renderService?.clearTextureAtlas();\n  }\n\n  private _reportFocus(): void {\n    if (this.element?.classList.contains('focus')) {\n      this.coreService.triggerDataEvent(C0.ESC + '[I');\n    } else {\n      this.coreService.triggerDataEvent(C0.ESC + '[O');\n    }\n  }\n\n  private _reportWindowsOptions(type: WindowsOptionsReportType): void {\n    if (!this._renderService) {\n      return;\n    }\n\n    switch (type) {\n      case WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:\n        const canvasWidth = this._renderService.dimensions.scaledCanvasWidth.toFixed(0);\n        const canvasHeight = this._renderService.dimensions.scaledCanvasHeight.toFixed(0);\n        this.coreService.triggerDataEvent(`${C0.ESC}[4;${canvasHeight};${canvasWidth}t`);\n        break;\n      case WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:\n        const cellWidth = this._renderService.dimensions.scaledCellWidth.toFixed(0);\n        const cellHeight = this._renderService.dimensions.scaledCellHeight.toFixed(0);\n        this.coreService.triggerDataEvent(`${C0.ESC}[6;${cellHeight};${cellWidth}t`);\n        break;\n    }\n  }\n\n  // TODO: Remove cancel function and cancelEvents option\n  public cancel(ev: Event, force?: boolean): boolean | undefined {\n    if (!this.options.cancelEvents && !force) {\n      return;\n    }\n    ev.preventDefault();\n    ev.stopPropagation();\n    return false;\n  }\n\n  private _visualBell(): boolean {\n    return false;\n    // return this.options.bellStyle === 'visual' ||\n    //     this.options.bellStyle === 'both';\n  }\n\n  private _soundBell(): boolean {\n    return this.options.bellStyle === 'sound';\n    // return this.options.bellStyle === 'sound' ||\n    //     this.options.bellStyle === 'both';\n  }\n}\n\n/**\n * Helpers\n */\n\nfunction wasModifierKeyOnlyEvent(ev: KeyboardEvent): boolean {\n  return ev.keyCode === 16 || // Shift\n    ev.keyCode === 17 || // Ctrl\n    ev.keyCode === 18; // Alt\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nconst RENDER_DEBOUNCE_THRESHOLD_MS = 1000; // 1 Second\n\nimport { IRenderDebouncer } from 'browser/Types';\n\n/**\n * Debounces calls to update screen readers to update at most once configurable interval of time.\n */\nexport class TimeBasedDebouncer implements IRenderDebouncer {\n  private _rowStart: number | undefined;\n  private _rowEnd: number | undefined;\n  private _rowCount: number | undefined;\n\n  // The last moment that the Terminal was refreshed at\n  private _lastRefreshMs = 0;\n  // Whether a trailing refresh should be triggered due to a refresh request that was throttled\n  private _additionalRefreshRequested = false;\n\n  private _refreshTimeoutID: number | undefined;\n\n  constructor(\n    private _renderCallback: (start: number, end: number) => void,\n    private readonly _debounceThresholdMS = RENDER_DEBOUNCE_THRESHOLD_MS\n  ) {\n  }\n\n  public dispose(): void {\n    if (this._refreshTimeoutID) {\n      clearTimeout(this._refreshTimeoutID);\n    }\n  }\n\n  public refresh(rowStart: number | undefined, rowEnd: number | undefined, rowCount: number): void {\n    this._rowCount = rowCount;\n    // Get the min/max row start/end for the arg values\n    rowStart = rowStart !== undefined ? rowStart : 0;\n    rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n    // Set the properties to the updated values\n    this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n    this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n\n    // Only refresh if the time since last refresh is above a threshold, otherwise wait for\n    // enough time to pass before refreshing again.\n    const refreshRequestTime: number = Date.now();\n    if (refreshRequestTime - this._lastRefreshMs >= this._debounceThresholdMS) {\n      // Enough time has lapsed since the last refresh; refresh immediately\n      this._lastRefreshMs = refreshRequestTime;\n      this._innerRefresh();\n    } else if (!this._additionalRefreshRequested) {\n      // This is the first additional request throttled; set up trailing refresh\n      const elapsed = refreshRequestTime - this._lastRefreshMs;\n      const waitPeriodBeforeTrailingRefresh = this._debounceThresholdMS - elapsed;\n      this._additionalRefreshRequested = true;\n\n      this._refreshTimeoutID = window.setTimeout(() => {\n        this._lastRefreshMs = Date.now();\n        this._innerRefresh();\n        this._additionalRefreshRequested = false;\n        this._refreshTimeoutID = undefined; // No longer need to clear the timeout\n      }, waitPeriodBeforeTrailingRefresh);\n    }\n  }\n\n  private _innerRefresh(): void {\n    // Make sure values are set\n    if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n      return;\n    }\n\n    // Clamp values\n    const start = Math.max(this._rowStart, 0);\n    const end = Math.min(this._rowEnd, this._rowCount - 1);\n\n    // Reset debouncer (this happens before render callback as the render could trigger it again)\n    this._rowStart = undefined;\n    this._rowEnd = undefined;\n\n    // Run render callback\n    this._renderCallback(start, end);\n  }\n}\n\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IColorSet, IViewport } from 'browser/Types';\nimport { ICharSizeService, IRenderService } from 'browser/services/Services';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\nimport { IBuffer } from 'common/buffer/Types';\nimport { IRenderDimensions } from 'browser/renderer/Types';\n\nconst FALLBACK_SCROLL_BAR_WIDTH = 15;\n\n/**\n * Represents the viewport of a terminal, the visible area within the larger buffer of output.\n * Logic for the virtual scroll bar is included in this object.\n */\nexport class Viewport extends Disposable implements IViewport {\n  public scrollBarWidth: number = 0;\n  private _currentRowHeight: number = 0;\n  private _currentScaledCellHeight: number = 0;\n  private _lastRecordedBufferLength: number = 0;\n  private _lastRecordedViewportHeight: number = 0;\n  private _lastRecordedBufferHeight: number = 0;\n  private _lastTouchY: number = 0;\n  private _lastScrollTop: number = 0;\n  private _lastHadScrollBar: boolean = false;\n  private _activeBuffer: IBuffer;\n  private _renderDimensions: IRenderDimensions;\n\n  // Stores a partial line amount when scrolling, this is used to keep track of how much of a line\n  // is scrolled so we can \"scroll\" over partial lines and feel natural on touchpads. This is a\n  // quick fix and could have a more robust solution in place that reset the value when needed.\n  private _wheelPartialScroll: number = 0;\n\n  private _refreshAnimationFrame: number | null = null;\n  private _ignoreNextScrollEvent: boolean = false;\n\n  constructor(\n    private readonly _scrollLines: (amount: number) => void,\n    private readonly _viewportElement: HTMLElement,\n    private readonly _scrollArea: HTMLElement,\n    private readonly _element: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    super();\n\n    // Measure the width of the scrollbar. If it is 0 we can assume it's an OSX overlay scrollbar.\n    // Unfortunately the overlay scrollbar would be hidden underneath the screen element in that case,\n    // therefore we account for a standard amount to make it visible\n    this.scrollBarWidth = (this._viewportElement.offsetWidth - this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n    this._lastHadScrollBar = true;\n    this.register(addDisposableDomListener(this._viewportElement, 'scroll', this._onScroll.bind(this)));\n\n    // Track properties used in performance critical code manually to avoid using slow getters\n    this._activeBuffer = this._bufferService.buffer;\n    this.register(this._bufferService.buffers.onBufferActivate(e => this._activeBuffer = e.activeBuffer));\n    this._renderDimensions = this._renderService.dimensions;\n    this.register(this._renderService.onDimensionsChange(e => this._renderDimensions = e));\n\n    // Perform this async to ensure the ICharSizeService is ready.\n    setTimeout(() => this.syncScrollArea(), 0);\n  }\n\n  public onThemeChange(colors: IColorSet): void {\n    this._viewportElement.style.backgroundColor = colors.background.css;\n  }\n\n  /**\n   * Refreshes row height, setting line-height, viewport height and scroll area height if\n   * necessary.\n   */\n  private _refresh(immediate: boolean): void {\n    if (immediate) {\n      this._innerRefresh();\n      if (this._refreshAnimationFrame !== null) {\n        cancelAnimationFrame(this._refreshAnimationFrame);\n      }\n      return;\n    }\n    if (this._refreshAnimationFrame === null) {\n      this._refreshAnimationFrame = requestAnimationFrame(() => this._innerRefresh());\n    }\n  }\n\n  private _innerRefresh(): void {\n    if (this._charSizeService.height > 0) {\n      this._currentRowHeight = this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio;\n      this._currentScaledCellHeight = this._renderService.dimensions.scaledCellHeight;\n      this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n      const newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderService.dimensions.canvasHeight);\n      if (this._lastRecordedBufferHeight !== newBufferHeight) {\n        this._lastRecordedBufferHeight = newBufferHeight;\n        this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n      }\n    }\n\n    // Sync scrollTop\n    const scrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;\n    if (this._viewportElement.scrollTop !== scrollTop) {\n      // Ignore the next scroll event which will be triggered by setting the scrollTop as we do not\n      // want this event to scroll the terminal\n      this._ignoreNextScrollEvent = true;\n      this._viewportElement.scrollTop = scrollTop;\n    }\n\n    // Update scroll bar width\n    if (this._optionsService.options.scrollback === 0) {\n      this.scrollBarWidth = 0;\n    } else {\n      this.scrollBarWidth = (this._viewportElement.offsetWidth - this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n    }\n    this._lastHadScrollBar = this.scrollBarWidth > 0;\n\n    const elementStyle = window.getComputedStyle(this._element);\n    const elementPadding = parseInt(elementStyle.paddingLeft) + parseInt(elementStyle.paddingRight);\n    this._viewportElement.style.width = (this._renderService.dimensions.actualCellWidth * (this._bufferService.cols) + this.scrollBarWidth + (this._lastHadScrollBar ? elementPadding : 0)).toString() + 'px';\n    this._refreshAnimationFrame = null;\n  }\n\n  /**\n   * Updates dimensions and synchronizes the scroll area if necessary.\n   */\n  public syncScrollArea(immediate: boolean = false): void {\n    // If buffer height changed\n    if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) {\n      this._lastRecordedBufferLength = this._bufferService.buffer.lines.length;\n      this._refresh(immediate);\n      return;\n    }\n\n    // If viewport height changed\n    if (this._lastRecordedViewportHeight !== this._renderService.dimensions.canvasHeight) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If the buffer position doesn't match last scroll top\n    if (this._lastScrollTop !== this._activeBuffer.ydisp * this._currentRowHeight) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If row height changed\n    if (this._renderDimensions.scaledCellHeight !== this._currentScaledCellHeight) {\n      this._refresh(immediate);\n      return;\n    }\n\n    // If the scroll bar visibility changed\n    if (this._lastHadScrollBar !== (this._optionsService.options.scrollback > 0)) {\n      this._refresh(immediate);\n    }\n  }\n\n  /**\n   * Handles scroll events on the viewport, calculating the new viewport and requesting the\n   * terminal to scroll to it.\n   * @param ev The scroll event.\n   */\n  private _onScroll(ev: Event): void {\n    // Record current scroll top position\n    this._lastScrollTop = this._viewportElement.scrollTop;\n\n    // Don't attempt to scroll if the element is not visible, otherwise scrollTop will be corrupt\n    // which causes the terminal to scroll the buffer to the top\n    if (!this._viewportElement.offsetParent) {\n      return;\n    }\n\n    // Ignore the event if it was flagged to ignore (when the source of the event is from Viewport)\n    if (this._ignoreNextScrollEvent) {\n      this._ignoreNextScrollEvent = false;\n      // Still trigger the scroll so lines get refreshed\n      this._scrollLines(0);\n      return;\n    }\n\n    const newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n    const diff = newRow - this._bufferService.buffer.ydisp;\n    this._scrollLines(diff);\n  }\n\n  /**\n   * Handles bubbling of scroll event in case the viewport has reached top or bottom\n   * @param ev The scroll event.\n   * @param amount The amount scrolled\n   */\n  private _bubbleScroll(ev: Event, amount: number): boolean {\n    const scrollPosFromTop = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;\n    if ((amount < 0 && this._viewportElement.scrollTop !== 0) ||\n      (amount > 0 && scrollPosFromTop < this._lastRecordedBufferHeight)) {\n      if (ev.cancelable) {\n        ev.preventDefault();\n      }\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Handles mouse wheel events by adjusting the viewport's scrollTop and delegating the actual\n   * scrolling to `onScroll`, this event needs to be attached manually by the consumer of\n   * `Viewport`.\n   * @param ev The mouse wheel event.\n   */\n  public onWheel(ev: WheelEvent): boolean {\n    const amount = this._getPixelsScrolled(ev);\n    if (amount === 0) {\n      return false;\n    }\n    this._viewportElement.scrollTop += amount;\n    return this._bubbleScroll(ev, amount);\n  }\n\n  private _getPixelsScrolled(ev: WheelEvent): number {\n    // Do nothing if it's not a vertical scroll event\n    if (ev.deltaY === 0 || ev.shiftKey) {\n      return 0;\n    }\n\n    // Fallback to WheelEvent.DOM_DELTA_PIXEL\n    let amount = this._applyScrollModifier(ev.deltaY, ev);\n    if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      amount *= this._currentRowHeight;\n    } else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      amount *= this._currentRowHeight * this._bufferService.rows;\n    }\n    return amount;\n  }\n\n  /**\n   * Gets the number of pixels scrolled by the mouse event taking into account what type of delta\n   * is being used.\n   * @param ev The mouse wheel event.\n   */\n  public getLinesScrolled(ev: WheelEvent): number {\n    // Do nothing if it's not a vertical scroll event\n    if (ev.deltaY === 0 || ev.shiftKey) {\n      return 0;\n    }\n\n    // Fallback to WheelEvent.DOM_DELTA_LINE\n    let amount = this._applyScrollModifier(ev.deltaY, ev);\n    if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      amount /= this._currentRowHeight + 0.0; // Prevent integer division\n      this._wheelPartialScroll += amount;\n      amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n      this._wheelPartialScroll %= 1;\n    } else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      amount *= this._bufferService.rows;\n    }\n    return amount;\n  }\n\n  private _applyScrollModifier(amount: number, ev: WheelEvent): number {\n    const modifier = this._optionsService.options.fastScrollModifier;\n    // Multiply the scroll speed when the modifier is down\n    if ((modifier === 'alt' && ev.altKey) ||\n      (modifier === 'ctrl' && ev.ctrlKey) ||\n      (modifier === 'shift' && ev.shiftKey)) {\n      return amount * this._optionsService.options.fastScrollSensitivity * this._optionsService.options.scrollSensitivity;\n    }\n\n    return amount * this._optionsService.options.scrollSensitivity;\n  }\n\n  /**\n   * Handles the touchstart event, recording the touch occurred.\n   * @param ev The touch event.\n   */\n  public onTouchStart(ev: TouchEvent): void {\n    this._lastTouchY = ev.touches[0].pageY;\n  }\n\n  /**\n   * Handles the touchmove event, scrolling the viewport if the position shifted.\n   * @param ev The touch event.\n   */\n  public onTouchMove(ev: TouchEvent): boolean {\n    const deltaY = this._lastTouchY - ev.touches[0].pageY;\n    this._lastTouchY = ev.touches[0].pageY;\n    if (deltaY === 0) {\n      return false;\n    }\n    this._viewportElement.scrollTop += deltaY;\n    return this._bubbleScroll(ev, deltaY);\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderService } from 'browser/services/Services';\nimport { IBufferService, ICoreService, IOptionsService } from 'common/services/Services';\n\ninterface IPosition {\n  start: number;\n  end: number;\n}\n\n/**\n * Encapsulates the logic for handling compositionstart, compositionupdate and compositionend\n * events, displaying the in-progress composition to the UI and forwarding the final composition\n * to the handler.\n */\nexport class CompositionHelper {\n  /**\n   * Whether input composition is currently happening, eg. via a mobile keyboard, speech input or\n   * IME. This variable determines whether the compositionText should be displayed on the UI.\n   */\n  private _isComposing: boolean;\n  public get isComposing(): boolean { return this._isComposing; }\n\n  /**\n   * The position within the input textarea's value of the current composition.\n   */\n  private _compositionPosition: IPosition;\n\n  /**\n   * Whether a composition is in the process of being sent, setting this to false will cancel any\n   * in-progress composition.\n   */\n  private _isSendingComposition: boolean;\n\n  /**\n   * Data already sent due to keydown event.\n   */\n  private _dataAlreadySent: string;\n\n  constructor(\n    private readonly _textarea: HTMLTextAreaElement,\n    private readonly _compositionView: HTMLElement,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    this._isComposing = false;\n    this._isSendingComposition = false;\n    this._compositionPosition = { start: 0, end: 0 };\n    this._dataAlreadySent = '';\n  }\n\n  /**\n   * Handles the compositionstart event, activating the composition view.\n   */\n  public compositionstart(): void {\n    this._isComposing = true;\n    this._compositionPosition.start = this._textarea.value.length;\n    this._compositionView.textContent = '';\n    this._dataAlreadySent = '';\n    this._compositionView.classList.add('active');\n  }\n\n  /**\n   * Handles the compositionupdate event, updating the composition view.\n   * @param ev The event.\n   */\n  public compositionupdate(ev: Pick<CompositionEvent, 'data'>): void {\n    this._compositionView.textContent = ev.data;\n    this.updateCompositionElements();\n    setTimeout(() => {\n      this._compositionPosition.end = this._textarea.value.length;\n    }, 0);\n  }\n\n  /**\n   * Handles the compositionend event, hiding the composition view and sending the composition to\n   * the handler.\n   */\n  public compositionend(): void {\n    this._finalizeComposition(true);\n  }\n\n  /**\n   * Handles the keydown event, routing any necessary events to the CompositionHelper functions.\n   * @param ev The keydown event.\n   * @return Whether the Terminal should continue processing the keydown event.\n   */\n  public keydown(ev: KeyboardEvent): boolean {\n    if (this._isComposing || this._isSendingComposition) {\n      if (ev.keyCode === 229) {\n        // Continue composing if the keyCode is the \"composition character\"\n        return false;\n      }\n      if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n        // Continue composing if the keyCode is a modifier key\n        return false;\n      }\n      // Finish composition immediately. This is mainly here for the case where enter is\n      // pressed and the handler needs to be triggered before the command is executed.\n      this._finalizeComposition(false);\n    }\n\n    if (ev.keyCode === 229) {\n      // If the \"composition character\" is used but gets to this point it means a non-composition\n      // character (eg. numbers and punctuation) was pressed when the IME was active.\n      this._handleAnyTextareaChanges();\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Finalizes the composition, resuming regular input actions. This is called when a composition\n   * is ending.\n   * @param waitForPropagation Whether to wait for events to propagate before sending\n   *   the input. This should be false if a non-composition keystroke is entered before the\n   *   compositionend event is triggered, such as enter, so that the composition is sent before\n   *   the command is executed.\n   */\n  private _finalizeComposition(waitForPropagation: boolean): void {\n    this._compositionView.classList.remove('active');\n    this._isComposing = false;\n\n    if (!waitForPropagation) {\n      // Cancel any delayed composition send requests and send the input immediately.\n      this._isSendingComposition = false;\n      const input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n      this._coreService.triggerDataEvent(input, true);\n    } else {\n      // Make a deep copy of the composition position here as a new compositionstart event may\n      // fire before the setTimeout executes.\n      const currentCompositionPosition = {\n        start: this._compositionPosition.start,\n        end: this._compositionPosition.end\n      };\n\n      // Since composition* events happen before the changes take place in the textarea on most\n      // browsers, use a setTimeout with 0ms time to allow the native compositionend event to\n      // complete. This ensures the correct character is retrieved.\n      // This solution was used because:\n      // - The compositionend event's data property is unreliable, at least on Chromium\n      // - The last compositionupdate event's data property does not always accurately describe\n      //   the character, a counter example being Korean where an ending consonsant can move to\n      //   the following character if the following input is a vowel.\n      this._isSendingComposition = true;\n      setTimeout(() => {\n        // Ensure that the input has not already been sent\n        if (this._isSendingComposition) {\n          this._isSendingComposition = false;\n          let input;\n          // Add length of data already sent due to keydown event,\n          // otherwise input characters can be duplicated. (Issue #3191)\n          currentCompositionPosition.start += this._dataAlreadySent.length;\n          if (this._isComposing) {\n            // Use the end position to get the string if a new composition has started.\n            input = this._textarea.value.substring(currentCompositionPosition.start, currentCompositionPosition.end);\n          } else {\n            // Don't use the end position here in order to pick up any characters after the\n            // composition has finished, for example when typing a non-composition character\n            // (eg. 2) after a composition character.\n            input = this._textarea.value.substring(currentCompositionPosition.start);\n          }\n          if (input.length > 0) {\n            this._coreService.triggerDataEvent(input, true);\n          }\n        }\n      }, 0);\n    }\n  }\n\n  /**\n   * Apply any changes made to the textarea after the current event chain is allowed to complete.\n   * This should be called when not currently composing but a keydown event with the \"composition\n   * character\" (229) is triggered, in order to allow non-composition text to be entered when an\n   * IME is active.\n   */\n  private _handleAnyTextareaChanges(): void {\n    const oldValue = this._textarea.value;\n    setTimeout(() => {\n      // Ignore if a composition has started since the timeout\n      if (!this._isComposing) {\n        const newValue = this._textarea.value;\n        const diff = newValue.replace(oldValue, '');\n        if (diff.length > 0) {\n          this._dataAlreadySent = diff;\n          this._coreService.triggerDataEvent(diff, true);\n        }\n      }\n    }, 0);\n  }\n\n  /**\n   * Positions the composition view on top of the cursor and the textarea just below it (so the\n   * IME helper dialog is positioned correctly).\n   * @param dontRecurse Whether to use setTimeout to recursively trigger another update, this is\n   *   necessary as the IME events across browsers are not consistently triggered.\n   */\n  public updateCompositionElements(dontRecurse?: boolean): void {\n    if (!this._isComposing) {\n      return;\n    }\n\n    if (this._bufferService.buffer.isCursorInViewport) {\n      const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n\n      const cellHeight = this._renderService.dimensions.actualCellHeight;\n      const cursorTop = this._bufferService.buffer.y * this._renderService.dimensions.actualCellHeight;\n      const cursorLeft = cursorX * this._renderService.dimensions.actualCellWidth;\n\n      this._compositionView.style.left = cursorLeft + 'px';\n      this._compositionView.style.top = cursorTop + 'px';\n      this._compositionView.style.height = cellHeight + 'px';\n      this._compositionView.style.lineHeight = cellHeight + 'px';\n      this._compositionView.style.fontFamily = this._optionsService.options.fontFamily;\n      this._compositionView.style.fontSize = this._optionsService.options.fontSize + 'px';\n      // Sync the textarea to the exact position of the composition view so the IME knows where the\n      // text is.\n      const compositionViewBounds = this._compositionView.getBoundingClientRect();\n      this._textarea.style.left = cursorLeft + 'px';\n      this._textarea.style.top = cursorTop + 'px';\n      // Ensure the text area is at least 1x1, otherwise certain IMEs may break\n      this._textarea.style.width = Math.max(compositionViewBounds.width, 1) + 'px';\n      this._textarea.style.height = Math.max(compositionViewBounds.height, 1) + 'px';\n      this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n    }\n\n    if (!dontRecurse) {\n      setTimeout(() => this.updateCompositionElements(true), 0);\n    }\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function getCoordsRelativeToElement(event: {clientX: number, clientY: number}, element: HTMLElement): [number, number] {\n  const rect = element.getBoundingClientRect();\n  return [event.clientX - rect.left, event.clientY - rect.top];\n}\n\n/**\n * Gets coordinates within the terminal for a particular mouse event. The result\n * is returned as an array in the form [x, y] instead of an object as it's a\n * little faster and this function is used in some low level code.\n * @param event The mouse event.\n * @param element The terminal's container element.\n * @param colCount The number of columns in the terminal.\n * @param rowCount The number of rows n the terminal.\n * @param isSelection Whether the request is for the selection or not. This will\n * apply an offset to the x value such that the left half of the cell will\n * select that cell and the right half will select the next cell.\n */\nexport function getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, hasValidCharSize: boolean, actualCellWidth: number, actualCellHeight: number, isSelection?: boolean): [number, number] | undefined {\n  // Coordinates cannot be measured if there are no valid\n  if (!hasValidCharSize) {\n    return undefined;\n  }\n\n  const coords = getCoordsRelativeToElement(event, element);\n  if (!coords) {\n    return undefined;\n  }\n\n  coords[0] = Math.ceil((coords[0] + (isSelection ? actualCellWidth / 2 : 0)) / actualCellWidth);\n  coords[1] = Math.ceil(coords[1] / actualCellHeight);\n\n  // Ensure coordinates are within the terminal viewport. Note that selections\n  // need an addition point of precision to cover the end point (as characters\n  // cover half of one char and half of the next).\n  coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n  coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n\n  return coords;\n}\n\n/**\n * Gets coordinates within the terminal for a particular mouse event, wrapping\n * them to the bounds of the terminal and adding 32 to both the x and y values\n * as expected by xterm.\n */\nexport function getRawByteCoords(coords: [number, number] | undefined): { x: number, y: number } | undefined {\n  if (!coords) {\n    return undefined;\n  }\n\n  // xterm sends raw bytes and starts at 32 (SP) for each.\n  return { x: coords[0] + 32, y: coords[1] + 32 };\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { C0 } from 'common/data/EscapeSequences';\nimport { IBufferService } from 'common/services/Services';\n\nconst enum Direction {\n  UP = 'A',\n  DOWN = 'B',\n  RIGHT = 'C',\n  LEFT = 'D'\n}\n\n/**\n * Concatenates all the arrow sequences together.\n * Resets the starting row to an unwrapped row, moves to the requested row,\n * then moves to requested col.\n */\nexport function moveToCellSequence(targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  const startX = bufferService.buffer.x;\n  const startY = bufferService.buffer.y;\n\n  // The alt buffer should try to navigate between rows\n  if (!bufferService.buffer.hasScrollback) {\n    return resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) +\n      moveToRequestedRow(startY, targetY, bufferService, applicationCursor) +\n      moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor);\n  }\n\n  // Only move horizontally for the normal buffer\n  let direction;\n  if (startY === targetY) {\n    direction = startX > targetX ? Direction.LEFT : Direction.RIGHT;\n    return repeat(Math.abs(startX - targetX), sequence(direction, applicationCursor));\n  }\n  direction = startY > targetY ? Direction.LEFT : Direction.RIGHT;\n  const rowDifference = Math.abs(startY - targetY);\n  const cellsToMove = colsFromRowEnd(startY > targetY ? targetX : startX, bufferService) +\n    (rowDifference - 1) * bufferService.cols + 1 /* wrap around 1 row */ +\n    colsFromRowBeginning(startY > targetY ? startX : targetX, bufferService);\n  return repeat(cellsToMove, sequence(direction, applicationCursor));\n}\n\n/**\n * Find the number of cols from a row beginning to a col.\n */\nfunction colsFromRowBeginning(currX: number, bufferService: IBufferService): number {\n  return currX - 1;\n}\n\n/**\n * Find the number of cols from a col to row end.\n */\nfunction colsFromRowEnd(currX: number, bufferService: IBufferService): number {\n  return bufferService.cols - currX;\n}\n\n/**\n * If the initial position of the cursor is on a row that is wrapped, move the\n * cursor up to the first row that is not wrapped to have accurate vertical\n * positioning.\n */\nfunction resetStartingRow(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length === 0) {\n    return '';\n  }\n  return repeat(bufferLine(\n    startX, startY, startX,\n    startY - wrappedRowsForRow(bufferService, startY), false, bufferService\n  ).length, sequence(Direction.LEFT, applicationCursor));\n}\n\n/**\n * Using the reset starting and ending row, move to the requested row,\n * ignoring wrapped rows\n */\nfunction moveToRequestedRow(startY: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  const startRow = startY - wrappedRowsForRow(bufferService, startY);\n  const endRow = targetY - wrappedRowsForRow(bufferService, targetY);\n\n  const rowsToMove = Math.abs(startRow - endRow) - wrappedRowsCount(startY, targetY, bufferService);\n\n  return repeat(rowsToMove, sequence(verticalDirection(startY, targetY), applicationCursor));\n}\n\n/**\n * Move to the requested col on the ending row\n */\nfunction moveToRequestedCol(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): string {\n  let startRow;\n  if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length > 0) {\n    startRow = targetY - wrappedRowsForRow(bufferService, targetY);\n  } else {\n    startRow = startY;\n  }\n\n  const endRow = targetY;\n  const direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);\n\n  return repeat(bufferLine(\n    startX, startRow, targetX, endRow,\n    direction === Direction.RIGHT, bufferService\n  ).length, sequence(direction, applicationCursor));\n}\n\n/**\n * Utility functions\n */\n\n/**\n * Calculates the number of wrapped rows between the unwrapped starting and\n * ending rows. These rows need to ignored since the cursor skips over them.\n */\nfunction wrappedRowsCount(startY: number, targetY: number, bufferService: IBufferService): number {\n  let wrappedRows = 0;\n  const startRow = startY - wrappedRowsForRow(bufferService, startY);\n  const endRow = targetY - wrappedRowsForRow(bufferService, targetY);\n\n  for (let i = 0; i < Math.abs(startRow - endRow); i++) {\n    const direction = verticalDirection(startY, targetY) === Direction.UP ? -1 : 1;\n    const line = bufferService.buffer.lines.get(startRow + (direction * i));\n    if (line?.isWrapped) {\n      wrappedRows++;\n    }\n  }\n\n  return wrappedRows;\n}\n\n/**\n * Calculates the number of wrapped rows that make up a given row.\n * @param currentRow The row to determine how many wrapped rows make it up\n */\nfunction wrappedRowsForRow(bufferService: IBufferService, currentRow: number): number {\n  let rowCount = 0;\n  let line = bufferService.buffer.lines.get(currentRow);\n  let lineWraps = line?.isWrapped;\n\n  while (lineWraps && currentRow >= 0 && currentRow < bufferService.rows) {\n    rowCount++;\n    line = bufferService.buffer.lines.get(--currentRow);\n    lineWraps = line?.isWrapped;\n  }\n\n  return rowCount;\n}\n\n/**\n * Direction determiners\n */\n\n/**\n * Determines if the right or left arrow is needed\n */\nfunction horizontalDirection(startX: number, startY: number, targetX: number, targetY: number, bufferService: IBufferService, applicationCursor: boolean): Direction {\n  let startRow;\n  if (moveToRequestedRow(targetX, targetY, bufferService, applicationCursor).length > 0) {\n    startRow = targetY - wrappedRowsForRow(bufferService, targetY);\n  } else {\n    startRow = startY;\n  }\n\n  if ((startX < targetX &&\n    startRow <= targetY) || // down/right or same y/right\n    (startX >= targetX &&\n    startRow < targetY)) {  // down/left or same y/left\n    return Direction.RIGHT;\n  }\n  return Direction.LEFT;\n}\n\n/**\n * Determines if the up or down arrow is needed\n */\nfunction verticalDirection(startY: number, targetY: number): Direction {\n  return startY > targetY ? Direction.UP : Direction.DOWN;\n}\n\n/**\n * Constructs the string of chars in the buffer from a starting row and col\n * to an ending row and col\n * @param startCol The starting column position\n * @param startRow The starting row position\n * @param endCol The ending column position\n * @param endRow The ending row position\n * @param forward Direction to move\n */\nfunction bufferLine(\n  startCol: number,\n  startRow: number,\n  endCol: number,\n  endRow: number,\n  forward: boolean,\n  bufferService: IBufferService\n): string {\n  let currentCol = startCol;\n  let currentRow = startRow;\n  let bufferStr = '';\n\n  while (currentCol !== endCol || currentRow !== endRow) {\n    currentCol += forward ? 1 : -1;\n\n    if (forward && currentCol > bufferService.cols - 1) {\n      bufferStr += bufferService.buffer.translateBufferLineToString(\n        currentRow, false, startCol, currentCol\n      );\n      currentCol = 0;\n      startCol = 0;\n      currentRow++;\n    } else if (!forward && currentCol < 0) {\n      bufferStr += bufferService.buffer.translateBufferLineToString(\n        currentRow, false, 0, startCol + 1\n      );\n      currentCol = bufferService.cols - 1;\n      startCol = currentCol;\n      currentRow--;\n    }\n  }\n\n  return bufferStr + bufferService.buffer.translateBufferLineToString(\n    currentRow, false, startCol, currentCol\n  );\n}\n\n/**\n * Constructs the escape sequence for clicking an arrow\n * @param direction The direction to move\n */\nfunction sequence(direction: Direction, applicationCursor: boolean): string {\n  const mod =  applicationCursor ? 'O' : '[';\n  return C0.ESC + mod + direction;\n}\n\n/**\n * Returns a string repeated a given number of times\n * Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n * @param count The number of times to repeat the string\n * @param string The string that is to be repeated\n */\nfunction repeat(count: number, str: string): string {\n  count = Math.floor(count);\n  let rpt = '';\n  for (let i = 0; i < count; i++) {\n    rpt += str;\n  }\n  return rpt;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions, IRenderLayer } from 'browser/renderer/Types';\nimport { ICellData } from 'common/Types';\nimport { DEFAULT_COLOR, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_CODE, Attributes } from 'common/buffer/Constants';\nimport { IGlyphIdentifier } from 'browser/renderer/atlas/Types';\nimport { DIM_OPACITY, INVERTED_DEFAULT_COLOR, TEXT_BASELINE } from 'browser/renderer/atlas/Constants';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { acquireCharAtlas } from 'browser/renderer/atlas/CharAtlasCache';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { IColorSet, IColor } from 'browser/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\nimport { throwIfFalsy } from 'browser/renderer/RendererUtils';\nimport { channels, color, rgba } from 'browser/Color';\nimport { removeElementFromParent } from 'browser/Dom';\nimport { tryDrawCustomChar } from 'browser/renderer/CustomGlyphs';\n\nexport abstract class BaseRenderLayer implements IRenderLayer {\n  private _canvas: HTMLCanvasElement;\n  protected _ctx!: CanvasRenderingContext2D;\n  private _scaledCharWidth: number = 0;\n  private _scaledCharHeight: number = 0;\n  private _scaledCellWidth: number = 0;\n  private _scaledCellHeight: number = 0;\n  private _scaledCharLeft: number = 0;\n  private _scaledCharTop: number = 0;\n\n  protected _charAtlas: BaseCharAtlas | undefined;\n\n  /**\n   * An object that's reused when drawing glyphs in order to reduce GC.\n   */\n  private _currentGlyphIdentifier: IGlyphIdentifier = {\n    chars: '',\n    code: 0,\n    bg: 0,\n    fg: 0,\n    bold: false,\n    dim: false,\n    italic: false\n  };\n\n  constructor(\n    private _container: HTMLElement,\n    id: string,\n    zIndex: number,\n    private _alpha: boolean,\n    protected _colors: IColorSet,\n    private _rendererId: number,\n    protected readonly _bufferService: IBufferService,\n    protected readonly _optionsService: IOptionsService\n  ) {\n    this._canvas = document.createElement('canvas');\n    this._canvas.classList.add(`xterm-${id}-layer`);\n    this._canvas.style.zIndex = zIndex.toString();\n    this._initCanvas();\n    this._container.appendChild(this._canvas);\n  }\n\n  public dispose(): void {\n    removeElementFromParent(this._canvas);\n    this._charAtlas?.dispose();\n  }\n\n  private _initCanvas(): void {\n    this._ctx = throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n  }\n\n  public onOptionsChanged(): void {}\n  public onBlur(): void {}\n  public onFocus(): void {}\n  public onCursorMove(): void {}\n  public onGridChanged(startRow: number, endRow: number): void {}\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {}\n\n  public setColors(colorSet: IColorSet): void {\n    this._refreshCharAtlas(colorSet);\n  }\n\n  protected _setTransparency(alpha: boolean): void {\n    // Do nothing when alpha doesn't change\n    if (alpha === this._alpha) {\n      return;\n    }\n\n    // Create new canvas and replace old one\n    const oldCanvas = this._canvas;\n    this._alpha = alpha;\n    // Cloning preserves properties\n    this._canvas = this._canvas.cloneNode() as HTMLCanvasElement;\n    this._initCanvas();\n    this._container.replaceChild(this._canvas, oldCanvas);\n\n    // Regenerate char atlas and force a full redraw\n    this._refreshCharAtlas(this._colors);\n    this.onGridChanged(0, this._bufferService.rows - 1);\n  }\n\n  /**\n   * Refreshes the char atlas, aquiring a new one if necessary.\n   * @param colorSet The color set to use for the char atlas.\n   */\n  private _refreshCharAtlas(colorSet: IColorSet): void {\n    if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n      return;\n    }\n    this._charAtlas = acquireCharAtlas(this._optionsService.options, this._rendererId, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n    this._charAtlas.warmUp();\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    this._scaledCellWidth = dim.scaledCellWidth;\n    this._scaledCellHeight = dim.scaledCellHeight;\n    this._scaledCharWidth = dim.scaledCharWidth;\n    this._scaledCharHeight = dim.scaledCharHeight;\n    this._scaledCharLeft = dim.scaledCharLeft;\n    this._scaledCharTop = dim.scaledCharTop;\n    this._canvas.width = dim.scaledCanvasWidth;\n    this._canvas.height = dim.scaledCanvasHeight;\n    this._canvas.style.width = `${dim.canvasWidth}px`;\n    this._canvas.style.height = `${dim.canvasHeight}px`;\n\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n\n    this._refreshCharAtlas(this._colors);\n  }\n\n  public abstract reset(): void;\n\n  public clearTextureAtlas(): void {\n    this._charAtlas?.clear();\n  }\n\n  /**\n   * Fills 1+ cells completely. This uses the existing fillStyle on the context.\n   * @param x The column to start at.\n   * @param y The row to start at\n   * @param width The number of columns to fill.\n   * @param height The number of rows to fill.\n   */\n  protected _fillCells(x: number, y: number, width: number, height: number): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      y * this._scaledCellHeight,\n      width * this._scaledCellWidth,\n      height * this._scaledCellHeight);\n  }\n\n  /**\n     * Fills a 1px line (2px on HDPI) at the middle of the cell. This uses the\n     * existing fillStyle on the context.\n     * @param x The column to fill.\n     * @param y The row to fill.\n     */\n  protected _fillMiddleLineAtCells(x: number, y: number, width: number = 1): void {\n    const cellOffset = Math.ceil(this._scaledCellHeight * 0.5);\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      (y + 1) * this._scaledCellHeight - cellOffset - window.devicePixelRatio,\n      width * this._scaledCellWidth,\n      window.devicePixelRatio);\n  }\n\n  /**\n   * Fills a 1px line (2px on HDPI) at the bottom of the cell. This uses the\n   * existing fillStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _fillBottomLineAtCells(x: number, y: number, width: number = 1): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1 /* Ensure it's drawn within the cell */,\n      width * this._scaledCellWidth,\n      window.devicePixelRatio);\n  }\n\n  /**\n   * Fills a 1px line (2px on HDPI) at the left of the cell. This uses the\n   * existing fillStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _fillLeftLineAtCell(x: number, y: number, width: number): void {\n    this._ctx.fillRect(\n      x * this._scaledCellWidth,\n      y * this._scaledCellHeight,\n      window.devicePixelRatio * width,\n      this._scaledCellHeight);\n  }\n\n  /**\n   * Strokes a 1px rectangle (2px on HDPI) around a cell. This uses the existing\n   * strokeStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _strokeRectAtCell(x: number, y: number, width: number, height: number): void {\n    this._ctx.lineWidth = window.devicePixelRatio;\n    this._ctx.strokeRect(\n      x * this._scaledCellWidth + window.devicePixelRatio / 2,\n      y * this._scaledCellHeight + (window.devicePixelRatio / 2),\n      width * this._scaledCellWidth - window.devicePixelRatio,\n      (height * this._scaledCellHeight) - window.devicePixelRatio);\n  }\n\n  /**\n   * Clears the entire canvas.\n   */\n  protected _clearAll(): void {\n    if (this._alpha) {\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    } else {\n      this._ctx.fillStyle = this._colors.background.css;\n      this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  /**\n   * Clears 1+ cells completely.\n   * @param x The column to start at.\n   * @param y The row to start at.\n   * @param width The number of columns to clear.\n   * @param height The number of rows to clear.\n   */\n  protected _clearCells(x: number, y: number, width: number, height: number): void {\n    if (this._alpha) {\n      this._ctx.clearRect(\n        x * this._scaledCellWidth,\n        y * this._scaledCellHeight,\n        width * this._scaledCellWidth,\n        height * this._scaledCellHeight);\n    } else {\n      this._ctx.fillStyle = this._colors.background.css;\n      this._ctx.fillRect(\n        x * this._scaledCellWidth,\n        y * this._scaledCellHeight,\n        width * this._scaledCellWidth,\n        height * this._scaledCellHeight);\n    }\n  }\n\n  /**\n   * Draws a truecolor character at the cell. The character will be clipped to\n   * ensure that it fits with the cell, including the cell to the right if it's\n   * a wide character. This uses the existing fillStyle on the context.\n   * @param cell The cell data for the character to draw.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   * @param color The color of the character.\n   */\n  protected _fillCharTrueColor(cell: CellData, x: number, y: number): void {\n    this._ctx.font = this._getFont(false, false);\n    this._ctx.textBaseline = TEXT_BASELINE;\n    this._clipRow(y);\n\n    // Draw custom characters if applicable\n    let drawSuccess = false;\n    if (this._optionsService.options.customGlyphs !== false) {\n      drawSuccess = tryDrawCustomChar(this._ctx, cell.getChars(), x * this._scaledCellWidth, y * this._scaledCellHeight, this._scaledCellWidth, this._scaledCellHeight);\n    }\n\n    // Draw the character\n    if (!drawSuccess) {\n      this._ctx.fillText(\n        cell.getChars(),\n        x * this._scaledCellWidth + this._scaledCharLeft,\n        y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);\n    }\n  }\n\n  /**\n   * Draws one or more characters at a cell. If possible this will draw using\n   * the character atlas to reduce draw time.\n   * @param chars The character or characters.\n   * @param code The character code.\n   * @param width The width of the characters.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   * @param fg The foreground color, in the format stored within the attributes.\n   * @param bg The background color, in the format stored within the attributes.\n   * This is used to validate whether a cached image can be used.\n   * @param bold Whether the text is bold.\n   */\n  protected _drawChars(cell: ICellData, x: number, y: number): void {\n    const contrastColor = this._getContrastColor(cell);\n\n    // skip cache right away if we draw in RGB\n    // Note: to avoid bad runtime JoinedCellData will be skipped\n    //       in the cache handler itself (atlasDidDraw == false) and\n    //       fall through to uncached later down below\n    if (contrastColor || cell.isFgRGB() || cell.isBgRGB()) {\n      this._drawUncachedChars(cell, x, y, contrastColor);\n      return;\n    }\n\n    let fg;\n    let bg;\n    if (cell.isInverse()) {\n      fg = (cell.isBgDefault()) ? INVERTED_DEFAULT_COLOR : cell.getBgColor();\n      bg = (cell.isFgDefault()) ? INVERTED_DEFAULT_COLOR : cell.getFgColor();\n    } else {\n      bg = (cell.isBgDefault()) ? DEFAULT_COLOR : cell.getBgColor();\n      fg = (cell.isFgDefault()) ? DEFAULT_COLOR : cell.getFgColor();\n    }\n\n    const drawInBrightColor = this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8;\n\n    fg += drawInBrightColor ? 8 : 0;\n    this._currentGlyphIdentifier.chars = cell.getChars() || WHITESPACE_CELL_CHAR;\n    this._currentGlyphIdentifier.code = cell.getCode() || WHITESPACE_CELL_CODE;\n    this._currentGlyphIdentifier.bg = bg;\n    this._currentGlyphIdentifier.fg = fg;\n    this._currentGlyphIdentifier.bold = !!cell.isBold();\n    this._currentGlyphIdentifier.dim = !!cell.isDim();\n    this._currentGlyphIdentifier.italic = !!cell.isItalic();\n    const atlasDidDraw = this._charAtlas?.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n\n    if (!atlasDidDraw) {\n      this._drawUncachedChars(cell, x, y);\n    }\n  }\n\n  /**\n   * Draws one or more characters at one or more cells. The character(s) will be\n   * clipped to ensure that they fit with the cell(s), including the cell to the\n   * right if the last character is a wide character.\n   * @param chars The character.\n   * @param width The width of the character.\n   * @param fg The foreground color, in the format stored within the attributes.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   */\n  private _drawUncachedChars(cell: ICellData, x: number, y: number, fgOverride?: IColor): void {\n    this._ctx.save();\n    this._ctx.font = this._getFont(!!cell.isBold(), !!cell.isItalic());\n    this._ctx.textBaseline = TEXT_BASELINE;\n\n    if (cell.isInverse()) {\n      if (fgOverride) {\n        this._ctx.fillStyle = fgOverride.css;\n      } else if (cell.isBgDefault()) {\n        this._ctx.fillStyle = color.opaque(this._colors.background).css;\n      } else if (cell.isBgRGB()) {\n        this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n      } else {\n        let bg = cell.getBgColor();\n        if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {\n          bg += 8;\n        }\n        this._ctx.fillStyle = this._colors.ansi[bg].css;\n      }\n    } else {\n      if (fgOverride) {\n        this._ctx.fillStyle = fgOverride.css;\n      } else if (cell.isFgDefault()) {\n        this._ctx.fillStyle = this._colors.foreground.css;\n      } else if (cell.isFgRGB()) {\n        this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n      } else {\n        let fg = cell.getFgColor();\n        if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n          fg += 8;\n        }\n        this._ctx.fillStyle = this._colors.ansi[fg].css;\n      }\n    }\n\n    this._clipRow(y);\n\n    // Apply alpha to dim the character\n    if (cell.isDim()) {\n      this._ctx.globalAlpha = DIM_OPACITY;\n    }\n\n    // Draw custom characters if applicable\n    let drawSuccess = false;\n    if (this._optionsService.options.customGlyphs !== false) {\n      drawSuccess = tryDrawCustomChar(this._ctx, cell.getChars(), x * this._scaledCellWidth, y * this._scaledCellHeight, this._scaledCellWidth, this._scaledCellHeight);\n    }\n\n    // Draw the character\n    if (!drawSuccess) {\n      this._ctx.fillText(\n        cell.getChars(),\n        x * this._scaledCellWidth + this._scaledCharLeft,\n        y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight);\n    }\n\n    this._ctx.restore();\n  }\n\n\n  /**\n   * Clips a row to ensure no pixels will be drawn outside the cells in the row.\n   * @param y The row to clip.\n   */\n  private _clipRow(y: number): void {\n    this._ctx.beginPath();\n    this._ctx.rect(\n      0,\n      y * this._scaledCellHeight,\n      this._bufferService.cols * this._scaledCellWidth,\n      this._scaledCellHeight);\n    this._ctx.clip();\n  }\n\n  /**\n   * Gets the current font.\n   * @param isBold If we should use the bold fontWeight.\n   */\n  protected _getFont(isBold: boolean, isItalic: boolean): string {\n    const fontWeight = isBold ? this._optionsService.options.fontWeightBold : this._optionsService.options.fontWeight;\n    const fontStyle = isItalic ? 'italic' : '';\n\n    return `${fontStyle} ${fontWeight} ${this._optionsService.options.fontSize * window.devicePixelRatio}px ${this._optionsService.options.fontFamily}`;\n  }\n\n  private _getContrastColor(cell: CellData): IColor | undefined {\n    if (this._optionsService.options.minimumContrastRatio === 1) {\n      return undefined;\n    }\n\n    // Try get from cache first\n    const adjustedColor = this._colors.contrastCache.getColor(cell.bg, cell.fg);\n    if (adjustedColor !== undefined) {\n      return adjustedColor || undefined;\n    }\n\n    let fgColor = cell.getFgColor();\n    let fgColorMode = cell.getFgColorMode();\n    let bgColor = cell.getBgColor();\n    let bgColorMode = cell.getBgColorMode();\n    const isInverse = !!cell.isInverse();\n    const isBold = !!cell.isInverse();\n    if (isInverse) {\n      const temp = fgColor;\n      fgColor = bgColor;\n      bgColor = temp;\n      const temp2 = fgColorMode;\n      fgColorMode = bgColorMode;\n      bgColorMode = temp2;\n    }\n\n    const bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, isInverse);\n    const fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, isInverse, isBold);\n    const result = rgba.ensureContrastRatio(bgRgba, fgRgba, this._optionsService.options.minimumContrastRatio);\n\n    if (!result) {\n      this._colors.contrastCache.setColor(cell.bg, cell.fg, null);\n      return undefined;\n    }\n\n    const color: IColor = {\n      css: channels.toCss(\n        (result >> 24) & 0xFF,\n        (result >> 16) & 0xFF,\n        (result >> 8) & 0xFF\n      ),\n      rgba: result\n    };\n    this._colors.contrastCache.setColor(cell.bg, cell.fg, color);\n\n    return color;\n  }\n\n  private _resolveBackgroundRgba(bgColorMode: number, bgColor: number, inverse: boolean): number {\n    switch (bgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        return this._colors.ansi[bgColor].rgba;\n      case Attributes.CM_RGB:\n        return bgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._colors.foreground.rgba;\n        }\n        return this._colors.background.rgba;\n    }\n  }\n\n  private _resolveForegroundRgba(fgColorMode: number, fgColor: number, inverse: boolean, bold: boolean): number {\n    switch (fgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        if (this._optionsService.options.drawBoldTextInBrightColors && bold && fgColor < 8) {\n          fgColor += 8;\n        }\n        return this._colors.ansi[fgColor].rgba;\n      case Attributes.CM_RGB:\n        return fgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._colors.background.rgba;\n        }\n        return this._colors.foreground.rgba;\n    }\n  }\n}\n\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { ICellData } from 'common/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IColorSet } from 'browser/Types';\nimport { IBufferService, IOptionsService, ICoreService } from 'common/services/Services';\nimport { IEventEmitter } from 'common/EventEmitter';\nimport { ICoreBrowserService } from 'browser/services/Services';\n\ninterface ICursorState {\n  x: number;\n  y: number;\n  isFocused: boolean;\n  style: string;\n  width: number;\n}\n\n/**\n * The time between cursor blinks.\n */\nconst BLINK_INTERVAL = 600;\n\nexport class CursorRenderLayer extends BaseRenderLayer {\n  private _state: ICursorState;\n  private _cursorRenderers: {[key: string]: (x: number, y: number, cell: ICellData) => void};\n  private _cursorBlinkStateManager: CursorBlinkStateManager | undefined;\n  private _cell: ICellData = new CellData();\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    private _onRequestRedraw: IEventEmitter<IRequestRedrawEvent>,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @ICoreBrowserService private readonly _coreBrowserService: ICoreBrowserService\n  ) {\n    super(container, 'cursor', zIndex, true, colors, rendererId, bufferService, optionsService);\n    this._state = {\n      x: 0,\n      y: 0,\n      isFocused: false,\n      style: '',\n      width: 0\n    };\n    this._cursorRenderers = {\n      'bar': this._renderBarCursor.bind(this),\n      'block': this._renderBlockCursor.bind(this),\n      'underline': this._renderUnderlineCursor.bind(this)\n    };\n  }\n\n  public dispose(): void {\n    if (this._cursorBlinkStateManager) {\n      this._cursorBlinkStateManager.dispose();\n      this._cursorBlinkStateManager = undefined;\n    }\n    super.dispose();\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state = {\n      x: 0,\n      y: 0,\n      isFocused: false,\n      style: '',\n      width: 0\n    };\n  }\n\n  public reset(): void {\n    this._clearCursor();\n    this._cursorBlinkStateManager?.restartBlinkAnimation();\n    this.onOptionsChanged();\n  }\n\n  public onBlur(): void {\n    this._cursorBlinkStateManager?.pause();\n    this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n  }\n\n  public onFocus(): void {\n    this._cursorBlinkStateManager?.resume();\n    this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n  }\n\n  public onOptionsChanged(): void {\n    if (this._optionsService.options.cursorBlink) {\n      if (!this._cursorBlinkStateManager) {\n        this._cursorBlinkStateManager = new CursorBlinkStateManager(this._coreBrowserService.isFocused, () => {\n          this._render(true);\n        });\n      }\n    } else {\n      this._cursorBlinkStateManager?.dispose();\n      this._cursorBlinkStateManager = undefined;\n    }\n    // Request a refresh from the terminal as management of rendering is being\n    // moved back to the terminal\n    this._onRequestRedraw.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });\n  }\n\n  public onCursorMove(): void {\n    this._cursorBlinkStateManager?.restartBlinkAnimation();\n  }\n\n  public onGridChanged(startRow: number, endRow: number): void {\n    if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n      this._render(false);\n    } else {\n      this._cursorBlinkStateManager.restartBlinkAnimation();\n    }\n  }\n\n  private _render(triggeredByAnimationFrame: boolean): void {\n    // Don't draw the cursor if it's hidden\n    if (!this._coreService.isCursorInitialized || this._coreService.isCursorHidden) {\n      this._clearCursor();\n      return;\n    }\n\n    const cursorY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;\n    const viewportRelativeCursorY = cursorY - this._bufferService.buffer.ydisp;\n\n    // Don't draw the cursor if it's off-screen\n    if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= this._bufferService.rows) {\n      this._clearCursor();\n      return;\n    }\n\n    // in case cursor.x == cols adjust visual cursor to cols - 1\n    const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n    this._bufferService.buffer.lines.get(cursorY)!.loadCell(cursorX, this._cell);\n    if (this._cell.content === undefined) {\n      return;\n    }\n\n    if (!this._coreBrowserService.isFocused) {\n      this._clearCursor();\n      this._ctx.save();\n      this._ctx.fillStyle = this._colors.cursor.css;\n      const cursorStyle = this._optionsService.options.cursorStyle;\n      if (cursorStyle && cursorStyle !== 'block') {\n        this._cursorRenderers[cursorStyle](cursorX, viewportRelativeCursorY, this._cell);\n      } else {\n        this._renderBlurCursor(cursorX, viewportRelativeCursorY, this._cell);\n      }\n      this._ctx.restore();\n      this._state.x = cursorX;\n      this._state.y = viewportRelativeCursorY;\n      this._state.isFocused = false;\n      this._state.style = cursorStyle;\n      this._state.width = this._cell.getWidth();\n      return;\n    }\n\n    // Don't draw the cursor if it's blinking\n    if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n      this._clearCursor();\n      return;\n    }\n\n    if (this._state) {\n      // The cursor is already in the correct spot, don't redraw\n      if (this._state.x === cursorX &&\n          this._state.y === viewportRelativeCursorY &&\n          this._state.isFocused === this._coreBrowserService.isFocused &&\n          this._state.style === this._optionsService.options.cursorStyle &&\n          this._state.width === this._cell.getWidth()) {\n        return;\n      }\n      this._clearCursor();\n    }\n\n    this._ctx.save();\n    this._cursorRenderers[this._optionsService.options.cursorStyle || 'block'](cursorX, viewportRelativeCursorY, this._cell);\n    this._ctx.restore();\n\n    this._state.x = cursorX;\n    this._state.y = viewportRelativeCursorY;\n    this._state.isFocused = false;\n    this._state.style = this._optionsService.options.cursorStyle;\n    this._state.width = this._cell.getWidth();\n  }\n\n  private _clearCursor(): void {\n    if (this._state) {\n      // Avoid potential rounding errors when device pixel ratio is less than 1\n      if (window.devicePixelRatio < 1) {\n        this._clearAll();\n      } else {\n        this._clearCells(this._state.x, this._state.y, this._state.width, 1);\n      }\n      this._state = {\n        x: 0,\n        y: 0,\n        isFocused: false,\n        style: '',\n        width: 0\n      };\n    }\n  }\n\n  private _renderBarCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillLeftLineAtCell(x, y, this._optionsService.options.cursorWidth);\n    this._ctx.restore();\n  }\n\n  private _renderBlockCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillCells(x, y, cell.getWidth(), 1);\n    this._ctx.fillStyle = this._colors.cursorAccent.css;\n    this._fillCharTrueColor(cell, x, y);\n    this._ctx.restore();\n  }\n\n  private _renderUnderlineCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.fillStyle = this._colors.cursor.css;\n    this._fillBottomLineAtCells(x, y);\n    this._ctx.restore();\n  }\n\n  private _renderBlurCursor(x: number, y: number, cell: ICellData): void {\n    this._ctx.save();\n    this._ctx.strokeStyle = this._colors.cursor.css;\n    this._strokeRectAtCell(x, y, cell.getWidth(), 1);\n    this._ctx.restore();\n  }\n}\n\nclass CursorBlinkStateManager {\n  public isCursorVisible: boolean;\n\n  private _animationFrame: number | undefined;\n  private _blinkStartTimeout: number | undefined;\n  private _blinkInterval: number | undefined;\n\n  /**\n   * The time at which the animation frame was restarted, this is used on the\n   * next render to restart the timers so they don't need to restart the timers\n   * multiple times over a short period.\n   */\n  private _animationTimeRestarted: number | undefined;\n\n  constructor(\n    isFocused: boolean,\n    private _renderCallback: () => void\n  ) {\n    this.isCursorVisible = true;\n    if (isFocused) {\n      this._restartInterval();\n    }\n  }\n\n  public get isPaused(): boolean { return !(this._blinkStartTimeout || this._blinkInterval); }\n\n  public dispose(): void {\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public restartBlinkAnimation(): void {\n    if (this.isPaused) {\n      return;\n    }\n    // Save a timestamp so that the restart can be done on the next interval\n    this._animationTimeRestarted = Date.now();\n    // Force a cursor render to ensure it's visible and in the correct position\n    this.isCursorVisible = true;\n    if (!this._animationFrame) {\n      this._animationFrame = window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n    }\n  }\n\n  private _restartInterval(timeToStart: number = BLINK_INTERVAL): void {\n    // Clear any existing interval\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n\n    // Setup the initial timeout which will hide the cursor, this is done before\n    // the regular interval is setup in order to support restarting the blink\n    // animation in a lightweight way (without thrashing clearInterval and\n    // setInterval).\n    this._blinkStartTimeout = window.setTimeout(() => {\n      // Check if another animation restart was requested while this was being\n      // started\n      if (this._animationTimeRestarted) {\n        const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n        this._animationTimeRestarted = undefined;\n        if (time > 0) {\n          this._restartInterval(time);\n          return;\n        }\n      }\n\n      // Hide the cursor\n      this.isCursorVisible = false;\n      this._animationFrame = window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n\n      // Setup the blink interval\n      this._blinkInterval = window.setInterval(() => {\n        // Adjust the animation time if it was restarted\n        if (this._animationTimeRestarted) {\n          // calc time diff\n          // Make restart interval do a setTimeout initially?\n          const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n          this._animationTimeRestarted = undefined;\n          this._restartInterval(time);\n          return;\n        }\n\n        // Invert visibility and render\n        this.isCursorVisible = !this.isCursorVisible;\n        this._animationFrame = window.requestAnimationFrame(() => {\n          this._renderCallback();\n          this._animationFrame = undefined;\n        });\n      }, BLINK_INTERVAL);\n    }, timeToStart);\n  }\n\n  public pause(): void {\n    this.isCursorVisible = true;\n    if (this._blinkInterval) {\n      window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public resume(): void {\n    // Clear out any existing timers just in case\n    this.pause();\n\n    this._animationTimeRestarted = undefined;\n    this._restartInterval();\n    this.restartBlinkAnimation();\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { throwIfFalsy } from 'browser/renderer/RendererUtils';\n\ninterface IBlockVector {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\nexport const blockElementDefinitions: { [index: string]: IBlockVector[] | undefined } = {\n  // Block elements (0x2580-0x2590)\n  '\u2580': [{ x: 0, y: 0, w: 8, h: 4 }], // UPPER HALF BLOCK\n  '\u2581': [{ x: 0, y: 7, w: 8, h: 1 }], // LOWER ONE EIGHTH BLOCK\n  '\u2582': [{ x: 0, y: 6, w: 8, h: 2 }], // LOWER ONE QUARTER BLOCK\n  '\u2583': [{ x: 0, y: 5, w: 8, h: 3 }], // LOWER THREE EIGHTHS BLOCK\n  '\u2584': [{ x: 0, y: 4, w: 8, h: 4 }], // LOWER HALF BLOCK\n  '\u2585': [{ x: 0, y: 3, w: 8, h: 5 }], // LOWER FIVE EIGHTHS BLOCK\n  '\u2586': [{ x: 0, y: 2, w: 8, h: 6 }], // LOWER THREE QUARTERS BLOCK\n  '\u2587': [{ x: 0, y: 1, w: 8, h: 7 }], // LOWER SEVEN EIGHTHS BLOCK\n  '\u2588': [{ x: 0, y: 0, w: 8, h: 8 }], // FULL BLOCK\n  '\u2589': [{ x: 0, y: 0, w: 7, h: 8 }], // LEFT SEVEN EIGHTHS BLOCK\n  '\u258A': [{ x: 0, y: 0, w: 6, h: 8 }], // LEFT THREE QUARTERS BLOCK\n  '\u258B': [{ x: 0, y: 0, w: 5, h: 8 }], // LEFT FIVE EIGHTHS BLOCK\n  '\u258C': [{ x: 0, y: 0, w: 4, h: 8 }], // LEFT HALF BLOCK\n  '\u258D': [{ x: 0, y: 0, w: 3, h: 8 }], // LEFT THREE EIGHTHS BLOCK\n  '\u258E': [{ x: 0, y: 0, w: 2, h: 8 }], // LEFT ONE QUARTER BLOCK\n  '\u258F': [{ x: 0, y: 0, w: 1, h: 8 }], // LEFT ONE EIGHTH BLOCK\n  '\u2590': [{ x: 4, y: 0, w: 4, h: 8 }], // RIGHT HALF BLOCK\n\n  // Block elements (0x2594-0x2595)\n  '\u2594': [{ x: 0, y: 0, w: 9, h: 1 }], // UPPER ONE EIGHTH BLOCK\n  '\u2595': [{ x: 7, y: 0, w: 1, h: 8 }], // RIGHT ONE EIGHTH BLOCK\n\n  // Terminal graphic characters (0x2596-0x259F)\n  '\u2596': [{ x: 0, y: 4, w: 4, h: 4 }],                             // QUADRANT LOWER LEFT\n  '\u2597': [{ x: 4, y: 4, w: 4, h: 4 }],                             // QUADRANT LOWER RIGHT\n  '\u2598': [{ x: 0, y: 0, w: 4, h: 4 }],                             // QUADRANT UPPER LEFT\n  '\u2599': [{ x: 0, y: 0, w: 4, h: 8 }, { x: 0, y: 4, w: 8, h: 4 }], // QUADRANT UPPER LEFT AND LOWER LEFT AND LOWER RIGHT\n  '\u259A': [{ x: 0, y: 0, w: 4, h: 4 }, { x: 4, y: 4, w: 4, h: 4 }], // QUADRANT UPPER LEFT AND LOWER RIGHT\n  '\u259B': [{ x: 0, y: 0, w: 4, h: 8 }, { x: 0, y: 0, w: 4, h: 8 }], // QUADRANT UPPER LEFT AND UPPER RIGHT AND LOWER LEFT\n  '\u259C': [{ x: 0, y: 0, w: 8, h: 4 }, { x: 4, y: 0, w: 4, h: 8 }], // QUADRANT UPPER LEFT AND UPPER RIGHT AND LOWER RIGHT\n  '\u259D': [{ x: 4, y: 0, w: 4, h: 4 }],                             // QUADRANT UPPER RIGHT\n  '\u259E': [{ x: 4, y: 0, w: 4, h: 4 }, { x: 0, y: 4, w: 4, h: 4 }], // QUADRANT UPPER RIGHT AND LOWER LEFT\n  '\u259F': [{ x: 4, y: 0, w: 4, h: 8 }, { x: 0, y: 4, w: 8, h: 4 }], // QUADRANT UPPER RIGHT AND LOWER LEFT AND LOWER RIGHT\n\n  // VERTICAL ONE EIGHTH BLOCK-2 through VERTICAL ONE EIGHTH BLOCK-7\n  '\\u{1FB70}': [{ x: 1, y: 0, w: 1, h: 8 }],\n  '\\u{1FB71}': [{ x: 2, y: 0, w: 1, h: 8 }],\n  '\\u{1FB72}': [{ x: 3, y: 0, w: 1, h: 8 }],\n  '\\u{1FB73}': [{ x: 4, y: 0, w: 1, h: 8 }],\n  '\\u{1FB74}': [{ x: 5, y: 0, w: 1, h: 8 }],\n  '\\u{1FB75}': [{ x: 6, y: 0, w: 1, h: 8 }],\n\n  // HORIZONTAL ONE EIGHTH BLOCK-2 through HORIZONTAL ONE EIGHTH BLOCK-7\n  '\\u{1FB76}': [{ x: 0, y: 1, w: 8, h: 1 }],\n  '\\u{1FB77}': [{ x: 0, y: 2, w: 8, h: 1 }],\n  '\\u{1FB78}': [{ x: 0, y: 3, w: 8, h: 1 }],\n  '\\u{1FB79}': [{ x: 0, y: 4, w: 8, h: 1 }],\n  '\\u{1FB7A}': [{ x: 0, y: 5, w: 8, h: 1 }],\n  '\\u{1FB7B}': [{ x: 0, y: 6, w: 8, h: 1 }],\n\n  // LEFT AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB7C}': [{ x: 0, y: 0, w: 1, h: 8 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // LEFT AND UPPER ONE EIGHTH BLOCK\n  '\\u{1FB7D}': [{ x: 0, y: 0, w: 1, h: 8 }, { x: 0, y: 0, w: 8, h: 1 }],\n  // RIGHT AND UPPER ONE EIGHTH BLOCK\n  '\\u{1FB7E}': [{ x: 7, y: 0, w: 1, h: 8 }, { x: 0, y: 0, w: 8, h: 1 }],\n  // RIGHT AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB7F}': [{ x: 7, y: 0, w: 1, h: 8 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // UPPER AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB80}': [{ x: 0, y: 0, w: 8, h: 1 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // HORIZONTAL ONE EIGHTH BLOCK-1358\n  '\\u{1FB81}': [{ x: 0, y: 0, w: 8, h: 1 }, { x: 0, y: 2, w: 8, h: 1 }, { x: 0, y: 4, w: 8, h: 1 }, { x: 0, y: 7, w: 8, h: 1 }],\n\n  // UPPER ONE QUARTER BLOCK\n  '\\u{1FB82}': [{ x: 0, y: 0, w: 8, h: 2 }],\n  // UPPER THREE EIGHTHS BLOCK\n  '\\u{1FB83}': [{ x: 0, y: 0, w: 8, h: 3 }],\n  // UPPER FIVE EIGHTHS BLOCK\n  '\\u{1FB84}': [{ x: 0, y: 0, w: 8, h: 5 }],\n  // UPPER THREE QUARTERS BLOCK\n  '\\u{1FB85}': [{ x: 0, y: 0, w: 8, h: 6 }],\n  // UPPER SEVEN EIGHTHS BLOCK\n  '\\u{1FB86}': [{ x: 0, y: 0, w: 8, h: 7 }],\n\n  // RIGHT ONE QUARTER BLOCK\n  '\\u{1FB87}': [{ x: 6, y: 0, w: 2, h: 8 }],\n  // RIGHT THREE EIGHTHS B0OCK\n  '\\u{1FB88}': [{ x: 5, y: 0, w: 3, h: 8 }],\n  // RIGHT FIVE EIGHTHS BL0CK\n  '\\u{1FB89}': [{ x: 3, y: 0, w: 5, h: 8 }],\n  // RIGHT THREE QUARTERS 0LOCK\n  '\\u{1FB8A}': [{ x: 2, y: 0, w: 6, h: 8 }],\n  // RIGHT SEVEN EIGHTHS B0OCK\n  '\\u{1FB8B}': [{ x: 1, y: 0, w: 7, h: 8 }],\n\n  // CHECKER BOARD FILL\n  '\\u{1FB95}': [\n    { x: 0, y: 0, w: 2, h: 2 }, { x: 4, y: 0, w: 2, h: 2 },\n    { x: 2, y: 2, w: 2, h: 2 }, { x: 6, y: 2, w: 2, h: 2 },\n    { x: 0, y: 4, w: 2, h: 2 }, { x: 4, y: 4, w: 2, h: 2 },\n    { x: 2, y: 6, w: 2, h: 2 }, { x: 6, y: 6, w: 2, h: 2 }\n  ],\n  // INVERSE CHECKER BOARD FILL\n  '\\u{1FB96}': [\n    { x: 2, y: 0, w: 2, h: 2 }, { x: 6, y: 0, w: 2, h: 2 },\n    { x: 0, y: 2, w: 2, h: 2 }, { x: 4, y: 2, w: 2, h: 2 },\n    { x: 2, y: 4, w: 2, h: 2 }, { x: 6, y: 4, w: 2, h: 2 },\n    { x: 0, y: 6, w: 2, h: 2 }, { x: 4, y: 6, w: 2, h: 2 }\n  ],\n  // HEAVY HORIZONTAL FILL (upper middle and lower one quarter block)\n  '\\u{1FB97}': [{ x: 0, y: 2, w: 8, h: 2 }, { x: 0, y: 6, w: 8, h: 2 }]\n};\n\ntype PatternDefinition = number[][];\n\n/**\n * Defines the repeating pattern used by special characters, the pattern is made up of a 2d array of\n * pixel values to be filled (1) or not filled (0).\n */\nconst patternCharacterDefinitions: { [key: string]: PatternDefinition | undefined } = {\n  // Shade characters (0x2591-0x2593)\n  '\u2591': [ // LIGHT SHADE (25%)\n    [1, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 1, 0],\n    [0, 0, 0, 0]\n  ],\n  '\u2592': [ // MEDIUM SHADE (50%)\n    [1, 0],\n    [0, 0],\n    [0, 1],\n    [0, 0]\n  ],\n  '\u2593': [ // DARK SHADE (75%)\n    [0, 1],\n    [1, 1],\n    [1, 0],\n    [1, 1]\n  ]\n};\n\nconst enum Shapes {\n  /** \u2502 */ TOP_TO_BOTTOM = 'M.5,0 L.5,1',\n  /** \u2500 */ LEFT_TO_RIGHT = 'M0,.5 L1,.5',\n\n  /** \u2514 */ TOP_TO_RIGHT = 'M.5,0 L.5,.5 L1,.5',\n  /** \u2518 */ TOP_TO_LEFT = 'M.5,0 L.5,.5 L0,.5',\n  /** \u2510 */ LEFT_TO_BOTTOM = 'M0,.5 L.5,.5 L.5,1',\n  /** \u250C */ RIGHT_TO_BOTTOM = 'M0.5,1 L.5,.5 L1,.5',\n\n  /** \u2575 */ MIDDLE_TO_TOP = 'M.5,.5 L.5,0',\n  /** \u2574 */ MIDDLE_TO_LEFT = 'M.5,.5 L0,.5',\n  /** \u2576 */ MIDDLE_TO_RIGHT = 'M.5,.5 L1,.5',\n  /** \u2577 */ MIDDLE_TO_BOTTOM = 'M.5,.5 L.5,1',\n\n  /** \u2534 */ T_TOP = 'M0,.5 L1,.5 M.5,.5 L.5,0',\n  /** \u2524 */ T_LEFT = 'M.5,0 L.5,1 M.5,.5 L0,.5',\n  /** \u251C */ T_RIGHT = 'M.5,0 L.5,1 M.5,.5 L1,.5',\n  /** \u252C */ T_BOTTOM = 'M0,.5 L1,.5 M.5,.5 L.5,1',\n\n  /** \u253C */ CROSS = 'M0,.5 L1,.5 M.5,0 L.5,1',\n\n  /** \u254C */ TWO_DASHES_HORIZONTAL = 'M.1,.5 L.4,.5 M.6,.5 L.9,.5', // .2 empty, .3 filled\n  /** \u2504 */ THREE_DASHES_HORIZONTAL = 'M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5', // .1333 empty, .2 filled\n  /** \u2509 */ FOUR_DASHES_HORIZONTAL = 'M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5', // .1 empty, .15 filled\n  /** \u254E */ TWO_DASHES_VERTICAL = 'M.5,.1 L.5,.4 M.5,.6 L.5,.9',\n  /** \u2506 */ THREE_DASHES_VERTICAL = 'M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333',\n  /** \u250A */ FOUR_DASHES_VERTICAL = 'M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95',\n}\n\nconst enum Style {\n  NORMAL = 1,\n  BOLD = 3\n}\n\n/**\n * This contains the definitions of all box drawing characters in the format of SVG paths (ie. the\n * svg d attribute).\n */\nexport const boxDrawingDefinitions: { [character: string]: { [fontWeight: number]: string | ((xp: number, yp: number) => string) } | undefined } = {\n  // Uniform normal and bold\n  '\u2500': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT },\n  '\u2501': { [Style.BOLD]:   Shapes.LEFT_TO_RIGHT },\n  '\u2502': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM },\n  '\u2503': { [Style.BOLD]:   Shapes.TOP_TO_BOTTOM },\n  '\u250C': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM },\n  '\u250F': { [Style.BOLD]:   Shapes.RIGHT_TO_BOTTOM },\n  '\u2510': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM },\n  '\u2513': { [Style.BOLD]:   Shapes.LEFT_TO_BOTTOM },\n  '\u2514': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT },\n  '\u2517': { [Style.BOLD]:   Shapes.TOP_TO_RIGHT },\n  '\u2518': { [Style.NORMAL]: Shapes.TOP_TO_LEFT },\n  '\u251B': { [Style.BOLD]:   Shapes.TOP_TO_LEFT },\n  '\u251C': { [Style.NORMAL]: Shapes.T_RIGHT },\n  '\u2523': { [Style.BOLD]:   Shapes.T_RIGHT },\n  '\u2524': { [Style.NORMAL]: Shapes.T_LEFT },\n  '\u252B': { [Style.BOLD]:   Shapes.T_LEFT },\n  '\u252C': { [Style.NORMAL]: Shapes.T_BOTTOM },\n  '\u2533': { [Style.BOLD]:   Shapes.T_BOTTOM },\n  '\u2534': { [Style.NORMAL]: Shapes.T_TOP },\n  '\u253B': { [Style.BOLD]:   Shapes.T_TOP },\n  '\u253C': { [Style.NORMAL]: Shapes.CROSS },\n  '\u254B': { [Style.BOLD]:   Shapes.CROSS },\n  '\u2574': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT },\n  '\u2578': { [Style.BOLD]:   Shapes.MIDDLE_TO_LEFT },\n  '\u2575': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP },\n  '\u2579': { [Style.BOLD]:   Shapes.MIDDLE_TO_TOP },\n  '\u2576': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT },\n  '\u257A': { [Style.BOLD]:   Shapes.MIDDLE_TO_RIGHT },\n  '\u2577': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u257B': { [Style.BOLD]:   Shapes.MIDDLE_TO_BOTTOM },\n\n  // Double border\n  '\u2550': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '\u2551': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '\u2552': { [Style.NORMAL]: (xp, yp) => `M.5,1 L.5,${.5 - yp} L1,${.5 - yp} M.5,${.5 + yp} L1,${.5 + yp}` },\n  '\u2553': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},1 L${.5 - xp},.5 L1,.5 M${.5 + xp},.5 L${.5 + xp},1` },\n  '\u2554': { [Style.NORMAL]: (xp, yp) => `M1,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1` },\n  '\u2555': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L.5,${.5 - yp} L.5,1 M0,${.5 + yp} L.5,${.5 + yp}` },\n  '\u2556': { [Style.NORMAL]: (xp, yp) => `M${.5 + xp},1 L${.5 + xp},.5 L0,.5 M${.5 - xp},.5 L${.5 - xp},1` },\n  '\u2557': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M0,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},1` },\n  '\u2558': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 + yp} L1,${.5 + yp} M.5,${.5 - yp} L1,${.5 - yp}` },\n  '\u2559': { [Style.NORMAL]: (xp, yp) => `M1,.5 L${.5 - xp},.5 L${.5 - xp},0 M${.5 + xp},.5 L${.5 + xp},0` },\n  '\u255A': { [Style.NORMAL]: (xp, yp) => `M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0 M1,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},0` },\n  '\u255B': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L.5,${.5 + yp} L.5,0 M0,${.5 - yp} L.5,${.5 - yp}` },\n  '\u255C': { [Style.NORMAL]: (xp, yp) => `M0,.5 L${.5 + xp},.5 L${.5 + xp},0 M${.5 - xp},.5 L${.5 - xp},0` },\n  '\u255D': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M0,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},0` },\n  '\u255E': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M.5,${.5 - yp} L1,${.5 - yp} M.5,${.5 + yp} L1,${.5 + yp}` },\n  '\u255F': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1 M${.5 + xp},.5 L1,.5` },\n  '\u2560': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n  '\u2561': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M0,${.5 - yp} L.5,${.5 - yp} M0,${.5 + yp} L.5,${.5 + yp}` },\n  '\u2562': { [Style.NORMAL]: (xp, yp) => `M0,.5 L${.5 - xp},.5 M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '\u2563': { [Style.NORMAL]: (xp, yp) => `M${.5 + xp},0 L${.5 + xp},1 M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0` },\n  '\u2564': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp} M.5,${.5 + yp} L.5,1` },\n  '\u2565': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},.5 L${.5 - xp},1 M${.5 + xp},.5 L${.5 + xp},1` },\n  '\u2566': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1` },\n  '\u2567': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 - yp} M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '\u2568': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},.5 L${.5 - xp},0 M${.5 + xp},.5 L${.5 + xp},0` },\n  '\u2569': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L1,${.5 + yp} M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n  '\u256A': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '\u256B': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '\u256C': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1 M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n\n  // Diagonal\n  '\u2571': { [Style.NORMAL]: 'M1,0 L0,1' },\n  '\u2572': { [Style.NORMAL]: 'M0,0 L1,1' },\n  '\u2573': { [Style.NORMAL]: 'M1,0 L0,1 M0,0 L1,1' },\n\n  // Mixed weight\n  '\u257C': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u257D': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u257E': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u257F': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u250D': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u250E': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2511': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u2512': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2515': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u2516': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u2519': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u251A': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u251D': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u251E': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u251F': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2520': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '\u2521': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '\u2522': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '\u2525': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u2526': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u2527': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2528': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '\u2529': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '\u252A': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '\u252D': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u252E': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u252F': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '\u2530': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2531': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '\u2532': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '\u2535': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u2536': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u2537': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '\u2538': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u2539': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '\u253A': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '\u253D': { [Style.NORMAL]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_RIGHT}`,  [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '\u253E': { [Style.NORMAL]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_LEFT}`,   [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '\u253F': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '\u2540': { [Style.NORMAL]: `${Shapes.LEFT_TO_RIGHT} ${Shapes.MIDDLE_TO_BOTTOM}`, [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '\u2541': { [Style.NORMAL]: `${Shapes.MIDDLE_TO_TOP} ${Shapes.LEFT_TO_RIGHT}`,    [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '\u2542': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '\u2543': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '\u2544': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '\u2545': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '\u2546': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '\u2547': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: `${Shapes.MIDDLE_TO_TOP} ${Shapes.LEFT_TO_RIGHT}` },\n  '\u2548': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: `${Shapes.LEFT_TO_RIGHT} ${Shapes.MIDDLE_TO_BOTTOM}` },\n  '\u2549': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_LEFT}` },\n  '\u254A': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_RIGHT}` },\n\n  // Dashed\n  '\u254C': { [Style.NORMAL]: Shapes.TWO_DASHES_HORIZONTAL },\n  '\u254D': { [Style.BOLD]:   Shapes.TWO_DASHES_HORIZONTAL },\n  '\u2504': { [Style.NORMAL]: Shapes.THREE_DASHES_HORIZONTAL },\n  '\u2505': { [Style.BOLD]:   Shapes.THREE_DASHES_HORIZONTAL },\n  '\u2508': { [Style.NORMAL]: Shapes.FOUR_DASHES_HORIZONTAL },\n  '\u2509': { [Style.BOLD]:   Shapes.FOUR_DASHES_HORIZONTAL },\n  '\u254E': { [Style.NORMAL]: Shapes.TWO_DASHES_VERTICAL },\n  '\u254F': { [Style.BOLD]:   Shapes.TWO_DASHES_VERTICAL },\n  '\u2506': { [Style.NORMAL]: Shapes.THREE_DASHES_VERTICAL  },\n  '\u2507': { [Style.BOLD]:   Shapes.THREE_DASHES_VERTICAL },\n  '\u250A': { [Style.NORMAL]: Shapes.FOUR_DASHES_VERTICAL },\n  '\u250B': { [Style.BOLD]:   Shapes.FOUR_DASHES_VERTICAL },\n\n  // Curved\n  '\u256D': { [Style.NORMAL]: 'C.5,1,.5,.5,1,.5' },\n  '\u256E': { [Style.NORMAL]: 'C.5,1,.5,.5,0,.5' },\n  '\u256F': { [Style.NORMAL]: 'C.5,0,.5,.5,0,.5' },\n  '\u2570': { [Style.NORMAL]: 'C.5,0,.5,.5,1,.5' }\n};\n\n/**\n * Try drawing a custom block element or box drawing character, returning whether it was\n * successfully drawn.\n */\nexport function tryDrawCustomChar(\n  ctx: CanvasRenderingContext2D,\n  c: string,\n  xOffset: number,\n  yOffset: number,\n  scaledCellWidth: number,\n  scaledCellHeight: number\n): boolean {\n  const blockElementDefinition = blockElementDefinitions[c];\n  if (blockElementDefinition) {\n    drawBlockElementChar(ctx, blockElementDefinition, xOffset, yOffset, scaledCellWidth, scaledCellHeight);\n    return true;\n  }\n\n  const patternDefinition = patternCharacterDefinitions[c];\n  if (patternDefinition) {\n    drawPatternChar(ctx, patternDefinition, xOffset, yOffset, scaledCellWidth, scaledCellHeight);\n    return true;\n  }\n\n  const boxDrawingDefinition = boxDrawingDefinitions[c];\n  if (boxDrawingDefinition) {\n    drawBoxDrawingChar(ctx, boxDrawingDefinition, xOffset, yOffset, scaledCellWidth, scaledCellHeight);\n    return true;\n  }\n\n  return false;\n}\n\nfunction drawBlockElementChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: IBlockVector[],\n  xOffset: number,\n  yOffset: number,\n  scaledCellWidth: number,\n  scaledCellHeight: number\n): void {\n  for (let i = 0; i < charDefinition.length; i++) {\n    const box = charDefinition[i];\n    const xEighth = scaledCellWidth / 8;\n    const yEighth = scaledCellHeight / 8;\n    ctx.fillRect(\n      xOffset + box.x * xEighth,\n      yOffset + box.y * yEighth,\n      box.w * xEighth,\n      box.h * yEighth\n    );\n  }\n}\n\nconst cachedPatterns: Map<PatternDefinition, Map</* fillStyle */string, CanvasPattern>> = new Map();\n\nfunction drawPatternChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: number[][],\n  xOffset: number,\n  yOffset: number,\n  scaledCellWidth: number,\n  scaledCellHeight: number\n): void {\n  let patternSet = cachedPatterns.get(charDefinition);\n  if (!patternSet) {\n    patternSet = new Map();\n    cachedPatterns.set(charDefinition, patternSet);\n  }\n  const fillStyle = ctx.fillStyle;\n  if (typeof fillStyle !== 'string') {\n    throw new Error(`Unexpected fillStyle type \"${fillStyle}\"`);\n  }\n  let pattern = patternSet.get(fillStyle);\n  if (!pattern) {\n    const width = charDefinition[0].length;\n    const height = charDefinition.length;\n    const tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = width;\n    tmpCanvas.height = height;\n    const tmpCtx = throwIfFalsy(tmpCanvas.getContext('2d'));\n    const imageData = new ImageData(width, height);\n\n    // Extract rgba from fillStyle\n    let r: number;\n    let g: number;\n    let b: number;\n    let a: number;\n    if (fillStyle.startsWith('#')) {\n      r = parseInt(fillStyle.substr(1, 2), 16);\n      g = parseInt(fillStyle.substr(3, 2), 16);\n      b = parseInt(fillStyle.substr(5, 2), 16);\n      a = fillStyle.length > 7 && parseInt(fillStyle.substr(7, 2), 16) || 1;\n    } else if (fillStyle.startsWith('rgba')) {\n      ([r, g, b, a] = fillStyle.substring(5, fillStyle.length - 1).split(',').map(e => parseFloat(e)));\n    } else {\n      throw new Error(`Unexpected fillStyle color format \"${fillStyle}\" when drawing pattern glyph`);\n    }\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        imageData.data[(y * width + x) * 4    ] = r;\n        imageData.data[(y * width + x) * 4 + 1] = g;\n        imageData.data[(y * width + x) * 4 + 2] = b;\n        imageData.data[(y * width + x) * 4 + 3] = charDefinition[y][x] * (a * 255);\n      }\n    }\n    tmpCtx.putImageData(imageData, 0, 0);\n    pattern = throwIfFalsy(ctx.createPattern(tmpCanvas, null));\n    patternSet.set(fillStyle, pattern);\n  }\n  ctx.fillStyle = pattern;\n  ctx.fillRect(xOffset, yOffset, scaledCellWidth, scaledCellHeight);\n}\n\n/**\n * Draws the following box drawing characters by mapping a subset of SVG d attribute instructions to\n * canvas draw calls.\n *\n * Box styles:       \u250E\u2530\u2512\u250D\u252F\u2511\u2553\u2565\u2556\u2552\u2564\u2555 \u250F\u2533\u2513\u250C\u2532\u2513\u250C\u252C\u2510\u250F\u2531\u2510\n * \u250C\u2500\u252C\u2500\u2510 \u250F\u2501\u2533\u2501\u2513 \u2554\u2550\u2566\u2550\u2557 \u2520\u2542\u2528\u251D\u253F\u2525\u255F\u256B\u2562\u255E\u256A\u2561 \u2521\u2547\u2529\u251C\u254A\u252B\u2522\u2548\u252A\u2523\u2549\u2524\n * \u2502 \u2502 \u2502 \u2503 \u2503 \u2503 \u2551 \u2551 \u2551 \u2516\u2538\u251A\u2515\u2537\u2519\u2559\u2568\u255C\u2558\u2567\u255B \u2514\u2534\u2518\u2514\u253A\u251B\u2517\u253B\u251B\u2517\u2539\u2518\n * \u251C\u2500\u253C\u2500\u2524 \u2523\u2501\u254B\u2501\u252B \u2560\u2550\u256C\u2550\u2563 \u250F\u2531\u2510\u250C\u2532\u2513\u250C\u252C\u2510\u250C\u252C\u2510 \u250F\u2533\u2513\u250C\u252E\u2513\u250C\u252C\u2510\u250F\u252D\u2510\n * \u2502 \u2502 \u2502 \u2503 \u2503 \u2503 \u2551 \u2551 \u2551 \u2521\u2543\u2524\u251C\u2544\u2529\u251C\u2546\u252A\u2522\u2545\u2524 \u251E\u2540\u2526\u251C\u253E\u252B\u251F\u2541\u2527\u2523\u253D\u2524\n * \u2514\u2500\u2534\u2500\u2518 \u2517\u2501\u253B\u2501\u251B \u255A\u2550\u2569\u2550\u255D \u2514\u2534\u2518\u2514\u2534\u2518\u2514\u253A\u251B\u2517\u2539\u2518 \u2514\u2534\u2518\u2514\u2536\u251B\u2517\u253B\u251B\u2517\u2535\u2518\n *\n * Other:\n * \u256D\u2500\u256E \u2572 \u2571 \u2577\u257B\u254E\u254F\u2506\u2507\u250A\u250B \u257A\u257E\u2574 \u254C\u254C\u254C \u2504\u2504\u2504 \u2508\u2508\u2508\n * \u2502 \u2502  \u2573  \u257D\u257F\u254E\u254F\u2506\u2507\u250A\u250B \u2576\u257C\u2578 \u254D\u254D\u254D \u2505\u2505\u2505 \u2509\u2509\u2509\n * \u2570\u2500\u256F \u2571 \u2572 \u2579\u2575\u254E\u254F\u2506\u2507\u250A\u250B\n *\n * All box drawing characters:\n * \u2500 \u2501 \u2502 \u2503 \u2504 \u2505 \u2506 \u2507 \u2508 \u2509 \u250A \u250B \u250C \u250D \u250E \u250F\n * \u2510 \u2511 \u2512 \u2513 \u2514 \u2515 \u2516 \u2517 \u2518 \u2519 \u251A \u251B \u251C \u251D \u251E \u251F\n * \u2520 \u2521 \u2522 \u2523 \u2524 \u2525 \u2526 \u2527 \u2528 \u2529 \u252A \u252B \u252C \u252D \u252E \u252F\n * \u2530 \u2531 \u2532 \u2533 \u2534 \u2535 \u2536 \u2537 \u2538 \u2539 \u253A \u253B \u253C \u253D \u253E \u253F\n * \u2540 \u2541 \u2542 \u2543 \u2544 \u2545 \u2546 \u2547 \u2548 \u2549 \u254A \u254B \u254C \u254D \u254E \u254F\n * \u2550 \u2551 \u2552 \u2553 \u2554 \u2555 \u2556 \u2557 \u2558 \u2559 \u255A \u255B \u255C \u255D \u255E \u255F\n * \u2560 \u2561 \u2562 \u2563 \u2564 \u2565 \u2566 \u2567 \u2568 \u2569 \u256A \u256B \u256C \u256D \u256E \u256F\n * \u2570 \u2571 \u2572 \u2573 \u2574 \u2575 \u2576 \u2577 \u2578 \u2579 \u257A \u257B \u257C \u257D \u257E \u257F\n *\n * ---\n *\n * Box drawing alignment tests:                                          \u2588\n *                                                                       \u2589\n *   \u2554\u2550\u2550\u2566\u2550\u2550\u2557  \u250C\u2500\u2500\u252C\u2500\u2500\u2510  \u256D\u2500\u2500\u252C\u2500\u2500\u256E  \u256D\u2500\u2500\u252C\u2500\u2500\u256E  \u250F\u2501\u2501\u2533\u2501\u2501\u2513  \u250E\u2512\u250F\u2511   \u2577  \u257B \u250F\u252F\u2513 \u250C\u2530\u2510    \u258A \u2571\u2572\u2571\u2572\u2573\u2573\u2573\n *   \u2551\u250C\u2500\u2568\u2500\u2510\u2551  \u2502\u2554\u2550\u2567\u2550\u2557\u2502  \u2502\u2552\u2550\u256A\u2550\u2555\u2502  \u2502\u2553\u2500\u2541\u2500\u2556\u2502  \u2503\u250C\u2500\u2542\u2500\u2510\u2503  \u2517\u2543\u2544\u2519  \u2576\u253C\u2574\u257A\u254B\u2578\u2520\u253C\u2528 \u251D\u254B\u2525    \u258B \u2572\u2571\u2572\u2571\u2573\u2573\u2573\n *   \u2551\u2502\u2572 \u2571\u2502\u2551  \u2502\u2551   \u2551\u2502  \u2502\u2502 \u2502 \u2502\u2502  \u2502\u2551 \u2503 \u2551\u2502  \u2503\u2502 \u257F \u2502\u2503  \u250D\u2545\u2546\u2513   \u2575  \u2579 \u2517\u2537\u251B \u2514\u2538\u2518    \u258C \u2571\u2572\u2571\u2572\u2573\u2573\u2573\n *   \u2560\u2561 \u2573 \u255E\u2563  \u251C\u2562   \u255F\u2524  \u251C\u253C\u2500\u253C\u2500\u253C\u2524  \u251C\u256B\u2500\u2542\u2500\u256B\u2524  \u2523\u253F\u257E\u253C\u257C\u253F\u252B  \u2515\u251B\u2516\u251A     \u250C\u2504\u2504\u2510 \u254E \u250F\u2505\u2505\u2513 \u250B \u258D \u2572\u2571\u2572\u2571\u2573\u2573\u2573\n *   \u2551\u2502\u2571 \u2572\u2502\u2551  \u2502\u2551   \u2551\u2502  \u2502\u2502 \u2502 \u2502\u2502  \u2502\u2551 \u2503 \u2551\u2502  \u2503\u2502 \u257D \u2502\u2503  \u2591\u2591\u2592\u2592\u2593\u2593\u2588\u2588 \u250A  \u2506 \u254E \u254F  \u2507 \u250B \u258E\n *   \u2551\u2514\u2500\u2565\u2500\u2518\u2551  \u2502\u255A\u2550\u2564\u2550\u255D\u2502  \u2502\u2558\u2550\u256A\u2550\u255B\u2502  \u2502\u2559\u2500\u2540\u2500\u255C\u2502  \u2503\u2514\u2500\u2542\u2500\u2518\u2503  \u2591\u2591\u2592\u2592\u2593\u2593\u2588\u2588 \u250A  \u2506 \u254E \u254F  \u2507 \u250B \u258F\n *   \u255A\u2550\u2550\u2569\u2550\u2550\u255D  \u2514\u2500\u2500\u2534\u2500\u2500\u2518  \u2570\u2500\u2500\u2534\u2500\u2500\u256F  \u2570\u2500\u2500\u2534\u2500\u2500\u256F  \u2517\u2501\u2501\u253B\u2501\u2501\u251B           \u2514\u254C\u254C\u2518 \u254E \u2517\u254D\u254D\u251B \u250B  \u2581\u2582\u2583\u2584\u2585\u2586\u2587\u2588\n *\n * Source: https://www.w3.org/2001/06/utf-8-test/UTF-8-demo.html\n */\nfunction drawBoxDrawingChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: { [fontWeight: number]: string | ((xp: number, yp: number) => string) },\n  xOffset: number,\n  yOffset: number,\n  scaledCellWidth: number,\n  scaledCellHeight: number\n): void {\n  ctx.strokeStyle = ctx.fillStyle;\n  for (const [fontWeight, instructions] of Object.entries(charDefinition)) {\n    ctx.beginPath();\n    ctx.lineWidth = window.devicePixelRatio * Number.parseInt(fontWeight);\n    let actualInstructions: string;\n    if (typeof instructions === 'function') {\n      const xp = .15;\n      const yp = .15 / scaledCellHeight * scaledCellWidth;\n      actualInstructions = instructions(xp, yp);\n    } else {\n      actualInstructions = instructions;\n    }\n    for (const instruction of actualInstructions.split(' ')) {\n      const type = instruction[0];\n      const f = svgToCanvasInstructionMap[type];\n      if (!f) {\n        console.error(`Could not find drawing instructions for \"${type}\"`);\n        continue;\n      }\n      const args: string[] = instruction.substring(1).split(',');\n      if (!args[0] || !args[1]) {\n        continue;\n      }\n      f(ctx, translateArgs(args, scaledCellWidth, scaledCellHeight, xOffset, yOffset));\n    }\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n\nfunction clamp(value: number, max: number, min: number = 0): number {\n  return Math.max(Math.min(value, max), min);\n}\n\nconst svgToCanvasInstructionMap: { [index: string]: any } = {\n  'C': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.bezierCurveTo(args[0], args[1], args[2], args[3], args[4], args[5]),\n  'L': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.lineTo(args[0], args[1]),\n  'M': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.moveTo(args[0], args[1])\n};\n\nfunction translateArgs(args: string[], cellWidth: number, cellHeight: number, xOffset: number, yOffset: number): number[] {\n  const result = args.map(e => parseFloat(e) || parseInt(e));\n\n  if (result.length < 2) {\n    throw new Error('Too few arguments for instruction');\n  }\n\n  for (let x = 0; x < result.length; x += 2) {\n    // Translate from 0-1 to 0-cellWidth\n    result[x] *= cellWidth;\n    // Ensure coordinate doesn't escape cell bounds and round to the nearest 0.5 to ensure a crisp\n    // line at 100% devicePixelRatio\n    if (result[x] !== 0) {\n      result[x] = clamp(Math.round(result[x] + 0.5) - 0.5, cellWidth, 0);\n    }\n    // Apply the cell's offset (ie. x*cellWidth)\n    result[x] += xOffset;\n  }\n\n  for (let y = 1; y < result.length; y += 2) {\n    // Translate from 0-1 to 0-cellHeight\n    result[y] *= cellHeight;\n    // Ensure coordinate doesn't escape cell bounds and round to the nearest 0.5 to ensure a crisp\n    // line at 100% devicePixelRatio\n    if (result[y] !== 0) {\n      result[y] = clamp(Math.round(result[y] + 0.5) - 0.5, cellHeight, 0);\n    }\n    // Apply the cell's offset (ie. x*cellHeight)\n    result[y] += yOffset;\n  }\n\n  return result;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport class GridCache<T> {\n  public cache: (T | undefined)[][];\n\n  public constructor() {\n    this.cache = [];\n  }\n\n  public resize(width: number, height: number): void {\n    for (let x = 0; x < width; x++) {\n      if (this.cache.length <= x) {\n        this.cache.push([]);\n      }\n      for (let y = this.cache[x].length; y < height; y++) {\n        this.cache[x].push(undefined);\n      }\n      this.cache[x].length = height;\n    }\n    this.cache.length = width;\n  }\n\n  public clear(): void {\n    for (let x = 0; x < this.cache.length; x++) {\n      for (let y = 0; y < this.cache[x].length; y++) {\n        this.cache[x][y] = undefined;\n      }\n    }\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from './BaseRenderLayer';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { is256Color } from 'browser/renderer/atlas/CharAtlasUtils';\nimport { IColorSet, ILinkifierEvent, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\nexport class LinkRenderLayer extends BaseRenderLayer {\n  private _state: ILinkifierEvent | undefined;\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    linkifier: ILinkifier,\n    linkifier2: ILinkifier2,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService\n  ) {\n    super(container, 'link', zIndex, true, colors, rendererId, bufferService, optionsService);\n    linkifier.onShowLinkUnderline(e => this._onShowLinkUnderline(e));\n    linkifier.onHideLinkUnderline(e => this._onHideLinkUnderline(e));\n\n    linkifier2.onShowLinkUnderline(e => this._onShowLinkUnderline(e));\n    linkifier2.onHideLinkUnderline(e => this._onHideLinkUnderline(e));\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state = undefined;\n  }\n\n  public reset(): void {\n    this._clearCurrentLink();\n  }\n\n  private _clearCurrentLink(): void {\n    if (this._state) {\n      this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n      const middleRowCount = this._state.y2 - this._state.y1 - 1;\n      if (middleRowCount > 0) {\n        this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n      }\n      this._clearCells(0, this._state.y2, this._state.x2, 1);\n      this._state = undefined;\n    }\n  }\n\n  private _onShowLinkUnderline(e: ILinkifierEvent): void {\n    if (e.fg === INVERTED_DEFAULT_COLOR) {\n      this._ctx.fillStyle = this._colors.background.css;\n    } else if (e.fg && is256Color(e.fg)) {\n      // 256 color support\n      this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n    } else {\n      this._ctx.fillStyle = this._colors.foreground.css;\n    }\n\n    if (e.y1 === e.y2) {\n      // Single line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n    } else {\n      // Multi-line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n      for (let y = e.y1 + 1; y < e.y2; y++) {\n        this._fillBottomLineAtCells(0, y, e.cols);\n      }\n      this._fillBottomLineAtCells(0, e.y2, e.x2);\n    }\n    this._state = e;\n  }\n\n  private _onHideLinkUnderline(e: ILinkifierEvent): void {\n    this._clearCurrentLink();\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { TextRenderLayer } from 'browser/renderer/TextRenderLayer';\nimport { SelectionRenderLayer } from 'browser/renderer/SelectionRenderLayer';\nimport { CursorRenderLayer } from 'browser/renderer/CursorRenderLayer';\nimport { IRenderLayer, IRenderer, IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { LinkRenderLayer } from 'browser/renderer/LinkRenderLayer';\nimport { Disposable } from 'common/Lifecycle';\nimport { IColorSet, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { ICharSizeService, ICoreBrowserService } from 'browser/services/Services';\nimport { IBufferService, IOptionsService, ICoreService, IInstantiationService } from 'common/services/Services';\nimport { removeTerminalFromCache } from 'browser/renderer/atlas/CharAtlasCache';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\n\nlet nextRendererId = 1;\n\nexport class Renderer extends Disposable implements IRenderer {\n  private _id = nextRendererId++;\n\n  private _renderLayers: IRenderLayer[];\n  private _devicePixelRatio: number;\n\n  public dimensions: IRenderDimensions;\n\n  private _onRequestRedraw = new EventEmitter<IRequestRedrawEvent>();\n  public get onRequestRedraw(): IEvent<IRequestRedrawEvent> { return this._onRequestRedraw.event; }\n\n  constructor(\n    private _colors: IColorSet,\n    private readonly _screenElement: HTMLElement,\n    linkifier: ILinkifier,\n    linkifier2: ILinkifier2,\n    @IInstantiationService instantiationService: IInstantiationService,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n    const allowTransparency = this._optionsService.options.allowTransparency;\n    this._renderLayers = [\n      instantiationService.createInstance(TextRenderLayer, this._screenElement, 0, this._colors, allowTransparency, this._id),\n      instantiationService.createInstance(SelectionRenderLayer, this._screenElement, 1, this._colors, this._id),\n      instantiationService.createInstance(LinkRenderLayer, this._screenElement, 2, this._colors, this._id, linkifier, linkifier2),\n      instantiationService.createInstance(CursorRenderLayer, this._screenElement, 3, this._colors, this._id, this._onRequestRedraw)\n    ];\n    this.dimensions = {\n      scaledCharWidth: 0,\n      scaledCharHeight: 0,\n      scaledCellWidth: 0,\n      scaledCellHeight: 0,\n      scaledCharLeft: 0,\n      scaledCharTop: 0,\n      scaledCanvasWidth: 0,\n      scaledCanvasHeight: 0,\n      canvasWidth: 0,\n      canvasHeight: 0,\n      actualCellWidth: 0,\n      actualCellHeight: 0\n    };\n    this._devicePixelRatio = window.devicePixelRatio;\n    this._updateDimensions();\n    this.onOptionsChanged();\n  }\n\n  public dispose(): void {\n    for (const l of this._renderLayers) {\n      l.dispose();\n    }\n    super.dispose();\n    removeTerminalFromCache(this._id);\n  }\n\n  public onDevicePixelRatioChange(): void {\n    // If the device pixel ratio changed, the char atlas needs to be regenerated\n    // and the terminal needs to refreshed\n    if (this._devicePixelRatio !== window.devicePixelRatio) {\n      this._devicePixelRatio = window.devicePixelRatio;\n      this.onResize(this._bufferService.cols, this._bufferService.rows);\n    }\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n    // Clear layers and force a full render\n    for (const l of this._renderLayers) {\n      l.setColors(this._colors);\n      l.reset();\n    }\n  }\n\n  public onResize(cols: number, rows: number): void {\n    // Update character and canvas dimensions\n    this._updateDimensions();\n\n    // Resize all render layers\n    for (const l of this._renderLayers) {\n      l.resize(this.dimensions);\n    }\n\n    // Resize the screen\n    this._screenElement.style.width = `${this.dimensions.canvasWidth}px`;\n    this._screenElement.style.height = `${this.dimensions.canvasHeight}px`;\n  }\n\n  public onCharSizeChanged(): void {\n    this.onResize(this._bufferService.cols, this._bufferService.rows);\n  }\n\n  public onBlur(): void {\n    this._runOperation(l => l.onBlur());\n  }\n\n  public onFocus(): void {\n    this._runOperation(l => l.onFocus());\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {\n    this._runOperation(l => l.onSelectionChanged(start, end, columnSelectMode));\n  }\n\n  public onCursorMove(): void {\n    this._runOperation(l => l.onCursorMove());\n  }\n\n  public onOptionsChanged(): void {\n    this._runOperation(l => l.onOptionsChanged());\n  }\n\n  public clear(): void {\n    this._runOperation(l => l.reset());\n  }\n\n  private _runOperation(operation: (layer: IRenderLayer) => void): void {\n    for (const l of this._renderLayers) {\n      operation(l);\n    }\n  }\n\n  /**\n   * Performs the refresh loop callback, calling refresh only if a refresh is\n   * necessary before queueing up the next one.\n   */\n  public renderRows(start: number, end: number): void {\n    for (const l of this._renderLayers) {\n      l.onGridChanged(start, end);\n    }\n  }\n\n  public clearTextureAtlas(): void {\n    for (const layer of this._renderLayers) {\n      layer.clearTextureAtlas();\n    }\n  }\n\n  /**\n   * Recalculates the character and canvas dimensions.\n   */\n  private _updateDimensions(): void {\n    if (!this._charSizeService.hasValidSize) {\n      return;\n    }\n\n    // Calculate the scaled character width. Width is floored as it must be\n    // drawn to an integer grid in order for the CharAtlas \"stamps\" to not be\n    // blurry. When text is drawn to the grid not using the CharAtlas, it is\n    // clipped to ensure there is no overlap with the next cell.\n    this.dimensions.scaledCharWidth = Math.floor(this._charSizeService.width * window.devicePixelRatio);\n\n    // Calculate the scaled character height. Height is ceiled in case\n    // devicePixelRatio is a floating point number in order to ensure there is\n    // enough space to draw the character to the cell.\n    this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);\n\n    // Calculate the scaled cell height, if lineHeight is not 1 then the value\n    // will be floored because since lineHeight can never be lower then 1, there\n    // is a guarentee that the scaled line height will always be larger than\n    // scaled char height.\n    this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);\n\n    // Calculate the y coordinate within a cell that text should draw from in\n    // order to draw in the center of a cell.\n    this.dimensions.scaledCharTop = this._optionsService.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n\n    // Calculate the scaled cell width, taking the letterSpacing into account.\n    this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);\n\n    // Calculate the x coordinate with a cell that text should draw from in\n    // order to draw in the center of a cell.\n    this.dimensions.scaledCharLeft = Math.floor(this._optionsService.options.letterSpacing / 2);\n\n    // Recalculate the canvas dimensions; scaled* define the actual number of\n    // pixel in the canvas\n    this.dimensions.scaledCanvasHeight = this._bufferService.rows * this.dimensions.scaledCellHeight;\n    this.dimensions.scaledCanvasWidth = this._bufferService.cols * this.dimensions.scaledCellWidth;\n\n    // The the size of the canvas on the page. It's very important that this\n    // rounds to nearest integer and not ceils as browsers often set\n    // window.devicePixelRatio as something like 1.100000023841858, when it's\n    // actually 1.1. Ceiling causes blurriness as the backing canvas image is 1\n    // pixel too large for the canvas element size.\n    this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n    this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n\n    // Get the _actual_ dimensions of an individual cell. This needs to be\n    // derived from the canvasWidth/Height calculated above which takes into\n    // account window.devicePixelRatio. ICharSizeService.width/height by itself\n    // is insufficient when the page is not at 100% zoom level as it's measured\n    // in CSS pixels, but the actual char size on the canvas can differ.\n    this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;\n    this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport function throwIfFalsy<T>(value: T | undefined | null): T {\n  if (!value) {\n    throw new Error('value must not be falsy');\n  }\n  return value;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { IColorSet } from 'browser/Types';\nimport { IBufferService, IOptionsService } from 'common/services/Services';\n\ninterface ISelectionState {\n  start?: [number, number];\n  end?: [number, number];\n  columnSelectMode?: boolean;\n  ydisp?: number;\n}\n\nexport class SelectionRenderLayer extends BaseRenderLayer {\n  private _state!: ISelectionState;\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    rendererId: number,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService\n  ) {\n    super(container, 'selection', zIndex, true, colors, rendererId, bufferService, optionsService);\n    this._clearState();\n  }\n\n  private _clearState(): void {\n    this._state = {\n      start: undefined,\n      end: undefined,\n      columnSelectMode: undefined,\n      ydisp: undefined\n    };\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._clearState();\n  }\n\n  public reset(): void {\n    if (this._state.start && this._state.end) {\n      this._clearState();\n      this._clearAll();\n    }\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    // Selection has not changed\n    if (!this._didStateChange(start, end, columnSelectMode, this._bufferService.buffer.ydisp)) {\n      return;\n    }\n\n    // Remove all selections\n    this._clearAll();\n\n    // Selection does not exist\n    if (!start || !end) {\n      this._clearState();\n      return;\n    }\n\n    // Translate from buffer position to viewport position\n    const viewportStartRow = start[1] - this._bufferService.buffer.ydisp;\n    const viewportEndRow = end[1] - this._bufferService.buffer.ydisp;\n    const viewportCappedStartRow = Math.max(viewportStartRow, 0);\n    const viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);\n\n    // No need to draw the selection\n    if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {\n      this._state.ydisp = this._bufferService.buffer.ydisp;\n      return;\n    }\n\n    this._ctx.fillStyle = this._colors.selectionTransparent.css;\n\n    if (columnSelectMode) {\n      const startCol = start[0];\n      const width = end[0] - startCol;\n      const height = viewportCappedEndRow - viewportCappedStartRow + 1;\n      this._fillCells(startCol, viewportCappedStartRow, width, height);\n    } else {\n      // Draw first row\n      const startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n      const startRowEndCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;\n      this._fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n\n      // Draw middle rows\n      const middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n      this._fillCells(0, viewportCappedStartRow + 1, this._bufferService.cols, middleRowsCount);\n\n      // Draw final row\n      if (viewportCappedStartRow !== viewportCappedEndRow) {\n        // Only draw viewportEndRow if it's not the same as viewportStartRow\n        const endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;\n        this._fillCells(0, viewportCappedEndRow, endCol, 1);\n      }\n    }\n\n    // Save state for next render\n    this._state.start = [start[0], start[1]];\n    this._state.end = [end[0], end[1]];\n    this._state.columnSelectMode = columnSelectMode;\n    this._state.ydisp = this._bufferService.buffer.ydisp;\n  }\n\n  private _didStateChange(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean, ydisp: number): boolean {\n    return !this._areCoordinatesEqual(start, this._state.start) ||\n      !this._areCoordinatesEqual(end, this._state.end) ||\n      columnSelectMode !== this._state.columnSelectMode ||\n      ydisp !== this._state.ydisp;\n  }\n\n  private _areCoordinatesEqual(coord1: [number, number] | undefined, coord2: [number, number] | undefined): boolean {\n    if (!coord1 || !coord2) {\n      return false;\n    }\n\n    return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/Types';\nimport { CharData, ICellData } from 'common/Types';\nimport { GridCache } from 'browser/renderer/GridCache';\nimport { BaseRenderLayer } from 'browser/renderer/BaseRenderLayer';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { NULL_CELL_CODE, Content } from 'common/buffer/Constants';\nimport { IColorSet } from 'browser/Types';\nimport { CellData } from 'common/buffer/CellData';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { ICharacterJoinerService } from 'browser/services/Services';\nimport { JoinedCellData } from 'browser/services/CharacterJoinerService';\n\n/**\n * This CharData looks like a null character, which will forc a clear and render\n * when the character changes (a regular space ' ' character may not as it's\n * drawn state is a cleared cell).\n */\n// const OVERLAP_OWNED_CHAR_DATA: CharData = [null, '', 0, -1];\n\nexport class TextRenderLayer extends BaseRenderLayer {\n  private _state: GridCache<CharData>;\n  private _characterWidth: number = 0;\n  private _characterFont: string = '';\n  private _characterOverlapCache: { [key: string]: boolean } = {};\n  private _workCell = new CellData();\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    colors: IColorSet,\n    alpha: boolean,\n    rendererId: number,\n    @IBufferService bufferService: IBufferService,\n    @IOptionsService optionsService: IOptionsService,\n    @ICharacterJoinerService private readonly _characterJoinerService: ICharacterJoinerService\n  ) {\n    super(container, 'text', zIndex, alpha, colors, rendererId, bufferService, optionsService);\n    this._state = new GridCache<CharData>();\n  }\n\n  public resize(dim: IRenderDimensions): void {\n    super.resize(dim);\n\n    // Clear the character width cache if the font or width has changed\n    const terminalFont = this._getFont(false, false);\n    if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n      this._characterWidth = dim.scaledCharWidth;\n      this._characterFont = terminalFont;\n      this._characterOverlapCache = {};\n    }\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state.clear();\n    this._state.resize(this._bufferService.cols, this._bufferService.rows);\n  }\n\n  public reset(): void {\n    this._state.clear();\n    this._clearAll();\n  }\n\n  private _forEachCell(\n    firstRow: number,\n    lastRow: number,\n    callback: (\n      cell: ICellData,\n      x: number,\n      y: number\n    ) => void\n  ): void {\n    for (let y = firstRow; y <= lastRow; y++) {\n      const row = y + this._bufferService.buffer.ydisp;\n      const line = this._bufferService.buffer.lines.get(row);\n      const joinedRanges = this._characterJoinerService.getJoinedCharacters(row);\n      for (let x = 0; x < this._bufferService.cols; x++) {\n        line!.loadCell(x, this._workCell);\n        let cell = this._workCell;\n\n        // If true, indicates that the current character(s) to draw were joined.\n        let isJoined = false;\n        let lastCharX = x;\n\n        // The character to the left is a wide character, drawing is owned by\n        // the char at x-1\n        if (cell.getWidth() === 0) {\n          continue;\n        }\n\n        // Process any joined character ranges as needed. Because of how the\n        // ranges are produced, we know that they are valid for the characters\n        // and attributes of our input.\n        if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n          isJoined = true;\n          const range = joinedRanges.shift()!;\n\n          // We already know the exact start and end column of the joined range,\n          // so we get the string and width representing it directly\n          cell = new JoinedCellData(\n            this._workCell,\n            line!.translateToString(true, range[0], range[1]),\n            range[1] - range[0]\n          );\n\n          // Skip over the cells occupied by this range in the loop\n          lastCharX = range[1] - 1;\n        }\n\n        // If the character is an overlapping char and the character to the\n        // right is a space, take ownership of the cell to the right. We skip\n        // this check for joined characters because their rendering likely won't\n        // yield the same result as rendering the last character individually.\n        if (!isJoined && this._isOverlapping(cell)) {\n          // If the character is overlapping, we want to force a re-render on every\n          // frame. This is specifically to work around the case where two\n          // overlaping chars `a` and `b` are adjacent, the cursor is moved to b and a\n          // space is added. Without this, the first half of `b` would never\n          // get removed, and `a` would not re-render because it thinks it's\n          // already in the correct state.\n          // this._state.cache[x][y] = OVERLAP_OWNED_CHAR_DATA;\n          if (lastCharX < line!.length - 1 && line!.getCodePoint(lastCharX + 1) === NULL_CELL_CODE) {\n            // patch width to 2\n            cell.content &= ~Content.WIDTH_MASK;\n            cell.content |= 2 << Content.WIDTH_SHIFT;\n            // this._clearChar(x + 1, y);\n            // The overlapping char's char data will force a clear and render when the\n            // overlapping char is no longer to the left of the character and also when\n            // the space changes to another character.\n            // this._state.cache[x + 1][y] = OVERLAP_OWNED_CHAR_DATA;\n          }\n        }\n\n        callback(\n          cell,\n          x,\n          y\n        );\n\n        x = lastCharX;\n      }\n    }\n  }\n\n  /**\n   * Draws the background for a specified range of columns. Tries to batch adjacent cells of the\n   * same color together to reduce draw calls.\n   */\n  private _drawBackground(firstRow: number, lastRow: number): void {\n    const ctx = this._ctx;\n    const cols = this._bufferService.cols;\n    let startX: number = 0;\n    let startY: number = 0;\n    let prevFillStyle: string | null = null;\n\n    ctx.save();\n\n    this._forEachCell(firstRow, lastRow, (cell, x, y) => {\n      // libvte and xterm both draw the background (but not foreground) of invisible characters,\n      // so we should too.\n      let nextFillStyle = null; // null represents default background color\n\n      if (cell.isInverse()) {\n        if (cell.isFgDefault()) {\n          nextFillStyle = this._colors.foreground.css;\n        } else if (cell.isFgRGB()) {\n          nextFillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n        } else {\n          nextFillStyle = this._colors.ansi[cell.getFgColor()].css;\n        }\n      } else if (cell.isBgRGB()) {\n        nextFillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n      } else if (cell.isBgPalette()) {\n        nextFillStyle = this._colors.ansi[cell.getBgColor()].css;\n      }\n\n      if (prevFillStyle === null) {\n        // This is either the first iteration, or the default background was set. Either way, we\n        // don't need to draw anything.\n        startX = x;\n        startY = y;\n      }\n\n      if (y !== startY) {\n        // our row changed, draw the previous row\n        ctx.fillStyle = prevFillStyle || '';\n        this._fillCells(startX, startY, cols - startX, 1);\n        startX = x;\n        startY = y;\n      } else if (prevFillStyle !== nextFillStyle) {\n        // our color changed, draw the previous characters in this row\n        ctx.fillStyle = prevFillStyle || '';\n        this._fillCells(startX, startY, x - startX, 1);\n        startX = x;\n        startY = y;\n      }\n\n      prevFillStyle = nextFillStyle;\n    });\n\n    // flush the last color we encountered\n    if (prevFillStyle !== null) {\n      ctx.fillStyle = prevFillStyle;\n      this._fillCells(startX, startY, cols - startX, 1);\n    }\n\n    ctx.restore();\n  }\n\n  private _drawForeground(firstRow: number, lastRow: number): void {\n    this._forEachCell(firstRow, lastRow, (cell, x, y) => {\n      if (cell.isInvisible()) {\n        return;\n      }\n      this._drawChars(cell, x, y);\n      if (cell.isUnderline() || cell.isStrikethrough()) {\n        this._ctx.save();\n\n        if (cell.isInverse()) {\n          if (cell.isBgDefault()) {\n            this._ctx.fillStyle = this._colors.background.css;\n          } else if (cell.isBgRGB()) {\n            this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getBgColor()).join(',')})`;\n          } else {\n            let bg = cell.getBgColor();\n            if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {\n              bg += 8;\n            }\n            this._ctx.fillStyle = this._colors.ansi[bg].css;\n          }\n        } else {\n          if (cell.isFgDefault()) {\n            this._ctx.fillStyle = this._colors.foreground.css;\n          } else if (cell.isFgRGB()) {\n            this._ctx.fillStyle = `rgb(${AttributeData.toColorRGB(cell.getFgColor()).join(',')})`;\n          } else {\n            let fg = cell.getFgColor();\n            if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n              fg += 8;\n            }\n            this._ctx.fillStyle = this._colors.ansi[fg].css;\n          }\n        }\n\n        if (cell.isStrikethrough()) {\n          this._fillMiddleLineAtCells(x, y, cell.getWidth());\n        }\n        if (cell.isUnderline()) {\n          this._fillBottomLineAtCells(x, y, cell.getWidth());\n        }\n        this._ctx.restore();\n      }\n    });\n  }\n\n  public onGridChanged(firstRow: number, lastRow: number): void {\n    // Resize has not been called yet\n    if (this._state.cache.length === 0) {\n      return;\n    }\n\n    if (this._charAtlas) {\n      this._charAtlas.beginFrame();\n    }\n\n    this._clearCells(0, firstRow, this._bufferService.cols, lastRow - firstRow + 1);\n    this._drawBackground(firstRow, lastRow);\n    this._drawForeground(firstRow, lastRow);\n  }\n\n  public onOptionsChanged(): void {\n    this._setTransparency(this._optionsService.options.allowTransparency);\n  }\n\n  /**\n   * Whether a character is overlapping to the next cell.\n   */\n  private _isOverlapping(cell: ICellData): boolean {\n    // Only single cell characters can be overlapping, rendering issues can\n    // occur without this check\n    if (cell.getWidth() !== 1) {\n      return false;\n    }\n\n    // We assume that any ascii character will not overlap\n    if (cell.getCode() < 256) {\n      return false;\n    }\n\n    const chars = cell.getChars();\n\n    // Deliver from cache if available\n    if (this._characterOverlapCache.hasOwnProperty(chars)) {\n      return this._characterOverlapCache[chars];\n    }\n\n    // Setup the font\n    this._ctx.save();\n    this._ctx.font = this._characterFont;\n\n    // Measure the width of the character, but Math.floor it\n    // because that is what the renderer does when it calculates\n    // the character dimensions we are comparing against\n    const overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n\n    // Restore the original context\n    this._ctx.restore();\n\n    // Cache and return\n    this._characterOverlapCache[chars] = overlaps;\n    return overlaps;\n  }\n\n  /**\n   * Clear the charcater at the cell specified.\n   * @param x The column of the char.\n   * @param y The row of the char.\n   */\n  // private _clearChar(x: number, y: number): void {\n  //   let colsToClear = 1;\n  //   // Clear the adjacent character if it was wide\n  //   const state = this._state.cache[x][y];\n  //   if (state && state[CHAR_DATA_WIDTH_INDEX] === 2) {\n  //     colsToClear = 2;\n  //   }\n  //   this.clearCells(x, y, colsToClear, 1);\n  // }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IGlyphIdentifier } from 'browser/renderer/atlas/Types';\nimport { IDisposable } from 'common/Types';\n\nexport abstract class BaseCharAtlas implements IDisposable {\n  private _didWarmUp: boolean = false;\n\n  public dispose(): void { }\n\n  /**\n   * Perform any work needed to warm the cache before it can be used. May be called multiple times.\n   * Implement _doWarmUp instead if you only want to get called once.\n   */\n  public warmUp(): void {\n    if (!this._didWarmUp) {\n      this._doWarmUp();\n      this._didWarmUp = true;\n    }\n  }\n\n  /**\n   * Perform any work needed to warm the cache before it can be used. Used by the default\n   * implementation of warmUp(), and will only be called once.\n   */\n  private _doWarmUp(): void { }\n\n  public clear(): void { }\n\n  /**\n   * Called when we start drawing a new frame.\n   *\n   * TODO: We rely on this getting called by TextRenderLayer. This should really be called by\n   * Renderer instead, but we need to make Renderer the source-of-truth for the char atlas, instead\n   * of BaseRenderLayer.\n   */\n  public beginFrame(): void { }\n\n  /**\n   * May be called before warmUp finishes, however it is okay for the implementation to\n   * do nothing and return false in that case.\n   *\n   * @param ctx Where to draw the character onto.\n   * @param glyph Information about what to draw\n   * @param x The position on the context to start drawing at\n   * @param y The position on the context to start drawing at\n   * @returns The success state. True if we drew the character.\n   */\n  public abstract draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { generateConfig, configEquals } from 'browser/renderer/atlas/CharAtlasUtils';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { DynamicCharAtlas } from 'browser/renderer/atlas/DynamicCharAtlas';\nimport { ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { IColorSet } from 'browser/Types';\nimport { ITerminalOptions } from 'common/services/Services';\n\ninterface ICharAtlasCacheEntry {\n  atlas: BaseCharAtlas;\n  config: ICharAtlasConfig;\n  // N.B. This implementation potentially holds onto copies of the terminal forever, so\n  // this may cause memory leaks.\n  ownedBy: number[];\n}\n\nconst charAtlasCache: ICharAtlasCacheEntry[] = [];\n\n/**\n * Acquires a char atlas, either generating a new one or returning an existing\n * one that is in use by another terminal.\n */\nexport function acquireCharAtlas(\n  options: ITerminalOptions,\n  rendererId: number,\n  colors: IColorSet,\n  scaledCharWidth: number,\n  scaledCharHeight: number\n): BaseCharAtlas {\n  const newConfig = generateConfig(scaledCharWidth, scaledCharHeight, options, colors);\n\n  // Check to see if the renderer already owns this config\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    const ownedByIndex = entry.ownedBy.indexOf(rendererId);\n    if (ownedByIndex >= 0) {\n      if (configEquals(entry.config, newConfig)) {\n        return entry.atlas;\n      }\n      // The configs differ, release the renderer from the entry\n      if (entry.ownedBy.length === 1) {\n        entry.atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        entry.ownedBy.splice(ownedByIndex, 1);\n      }\n      break;\n    }\n  }\n\n  // Try match a char atlas from the cache\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    if (configEquals(entry.config, newConfig)) {\n      // Add the renderer to the cache entry and return\n      entry.ownedBy.push(rendererId);\n      return entry.atlas;\n    }\n  }\n\n  const newEntry: ICharAtlasCacheEntry = {\n    atlas: new DynamicCharAtlas(\n      document,\n      newConfig\n    ),\n    config: newConfig,\n    ownedBy: [rendererId]\n  };\n  charAtlasCache.push(newEntry);\n  return newEntry.atlas;\n}\n\n/**\n * Removes a terminal reference from the cache, allowing its memory to be freed.\n */\nexport function removeTerminalFromCache(rendererId: number): void {\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const index = charAtlasCache[i].ownedBy.indexOf(rendererId);\n    if (index !== -1) {\n      if (charAtlasCache[i].ownedBy.length === 1) {\n        // Remove the cache entry if it's the only renderer\n        charAtlasCache[i].atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        // Remove the reference from the cache entry\n        charAtlasCache[i].ownedBy.splice(index, 1);\n      }\n      break;\n    }\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { DEFAULT_COLOR } from 'common/buffer/Constants';\nimport { IColorSet, IPartialColorSet } from 'browser/Types';\nimport { ITerminalOptions } from 'common/services/Services';\n\nexport function generateConfig(scaledCharWidth: number, scaledCharHeight: number, options: ITerminalOptions, colors: IColorSet): ICharAtlasConfig {\n  // null out some fields that don't matter\n  const clonedColors: IPartialColorSet = {\n    foreground: colors.foreground,\n    background: colors.background,\n    cursor: undefined,\n    cursorAccent: undefined,\n    selection: undefined,\n    ansi: [...colors.ansi]\n  };\n  return {\n    devicePixelRatio: window.devicePixelRatio,\n    scaledCharWidth,\n    scaledCharHeight,\n    fontFamily: options.fontFamily,\n    fontSize: options.fontSize,\n    fontWeight: options.fontWeight,\n    fontWeightBold: options.fontWeightBold,\n    allowTransparency: options.allowTransparency,\n    colors: clonedColors\n  };\n}\n\nexport function configEquals(a: ICharAtlasConfig, b: ICharAtlasConfig): boolean {\n  for (let i = 0; i < a.colors.ansi.length; i++) {\n    if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n      return false;\n    }\n  }\n  return a.devicePixelRatio === b.devicePixelRatio &&\n      a.fontFamily === b.fontFamily &&\n      a.fontSize === b.fontSize &&\n      a.fontWeight === b.fontWeight &&\n      a.fontWeightBold === b.fontWeightBold &&\n      a.allowTransparency === b.allowTransparency &&\n      a.scaledCharWidth === b.scaledCharWidth &&\n      a.scaledCharHeight === b.scaledCharHeight &&\n      a.colors.foreground === b.colors.foreground &&\n      a.colors.background === b.colors.background;\n}\n\nexport function is256Color(colorCode: number): boolean {\n  return colorCode < DEFAULT_COLOR;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { isFirefox } from 'common/Platform';\n\nexport const INVERTED_DEFAULT_COLOR = 257;\nexport const DIM_OPACITY = 0.5;\n// The text baseline is set conditionally by browser. Using 'ideographic' for Firefox would\n// result in truncated text (Issue 3353). Using 'bottom' for Chrome would result in slightly\n// unaligned Powerline fonts (PR 3356#issuecomment-850928179).\nexport const TEXT_BASELINE: CanvasTextBaseline = isFirefox ? 'bottom' : 'ideographic';\n\nexport const CHAR_ATLAS_CELL_SPACING = 1;\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { DIM_OPACITY, INVERTED_DEFAULT_COLOR, TEXT_BASELINE } from 'browser/renderer/atlas/Constants';\nimport { IGlyphIdentifier, ICharAtlasConfig } from 'browser/renderer/atlas/Types';\nimport { BaseCharAtlas } from 'browser/renderer/atlas/BaseCharAtlas';\nimport { DEFAULT_ANSI_COLORS } from 'browser/ColorManager';\nimport { LRUMap } from 'browser/renderer/atlas/LRUMap';\nimport { isFirefox, isSafari } from 'common/Platform';\nimport { IColor } from 'browser/Types';\nimport { throwIfFalsy } from 'browser/renderer/RendererUtils';\nimport { color } from 'browser/Color';\n\n// In practice we're probably never going to exhaust a texture this large. For debugging purposes,\n// however, it can be useful to set this to a really tiny value, to verify that LRU eviction works.\nconst TEXTURE_WIDTH = 1024;\nconst TEXTURE_HEIGHT = 1024;\n\nconst TRANSPARENT_COLOR = {\n  css: 'rgba(0, 0, 0, 0)',\n  rgba: 0\n};\n\n// Drawing to the cache is expensive: If we have to draw more than this number of glyphs to the\n// cache in a single frame, give up on trying to cache anything else, and try to finish the current\n// frame ASAP.\n//\n// This helps to limit the amount of damage a program can do when it would otherwise thrash the\n// cache.\nconst FRAME_CACHE_DRAW_LIMIT = 100;\n\n/**\n * The number of milliseconds to wait before generating the ImageBitmap, this is to debounce/batch\n * the operation as window.createImageBitmap is asynchronous.\n */\nconst GLYPH_BITMAP_COMMIT_DELAY = 100;\n\ninterface IGlyphCacheValue {\n  index: number;\n  isEmpty: boolean;\n  inBitmap: boolean;\n}\n\nexport function getGlyphCacheKey(glyph: IGlyphIdentifier): number {\n  // Note that this only returns a valid key when code < 256\n  // Layout:\n  // 0b00000000000000000000000000000001: italic (1)\n  // 0b00000000000000000000000000000010: dim (1)\n  // 0b00000000000000000000000000000100: bold (1)\n  // 0b00000000000000000000111111111000: fg (9)\n  // 0b00000000000111111111000000000000: bg (9)\n  // 0b00011111111000000000000000000000: code (8)\n  // 0b11100000000000000000000000000000: unused (3)\n  return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\n\nexport class DynamicCharAtlas extends BaseCharAtlas {\n  // An ordered map that we're using to keep track of where each glyph is in the atlas texture.\n  // It's ordered so that we can determine when to remove the old entries.\n  private _cacheMap: LRUMap<IGlyphCacheValue>;\n\n  // The texture that the atlas is drawn to\n  private _cacheCanvas: HTMLCanvasElement;\n  private _cacheCtx: CanvasRenderingContext2D;\n\n  // A temporary context that glyphs are drawn to before being transfered to the atlas.\n  private _tmpCtx: CanvasRenderingContext2D;\n\n  // The number of characters stored in the atlas by width/height\n  private _width: number;\n  private _height: number;\n\n  private _drawToCacheCount: number = 0;\n\n  // An array of glyph keys that are waiting on the bitmap to be generated.\n  private _glyphsWaitingOnBitmap: IGlyphCacheValue[] = [];\n\n  // The timeout that is used to batch bitmap generation so it's not requested for every new glyph.\n  private _bitmapCommitTimeout: number | null = null;\n\n  // The bitmap to draw from, this is much faster on other browsers than others.\n  private _bitmap: ImageBitmap | null = null;\n\n  constructor(document: Document, private _config: ICharAtlasConfig) {\n    super();\n    this._cacheCanvas = document.createElement('canvas');\n    this._cacheCanvas.width = TEXTURE_WIDTH;\n    this._cacheCanvas.height = TEXTURE_HEIGHT;\n    // The canvas needs alpha because we use clearColor to convert the background color to alpha.\n    // It might also contain some characters with transparent backgrounds if allowTransparency is\n    // set.\n    this._cacheCtx = throwIfFalsy(this._cacheCanvas.getContext('2d', { alpha: true }));\n\n    const tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = this._config.scaledCharWidth;\n    tmpCanvas.height = this._config.scaledCharHeight;\n    this._tmpCtx = throwIfFalsy(tmpCanvas.getContext('2d', { alpha: this._config.allowTransparency }));\n\n    this._width = Math.floor(TEXTURE_WIDTH / this._config.scaledCharWidth);\n    this._height = Math.floor(TEXTURE_HEIGHT / this._config.scaledCharHeight);\n    const capacity = this._width * this._height;\n    this._cacheMap = new LRUMap(capacity);\n    this._cacheMap.prealloc(capacity);\n\n    // This is useful for debugging\n    // document.body.appendChild(this._cacheCanvas);\n  }\n\n  public dispose(): void {\n    if (this._bitmapCommitTimeout !== null) {\n      window.clearTimeout(this._bitmapCommitTimeout);\n      this._bitmapCommitTimeout = null;\n    }\n  }\n\n  public beginFrame(): void {\n    this._drawToCacheCount = 0;\n  }\n\n  public clear(): void {\n    if (this._cacheMap.size > 0) {\n      const capacity = this._width * this._height;\n      this._cacheMap = new LRUMap(capacity);\n      this._cacheMap.prealloc(capacity);\n    }\n    this._cacheCtx.clearRect(0, 0, TEXTURE_WIDTH, TEXTURE_HEIGHT);\n    this._tmpCtx.clearRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean {\n    // Space is always an empty cell, special case this as it's so common\n    if (glyph.code === 32) {\n      return true;\n    }\n\n    // Exit early for uncachable glyphs\n    if (!this._canCache(glyph)) {\n      return false;\n    }\n\n    const glyphKey = getGlyphCacheKey(glyph);\n    const cacheValue = this._cacheMap.get(glyphKey);\n    if (cacheValue !== null && cacheValue !== undefined) {\n      this._drawFromCache(ctx, cacheValue, x, y);\n      return true;\n    }\n    if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n      let index;\n      if (this._cacheMap.size < this._cacheMap.capacity) {\n        index = this._cacheMap.size;\n      } else {\n        // we're out of space, so our call to set will delete this item\n        index = this._cacheMap.peek()!.index;\n      }\n      const cacheValue = this._drawToCache(glyph, index);\n      this._cacheMap.set(glyphKey, cacheValue);\n      this._drawFromCache(ctx, cacheValue, x, y);\n      return true;\n    }\n    return false;\n  }\n\n  private _canCache(glyph: IGlyphIdentifier): boolean {\n    // Only cache ascii and extended characters for now, to be safe. In the future, we could do\n    // something more complicated to determine the expected width of a character.\n    //\n    // If we switch the renderer over to webgl at some point, we may be able to use blending modes\n    // to draw overlapping glyphs from the atlas:\n    // https://github.com/servo/webrender/issues/464#issuecomment-255632875\n    // https://webglfundamentals.org/webgl/lessons/webgl-text-texture.html\n    return glyph.code < 256;\n  }\n\n  private _toCoordinateX(index: number): number {\n    return (index % this._width) * this._config.scaledCharWidth;\n  }\n\n  private _toCoordinateY(index: number): number {\n    return Math.floor(index / this._width) * this._config.scaledCharHeight;\n  }\n\n  private _drawFromCache(\n    ctx: CanvasRenderingContext2D,\n    cacheValue: IGlyphCacheValue,\n    x: number,\n    y: number\n  ): void {\n    // We don't actually need to do anything if this is whitespace.\n    if (cacheValue.isEmpty) {\n      return;\n    }\n    const cacheX = this._toCoordinateX(cacheValue.index);\n    const cacheY = this._toCoordinateY(cacheValue.index);\n    ctx.drawImage(\n      cacheValue.inBitmap ? this._bitmap! : this._cacheCanvas,\n      cacheX,\n      cacheY,\n      this._config.scaledCharWidth,\n      this._config.scaledCharHeight,\n      x,\n      y,\n      this._config.scaledCharWidth,\n      this._config.scaledCharHeight\n    );\n  }\n\n  private _getColorFromAnsiIndex(idx: number): IColor {\n    if (idx < this._config.colors.ansi.length) {\n      return this._config.colors.ansi[idx];\n    }\n    return DEFAULT_ANSI_COLORS[idx];\n  }\n\n  private _getBackgroundColor(glyph: IGlyphIdentifier): IColor {\n    if (this._config.allowTransparency) {\n      // The background color might have some transparency, so we need to render it as fully\n      // transparent in the atlas. Otherwise we'd end up drawing the transparent background twice\n      // around the anti-aliased edges of the glyph, and it would look too dark.\n      return TRANSPARENT_COLOR;\n    }\n    if (glyph.bg === INVERTED_DEFAULT_COLOR) {\n      return this._config.colors.foreground;\n    }\n    if (glyph.bg < 256) {\n      return this._getColorFromAnsiIndex(glyph.bg);\n    }\n    return this._config.colors.background;\n  }\n\n  private _getForegroundColor(glyph: IGlyphIdentifier): IColor {\n    if (glyph.fg === INVERTED_DEFAULT_COLOR) {\n      return color.opaque(this._config.colors.background);\n    }\n    if (glyph.fg < 256) {\n      // 256 color support\n      return this._getColorFromAnsiIndex(glyph.fg);\n    }\n    return this._config.colors.foreground;\n  }\n\n  // TODO: We do this (or something similar) in multiple places. We should split this off\n  // into a shared function.\n  private _drawToCache(glyph: IGlyphIdentifier, index: number): IGlyphCacheValue {\n    this._drawToCacheCount++;\n\n    this._tmpCtx.save();\n\n    // draw the background\n    const backgroundColor = this._getBackgroundColor(glyph);\n    // Use a 'copy' composite operation to clear any existing glyph out of _tmpCtxWithAlpha, regardless of\n    // transparency in backgroundColor\n    this._tmpCtx.globalCompositeOperation = 'copy';\n    this._tmpCtx.fillStyle = backgroundColor.css;\n    this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    this._tmpCtx.globalCompositeOperation = 'source-over';\n\n    // draw the foreground/glyph\n    const fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n    const fontStyle = glyph.italic ? 'italic' : '';\n    this._tmpCtx.font =\n      `${fontStyle} ${fontWeight} ${this._config.fontSize * this._config.devicePixelRatio}px ${this._config.fontFamily}`;\n    this._tmpCtx.textBaseline = TEXT_BASELINE;\n\n    this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n\n    // Apply alpha to dim the character\n    if (glyph.dim) {\n      this._tmpCtx.globalAlpha = DIM_OPACITY;\n    }\n    // Draw the character\n    this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight);\n\n    // clear the background from the character to avoid issues with drawing over the previous\n    // character if it extends past it's bounds\n    let imageData = this._tmpCtx.getImageData(\n      0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight\n    );\n    let isEmpty = false;\n    if (!this._config.allowTransparency) {\n      isEmpty = clearColor(imageData, backgroundColor);\n    }\n\n    // If this charcater is underscore and empty, shift it up until it is visible, try for a maximum\n    // of 5 pixels.\n    if (isEmpty && glyph.chars === '_' && !this._config.allowTransparency) {\n      for (let offset = 1; offset <= 5; offset++) {\n        // Draw the character\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight - offset);\n\n        // clear the background from the character to avoid issues with drawing over the previous\n        // character if it extends past it's bounds\n        imageData = this._tmpCtx.getImageData(\n          0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight\n        );\n        isEmpty = clearColor(imageData, backgroundColor);\n        if (!isEmpty) {\n          break;\n        }\n      }\n    }\n\n    this._tmpCtx.restore();\n\n    // copy the data from imageData to _cacheCanvas\n    const x = this._toCoordinateX(index);\n    const y = this._toCoordinateY(index);\n    // putImageData doesn't do any blending, so it will overwrite any existing cache entry for us\n    this._cacheCtx.putImageData(imageData, x, y);\n\n    // Add the glyph and queue it to the bitmap (if the browser supports it)\n    const cacheValue = {\n      index,\n      isEmpty,\n      inBitmap: false\n    };\n    this._addGlyphToBitmap(cacheValue);\n\n    return cacheValue;\n  }\n\n  private _addGlyphToBitmap(cacheValue: IGlyphCacheValue): void {\n    // Support is patchy for createImageBitmap at the moment, pass a canvas back\n    // if support is lacking as drawImage works there too. Firefox is also\n    // included here as ImageBitmap appears both buggy and has horrible\n    // performance (tested on v55).\n    if (!('createImageBitmap' in window) || isFirefox || isSafari) {\n      return;\n    }\n\n    // Add the glyph to the queue\n    this._glyphsWaitingOnBitmap.push(cacheValue);\n\n    // Check if bitmap generation timeout already exists\n    if (this._bitmapCommitTimeout !== null) {\n      return;\n    }\n\n    this._bitmapCommitTimeout = window.setTimeout(() => this._generateBitmap(), GLYPH_BITMAP_COMMIT_DELAY);\n  }\n\n  private _generateBitmap(): void {\n    const glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n    this._glyphsWaitingOnBitmap = [];\n    window.createImageBitmap(this._cacheCanvas).then(bitmap => {\n      // Set bitmap\n      this._bitmap = bitmap;\n\n      // Mark all new glyphs as in bitmap, excluding glyphs that came in after\n      // the bitmap was requested\n      for (let i = 0; i < glyphsMovingToBitmap.length; i++) {\n        const value = glyphsMovingToBitmap[i];\n        // It doesn't matter if the value was already evicted, it will be\n        // released from memory after this block if so.\n        value.inBitmap = true;\n      }\n    });\n    this._bitmapCommitTimeout = null;\n  }\n}\n\n// This is used for debugging the renderer, just swap out `new DynamicCharAtlas` with\n// `new NoneCharAtlas`.\nexport class NoneCharAtlas extends BaseCharAtlas {\n  constructor(document: Document, config: ICharAtlasConfig) {\n    super();\n  }\n\n  public draw(\n    ctx: CanvasRenderingContext2D,\n    glyph: IGlyphIdentifier,\n    x: number,\n    y: number\n  ): boolean {\n    return false;\n  }\n}\n\n/**\n * Makes a partiicular rgb color in an ImageData completely transparent.\n * @returns True if the result is \"empty\", meaning all pixels are fully transparent.\n */\nfunction clearColor(imageData: ImageData, color: IColor): boolean {\n  let isEmpty = true;\n  const r = color.rgba >>> 24;\n  const g = color.rgba >>> 16 & 0xFF;\n  const b = color.rgba >>> 8 & 0xFF;\n  for (let offset = 0; offset < imageData.data.length; offset += 4) {\n    if (imageData.data[offset] === r &&\n        imageData.data[offset + 1] === g &&\n        imageData.data[offset + 2] === b) {\n      imageData.data[offset + 3] = 0;\n    } else {\n      isEmpty = false;\n    }\n  }\n  return isEmpty;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ninterface ILinkedListNode<T> {\n  prev: ILinkedListNode<T> | null;\n  next: ILinkedListNode<T> | null;\n  key: number | null;\n  value: T | null;\n}\n\nexport class LRUMap<T> {\n  private _map: { [key: number]: ILinkedListNode<T> } = {};\n  private _head: ILinkedListNode<T> | null = null;\n  private _tail: ILinkedListNode<T> | null = null;\n  private _nodePool: ILinkedListNode<T>[] = [];\n  public size: number = 0;\n\n  constructor(public capacity: number) { }\n\n  private _unlinkNode(node: ILinkedListNode<T>): void {\n    const prev = node.prev;\n    const next = node.next;\n    if (node === this._head) {\n      this._head = next;\n    }\n    if (node === this._tail) {\n      this._tail = prev;\n    }\n    if (prev !== null) {\n      prev.next = next;\n    }\n    if (next !== null) {\n      next.prev = prev;\n    }\n  }\n\n  private _appendNode(node: ILinkedListNode<T>): void {\n    const tail = this._tail;\n    if (tail !== null) {\n      tail.next = node;\n    }\n    node.prev = tail;\n    node.next = null;\n    this._tail = node;\n    if (this._head === null) {\n      this._head = node;\n    }\n  }\n\n  /**\n   * Preallocate a bunch of linked-list nodes. Allocating these nodes ahead of time means that\n   * they're more likely to live next to each other in memory, which seems to improve performance.\n   *\n   * Each empty object only consumes about 60 bytes of memory, so this is pretty cheap, even for\n   * large maps.\n   */\n  public prealloc(count: number): void {\n    const nodePool = this._nodePool;\n    for (let i = 0; i < count; i++) {\n      nodePool.push({\n        prev: null,\n        next: null,\n        key: null,\n        value: null\n      });\n    }\n  }\n\n  public get(key: number): T | null {\n    // This is unsafe: We're assuming our keyspace doesn't overlap with Object.prototype. However,\n    // it's faster than calling hasOwnProperty, and in our case, it would never overlap.\n    const node = this._map[key];\n    if (node !== undefined) {\n      this._unlinkNode(node);\n      this._appendNode(node);\n      return node.value;\n    }\n    return null;\n  }\n\n  /**\n   * Gets a value from a key without marking it as the most recently used item.\n   */\n  public peekValue(key: number): T | null {\n    const node = this._map[key];\n    if (node !== undefined) {\n      return node.value;\n    }\n    return null;\n  }\n\n  public peek(): T | null {\n    const head = this._head;\n    return head === null ? null : head.value;\n  }\n\n  public set(key: number, value: T): void {\n    // This is unsafe: See note above.\n    let node = this._map[key];\n    if (node !== undefined) {\n      // already exists, we just need to mutate it and move it to the end of the list\n      node = this._map[key];\n      this._unlinkNode(node);\n      node.value = value;\n    } else if (this.size >= this.capacity) {\n      // we're out of space: recycle the head node, move it to the tail\n      node = this._head!;\n      this._unlinkNode(node);\n      delete this._map[node.key!];\n      node.key = key;\n      node.value = value;\n      this._map[key] = node;\n    } else {\n      // make a new element\n      const nodePool = this._nodePool;\n      if (nodePool.length > 0) {\n        // use a preallocated node if we can\n        node = nodePool.pop()!;\n        node.key = key;\n        node.value = value;\n      } else {\n        node = {\n          prev: null,\n          next: null,\n          key,\n          value\n        };\n      }\n      this._map[key] = node;\n      this.size++;\n    }\n    this._appendNode(node);\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderer, IRenderDimensions, IRequestRedrawEvent } from 'browser/renderer/Types';\nimport { BOLD_CLASS, ITALIC_CLASS, CURSOR_CLASS, CURSOR_STYLE_BLOCK_CLASS, CURSOR_BLINK_CLASS, CURSOR_STYLE_BAR_CLASS, CURSOR_STYLE_UNDERLINE_CLASS, DomRendererRowFactory } from 'browser/renderer/dom/DomRendererRowFactory';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { Disposable } from 'common/Lifecycle';\nimport { IColorSet, ILinkifierEvent, ILinkifier, ILinkifier2 } from 'browser/Types';\nimport { ICharSizeService } from 'browser/services/Services';\nimport { IOptionsService, IBufferService, IInstantiationService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { color } from 'browser/Color';\nimport { removeElementFromParent } from 'browser/Dom';\n\nconst TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nconst ROW_CONTAINER_CLASS = 'xterm-rows';\nconst FG_CLASS_PREFIX = 'xterm-fg-';\nconst BG_CLASS_PREFIX = 'xterm-bg-';\nconst FOCUS_CLASS = 'xterm-focus';\nconst SELECTION_CLASS = 'xterm-selection';\n\nlet nextTerminalId = 1;\n\n/**\n * A fallback renderer for when canvas is slow. This is not meant to be\n * particularly fast or feature complete, more just stable and usable for when\n * canvas is not an option.\n */\nexport class DomRenderer extends Disposable implements IRenderer {\n  private _rowFactory: DomRendererRowFactory;\n  private _terminalClass: number = nextTerminalId++;\n\n  private _themeStyleElement!: HTMLStyleElement;\n  private _dimensionsStyleElement!: HTMLStyleElement;\n  private _rowContainer: HTMLElement;\n  private _rowElements: HTMLElement[] = [];\n  private _selectionContainer: HTMLElement;\n\n  public dimensions: IRenderDimensions;\n\n  public get onRequestRedraw(): IEvent<IRequestRedrawEvent> { return new EventEmitter<IRequestRedrawEvent>().event; }\n\n  constructor(\n    private _colors: IColorSet,\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    private readonly _viewportElement: HTMLElement,\n    private readonly _linkifier: ILinkifier,\n    private readonly _linkifier2: ILinkifier2,\n    @IInstantiationService instantiationService: IInstantiationService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this._rowContainer = document.createElement('div');\n    this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n    this._rowContainer.style.lineHeight = 'normal';\n    this._rowContainer.setAttribute('aria-hidden', 'true');\n    this._refreshRowElements(this._bufferService.cols, this._bufferService.rows);\n    this._selectionContainer = document.createElement('div');\n    this._selectionContainer.classList.add(SELECTION_CLASS);\n    this._selectionContainer.setAttribute('aria-hidden', 'true');\n\n    this.dimensions = {\n      scaledCharWidth: 0,\n      scaledCharHeight: 0,\n      scaledCellWidth: 0,\n      scaledCellHeight: 0,\n      scaledCharLeft: 0,\n      scaledCharTop: 0,\n      scaledCanvasWidth: 0,\n      scaledCanvasHeight: 0,\n      canvasWidth: 0,\n      canvasHeight: 0,\n      actualCellWidth: 0,\n      actualCellHeight: 0\n    };\n    this._updateDimensions();\n    this._injectCss();\n\n    this._rowFactory = instantiationService.createInstance(DomRendererRowFactory, document, this._colors);\n\n    this._element.classList.add(TERMINAL_CLASS_PREFIX + this._terminalClass);\n    this._screenElement.appendChild(this._rowContainer);\n    this._screenElement.appendChild(this._selectionContainer);\n\n    this._linkifier.onShowLinkUnderline(e => this._onLinkHover(e));\n    this._linkifier.onHideLinkUnderline(e => this._onLinkLeave(e));\n\n    this._linkifier2.onShowLinkUnderline(e => this._onLinkHover(e));\n    this._linkifier2.onHideLinkUnderline(e => this._onLinkLeave(e));\n  }\n\n  public dispose(): void {\n    this._element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n\n    // Outside influences such as React unmounts may manipulate the DOM before our disposal.\n    // https://github.com/xtermjs/xterm.js/issues/2960\n    removeElementFromParent(this._rowContainer, this._selectionContainer, this._themeStyleElement, this._dimensionsStyleElement);\n\n    super.dispose();\n  }\n\n  private _updateDimensions(): void {\n    this.dimensions.scaledCharWidth = this._charSizeService.width * window.devicePixelRatio;\n    this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);\n    this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);\n    this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);\n    this.dimensions.scaledCharLeft = 0;\n    this.dimensions.scaledCharTop = 0;\n    this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._bufferService.cols;\n    this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._bufferService.rows;\n    this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n    this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n    this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;\n    this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;\n\n    for (const element of this._rowElements) {\n      element.style.width = `${this.dimensions.canvasWidth}px`;\n      element.style.height = `${this.dimensions.actualCellHeight}px`;\n      element.style.lineHeight = `${this.dimensions.actualCellHeight}px`;\n      // Make sure rows don't overflow onto following row\n      element.style.overflow = 'hidden';\n    }\n\n    if (!this._dimensionsStyleElement) {\n      this._dimensionsStyleElement = document.createElement('style');\n      this._screenElement.appendChild(this._dimensionsStyleElement);\n    }\n\n    const styles =\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} span {` +\n      ` display: inline-block;` +\n      ` height: 100%;` +\n      ` vertical-align: top;` +\n      ` width: ${this.dimensions.actualCellWidth}px` +\n      `}`;\n\n    this._dimensionsStyleElement.textContent = styles;\n\n    this._selectionContainer.style.height = this._viewportElement.style.height;\n    this._screenElement.style.width = `${this.dimensions.canvasWidth}px`;\n    this._screenElement.style.height = `${this.dimensions.canvasHeight}px`;\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n    this._injectCss();\n  }\n\n  private _injectCss(): void {\n    if (!this._themeStyleElement) {\n      this._themeStyleElement = document.createElement('style');\n      this._screenElement.appendChild(this._themeStyleElement);\n    }\n\n    // Base CSS\n    let styles =\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} {` +\n      ` color: ${this._colors.foreground.css};` +\n      ` font-family: ${this._optionsService.options.fontFamily};` +\n      ` font-size: ${this._optionsService.options.fontSize}px;` +\n      `}`;\n    // Text styles\n    styles +=\n      `${this._terminalSelector} span:not(.${BOLD_CLASS}) {` +\n      ` font-weight: ${this._optionsService.options.fontWeight};` +\n      `}` +\n      `${this._terminalSelector} span.${BOLD_CLASS} {` +\n      ` font-weight: ${this._optionsService.options.fontWeightBold};` +\n      `}` +\n      `${this._terminalSelector} span.${ITALIC_CLASS} {` +\n      ` font-style: italic;` +\n      `}`;\n    // Blink animation\n    styles +=\n      `@keyframes blink_box_shadow` + `_` + this._terminalClass + ` {` +\n      ` 50% {` +\n      `  box-shadow: none;` +\n      ` }` +\n      `}`;\n    styles +=\n      `@keyframes blink_block` + `_` + this._terminalClass + ` {` +\n      ` 0% {` +\n      `  background-color: ${this._colors.cursor.css};` +\n      `  color: ${this._colors.cursorAccent.css};` +\n      ` }` +\n      ` 50% {` +\n      `  background-color: ${this._colors.cursorAccent.css};` +\n      `  color: ${this._colors.cursor.css};` +\n      ` }` +\n      `}`;\n    // Cursor\n    styles +=\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}:not(.${FOCUS_CLASS}) .${CURSOR_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` outline: 1px solid ${this._colors.cursor.css};` +\n      ` outline-offset: -1px;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_BLINK_CLASS}:not(.${CURSOR_STYLE_BLOCK_CLASS}) {` +\n      ` animation: blink_box_shadow` + `_` + this._terminalClass + ` 1s step-end infinite;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_BLINK_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` animation: blink_block` + `_` + this._terminalClass + ` 1s step-end infinite;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS}.${FOCUS_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_BLOCK_CLASS} {` +\n      ` background-color: ${this._colors.cursor.css};` +\n      ` color: ${this._colors.cursorAccent.css};` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_BAR_CLASS} {` +\n      ` box-shadow: ${this._optionsService.options.cursorWidth}px 0 0 ${this._colors.cursor.css} inset;` +\n      `}` +\n      `${this._terminalSelector} .${ROW_CONTAINER_CLASS} .${CURSOR_CLASS}.${CURSOR_STYLE_UNDERLINE_CLASS} {` +\n      ` box-shadow: 0 -1px 0 ${this._colors.cursor.css} inset;` +\n      `}`;\n    // Selection\n    styles +=\n      `${this._terminalSelector} .${SELECTION_CLASS} {` +\n      ` position: absolute;` +\n      ` top: 0;` +\n      ` left: 0;` +\n      ` z-index: 1;` +\n      ` pointer-events: none;` +\n      `}` +\n      `${this._terminalSelector} .${SELECTION_CLASS} div {` +\n      ` position: absolute;` +\n      ` background-color: ${this._colors.selectionTransparent.css};` +\n      `}`;\n    // Colors\n    this._colors.ansi.forEach((c, i) => {\n      styles +=\n        `${this._terminalSelector} .${FG_CLASS_PREFIX}${i} { color: ${c.css}; }` +\n        `${this._terminalSelector} .${BG_CLASS_PREFIX}${i} { background-color: ${c.css}; }`;\n    });\n    styles +=\n      `${this._terminalSelector} .${FG_CLASS_PREFIX}${INVERTED_DEFAULT_COLOR} { color: ${color.opaque(this._colors.background).css}; }` +\n      `${this._terminalSelector} .${BG_CLASS_PREFIX}${INVERTED_DEFAULT_COLOR} { background-color: ${this._colors.foreground.css}; }`;\n\n    this._themeStyleElement.textContent = styles;\n  }\n\n  public onDevicePixelRatioChange(): void {\n    this._updateDimensions();\n  }\n\n  private _refreshRowElements(cols: number, rows: number): void {\n    // Add missing elements\n    for (let i = this._rowElements.length; i <= rows; i++) {\n      const row = document.createElement('div');\n      this._rowContainer.appendChild(row);\n      this._rowElements.push(row);\n    }\n    // Remove excess elements\n    while (this._rowElements.length > rows) {\n      this._rowContainer.removeChild(this._rowElements.pop()!);\n    }\n  }\n\n  public onResize(cols: number, rows: number): void {\n    this._refreshRowElements(cols, rows);\n    this._updateDimensions();\n  }\n\n  public onCharSizeChanged(): void {\n    this._updateDimensions();\n  }\n\n  public onBlur(): void {\n    this._rowContainer.classList.remove(FOCUS_CLASS);\n  }\n\n  public onFocus(): void {\n    this._rowContainer.classList.add(FOCUS_CLASS);\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    // Remove all selections\n    while (this._selectionContainer.children.length) {\n      this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n    }\n\n    // Selection does not exist\n    if (!start || !end) {\n      return;\n    }\n\n    // Translate from buffer position to viewport position\n    const viewportStartRow = start[1] - this._bufferService.buffer.ydisp;\n    const viewportEndRow = end[1] - this._bufferService.buffer.ydisp;\n    const viewportCappedStartRow = Math.max(viewportStartRow, 0);\n    const viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);\n\n    // No need to draw the selection\n    if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {\n      return;\n    }\n\n    // Create the selections\n    const documentFragment = document.createDocumentFragment();\n\n    if (columnSelectMode) {\n      documentFragment.appendChild(\n        this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1)\n      );\n    } else {\n      // Draw first row\n      const startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n      const endCol = viewportCappedStartRow === viewportEndRow ? end[0] : this._bufferService.cols;\n      documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n      // Draw middle rows\n      const middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n      documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._bufferService.cols, middleRowsCount));\n      // Draw final row\n      if (viewportCappedStartRow !== viewportCappedEndRow) {\n        // Only draw viewportEndRow if it's not the same as viewporttartRow\n        const endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;\n        documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol));\n      }\n    }\n    this._selectionContainer.appendChild(documentFragment);\n  }\n\n  /**\n   * Creates a selection element at the specified position.\n   * @param row The row of the selection.\n   * @param colStart The start column.\n   * @param colEnd The end columns.\n   */\n  private _createSelectionElement(row: number, colStart: number, colEnd: number, rowCount: number = 1): HTMLElement {\n    const element = document.createElement('div');\n    element.style.height = `${rowCount * this.dimensions.actualCellHeight}px`;\n    element.style.top = `${row * this.dimensions.actualCellHeight}px`;\n    element.style.left = `${colStart * this.dimensions.actualCellWidth}px`;\n    element.style.width = `${this.dimensions.actualCellWidth * (colEnd - colStart)}px`;\n    return element;\n  }\n\n  public onCursorMove(): void {\n    // No-op, the cursor is drawn when rows are drawn\n  }\n\n  public onOptionsChanged(): void {\n    // Force a refresh\n    this._updateDimensions();\n    this._injectCss();\n  }\n\n  public clear(): void {\n    for (const e of this._rowElements) {\n      e.innerText = '';\n    }\n  }\n\n  public renderRows(start: number, end: number): void {\n    const cursorAbsoluteY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;\n    const cursorX = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);\n    const cursorBlink = this._optionsService.options.cursorBlink;\n\n    for (let y = start; y <= end; y++) {\n      const rowElement = this._rowElements[y];\n      rowElement.innerText = '';\n\n      const row = y + this._bufferService.buffer.ydisp;\n      const lineData = this._bufferService.buffer.lines.get(row);\n      const cursorStyle = this._optionsService.options.cursorStyle;\n      rowElement.appendChild(this._rowFactory.createRow(lineData!, row, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, this._bufferService.cols));\n    }\n  }\n\n  private get _terminalSelector(): string {\n    return `.${TERMINAL_CLASS_PREFIX}${this._terminalClass}`;\n  }\n\n  private _onLinkHover(e: ILinkifierEvent): void {\n    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n  }\n\n  private _onLinkLeave(e: ILinkifierEvent): void {\n    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n  }\n\n  private _setCellUnderline(x: number, x2: number, y: number, y2: number, cols: number, enabled: boolean): void {\n    while (x !== x2 || y !== y2) {\n      const row = this._rowElements[y];\n      if (!row) {\n        return;\n      }\n      const span = row.children[x] as HTMLElement;\n      if (span) {\n        span.style.textDecoration = enabled ? 'underline' : 'none';\n      }\n      if (++x >= cols) {\n        x = 0;\n        y++;\n      }\n    }\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferLine } from 'common/Types';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/atlas/Constants';\nimport { NULL_CELL_CODE, WHITESPACE_CELL_CHAR, Attributes } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { ICoreService, IOptionsService } from 'common/services/Services';\nimport { color, rgba } from 'browser/Color';\nimport { IColorSet, IColor } from 'browser/Types';\nimport { ICharacterJoinerService } from 'browser/services/Services';\nimport { JoinedCellData } from 'browser/services/CharacterJoinerService';\n\nexport const BOLD_CLASS = 'xterm-bold';\nexport const DIM_CLASS = 'xterm-dim';\nexport const ITALIC_CLASS = 'xterm-italic';\nexport const UNDERLINE_CLASS = 'xterm-underline';\nexport const STRIKETHROUGH_CLASS = 'xterm-strikethrough';\nexport const CURSOR_CLASS = 'xterm-cursor';\nexport const CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexport const CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexport const CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexport const CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\n\nexport class DomRendererRowFactory {\n  private _workCell: CellData = new CellData();\n\n  constructor(\n    private readonly _document: Document,\n    private _colors: IColorSet,\n    @ICharacterJoinerService private readonly _characterJoinerService: ICharacterJoinerService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @ICoreService private readonly _coreService: ICoreService\n  ) {\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._colors = colors;\n  }\n\n  public createRow(lineData: IBufferLine, row: number, isCursorRow: boolean, cursorStyle: string | undefined, cursorX: number, cursorBlink: boolean, cellWidth: number, cols: number): DocumentFragment {\n    const fragment = this._document.createDocumentFragment();\n\n    const joinedRanges = this._characterJoinerService.getJoinedCharacters(row);\n    // Find the line length first, this prevents the need to output a bunch of\n    // empty cells at the end. This cannot easily be integrated into the main\n    // loop below because of the colCount feature (which can be removed after we\n    // properly support reflow and disallow data to go beyond the right-side of\n    // the viewport).\n    let lineLength = 0;\n    for (let x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n      if (lineData.loadCell(x, this._workCell).getCode() !== NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n        lineLength = x + 1;\n        break;\n      }\n    }\n\n    for (let x = 0; x < lineLength; x++) {\n      lineData.loadCell(x, this._workCell);\n      let width = this._workCell.getWidth();\n\n      // The character to the left is a wide character, drawing is owned by the char at x-1\n      if (width === 0) {\n        continue;\n      }\n\n      // If true, indicates that the current character(s) to draw were joined.\n      let isJoined = false;\n      let lastCharX = x;\n\n      // Process any joined character ranges as needed. Because of how the\n      // ranges are produced, we know that they are valid for the characters\n      // and attributes of our input.\n      let cell = this._workCell;\n      if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n        isJoined = true;\n        const range = joinedRanges.shift()!;\n\n        // We already know the exact start and end column of the joined range,\n        // so we get the string and width representing it directly\n        cell = new JoinedCellData(\n          this._workCell,\n          lineData.translateToString(true, range[0], range[1]),\n          range[1] - range[0]\n        );\n\n        // Skip over the cells occupied by this range in the loop\n        lastCharX = range[1] - 1;\n\n        // Recalculate width\n        width = cell.getWidth();\n      }\n\n      const charElement = this._document.createElement('span');\n      if (width > 1) {\n        charElement.style.width = `${cellWidth * width}px`;\n      }\n\n      if (isJoined) {\n        // Ligatures in the DOM renderer must use display inline, as they may not show with\n        // inline-block if they are outside the bounds of the element\n        charElement.style.display = 'inline';\n\n        // The DOM renderer colors the background of the cursor but for ligatures all cells are\n        // joined. The workaround here is to show a cursor around the whole ligature so it shows up,\n        // the cursor looks the same when on any character of the ligature though\n        if (cursorX >= x && cursorX <= lastCharX) {\n          cursorX = x;\n        }\n      }\n\n      if (!this._coreService.isCursorHidden && isCursorRow && x === cursorX) {\n        charElement.classList.add(CURSOR_CLASS);\n\n        if (cursorBlink) {\n          charElement.classList.add(CURSOR_BLINK_CLASS);\n        }\n\n        switch (cursorStyle) {\n          case 'bar':\n            charElement.classList.add(CURSOR_STYLE_BAR_CLASS);\n            break;\n          case 'underline':\n            charElement.classList.add(CURSOR_STYLE_UNDERLINE_CLASS);\n            break;\n          default:\n            charElement.classList.add(CURSOR_STYLE_BLOCK_CLASS);\n            break;\n        }\n      }\n\n      if (cell.isBold()) {\n        charElement.classList.add(BOLD_CLASS);\n      }\n\n      if (cell.isItalic()) {\n        charElement.classList.add(ITALIC_CLASS);\n      }\n\n      if (cell.isDim()) {\n        charElement.classList.add(DIM_CLASS);\n      }\n\n      if (cell.isUnderline()) {\n        charElement.classList.add(UNDERLINE_CLASS);\n      }\n\n      if (cell.isInvisible()) {\n        charElement.textContent = WHITESPACE_CELL_CHAR;\n      } else {\n        charElement.textContent = cell.getChars() || WHITESPACE_CELL_CHAR;\n      }\n\n      if (cell.isStrikethrough()) {\n        charElement.classList.add(STRIKETHROUGH_CLASS);\n      }\n\n      let fg = cell.getFgColor();\n      let fgColorMode = cell.getFgColorMode();\n      let bg = cell.getBgColor();\n      let bgColorMode = cell.getBgColorMode();\n      const isInverse = !!cell.isInverse();\n      if (isInverse) {\n        const temp = fg;\n        fg = bg;\n        bg = temp;\n        const temp2 = fgColorMode;\n        fgColorMode = bgColorMode;\n        bgColorMode = temp2;\n      }\n\n      // Foreground\n      switch (fgColorMode) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          if (cell.isBold() && fg < 8 && this._optionsService.options.drawBoldTextInBrightColors) {\n            fg += 8;\n          }\n          if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.ansi[fg])) {\n            charElement.classList.add(`xterm-fg-${fg}`);\n          }\n          break;\n        case Attributes.CM_RGB:\n          const color = rgba.toColor(\n            (fg >> 16) & 0xFF,\n            (fg >>  8) & 0xFF,\n            (fg      ) & 0xFF\n          );\n          if (!this._applyMinimumContrast(charElement, this._colors.background, color)) {\n            this._addStyle(charElement, `color:#${padStart(fg.toString(16), '0', 6)}`);\n          }\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.foreground)) {\n            if (isInverse) {\n              charElement.classList.add(`xterm-fg-${INVERTED_DEFAULT_COLOR}`);\n            }\n          }\n      }\n\n      // Background\n      switch (bgColorMode) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          charElement.classList.add(`xterm-bg-${bg}`);\n          break;\n        case Attributes.CM_RGB:\n          this._addStyle(charElement, `background-color:#${padStart(bg.toString(16), '0', 6)}`);\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          if (isInverse) {\n            charElement.classList.add(`xterm-bg-${INVERTED_DEFAULT_COLOR}`);\n          }\n      }\n\n      fragment.appendChild(charElement);\n\n      x = lastCharX;\n    }\n    return fragment;\n  }\n\n  private _applyMinimumContrast(element: HTMLElement, bg: IColor, fg: IColor): boolean {\n    if (this._optionsService.options.minimumContrastRatio === 1) {\n      return false;\n    }\n\n    // Try get from cache first\n    let adjustedColor = this._colors.contrastCache.getColor(this._workCell.bg, this._workCell.fg);\n\n    // Calculate and store in cache\n    if (adjustedColor === undefined) {\n      adjustedColor = color.ensureContrastRatio(bg, fg, this._optionsService.options.minimumContrastRatio);\n      this._colors.contrastCache.setColor(this._workCell.bg, this._workCell.fg, adjustedColor ?? null);\n    }\n\n    if (adjustedColor) {\n      this._addStyle(element, `color:${adjustedColor.css}`);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _addStyle(element: HTMLElement, style: string): void {\n    element.setAttribute('style', `${element.getAttribute('style') || ''}${style};`);\n  }\n}\n\nfunction padStart(text: string, padChar: string, length: number): string {\n  while (text.length < length) {\n    text = padChar + text;\n  }\n  return text;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService } from 'common/services/Services';\n\n/**\n * Represents a selection within the buffer. This model only cares about column\n * and row coordinates, not wide characters.\n */\nexport class SelectionModel {\n  /**\n   * Whether select all is currently active.\n   */\n  public isSelectAllActive: boolean = false;\n\n  /**\n   * The minimal length of the selection from the start position. When double\n   * clicking on a word, the word will be selected which makes the selection\n   * start at the start of the word and makes this variable the length.\n   */\n  public selectionStartLength: number = 0;\n\n  /**\n   * The [x, y] position the selection starts at.\n   */\n  public selectionStart: [number, number] | undefined;\n\n  /**\n   * The [x, y] position the selection ends at.\n   */\n  public selectionEnd: [number, number] | undefined;\n\n  constructor(\n    private _bufferService: IBufferService\n  ) {\n  }\n\n  /**\n   * Clears the current selection.\n   */\n  public clearSelection(): void {\n    this.selectionStart = undefined;\n    this.selectionEnd = undefined;\n    this.isSelectAllActive = false;\n    this.selectionStartLength = 0;\n  }\n\n  /**\n   * The final selection start, taking into consideration select all.\n   */\n  public get finalSelectionStart(): [number, number] | undefined {\n    if (this.isSelectAllActive) {\n      return [0, 0];\n    }\n\n    if (!this.selectionEnd || !this.selectionStart) {\n      return this.selectionStart;\n    }\n\n    return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n  }\n\n  /**\n   * The final selection end, taking into consideration select all, double click\n   * word selection and triple click line selection.\n   */\n  public get finalSelectionEnd(): [number, number] | undefined {\n    if (this.isSelectAllActive) {\n      return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];\n    }\n\n    if (!this.selectionStart) {\n      return undefined;\n    }\n\n    // Use the selection start + length if the end doesn't exist or they're reversed\n    if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n      const startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n      if (startPlusLength > this._bufferService.cols) {\n        // Ensure the trailing EOL isn't included when the selection ends on the right edge\n        if (startPlusLength % this._bufferService.cols === 0) {\n          return [this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols) - 1];\n        }\n        return [startPlusLength % this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols)];\n      }\n      return [startPlusLength, this.selectionStart[1]];\n    }\n\n    // Ensure the the word/line is selected after a double/triple click\n    if (this.selectionStartLength) {\n      // Select the larger of the two when start and end are on the same line\n      if (this.selectionEnd[1] === this.selectionStart[1]) {\n        return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n      }\n    }\n    return this.selectionEnd;\n  }\n\n  /**\n   * Returns whether the selection start and end are reversed.\n   */\n  public areSelectionValuesReversed(): boolean {\n    const start = this.selectionStart;\n    const end = this.selectionEnd;\n    if (!start || !end) {\n      return false;\n    }\n    return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n  }\n\n  /**\n   * Handle the buffer being trimmed, adjust the selection position.\n   * @param amount The amount the buffer is being trimmed.\n   * @return Whether a refresh is necessary.\n   */\n  public onTrim(amount: number): boolean {\n    // Adjust the selection position based on the trimmed amount.\n    if (this.selectionStart) {\n      this.selectionStart[1] -= amount;\n    }\n    if (this.selectionEnd) {\n      this.selectionEnd[1] -= amount;\n    }\n\n    // The selection has moved off the buffer, clear it.\n    if (this.selectionEnd && this.selectionEnd[1] < 0) {\n      this.clearSelection();\n      return true;\n    }\n\n    // If the selection start is trimmed, ensure the start column is 0.\n    if (this.selectionStart && this.selectionStart[1] < 0) {\n      this.selectionStart[1] = 0;\n    }\n    return false;\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService } from 'common/services/Services';\nimport { IEvent, EventEmitter } from 'common/EventEmitter';\nimport { ICharSizeService } from 'browser/services/Services';\n\nexport class CharSizeService implements ICharSizeService {\n  public serviceBrand: undefined;\n\n  public width: number = 0;\n  public height: number = 0;\n  private _measureStrategy: IMeasureStrategy;\n\n  public get hasValidSize(): boolean { return this.width > 0 && this.height > 0; }\n\n  private _onCharSizeChange = new EventEmitter<void>();\n  public get onCharSizeChange(): IEvent<void> { return this._onCharSizeChange.event; }\n\n  constructor(\n    document: Document,\n    parentElement: HTMLElement,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    this._measureStrategy = new DomMeasureStrategy(document, parentElement, this._optionsService);\n  }\n\n  public measure(): void {\n    const result = this._measureStrategy.measure();\n    if (result.width !== this.width || result.height !== this.height) {\n      this.width = result.width;\n      this.height = result.height;\n      this._onCharSizeChange.fire();\n    }\n  }\n}\n\ninterface IMeasureStrategy {\n  measure(): IReadonlyMeasureResult;\n}\n\ninterface IReadonlyMeasureResult {\n  readonly width: number;\n  readonly height: number;\n}\n\ninterface IMeasureResult {\n  width: number;\n  height: number;\n}\n\n// TODO: For supporting browsers we should also provide a CanvasCharDimensionsProvider that uses ctx.measureText\nclass DomMeasureStrategy implements IMeasureStrategy {\n  private _result: IMeasureResult = { width: 0, height: 0 };\n  private _measureElement: HTMLElement;\n\n  constructor(\n    private _document: Document,\n    private _parentElement: HTMLElement,\n    private _optionsService: IOptionsService\n  ) {\n    this._measureElement = this._document.createElement('span');\n    this._measureElement.classList.add('xterm-char-measure-element');\n    this._measureElement.textContent = 'W';\n    this._measureElement.setAttribute('aria-hidden', 'true');\n    this._parentElement.appendChild(this._measureElement);\n  }\n\n  public measure(): IReadonlyMeasureResult {\n    this._measureElement.style.fontFamily = this._optionsService.options.fontFamily;\n    this._measureElement.style.fontSize = `${this._optionsService.options.fontSize}px`;\n\n    // Note that this triggers a synchronous layout\n    const geometry = this._measureElement.getBoundingClientRect();\n\n    // If values are 0 then the element is likely currently display:none, in which case we should\n    // retain the previous value.\n    if (geometry.width !== 0 && geometry.height !== 0) {\n      this._result.width = geometry.width;\n      this._result.height = Math.ceil(geometry.height);\n    }\n\n    return this._result;\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferLine, ICellData, CharData } from 'common/Types';\nimport { ICharacterJoiner } from 'browser/Types';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { WHITESPACE_CELL_CHAR, Content } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { IBufferService } from 'common/services/Services';\nimport { ICharacterJoinerService } from 'browser/services/Services';\n\nexport class JoinedCellData extends AttributeData implements ICellData {\n  private _width: number;\n  // .content carries no meaning for joined CellData, simply nullify it\n  // thus we have to overload all other .content accessors\n  public content: number = 0;\n  public fg: number;\n  public bg: number;\n  public combinedData: string = '';\n\n  constructor(firstCell: ICellData, chars: string, width: number) {\n    super();\n    this.fg = firstCell.fg;\n    this.bg = firstCell.bg;\n    this.combinedData = chars;\n    this._width = width;\n  }\n\n  public isCombined(): number {\n    // always mark joined cell data as combined\n    return Content.IS_COMBINED_MASK;\n  }\n\n  public getWidth(): number {\n    return this._width;\n  }\n\n  public getChars(): string {\n    return this.combinedData;\n  }\n\n  public getCode(): number {\n    // code always gets the highest possible fake codepoint (read as -1)\n    // this is needed as code is used by caches as identifier\n    return 0x1FFFFF;\n  }\n\n  public setFromCharData(value: CharData): void {\n    throw new Error('not implemented');\n  }\n\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n\nexport class CharacterJoinerService implements ICharacterJoinerService {\n  public serviceBrand: undefined;\n\n  private _characterJoiners: ICharacterJoiner[] = [];\n  private _nextCharacterJoinerId: number = 0;\n  private _workCell: CellData = new CellData();\n\n  constructor(\n    @IBufferService private _bufferService: IBufferService\n  ) { }\n\n  public register(handler: (text: string) => [number, number][]): number {\n    const joiner: ICharacterJoiner = {\n      id: this._nextCharacterJoinerId++,\n      handler\n    };\n\n    this._characterJoiners.push(joiner);\n    return joiner.id;\n  }\n\n  public deregister(joinerId: number): boolean {\n    for (let i = 0; i < this._characterJoiners.length; i++) {\n      if (this._characterJoiners[i].id === joinerId) {\n        this._characterJoiners.splice(i, 1);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  public getJoinedCharacters(row: number): [number, number][] {\n    if (this._characterJoiners.length === 0) {\n      return [];\n    }\n\n    const line = this._bufferService.buffer.lines.get(row);\n    if (!line || line.length === 0) {\n      return [];\n    }\n\n    const ranges: [number, number][] = [];\n    const lineStr = line.translateToString(true);\n\n    // Because some cells can be represented by multiple javascript characters,\n    // we track the cell and the string indexes separately. This allows us to\n    // translate the string ranges we get from the joiners back into cell ranges\n    // for use when rendering\n    let rangeStartColumn = 0;\n    let currentStringIndex = 0;\n    let rangeStartStringIndex = 0;\n    let rangeAttrFG = line.getFg(0);\n    let rangeAttrBG = line.getBg(0);\n\n    for (let x = 0; x < line.getTrimmedLength(); x++) {\n      line.loadCell(x, this._workCell);\n\n      if (this._workCell.getWidth() === 0) {\n        // If this character is of width 0, skip it.\n        continue;\n      }\n\n      // End of range\n      if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n        // If we ended up with a sequence of more than one character,\n        // look for ranges to join.\n        if (x - rangeStartColumn > 1) {\n          const joinedRanges = this._getJoinedRanges(\n            lineStr,\n            rangeStartStringIndex,\n            currentStringIndex,\n            line,\n            rangeStartColumn\n          );\n          for (let i = 0; i < joinedRanges.length; i++) {\n            ranges.push(joinedRanges[i]);\n          }\n        }\n\n        // Reset our markers for a new range.\n        rangeStartColumn = x;\n        rangeStartStringIndex = currentStringIndex;\n        rangeAttrFG = this._workCell.fg;\n        rangeAttrBG = this._workCell.bg;\n      }\n\n      currentStringIndex += this._workCell.getChars().length || WHITESPACE_CELL_CHAR.length;\n    }\n\n    // Process any trailing ranges.\n    if (this._bufferService.cols - rangeStartColumn > 1) {\n      const joinedRanges = this._getJoinedRanges(\n        lineStr,\n        rangeStartStringIndex,\n        currentStringIndex,\n        line,\n        rangeStartColumn\n      );\n      for (let i = 0; i < joinedRanges.length; i++) {\n        ranges.push(joinedRanges[i]);\n      }\n    }\n\n    return ranges;\n  }\n\n  /**\n   * Given a segment of a line of text, find all ranges of text that should be\n   * joined in a single rendering unit. Ranges are internally converted to\n   * column ranges, rather than string ranges.\n   * @param line String representation of the full line of text\n   * @param startIndex Start position of the range to search in the string (inclusive)\n   * @param endIndex End position of the range to search in the string (exclusive)\n   */\n  private _getJoinedRanges(line: string, startIndex: number, endIndex: number, lineData: IBufferLine, startCol: number): [number, number][] {\n    const text = line.substring(startIndex, endIndex);\n    // At this point we already know that there is at least one joiner so\n    // we can just pull its value and assign it directly rather than\n    // merging it into an empty array, which incurs unnecessary writes.\n    let allJoinedRanges: [number, number][] = [];\n    try {\n      allJoinedRanges = this._characterJoiners[0].handler(text);\n    } catch (error) {\n      console.error(error);\n    }\n    for (let i = 1; i < this._characterJoiners.length; i++) {\n      // We merge any overlapping ranges across the different joiners\n      try {\n        const joinerRanges = this._characterJoiners[i].handler(text);\n        for (let j = 0; j < joinerRanges.length; j++) {\n          CharacterJoinerService._mergeRanges(allJoinedRanges, joinerRanges[j]);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    this._stringRangesToCellRanges(allJoinedRanges, lineData, startCol);\n    return allJoinedRanges;\n  }\n\n  /**\n   * Modifies the provided ranges in-place to adjust for variations between\n   * string length and cell width so that the range represents a cell range,\n   * rather than the string range the joiner provides.\n   * @param ranges String ranges containing start (inclusive) and end (exclusive) index\n   * @param line Cell data for the relevant line in the terminal\n   * @param startCol Offset within the line to start from\n   */\n  private _stringRangesToCellRanges(ranges: [number, number][], line: IBufferLine, startCol: number): void {\n    let currentRangeIndex = 0;\n    let currentRangeStarted = false;\n    let currentStringIndex = 0;\n    let currentRange = ranges[currentRangeIndex];\n\n    // If we got through all of the ranges, stop searching\n    if (!currentRange) {\n      return;\n    }\n\n    for (let x = startCol; x < this._bufferService.cols; x++) {\n      const width = line.getWidth(x);\n      const length = line.getString(x).length || WHITESPACE_CELL_CHAR.length;\n\n      // We skip zero-width characters when creating the string to join the text\n      // so we do the same here\n      if (width === 0) {\n        continue;\n      }\n\n      // Adjust the start of the range\n      if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n        currentRange[0] = x;\n        currentRangeStarted = true;\n      }\n\n      // Adjust the end of the range\n      if (currentRange[1] <= currentStringIndex) {\n        currentRange[1] = x;\n\n        // We're finished with this range, so we move to the next one\n        currentRange = ranges[++currentRangeIndex];\n\n        // If there are no more ranges left, stop searching\n        if (!currentRange) {\n          break;\n        }\n\n        // Ranges can be on adjacent characters. Because the end index of the\n        // ranges are exclusive, this means that the index for the start of a\n        // range can be the same as the end index of the previous range. To\n        // account for the start of the next range, we check here just in case.\n        if (currentRange[0] <= currentStringIndex) {\n          currentRange[0] = x;\n          currentRangeStarted = true;\n        } else {\n          currentRangeStarted = false;\n        }\n      }\n\n      // Adjust the string index based on the character length to line up with\n      // the column adjustment\n      currentStringIndex += length;\n    }\n\n    // If there is still a range left at the end, it must extend all the way to\n    // the end of the line.\n    if (currentRange) {\n      currentRange[1] = this._bufferService.cols;\n    }\n  }\n\n  /**\n   * Merges the range defined by the provided start and end into the list of\n   * existing ranges. The merge is done in place on the existing range for\n   * performance and is also returned.\n   * @param ranges Existing range list\n   * @param newRange Tuple of two numbers representing the new range to merge in.\n   * @returns The ranges input with the new range merged in place\n   */\n  private static _mergeRanges(ranges: [number, number][], newRange: [number, number]): [number, number][] {\n    let inRange = false;\n    for (let i = 0; i < ranges.length; i++) {\n      const range = ranges[i];\n      if (!inRange) {\n        if (newRange[1] <= range[0]) {\n          // Case 1: New range is before the search range\n          ranges.splice(i, 0, newRange);\n          return ranges;\n        }\n\n        if (newRange[1] <= range[1]) {\n          // Case 2: New range is either wholly contained within the\n          // search range or overlaps with the front of it\n          range[0] = Math.min(newRange[0], range[0]);\n          return ranges;\n        }\n\n        if (newRange[0] < range[1]) {\n          // Case 3: New range either wholly contains the search range\n          // or overlaps with the end of it\n          range[0] = Math.min(newRange[0], range[0]);\n          inRange = true;\n        }\n\n        // Case 4: New range starts after the search range\n        continue;\n      } else {\n        if (newRange[1] <= range[0]) {\n          // Case 5: New range extends from previous range but doesn't\n          // reach the current one\n          ranges[i - 1][1] = newRange[1];\n          return ranges;\n        }\n\n        if (newRange[1] <= range[1]) {\n          // Case 6: New range extends from prvious range into the\n          // current range\n          ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n          ranges.splice(i, 1);\n          return ranges;\n        }\n\n        // Case 7: New range extends from previous range past the\n        // end of the current range\n        ranges.splice(i, 1);\n        i--;\n      }\n    }\n\n    if (inRange) {\n      // Case 8: New range extends past the last existing range\n      ranges[ranges.length - 1][1] = newRange[1];\n    } else {\n      // Case 9: New range starts after the last existing range\n      ranges.push(newRange);\n    }\n\n    return ranges;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreBrowserService } from './Services';\n\nexport class CoreBrowserService implements ICoreBrowserService {\n  public serviceBrand: undefined;\n\n  constructor(\n    private _textarea: HTMLTextAreaElement\n  ) {\n  }\n\n  public get isFocused(): boolean {\n    const docOrShadowRoot = this._textarea.getRootNode ? this._textarea.getRootNode() as Document | ShadowRoot : document;\n    return docOrShadowRoot.activeElement === this._textarea && document.hasFocus();\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharSizeService, IRenderService, IMouseService } from './Services';\nimport { getCoords, getRawByteCoords } from 'browser/input/Mouse';\n\nexport class MouseService implements IMouseService {\n  public serviceBrand: undefined;\n\n  constructor(\n    @IRenderService private readonly _renderService: IRenderService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService\n  ) {\n  }\n\n  public getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, isSelection?: boolean): [number, number] | undefined {\n    return getCoords(\n      event,\n      element,\n      colCount,\n      rowCount,\n      this._charSizeService.hasValidSize,\n      this._renderService.dimensions.actualCellWidth,\n      this._renderService.dimensions.actualCellHeight,\n      isSelection\n    );\n  }\n\n  public getRawByteCoords(event: MouseEvent, element: HTMLElement, colCount: number, rowCount: number): { x: number, y: number } | undefined {\n    const coords = this.getCoords(event, element, colCount, rowCount);\n    return getRawByteCoords(coords);\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderer, IRenderDimensions } from 'browser/renderer/Types';\nimport { RenderDebouncer } from 'browser/RenderDebouncer';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { ScreenDprMonitor } from 'browser/ScreenDprMonitor';\nimport { addDisposableDomListener } from 'browser/Lifecycle';\nimport { IColorSet, IRenderDebouncer } from 'browser/Types';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { ICharSizeService, IRenderService } from 'browser/services/Services';\n\ninterface ISelectionState {\n  start: [number, number] | undefined;\n  end: [number, number] | undefined;\n  columnSelectMode: boolean;\n}\n\nexport class RenderService extends Disposable implements IRenderService {\n  public serviceBrand: undefined;\n\n  private _renderDebouncer: IRenderDebouncer;\n  private _screenDprMonitor: ScreenDprMonitor;\n\n  private _isPaused: boolean = false;\n  private _needsFullRefresh: boolean = false;\n  private _isNextRenderRedrawOnly: boolean = true;\n  private _needsSelectionRefresh: boolean = false;\n  private _canvasWidth: number = 0;\n  private _canvasHeight: number = 0;\n  private _selectionState: ISelectionState = {\n    start: undefined,\n    end: undefined,\n    columnSelectMode: false\n  };\n\n  private _onDimensionsChange = new EventEmitter<IRenderDimensions>();\n  public get onDimensionsChange(): IEvent<IRenderDimensions> { return this._onDimensionsChange.event; }\n  private _onRender = new EventEmitter<{ start: number, end: number }>();\n  public get onRenderedBufferChange(): IEvent<{ start: number, end: number }> { return this._onRender.event; }\n  private _onRefreshRequest = new EventEmitter<{ start: number, end: number }>();\n  public get onRefreshRequest(): IEvent<{ start: number, end: number }> { return this._onRefreshRequest.event; }\n\n  public get dimensions(): IRenderDimensions { return this._renderer.dimensions; }\n\n  constructor(\n    private _renderer: IRenderer,\n    private _rowCount: number,\n    screenElement: HTMLElement,\n    @IOptionsService optionsService: IOptionsService,\n    @ICharSizeService private readonly _charSizeService: ICharSizeService,\n    @IBufferService bufferService: IBufferService\n  ) {\n    super();\n\n    this.register({ dispose: () => this._renderer.dispose() });\n\n    this._renderDebouncer = new RenderDebouncer((start, end) => this._renderRows(start, end));\n    this.register(this._renderDebouncer);\n\n    this._screenDprMonitor = new ScreenDprMonitor();\n    this._screenDprMonitor.setListener(() => this.onDevicePixelRatioChange());\n    this.register(this._screenDprMonitor);\n\n    this.register(bufferService.onResize(e => this._fullRefresh()));\n    this.register(optionsService.onOptionChange(() => this._renderer.onOptionsChanged()));\n    this.register(this._charSizeService.onCharSizeChange(() => this.onCharSizeChanged()));\n\n    // No need to register this as renderer is explicitly disposed in RenderService.dispose\n    this._renderer.onRequestRedraw(e => this.refreshRows(e.start, e.end, true));\n\n    // dprchange should handle this case, we need this as well for browsers that don't support the\n    // matchMedia query.\n    this.register(addDisposableDomListener(window, 'resize', () => this.onDevicePixelRatioChange()));\n\n    // Detect whether IntersectionObserver is detected and enable renderer pause\n    // and resume based on terminal visibility if so\n    if ('IntersectionObserver' in window) {\n      const observer = new IntersectionObserver(e => this._onIntersectionChange(e[e.length - 1]), { threshold: 0 });\n      observer.observe(screenElement);\n      this.register({ dispose: () => observer.disconnect() });\n    }\n  }\n\n  private _onIntersectionChange(entry: IntersectionObserverEntry): void {\n    this._isPaused = entry.isIntersecting === undefined ? (entry.intersectionRatio === 0) : !entry.isIntersecting;\n\n    // Terminal was hidden on open\n    if (!this._isPaused && !this._charSizeService.hasValidSize) {\n      this._charSizeService.measure();\n    }\n\n    if (!this._isPaused && this._needsFullRefresh) {\n      this.refreshRows(0, this._rowCount - 1);\n      this._needsFullRefresh = false;\n    }\n  }\n\n  public refreshRows(start: number, end: number, isRedrawOnly: boolean = false): void {\n    if (this._isPaused) {\n      this._needsFullRefresh = true;\n      return;\n    }\n    if (!isRedrawOnly) {\n      this._isNextRenderRedrawOnly = false;\n    }\n    this._renderDebouncer.refresh(start, end, this._rowCount);\n  }\n\n  private _renderRows(start: number, end: number): void {\n    this._renderer.renderRows(start, end);\n\n    // Update selection if needed\n    if (this._needsSelectionRefresh) {\n      this._renderer.onSelectionChanged(this._selectionState.start, this._selectionState.end, this._selectionState.columnSelectMode);\n      this._needsSelectionRefresh = false;\n    }\n\n    // Fire render event only if it was not a redraw\n    if (!this._isNextRenderRedrawOnly) {\n      this._onRender.fire({ start, end });\n    }\n    this._isNextRenderRedrawOnly = true;\n  }\n\n  public resize(cols: number, rows: number): void {\n    this._rowCount = rows;\n    this._fireOnCanvasResize();\n  }\n\n  public changeOptions(): void {\n    this._renderer.onOptionsChanged();\n    this.refreshRows(0, this._rowCount - 1);\n    this._fireOnCanvasResize();\n  }\n\n  private _fireOnCanvasResize(): void {\n    // Don't fire the event if the dimensions haven't changed\n    if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n      return;\n    }\n    this._onDimensionsChange.fire(this._renderer.dimensions);\n  }\n\n  public dispose(): void {\n    super.dispose();\n  }\n\n  public setRenderer(renderer: IRenderer): void {\n    // TODO: RenderService should be the only one to dispose the renderer\n    this._renderer.dispose();\n    this._renderer = renderer;\n    this._renderer.onRequestRedraw(e => this.refreshRows(e.start, e.end, true));\n\n    // Force a refresh\n    this._needsSelectionRefresh = true;\n    this._fullRefresh();\n  }\n\n  private _fullRefresh(): void {\n    if (this._isPaused) {\n      this._needsFullRefresh = true;\n    } else {\n      this.refreshRows(0, this._rowCount - 1);\n    }\n  }\n\n  public clearTextureAtlas(): void {\n    this._renderer?.clearTextureAtlas?.();\n    this._fullRefresh();\n  }\n\n  public setColors(colors: IColorSet): void {\n    this._renderer.setColors(colors);\n    this._fullRefresh();\n  }\n\n  public onDevicePixelRatioChange(): void {\n    // Force char size measurement as DomMeasureStrategy(getBoundingClientRect) is not stable\n    // when devicePixelRatio changes\n    this._charSizeService.measure();\n\n    this._renderer.onDevicePixelRatioChange();\n    this.refreshRows(0, this._rowCount - 1);\n  }\n\n  public onResize(cols: number, rows: number): void {\n    this._renderer.onResize(cols, rows);\n    this._fullRefresh();\n  }\n\n  // TODO: Is this useful when we have onResize?\n  public onCharSizeChanged(): void {\n    this._renderer.onCharSizeChanged();\n  }\n\n  public onBlur(): void {\n    this._renderer.onBlur();\n  }\n\n  public onFocus(): void {\n    this._renderer.onFocus();\n  }\n\n  public onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    this._selectionState.start = start;\n    this._selectionState.end = end;\n    this._selectionState.columnSelectMode = columnSelectMode;\n    this._renderer.onSelectionChanged(start, end, columnSelectMode);\n  }\n\n  public onCursorMove(): void {\n    this._renderer.onCursorMove();\n  }\n\n  public clear(): void {\n    this._renderer.clear();\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ISelectionRedrawRequestEvent, ISelectionRequestScrollLinesEvent } from 'browser/selection/Types';\nimport { IBuffer } from 'common/buffer/Types';\nimport { IBufferLine, IDisposable } from 'common/Types';\nimport * as Browser from 'common/Platform';\nimport { SelectionModel } from 'browser/selection/SelectionModel';\nimport { CellData } from 'common/buffer/CellData';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IMouseService, ISelectionService, IRenderService } from 'browser/services/Services';\nimport { ILinkifier2 } from 'browser/Types';\nimport { IBufferService, IOptionsService, ICoreService } from 'common/services/Services';\nimport { getCoordsRelativeToElement } from 'browser/input/Mouse';\nimport { moveToCellSequence } from 'browser/input/MoveToCell';\nimport { Disposable } from 'common/Lifecycle';\nimport { getRangeLength } from 'common/buffer/BufferRange';\n\n/**\n * The number of pixels the mouse needs to be above or below the viewport in\n * order to scroll at the maximum speed.\n */\nconst DRAG_SCROLL_MAX_THRESHOLD = 50;\n\n/**\n * The maximum scrolling speed\n */\nconst DRAG_SCROLL_MAX_SPEED = 15;\n\n/**\n * The number of milliseconds between drag scroll updates.\n */\nconst DRAG_SCROLL_INTERVAL = 50;\n\n/**\n * The maximum amount of time that can have elapsed for an alt click to move the\n * cursor.\n */\nconst ALT_CLICK_MOVE_CURSOR_TIME = 500;\n\nconst NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nconst ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\n\n/**\n * Represents a position of a word on a line.\n */\ninterface IWordPosition {\n  start: number;\n  length: number;\n}\n\n/**\n * A selection mode, this drives how the selection behaves on mouse move.\n */\nexport const enum SelectionMode {\n  NORMAL,\n  WORD,\n  LINE,\n  COLUMN\n}\n\n/**\n * A class that manages the selection of the terminal. With help from\n * SelectionModel, SelectionService handles with all logic associated with\n * dealing with the selection, including handling mouse interaction, wide\n * characters and fetching the actual text within the selection. Rendering is\n * not handled by the SelectionService but the onRedrawRequest event is fired\n * when the selection is ready to be redrawn (on an animation frame).\n */\nexport class SelectionService extends Disposable implements ISelectionService {\n  public serviceBrand: undefined;\n\n  protected _model: SelectionModel;\n\n  /**\n   * The amount to scroll every drag scroll update (depends on how far the mouse\n   * drag is above or below the terminal).\n   */\n  private _dragScrollAmount: number = 0;\n\n  /**\n   * The current selection mode.\n   */\n  protected _activeSelectionMode: SelectionMode;\n\n  /**\n   * A setInterval timer that is active while the mouse is down whose callback\n   * scrolls the viewport when necessary.\n   */\n  private _dragScrollIntervalTimer: number | undefined;\n\n  /**\n   * The animation frame ID used for refreshing the selection.\n   */\n  private _refreshAnimationFrame: number | undefined;\n\n  /**\n   * Whether selection is enabled.\n   */\n  private _enabled = true;\n\n  private _mouseMoveListener: EventListener;\n  private _mouseUpListener: EventListener;\n  private _trimListener: IDisposable;\n  private _workCell: CellData = new CellData();\n\n  private _mouseDownTimeStamp: number = 0;\n  private _oldHasSelection: boolean = false;\n  private _oldSelectionStart: [number, number] | undefined = undefined;\n  private _oldSelectionEnd: [number, number] | undefined = undefined;\n\n  private _onLinuxMouseSelection = this.register(new EventEmitter<string>());\n  public get onLinuxMouseSelection(): IEvent<string> { return this._onLinuxMouseSelection.event; }\n  private _onRedrawRequest = this.register(new EventEmitter<ISelectionRedrawRequestEvent>());\n  public get onRequestRedraw(): IEvent<ISelectionRedrawRequestEvent> { return this._onRedrawRequest.event; }\n  private _onSelectionChange = this.register(new EventEmitter<void>());\n  public get onSelectionChange(): IEvent<void> { return this._onSelectionChange.event; }\n  private _onRequestScrollLines = this.register(new EventEmitter<ISelectionRequestScrollLinesEvent>());\n  public get onRequestScrollLines(): IEvent<ISelectionRequestScrollLinesEvent> { return this._onRequestScrollLines.event; }\n\n  constructor(\n    private readonly _element: HTMLElement,\n    private readonly _screenElement: HTMLElement,\n    private readonly _linkifier: ILinkifier2,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICoreService private readonly _coreService: ICoreService,\n    @IMouseService private readonly _mouseService: IMouseService,\n    @IOptionsService private readonly _optionsService: IOptionsService,\n    @IRenderService private readonly _renderService: IRenderService\n  ) {\n    super();\n\n    // Init listeners\n    this._mouseMoveListener = event => this._onMouseMove(event as MouseEvent);\n    this._mouseUpListener = event => this._onMouseUp(event as MouseEvent);\n    this._coreService.onUserInput(() => {\n      if (this.hasSelection) {\n        this.clearSelection();\n      }\n    });\n    this._trimListener = this._bufferService.buffer.lines.onTrim(amount => this._onTrim(amount));\n    this.register(this._bufferService.buffers.onBufferActivate(e => this._onBufferActivate(e)));\n\n    this.enable();\n\n    this._model = new SelectionModel(this._bufferService);\n    this._activeSelectionMode = SelectionMode.NORMAL;\n  }\n\n  public dispose(): void {\n    this._removeMouseDownListeners();\n  }\n\n  public reset(): void {\n    this.clearSelection();\n  }\n\n  /**\n   * Disables the selection manager. This is useful for when terminal mouse\n   * are enabled.\n   */\n  public disable(): void {\n    this.clearSelection();\n    this._enabled = false;\n  }\n\n  /**\n   * Enable the selection manager.\n   */\n  public enable(): void {\n    this._enabled = true;\n  }\n\n  public get selectionStart(): [number, number] | undefined { return this._model.finalSelectionStart; }\n  public get selectionEnd(): [number, number] | undefined { return this._model.finalSelectionEnd; }\n\n  /**\n   * Gets whether there is an active text selection.\n   */\n  public get hasSelection(): boolean {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    if (!start || !end) {\n      return false;\n    }\n    return start[0] !== end[0] || start[1] !== end[1];\n  }\n\n  /**\n   * Gets the text currently selected.\n   */\n  public get selectionText(): string {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    if (!start || !end) {\n      return '';\n    }\n\n    const buffer = this._bufferService.buffer;\n    const result: string[] = [];\n\n    if (this._activeSelectionMode === SelectionMode.COLUMN) {\n      // Ignore zero width selections\n      if (start[0] === end[0]) {\n        return '';\n      }\n\n      for (let i = start[1]; i <= end[1]; i++) {\n        const lineText = buffer.translateBufferLineToString(i, true, start[0], end[0]);\n        result.push(lineText);\n      }\n    } else {\n      // Get first row\n      const startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n      result.push(buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n\n      // Get middle rows\n      for (let i = start[1] + 1; i <= end[1] - 1; i++) {\n        const bufferLine = buffer.lines.get(i);\n        const lineText = buffer.translateBufferLineToString(i, true);\n        if (bufferLine?.isWrapped) {\n          result[result.length - 1] += lineText;\n        } else {\n          result.push(lineText);\n        }\n      }\n\n      // Get final row\n      if (start[1] !== end[1]) {\n        const bufferLine = buffer.lines.get(end[1]);\n        const lineText = buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n        if (bufferLine && bufferLine!.isWrapped) {\n          result[result.length - 1] += lineText;\n        } else {\n          result.push(lineText);\n        }\n      }\n    }\n\n    // Format string by replacing non-breaking space chars with regular spaces\n    // and joining the array into a multi-line string.\n    const formattedResult = result.map(line => {\n      return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n    }).join(Browser.isWindows ? '\\r\\n' : '\\n');\n\n    return formattedResult;\n  }\n\n  /**\n   * Clears the current terminal selection.\n   */\n  public clearSelection(): void {\n    this._model.clearSelection();\n    this._removeMouseDownListeners();\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  /**\n   * Queues a refresh, redrawing the selection on the next opportunity.\n   * @param isLinuxMouseSelection Whether the selection should be registered as a new\n   * selection on Linux.\n   */\n  public refresh(isLinuxMouseSelection?: boolean): void {\n    // Queue the refresh for the renderer\n    if (!this._refreshAnimationFrame) {\n      this._refreshAnimationFrame = window.requestAnimationFrame(() => this._refresh());\n    }\n\n    // If the platform is Linux and the refresh call comes from a mouse event,\n    // we need to update the selection for middle click to paste selection.\n    if (Browser.isLinux && isLinuxMouseSelection) {\n      const selectionText = this.selectionText;\n      if (selectionText.length) {\n        this._onLinuxMouseSelection.fire(this.selectionText);\n      }\n    }\n  }\n\n  /**\n   * Fires the refresh event, causing consumers to pick it up and redraw the\n   * selection state.\n   */\n  private _refresh(): void {\n    this._refreshAnimationFrame = undefined;\n    this._onRedrawRequest.fire({\n      start: this._model.finalSelectionStart,\n      end: this._model.finalSelectionEnd,\n      columnSelectMode: this._activeSelectionMode === SelectionMode.COLUMN\n    });\n  }\n\n  /**\n   * Checks if the current click was inside the current selection\n   * @param event The mouse event\n   */\n  private _isClickInSelection(event: MouseEvent): boolean {\n    const coords = this._getMouseBufferCoords(event);\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n\n    if (!start || !end || !coords) {\n      return false;\n    }\n\n    return this._areCoordsInSelection(coords, start, end);\n  }\n\n  protected _areCoordsInSelection(coords: [number, number], start: [number, number], end: [number, number]): boolean {\n    return (coords[1] > start[1] && coords[1] < end[1]) ||\n        (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n        (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n        (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n  }\n\n  /**\n   * Selects word at the current mouse event coordinates.\n   * @param event The mouse event.\n   */\n  private _selectWordAtCursor(event: MouseEvent, allowWhitespaceOnlySelection: boolean): boolean {\n    // Check if there is a link under the cursor first and select that if so\n    const range = this._linkifier.currentLink?.link?.range;\n    if (range) {\n      this._model.selectionStart = [range.start.x - 1, range.start.y - 1];\n      this._model.selectionStartLength = getRangeLength(range, this._bufferService.cols);\n      this._model.selectionEnd = undefined;\n      return true;\n    }\n\n    const coords = this._getMouseBufferCoords(event);\n    if (coords) {\n      this._selectWordAt(coords, allowWhitespaceOnlySelection);\n      this._model.selectionEnd = undefined;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Selects all text within the terminal.\n   */\n  public selectAll(): void {\n    this._model.isSelectAllActive = true;\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  public selectLines(start: number, end: number): void {\n    this._model.clearSelection();\n    start = Math.max(start, 0);\n    end = Math.min(end, this._bufferService.buffer.lines.length - 1);\n    this._model.selectionStart = [0, start];\n    this._model.selectionEnd = [this._bufferService.cols, end];\n    this.refresh();\n    this._onSelectionChange.fire();\n  }\n\n  /**\n   * Handle the buffer being trimmed, adjust the selection position.\n   * @param amount The amount the buffer is being trimmed.\n   */\n  private _onTrim(amount: number): void {\n    const needsRefresh = this._model.onTrim(amount);\n    if (needsRefresh) {\n      this.refresh();\n    }\n  }\n\n  /**\n   * Gets the 0-based [x, y] buffer coordinates of the current mouse event.\n   * @param event The mouse event.\n   */\n  private _getMouseBufferCoords(event: MouseEvent): [number, number] | undefined {\n    const coords = this._mouseService.getCoords(event, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);\n    if (!coords) {\n      return undefined;\n    }\n\n    // Convert to 0-based\n    coords[0]--;\n    coords[1]--;\n\n    // Convert viewport coords to buffer coords\n    coords[1] += this._bufferService.buffer.ydisp;\n    return coords;\n  }\n\n  /**\n   * Gets the amount the viewport should be scrolled based on how far out of the\n   * terminal the mouse is.\n   * @param event The mouse event.\n   */\n  private _getMouseEventScrollAmount(event: MouseEvent): number {\n    let offset = getCoordsRelativeToElement(event, this._screenElement)[1];\n    const terminalHeight = this._renderService.dimensions.canvasHeight;\n    if (offset >= 0 && offset <= terminalHeight) {\n      return 0;\n    }\n    if (offset > terminalHeight) {\n      offset -= terminalHeight;\n    }\n\n    offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n    offset /= DRAG_SCROLL_MAX_THRESHOLD;\n    return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n  }\n\n  /**\n   * Returns whether the selection manager should force selection, regardless of\n   * whether the terminal is in mouse events mode.\n   * @param event The mouse event.\n   */\n  public shouldForceSelection(event: MouseEvent): boolean {\n    if (Browser.isMac) {\n      return event.altKey && this._optionsService.options.macOptionClickForcesSelection;\n    }\n\n    return event.shiftKey;\n  }\n\n  /**\n   * Handles te mousedown event, setting up for a new selection.\n   * @param event The mousedown event.\n   */\n  public onMouseDown(event: MouseEvent): void {\n    this._mouseDownTimeStamp = event.timeStamp;\n    // If we have selection, we want the context menu on right click even if the\n    // terminal is in mouse mode.\n    if (event.button === 2 && this.hasSelection) {\n      return;\n    }\n\n    // Only action the primary button\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Allow selection when using a specific modifier key, even when disabled\n    if (!this._enabled) {\n      if (!this.shouldForceSelection(event)) {\n        return;\n      }\n\n      // Don't send the mouse down event to the current process, we want to select\n      event.stopPropagation();\n    }\n\n    // Tell the browser not to start a regular selection\n    event.preventDefault();\n\n    // Reset drag scroll state\n    this._dragScrollAmount = 0;\n\n    if (this._enabled && event.shiftKey) {\n      this._onIncrementalClick(event);\n    } else {\n      if (event.detail === 1) {\n        this._onSingleClick(event);\n      } else if (event.detail === 2) {\n        this._onDoubleClick(event);\n      } else if (event.detail === 3) {\n        this._onTripleClick(event);\n      }\n    }\n\n    this._addMouseDownListeners();\n    this.refresh(true);\n  }\n\n  /**\n   * Adds listeners when mousedown is triggered.\n   */\n  private _addMouseDownListeners(): void {\n    // Listen on the document so that dragging outside of viewport works\n    if (this._screenElement.ownerDocument) {\n      this._screenElement.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n      this._screenElement.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n    }\n    this._dragScrollIntervalTimer = window.setInterval(() => this._dragScroll(), DRAG_SCROLL_INTERVAL);\n  }\n\n  /**\n   * Removes the listeners that are registered when mousedown is triggered.\n   */\n  private _removeMouseDownListeners(): void {\n    if (this._screenElement.ownerDocument) {\n      this._screenElement.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n      this._screenElement.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n    }\n    clearInterval(this._dragScrollIntervalTimer);\n    this._dragScrollIntervalTimer = undefined;\n  }\n\n  /**\n   * Performs an incremental click, setting the selection end position to the mouse\n   * position.\n   * @param event The mouse event.\n   */\n  private _onIncrementalClick(event: MouseEvent): void {\n    if (this._model.selectionStart) {\n      this._model.selectionEnd = this._getMouseBufferCoords(event);\n    }\n  }\n\n  /**\n   * Performs a single click, resetting relevant state and setting the selection\n   * start position.\n   * @param event The mouse event.\n   */\n  private _onSingleClick(event: MouseEvent): void {\n    this._model.selectionStartLength = 0;\n    this._model.isSelectAllActive = false;\n    this._activeSelectionMode = this.shouldColumnSelect(event) ? SelectionMode.COLUMN : SelectionMode.NORMAL;\n\n    // Initialize the new selection\n    this._model.selectionStart = this._getMouseBufferCoords(event);\n    if (!this._model.selectionStart) {\n      return;\n    }\n    this._model.selectionEnd = undefined;\n\n    // Ensure the line exists\n    const line = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);\n    if (!line) {\n      return;\n    }\n\n    // Return early if the click event is not in the buffer (eg. in scroll bar)\n    if (line.length === this._model.selectionStart[0]) {\n      return;\n    }\n\n    // If the mouse is over the second half of a wide character, adjust the\n    // selection to cover the whole character\n    if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n      this._model.selectionStart[0]++;\n    }\n  }\n\n  /**\n   * Performs a double click, selecting the current word.\n   * @param event The mouse event.\n   */\n  private _onDoubleClick(event: MouseEvent): void {\n    if (this._selectWordAtCursor(event, true)) {\n      this._activeSelectionMode = SelectionMode.WORD;\n    }\n  }\n\n  /**\n   * Performs a triple click, selecting the current line and activating line\n   * select mode.\n   * @param event The mouse event.\n   */\n  private _onTripleClick(event: MouseEvent): void {\n    const coords = this._getMouseBufferCoords(event);\n    if (coords) {\n      this._activeSelectionMode = SelectionMode.LINE;\n      this._selectLineAt(coords[1]);\n    }\n  }\n\n  /**\n   * Returns whether the selection manager should operate in column select mode\n   * @param event the mouse or keyboard event\n   */\n  public shouldColumnSelect(event: KeyboardEvent | MouseEvent): boolean {\n    return event.altKey && !(Browser.isMac && this._optionsService.options.macOptionClickForcesSelection);\n  }\n\n  /**\n   * Handles the mousemove event when the mouse button is down, recording the\n   * end of the selection and refreshing the selection.\n   * @param event The mousemove event.\n   */\n  private _onMouseMove(event: MouseEvent): void {\n    // If the mousemove listener is active it means that a selection is\n    // currently being made, we should stop propagation to prevent mouse events\n    // to be sent to the pty.\n    event.stopImmediatePropagation();\n\n    // Do nothing if there is no selection start, this can happen if the first\n    // click in the terminal is an incremental click\n    if (!this._model.selectionStart) {\n      return;\n    }\n\n    // Record the previous position so we know whether to redraw the selection\n    // at the end.\n    const previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n\n    // Set the initial selection end based on the mouse coordinates\n    this._model.selectionEnd = this._getMouseBufferCoords(event);\n    if (!this._model.selectionEnd) {\n      this.refresh(true);\n      return;\n    }\n\n    // Select the entire line if line select mode is active.\n    if (this._activeSelectionMode === SelectionMode.LINE) {\n      if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n        this._model.selectionEnd[0] = 0;\n      } else {\n        this._model.selectionEnd[0] = this._bufferService.cols;\n      }\n    } else if (this._activeSelectionMode === SelectionMode.WORD) {\n      this._selectToWordAt(this._model.selectionEnd);\n    }\n\n    // Determine the amount of scrolling that will happen.\n    this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n\n    // If the cursor was above or below the viewport, make sure it's at the\n    // start or end of the viewport respectively. This should only happen when\n    // NOT in column select mode.\n    if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n      if (this._dragScrollAmount > 0) {\n        this._model.selectionEnd[0] = this._bufferService.cols;\n      } else if (this._dragScrollAmount < 0) {\n        this._model.selectionEnd[0] = 0;\n      }\n    }\n\n    // If the character is a wide character include the cell to the right in the\n    // selection. Note that selections at the very end of the line will never\n    // have a character.\n    const buffer = this._bufferService.buffer;\n    if (this._model.selectionEnd[1] < buffer.lines.length) {\n      const line = buffer.lines.get(this._model.selectionEnd[1]);\n      if (line && line.hasWidth(this._model.selectionEnd[0]) === 0) {\n        this._model.selectionEnd[0]++;\n      }\n    }\n\n    // Only draw here if the selection changes.\n    if (!previousSelectionEnd ||\n      previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n      previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n      this.refresh(true);\n    }\n  }\n\n  /**\n   * The callback that occurs every DRAG_SCROLL_INTERVAL ms that does the\n   * scrolling of the viewport.\n   */\n  private _dragScroll(): void {\n    if (!this._model.selectionEnd || !this._model.selectionStart) {\n      return;\n    }\n    if (this._dragScrollAmount) {\n      this._onRequestScrollLines.fire({ amount: this._dragScrollAmount, suppressScrollEvent: false });\n      // Re-evaluate selection\n      // If the cursor was above or below the viewport, make sure it's at the\n      // start or end of the viewport respectively. This should only happen when\n      // NOT in column select mode.\n      const buffer = this._bufferService.buffer;\n      if (this._dragScrollAmount > 0) {\n        if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n          this._model.selectionEnd[0] = this._bufferService.cols;\n        }\n        this._model.selectionEnd[1] = Math.min(buffer.ydisp + this._bufferService.rows, buffer.lines.length - 1);\n      } else {\n        if (this._activeSelectionMode !== SelectionMode.COLUMN) {\n          this._model.selectionEnd[0] = 0;\n        }\n        this._model.selectionEnd[1] = buffer.ydisp;\n      }\n      this.refresh();\n    }\n  }\n\n  /**\n   * Handles the mouseup event, removing the mousedown listeners.\n   * @param event The mouseup event.\n   */\n  private _onMouseUp(event: MouseEvent): void {\n    const timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n\n    this._removeMouseDownListeners();\n\n    if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME && event.altKey && this._optionsService.getOption('altClickMovesCursor')) {\n      if (this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {\n        const coordinates = this._mouseService.getCoords(\n          event,\n          this._element,\n          this._bufferService.cols,\n          this._bufferService.rows,\n          false\n        );\n        if (coordinates && coordinates[0] !== undefined && coordinates[1] !== undefined) {\n          const sequence = moveToCellSequence(coordinates[0] - 1, coordinates[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);\n          this._coreService.triggerDataEvent(sequence, true);\n        }\n      }\n    } else {\n      this._fireEventIfSelectionChanged();\n    }\n  }\n\n  private _fireEventIfSelectionChanged(): void {\n    const start = this._model.finalSelectionStart;\n    const end = this._model.finalSelectionEnd;\n    const hasSelection = !!start && !!end && (start[0] !== end[0] || start[1] !== end[1]);\n\n    if (!hasSelection) {\n      if (this._oldHasSelection) {\n        this._fireOnSelectionChange(start, end, hasSelection);\n      }\n      return;\n    }\n\n    // Sanity check, these should not be undefined as there is a selection\n    if (!start || !end) {\n      return;\n    }\n\n    if (!this._oldSelectionStart || !this._oldSelectionEnd || (\n      start[0] !== this._oldSelectionStart[0] || start[1] !== this._oldSelectionStart[1] ||\n      end[0] !== this._oldSelectionEnd[0] || end[1] !== this._oldSelectionEnd[1])) {\n\n      this._fireOnSelectionChange(start, end, hasSelection);\n    }\n  }\n\n  private _fireOnSelectionChange(start: [number, number] | undefined, end: [number, number] | undefined, hasSelection: boolean): void {\n    this._oldSelectionStart = start;\n    this._oldSelectionEnd = end;\n    this._oldHasSelection = hasSelection;\n    this._onSelectionChange.fire();\n  }\n\n  private _onBufferActivate(e: {activeBuffer: IBuffer, inactiveBuffer: IBuffer}): void {\n    this.clearSelection();\n    // Only adjust the selection on trim, shiftElements is rarely used (only in\n    // reverseIndex) and delete in a splice is only ever used when the same\n    // number of elements was just added. Given this is could actually be\n    // beneficial to leave the selection as is for these cases.\n    this._trimListener.dispose();\n    this._trimListener = e.activeBuffer.lines.onTrim(amount => this._onTrim(amount));\n  }\n\n  /**\n   * Converts a viewport column to the character index on the buffer line, the\n   * latter takes into account wide characters.\n   * @param coords The coordinates to find the 2 index for.\n   */\n  private _convertViewportColToCharacterIndex(bufferLine: IBufferLine, coords: [number, number]): number {\n    let charIndex = coords[0];\n    for (let i = 0; coords[0] >= i; i++) {\n      const length = bufferLine.loadCell(i, this._workCell).getChars().length;\n      if (this._workCell.getWidth() === 0) {\n        // Wide characters aren't included in the line string so decrement the\n        // index so the index is back on the wide character.\n        charIndex--;\n      } else if (length > 1 && coords[0] !== i) {\n        // Emojis take up multiple characters, so adjust accordingly. For these\n        // we don't want ot include the character at the column as we're\n        // returning the start index in the string, not the end index.\n        charIndex += length - 1;\n      }\n    }\n    return charIndex;\n  }\n\n  public setSelection(col: number, row: number, length: number): void {\n    this._model.clearSelection();\n    this._removeMouseDownListeners();\n    this._model.selectionStart = [col, row];\n    this._model.selectionStartLength = length;\n    this.refresh();\n  }\n\n  public rightClickSelect(ev: MouseEvent): void {\n    if (!this._isClickInSelection(ev)) {\n      if (this._selectWordAtCursor(ev, false)) {\n        this.refresh(true);\n      }\n      this._fireEventIfSelectionChanged();\n    }\n  }\n\n  /**\n   * Gets positional information for the word at the coordinated specified.\n   * @param coords The coordinates to get the word at.\n   */\n  private _getWordAt(coords: [number, number], allowWhitespaceOnlySelection: boolean, followWrappedLinesAbove: boolean = true, followWrappedLinesBelow: boolean = true): IWordPosition | undefined {\n    // Ensure coords are within viewport (eg. not within scroll bar)\n    if (coords[0] >= this._bufferService.cols) {\n      return undefined;\n    }\n\n    const buffer = this._bufferService.buffer;\n    const bufferLine = buffer.lines.get(coords[1]);\n    if (!bufferLine) {\n      return undefined;\n    }\n\n    const line = buffer.translateBufferLineToString(coords[1], false);\n\n    // Get actual index, taking into consideration wide characters\n    let startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n    let endIndex = startIndex;\n\n    // Record offset to be used later\n    const charOffset = coords[0] - startIndex;\n    let leftWideCharCount = 0;\n    let rightWideCharCount = 0;\n    let leftLongCharOffset = 0;\n    let rightLongCharOffset = 0;\n\n    if (line.charAt(startIndex) === ' ') {\n      // Expand until non-whitespace is hit\n      while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n        startIndex--;\n      }\n      while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n        endIndex++;\n      }\n    } else {\n      // Expand until whitespace is hit. This algorithm works by scanning left\n      // and right from the starting position, keeping both the index format\n      // (line) and the column format (bufferLine) in sync. When a wide\n      // character is hit, it is recorded and the column index is adjusted.\n      let startCol = coords[0];\n      let endCol = coords[0];\n\n      // Consider the initial position, skip it and increment the wide char\n      // variable\n      if (bufferLine.getWidth(startCol) === 0) {\n        leftWideCharCount++;\n        startCol--;\n      }\n      if (bufferLine.getWidth(endCol) === 2) {\n        rightWideCharCount++;\n        endCol++;\n      }\n\n      // Adjust the end index for characters whose length are > 1 (emojis)\n      const length = bufferLine.getString(endCol).length;\n      if (length > 1) {\n        rightLongCharOffset += length - 1;\n        endIndex += length - 1;\n      }\n\n      // Expand the string in both directions until a space is hit\n      while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n        bufferLine.loadCell(startCol - 1, this._workCell);\n        const length = this._workCell.getChars().length;\n        if (this._workCell.getWidth() === 0) {\n          // If the next character is a wide char, record it and skip the column\n          leftWideCharCount++;\n          startCol--;\n        } else if (length > 1) {\n          // If the next character's string is longer than 1 char (eg. emoji),\n          // adjust the index\n          leftLongCharOffset += length - 1;\n          startIndex -= length - 1;\n        }\n        startIndex--;\n        startCol--;\n      }\n      while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n        bufferLine.loadCell(endCol + 1, this._workCell);\n        const length = this._workCell.getChars().length;\n        if (this._workCell.getWidth() === 2) {\n          // If the next character is a wide char, record it and skip the column\n          rightWideCharCount++;\n          endCol++;\n        } else if (length > 1) {\n          // If the next character's string is longer than 1 char (eg. emoji),\n          // adjust the index\n          rightLongCharOffset += length - 1;\n          endIndex += length - 1;\n        }\n        endIndex++;\n        endCol++;\n      }\n    }\n\n    // Incremenet the end index so it is at the start of the next character\n    endIndex++;\n\n    // Calculate the start _column_, converting the the string indexes back to\n    // column coordinates.\n    let start =\n        startIndex // The index of the selection's start char in the line string\n        + charOffset // The difference between the initial char's column and index\n        - leftWideCharCount // The number of wide chars left of the initial char\n        + leftLongCharOffset; // The number of additional chars left of the initial char added by columns with strings longer than 1 (emojis)\n\n    // Calculate the length in _columns_, converting the the string indexes back\n    // to column coordinates.\n    let length = Math.min(this._bufferService.cols, // Disallow lengths larger than the terminal cols\n      endIndex // The index of the selection's end char in the line string\n      - startIndex // The index of the selection's start char in the line string\n      + leftWideCharCount // The number of wide chars left of the initial char\n      + rightWideCharCount // The number of wide chars right of the initial char (inclusive)\n      - leftLongCharOffset // The number of additional chars left of the initial char added by columns with strings longer than 1 (emojis)\n      - rightLongCharOffset); // The number of additional chars right of the initial char (inclusive) added by columns with strings longer than 1 (emojis)\n\n    if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n      return undefined;\n    }\n\n    // Recurse upwards if the line is wrapped and the word wraps to the above line\n    if (followWrappedLinesAbove) {\n      if (start === 0 && bufferLine.getCodePoint(0) !== 32 /* ' ' */) {\n        const previousBufferLine = buffer.lines.get(coords[1] - 1);\n        if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._bufferService.cols - 1) !== 32 /* ' ' */) {\n          const previousLineWordPosition = this._getWordAt([this._bufferService.cols - 1, coords[1] - 1], false, true, false);\n          if (previousLineWordPosition) {\n            const offset = this._bufferService.cols - previousLineWordPosition.start;\n            start -= offset;\n            length += offset;\n          }\n        }\n      }\n    }\n\n    // Recurse downwards if the line is wrapped and the word wraps to the next line\n    if (followWrappedLinesBelow) {\n      if (start + length === this._bufferService.cols && bufferLine.getCodePoint(this._bufferService.cols - 1) !== 32 /* ' ' */) {\n        const nextBufferLine = buffer.lines.get(coords[1] + 1);\n        if (nextBufferLine?.isWrapped && nextBufferLine.getCodePoint(0) !== 32 /* ' ' */) {\n          const nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n          if (nextLineWordPosition) {\n            length += nextLineWordPosition.length;\n          }\n        }\n      }\n    }\n\n    return { start, length };\n  }\n\n  /**\n   * Selects the word at the coordinates specified.\n   * @param coords The coordinates to get the word at.\n   * @param allowWhitespaceOnlySelection If whitespace should be selected\n   */\n  protected _selectWordAt(coords: [number, number], allowWhitespaceOnlySelection: boolean): void {\n    const wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n    if (wordPosition) {\n      // Adjust negative start value\n      while (wordPosition.start < 0) {\n        wordPosition.start += this._bufferService.cols;\n        coords[1]--;\n      }\n      this._model.selectionStart = [wordPosition.start, coords[1]];\n      this._model.selectionStartLength = wordPosition.length;\n    }\n  }\n\n  /**\n   * Sets the selection end to the word at the coordinated specified.\n   * @param coords The coordinates to get the word at.\n   */\n  private _selectToWordAt(coords: [number, number]): void {\n    const wordPosition = this._getWordAt(coords, true);\n    if (wordPosition) {\n      let endRow = coords[1];\n\n      // Adjust negative start value\n      while (wordPosition.start < 0) {\n        wordPosition.start += this._bufferService.cols;\n        endRow--;\n      }\n\n      // Adjust wrapped length value, this only needs to happen when values are reversed as in that\n      // case we're interested in the start of the word, not the end\n      if (!this._model.areSelectionValuesReversed()) {\n        while (wordPosition.start + wordPosition.length > this._bufferService.cols) {\n          wordPosition.length -= this._bufferService.cols;\n          endRow++;\n        }\n      }\n\n      this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n    }\n  }\n\n  /**\n   * Gets whether the character is considered a word separator by the select\n   * word logic.\n   * @param char The character to check.\n   */\n  private _isCharWordSeparator(cell: CellData): boolean {\n    // Zero width characters are never separators as they are always to the\n    // right of wide characters\n    if (cell.getWidth() === 0) {\n      return false;\n    }\n    return this._optionsService.options.wordSeparator.indexOf(cell.getChars()) >= 0;\n  }\n\n  /**\n   * Selects the line specified.\n   * @param line The line index.\n   */\n  protected _selectLineAt(line: number): void {\n    const wrappedRange = this._bufferService.buffer.getWrappedRangeForLine(line);\n    this._model.selectionStart = [0, wrappedRange.first];\n    this._model.selectionEnd = [this._bufferService.cols, wrappedRange.last];\n    this._model.selectionStartLength = 0;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IEvent } from 'common/EventEmitter';\nimport { IRenderDimensions, IRenderer } from 'browser/renderer/Types';\nimport { IColorSet } from 'browser/Types';\nimport { ISelectionRedrawRequestEvent as ISelectionRequestRedrawEvent, ISelectionRequestScrollLinesEvent } from 'browser/selection/Types';\nimport { createDecorator } from 'common/services/ServiceRegistry';\nimport { IDisposable } from 'common/Types';\n\nexport const ICharSizeService = createDecorator<ICharSizeService>('CharSizeService');\nexport interface ICharSizeService {\n  serviceBrand: undefined;\n\n  readonly width: number;\n  readonly height: number;\n  readonly hasValidSize: boolean;\n\n  readonly onCharSizeChange: IEvent<void>;\n\n  measure(): void;\n}\n\nexport const ICoreBrowserService = createDecorator<ICoreBrowserService>('CoreBrowserService');\nexport interface ICoreBrowserService {\n  serviceBrand: undefined;\n\n  readonly isFocused: boolean;\n}\n\nexport const IMouseService = createDecorator<IMouseService>('MouseService');\nexport interface IMouseService {\n  serviceBrand: undefined;\n\n  getCoords(event: {clientX: number, clientY: number}, element: HTMLElement, colCount: number, rowCount: number, isSelection?: boolean): [number, number] | undefined;\n  getRawByteCoords(event: MouseEvent, element: HTMLElement, colCount: number, rowCount: number): { x: number, y: number } | undefined;\n}\n\nexport const IRenderService = createDecorator<IRenderService>('RenderService');\nexport interface IRenderService extends IDisposable {\n  serviceBrand: undefined;\n\n  onDimensionsChange: IEvent<IRenderDimensions>;\n  /**\n   * Fires when buffer changes are rendered. This does not fire when only cursor\n   * or selections are rendered.\n   */\n  onRenderedBufferChange: IEvent<{ start: number, end: number }>;\n  onRefreshRequest: IEvent<{ start: number, end: number }>;\n\n  dimensions: IRenderDimensions;\n\n  refreshRows(start: number, end: number): void;\n  clearTextureAtlas(): void;\n  resize(cols: number, rows: number): void;\n  changeOptions(): void;\n  setRenderer(renderer: IRenderer): void;\n  setColors(colors: IColorSet): void;\n  onDevicePixelRatioChange(): void;\n  onResize(cols: number, rows: number): void;\n  // TODO: Is this useful when we have onResize?\n  onCharSizeChanged(): void;\n  onBlur(): void;\n  onFocus(): void;\n  onSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void;\n  onCursorMove(): void;\n  clear(): void;\n}\n\nexport const ISelectionService = createDecorator<ISelectionService>('SelectionService');\nexport interface ISelectionService {\n  serviceBrand: undefined;\n\n  readonly selectionText: string;\n  readonly hasSelection: boolean;\n  readonly selectionStart: [number, number] | undefined;\n  readonly selectionEnd: [number, number] | undefined;\n\n  readonly onLinuxMouseSelection: IEvent<string>;\n  readonly onRequestRedraw: IEvent<ISelectionRequestRedrawEvent>;\n  readonly onRequestScrollLines: IEvent<ISelectionRequestScrollLinesEvent>;\n  readonly onSelectionChange: IEvent<void>;\n\n  disable(): void;\n  enable(): void;\n  reset(): void;\n  setSelection(row: number, col: number, length: number): void;\n  selectAll(): void;\n  selectLines(start: number, end: number): void;\n  clearSelection(): void;\n  rightClickSelect(event: MouseEvent): void;\n  shouldColumnSelect(event: KeyboardEvent | MouseEvent): boolean;\n  shouldForceSelection(event: MouseEvent): boolean;\n  refresh(isLinuxMouseSelection?: boolean): void;\n  onMouseDown(event: MouseEvent): void;\n}\n\nexport const ISoundService = createDecorator<ISoundService>('SoundService');\nexport interface ISoundService {\n  serviceBrand: undefined;\n\n  playBellSound(): void;\n}\n\n\nexport const ICharacterJoinerService = createDecorator<ICharacterJoinerService>('CharacterJoinerService');\nexport interface ICharacterJoinerService {\n  serviceBrand: undefined;\n\n  register(handler: (text: string) => [number, number][]): number;\n  deregister(joinerId: number): boolean;\n  getJoinedCharacters(row: number): [number, number][];\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService } from 'common/services/Services';\nimport { ISoundService } from 'browser/services/Services';\n\nexport class SoundService implements ISoundService {\n  public serviceBrand: undefined;\n\n  private static _audioContext: AudioContext;\n\n  public static get audioContext(): AudioContext | null {\n    if (!SoundService._audioContext) {\n      const audioContextCtor: typeof AudioContext = (window as any).AudioContext || (window as any).webkitAudioContext;\n      if (!audioContextCtor) {\n        console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n        return null;\n      }\n      SoundService._audioContext = new audioContextCtor();\n    }\n    return SoundService._audioContext;\n  }\n\n  constructor(\n    @IOptionsService private _optionsService: IOptionsService\n  ) {\n  }\n\n  public playBellSound(): void {\n    const ctx = SoundService.audioContext;\n    if (!ctx) {\n      return;\n    }\n    const bellAudioSource = ctx.createBufferSource();\n    ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)), (buffer) => {\n      bellAudioSource.buffer = buffer;\n      bellAudioSource.connect(ctx.destination);\n      bellAudioSource.start(0);\n    });\n  }\n\n  private _base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = window.atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n\n    for (let i = 0; i < len; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n\n    return bytes.buffer;\n  }\n\n  private _removeMimeType(dataURI: string): string {\n    // Split the input to get the mime-type and the data itself\n    const splitUri = dataURI.split(',');\n\n    // Return only the data\n    return splitUri[1];\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICircularList } from 'common/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\n\nexport interface IInsertEvent {\n  index: number;\n  amount: number;\n}\n\nexport interface IDeleteEvent {\n  index: number;\n  amount: number;\n}\n\n/**\n * Represents a circular list; a list with a maximum size that wraps around when push is called,\n * overriding values at the start of the list.\n */\nexport class CircularList<T> implements ICircularList<T> {\n  protected _array: (T | undefined)[];\n  private _startIndex: number;\n  private _length: number;\n\n  public onDeleteEmitter = new EventEmitter<IDeleteEvent>();\n  public get onDelete(): IEvent<IDeleteEvent> { return this.onDeleteEmitter.event; }\n  public onInsertEmitter = new EventEmitter<IInsertEvent>();\n  public get onInsert(): IEvent<IInsertEvent> { return this.onInsertEmitter.event; }\n  public onTrimEmitter = new EventEmitter<number>();\n  public get onTrim(): IEvent<number> { return this.onTrimEmitter.event; }\n\n  constructor(\n    private _maxLength: number\n  ) {\n    this._array = new Array<T>(this._maxLength);\n    this._startIndex = 0;\n    this._length = 0;\n  }\n\n  public get maxLength(): number {\n    return this._maxLength;\n  }\n\n  public set maxLength(newMaxLength: number) {\n    // There was no change in maxLength, return early.\n    if (this._maxLength === newMaxLength) {\n      return;\n    }\n\n    // Reconstruct array, starting at index 0. Only transfer values from the\n    // indexes 0 to length.\n    const newArray = new Array<T | undefined>(newMaxLength);\n    for (let i = 0; i < Math.min(newMaxLength, this.length); i++) {\n      newArray[i] = this._array[this._getCyclicIndex(i)];\n    }\n    this._array = newArray;\n    this._maxLength = newMaxLength;\n    this._startIndex = 0;\n  }\n\n  public get length(): number {\n    return this._length;\n  }\n\n  public set length(newLength: number) {\n    if (newLength > this._length) {\n      for (let i = this._length; i < newLength; i++) {\n        this._array[i] = undefined;\n      }\n    }\n    this._length = newLength;\n  }\n\n  /**\n   * Gets the value at an index.\n   *\n   * Note that for performance reasons there is no bounds checking here, the index reference is\n   * circular so this should always return a value and never throw.\n   * @param index The index of the value to get.\n   * @return The value corresponding to the index.\n   */\n  public get(index: number): T | undefined {\n    return this._array[this._getCyclicIndex(index)];\n  }\n\n  /**\n   * Sets the value at an index.\n   *\n   * Note that for performance reasons there is no bounds checking here, the index reference is\n   * circular so this should always return a value and never throw.\n   * @param index The index to set.\n   * @param value The value to set.\n   */\n  public set(index: number, value: T | undefined): void {\n    this._array[this._getCyclicIndex(index)] = value;\n  }\n\n  /**\n   * Pushes a new value onto the list, wrapping around to the start of the array, overriding index 0\n   * if the maximum length is reached.\n   * @param value The value to push onto the list.\n   */\n  public push(value: T): void {\n    this._array[this._getCyclicIndex(this._length)] = value;\n    if (this._length === this._maxLength) {\n      this._startIndex = ++this._startIndex % this._maxLength;\n      this.onTrimEmitter.fire(1);\n    } else {\n      this._length++;\n    }\n  }\n\n  /**\n   * Advance ringbuffer index and return current element for recycling.\n   * Note: The buffer must be full for this method to work.\n   * @throws When the buffer is not full.\n   */\n  public recycle(): T {\n    if (this._length !== this._maxLength) {\n      throw new Error('Can only recycle when the buffer is full');\n    }\n    this._startIndex = ++this._startIndex % this._maxLength;\n    this.onTrimEmitter.fire(1);\n    return this._array[this._getCyclicIndex(this._length - 1)]!;\n  }\n\n  /**\n   * Ringbuffer is at max length.\n   */\n  public get isFull(): boolean {\n    return this._length === this._maxLength;\n  }\n\n  /**\n   * Removes and returns the last value on the list.\n   * @return The popped value.\n   */\n  public pop(): T | undefined {\n    return this._array[this._getCyclicIndex(this._length-- - 1)];\n  }\n\n  /**\n   * Deletes and/or inserts items at a particular index (in that order). Unlike\n   * Array.prototype.splice, this operation does not return the deleted items as a new array in\n   * order to save creating a new array. Note that this operation may shift all values in the list\n   * in the worst case.\n   * @param start The index to delete and/or insert.\n   * @param deleteCount The number of elements to delete.\n   * @param items The items to insert.\n   */\n  public splice(start: number, deleteCount: number, ...items: T[]): void {\n    // Delete items\n    if (deleteCount) {\n      for (let i = start; i < this._length - deleteCount; i++) {\n        this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n      }\n      this._length -= deleteCount;\n      this.onDeleteEmitter.fire({ index: start, amount: deleteCount });\n    }\n\n    // Add items\n    for (let i = this._length - 1; i >= start; i--) {\n      this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n    }\n    for (let i = 0; i < items.length; i++) {\n      this._array[this._getCyclicIndex(start + i)] = items[i];\n    }\n    if (items.length) {\n      this.onInsertEmitter.fire({ index: start, amount: items.length });\n    }\n\n    // Adjust length as needed\n    if (this._length + items.length > this._maxLength) {\n      const countToTrim = (this._length + items.length) - this._maxLength;\n      this._startIndex += countToTrim;\n      this._length = this._maxLength;\n      this.onTrimEmitter.fire(countToTrim);\n    } else {\n      this._length += items.length;\n    }\n  }\n\n  /**\n   * Trims a number of items from the start of the list.\n   * @param count The number of items to remove.\n   */\n  public trimStart(count: number): void {\n    if (count > this._length) {\n      count = this._length;\n    }\n    this._startIndex += count;\n    this._length -= count;\n    this.onTrimEmitter.fire(count);\n  }\n\n  public shiftElements(start: number, count: number, offset: number): void {\n    if (count <= 0) {\n      return;\n    }\n    if (start < 0 || start >= this._length) {\n      throw new Error('start argument out of range');\n    }\n    if (start + offset < 0) {\n      throw new Error('Cannot shift elements in list beyond index 0');\n    }\n\n    if (offset > 0) {\n      for (let i = count - 1; i >= 0; i--) {\n        this.set(start + i + offset, this.get(start + i));\n      }\n      const expandListBy = (start + count + offset) - this._length;\n      if (expandListBy > 0) {\n        this._length += expandListBy;\n        while (this._length > this._maxLength) {\n          this._length--;\n          this._startIndex++;\n          this.onTrimEmitter.fire(1);\n        }\n      }\n    } else {\n      for (let i = 0; i < count; i++) {\n        this.set(start + i + offset, this.get(start + i));\n      }\n    }\n  }\n\n  /**\n   * Gets the cyclic index for the specified regular index. The cyclic index can then be used on the\n   * backing array to get the element associated with the regular index.\n   * @param index The regular index.\n   * @returns The cyclic index.\n   */\n  private _getCyclicIndex(index: number): number {\n    return (this._startIndex + index) % this._maxLength;\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/*\n * A simple utility for cloning values\n */\nexport function clone<T>(val: T, depth: number = 5): T {\n  if (typeof val !== 'object') {\n    return val;\n  }\n\n  // If we're cloning an array, use an array as the base, otherwise use an object\n  const clonedObject: any = Array.isArray(val) ? [] : {};\n\n  for (const key in val) {\n    // Recursively clone eack item unless we're at the maximum depth\n    clonedObject[key] = depth <= 1 ? val[key] : (val[key] && clone(val[key], depth - 1));\n  }\n\n  return clonedObject as T;\n}\n", "/**\n * Copyright (c) 2014-2020 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n *\n * Terminal Emulation References:\n *   http://vt100.net/\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.txt\n *   http://invisible-island.net/xterm/ctlseqs/ctlseqs.html\n *   http://invisible-island.net/vttest/\n *   http://www.inwap.com/pdp10/ansicode.txt\n *   http://linux.die.net/man/4/console_codes\n *   http://linux.die.net/man/7/urxvt\n */\n\nimport { Disposable } from 'common/Lifecycle';\nimport { IInstantiationService, IOptionsService, IBufferService, ILogService, ICharsetService, ICoreService, ICoreMouseService, IUnicodeService, IDirtyRowService, LogLevelEnum, ITerminalOptions } from 'common/services/Services';\nimport { InstantiationService } from 'common/services/InstantiationService';\nimport { LogService } from 'common/services/LogService';\nimport { BufferService, MINIMUM_COLS, MINIMUM_ROWS } from 'common/services/BufferService';\nimport { OptionsService } from 'common/services/OptionsService';\nimport { IDisposable, IBufferLine, IAttributeData, ICoreTerminal, IKeyboardEvent, IScrollEvent, ScrollSource, ITerminalOptions as IPublicTerminalOptions } from 'common/Types';\nimport { CoreService } from 'common/services/CoreService';\nimport { EventEmitter, IEvent, forwardEvent } from 'common/EventEmitter';\nimport { CoreMouseService } from 'common/services/CoreMouseService';\nimport { DirtyRowService } from 'common/services/DirtyRowService';\nimport { UnicodeService } from 'common/services/UnicodeService';\nimport { CharsetService } from 'common/services/CharsetService';\nimport { updateWindowsModeWrappedState } from 'common/WindowsMode';\nimport { IFunctionIdentifier, IParams } from 'common/parser/Types';\nimport { IBufferSet } from 'common/buffer/Types';\nimport { InputHandler } from 'common/InputHandler';\nimport { WriteBuffer } from 'common/input/WriteBuffer';\n\n// Only trigger this warning a single time per session\nlet hasWriteSyncWarnHappened = false;\n\nexport abstract class CoreTerminal extends Disposable implements ICoreTerminal {\n  protected readonly _instantiationService: IInstantiationService;\n  protected readonly _bufferService: IBufferService;\n  protected readonly _logService: ILogService;\n  protected readonly _charsetService: ICharsetService;\n  protected readonly _dirtyRowService: IDirtyRowService;\n\n  public readonly coreMouseService: ICoreMouseService;\n  public readonly coreService: ICoreService;\n  public readonly unicodeService: IUnicodeService;\n  public readonly optionsService: IOptionsService;\n\n  protected _inputHandler: InputHandler;\n  private _writeBuffer: WriteBuffer;\n  private _windowsMode: IDisposable | undefined;\n\n  private _onBinary = new EventEmitter<string>();\n  public get onBinary(): IEvent<string> { return this._onBinary.event; }\n  private _onData = new EventEmitter<string>();\n  public get onData(): IEvent<string> { return this._onData.event; }\n  protected _onLineFeed = new EventEmitter<void>();\n  public get onLineFeed(): IEvent<void> { return this._onLineFeed.event; }\n  private _onResize = new EventEmitter<{ cols: number, rows: number }>();\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._onResize.event; }\n  protected _onScroll = new EventEmitter<IScrollEvent, void>();\n  /**\n   * Internally we track the source of the scroll but this is meaningless outside the library so\n   * it's filtered out.\n   */\n  protected _onScrollApi?: EventEmitter<number, void>;\n  public get onScroll(): IEvent<number, void> {\n    if (!this._onScrollApi) {\n      this._onScrollApi = new EventEmitter<number, void>();\n      this.register(this._onScroll.event(ev => {\n        this._onScrollApi?.fire(ev.position);\n      }));\n    }\n    return this._onScrollApi.event;\n  }\n\n  public get cols(): number { return this._bufferService.cols; }\n  public get rows(): number { return this._bufferService.rows; }\n  public get buffers(): IBufferSet { return this._bufferService.buffers; }\n  public get options(): ITerminalOptions { return this.optionsService.options; }\n  public set options(options: ITerminalOptions) {\n    for (const key in options) {\n      this.optionsService.options[key] = options[key];\n    }\n  }\n\n  constructor(\n    options: Partial<ITerminalOptions>\n  ) {\n    super();\n\n    // Setup and initialize services\n    this._instantiationService = new InstantiationService();\n    this.optionsService = new OptionsService(options);\n    this._instantiationService.setService(IOptionsService, this.optionsService);\n    this._bufferService = this.register(this._instantiationService.createInstance(BufferService));\n    this._instantiationService.setService(IBufferService, this._bufferService);\n    this._logService = this._instantiationService.createInstance(LogService);\n    this._instantiationService.setService(ILogService, this._logService);\n    this.coreService = this.register(this._instantiationService.createInstance(CoreService, () => this.scrollToBottom()));\n    this._instantiationService.setService(ICoreService, this.coreService);\n    this.coreMouseService = this._instantiationService.createInstance(CoreMouseService);\n    this._instantiationService.setService(ICoreMouseService, this.coreMouseService);\n    this._dirtyRowService = this._instantiationService.createInstance(DirtyRowService);\n    this._instantiationService.setService(IDirtyRowService, this._dirtyRowService);\n    this.unicodeService = this._instantiationService.createInstance(UnicodeService);\n    this._instantiationService.setService(IUnicodeService, this.unicodeService);\n    this._charsetService = this._instantiationService.createInstance(CharsetService);\n    this._instantiationService.setService(ICharsetService, this._charsetService);\n\n    // Register input handler and handle/forward events\n    this._inputHandler = new InputHandler(this._bufferService, this._charsetService, this.coreService, this._dirtyRowService, this._logService, this.optionsService, this.coreMouseService, this.unicodeService);\n    this.register(forwardEvent(this._inputHandler.onLineFeed, this._onLineFeed));\n    this.register(this._inputHandler);\n\n    // Setup listeners\n    this.register(forwardEvent(this._bufferService.onResize, this._onResize));\n    this.register(forwardEvent(this.coreService.onData, this._onData));\n    this.register(forwardEvent(this.coreService.onBinary, this._onBinary));\n    this.register(this.optionsService.onOptionChange(key => this._updateOptions(key)));\n    this.register(this._bufferService.onScroll(event => {\n      this._onScroll.fire({ position: this._bufferService.buffer.ydisp, source: ScrollSource.TERMINAL });\n      this._dirtyRowService.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);\n    }));\n    this.register(this._inputHandler.onScroll(event => {\n      this._onScroll.fire({ position: this._bufferService.buffer.ydisp, source: ScrollSource.TERMINAL });\n      this._dirtyRowService.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);\n    }));\n\n    // Setup WriteBuffer\n    this._writeBuffer = new WriteBuffer((data, promiseResult) => this._inputHandler.parse(data, promiseResult));\n  }\n\n  public dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._windowsMode?.dispose();\n    this._windowsMode = undefined;\n  }\n\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    this._writeBuffer.write(data, callback);\n  }\n\n  /**\n   * Write data to terminal synchonously.\n   *\n   * This method is unreliable with async parser handlers, thus should not\n   * be used anymore. If you need blocking semantics on data input consider\n   * `write` with a callback instead.\n   *\n   * @deprecated Unreliable, will be removed soon.\n   */\n  public writeSync(data: string | Uint8Array, maxSubsequentCalls?: number): void {\n    if (this._logService.logLevel <= LogLevelEnum.WARN && !hasWriteSyncWarnHappened) {\n      this._logService.warn('writeSync is unreliable and will be removed soon.');\n      hasWriteSyncWarnHappened = true;\n    }\n    this._writeBuffer.writeSync(data, maxSubsequentCalls);\n  }\n\n  public resize(x: number, y: number): void {\n    if (isNaN(x) || isNaN(y)) {\n      return;\n    }\n\n    x = Math.max(x, MINIMUM_COLS);\n    y = Math.max(y, MINIMUM_ROWS);\n\n    this._bufferService.resize(x, y);\n  }\n\n  /**\n   * Scroll the terminal down 1 row, creating a blank line.\n   * @param isWrapped Whether the new line is wrapped from the previous line.\n   */\n  public scroll(eraseAttr: IAttributeData, isWrapped: boolean = false): void {\n    this._bufferService.scroll(eraseAttr, isWrapped);\n  }\n\n  /**\n   * Scroll the display of the terminal\n   * @param disp The number of lines to scroll down (negative scroll up).\n   * @param suppressScrollEvent Don't emit the scroll event as scrollLines. This is used\n   * to avoid unwanted events being handled by the viewport when the event was triggered from the\n   * viewport originally.\n   */\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void {\n    this._bufferService.scrollLines(disp, suppressScrollEvent, source);\n  }\n\n  /**\n   * Scroll the display of the terminal by a number of pages.\n   * @param pageCount The number of pages to scroll (negative scrolls up).\n   */\n  public scrollPages(pageCount: number): void {\n    this._bufferService.scrollPages(pageCount);\n  }\n\n  /**\n   * Scrolls the display of the terminal to the top.\n   */\n  public scrollToTop(): void {\n    this._bufferService.scrollToTop();\n  }\n\n  /**\n   * Scrolls the display of the terminal to the bottom.\n   */\n  public scrollToBottom(): void {\n    this._bufferService.scrollToBottom();\n  }\n\n  public scrollToLine(line: number): void {\n    this._bufferService.scrollToLine(line);\n  }\n\n  /** Add handler for ESC escape sequence. See xterm.d.ts for details. */\n  public registerEscHandler(id: IFunctionIdentifier, callback: () => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerEscHandler(id, callback);\n  }\n\n  /** Add handler for DCS escape sequence. See xterm.d.ts for details. */\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerDcsHandler(id, callback);\n  }\n\n  /** Add handler for CSI escape sequence. See xterm.d.ts for details. */\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerCsiHandler(id, callback);\n  }\n\n  /** Add handler for OSC escape sequence. See xterm.d.ts for details. */\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._inputHandler.registerOscHandler(ident, callback);\n  }\n\n  protected _setup(): void {\n    if (this.optionsService.options.windowsMode) {\n      this._enableWindowsMode();\n    }\n  }\n\n  public reset(): void {\n    this._inputHandler.reset();\n    this._bufferService.reset();\n    this._charsetService.reset();\n    this.coreService.reset();\n    this.coreMouseService.reset();\n  }\n\n  protected _updateOptions(key: string): void {\n    // TODO: These listeners should be owned by individual components\n    switch (key) {\n      case 'scrollback':\n        this.buffers.resize(this.cols, this.rows);\n        break;\n      case 'windowsMode':\n        if (this.optionsService.options.windowsMode) {\n          this._enableWindowsMode();\n        } else {\n          this._windowsMode?.dispose();\n          this._windowsMode = undefined;\n        }\n        break;\n    }\n  }\n\n  protected _enableWindowsMode(): void {\n    if (!this._windowsMode) {\n      const disposables: IDisposable[] = [];\n      disposables.push(this.onLineFeed(updateWindowsModeWrappedState.bind(null, this._bufferService)));\n      disposables.push(this.registerCsiHandler({ final: 'H' }, () => {\n        updateWindowsModeWrappedState(this._bufferService);\n        return false;\n      }));\n      this._windowsMode = {\n        dispose: () => {\n          for (const d of disposables) {\n            d.dispose();\n          }\n        }\n      };\n    }\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\ninterface IListener<T, U = void> {\n  (arg1: T, arg2: U): void;\n}\n\nexport interface IEvent<T, U = void> {\n  (listener: (arg1: T, arg2: U) => any): IDisposable;\n}\n\nexport interface IEventEmitter<T, U = void> {\n  event: IEvent<T, U>;\n  fire(arg1: T, arg2: U): void;\n  dispose(): void;\n}\n\nexport class EventEmitter<T, U = void> implements IEventEmitter<T, U> {\n  private _listeners: IListener<T, U>[] = [];\n  private _event?: IEvent<T, U>;\n  private _disposed: boolean = false;\n\n  public get event(): IEvent<T, U> {\n    if (!this._event) {\n      this._event = (listener: (arg1: T, arg2: U) => any) => {\n        this._listeners.push(listener);\n        const disposable = {\n          dispose: () => {\n            if (!this._disposed) {\n              for (let i = 0; i < this._listeners.length; i++) {\n                if (this._listeners[i] === listener) {\n                  this._listeners.splice(i, 1);\n                  return;\n                }\n              }\n            }\n          }\n        };\n        return disposable;\n      };\n    }\n    return this._event;\n  }\n\n  public fire(arg1: T, arg2: U): void {\n    const queue: IListener<T, U>[] = [];\n    for (let i = 0; i < this._listeners.length; i++) {\n      queue.push(this._listeners[i]);\n    }\n    for (let i = 0; i < queue.length; i++) {\n      queue[i].call(undefined, arg1, arg2);\n    }\n  }\n\n  public dispose(): void {\n    if (this._listeners) {\n      this._listeners.length = 0;\n    }\n    this._disposed = true;\n  }\n}\n\nexport function forwardEvent<T>(from: IEvent<T>, to: IEventEmitter<T>): IDisposable {\n  return from(e => to.fire(e));\n}\n", "/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n */\n\nimport { IInputHandler, IAttributeData, IDisposable, IWindowOptions, IColorEvent, IParseStack, ColorIndex, ColorRequestType } from 'common/Types';\nimport { C0, C1 } from 'common/data/EscapeSequences';\nimport { CHARSETS, DEFAULT_CHARSET } from 'common/data/Charsets';\nimport { EscapeSequenceParser } from 'common/parser/EscapeSequenceParser';\nimport { Disposable } from 'common/Lifecycle';\nimport { concat } from 'common/TypedArrayUtils';\nimport { StringToUtf32, stringFromCodePoint, utf32ToString, Utf8ToUtf32 } from 'common/input/TextDecoder';\nimport { DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IParsingState, IDcsHandler, IEscapeSequenceParser, IParams, IFunctionIdentifier } from 'common/parser/Types';\nimport { NULL_CELL_CODE, NULL_CELL_WIDTH, Attributes, FgFlags, BgFlags, Content, UnderlineStyle } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { ICoreService, IBufferService, IOptionsService, ILogService, IDirtyRowService, ICoreMouseService, ICharsetService, IUnicodeService, LogLevelEnum } from 'common/services/Services';\nimport { OscHandler } from 'common/parser/OscParser';\nimport { DcsHandler } from 'common/parser/DcsParser';\nimport { IBuffer } from 'common/buffer/Types';\nimport { parseColor } from 'common/input/XParseColor';\n\n/**\n * Map collect to glevel. Used in `selectCharset`.\n */\nconst GLEVEL: { [key: string]: number } = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\n\n/**\n * VT commands done by the parser - FIXME: move this to the parser?\n */\n// @vt: #Y   ESC   CSI   \"Control Sequence Introducer\"   \"ESC [\"   \"Start of a CSI sequence.\"\n// @vt: #Y   ESC   OSC   \"Operating System Command\"      \"ESC ]\"   \"Start of an OSC sequence.\"\n// @vt: #Y   ESC   DCS   \"Device Control String\"         \"ESC P\"   \"Start of a DCS sequence.\"\n// @vt: #Y   ESC   ST    \"String Terminator\"             \"ESC \\\"   \"Terminator used for string type sequences.\"\n// @vt: #Y   ESC   PM    \"Privacy Message\"               \"ESC ^\"   \"Start of a privacy message.\"\n// @vt: #Y   ESC   APC   \"Application Program Command\"   \"ESC _\"   \"Start of an APC sequence.\"\n// @vt: #Y   C1    CSI   \"Control Sequence Introducer\"   \"\\x9B\"    \"Start of a CSI sequence.\"\n// @vt: #Y   C1    OSC   \"Operating System Command\"      \"\\x9D\"    \"Start of an OSC sequence.\"\n// @vt: #Y   C1    DCS   \"Device Control String\"         \"\\x90\"    \"Start of a DCS sequence.\"\n// @vt: #Y   C1    ST    \"String Terminator\"             \"\\x9C\"    \"Terminator used for string type sequences.\"\n// @vt: #Y   C1    PM    \"Privacy Message\"               \"\\x9E\"    \"Start of a privacy message.\"\n// @vt: #Y   C1    APC   \"Application Program Command\"   \"\\x9F\"    \"Start of an APC sequence.\"\n// @vt: #Y   C0    NUL   \"Null\"                          \"\\0, \\x00\"  \"NUL is ignored.\"\n// @vt: #Y   C0    ESC   \"Escape\"                        \"\\e, \\x1B\"  \"Start of a sequence. Cancels any other sequence.\"\n\n/**\n * Document common VT features here that are currently unsupported\n */\n// @vt: #N   DCS   SIXEL   \"SIXEL Graphics\"  \"DCS Ps ; Ps ; Ps ; q \tPt ST\"   \"Draw SIXEL image starting at cursor position.\"\n// @vt: #N   OSC    1   \"Set Icon Name\"  \"OSC 1 ; Pt BEL\"  \"Set icon name.\"\n\n/**\n * Max length of the UTF32 input buffer. Real memory consumption is 4 times higher.\n */\nconst MAX_PARSEBUFFER_LENGTH = 131072;\n\n/**\n * Limit length of title and icon name stacks.\n */\nconst STACK_LIMIT = 10;\n\n// map params to window option\nfunction paramToWindowOption(n: number, opts: IWindowOptions): boolean {\n  if (n > 24) {\n    return opts.setWinLines || false;\n  }\n  switch (n) {\n    case 1: return !!opts.restoreWin;\n    case 2: return !!opts.minimizeWin;\n    case 3: return !!opts.setWinPosition;\n    case 4: return !!opts.setWinSizePixels;\n    case 5: return !!opts.raiseWin;\n    case 6: return !!opts.lowerWin;\n    case 7: return !!opts.refreshWin;\n    case 8: return !!opts.setWinSizeChars;\n    case 9: return !!opts.maximizeWin;\n    case 10: return !!opts.fullscreenWin;\n    case 11: return !!opts.getWinState;\n    case 13: return !!opts.getWinPosition;\n    case 14: return !!opts.getWinSizePixels;\n    case 15: return !!opts.getScreenSizePixels;\n    case 16: return !!opts.getCellSizePixels;\n    case 18: return !!opts.getWinSizeChars;\n    case 19: return !!opts.getScreenSizeChars;\n    case 20: return !!opts.getIconTitle;\n    case 21: return !!opts.getWinTitle;\n    case 22: return !!opts.pushTitle;\n    case 23: return !!opts.popTitle;\n    case 24: return !!opts.setWinLines;\n  }\n  return false;\n}\n\nexport enum WindowsOptionsReportType {\n  GET_WIN_SIZE_PIXELS = 0,\n  GET_CELL_SIZE_PIXELS = 1\n}\n\n// create a warning log if an async handler takes longer than the limit (in ms)\nconst SLOW_ASYNC_LIMIT = 5000;\n\n/**\n * DCS subparser implementations\n */\n\n/**\n * DCS $ q Pt ST\n *   DECRQSS (https://vt100.net/docs/vt510-rm/DECRQSS.html)\n *   Request Status String (DECRQSS), VT420 and up.\n *   Response: DECRPSS (https://vt100.net/docs/vt510-rm/DECRPSS.html)\n *\n * @vt: #P[See limited support below.]  DCS   DECRQSS   \"Request Selection or Setting\"  \"DCS $ q Pt ST\"   \"Request several terminal settings.\"\n * Response is in the form `ESC P 1 $ r Pt ST` for valid requests, where `Pt` contains the corresponding CSI string,\n * `ESC P 0 ST` for invalid requests.\n *\n * Supported requests and responses:\n *\n * | Type                             | Request           | Response (`Pt`)                                       |\n * | -------------------------------- | ----------------- | ----------------------------------------------------- |\n * | Graphic Rendition (SGR)          | `DCS $ q m ST`    | always reporting `0m` (currently broken)              |\n * | Top and Bottom Margins (DECSTBM) | `DCS $ q r ST`    | `Ps ; Ps r`                                           |\n * | Cursor Style (DECSCUSR)          | `DCS $ q SP q ST` | `Ps SP q`                                             |\n * | Protection Attribute (DECSCA)    | `DCS $ q \" q ST`  | always reporting `0 \" q` (DECSCA is unsupported)      |\n * | Conformance Level (DECSCL)       | `DCS $ q \" p ST`  | always reporting `61 ; 1 \" p` (DECSCL is unsupported) |\n *\n *\n * TODO:\n * - fix SGR report\n * - either implement DECSCA or remove the report\n * - either check which conformance is better suited or remove the report completely\n *   --> we are currently a mixture of all up to VT400 but dont follow anyone strictly\n */\nclass DECRQSS implements IDcsHandler {\n  private _data: Uint32Array = new Uint32Array(0);\n\n  constructor(\n    private _bufferService: IBufferService,\n    private _coreService: ICoreService,\n    private _logService: ILogService,\n    private _optionsService: IOptionsService\n  ) { }\n\n  public hook(params: IParams): void {\n    this._data = new Uint32Array(0);\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    this._data = concat(this._data, data.subarray(start, end));\n  }\n\n  public unhook(success: boolean): boolean {\n    if (!success) {\n      this._data = new Uint32Array(0);\n      return true;\n    }\n    const data = utf32ToString(this._data);\n    this._data = new Uint32Array(0);\n    switch (data) {\n      // valid: DCS 1 $ r Pt ST (xterm)\n      case '\"q': // DECSCA\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r0\"q${C0.ESC}\\\\`);\n        break;\n      case '\"p': // DECSCL\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r61;1\"p${C0.ESC}\\\\`);\n        break;\n      case 'r': // DECSTBM\n        const pt = '' + (this._bufferService.buffer.scrollTop + 1) +\n          ';' + (this._bufferService.buffer.scrollBottom + 1) + 'r';\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r${pt}${C0.ESC}\\\\`);\n        break;\n      case 'm': // SGR\n        // TODO: report real settings instead of 0m\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r0m${C0.ESC}\\\\`);\n        break;\n      case ' q': // DECSCUSR\n        const STYLES: { [key: string]: number } = { 'block': 2, 'underline': 4, 'bar': 6 };\n        let style = STYLES[this._optionsService.options.cursorStyle];\n        style -= this._optionsService.options.cursorBlink ? 1 : 0;\n        this._coreService.triggerDataEvent(`${C0.ESC}P1$r${style} q${C0.ESC}\\\\`);\n        break;\n      default:\n        // invalid: DCS 0 $ r Pt ST (xterm)\n        this._logService.debug('Unknown DCS $q %s', data);\n        this._coreService.triggerDataEvent(`${C0.ESC}P0$r${C0.ESC}\\\\`);\n    }\n    return true;\n  }\n}\n\n/**\n * DCS Ps; Ps| Pt ST\n *   DECUDK (https://vt100.net/docs/vt510-rm/DECUDK.html)\n *   not supported\n *\n * @vt: #N  DCS   DECUDK   \"User Defined Keys\"  \"DCS Ps ; Ps | Pt ST\"   \"Definitions for user-defined keys.\"\n */\n\n/**\n * DCS + q Pt ST (xterm)\n *   Request Terminfo String\n *   not implemented\n *\n * @vt: #N  DCS   XTGETTCAP   \"Request Terminfo String\"  \"DCS + q Pt ST\"   \"Request Terminfo String.\"\n */\n\n/**\n * DCS + p Pt ST (xterm)\n *   Set Terminfo Data\n *   not supported\n *\n * @vt: #N  DCS   XTSETTCAP   \"Set Terminfo Data\"  \"DCS + p Pt ST\"   \"Set Terminfo Data.\"\n */\n\n\n\n/**\n * The terminal's standard implementation of IInputHandler, this handles all\n * input from the Parser.\n *\n * Refer to http://invisible-island.net/xterm/ctlseqs/ctlseqs.html to understand\n * each function's header comment.\n */\nexport class InputHandler extends Disposable implements IInputHandler {\n  private _parseBuffer: Uint32Array = new Uint32Array(4096);\n  private _stringDecoder: StringToUtf32 = new StringToUtf32();\n  private _utf8Decoder: Utf8ToUtf32 = new Utf8ToUtf32();\n  private _workCell: CellData = new CellData();\n  private _windowTitle = '';\n  private _iconName = '';\n  protected _windowTitleStack: string[] = [];\n  protected _iconNameStack: string[] = [];\n\n  private _curAttrData: IAttributeData = DEFAULT_ATTR_DATA.clone();\n  private _eraseAttrDataInternal: IAttributeData = DEFAULT_ATTR_DATA.clone();\n\n  private _activeBuffer: IBuffer;\n\n  private _onRequestBell = new EventEmitter<void>();\n  public get onRequestBell(): IEvent<void> { return this._onRequestBell.event; }\n  private _onRequestRefreshRows = new EventEmitter<number, number>();\n  public get onRequestRefreshRows(): IEvent<number, number> { return this._onRequestRefreshRows.event; }\n  private _onRequestReset = new EventEmitter<void>();\n  public get onRequestReset(): IEvent<void> { return this._onRequestReset.event; }\n  private _onRequestSendFocus = new EventEmitter<void>();\n  public get onRequestSendFocus(): IEvent<void> { return this._onRequestSendFocus.event; }\n  private _onRequestSyncScrollBar = new EventEmitter<void>();\n  public get onRequestSyncScrollBar(): IEvent<void> { return this._onRequestSyncScrollBar.event; }\n  private _onRequestWindowsOptionsReport = new EventEmitter<WindowsOptionsReportType>();\n  public get onRequestWindowsOptionsReport(): IEvent<WindowsOptionsReportType> { return this._onRequestWindowsOptionsReport.event; }\n\n  private _onA11yChar = new EventEmitter<string>();\n  public get onA11yChar(): IEvent<string> { return this._onA11yChar.event; }\n  private _onA11yTab = new EventEmitter<number>();\n  public get onA11yTab(): IEvent<number> { return this._onA11yTab.event; }\n  private _onCursorMove = new EventEmitter<void>();\n  public get onCursorMove(): IEvent<void> { return this._onCursorMove.event; }\n  private _onLineFeed = new EventEmitter<void>();\n  public get onLineFeed(): IEvent<void> { return this._onLineFeed.event; }\n  private _onScroll = new EventEmitter<number>();\n  public get onScroll(): IEvent<number> { return this._onScroll.event; }\n  private _onTitleChange = new EventEmitter<string>();\n  public get onTitleChange(): IEvent<string> { return this._onTitleChange.event; }\n  private _onColor = new EventEmitter<IColorEvent>();\n  public get onColor(): IEvent<IColorEvent> { return this._onColor.event; }\n\n  private _parseStack: IParseStack = {\n    paused: false,\n    cursorStartX: 0,\n    cursorStartY: 0,\n    decodedLength: 0,\n    position: 0\n  };\n\n  constructor(\n    private readonly _bufferService: IBufferService,\n    private readonly _charsetService: ICharsetService,\n    private readonly _coreService: ICoreService,\n    private readonly _dirtyRowService: IDirtyRowService,\n    private readonly _logService: ILogService,\n    private readonly _optionsService: IOptionsService,\n    private readonly _coreMouseService: ICoreMouseService,\n    private readonly _unicodeService: IUnicodeService,\n    private readonly _parser: IEscapeSequenceParser = new EscapeSequenceParser()\n  ) {\n    super();\n    this.register(this._parser);\n\n    // Track properties used in performance critical code manually to avoid using slow getters\n    this._activeBuffer = this._bufferService.buffer;\n    this.register(this._bufferService.buffers.onBufferActivate(e => this._activeBuffer = e.activeBuffer));\n\n    /**\n     * custom fallback handlers\n     */\n    this._parser.setCsiHandlerFallback((ident, params) => {\n      this._logService.debug('Unknown CSI code: ', { identifier: this._parser.identToString(ident), params: params.toArray() });\n    });\n    this._parser.setEscHandlerFallback(ident => {\n      this._logService.debug('Unknown ESC code: ', { identifier: this._parser.identToString(ident) });\n    });\n    this._parser.setExecuteHandlerFallback(code => {\n      this._logService.debug('Unknown EXECUTE code: ', { code });\n    });\n    this._parser.setOscHandlerFallback((identifier, action, data) => {\n      this._logService.debug('Unknown OSC code: ', { identifier, action, data });\n    });\n    this._parser.setDcsHandlerFallback((ident, action, payload) => {\n      if (action === 'HOOK') {\n        payload = payload.toArray();\n      }\n      this._logService.debug('Unknown DCS code: ', { identifier: this._parser.identToString(ident), action, payload });\n    });\n\n    /**\n     * print handler\n     */\n    this._parser.setPrintHandler((data, start, end) => this.print(data, start, end));\n\n    /**\n     * CSI handler\n     */\n    this._parser.registerCsiHandler({ final: '@' }, params => this.insertChars(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: '@' }, params => this.scrollLeft(params));\n    this._parser.registerCsiHandler({ final: 'A' }, params => this.cursorUp(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: 'A' }, params => this.scrollRight(params));\n    this._parser.registerCsiHandler({ final: 'B' }, params => this.cursorDown(params));\n    this._parser.registerCsiHandler({ final: 'C' }, params => this.cursorForward(params));\n    this._parser.registerCsiHandler({ final: 'D' }, params => this.cursorBackward(params));\n    this._parser.registerCsiHandler({ final: 'E' }, params => this.cursorNextLine(params));\n    this._parser.registerCsiHandler({ final: 'F' }, params => this.cursorPrecedingLine(params));\n    this._parser.registerCsiHandler({ final: 'G' }, params => this.cursorCharAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'H' }, params => this.cursorPosition(params));\n    this._parser.registerCsiHandler({ final: 'I' }, params => this.cursorForwardTab(params));\n    this._parser.registerCsiHandler({ final: 'J' }, params => this.eraseInDisplay(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'J' }, params => this.eraseInDisplay(params));\n    this._parser.registerCsiHandler({ final: 'K' }, params => this.eraseInLine(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'K' }, params => this.eraseInLine(params));\n    this._parser.registerCsiHandler({ final: 'L' }, params => this.insertLines(params));\n    this._parser.registerCsiHandler({ final: 'M' }, params => this.deleteLines(params));\n    this._parser.registerCsiHandler({ final: 'P' }, params => this.deleteChars(params));\n    this._parser.registerCsiHandler({ final: 'S' }, params => this.scrollUp(params));\n    this._parser.registerCsiHandler({ final: 'T' }, params => this.scrollDown(params));\n    this._parser.registerCsiHandler({ final: 'X' }, params => this.eraseChars(params));\n    this._parser.registerCsiHandler({ final: 'Z' }, params => this.cursorBackwardTab(params));\n    this._parser.registerCsiHandler({ final: '`' }, params => this.charPosAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'a' }, params => this.hPositionRelative(params));\n    this._parser.registerCsiHandler({ final: 'b' }, params => this.repeatPrecedingCharacter(params));\n    this._parser.registerCsiHandler({ final: 'c' }, params => this.sendDeviceAttributesPrimary(params));\n    this._parser.registerCsiHandler({ prefix: '>', final: 'c' }, params => this.sendDeviceAttributesSecondary(params));\n    this._parser.registerCsiHandler({ final: 'd' }, params => this.linePosAbsolute(params));\n    this._parser.registerCsiHandler({ final: 'e' }, params => this.vPositionRelative(params));\n    this._parser.registerCsiHandler({ final: 'f' }, params => this.hVPosition(params));\n    this._parser.registerCsiHandler({ final: 'g' }, params => this.tabClear(params));\n    this._parser.registerCsiHandler({ final: 'h' }, params => this.setMode(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'h' }, params => this.setModePrivate(params));\n    this._parser.registerCsiHandler({ final: 'l' }, params => this.resetMode(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'l' }, params => this.resetModePrivate(params));\n    this._parser.registerCsiHandler({ final: 'm' }, params => this.charAttributes(params));\n    this._parser.registerCsiHandler({ final: 'n' }, params => this.deviceStatus(params));\n    this._parser.registerCsiHandler({ prefix: '?', final: 'n' }, params => this.deviceStatusPrivate(params));\n    this._parser.registerCsiHandler({ intermediates: '!', final: 'p' }, params => this.softReset(params));\n    this._parser.registerCsiHandler({ intermediates: ' ', final: 'q' }, params => this.setCursorStyle(params));\n    this._parser.registerCsiHandler({ final: 'r' }, params => this.setScrollRegion(params));\n    this._parser.registerCsiHandler({ final: 's' }, params => this.saveCursor(params));\n    this._parser.registerCsiHandler({ final: 't' }, params => this.windowOptions(params));\n    this._parser.registerCsiHandler({ final: 'u' }, params => this.restoreCursor(params));\n    this._parser.registerCsiHandler({ intermediates: '\\'', final: '}' }, params => this.insertColumns(params));\n    this._parser.registerCsiHandler({ intermediates: '\\'', final: '~' }, params => this.deleteColumns(params));\n\n    /**\n     * execute handler\n     */\n    this._parser.setExecuteHandler(C0.BEL, () => this.bell());\n    this._parser.setExecuteHandler(C0.LF, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.VT, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.FF, () => this.lineFeed());\n    this._parser.setExecuteHandler(C0.CR, () => this.carriageReturn());\n    this._parser.setExecuteHandler(C0.BS, () => this.backspace());\n    this._parser.setExecuteHandler(C0.HT, () => this.tab());\n    this._parser.setExecuteHandler(C0.SO, () => this.shiftOut());\n    this._parser.setExecuteHandler(C0.SI, () => this.shiftIn());\n    // FIXME:   What do to with missing? Old code just added those to print.\n\n    this._parser.setExecuteHandler(C1.IND, () => this.index());\n    this._parser.setExecuteHandler(C1.NEL, () => this.nextLine());\n    this._parser.setExecuteHandler(C1.HTS, () => this.tabSet());\n\n    /**\n     * OSC handler\n     */\n    //   0 - icon name + title\n    this._parser.registerOscHandler(0, new OscHandler(data => { this.setTitle(data); this.setIconName(data); return true; }));\n    //   1 - icon name\n    this._parser.registerOscHandler(1, new OscHandler(data => this.setIconName(data)));\n    //   2 - title\n    this._parser.registerOscHandler(2, new OscHandler(data => this.setTitle(data)));\n    //   3 - set property X in the form \"prop=value\"\n    //   4 - Change Color Number\n    this._parser.registerOscHandler(4, new OscHandler(data => this.setOrReportIndexedColor(data)));\n    //   5 - Change Special Color Number\n    //   6 - Enable/disable Special Color Number c\n    //   7 - current directory? (not in xterm spec, see https://gitlab.com/gnachman/iterm2/issues/3939)\n    //  10 - Change VT100 text foreground color to Pt.\n    this._parser.registerOscHandler(10, new OscHandler(data => this.setOrReportFgColor(data)));\n    //  11 - Change VT100 text background color to Pt.\n    this._parser.registerOscHandler(11, new OscHandler(data => this.setOrReportBgColor(data)));\n    //  12 - Change text cursor color to Pt.\n    this._parser.registerOscHandler(12, new OscHandler(data => this.setOrReportCursorColor(data)));\n    //  13 - Change mouse foreground color to Pt.\n    //  14 - Change mouse background color to Pt.\n    //  15 - Change Tektronix foreground color to Pt.\n    //  16 - Change Tektronix background color to Pt.\n    //  17 - Change highlight background color to Pt.\n    //  18 - Change Tektronix cursor color to Pt.\n    //  19 - Change highlight foreground color to Pt.\n    //  46 - Change Log File to Pt.\n    //  50 - Set Font to Pt.\n    //  51 - reserved for Emacs shell.\n    //  52 - Manipulate Selection Data.\n    // 104 ; c - Reset Color Number c.\n    this._parser.registerOscHandler(104, new OscHandler(data => this.restoreIndexedColor(data)));\n    // 105 ; c - Reset Special Color Number c.\n    // 106 ; c; f - Enable/disable Special Color Number c.\n    // 110 - Reset VT100 text foreground color.\n    this._parser.registerOscHandler(110, new OscHandler(data => this.restoreFgColor(data)));\n    // 111 - Reset VT100 text background color.\n    this._parser.registerOscHandler(111, new OscHandler(data => this.restoreBgColor(data)));\n    // 112 - Reset text cursor color.\n    this._parser.registerOscHandler(112, new OscHandler(data => this.restoreCursorColor(data)));\n    // 113 - Reset mouse foreground color.\n    // 114 - Reset mouse background color.\n    // 115 - Reset Tektronix foreground color.\n    // 116 - Reset Tektronix background color.\n    // 117 - Reset highlight color.\n    // 118 - Reset Tektronix cursor color.\n    // 119 - Reset highlight foreground color.\n\n    /**\n     * ESC handlers\n     */\n    this._parser.registerEscHandler({ final: '7' }, () => this.saveCursor());\n    this._parser.registerEscHandler({ final: '8' }, () => this.restoreCursor());\n    this._parser.registerEscHandler({ final: 'D' }, () => this.index());\n    this._parser.registerEscHandler({ final: 'E' }, () => this.nextLine());\n    this._parser.registerEscHandler({ final: 'H' }, () => this.tabSet());\n    this._parser.registerEscHandler({ final: 'M' }, () => this.reverseIndex());\n    this._parser.registerEscHandler({ final: '=' }, () => this.keypadApplicationMode());\n    this._parser.registerEscHandler({ final: '>' }, () => this.keypadNumericMode());\n    this._parser.registerEscHandler({ final: 'c' }, () => this.fullReset());\n    this._parser.registerEscHandler({ final: 'n' }, () => this.setgLevel(2));\n    this._parser.registerEscHandler({ final: 'o' }, () => this.setgLevel(3));\n    this._parser.registerEscHandler({ final: '|' }, () => this.setgLevel(3));\n    this._parser.registerEscHandler({ final: '}' }, () => this.setgLevel(2));\n    this._parser.registerEscHandler({ final: '~' }, () => this.setgLevel(1));\n    this._parser.registerEscHandler({ intermediates: '%', final: '@' }, () => this.selectDefaultCharset());\n    this._parser.registerEscHandler({ intermediates: '%', final: 'G' }, () => this.selectDefaultCharset());\n    for (const flag in CHARSETS) {\n      this._parser.registerEscHandler({ intermediates: '(', final: flag }, () => this.selectCharset('(' + flag));\n      this._parser.registerEscHandler({ intermediates: ')', final: flag }, () => this.selectCharset(')' + flag));\n      this._parser.registerEscHandler({ intermediates: '*', final: flag }, () => this.selectCharset('*' + flag));\n      this._parser.registerEscHandler({ intermediates: '+', final: flag }, () => this.selectCharset('+' + flag));\n      this._parser.registerEscHandler({ intermediates: '-', final: flag }, () => this.selectCharset('-' + flag));\n      this._parser.registerEscHandler({ intermediates: '.', final: flag }, () => this.selectCharset('.' + flag));\n      this._parser.registerEscHandler({ intermediates: '/', final: flag }, () => this.selectCharset('/' + flag)); // TODO: supported?\n    }\n    this._parser.registerEscHandler({ intermediates: '#', final: '8' }, () => this.screenAlignmentPattern());\n\n    /**\n     * error handler\n     */\n    this._parser.setErrorHandler((state: IParsingState) => {\n      this._logService.error('Parsing error: ', state);\n      return state;\n    });\n\n    /**\n     * DCS handler\n     */\n    this._parser.registerDcsHandler({ intermediates: '$', final: 'q' }, new DECRQSS(this._bufferService, this._coreService, this._logService, this._optionsService));\n  }\n\n  public dispose(): void {\n    super.dispose();\n  }\n\n  /**\n   * Async parse support.\n   */\n  private _preserveStack(cursorStartX: number, cursorStartY: number, decodedLength: number, position: number): void {\n    this._parseStack.paused = true;\n    this._parseStack.cursorStartX = cursorStartX;\n    this._parseStack.cursorStartY = cursorStartY;\n    this._parseStack.decodedLength = decodedLength;\n    this._parseStack.position = position;\n  }\n\n  private _logSlowResolvingAsync(p: Promise<boolean>): void {\n    // log a limited warning about an async handler taking too long\n    if (this._logService.logLevel <= LogLevelEnum.WARN) {\n      Promise.race([p, new Promise((res, rej) => setTimeout(() => rej('#SLOW_TIMEOUT'), SLOW_ASYNC_LIMIT))])\n        .catch(err => {\n          if (err !== '#SLOW_TIMEOUT') {\n            throw err;\n          }\n          console.warn(`async parser handler taking longer than ${SLOW_ASYNC_LIMIT} ms`);\n        });\n    }\n  }\n\n  /**\n   * Parse call with async handler support.\n   *\n   * Whether the stack state got preserved for the next call, is indicated by the return value:\n   * - undefined (void):\n   *   all handlers were sync, no stack save, continue normally with next chunk\n   * - Promise\\<boolean\\>:\n   *   execution stopped at async handler, stack saved, continue with\n   *   same chunk and the promise resolve value as `promiseResult` until the method returns `undefined`\n   *\n   * Note: This method should only be called by `Terminal.write` to ensure correct execution order and\n   * proper continuation of async parser handlers.\n   */\n  public parse(data: string | Uint8Array, promiseResult?: boolean): void | Promise<boolean> {\n    let result: void | Promise<boolean>;\n    let cursorStartX = this._activeBuffer.x;\n    let cursorStartY = this._activeBuffer.y;\n    let start = 0;\n    const wasPaused = this._parseStack.paused;\n\n    if (wasPaused) {\n      // assumption: _parseBuffer never mutates between async calls\n      if (result = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, promiseResult)) {\n        this._logSlowResolvingAsync(result);\n        return result;\n      }\n      cursorStartX = this._parseStack.cursorStartX;\n      cursorStartY = this._parseStack.cursorStartY;\n      this._parseStack.paused = false;\n      if (data.length > MAX_PARSEBUFFER_LENGTH) {\n        start = this._parseStack.position + MAX_PARSEBUFFER_LENGTH;\n      }\n    }\n\n    // Log debug data, the log level gate is to prevent extra work in this hot path\n    if (this._logService.logLevel <= LogLevelEnum.DEBUG) {\n      this._logService.debug(`parsing data${typeof data === 'string' ? ` \"${data}\"` : ''}`, typeof data === 'string'\n        ? data.split('').map(e => e.charCodeAt(0))\n        : data\n      );\n    }\n\n    // resize input buffer if needed\n    if (this._parseBuffer.length < data.length) {\n      if (this._parseBuffer.length < MAX_PARSEBUFFER_LENGTH) {\n        this._parseBuffer = new Uint32Array(Math.min(data.length, MAX_PARSEBUFFER_LENGTH));\n      }\n    }\n\n    // Clear the dirty row service so we know which lines changed as a result of parsing\n    // Important: do not clear between async calls, otherwise we lost pending update information.\n    if (!wasPaused) {\n      this._dirtyRowService.clearRange();\n    }\n\n    // process big data in smaller chunks\n    if (data.length > MAX_PARSEBUFFER_LENGTH) {\n      for (let i = start; i < data.length; i += MAX_PARSEBUFFER_LENGTH) {\n        const end = i + MAX_PARSEBUFFER_LENGTH < data.length ? i + MAX_PARSEBUFFER_LENGTH : data.length;\n        const len = (typeof data === 'string')\n          ? this._stringDecoder.decode(data.substring(i, end), this._parseBuffer)\n          : this._utf8Decoder.decode(data.subarray(i, end), this._parseBuffer);\n        if (result = this._parser.parse(this._parseBuffer, len)) {\n          this._preserveStack(cursorStartX, cursorStartY, len, i);\n          this._logSlowResolvingAsync(result);\n          return result;\n        }\n      }\n    } else {\n      if (!wasPaused) {\n        const len = (typeof data === 'string')\n          ? this._stringDecoder.decode(data, this._parseBuffer)\n          : this._utf8Decoder.decode(data, this._parseBuffer);\n        if (result = this._parser.parse(this._parseBuffer, len)) {\n          this._preserveStack(cursorStartX, cursorStartY, len, 0);\n          this._logSlowResolvingAsync(result);\n          return result;\n        }\n      }\n    }\n\n    if (this._activeBuffer.x !== cursorStartX || this._activeBuffer.y !== cursorStartY) {\n      this._onCursorMove.fire();\n    }\n\n    // Refresh any dirty rows accumulated as part of parsing\n    this._onRequestRefreshRows.fire(this._dirtyRowService.start, this._dirtyRowService.end);\n  }\n\n  public print(data: Uint32Array, start: number, end: number): void {\n    let code: number;\n    let chWidth: number;\n    const charset = this._charsetService.charset;\n    const screenReaderMode = this._optionsService.options.screenReaderMode;\n    const cols = this._bufferService.cols;\n    const wraparoundMode = this._coreService.decPrivateModes.wraparound;\n    const insertMode = this._coreService.modes.insertMode;\n    const curAttr = this._curAttrData;\n    let bufferRow = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)!;\n\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n\n    // handle wide chars: reset start_cell-1 if we would overwrite the second cell of a wide char\n    if (this._activeBuffer.x && end - start > 0 && bufferRow.getWidth(this._activeBuffer.x - 1) === 2) {\n      bufferRow.setCellFromCodePoint(this._activeBuffer.x - 1, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n    }\n\n    for (let pos = start; pos < end; ++pos) {\n      code = data[pos];\n\n      // calculate print space\n      // expensive call, therefore we save width in line buffer\n      chWidth = this._unicodeService.wcwidth(code);\n\n      // get charset replacement character\n      // charset is only defined for ASCII, therefore we only\n      // search for an replacement char if code < 127\n      if (code < 127 && charset) {\n        const ch = charset[String.fromCharCode(code)];\n        if (ch) {\n          code = ch.charCodeAt(0);\n        }\n      }\n\n      if (screenReaderMode) {\n        this._onA11yChar.fire(stringFromCodePoint(code));\n      }\n\n      // insert combining char at last cursor position\n      // this._activeBuffer.x should never be 0 for a combining char\n      // since they always follow a cell consuming char\n      // therefore we can test for this._activeBuffer.x to avoid overflow left\n      if (!chWidth && this._activeBuffer.x) {\n        if (!bufferRow.getWidth(this._activeBuffer.x - 1)) {\n          // found empty cell after fullwidth, need to go 2 cells back\n          // it is save to step 2 cells back here\n          // since an empty cell is only set by fullwidth chars\n          bufferRow.addCodepointToCell(this._activeBuffer.x - 2, code);\n        } else {\n          bufferRow.addCodepointToCell(this._activeBuffer.x - 1, code);\n        }\n        continue;\n      }\n\n      // goto next line if ch would overflow\n      // NOTE: To avoid costly width checks here,\n      // the terminal does not allow a cols < 2.\n      if (this._activeBuffer.x + chWidth - 1 >= cols) {\n        // autowrap - DECAWM\n        // automatically wraps to the beginning of the next line\n        if (wraparoundMode) {\n          // clear left over cells to the right\n          while (this._activeBuffer.x < cols) {\n            bufferRow.setCellFromCodePoint(this._activeBuffer.x++, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n          }\n          this._activeBuffer.x = 0;\n          this._activeBuffer.y++;\n          if (this._activeBuffer.y === this._activeBuffer.scrollBottom + 1) {\n            this._activeBuffer.y--;\n            this._bufferService.scroll(this._eraseAttrData(), true);\n          } else {\n            if (this._activeBuffer.y >= this._bufferService.rows) {\n              this._activeBuffer.y = this._bufferService.rows - 1;\n            }\n            // The line already exists (eg. the initial viewport), mark it as a\n            // wrapped line\n            this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)!.isWrapped = true;\n          }\n          // row changed, get it again\n          bufferRow = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)!;\n        } else {\n          this._activeBuffer.x = cols - 1;\n          if (chWidth === 2) {\n            // FIXME: check for xterm behavior\n            // What to do here? We got a wide char that does not fit into last cell\n            continue;\n          }\n        }\n      }\n\n      // insert mode: move characters to right\n      if (insertMode) {\n        // right shift cells according to the width\n        bufferRow.insertCells(this._activeBuffer.x, chWidth, this._activeBuffer.getNullCell(curAttr), curAttr);\n        // test last cell - since the last cell has only room for\n        // a halfwidth char any fullwidth shifted there is lost\n        // and will be set to empty cell\n        if (bufferRow.getWidth(cols - 1) === 2) {\n          bufferRow.setCellFromCodePoint(cols - 1, NULL_CELL_CODE, NULL_CELL_WIDTH, curAttr.fg, curAttr.bg, curAttr.extended);\n        }\n      }\n\n      // write current char to buffer and advance cursor\n      bufferRow.setCellFromCodePoint(this._activeBuffer.x++, code, chWidth, curAttr.fg, curAttr.bg, curAttr.extended);\n\n      // fullwidth char - also set next cell to placeholder stub and advance cursor\n      // for graphemes bigger than fullwidth we can simply loop to zero\n      // we already made sure above, that this._activeBuffer.x + chWidth will not overflow right\n      if (chWidth > 0) {\n        while (--chWidth) {\n          // other than a regular empty cell a cell following a wide char has no width\n          bufferRow.setCellFromCodePoint(this._activeBuffer.x++, 0, 0, curAttr.fg, curAttr.bg, curAttr.extended);\n        }\n      }\n    }\n    // store last char in Parser.precedingCodepoint for REP to work correctly\n    // This needs to check whether:\n    //  - fullwidth + surrogates: reset\n    //  - combining: only base char gets carried on (bug in xterm?)\n    if (end - start > 0) {\n      bufferRow.loadCell(this._activeBuffer.x - 1, this._workCell);\n      if (this._workCell.getWidth() === 2 || this._workCell.getCode() > 0xFFFF) {\n        this._parser.precedingCodepoint = 0;\n      } else if (this._workCell.isCombined()) {\n        this._parser.precedingCodepoint = this._workCell.getChars().charCodeAt(0);\n      } else {\n        this._parser.precedingCodepoint = this._workCell.content;\n      }\n    }\n\n    // handle wide chars: reset cell to the right if it is second cell of a wide char\n    if (this._activeBuffer.x < cols && end - start > 0 && bufferRow.getWidth(this._activeBuffer.x) === 0 && !bufferRow.hasContent(this._activeBuffer.x)) {\n      bufferRow.setCellFromCodePoint(this._activeBuffer.x, 0, 1, curAttr.fg, curAttr.bg, curAttr.extended);\n    }\n\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n  }\n\n  /**\n   * Forward registerCsiHandler from parser.\n   */\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: IParams) => boolean | Promise<boolean>): IDisposable {\n    if (id.final === 't' && !id.prefix && !id.intermediates) {\n      // security: always check whether window option is allowed\n      return this._parser.registerCsiHandler(id, params => {\n        if (!paramToWindowOption(params.params[0], this._optionsService.options.windowOptions)) {\n          return true;\n        }\n        return callback(params);\n      });\n    }\n    return this._parser.registerCsiHandler(id, callback);\n  }\n\n  /**\n   * Forward registerDcsHandler from parser.\n   */\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: IParams) => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerDcsHandler(id, new DcsHandler(callback));\n  }\n\n  /**\n   * Forward registerEscHandler from parser.\n   */\n  public registerEscHandler(id: IFunctionIdentifier, callback: () => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerEscHandler(id, callback);\n  }\n\n  /**\n   * Forward registerOscHandler from parser.\n   */\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._parser.registerOscHandler(ident, new OscHandler(callback));\n  }\n\n  /**\n   * BEL\n   * Bell (Ctrl-G).\n   *\n   * @vt: #Y   C0    BEL   \"Bell\"  \"\\a, \\x07\"  \"Ring the bell.\"\n   * The behavior of the bell is further customizable with `ITerminalOptions.bellStyle`\n   * and `ITerminalOptions.bellSound`.\n   */\n  public bell(): boolean {\n    this._onRequestBell.fire();\n    return true;\n  }\n\n  /**\n   * LF\n   * Line Feed or New Line (NL).  (LF  is Ctrl-J).\n   *\n   * @vt: #Y   C0    LF   \"Line Feed\"            \"\\n, \\x0A\"  \"Move the cursor one row down, scrolling if needed.\"\n   * Scrolling is restricted to scroll margins and will only happen on the bottom line.\n   *\n   * @vt: #Y   C0    VT   \"Vertical Tabulation\"  \"\\v, \\x0B\"  \"Treated as LF.\"\n   * @vt: #Y   C0    FF   \"Form Feed\"            \"\\f, \\x0C\"  \"Treated as LF.\"\n   */\n  public lineFeed(): boolean {\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n    if (this._optionsService.options.convertEol) {\n      this._activeBuffer.x = 0;\n    }\n    this._activeBuffer.y++;\n    if (this._activeBuffer.y === this._activeBuffer.scrollBottom + 1) {\n      this._activeBuffer.y--;\n      this._bufferService.scroll(this._eraseAttrData());\n    } else if (this._activeBuffer.y >= this._bufferService.rows) {\n      this._activeBuffer.y = this._bufferService.rows - 1;\n    }\n    // If the end of the line is hit, prevent this action from wrapping around to the next line.\n    if (this._activeBuffer.x >= this._bufferService.cols) {\n      this._activeBuffer.x--;\n    }\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n\n    this._onLineFeed.fire();\n    return true;\n  }\n\n  /**\n   * CR\n   * Carriage Return (Ctrl-M).\n   *\n   * @vt: #Y   C0    CR   \"Carriage Return\"  \"\\r, \\x0D\"  \"Move the cursor to the beginning of the row.\"\n   */\n  public carriageReturn(): boolean {\n    this._activeBuffer.x = 0;\n    return true;\n  }\n\n  /**\n   * BS\n   * Backspace (Ctrl-H).\n   *\n   * @vt: #Y   C0    BS   \"Backspace\"  \"\\b, \\x08\"  \"Move the cursor one position to the left.\"\n   * By default it is not possible to move the cursor past the leftmost position.\n   * If `reverse wrap-around` (`CSI ? 45 h`) is set, a previous soft line wrap (DECAWM)\n   * can be undone with BS within the scroll margins. In that case the cursor will wrap back\n   * to the end of the previous row. Note that it is not possible to peek back into the scrollbuffer\n   * with the cursor, thus at the home position (top-leftmost cell) this has no effect.\n   */\n  public backspace(): boolean {\n    // reverse wrap-around is disabled\n    if (!this._coreService.decPrivateModes.reverseWraparound) {\n      this._restrictCursor();\n      if (this._activeBuffer.x > 0) {\n        this._activeBuffer.x--;\n      }\n      return true;\n    }\n\n    // reverse wrap-around is enabled\n    // other than for normal operation mode, reverse wrap-around allows the cursor\n    // to be at x=cols to be able to address the last cell of a row by BS\n    this._restrictCursor(this._bufferService.cols);\n\n    if (this._activeBuffer.x > 0) {\n      this._activeBuffer.x--;\n    } else {\n      /**\n       * reverse wrap-around handling:\n       * Our implementation deviates from xterm on purpose. Details:\n       * - only previous soft NLs can be reversed (isWrapped=true)\n       * - only works within scrollborders (top/bottom, left/right not yet supported)\n       * - cannot peek into scrollbuffer\n       * - any cursor movement sequence keeps working as expected\n       */\n      if (this._activeBuffer.x === 0\n        && this._activeBuffer.y > this._activeBuffer.scrollTop\n        && this._activeBuffer.y <= this._activeBuffer.scrollBottom\n        && this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)?.isWrapped) {\n        this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)!.isWrapped = false;\n        this._activeBuffer.y--;\n        this._activeBuffer.x = this._bufferService.cols - 1;\n        // find last taken cell - last cell can have 3 different states:\n        // - hasContent(true) + hasWidth(1): narrow char - we are done\n        // - hasWidth(0): second part of wide char - we are done\n        // - hasContent(false) + hasWidth(1): empty cell due to early wrapping wide char, go one cell further back\n        const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)!;\n        if (line.hasWidth(this._activeBuffer.x) && !line.hasContent(this._activeBuffer.x)) {\n          this._activeBuffer.x--;\n          // We do this only once, since width=1 + hasContent=false currently happens only once before\n          // early wrapping of a wide char.\n          // This needs to be fixed once we support graphemes taking more than 2 cells.\n        }\n      }\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n  /**\n   * TAB\n   * Horizontal Tab (HT) (Ctrl-I).\n   *\n   * @vt: #Y   C0    HT   \"Horizontal Tabulation\"  \"\\t, \\x09\"  \"Move the cursor to the next character tab stop.\"\n   */\n  public tab(): boolean {\n    if (this._activeBuffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    const originalX = this._activeBuffer.x;\n    this._activeBuffer.x = this._activeBuffer.nextStop();\n    if (this._optionsService.options.screenReaderMode) {\n      this._onA11yTab.fire(this._activeBuffer.x - originalX);\n    }\n    return true;\n  }\n\n  /**\n   * SO\n   * Shift Out (Ctrl-N) -> Switch to Alternate Character Set.  This invokes the\n   * G1 character set.\n   *\n   * @vt: #P[Only limited ISO-2022 charset support.]  C0    SO   \"Shift Out\"  \"\\x0E\"  \"Switch to an alternative character set.\"\n   */\n  public shiftOut(): boolean {\n    this._charsetService.setgLevel(1);\n    return true;\n  }\n\n  /**\n   * SI\n   * Shift In (Ctrl-O) -> Switch to Standard Character Set.  This invokes the G0\n   * character set (the default).\n   *\n   * @vt: #Y   C0    SI   \"Shift In\"   \"\\x0F\"  \"Return to regular character set after Shift Out.\"\n   */\n  public shiftIn(): boolean {\n    this._charsetService.setgLevel(0);\n    return true;\n  }\n\n  /**\n   * Restrict cursor to viewport size / scroll margin (origin mode).\n   */\n  private _restrictCursor(maxCol: number = this._bufferService.cols - 1): void {\n    this._activeBuffer.x = Math.min(maxCol, Math.max(0, this._activeBuffer.x));\n    this._activeBuffer.y = this._coreService.decPrivateModes.origin\n      ? Math.min(this._activeBuffer.scrollBottom, Math.max(this._activeBuffer.scrollTop, this._activeBuffer.y))\n      : Math.min(this._bufferService.rows - 1, Math.max(0, this._activeBuffer.y));\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n  }\n\n  /**\n   * Set absolute cursor position.\n   */\n  private _setCursor(x: number, y: number): void {\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n    if (this._coreService.decPrivateModes.origin) {\n      this._activeBuffer.x = x;\n      this._activeBuffer.y = this._activeBuffer.scrollTop + y;\n    } else {\n      this._activeBuffer.x = x;\n      this._activeBuffer.y = y;\n    }\n    this._restrictCursor();\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n  }\n\n  /**\n   * Set relative cursor position.\n   */\n  private _moveCursor(x: number, y: number): void {\n    // for relative changes we have to make sure we are within 0 .. cols/rows - 1\n    // before calculating the new position\n    this._restrictCursor();\n    this._setCursor(this._activeBuffer.x + x, this._activeBuffer.y + y);\n  }\n\n  /**\n   * CSI Ps A\n   * Cursor Up Ps Times (default = 1) (CUU).\n   *\n   * @vt: #Y CSI CUU   \"Cursor Up\"   \"CSI Ps A\"  \"Move cursor `Ps` times up (default=1).\"\n   * If the cursor would pass the top scroll margin, it will stop there.\n   */\n  public cursorUp(params: IParams): boolean {\n    // stop at scrollTop\n    const diffToTop = this._activeBuffer.y - this._activeBuffer.scrollTop;\n    if (diffToTop >= 0) {\n      this._moveCursor(0, -Math.min(diffToTop, params.params[0] || 1));\n    } else {\n      this._moveCursor(0, -(params.params[0] || 1));\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps B\n   * Cursor Down Ps Times (default = 1) (CUD).\n   *\n   * @vt: #Y CSI CUD   \"Cursor Down\"   \"CSI Ps B\"  \"Move cursor `Ps` times down (default=1).\"\n   * If the cursor would pass the bottom scroll margin, it will stop there.\n   */\n  public cursorDown(params: IParams): boolean {\n    // stop at scrollBottom\n    const diffToBottom = this._activeBuffer.scrollBottom - this._activeBuffer.y;\n    if (diffToBottom >= 0) {\n      this._moveCursor(0, Math.min(diffToBottom, params.params[0] || 1));\n    } else {\n      this._moveCursor(0, params.params[0] || 1);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps C\n   * Cursor Forward Ps Times (default = 1) (CUF).\n   *\n   * @vt: #Y CSI CUF   \"Cursor Forward\"    \"CSI Ps C\"  \"Move cursor `Ps` times forward (default=1).\"\n   */\n  public cursorForward(params: IParams): boolean {\n    this._moveCursor(params.params[0] || 1, 0);\n    return true;\n  }\n\n  /**\n   * CSI Ps D\n   * Cursor Backward Ps Times (default = 1) (CUB).\n   *\n   * @vt: #Y CSI CUB   \"Cursor Backward\"   \"CSI Ps D\"  \"Move cursor `Ps` times backward (default=1).\"\n   */\n  public cursorBackward(params: IParams): boolean {\n    this._moveCursor(-(params.params[0] || 1), 0);\n    return true;\n  }\n\n  /**\n   * CSI Ps E\n   * Cursor Next Line Ps Times (default = 1) (CNL).\n   * Other than cursorDown (CUD) also set the cursor to first column.\n   *\n   * @vt: #Y CSI CNL   \"Cursor Next Line\"  \"CSI Ps E\"  \"Move cursor `Ps` times down (default=1) and to the first column.\"\n   * Same as CUD, additionally places the cursor at the first column.\n   */\n  public cursorNextLine(params: IParams): boolean {\n    this.cursorDown(params);\n    this._activeBuffer.x = 0;\n    return true;\n  }\n\n  /**\n   * CSI Ps F\n   * Cursor Previous Line Ps Times (default = 1) (CPL).\n   * Other than cursorUp (CUU) also set the cursor to first column.\n   *\n   * @vt: #Y CSI CPL   \"Cursor Backward\"   \"CSI Ps F\"  \"Move cursor `Ps` times up (default=1) and to the first column.\"\n   * Same as CUU, additionally places the cursor at the first column.\n   */\n  public cursorPrecedingLine(params: IParams): boolean {\n    this.cursorUp(params);\n    this._activeBuffer.x = 0;\n    return true;\n  }\n\n  /**\n   * CSI Ps G\n   * Cursor Character Absolute  [column] (default = [row,1]) (CHA).\n   *\n   * @vt: #Y CSI CHA   \"Cursor Horizontal Absolute\" \"CSI Ps G\" \"Move cursor to `Ps`-th column of the active row (default=1).\"\n   */\n  public cursorCharAbsolute(params: IParams): boolean {\n    this._setCursor((params.params[0] || 1) - 1, this._activeBuffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps H\n   * Cursor Position [row;column] (default = [1,1]) (CUP).\n   *\n   * @vt: #Y CSI CUP   \"Cursor Position\"   \"CSI Ps ; Ps H\"  \"Set cursor to position [`Ps`, `Ps`] (default = [1, 1]).\"\n   * If ORIGIN mode is set, places the cursor to the absolute position within the scroll margins.\n   * If ORIGIN mode is not set, places the cursor to the absolute position within the viewport.\n   * Note that the coordinates are 1-based, thus the top left position starts at `1 ; 1`.\n   */\n  public cursorPosition(params: IParams): boolean {\n    this._setCursor(\n      // col\n      (params.length >= 2) ? (params.params[1] || 1) - 1 : 0,\n      // row\n      (params.params[0] || 1) - 1\n    );\n    return true;\n  }\n\n  /**\n   * CSI Pm `  Character Position Absolute\n   *   [column] (default = [row,1]) (HPA).\n   * Currently same functionality as CHA.\n   *\n   * @vt: #Y CSI HPA   \"Horizontal Position Absolute\"  \"CSI Ps ` \" \"Same as CHA.\"\n   */\n  public charPosAbsolute(params: IParams): boolean {\n    this._setCursor((params.params[0] || 1) - 1, this._activeBuffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Pm a  Character Position Relative\n   *   [columns] (default = [row,col+1]) (HPR)\n   *\n   * @vt: #Y CSI HPR   \"Horizontal Position Relative\"  \"CSI Ps a\"  \"Same as CUF.\"\n   */\n  public hPositionRelative(params: IParams): boolean {\n    this._moveCursor(params.params[0] || 1, 0);\n    return true;\n  }\n\n  /**\n   * CSI Pm d  Vertical Position Absolute (VPA)\n   *   [row] (default = [1,column])\n   *\n   * @vt: #Y CSI VPA   \"Vertical Position Absolute\"    \"CSI Ps d\"  \"Move cursor to `Ps`-th row (default=1).\"\n   */\n  public linePosAbsolute(params: IParams): boolean {\n    this._setCursor(this._activeBuffer.x, (params.params[0] || 1) - 1);\n    return true;\n  }\n\n  /**\n   * CSI Pm e  Vertical Position Relative (VPR)\n   *   [rows] (default = [row+1,column])\n   * reuse CSI Ps B ?\n   *\n   * @vt: #Y CSI VPR   \"Vertical Position Relative\"    \"CSI Ps e\"  \"Move cursor `Ps` times down (default=1).\"\n   */\n  public vPositionRelative(params: IParams): boolean {\n    this._moveCursor(0, params.params[0] || 1);\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps f\n   *   Horizontal and Vertical Position [row;column] (default =\n   *   [1,1]) (HVP).\n   *   Same as CUP.\n   *\n   * @vt: #Y CSI HVP   \"Horizontal and Vertical Position\" \"CSI Ps ; Ps f\"  \"Same as CUP.\"\n   */\n  public hVPosition(params: IParams): boolean {\n    this.cursorPosition(params);\n    return true;\n  }\n\n  /**\n   * CSI Ps g  Tab Clear (TBC).\n   *     Ps = 0  -> Clear Current Column (default).\n   *     Ps = 3  -> Clear All.\n   * Potentially:\n   *   Ps = 2  -> Clear Stops on Line.\n   *   http://vt100.net/annarbor/aaa-ug/section6.html\n   *\n   * @vt: #Y CSI TBC   \"Tab Clear\" \"CSI Ps g\"  \"Clear tab stops at current position (0) or all (3) (default=0).\"\n   * Clearing tabstops off the active row (Ps = 2, VT100) is currently not supported.\n   */\n  public tabClear(params: IParams): boolean {\n    const param = params.params[0];\n    if (param === 0) {\n      delete this._activeBuffer.tabs[this._activeBuffer.x];\n    } else if (param === 3) {\n      this._activeBuffer.tabs = {};\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps I\n   *   Cursor Forward Tabulation Ps tab stops (default = 1) (CHT).\n   *\n   * @vt: #Y CSI CHT   \"Cursor Horizontal Tabulation\" \"CSI Ps I\" \"Move cursor `Ps` times tabs forward (default=1).\"\n   */\n  public cursorForwardTab(params: IParams): boolean {\n    if (this._activeBuffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    let param = params.params[0] || 1;\n    while (param--) {\n      this._activeBuffer.x = this._activeBuffer.nextStop();\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps Z  Cursor Backward Tabulation Ps tab stops (default = 1) (CBT).\n   *\n   * @vt: #Y CSI CBT   \"Cursor Backward Tabulation\"  \"CSI Ps Z\"  \"Move cursor `Ps` tabs backward (default=1).\"\n   */\n  public cursorBackwardTab(params: IParams): boolean {\n    if (this._activeBuffer.x >= this._bufferService.cols) {\n      return true;\n    }\n    let param = params.params[0] || 1;\n\n    while (param--) {\n      this._activeBuffer.x = this._activeBuffer.prevStop();\n    }\n    return true;\n  }\n\n\n  /**\n   * Helper method to erase cells in a terminal row.\n   * The cell gets replaced with the eraseChar of the terminal.\n   * @param y row index\n   * @param start first cell index to be erased\n   * @param end   end - 1 is last erased cell\n   * @param cleanWrap clear the isWrapped flag\n   */\n  private _eraseInBufferLine(y: number, start: number, end: number, clearWrap: boolean = false): void {\n    const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n    line.replaceCells(\n      start,\n      end,\n      this._activeBuffer.getNullCell(this._eraseAttrData()),\n      this._eraseAttrData()\n    );\n    if (clearWrap) {\n      line.isWrapped = false;\n    }\n  }\n\n  /**\n   * Helper method to reset cells in a terminal row.\n   * The cell gets replaced with the eraseChar of the terminal and the isWrapped property is set to false.\n   * @param y row index\n   */\n  private _resetBufferLine(y: number): void {\n    const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n    line.fill(this._activeBuffer.getNullCell(this._eraseAttrData()));\n    line.isWrapped = false;\n  }\n\n  /**\n   * CSI Ps J  Erase in Display (ED).\n   *     Ps = 0  -> Erase Below (default).\n   *     Ps = 1  -> Erase Above.\n   *     Ps = 2  -> Erase All.\n   *     Ps = 3  -> Erase Saved Lines (xterm).\n   * CSI ? Ps J\n   *   Erase in Display (DECSED).\n   *     Ps = 0  -> Selective Erase Below (default).\n   *     Ps = 1  -> Selective Erase Above.\n   *     Ps = 2  -> Selective Erase All.\n   *\n   * @vt: #Y CSI ED  \"Erase In Display\"  \"CSI Ps J\"  \"Erase various parts of the viewport.\"\n   * Supported param values:\n   *\n   * | Ps | Effect                                                       |\n   * | -- | ------------------------------------------------------------ |\n   * | 0  | Erase from the cursor through the end of the viewport.       |\n   * | 1  | Erase from the beginning of the viewport through the cursor. |\n   * | 2  | Erase complete viewport.                                     |\n   * | 3  | Erase scrollback.                                            |\n   *\n   * @vt: #P[Protection attributes are not supported.] CSI DECSED   \"Selective Erase In Display\"  \"CSI ? Ps J\"  \"Currently the same as ED.\"\n   */\n  public eraseInDisplay(params: IParams): boolean {\n    this._restrictCursor(this._bufferService.cols);\n    let j;\n    switch (params.params[0]) {\n      case 0:\n        j = this._activeBuffer.y;\n        this._dirtyRowService.markDirty(j);\n        this._eraseInBufferLine(j++, this._activeBuffer.x, this._bufferService.cols, this._activeBuffer.x === 0);\n        for (; j < this._bufferService.rows; j++) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(j);\n        break;\n      case 1:\n        j = this._activeBuffer.y;\n        this._dirtyRowService.markDirty(j);\n        // Deleted front part of line and everything before. This line will no longer be wrapped.\n        this._eraseInBufferLine(j, 0, this._activeBuffer.x + 1, true);\n        if (this._activeBuffer.x + 1 >= this._bufferService.cols) {\n          // Deleted entire previous line. This next line can no longer be wrapped.\n          this._activeBuffer.lines.get(j + 1)!.isWrapped = false;\n        }\n        while (j--) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(0);\n        break;\n      case 2:\n        j = this._bufferService.rows;\n        this._dirtyRowService.markDirty(j - 1);\n        while (j--) {\n          this._resetBufferLine(j);\n        }\n        this._dirtyRowService.markDirty(0);\n        break;\n      case 3:\n        // Clear scrollback (everything not in viewport)\n        const scrollBackSize = this._activeBuffer.lines.length - this._bufferService.rows;\n        if (scrollBackSize > 0) {\n          this._activeBuffer.lines.trimStart(scrollBackSize);\n          this._activeBuffer.ybase = Math.max(this._activeBuffer.ybase - scrollBackSize, 0);\n          this._activeBuffer.ydisp = Math.max(this._activeBuffer.ydisp - scrollBackSize, 0);\n          // Force a scroll event to refresh viewport\n          this._onScroll.fire(0);\n        }\n        break;\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps K  Erase in Line (EL).\n   *     Ps = 0  -> Erase to Right (default).\n   *     Ps = 1  -> Erase to Left.\n   *     Ps = 2  -> Erase All.\n   * CSI ? Ps K\n   *   Erase in Line (DECSEL).\n   *     Ps = 0  -> Selective Erase to Right (default).\n   *     Ps = 1  -> Selective Erase to Left.\n   *     Ps = 2  -> Selective Erase All.\n   *\n   * @vt: #Y CSI EL    \"Erase In Line\"  \"CSI Ps K\"  \"Erase various parts of the active row.\"\n   * Supported param values:\n   *\n   * | Ps | Effect                                                   |\n   * | -- | -------------------------------------------------------- |\n   * | 0  | Erase from the cursor through the end of the row.        |\n   * | 1  | Erase from the beginning of the line through the cursor. |\n   * | 2  | Erase complete line.                                     |\n   *\n   * @vt: #P[Protection attributes are not supported.] CSI DECSEL   \"Selective Erase In Line\"  \"CSI ? Ps K\"  \"Currently the same as EL.\"\n   */\n  public eraseInLine(params: IParams): boolean {\n    this._restrictCursor(this._bufferService.cols);\n    switch (params.params[0]) {\n      case 0:\n        this._eraseInBufferLine(this._activeBuffer.y, this._activeBuffer.x, this._bufferService.cols, this._activeBuffer.x === 0);\n        break;\n      case 1:\n        this._eraseInBufferLine(this._activeBuffer.y, 0, this._activeBuffer.x + 1, false);\n        break;\n      case 2:\n        this._eraseInBufferLine(this._activeBuffer.y, 0, this._bufferService.cols, true);\n        break;\n    }\n    this._dirtyRowService.markDirty(this._activeBuffer.y);\n    return true;\n  }\n\n  /**\n   * CSI Ps L\n   * Insert Ps Line(s) (default = 1) (IL).\n   *\n   * @vt: #Y CSI IL  \"Insert Line\"   \"CSI Ps L\"  \"Insert `Ps` blank lines at active row (default=1).\"\n   * For every inserted line at the scroll top one line at the scroll bottom gets removed.\n   * The cursor is set to the first column.\n   * IL has no effect if the cursor is outside the scroll margins.\n   */\n  public insertLines(params: IParams): boolean {\n    this._restrictCursor();\n    let param = params.params[0] || 1;\n\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n\n    const row: number = this._activeBuffer.ybase + this._activeBuffer.y;\n\n    const scrollBottomRowsOffset = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom;\n    const scrollBottomAbsolute = this._bufferService.rows - 1 + this._activeBuffer.ybase - scrollBottomRowsOffset + 1;\n    while (param--) {\n      // test: echo -e '\\e[44m\\e[1L\\e[0m'\n      // blankLine(true) - xterm/linux behavior\n      this._activeBuffer.lines.splice(scrollBottomAbsolute - 1, 1);\n      this._activeBuffer.lines.splice(row, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));\n    }\n\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom);\n    this._activeBuffer.x = 0; // see https://vt100.net/docs/vt220-rm/chapter4.html - vt220 only?\n    return true;\n  }\n\n  /**\n   * CSI Ps M\n   * Delete Ps Line(s) (default = 1) (DL).\n   *\n   * @vt: #Y CSI DL  \"Delete Line\"   \"CSI Ps M\"  \"Delete `Ps` lines at active row (default=1).\"\n   * For every deleted line at the scroll top one blank line at the scroll bottom gets appended.\n   * The cursor is set to the first column.\n   * DL has no effect if the cursor is outside the scroll margins.\n   */\n  public deleteLines(params: IParams): boolean {\n    this._restrictCursor();\n    let param = params.params[0] || 1;\n\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n\n    const row: number = this._activeBuffer.ybase + this._activeBuffer.y;\n\n    let j: number;\n    j = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom;\n    j = this._bufferService.rows - 1 + this._activeBuffer.ybase - j;\n    while (param--) {\n      // test: echo -e '\\e[44m\\e[1M\\e[0m'\n      // blankLine(true) - xterm/linux behavior\n      this._activeBuffer.lines.splice(row, 1);\n      this._activeBuffer.lines.splice(j, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));\n    }\n\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom);\n    this._activeBuffer.x = 0; // see https://vt100.net/docs/vt220-rm/chapter4.html - vt220 only?\n    return true;\n  }\n\n  /**\n   * CSI Ps @\n   * Insert Ps (Blank) Character(s) (default = 1) (ICH).\n   *\n   * @vt: #Y CSI ICH  \"Insert Characters\"   \"CSI Ps @\"  \"Insert `Ps` (blank) characters (default = 1).\"\n   * The ICH sequence inserts `Ps` blank characters. The cursor remains at the beginning of the blank characters.\n   * Text between the cursor and right margin moves to the right. Characters moved past the right margin are lost.\n   *\n   *\n   * FIXME: check against xterm - should not work outside of scroll margins (see VT520 manual)\n   */\n  public insertChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);\n    if (line) {\n      line.insertCells(\n        this._activeBuffer.x,\n        params.params[0] || 1,\n        this._activeBuffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._activeBuffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps P\n   * Delete Ps Character(s) (default = 1) (DCH).\n   *\n   * @vt: #Y CSI DCH   \"Delete Character\"  \"CSI Ps P\"  \"Delete `Ps` characters (default=1).\"\n   * As characters are deleted, the remaining characters between the cursor and right margin move to the left.\n   * Character attributes move with the characters. The terminal adds blank characters at the right margin.\n   *\n   *\n   * FIXME: check against xterm - should not work outside of scroll margins (see VT520 manual)\n   */\n  public deleteChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);\n    if (line) {\n      line.deleteCells(\n        this._activeBuffer.x,\n        params.params[0] || 1,\n        this._activeBuffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._activeBuffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps S  Scroll up Ps lines (default = 1) (SU).\n   *\n   * @vt: #Y CSI SU  \"Scroll Up\"   \"CSI Ps S\"  \"Scroll `Ps` lines up (default=1).\"\n   *\n   *\n   * FIXME: scrolled out lines at top = 1 should add to scrollback (xterm)\n   */\n  public scrollUp(params: IParams): boolean {\n    let param = params.params[0] || 1;\n\n    while (param--) {\n      this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 1);\n      this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps T  Scroll down Ps lines (default = 1) (SD).\n   *\n   * @vt: #Y CSI SD  \"Scroll Down\"   \"CSI Ps T\"  \"Scroll `Ps` lines down (default=1).\"\n   */\n  public scrollDown(params: IParams): boolean {\n    let param = params.params[0] || 1;\n\n    while (param--) {\n      this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 1);\n      this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 0, this._activeBuffer.getBlankLine(DEFAULT_ATTR_DATA));\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps SP @  Scroll left Ps columns (default = 1) (SL) ECMA-48\n   *\n   * Notation: (Pn)\n   * Representation: CSI Pn 02/00 04/00\n   * Parameter default value: Pn = 1\n   * SL causes the data in the presentation component to be moved by n character positions\n   * if the line orientation is horizontal, or by n line positions if the line orientation\n   * is vertical, such that the data appear to move to the left; where n equals the value of Pn.\n   * The active presentation position is not affected by this control function.\n   *\n   * Supported:\n   *   - always left shift (no line orientation setting respected)\n   *\n   * @vt: #Y CSI SL  \"Scroll Left\" \"CSI Ps SP @\" \"Scroll viewport `Ps` times to the left.\"\n   * SL moves the content of all lines within the scroll margins `Ps` times to the left.\n   * SL has no effect outside of the scroll margins.\n   */\n  public scrollLeft(params: IParams): boolean {\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = this._activeBuffer.scrollTop; y <= this._activeBuffer.scrollBottom; ++y) {\n      const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n      line.deleteCells(0, param, this._activeBuffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps SP A  Scroll right Ps columns (default = 1) (SR) ECMA-48\n   *\n   * Notation: (Pn)\n   * Representation: CSI Pn 02/00 04/01\n   * Parameter default value: Pn = 1\n   * SR causes the data in the presentation component to be moved by n character positions\n   * if the line orientation is horizontal, or by n line positions if the line orientation\n   * is vertical, such that the data appear to move to the right; where n equals the value of Pn.\n   * The active presentation position is not affected by this control function.\n   *\n   * Supported:\n   *   - always right shift (no line orientation setting respected)\n   *\n   * @vt: #Y CSI SR  \"Scroll Right\"  \"CSI Ps SP A\"   \"Scroll viewport `Ps` times to the right.\"\n   * SL moves the content of all lines within the scroll margins `Ps` times to the right.\n   * Content at the right margin is lost.\n   * SL has no effect outside of the scroll margins.\n   */\n  public scrollRight(params: IParams): boolean {\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = this._activeBuffer.scrollTop; y <= this._activeBuffer.scrollBottom; ++y) {\n      const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n      line.insertCells(0, param, this._activeBuffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Pm ' }\n   * Insert Ps Column(s) (default = 1) (DECIC), VT420 and up.\n   *\n   * @vt: #Y CSI DECIC \"Insert Columns\"  \"CSI Ps ' }\"  \"Insert `Ps` columns at cursor position.\"\n   * DECIC inserts `Ps` times blank columns at the cursor position for all lines with the scroll margins,\n   * moving content to the right. Content at the right margin is lost.\n   * DECIC has no effect outside the scrolling margins.\n   */\n  public insertColumns(params: IParams): boolean {\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = this._activeBuffer.scrollTop; y <= this._activeBuffer.scrollBottom; ++y) {\n      const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n      line.insertCells(this._activeBuffer.x, param, this._activeBuffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Pm ' ~\n   * Delete Ps Column(s) (default = 1) (DECDC), VT420 and up.\n   *\n   * @vt: #Y CSI DECDC \"Delete Columns\"  \"CSI Ps ' ~\"  \"Delete `Ps` columns at cursor position.\"\n   * DECDC deletes `Ps` times columns at the cursor position for all lines with the scroll margins,\n   * moving content to the left. Blank columns are added at the right margin.\n   * DECDC has no effect outside the scrolling margins.\n   */\n  public deleteColumns(params: IParams): boolean {\n    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) {\n      return true;\n    }\n    const param = params.params[0] || 1;\n    for (let y = this._activeBuffer.scrollTop; y <= this._activeBuffer.scrollBottom; ++y) {\n      const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + y)!;\n      line.deleteCells(this._activeBuffer.x, param, this._activeBuffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());\n      line.isWrapped = false;\n    }\n    this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    return true;\n  }\n\n  /**\n   * CSI Ps X\n   * Erase Ps Character(s) (default = 1) (ECH).\n   *\n   * @vt: #Y CSI ECH   \"Erase Character\"   \"CSI Ps X\"  \"Erase `Ps` characters from current cursor position to the right (default=1).\"\n   * ED erases `Ps` characters from current cursor position to the right.\n   * ED works inside or outside the scrolling margins.\n   */\n  public eraseChars(params: IParams): boolean {\n    this._restrictCursor();\n    const line = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);\n    if (line) {\n      line.replaceCells(\n        this._activeBuffer.x,\n        this._activeBuffer.x + (params.params[0] || 1),\n        this._activeBuffer.getNullCell(this._eraseAttrData()),\n        this._eraseAttrData()\n      );\n      this._dirtyRowService.markDirty(this._activeBuffer.y);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps b  Repeat the preceding graphic character Ps times (REP).\n   * From ECMA 48 (@see http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-048.pdf)\n   *    Notation: (Pn)\n   *    Representation: CSI Pn 06/02\n   *    Parameter default value: Pn = 1\n   *    REP is used to indicate that the preceding character in the data stream,\n   *    if it is a graphic character (represented by one or more bit combinations) including SPACE,\n   *    is to be repeated n times, where n equals the value of Pn.\n   *    If the character preceding REP is a control function or part of a control function,\n   *    the effect of REP is not defined by this Standard.\n   *\n   * Since we propagate the terminal as xterm-256color we have to follow xterm's behavior:\n   *    - fullwidth + surrogate chars are ignored\n   *    - for combining chars only the base char gets repeated\n   *    - text attrs are applied normally\n   *    - wrap around is respected\n   *    - any valid sequence resets the carried forward char\n   *\n   * Note: To get reset on a valid sequence working correctly without much runtime penalty,\n   * the preceding codepoint is stored on the parser in `this.print` and reset during `parser.parse`.\n   *\n   * @vt: #Y CSI REP   \"Repeat Preceding Character\"    \"CSI Ps b\"  \"Repeat preceding character `Ps` times (default=1).\"\n   * REP repeats the previous character `Ps` times advancing the cursor, also wrapping if DECAWM is set.\n   * REP has no effect if the sequence does not follow a printable ASCII character\n   * (NOOP for any other sequence in between or NON ASCII characters).\n   */\n  public repeatPrecedingCharacter(params: IParams): boolean {\n    if (!this._parser.precedingCodepoint) {\n      return true;\n    }\n    // call print to insert the chars and handle correct wrapping\n    const length = params.params[0] || 1;\n    const data = new Uint32Array(length);\n    for (let i = 0; i < length; ++i) {\n      data[i] = this._parser.precedingCodepoint;\n    }\n    this.print(data, 0, data.length);\n    return true;\n  }\n\n  /**\n   * CSI Ps c  Send Device Attributes (Primary DA).\n   *     Ps = 0  or omitted -> request attributes from terminal.  The\n   *     response depends on the decTerminalID resource setting.\n   *     -> CSI ? 1 ; 2 c  (``VT100 with Advanced Video Option'')\n   *     -> CSI ? 1 ; 0 c  (``VT101 with No Options'')\n   *     -> CSI ? 6 c  (``VT102'')\n   *     -> CSI ? 6 0 ; 1 ; 2 ; 6 ; 8 ; 9 ; 1 5 ; c  (``VT220'')\n   *   The VT100-style response parameters do not mean anything by\n   *   themselves.  VT220 parameters do, telling the host what fea-\n   *   tures the terminal supports:\n   *     Ps = 1  -> 132-columns.\n   *     Ps = 2  -> Printer.\n   *     Ps = 6  -> Selective erase.\n   *     Ps = 8  -> User-defined keys.\n   *     Ps = 9  -> National replacement character sets.\n   *     Ps = 1 5  -> Technical characters.\n   *     Ps = 2 2  -> ANSI color, e.g., VT525.\n   *     Ps = 2 9  -> ANSI text locator (i.e., DEC Locator mode).\n   *\n   * @vt: #Y CSI DA1   \"Primary Device Attributes\"     \"CSI c\"  \"Send primary device attributes.\"\n   *\n   *\n   * TODO: fix and cleanup response\n   */\n  public sendDeviceAttributesPrimary(params: IParams): boolean {\n    if (params.params[0] > 0) {\n      return true;\n    }\n    if (this._is('xterm') || this._is('rxvt-unicode') || this._is('screen')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[?1;2c');\n    } else if (this._is('linux')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[?6c');\n    }\n    return true;\n  }\n\n  /**\n   * CSI > Ps c\n   *   Send Device Attributes (Secondary DA).\n   *     Ps = 0  or omitted -> request the terminal's identification\n   *     code.  The response depends on the decTerminalID resource set-\n   *     ting.  It should apply only to VT220 and up, but xterm extends\n   *     this to VT100.\n   *     -> CSI  > Pp ; Pv ; Pc c\n   *   where Pp denotes the terminal type\n   *     Pp = 0  -> ``VT100''.\n   *     Pp = 1  -> ``VT220''.\n   *   and Pv is the firmware version (for xterm, this was originally\n   *   the XFree86 patch number, starting with 95).  In a DEC termi-\n   *   nal, Pc indicates the ROM cartridge registration number and is\n   *   always zero.\n   * More information:\n   *   xterm/charproc.c - line 2012, for more information.\n   *   vim responds with ^[[?0c or ^[[?1c after the terminal's response (?)\n   *\n   * @vt: #Y CSI DA2   \"Secondary Device Attributes\"   \"CSI > c\" \"Send primary device attributes.\"\n   *\n   *\n   * TODO: fix and cleanup response\n   */\n  public sendDeviceAttributesSecondary(params: IParams): boolean {\n    if (params.params[0] > 0) {\n      return true;\n    }\n    // xterm and urxvt\n    // seem to spit this\n    // out around ~370 times (?).\n    if (this._is('xterm')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>0;276;0c');\n    } else if (this._is('rxvt-unicode')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>85;95;0c');\n    } else if (this._is('linux')) {\n      // not supported by linux console.\n      // linux console echoes parameters.\n      this._coreService.triggerDataEvent(params.params[0] + 'c');\n    } else if (this._is('screen')) {\n      this._coreService.triggerDataEvent(C0.ESC + '[>83;40003;0c');\n    }\n    return true;\n  }\n\n  /**\n   * Evaluate if the current terminal is the given argument.\n   * @param term The terminal name to evaluate\n   */\n  private _is(term: string): boolean {\n    return (this._optionsService.options.termName + '').indexOf(term) === 0;\n  }\n\n  /**\n   * CSI Pm h  Set Mode (SM).\n   *     Ps = 2  -> Keyboard Action Mode (AM).\n   *     Ps = 4  -> Insert Mode (IRM).\n   *     Ps = 1 2  -> Send/receive (SRM).\n   *     Ps = 2 0  -> Automatic Newline (LNM).\n   *\n   * @vt: #P[Only IRM is supported.]    CSI SM    \"Set Mode\"  \"CSI Pm h\"  \"Set various terminal modes.\"\n   * Supported param values by SM:\n   *\n   * | Param | Action                                 | Support |\n   * | ----- | -------------------------------------- | ------- |\n   * | 2     | Keyboard Action Mode (KAM). Always on. | #N      |\n   * | 4     | Insert Mode (IRM).                     | #Y      |\n   * | 12    | Send/receive (SRM). Always off.        | #N      |\n   * | 20    | Automatic Newline (LNM). Always off.   | #N      |\n   */\n  public setMode(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 4:\n          this._coreService.modes.insertMode = true;\n          break;\n        case 20:\n          // this._t.convertEol = true;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI ? Pm h\n   *   DEC Private Mode Set (DECSET).\n   *     Ps = 1  -> Application Cursor Keys (DECCKM).\n   *     Ps = 2  -> Designate USASCII for character sets G0-G3\n   *     (DECANM), and set VT100 mode.\n   *     Ps = 3  -> 132 Column Mode (DECCOLM).\n   *     Ps = 4  -> Smooth (Slow) Scroll (DECSCLM).\n   *     Ps = 5  -> Reverse Video (DECSCNM).\n   *     Ps = 6  -> Origin Mode (DECOM).\n   *     Ps = 7  -> Wraparound Mode (DECAWM).\n   *     Ps = 8  -> Auto-repeat Keys (DECARM).\n   *     Ps = 9  -> Send Mouse X & Y on button press.  See the sec-\n   *     tion Mouse Tracking.\n   *     Ps = 1 0  -> Show toolbar (rxvt).\n   *     Ps = 1 2  -> Start Blinking Cursor (att610).\n   *     Ps = 1 8  -> Print form feed (DECPFF).\n   *     Ps = 1 9  -> Set print extent to full screen (DECPEX).\n   *     Ps = 2 5  -> Show Cursor (DECTCEM).\n   *     Ps = 3 0  -> Show scrollbar (rxvt).\n   *     Ps = 3 5  -> Enable font-shifting functions (rxvt).\n   *     Ps = 3 8  -> Enter Tektronix Mode (DECTEK).\n   *     Ps = 4 0  -> Allow 80 -> 132 Mode.\n   *     Ps = 4 1  -> more(1) fix (see curses resource).\n   *     Ps = 4 2  -> Enable Nation Replacement Character sets (DECN-\n   *     RCM).\n   *     Ps = 4 4  -> Turn On Margin Bell.\n   *     Ps = 4 5  -> Reverse-wraparound Mode.\n   *     Ps = 4 6  -> Start Logging.  This is normally disabled by a\n   *     compile-time option.\n   *     Ps = 4 7  -> Use Alternate Screen Buffer.  (This may be dis-\n   *     abled by the titeInhibit resource).\n   *     Ps = 6 6  -> Application keypad (DECNKM).\n   *     Ps = 6 7  -> Backarrow key sends backspace (DECBKM).\n   *     Ps = 1 0 0 0  -> Send Mouse X & Y on button press and\n   *     release.  See the section Mouse Tracking.\n   *     Ps = 1 0 0 1  -> Use Hilite Mouse Tracking.\n   *     Ps = 1 0 0 2  -> Use Cell Motion Mouse Tracking.\n   *     Ps = 1 0 0 3  -> Use All Motion Mouse Tracking.\n   *     Ps = 1 0 0 4  -> Send FocusIn/FocusOut events.\n   *     Ps = 1 0 0 5  -> Enable Extended Mouse Mode.\n   *     Ps = 1 0 1 0  -> Scroll to bottom on tty output (rxvt).\n   *     Ps = 1 0 1 1  -> Scroll to bottom on key press (rxvt).\n   *     Ps = 1 0 3 4  -> Interpret \"meta\" key, sets eighth bit.\n   *     (enables the eightBitInput resource).\n   *     Ps = 1 0 3 5  -> Enable special modifiers for Alt and Num-\n   *     Lock keys.  (This enables the numLock resource).\n   *     Ps = 1 0 3 6  -> Send ESC   when Meta modifies a key.  (This\n   *     enables the metaSendsEscape resource).\n   *     Ps = 1 0 3 7  -> Send DEL from the editing-keypad Delete\n   *     key.\n   *     Ps = 1 0 3 9  -> Send ESC  when Alt modifies a key.  (This\n   *     enables the altSendsEscape resource).\n   *     Ps = 1 0 4 0  -> Keep selection even if not highlighted.\n   *     (This enables the keepSelection resource).\n   *     Ps = 1 0 4 1  -> Use the CLIPBOARD selection.  (This enables\n   *     the selectToClipboard resource).\n   *     Ps = 1 0 4 2  -> Enable Urgency window manager hint when\n   *     Control-G is received.  (This enables the bellIsUrgent\n   *     resource).\n   *     Ps = 1 0 4 3  -> Enable raising of the window when Control-G\n   *     is received.  (enables the popOnBell resource).\n   *     Ps = 1 0 4 7  -> Use Alternate Screen Buffer.  (This may be\n   *     disabled by the titeInhibit resource).\n   *     Ps = 1 0 4 8  -> Save cursor as in DECSC.  (This may be dis-\n   *     abled by the titeInhibit resource).\n   *     Ps = 1 0 4 9  -> Save cursor as in DECSC and use Alternate\n   *     Screen Buffer, clearing it first.  (This may be disabled by\n   *     the titeInhibit resource).  This combines the effects of the 1\n   *     0 4 7  and 1 0 4 8  modes.  Use this with terminfo-based\n   *     applications rather than the 4 7  mode.\n   *     Ps = 1 0 5 0  -> Set terminfo/termcap function-key mode.\n   *     Ps = 1 0 5 1  -> Set Sun function-key mode.\n   *     Ps = 1 0 5 2  -> Set HP function-key mode.\n   *     Ps = 1 0 5 3  -> Set SCO function-key mode.\n   *     Ps = 1 0 6 0  -> Set legacy keyboard emulation (X11R6).\n   *     Ps = 1 0 6 1  -> Set VT220 keyboard emulation.\n   *     Ps = 2 0 0 4  -> Set bracketed paste mode.\n   * Modes:\n   *   http: *vt100.net/docs/vt220-rm/chapter4.html\n   *\n   * @vt: #P[See below for supported modes.]    CSI DECSET  \"DEC Private Set Mode\" \"CSI ? Pm h\"  \"Set various terminal attributes.\"\n   * Supported param values by DECSET:\n   *\n   * | param | Action                                                  | Support |\n   * | ----- | ------------------------------------------------------- | --------|\n   * | 1     | Application Cursor Keys (DECCKM).                       | #Y      |\n   * | 2     | Designate US-ASCII for character sets G0-G3 (DECANM).   | #Y      |\n   * | 3     | 132 Column Mode (DECCOLM).                              | #Y      |\n   * | 6     | Origin Mode (DECOM).                                    | #Y      |\n   * | 7     | Auto-wrap Mode (DECAWM).                                | #Y      |\n   * | 8     | Auto-repeat Keys (DECARM). Always on.                   | #N      |\n   * | 9     | X10 xterm mouse protocol.                               | #Y      |\n   * | 12    | Start Blinking Cursor.                                  | #Y      |\n   * | 25    | Show Cursor (DECTCEM).                                  | #Y      |\n   * | 45    | Reverse wrap-around.                                    | #Y      |\n   * | 47    | Use Alternate Screen Buffer.                            | #Y      |\n   * | 66    | Application keypad (DECNKM).                            | #Y      |\n   * | 1000  | X11 xterm mouse protocol.                               | #Y      |\n   * | 1002  | Use Cell Motion Mouse Tracking.                         | #Y      |\n   * | 1003  | Use All Motion Mouse Tracking.                          | #Y      |\n   * | 1004  | Send FocusIn/FocusOut events                            | #Y      |\n   * | 1005  | Enable UTF-8 Mouse Mode.                                | #N      |\n   * | 1006  | Enable SGR Mouse Mode.                                  | #Y      |\n   * | 1015  | Enable urxvt Mouse Mode.                                | #N      |\n   * | 1047  | Use Alternate Screen Buffer.                            | #Y      |\n   * | 1048  | Save cursor as in DECSC.                                | #Y      |\n   * | 1049  | Save cursor and switch to alternate buffer clearing it. | #P[Does not clear the alternate buffer.] |\n   * | 2004  | Set bracketed paste mode.                               | #Y      |\n   *\n   *\n   * FIXME: implement DECSCNM, 1049 should clear altbuffer\n   */\n  public setModePrivate(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 1:\n          this._coreService.decPrivateModes.applicationCursorKeys = true;\n          break;\n        case 2:\n          this._charsetService.setgCharset(0, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(1, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(2, DEFAULT_CHARSET);\n          this._charsetService.setgCharset(3, DEFAULT_CHARSET);\n          // set VT100 mode here\n          break;\n        case 3:\n          /**\n           * DECCOLM - 132 column mode.\n           * This is only active if 'SetWinLines' (24) is enabled\n           * through `options.windowsOptions`.\n           */\n          if (this._optionsService.options.windowOptions.setWinLines) {\n            this._bufferService.resize(132, this._bufferService.rows);\n            this._onRequestReset.fire();\n          }\n          break;\n        case 6:\n          this._coreService.decPrivateModes.origin = true;\n          this._setCursor(0, 0);\n          break;\n        case 7:\n          this._coreService.decPrivateModes.wraparound = true;\n          break;\n        case 12:\n          // this.cursorBlink = true;\n          break;\n        case 45:\n          this._coreService.decPrivateModes.reverseWraparound = true;\n          break;\n        case 66:\n          this._logService.debug('Serial port requested application keypad.');\n          this._coreService.decPrivateModes.applicationKeypad = true;\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 9: // X10 Mouse\n          // no release, no motion, no wheel, no modifiers.\n          this._coreMouseService.activeProtocol = 'X10';\n          break;\n        case 1000: // vt200 mouse\n          // no motion.\n          this._coreMouseService.activeProtocol = 'VT200';\n          break;\n        case 1002: // button event mouse\n          this._coreMouseService.activeProtocol = 'DRAG';\n          break;\n        case 1003: // any event mouse\n          // any event - sends motion events,\n          // even if there is no button held down.\n          this._coreMouseService.activeProtocol = 'ANY';\n          break;\n        case 1004: // send focusin/focusout events\n          // focusin: ^[[I\n          // focusout: ^[[O\n          this._coreService.decPrivateModes.sendFocus = true;\n          this._onRequestSendFocus.fire();\n          break;\n        case 1005: // utf8 ext mode mouse - removed in #2507\n          this._logService.debug('DECSET 1005 not supported (see #2507)');\n          break;\n        case 1006: // sgr ext mode mouse\n          this._coreMouseService.activeEncoding = 'SGR';\n          break;\n        case 1015: // urxvt ext mode mouse - removed in #2507\n          this._logService.debug('DECSET 1015 not supported (see #2507)');\n          break;\n        case 25: // show cursor\n          this._coreService.isCursorHidden = false;\n          break;\n        case 1048: // alt screen cursor\n          this.saveCursor();\n          break;\n        case 1049: // alt screen buffer cursor\n          this.saveCursor();\n        // FALL-THROUGH\n        case 47: // alt screen buffer\n        case 1047: // alt screen buffer\n          this._bufferService.buffers.activateAltBuffer(this._eraseAttrData());\n          this._coreService.isCursorInitialized = true;\n          this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 2004: // bracketed paste mode (https://cirw.in/blog/bracketed-paste)\n          this._coreService.decPrivateModes.bracketedPasteMode = true;\n          break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * CSI Pm l  Reset Mode (RM).\n   *     Ps = 2  -> Keyboard Action Mode (AM).\n   *     Ps = 4  -> Replace Mode (IRM).\n   *     Ps = 1 2  -> Send/receive (SRM).\n   *     Ps = 2 0  -> Normal Linefeed (LNM).\n   *\n   * @vt: #P[Only IRM is supported.]    CSI RM    \"Reset Mode\"  \"CSI Pm l\"  \"Set various terminal attributes.\"\n   * Supported param values by RM:\n   *\n   * | Param | Action                                 | Support |\n   * | ----- | -------------------------------------- | ------- |\n   * | 2     | Keyboard Action Mode (KAM). Always on. | #N      |\n   * | 4     | Replace Mode (IRM). (default)          | #Y      |\n   * | 12    | Send/receive (SRM). Always off.        | #N      |\n   * | 20    | Normal Linefeed (LNM). Always off.     | #N      |\n   *\n   *\n   * FIXME: why is LNM commented out?\n   */\n  public resetMode(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 4:\n          this._coreService.modes.insertMode = false;\n          break;\n        case 20:\n          // this._t.convertEol = false;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI ? Pm l\n   *   DEC Private Mode Reset (DECRST).\n   *     Ps = 1  -> Normal Cursor Keys (DECCKM).\n   *     Ps = 2  -> Designate VT52 mode (DECANM).\n   *     Ps = 3  -> 80 Column Mode (DECCOLM).\n   *     Ps = 4  -> Jump (Fast) Scroll (DECSCLM).\n   *     Ps = 5  -> Normal Video (DECSCNM).\n   *     Ps = 6  -> Normal Cursor Mode (DECOM).\n   *     Ps = 7  -> No Wraparound Mode (DECAWM).\n   *     Ps = 8  -> No Auto-repeat Keys (DECARM).\n   *     Ps = 9  -> Don't send Mouse X & Y on button press.\n   *     Ps = 1 0  -> Hide toolbar (rxvt).\n   *     Ps = 1 2  -> Stop Blinking Cursor (att610).\n   *     Ps = 1 8  -> Don't print form feed (DECPFF).\n   *     Ps = 1 9  -> Limit print to scrolling region (DECPEX).\n   *     Ps = 2 5  -> Hide Cursor (DECTCEM).\n   *     Ps = 3 0  -> Don't show scrollbar (rxvt).\n   *     Ps = 3 5  -> Disable font-shifting functions (rxvt).\n   *     Ps = 4 0  -> Disallow 80 -> 132 Mode.\n   *     Ps = 4 1  -> No more(1) fix (see curses resource).\n   *     Ps = 4 2  -> Disable Nation Replacement Character sets (DEC-\n   *     NRCM).\n   *     Ps = 4 4  -> Turn Off Margin Bell.\n   *     Ps = 4 5  -> No Reverse-wraparound Mode.\n   *     Ps = 4 6  -> Stop Logging.  (This is normally disabled by a\n   *     compile-time option).\n   *     Ps = 4 7  -> Use Normal Screen Buffer.\n   *     Ps = 6 6  -> Numeric keypad (DECNKM).\n   *     Ps = 6 7  -> Backarrow key sends delete (DECBKM).\n   *     Ps = 1 0 0 0  -> Don't send Mouse X & Y on button press and\n   *     release.  See the section Mouse Tracking.\n   *     Ps = 1 0 0 1  -> Don't use Hilite Mouse Tracking.\n   *     Ps = 1 0 0 2  -> Don't use Cell Motion Mouse Tracking.\n   *     Ps = 1 0 0 3  -> Don't use All Motion Mouse Tracking.\n   *     Ps = 1 0 0 4  -> Don't send FocusIn/FocusOut events.\n   *     Ps = 1 0 0 5  -> Disable Extended Mouse Mode.\n   *     Ps = 1 0 1 0  -> Don't scroll to bottom on tty output\n   *     (rxvt).\n   *     Ps = 1 0 1 1  -> Don't scroll to bottom on key press (rxvt).\n   *     Ps = 1 0 3 4  -> Don't interpret \"meta\" key.  (This disables\n   *     the eightBitInput resource).\n   *     Ps = 1 0 3 5  -> Disable special modifiers for Alt and Num-\n   *     Lock keys.  (This disables the numLock resource).\n   *     Ps = 1 0 3 6  -> Don't send ESC  when Meta modifies a key.\n   *     (This disables the metaSendsEscape resource).\n   *     Ps = 1 0 3 7  -> Send VT220 Remove from the editing-keypad\n   *     Delete key.\n   *     Ps = 1 0 3 9  -> Don't send ESC  when Alt modifies a key.\n   *     (This disables the altSendsEscape resource).\n   *     Ps = 1 0 4 0  -> Do not keep selection when not highlighted.\n   *     (This disables the keepSelection resource).\n   *     Ps = 1 0 4 1  -> Use the PRIMARY selection.  (This disables\n   *     the selectToClipboard resource).\n   *     Ps = 1 0 4 2  -> Disable Urgency window manager hint when\n   *     Control-G is received.  (This disables the bellIsUrgent\n   *     resource).\n   *     Ps = 1 0 4 3  -> Disable raising of the window when Control-\n   *     G is received.  (This disables the popOnBell resource).\n   *     Ps = 1 0 4 7  -> Use Normal Screen Buffer, clearing screen\n   *     first if in the Alternate Screen.  (This may be disabled by\n   *     the titeInhibit resource).\n   *     Ps = 1 0 4 8  -> Restore cursor as in DECRC.  (This may be\n   *     disabled by the titeInhibit resource).\n   *     Ps = 1 0 4 9  -> Use Normal Screen Buffer and restore cursor\n   *     as in DECRC.  (This may be disabled by the titeInhibit\n   *     resource).  This combines the effects of the 1 0 4 7  and 1 0\n   *     4 8  modes.  Use this with terminfo-based applications rather\n   *     than the 4 7  mode.\n   *     Ps = 1 0 5 0  -> Reset terminfo/termcap function-key mode.\n   *     Ps = 1 0 5 1  -> Reset Sun function-key mode.\n   *     Ps = 1 0 5 2  -> Reset HP function-key mode.\n   *     Ps = 1 0 5 3  -> Reset SCO function-key mode.\n   *     Ps = 1 0 6 0  -> Reset legacy keyboard emulation (X11R6).\n   *     Ps = 1 0 6 1  -> Reset keyboard emulation to Sun/PC style.\n   *     Ps = 2 0 0 4  -> Reset bracketed paste mode.\n   *\n   * @vt: #P[See below for supported modes.]    CSI DECRST  \"DEC Private Reset Mode\" \"CSI ? Pm l\"  \"Reset various terminal attributes.\"\n   * Supported param values by DECRST:\n   *\n   * | param | Action                                                  | Support |\n   * | ----- | ------------------------------------------------------- | ------- |\n   * | 1     | Normal Cursor Keys (DECCKM).                            | #Y      |\n   * | 2     | Designate VT52 mode (DECANM).                           | #N      |\n   * | 3     | 80 Column Mode (DECCOLM).                               | #B[Switches to old column width instead of 80.] |\n   * | 6     | Normal Cursor Mode (DECOM).                             | #Y      |\n   * | 7     | No Wraparound Mode (DECAWM).                            | #Y      |\n   * | 8     | No Auto-repeat Keys (DECARM).                           | #N      |\n   * | 9     | Don't send Mouse X & Y on button press.                 | #Y      |\n   * | 12    | Stop Blinking Cursor.                                   | #Y      |\n   * | 25    | Hide Cursor (DECTCEM).                                  | #Y      |\n   * | 45    | No reverse wrap-around.                                 | #Y      |\n   * | 47    | Use Normal Screen Buffer.                               | #Y      |\n   * | 66    | Numeric keypad (DECNKM).                                | #Y      |\n   * | 1000  | Don't send Mouse reports.                               | #Y      |\n   * | 1002  | Don't use Cell Motion Mouse Tracking.                   | #Y      |\n   * | 1003  | Don't use All Motion Mouse Tracking.                    | #Y      |\n   * | 1004  | Don't send FocusIn/FocusOut events.                     | #Y      |\n   * | 1005  | Disable UTF-8 Mouse Mode.                               | #N      |\n   * | 1006  | Disable SGR Mouse Mode.                                 | #Y      |\n   * | 1015  | Disable urxvt Mouse Mode.                               | #N      |\n   * | 1047  | Use Normal Screen Buffer (clearing screen if in alt).   | #Y      |\n   * | 1048  | Restore cursor as in DECRC.                             | #Y      |\n   * | 1049  | Use Normal Screen Buffer and restore cursor.            | #Y      |\n   * | 2004  | Reset bracketed paste mode.                             | #Y      |\n   *\n   *\n   * FIXME: DECCOLM is currently broken (already fixed in window options PR)\n   */\n  public resetModePrivate(params: IParams): boolean {\n    for (let i = 0; i < params.length; i++) {\n      switch (params.params[i]) {\n        case 1:\n          this._coreService.decPrivateModes.applicationCursorKeys = false;\n          break;\n        case 3:\n          /**\n           * DECCOLM - 80 column mode.\n           * This is only active if 'SetWinLines' (24) is enabled\n           * through `options.windowsOptions`.\n           */\n          if (this._optionsService.options.windowOptions.setWinLines) {\n            this._bufferService.resize(80, this._bufferService.rows);\n            this._onRequestReset.fire();\n          }\n          break;\n        case 6:\n          this._coreService.decPrivateModes.origin = false;\n          this._setCursor(0, 0);\n          break;\n        case 7:\n          this._coreService.decPrivateModes.wraparound = false;\n          break;\n        case 12:\n          // this.cursorBlink = false;\n          break;\n        case 45:\n          this._coreService.decPrivateModes.reverseWraparound = false;\n          break;\n        case 66:\n          this._logService.debug('Switching back to normal keypad.');\n          this._coreService.decPrivateModes.applicationKeypad = false;\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 9: // X10 Mouse\n        case 1000: // vt200 mouse\n        case 1002: // button event mouse\n        case 1003: // any event mouse\n          this._coreMouseService.activeProtocol = 'NONE';\n          break;\n        case 1004: // send focusin/focusout events\n          this._coreService.decPrivateModes.sendFocus = false;\n          break;\n        case 1005: // utf8 ext mode mouse - removed in #2507\n          this._logService.debug('DECRST 1005 not supported (see #2507)');\n          break;\n        case 1006: // sgr ext mode mouse\n          this._coreMouseService.activeEncoding = 'DEFAULT';\n          break;\n        case 1015: // urxvt ext mode mouse - removed in #2507\n          this._logService.debug('DECRST 1015 not supported (see #2507)');\n          break;\n        case 25: // hide cursor\n          this._coreService.isCursorHidden = true;\n          break;\n        case 1048: // alt screen cursor\n          this.restoreCursor();\n          break;\n        case 1049: // alt screen buffer cursor\n        // FALL-THROUGH\n        case 47: // normal screen buffer\n        case 1047: // normal screen buffer - clearing it first\n          // Ensure the selection manager has the correct buffer\n          this._bufferService.buffers.activateNormalBuffer();\n          if (params.params[i] === 1049) {\n            this.restoreCursor();\n          }\n          this._coreService.isCursorInitialized = true;\n          this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);\n          this._onRequestSyncScrollBar.fire();\n          break;\n        case 2004: // bracketed paste mode (https://cirw.in/blog/bracketed-paste)\n          this._coreService.decPrivateModes.bracketedPasteMode = false;\n          break;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Helper to write color information packed with color mode.\n   */\n  private _updateAttrColor(color: number, mode: number, c1: number, c2: number, c3: number): number {\n    if (mode === 2) {\n      color |= Attributes.CM_RGB;\n      color &= ~Attributes.RGB_MASK;\n      color |= AttributeData.fromColorRGB([c1, c2, c3]);\n    } else if (mode === 5) {\n      color &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n      color |= Attributes.CM_P256 | (c1 & 0xff);\n    }\n    return color;\n  }\n\n  /**\n   * Helper to extract and apply color params/subparams.\n   * Returns advance for params index.\n   */\n  private _extractColor(params: IParams, pos: number, attr: IAttributeData): number {\n    // normalize params\n    // meaning: [target, CM, ign, val, val, val]\n    // RGB    : [ 38/48,  2, ign,   r,   g,   b]\n    // P256   : [ 38/48,  5, ign,   v, ign, ign]\n    const accu = [0, 0, -1, 0, 0, 0];\n\n    // alignment placeholder for non color space sequences\n    let cSpace = 0;\n\n    // return advance we took in params\n    let advance = 0;\n\n    do {\n      accu[advance + cSpace] = params.params[pos + advance];\n      if (params.hasSubParams(pos + advance)) {\n        const subparams = params.getSubParams(pos + advance)!;\n        let i = 0;\n        do {\n          if (accu[1] === 5) {\n            cSpace = 1;\n          }\n          accu[advance + i + 1 + cSpace] = subparams[i];\n        } while (++i < subparams.length && i + advance + 1 + cSpace < accu.length);\n        break;\n      }\n      // exit early if can decide color mode with semicolons\n      if ((accu[1] === 5 && advance + cSpace >= 2)\n        || (accu[1] === 2 && advance + cSpace >= 5)) {\n        break;\n      }\n      // offset colorSpace slot for semicolon mode\n      if (accu[1]) {\n        cSpace = 1;\n      }\n    } while (++advance + pos < params.length && advance + cSpace < accu.length);\n\n    // set default values to 0\n    for (let i = 2; i < accu.length; ++i) {\n      if (accu[i] === -1) {\n        accu[i] = 0;\n      }\n    }\n\n    // apply colors\n    switch (accu[0]) {\n      case 38:\n        attr.fg = this._updateAttrColor(attr.fg, accu[1], accu[3], accu[4], accu[5]);\n        break;\n      case 48:\n        attr.bg = this._updateAttrColor(attr.bg, accu[1], accu[3], accu[4], accu[5]);\n        break;\n      case 58:\n        attr.extended = attr.extended.clone();\n        attr.extended.underlineColor = this._updateAttrColor(attr.extended.underlineColor, accu[1], accu[3], accu[4], accu[5]);\n    }\n\n    return advance;\n  }\n\n  /**\n   * SGR 4 subparams:\n   *    4:0   -   equal to SGR 24 (turn off all underline)\n   *    4:1   -   equal to SGR 4 (single underline)\n   *    4:2   -   equal to SGR 21 (double underline)\n   *    4:3   -   curly underline\n   *    4:4   -   dotted underline\n   *    4:5   -   dashed underline\n   */\n  private _processUnderline(style: number, attr: IAttributeData): void {\n    // treat extended attrs as immutable, thus always clone from old one\n    // this is needed since the buffer only holds references to it\n    attr.extended = attr.extended.clone();\n\n    // default to 1 == single underline\n    if (!~style || style > 5) {\n      style = 1;\n    }\n    attr.extended.underlineStyle = style;\n    attr.fg |= FgFlags.UNDERLINE;\n\n    // 0 deactivates underline\n    if (style === 0) {\n      attr.fg &= ~FgFlags.UNDERLINE;\n    }\n\n    // update HAS_EXTENDED in BG\n    attr.updateExtended();\n  }\n\n  /**\n   * CSI Pm m  Character Attributes (SGR).\n   *\n   * @vt: #P[See below for supported attributes.]    CSI SGR   \"Select Graphic Rendition\"  \"CSI Pm m\"  \"Set/Reset various text attributes.\"\n   * SGR selects one or more character attributes at the same time. Multiple params (up to 32)\n   * are applied in order from left to right. The changed attributes are applied to all new\n   * characters received. If you move characters in the viewport by scrolling or any other means,\n   * then the attributes move with the characters.\n   *\n   * Supported param values by SGR:\n   *\n   * | Param     | Meaning                                                  | Support |\n   * | --------- | -------------------------------------------------------- | ------- |\n   * | 0         | Normal (default). Resets any other preceding SGR.        | #Y      |\n   * | 1         | Bold. (also see `options.drawBoldTextInBrightColors`)    | #Y      |\n   * | 2         | Faint, decreased intensity.                              | #Y      |\n   * | 3         | Italic.                                                  | #Y      |\n   * | 4         | Underlined (see below for style support).                | #Y      |\n   * | 5         | Slowly blinking.                                         | #N      |\n   * | 6         | Rapidly blinking.                                        | #N      |\n   * | 7         | Inverse. Flips foreground and background color.          | #Y      |\n   * | 8         | Invisible (hidden).                                      | #Y      |\n   * | 9         | Crossed-out characters (strikethrough).                  | #Y      |\n   * | 21        | Doubly underlined.                                       | #P[Currently outputs a single underline.] |\n   * | 22        | Normal (neither bold nor faint).                         | #Y      |\n   * | 23        | No italic.                                               | #Y      |\n   * | 24        | Not underlined.                                          | #Y      |\n   * | 25        | Steady (not blinking).                                   | #Y      |\n   * | 27        | Positive (not inverse).                                  | #Y      |\n   * | 28        | Visible (not hidden).                                    | #Y      |\n   * | 29        | Not Crossed-out (strikethrough).                         | #Y      |\n   * | 30        | Foreground color: Black.                                 | #Y      |\n   * | 31        | Foreground color: Red.                                   | #Y      |\n   * | 32        | Foreground color: Green.                                 | #Y      |\n   * | 33        | Foreground color: Yellow.                                | #Y      |\n   * | 34        | Foreground color: Blue.                                  | #Y      |\n   * | 35        | Foreground color: Magenta.                               | #Y      |\n   * | 36        | Foreground color: Cyan.                                  | #Y      |\n   * | 37        | Foreground color: White.                                 | #Y      |\n   * | 38        | Foreground color: Extended color.                        | #P[Support for RGB and indexed colors, see below.] |\n   * | 39        | Foreground color: Default (original).                    | #Y      |\n   * | 40        | Background color: Black.                                 | #Y      |\n   * | 41        | Background color: Red.                                   | #Y      |\n   * | 42        | Background color: Green.                                 | #Y      |\n   * | 43        | Background color: Yellow.                                | #Y      |\n   * | 44        | Background color: Blue.                                  | #Y      |\n   * | 45        | Background color: Magenta.                               | #Y      |\n   * | 46        | Background color: Cyan.                                  | #Y      |\n   * | 47        | Background color: White.                                 | #Y      |\n   * | 48        | Background color: Extended color.                        | #P[Support for RGB and indexed colors, see below.] |\n   * | 49        | Background color: Default (original).                    | #Y      |\n   * | 90 - 97   | Bright foreground color (analogous to 30 - 37).          | #Y      |\n   * | 100 - 107 | Bright background color (analogous to 40 - 47).          | #Y      |\n   *\n   * Underline supports subparams to denote the style in the form `4 : x`:\n   *\n   * | x      | Meaning                                                       | Support |\n   * | ------ | ------------------------------------------------------------- | ------- |\n   * | 0      | No underline. Same as `SGR 24 m`.                             | #Y      |\n   * | 1      | Single underline. Same as `SGR 4 m`.                          | #Y      |\n   * | 2      | Double underline.                                             | #P[Currently outputs a single underline.] |\n   * | 3      | Curly underline.                                              | #P[Currently outputs a single underline.] |\n   * | 4      | Dotted underline.                                             | #P[Currently outputs a single underline.] |\n   * | 5      | Dashed underline.                                             | #P[Currently outputs a single underline.] |\n   * | other  | Single underline. Same as `SGR 4 m`.                          | #Y      |\n   *\n   * Extended colors are supported for foreground (Ps=38) and background (Ps=48) as follows:\n   *\n   * | Ps + 1 | Meaning                                                       | Support |\n   * | ------ | ------------------------------------------------------------- | ------- |\n   * | 0      | Implementation defined.                                       | #N      |\n   * | 1      | Transparent.                                                  | #N      |\n   * | 2      | RGB color as `Ps ; 2 ; R ; G ; B` or `Ps : 2 : : R : G : B`.  | #Y      |\n   * | 3      | CMY color.                                                    | #N      |\n   * | 4      | CMYK color.                                                   | #N      |\n   * | 5      | Indexed (256 colors) as `Ps ; 5 ; INDEX` or `Ps : 5 : INDEX`. | #Y      |\n   *\n   *\n   * FIXME: blinking is implemented in attrs, but not working in renderers?\n   * FIXME: remove dead branch for p=100\n   */\n  public charAttributes(params: IParams): boolean {\n    // Optimize a single SGR0.\n    if (params.length === 1 && params.params[0] === 0) {\n      this._curAttrData.fg = DEFAULT_ATTR_DATA.fg;\n      this._curAttrData.bg = DEFAULT_ATTR_DATA.bg;\n      return true;\n    }\n\n    const l = params.length;\n    let p;\n    const attr = this._curAttrData;\n\n    for (let i = 0; i < l; i++) {\n      p = params.params[i];\n      if (p >= 30 && p <= 37) {\n        // fg color 8\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.fg |= Attributes.CM_P16 | (p - 30);\n      } else if (p >= 40 && p <= 47) {\n        // bg color 8\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.bg |= Attributes.CM_P16 | (p - 40);\n      } else if (p >= 90 && p <= 97) {\n        // fg color 16\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.fg |= Attributes.CM_P16 | (p - 90) | 8;\n      } else if (p >= 100 && p <= 107) {\n        // bg color 16\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.PCOLOR_MASK);\n        attr.bg |= Attributes.CM_P16 | (p - 100) | 8;\n      } else if (p === 0) {\n        // default\n        attr.fg = DEFAULT_ATTR_DATA.fg;\n        attr.bg = DEFAULT_ATTR_DATA.bg;\n      } else if (p === 1) {\n        // bold text\n        attr.fg |= FgFlags.BOLD;\n      } else if (p === 3) {\n        // italic text\n        attr.bg |= BgFlags.ITALIC;\n      } else if (p === 4) {\n        // underlined text\n        attr.fg |= FgFlags.UNDERLINE;\n        this._processUnderline(params.hasSubParams(i) ? params.getSubParams(i)![0] : UnderlineStyle.SINGLE, attr);\n      } else if (p === 5) {\n        // blink\n        attr.fg |= FgFlags.BLINK;\n      } else if (p === 7) {\n        // inverse and positive\n        // test with: echo -e '\\e[31m\\e[42mhello\\e[7mworld\\e[27mhi\\e[m'\n        attr.fg |= FgFlags.INVERSE;\n      } else if (p === 8) {\n        // invisible\n        attr.fg |= FgFlags.INVISIBLE;\n      } else if (p === 9) {\n        // strikethrough\n        attr.fg |= FgFlags.STRIKETHROUGH;\n      } else if (p === 2) {\n        // dimmed text\n        attr.bg |= BgFlags.DIM;\n      } else if (p === 21) {\n        // double underline\n        this._processUnderline(UnderlineStyle.DOUBLE, attr);\n      } else if (p === 22) {\n        // not bold nor faint\n        attr.fg &= ~FgFlags.BOLD;\n        attr.bg &= ~BgFlags.DIM;\n      } else if (p === 23) {\n        // not italic\n        attr.bg &= ~BgFlags.ITALIC;\n      } else if (p === 24) {\n        // not underlined\n        attr.fg &= ~FgFlags.UNDERLINE;\n      } else if (p === 25) {\n        // not blink\n        attr.fg &= ~FgFlags.BLINK;\n      } else if (p === 27) {\n        // not inverse\n        attr.fg &= ~FgFlags.INVERSE;\n      } else if (p === 28) {\n        // not invisible\n        attr.fg &= ~FgFlags.INVISIBLE;\n      } else if (p === 29) {\n        // not strikethrough\n        attr.fg &= ~FgFlags.STRIKETHROUGH;\n      } else if (p === 39) {\n        // reset fg\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.fg |= DEFAULT_ATTR_DATA.fg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else if (p === 49) {\n        // reset bg\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.bg |= DEFAULT_ATTR_DATA.bg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else if (p === 38 || p === 48 || p === 58) {\n        // fg color 256 and RGB\n        i += this._extractColor(params, i, attr);\n      } else if (p === 59) {\n        attr.extended = attr.extended.clone();\n        attr.extended.underlineColor = -1;\n        attr.updateExtended();\n      } else if (p === 100) { // FIXME: dead branch, p=100 already handled above!\n        // reset fg/bg\n        attr.fg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.fg |= DEFAULT_ATTR_DATA.fg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n        attr.bg &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n        attr.bg |= DEFAULT_ATTR_DATA.bg & (Attributes.PCOLOR_MASK | Attributes.RGB_MASK);\n      } else {\n        this._logService.debug('Unknown SGR attribute: %d.', p);\n      }\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps n  Device Status Report (DSR).\n   *     Ps = 5  -> Status Report.  Result (``OK'') is\n   *   CSI 0 n\n   *     Ps = 6  -> Report Cursor Position (CPR) [row;column].\n   *   Result is\n   *   CSI r ; c R\n   * CSI ? Ps n\n   *   Device Status Report (DSR, DEC-specific).\n   *     Ps = 6  -> Report Cursor Position (CPR) [row;column] as CSI\n   *     ? r ; c R (assumes page is zero).\n   *     Ps = 1 5  -> Report Printer status as CSI ? 1 0  n  (ready).\n   *     or CSI ? 1 1  n  (not ready).\n   *     Ps = 2 5  -> Report UDK status as CSI ? 2 0  n  (unlocked)\n   *     or CSI ? 2 1  n  (locked).\n   *     Ps = 2 6  -> Report Keyboard status as\n   *   CSI ? 2 7  ;  1  ;  0  ;  0  n  (North American).\n   *   The last two parameters apply to VT400 & up, and denote key-\n   *   board ready and LK01 respectively.\n   *     Ps = 5 3  -> Report Locator status as\n   *   CSI ? 5 3  n  Locator available, if compiled-in, or\n   *   CSI ? 5 0  n  No Locator, if not.\n   *\n   * @vt: #Y CSI DSR   \"Device Status Report\"  \"CSI Ps n\"  \"Request cursor position (CPR) with `Ps` = 6.\"\n   */\n  public deviceStatus(params: IParams): boolean {\n    switch (params.params[0]) {\n      case 5:\n        // status report\n        this._coreService.triggerDataEvent(`${C0.ESC}[0n`);\n        break;\n      case 6:\n        // cursor position\n        const y = this._activeBuffer.y + 1;\n        const x = this._activeBuffer.x + 1;\n        this._coreService.triggerDataEvent(`${C0.ESC}[${y};${x}R`);\n        break;\n    }\n    return true;\n  }\n\n  // @vt: #P[Only CPR is supported.]  CSI DECDSR  \"DEC Device Status Report\"  \"CSI ? Ps n\"  \"Only CPR is supported (same as DSR).\"\n  public deviceStatusPrivate(params: IParams): boolean {\n    // modern xterm doesnt seem to\n    // respond to any of these except ?6, 6, and 5\n    switch (params.params[0]) {\n      case 6:\n        // cursor position\n        const y = this._activeBuffer.y + 1;\n        const x = this._activeBuffer.x + 1;\n        this._coreService.triggerDataEvent(`${C0.ESC}[?${y};${x}R`);\n        break;\n      case 15:\n        // no printer\n        // this.handler(C0.ESC + '[?11n');\n        break;\n      case 25:\n        // dont support user defined keys\n        // this.handler(C0.ESC + '[?21n');\n        break;\n      case 26:\n        // north american keyboard\n        // this.handler(C0.ESC + '[?27;1;0;0n');\n        break;\n      case 53:\n        // no dec locator/mouse\n        // this.handler(C0.ESC + '[?50n');\n        break;\n    }\n    return true;\n  }\n\n  /**\n   * CSI ! p   Soft terminal reset (DECSTR).\n   * http://vt100.net/docs/vt220-rm/table4-10.html\n   *\n   * @vt: #Y CSI DECSTR  \"Soft Terminal Reset\"   \"CSI ! p\"   \"Reset several terminal attributes to initial state.\"\n   * There are two terminal reset sequences - RIS and DECSTR. While RIS performs almost a full terminal bootstrap,\n   * DECSTR only resets certain attributes. For most needs DECSTR should be sufficient.\n   *\n   * The following terminal attributes are reset to default values:\n   * - IRM is reset (dafault = false)\n   * - scroll margins are reset (default = viewport size)\n   * - erase attributes are reset to default\n   * - charsets are reset\n   * - DECSC data is reset to initial values\n   * - DECOM is reset to absolute mode\n   *\n   *\n   * FIXME: there are several more attributes missing (see VT520 manual)\n   */\n  public softReset(params: IParams): boolean {\n    this._coreService.isCursorHidden = false;\n    this._onRequestSyncScrollBar.fire();\n    this._activeBuffer.scrollTop = 0;\n    this._activeBuffer.scrollBottom = this._bufferService.rows - 1;\n    this._curAttrData = DEFAULT_ATTR_DATA.clone();\n    this._coreService.reset();\n    this._charsetService.reset();\n\n    // reset DECSC data\n    this._activeBuffer.savedX = 0;\n    this._activeBuffer.savedY = this._activeBuffer.ybase;\n    this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg;\n    this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg;\n    this._activeBuffer.savedCharset = this._charsetService.charset;\n\n    // reset DECOM\n    this._coreService.decPrivateModes.origin = false;\n    return true;\n  }\n\n  /**\n   * CSI Ps SP q  Set cursor style (DECSCUSR, VT520).\n   *   Ps = 0  -> blinking block.\n   *   Ps = 1  -> blinking block (default).\n   *   Ps = 2  -> steady block.\n   *   Ps = 3  -> blinking underline.\n   *   Ps = 4  -> steady underline.\n   *   Ps = 5  -> blinking bar (xterm).\n   *   Ps = 6  -> steady bar (xterm).\n   *\n   * @vt: #Y CSI DECSCUSR  \"Set Cursor Style\"  \"CSI Ps SP q\"   \"Set cursor style.\"\n   * Supported cursor styles:\n   *  - empty, 0 or 1: steady block\n   *  - 2: blink block\n   *  - 3: steady underline\n   *  - 4: blink underline\n   *  - 5: steady bar\n   *  - 6: blink bar\n   */\n  public setCursorStyle(params: IParams): boolean {\n    const param = params.params[0] || 1;\n    switch (param) {\n      case 1:\n      case 2:\n        this._optionsService.options.cursorStyle = 'block';\n        break;\n      case 3:\n      case 4:\n        this._optionsService.options.cursorStyle = 'underline';\n        break;\n      case 5:\n      case 6:\n        this._optionsService.options.cursorStyle = 'bar';\n        break;\n    }\n    const isBlinking = param % 2 === 1;\n    this._optionsService.options.cursorBlink = isBlinking;\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps r\n   *   Set Scrolling Region [top;bottom] (default = full size of win-\n   *   dow) (DECSTBM).\n   *\n   * @vt: #Y CSI DECSTBM \"Set Top and Bottom Margin\" \"CSI Ps ; Ps r\" \"Set top and bottom margins of the viewport [top;bottom] (default = viewport size).\"\n   */\n  public setScrollRegion(params: IParams): boolean {\n    const top = params.params[0] || 1;\n    let bottom: number;\n\n    if (params.length < 2 || (bottom = params.params[1]) > this._bufferService.rows || bottom === 0) {\n      bottom = this._bufferService.rows;\n    }\n\n    if (bottom > top) {\n      this._activeBuffer.scrollTop = top - 1;\n      this._activeBuffer.scrollBottom = bottom - 1;\n      this._setCursor(0, 0);\n    }\n    return true;\n  }\n\n  /**\n   * CSI Ps ; Ps ; Ps t - Various window manipulations and reports (xterm)\n   *\n   * Note: Only those listed below are supported. All others are left to integrators and\n   * need special treatment based on the embedding environment.\n   *\n   *    Ps = 1 4                                                          supported\n   *      Report xterm text area size in pixels.\n   *      Result is CSI 4 ; height ; width t\n   *    Ps = 14 ; 2                                                       not implemented\n   *    Ps = 16                                                           supported\n   *      Report xterm character cell size in pixels.\n   *      Result is CSI 6 ; height ; width t\n   *    Ps = 18                                                           supported\n   *      Report the size of the text area in characters.\n   *      Result is CSI 8 ; height ; width t\n   *    Ps = 20                                                           supported\n   *      Report xterm window's icon label.\n   *      Result is OSC L label ST\n   *    Ps = 21                                                           supported\n   *      Report xterm window's title.\n   *      Result is OSC l label ST\n   *    Ps = 22 ; 0  -> Save xterm icon and window title on stack.        supported\n   *    Ps = 22 ; 1  -> Save xterm icon title on stack.                   supported\n   *    Ps = 22 ; 2  -> Save xterm window title on stack.                 supported\n   *    Ps = 23 ; 0  -> Restore xterm icon and window title from stack.   supported\n   *    Ps = 23 ; 1  -> Restore xterm icon title from stack.              supported\n   *    Ps = 23 ; 2  -> Restore xterm window title from stack.            supported\n   *    Ps >= 24                                                          not implemented\n   */\n  public windowOptions(params: IParams): boolean {\n    if (!paramToWindowOption(params.params[0], this._optionsService.options.windowOptions)) {\n      return true;\n    }\n    const second = (params.length > 1) ? params.params[1] : 0;\n    switch (params.params[0]) {\n      case 14:  // GetWinSizePixels, returns CSI 4 ; height ; width t\n        if (second !== 2) {\n          this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_WIN_SIZE_PIXELS);\n        }\n        break;\n      case 16:  // GetCellSizePixels, returns CSI 6 ; height ; width t\n        this._onRequestWindowsOptionsReport.fire(WindowsOptionsReportType.GET_CELL_SIZE_PIXELS);\n        break;\n      case 18:  // GetWinSizeChars, returns CSI 8 ; height ; width t\n        if (this._bufferService) {\n          this._coreService.triggerDataEvent(`${C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);\n        }\n        break;\n      case 22:  // PushTitle\n        if (second === 0 || second === 2) {\n          this._windowTitleStack.push(this._windowTitle);\n          if (this._windowTitleStack.length > STACK_LIMIT) {\n            this._windowTitleStack.shift();\n          }\n        }\n        if (second === 0 || second === 1) {\n          this._iconNameStack.push(this._iconName);\n          if (this._iconNameStack.length > STACK_LIMIT) {\n            this._iconNameStack.shift();\n          }\n        }\n        break;\n      case 23:  // PopTitle\n        if (second === 0 || second === 2) {\n          if (this._windowTitleStack.length) {\n            this.setTitle(this._windowTitleStack.pop()!);\n          }\n        }\n        if (second === 0 || second === 1) {\n          if (this._iconNameStack.length) {\n            this.setIconName(this._iconNameStack.pop()!);\n          }\n        }\n        break;\n    }\n    return true;\n  }\n\n\n  /**\n   * CSI s\n   * ESC 7\n   *   Save cursor (ANSI.SYS).\n   *\n   * @vt: #P[TODO...]  CSI SCOSC   \"Save Cursor\"   \"CSI s\"   \"Save cursor position, charmap and text attributes.\"\n   * @vt: #Y ESC  SC   \"Save Cursor\"   \"ESC 7\"   \"Save cursor position, charmap and text attributes.\"\n   */\n  public saveCursor(params?: IParams): boolean {\n    this._activeBuffer.savedX = this._activeBuffer.x;\n    this._activeBuffer.savedY = this._activeBuffer.ybase + this._activeBuffer.y;\n    this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg;\n    this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg;\n    this._activeBuffer.savedCharset = this._charsetService.charset;\n    return true;\n  }\n\n\n  /**\n   * CSI u\n   * ESC 8\n   *   Restore cursor (ANSI.SYS).\n   *\n   * @vt: #P[TODO...]  CSI SCORC \"Restore Cursor\"  \"CSI u\"   \"Restore cursor position, charmap and text attributes.\"\n   * @vt: #Y ESC  RC \"Restore Cursor\"  \"ESC 8\"   \"Restore cursor position, charmap and text attributes.\"\n   */\n  public restoreCursor(params?: IParams): boolean {\n    this._activeBuffer.x = this._activeBuffer.savedX || 0;\n    this._activeBuffer.y = Math.max(this._activeBuffer.savedY - this._activeBuffer.ybase, 0);\n    this._curAttrData.fg = this._activeBuffer.savedCurAttrData.fg;\n    this._curAttrData.bg = this._activeBuffer.savedCurAttrData.bg;\n    this._charsetService.charset = (this as any)._savedCharset;\n    if (this._activeBuffer.savedCharset) {\n      this._charsetService.charset = this._activeBuffer.savedCharset;\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n\n  /**\n   * OSC 2; <data> ST (set window title)\n   *   Proxy to set window title.\n   *\n   * @vt: #P[Icon name is not exposed.]   OSC    0   \"Set Windows Title and Icon Name\"  \"OSC 0 ; Pt BEL\"  \"Set window title and icon name.\"\n   * Icon name is not supported. For Window Title see below.\n   *\n   * @vt: #Y     OSC    2   \"Set Windows Title\"  \"OSC 2 ; Pt BEL\"  \"Set window title.\"\n   * xterm.js does not manipulate the title directly, instead exposes changes via the event `Terminal.onTitleChange`.\n   */\n  public setTitle(data: string): boolean {\n    this._windowTitle = data;\n    this._onTitleChange.fire(data);\n    return true;\n  }\n\n  /**\n   * OSC 1; <data> ST\n   * Note: Icon name is not exposed.\n   */\n  public setIconName(data: string): boolean {\n    this._iconName = data;\n    return true;\n  }\n\n  /**\n   * OSC 4; <num> ; <text> ST (set ANSI color <num> to <text>)\n   *\n   * @vt: #Y    OSC    4    \"Set ANSI color\"   \"OSC 4 ; c ; spec BEL\" \"Change color number `c` to the color specified by `spec`.\"\n   * `c` is the color index between 0 and 255. The color format of `spec` is derived from `XParseColor` (see OSC 10 for supported formats).\n   * There may be multipe `c ; spec` pairs present in the same instruction.\n   * If `spec` contains `?` the terminal returns a sequence with the currently set color.\n   */\n  public setOrReportIndexedColor(data: string): boolean {\n    const event: IColorEvent = [];\n    const slots = data.split(';');\n    while (slots.length > 1) {\n      const idx = slots.shift() as string;\n      const spec = slots.shift() as string;\n      if (/^\\d+$/.exec(idx)) {\n        const index = parseInt(idx);\n        if (0 <= index && index < 256) {\n          if (spec === '?') {\n            event.push({ type: ColorRequestType.REPORT, index });\n          } else {\n            const color = parseColor(spec);\n            if (color) {\n              event.push({ type: ColorRequestType.SET, index, color });\n            }\n          }\n        }\n      }\n    }\n    if (event.length) {\n      this._onColor.fire(event);\n    }\n    return true;\n  }\n\n  // special colors - OSC 10 | 11 | 12\n  private _specialColors = [ColorIndex.FOREGROUND, ColorIndex.BACKGROUND, ColorIndex.CURSOR];\n\n  /**\n   * Apply colors requests for special colors in OSC 10 | 11 | 12.\n   * Since these commands are stacking from multiple parameters,\n   * we handle them in a loop with an entry offset to `_specialColors`.\n   */\n  private _setOrReportSpecialColor(data: string, offset: number): boolean {\n    const slots = data.split(';');\n    for (let i = 0; i < slots.length; ++i, ++offset) {\n      if (offset >= this._specialColors.length) break;\n      if (slots[i] === '?') {\n        this._onColor.fire([{ type: ColorRequestType.REPORT, index: this._specialColors[offset] }]);\n      } else {\n        const color = parseColor(slots[i]);\n        if (color) {\n          this._onColor.fire([{ type: ColorRequestType.SET, index: this._specialColors[offset], color }]);\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * OSC 10 ; <xcolor name>|<?> ST - set or query default foreground color\n   *\n   * @vt: #Y  OSC   10    \"Set or query default foreground color\"   \"OSC 10 ; Pt BEL\"  \"Set or query default foreground color.\"\n   * To set the color, the following color specification formats are supported:\n   * - `rgb:<red>/<green>/<blue>` for  `<red>, <green>, <blue>` in `h | hh | hhh | hhhh`, where\n   *   `h` is a single hexadecimal digit (case insignificant). The different widths scale\n   *   from 4 bit (`h`) to 16 bit (`hhhh`) and get converted to 8 bit (`hh`).\n   * - `#RGB` - 4 bits per channel, expanded to `#R0G0B0`\n   * - `#RRGGBB` - 8 bits per channel\n   * - `#RRRGGGBBB` - 12 bits per channel, truncated to `#RRGGBB`\n   * - `#RRRRGGGGBBBB` - 16 bits per channel, truncated to `#RRGGBB`\n   *\n   * **Note:** X11 named colors are currently unsupported.\n   *\n   * If `Pt` contains `?` instead of a color specification, the terminal\n   * returns a sequence with the current default foreground color\n   * (use that sequence to restore the color after changes).\n   *\n   * **Note:** Other than xterm, xterm.js does not support OSC 12 - 19.\n   * Therefore stacking multiple `Pt` separated by `;` only works for the first two entries.\n   */\n  public setOrReportFgColor(data: string): boolean {\n    return this._setOrReportSpecialColor(data, 0);\n  }\n\n  /**\n   * OSC 11 ; <xcolor name>|<?> ST - set or query default background color\n   *\n   * @vt: #Y  OSC   11    \"Set or query default background color\"   \"OSC 11 ; Pt BEL\"  \"Same as OSC 10, but for default background.\"\n   */\n  public setOrReportBgColor(data: string): boolean {\n    return this._setOrReportSpecialColor(data, 1);\n  }\n\n  /**\n   * OSC 12 ; <xcolor name>|<?> ST - set or query default cursor color\n   *\n   * @vt: #Y  OSC   12    \"Set or query default cursor color\"   \"OSC 12 ; Pt BEL\"  \"Same as OSC 10, but for default cursor color.\"\n   */\n  public setOrReportCursorColor(data: string): boolean {\n    return this._setOrReportSpecialColor(data, 2);\n  }\n\n  /**\n   * OSC 104 ; <num> ST - restore ANSI color <num>\n   *\n   * @vt: #Y  OSC   104    \"Reset ANSI color\"   \"OSC 104 ; c BEL\" \"Reset color number `c` to themed color.\"\n   * `c` is the color index between 0 and 255. This function restores the default color for `c` as\n   * specified by the loaded theme. Any number of `c` parameters may be given.\n   * If no parameters are given, the entire indexed color table will be reset.\n   */\n  public restoreIndexedColor(data: string): boolean {\n    if (!data) {\n      this._onColor.fire([{ type: ColorRequestType.RESTORE }]);\n      return true;\n    }\n    const event: IColorEvent = [];\n    const slots = data.split(';');\n    for (let i = 0; i < slots.length; ++i) {\n      if (/^\\d+$/.exec(slots[i])) {\n        const index = parseInt(slots[i]);\n        if (0 <= index && index < 256) {\n          event.push({ type: ColorRequestType.RESTORE, index });\n        }\n      }\n    }\n    if (event.length) {\n      this._onColor.fire(event);\n    }\n    return true;\n  }\n\n  /**\n   * OSC 110 ST - restore default foreground color\n   *\n   * @vt: #Y  OSC   110    \"Restore default foreground color\"   \"OSC 110 BEL\"  \"Restore default foreground to themed color.\"\n   */\n  public restoreFgColor(data: string): boolean {\n    this._onColor.fire([{ type: ColorRequestType.RESTORE, index: ColorIndex.FOREGROUND }]);\n    return true;\n  }\n\n  /**\n   * OSC 111 ST - restore default background color\n   *\n   * @vt: #Y  OSC   111    \"Restore default background color\"   \"OSC 111 BEL\"  \"Restore default background to themed color.\"\n   */\n  public restoreBgColor(data: string): boolean {\n    this._onColor.fire([{ type: ColorRequestType.RESTORE, index: ColorIndex.BACKGROUND }]);\n    return true;\n  }\n\n  /**\n   * OSC 112 ST - restore default cursor color\n   *\n   * @vt: #Y  OSC   112    \"Restore default cursor color\"   \"OSC 112 BEL\"  \"Restore default cursor to themed color.\"\n   */\n  public restoreCursorColor(data: string): boolean {\n    this._onColor.fire([{ type: ColorRequestType.RESTORE, index: ColorIndex.CURSOR }]);\n    return true;\n  }\n\n  /**\n   * ESC E\n   * C1.NEL\n   *   DEC mnemonic: NEL (https://vt100.net/docs/vt510-rm/NEL)\n   *   Moves cursor to first position on next line.\n   *\n   * @vt: #Y   C1    NEL   \"Next Line\"   \"\\x85\"    \"Move the cursor to the beginning of the next row.\"\n   * @vt: #Y   ESC   NEL   \"Next Line\"   \"ESC E\"   \"Move the cursor to the beginning of the next row.\"\n   */\n  public nextLine(): boolean {\n    this._activeBuffer.x = 0;\n    this.index();\n    return true;\n  }\n\n  /**\n   * ESC =\n   *   DEC mnemonic: DECKPAM (https://vt100.net/docs/vt510-rm/DECKPAM.html)\n   *   Enables the numeric keypad to send application sequences to the host.\n   */\n  public keypadApplicationMode(): boolean {\n    this._logService.debug('Serial port requested application keypad.');\n    this._coreService.decPrivateModes.applicationKeypad = true;\n    this._onRequestSyncScrollBar.fire();\n    return true;\n  }\n\n  /**\n   * ESC >\n   *   DEC mnemonic: DECKPNM (https://vt100.net/docs/vt510-rm/DECKPNM.html)\n   *   Enables the keypad to send numeric characters to the host.\n   */\n  public keypadNumericMode(): boolean {\n    this._logService.debug('Switching back to normal keypad.');\n    this._coreService.decPrivateModes.applicationKeypad = false;\n    this._onRequestSyncScrollBar.fire();\n    return true;\n  }\n\n  /**\n   * ESC % @\n   * ESC % G\n   *   Select default character set. UTF-8 is not supported (string are unicode anyways)\n   *   therefore ESC % G does the same.\n   */\n  public selectDefaultCharset(): boolean {\n    this._charsetService.setgLevel(0);\n    this._charsetService.setgCharset(0, DEFAULT_CHARSET); // US (default)\n    return true;\n  }\n\n  /**\n   * ESC ( C\n   *   Designate G0 Character Set, VT100, ISO 2022.\n   * ESC ) C\n   *   Designate G1 Character Set (ISO 2022, VT100).\n   * ESC * C\n   *   Designate G2 Character Set (ISO 2022, VT220).\n   * ESC + C\n   *   Designate G3 Character Set (ISO 2022, VT220).\n   * ESC - C\n   *   Designate G1 Character Set (VT300).\n   * ESC . C\n   *   Designate G2 Character Set (VT300).\n   * ESC / C\n   *   Designate G3 Character Set (VT300). C = A  -> ISO Latin-1 Supplemental. - Supported?\n   */\n  public selectCharset(collectAndFlag: string): boolean {\n    if (collectAndFlag.length !== 2) {\n      this.selectDefaultCharset();\n      return true;\n    }\n    if (collectAndFlag[0] === '/') {\n      return true;  // TODO: Is this supported?\n    }\n    this._charsetService.setgCharset(GLEVEL[collectAndFlag[0]], CHARSETS[collectAndFlag[1]] || DEFAULT_CHARSET);\n    return true;\n  }\n\n  /**\n   * ESC D\n   * C1.IND\n   *   DEC mnemonic: IND (https://vt100.net/docs/vt510-rm/IND.html)\n   *   Moves the cursor down one line in the same column.\n   *\n   * @vt: #Y   C1    IND   \"Index\"   \"\\x84\"    \"Move the cursor one line down scrolling if needed.\"\n   * @vt: #Y   ESC   IND   \"Index\"   \"ESC D\"   \"Move the cursor one line down scrolling if needed.\"\n   */\n  public index(): boolean {\n    this._restrictCursor();\n    this._activeBuffer.y++;\n    if (this._activeBuffer.y === this._activeBuffer.scrollBottom + 1) {\n      this._activeBuffer.y--;\n      this._bufferService.scroll(this._eraseAttrData());\n    } else if (this._activeBuffer.y >= this._bufferService.rows) {\n      this._activeBuffer.y = this._bufferService.rows - 1;\n    }\n    this._restrictCursor();\n    return true;\n  }\n\n  /**\n   * ESC H\n   * C1.HTS\n   *   DEC mnemonic: HTS (https://vt100.net/docs/vt510-rm/HTS.html)\n   *   Sets a horizontal tab stop at the column position indicated by\n   *   the value of the active column when the terminal receives an HTS.\n   *\n   * @vt: #Y   C1    HTS   \"Horizontal Tabulation Set\" \"\\x88\"    \"Places a tab stop at the current cursor position.\"\n   * @vt: #Y   ESC   HTS   \"Horizontal Tabulation Set\" \"ESC H\"   \"Places a tab stop at the current cursor position.\"\n   */\n  public tabSet(): boolean {\n    this._activeBuffer.tabs[this._activeBuffer.x] = true;\n    return true;\n  }\n\n  /**\n   * ESC M\n   * C1.RI\n   *   DEC mnemonic: HTS\n   *   Moves the cursor up one line in the same column. If the cursor is at the top margin,\n   *   the page scrolls down.\n   *\n   * @vt: #Y ESC  IR \"Reverse Index\" \"ESC M\"  \"Move the cursor one line up scrolling if needed.\"\n   */\n  public reverseIndex(): boolean {\n    this._restrictCursor();\n    if (this._activeBuffer.y === this._activeBuffer.scrollTop) {\n      // possibly move the code below to term.reverseScroll();\n      // test: echo -ne '\\e[1;1H\\e[44m\\eM\\e[0m'\n      // blankLine(true) is xterm/linux behavior\n      const scrollRegionHeight = this._activeBuffer.scrollBottom - this._activeBuffer.scrollTop;\n      this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase + this._activeBuffer.y, scrollRegionHeight, 1);\n      this._activeBuffer.lines.set(this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.getBlankLine(this._eraseAttrData()));\n      this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);\n    } else {\n      this._activeBuffer.y--;\n      this._restrictCursor(); // quickfix to not run out of bounds\n    }\n    return true;\n  }\n\n  /**\n   * ESC c\n   *   DEC mnemonic: RIS (https://vt100.net/docs/vt510-rm/RIS.html)\n   *   Reset to initial state.\n   */\n  public fullReset(): boolean {\n    this._parser.reset();\n    this._onRequestReset.fire();\n    return true;\n  }\n\n  public reset(): void {\n    this._curAttrData = DEFAULT_ATTR_DATA.clone();\n    this._eraseAttrDataInternal = DEFAULT_ATTR_DATA.clone();\n  }\n\n  /**\n   * back_color_erase feature for xterm.\n   */\n  private _eraseAttrData(): IAttributeData {\n    this._eraseAttrDataInternal.bg &= ~(Attributes.CM_MASK | 0xFFFFFF);\n    this._eraseAttrDataInternal.bg |= this._curAttrData.bg & ~0xFC000000;\n    return this._eraseAttrDataInternal;\n  }\n\n  /**\n   * ESC n\n   * ESC o\n   * ESC |\n   * ESC }\n   * ESC ~\n   *   DEC mnemonic: LS (https://vt100.net/docs/vt510-rm/LS.html)\n   *   When you use a locking shift, the character set remains in GL or GR until\n   *   you use another locking shift. (partly supported)\n   */\n  public setgLevel(level: number): boolean {\n    this._charsetService.setgLevel(level);\n    return true;\n  }\n\n  /**\n   * ESC # 8\n   *   DEC mnemonic: DECALN (https://vt100.net/docs/vt510-rm/DECALN.html)\n   *   This control function fills the complete screen area with\n   *   a test pattern (E) used for adjusting screen alignment.\n   *\n   * @vt: #Y   ESC   DECALN   \"Screen Alignment Pattern\"  \"ESC # 8\"  \"Fill viewport with a test pattern (E).\"\n   */\n  public screenAlignmentPattern(): boolean {\n    // prepare cell data\n    const cell = new CellData();\n    cell.content = 1 << Content.WIDTH_SHIFT | 'E'.charCodeAt(0);\n    cell.fg = this._curAttrData.fg;\n    cell.bg = this._curAttrData.bg;\n\n\n    this._setCursor(0, 0);\n    for (let yOffset = 0; yOffset < this._bufferService.rows; ++yOffset) {\n      const row = this._activeBuffer.ybase + this._activeBuffer.y + yOffset;\n      const line = this._activeBuffer.lines.get(row);\n      if (line) {\n        line.fill(cell);\n        line.isWrapped = false;\n      }\n    }\n    this._dirtyRowService.markAllDirty();\n    this._setCursor(0, 0);\n    return true;\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\n\n/**\n * A base class that can be extended to provide convenience methods for managing the lifecycle of an\n * object and its components.\n */\nexport abstract class Disposable implements IDisposable {\n  protected _disposables: IDisposable[] = [];\n  protected _isDisposed: boolean = false;\n\n  constructor() {\n  }\n\n  /**\n   * Disposes the object, triggering the `dispose` method on all registered IDisposables.\n   */\n  public dispose(): void {\n    this._isDisposed = true;\n    for (const d of this._disposables) {\n      d.dispose();\n    }\n    this._disposables.length = 0;\n  }\n\n  /**\n   * Registers a disposable object.\n   * @param d The disposable to register.\n   * @returns The disposable.\n   */\n  public register<T extends IDisposable>(d: T): T {\n    this._disposables.push(d);\n    return d;\n  }\n\n  /**\n   * Unregisters a disposable object if it has been registered, if not do\n   * nothing.\n   * @param d The disposable to unregister.\n   */\n  public unregister<T extends IDisposable>(d: T): void {\n    const index = this._disposables.indexOf(d);\n    if (index !== -1) {\n      this._disposables.splice(index, 1);\n    }\n  }\n}\n\n/**\n * Dispose of all disposables in an array and set its length to 0.\n */\nexport function disposeArray(disposables: IDisposable[]): void {\n  for (const d of disposables) {\n    d.dispose();\n  }\n  disposables.length = 0;\n}\n\n/**\n * Creates a disposable that will dispose of an array of disposables when disposed.\n */\nexport function getDisposeArrayDisposable(array: IDisposable[]): IDisposable {\n  return { dispose: () => disposeArray(array) };\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ninterface INavigator {\n  userAgent: string;\n  language: string;\n  platform: string;\n}\n\n// We're declaring a navigator global here as we expect it in all runtimes (node and browser), but\n// we want this module to live in common.\ndeclare const navigator: INavigator;\n\nconst isNode = (typeof navigator === 'undefined') ? true : false;\nconst userAgent = (isNode) ? 'node' : navigator.userAgent;\nconst platform = (isNode) ? 'node' : navigator.platform;\n\nexport const isFirefox = userAgent.includes('Firefox');\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\n\n// Find the users platform. We use this to interpret the meta key\n// and ISO third level shifts.\n// http://stackoverflow.com/q/19877924/577598\nexport const isMac = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(platform);\nexport const isIpad = platform === 'iPad';\nexport const isIphone = platform === 'iPhone';\nexport const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].includes(platform);\nexport const isLinux = platform.indexOf('Linux') >= 0;\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport type TypedArray = Uint8Array | Uint16Array | Uint32Array | Uint8ClampedArray | Int8Array | Int16Array | Int32Array | Float32Array | Float64Array;\n\n\n/**\n * polyfill for TypedArray.fill\n * This is needed to support .fill in all safari versions and IE 11.\n */\nexport function fill<T extends TypedArray>(array: T, value: number, start?: number, end?: number): T {\n  // all modern engines that support .fill\n  if (array.fill) {\n    return array.fill(value, start, end) as T;\n  }\n  return fillFallback(array, value, start, end);\n}\n\nexport function fillFallback<T extends TypedArray>(array: T, value: number, start: number = 0, end: number = array.length): T {\n  // safari and IE 11\n  // since IE 11 does not support Array.prototype.fill either\n  // we cannot use the suggested polyfill from MDN\n  // instead we simply fall back to looping\n  if (start >= array.length) {\n    return array;\n  }\n  start = (array.length + start) % array.length;\n  if (end >= array.length) {\n    end = array.length;\n  } else {\n    end = (array.length + end) % array.length;\n  }\n  for (let i = start; i < end; ++i) {\n    array[i] = value;\n  }\n  return array;\n}\n\n/**\n * Concat two typed arrays `a` and `b`.\n * Returns a new typed array.\n */\nexport function concat<T extends TypedArray>(a: T, b: T): T {\n  const result = new (a.constructor as any)(a.length + b.length);\n  result.set(a);\n  result.set(b, a.length);\n  return result;\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CHAR_DATA_CODE_INDEX, NULL_CELL_CODE, WHITESPACE_CELL_CODE } from 'common/buffer/Constants';\nimport { IBufferService } from 'common/services/Services';\n\nexport function updateWindowsModeWrappedState(bufferService: IBufferService): void {\n  // Winpty does not support wraparound mode which means that lines will never\n  // be marked as wrapped. This causes issues for things like copying a line\n  // retaining the wrapped new line characters or if consumers are listening\n  // in on the data stream.\n  //\n  // The workaround for this is to listen to every incoming line feed and mark\n  // the line as wrapped if the last character in the previous line is not a\n  // space. This is certainly not without its problems, but generally on\n  // Windows when text reaches the end of the terminal it's likely going to be\n  // wrapped.\n  const line = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y - 1);\n  const lastChar = line?.get(bufferService.cols - 1);\n\n  const nextLine = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y);\n  if (nextLine && lastChar) {\n    nextLine.isWrapped = (lastChar[CHAR_DATA_CODE_INDEX] !== NULL_CELL_CODE && lastChar[CHAR_DATA_CODE_INDEX] !== WHITESPACE_CELL_CODE);\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IAttributeData, IColorRGB, IExtendedAttrs } from 'common/Types';\nimport { Attributes, FgFlags, BgFlags, UnderlineStyle } from 'common/buffer/Constants';\n\nexport class AttributeData implements IAttributeData {\n  public static toColorRGB(value: number): IColorRGB {\n    return [\n      value >>> Attributes.RED_SHIFT & 255,\n      value >>> Attributes.GREEN_SHIFT & 255,\n      value & 255\n    ];\n  }\n\n  public static fromColorRGB(value: IColorRGB): number {\n    return (value[0] & 255) << Attributes.RED_SHIFT | (value[1] & 255) << Attributes.GREEN_SHIFT | value[2] & 255;\n  }\n\n  public clone(): IAttributeData {\n    const newObj = new AttributeData();\n    newObj.fg = this.fg;\n    newObj.bg = this.bg;\n    newObj.extended = this.extended.clone();\n    return newObj;\n  }\n\n  // data\n  public fg = 0;\n  public bg = 0;\n  public extended = new ExtendedAttrs();\n\n  // flags\n  public isInverse(): number       { return this.fg & FgFlags.INVERSE; }\n  public isBold(): number          { return this.fg & FgFlags.BOLD; }\n  public isUnderline(): number     { return this.fg & FgFlags.UNDERLINE; }\n  public isBlink(): number         { return this.fg & FgFlags.BLINK; }\n  public isInvisible(): number     { return this.fg & FgFlags.INVISIBLE; }\n  public isItalic(): number        { return this.bg & BgFlags.ITALIC; }\n  public isDim(): number           { return this.bg & BgFlags.DIM; }\n  public isStrikethrough(): number { return this.fg & FgFlags.STRIKETHROUGH; }\n\n  // color modes\n  public getFgColorMode(): number { return this.fg & Attributes.CM_MASK; }\n  public getBgColorMode(): number { return this.bg & Attributes.CM_MASK; }\n  public isFgRGB(): boolean       { return (this.fg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isBgRGB(): boolean       { return (this.bg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isFgPalette(): boolean   { return (this.fg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.fg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isBgPalette(): boolean   { return (this.bg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.bg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isFgDefault(): boolean   { return (this.fg & Attributes.CM_MASK) === 0; }\n  public isBgDefault(): boolean   { return (this.bg & Attributes.CM_MASK) === 0; }\n  public isAttributeDefault(): boolean { return this.fg === 0 && this.bg === 0; }\n\n  // colors\n  public getFgColor(): number {\n    switch (this.fg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.fg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.fg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n  public getBgColor(): number {\n    switch (this.bg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.bg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.bg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n\n  // extended attrs\n  public hasExtendedAttrs(): number {\n    return this.bg & BgFlags.HAS_EXTENDED;\n  }\n  public updateExtended(): void {\n    if (this.extended.isEmpty()) {\n      this.bg &= ~BgFlags.HAS_EXTENDED;\n    } else {\n      this.bg |= BgFlags.HAS_EXTENDED;\n    }\n  }\n  public getUnderlineColor(): number {\n    if ((this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor) {\n      switch (this.extended.underlineColor & Attributes.CM_MASK) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:  return this.extended.underlineColor & Attributes.PCOLOR_MASK;\n        case Attributes.CM_RGB:   return this.extended.underlineColor & Attributes.RGB_MASK;\n        default:                  return this.getFgColor();\n      }\n    }\n    return this.getFgColor();\n  }\n  public getUnderlineColorMode(): number {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? this.extended.underlineColor & Attributes.CM_MASK\n      : this.getFgColorMode();\n  }\n  public isUnderlineColorRGB(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_RGB\n      : this.isFgRGB();\n  }\n  public isUnderlineColorPalette(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P16\n          || (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P256\n      : this.isFgPalette();\n  }\n  public isUnderlineColorDefault(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === 0\n      : this.isFgDefault();\n  }\n  public getUnderlineStyle(): UnderlineStyle {\n    return this.fg & FgFlags.UNDERLINE\n      ? (this.bg & BgFlags.HAS_EXTENDED ? this.extended.underlineStyle : UnderlineStyle.SINGLE)\n      : UnderlineStyle.NONE;\n  }\n}\n\n\n/**\n * Extended attributes for a cell.\n * Holds information about different underline styles and color.\n */\nexport class ExtendedAttrs implements IExtendedAttrs {\n  constructor(\n    // underline style, NONE is empty\n    public underlineStyle: UnderlineStyle = UnderlineStyle.NONE,\n    // underline color, -1 is empty (same as FG)\n    public underlineColor: number = -1\n  ) {}\n\n  public clone(): IExtendedAttrs {\n    return new ExtendedAttrs(this.underlineStyle, this.underlineColor);\n  }\n\n  /**\n   * Convenient method to indicate whether the object holds no additional information,\n   * that needs to be persistant in the buffer.\n   */\n  public isEmpty(): boolean {\n    return this.underlineStyle === UnderlineStyle.NONE;\n  }\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CircularList, IInsertEvent } from 'common/CircularList';\nimport { IBuffer, BufferIndex, IBufferStringIterator, IBufferStringIteratorResult } from 'common/buffer/Types';\nimport { IBufferLine, ICellData, IAttributeData, ICharset } from 'common/Types';\nimport { BufferLine, DEFAULT_ATTR_DATA } from 'common/buffer/BufferLine';\nimport { CellData } from 'common/buffer/CellData';\nimport { NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_WIDTH, WHITESPACE_CELL_CODE, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_CHAR_INDEX } from 'common/buffer/Constants';\nimport { reflowLargerApplyNewLayout, reflowLargerCreateNewLayout, reflowLargerGetLinesToRemove, reflowSmallerGetNewLineLengths, getWrappedLineTrimmedLength } from 'common/buffer/BufferReflow';\nimport { Marker } from 'common/buffer/Marker';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { DEFAULT_CHARSET } from 'common/data/Charsets';\nimport { ExtendedAttrs } from 'common/buffer/AttributeData';\n\nexport const MAX_BUFFER_SIZE = 4294967295; // 2^32 - 1\n\n/**\n * This class represents a terminal buffer (an internal state of the terminal), where the\n * following information is stored (in high-level):\n *   - text content of this particular buffer\n *   - cursor position\n *   - scroll position\n */\nexport class Buffer implements IBuffer {\n  public lines: CircularList<IBufferLine>;\n  public ydisp: number = 0;\n  public ybase: number = 0;\n  public y: number = 0;\n  public x: number = 0;\n  public scrollBottom: number;\n  public scrollTop: number;\n  // TODO: Type me\n  public tabs: any;\n  public savedY: number = 0;\n  public savedX: number = 0;\n  public savedCurAttrData = DEFAULT_ATTR_DATA.clone();\n  public savedCharset: ICharset | undefined = DEFAULT_CHARSET;\n  public markers: Marker[] = [];\n  private _nullCell: ICellData = CellData.fromCharData([0, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE]);\n  private _whitespaceCell: ICellData = CellData.fromCharData([0, WHITESPACE_CELL_CHAR, WHITESPACE_CELL_WIDTH, WHITESPACE_CELL_CODE]);\n  private _cols: number;\n  private _rows: number;\n\n  constructor(\n    private _hasScrollback: boolean,\n    private _optionsService: IOptionsService,\n    private _bufferService: IBufferService\n  ) {\n    this._cols = this._bufferService.cols;\n    this._rows = this._bufferService.rows;\n    this.lines = new CircularList<IBufferLine>(this._getCorrectBufferLength(this._rows));\n    this.scrollTop = 0;\n    this.scrollBottom = this._rows - 1;\n    this.setupTabStops();\n  }\n\n  public getNullCell(attr?: IAttributeData): ICellData {\n    if (attr) {\n      this._nullCell.fg = attr.fg;\n      this._nullCell.bg = attr.bg;\n      this._nullCell.extended = attr.extended;\n    } else {\n      this._nullCell.fg = 0;\n      this._nullCell.bg = 0;\n      this._nullCell.extended = new ExtendedAttrs();\n    }\n    return this._nullCell;\n  }\n\n  public getWhitespaceCell(attr?: IAttributeData): ICellData {\n    if (attr) {\n      this._whitespaceCell.fg = attr.fg;\n      this._whitespaceCell.bg = attr.bg;\n      this._whitespaceCell.extended = attr.extended;\n    } else {\n      this._whitespaceCell.fg = 0;\n      this._whitespaceCell.bg = 0;\n      this._whitespaceCell.extended = new ExtendedAttrs();\n    }\n    return this._whitespaceCell;\n  }\n\n  public getBlankLine(attr: IAttributeData, isWrapped?: boolean): IBufferLine {\n    return new BufferLine(this._bufferService.cols, this.getNullCell(attr), isWrapped);\n  }\n\n  public get hasScrollback(): boolean {\n    return this._hasScrollback && this.lines.maxLength > this._rows;\n  }\n\n  public get isCursorInViewport(): boolean {\n    const absoluteY = this.ybase + this.y;\n    const relativeY = absoluteY - this.ydisp;\n    return (relativeY >= 0 && relativeY < this._rows);\n  }\n\n  /**\n   * Gets the correct buffer length based on the rows provided, the terminal's\n   * scrollback and whether this buffer is flagged to have scrollback or not.\n   * @param rows The terminal rows to use in the calculation.\n   */\n  private _getCorrectBufferLength(rows: number): number {\n    if (!this._hasScrollback) {\n      return rows;\n    }\n\n    const correctBufferLength = rows + this._optionsService.options.scrollback;\n\n    return correctBufferLength > MAX_BUFFER_SIZE ? MAX_BUFFER_SIZE : correctBufferLength;\n  }\n\n  /**\n   * Fills the buffer's viewport with blank lines.\n   */\n  public fillViewportRows(fillAttr?: IAttributeData): void {\n    if (this.lines.length === 0) {\n      if (fillAttr === undefined) {\n        fillAttr = DEFAULT_ATTR_DATA;\n      }\n      let i = this._rows;\n      while (i--) {\n        this.lines.push(this.getBlankLine(fillAttr));\n      }\n    }\n  }\n\n  /**\n   * Clears the buffer to it's initial state, discarding all previous data.\n   */\n  public clear(): void {\n    this.ydisp = 0;\n    this.ybase = 0;\n    this.y = 0;\n    this.x = 0;\n    this.lines = new CircularList<IBufferLine>(this._getCorrectBufferLength(this._rows));\n    this.scrollTop = 0;\n    this.scrollBottom = this._rows - 1;\n    this.setupTabStops();\n  }\n\n  /**\n   * Resizes the buffer, adjusting its data accordingly.\n   * @param newCols The new number of columns.\n   * @param newRows The new number of rows.\n   */\n  public resize(newCols: number, newRows: number): void {\n    // store reference to null cell with default attrs\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n\n    // Increase max length if needed before adjustments to allow space to fill\n    // as required.\n    const newMaxLength = this._getCorrectBufferLength(newRows);\n    if (newMaxLength > this.lines.maxLength) {\n      this.lines.maxLength = newMaxLength;\n    }\n\n    // The following adjustments should only happen if the buffer has been\n    // initialized/filled.\n    if (this.lines.length > 0) {\n      // Deal with columns increasing (reducing needs to happen after reflow)\n      if (this._cols < newCols) {\n        for (let i = 0; i < this.lines.length; i++) {\n          this.lines.get(i)!.resize(newCols, nullCell);\n        }\n      }\n\n      // Resize rows in both directions as needed\n      let addToY = 0;\n      if (this._rows < newRows) {\n        for (let y = this._rows; y < newRows; y++) {\n          if (this.lines.length < newRows + this.ybase) {\n            if (this._optionsService.options.windowsMode) {\n              // Just add the new missing rows on Windows as conpty reprints the screen with it's\n              // view of the world. Once a line enters scrollback for conpty it remains there\n              this.lines.push(new BufferLine(newCols, nullCell));\n            } else {\n              if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                // There is room above the buffer and there are no empty elements below the line,\n                // scroll up\n                this.ybase--;\n                addToY++;\n                if (this.ydisp > 0) {\n                  // Viewport is at the top of the buffer, must increase downwards\n                  this.ydisp--;\n                }\n              } else {\n                // Add a blank line if there is no buffer left at the top to scroll to, or if there\n                // are blank lines after the cursor\n                this.lines.push(new BufferLine(newCols, nullCell));\n              }\n            }\n          }\n        }\n      } else { // (this._rows >= newRows)\n        for (let y = this._rows; y > newRows; y--) {\n          if (this.lines.length > newRows + this.ybase) {\n            if (this.lines.length > this.ybase + this.y + 1) {\n              // The line is a blank line below the cursor, remove it\n              this.lines.pop();\n            } else {\n              // The line is the cursor, scroll down\n              this.ybase++;\n              this.ydisp++;\n            }\n          }\n        }\n      }\n\n      // Reduce max length if needed after adjustments, this is done after as it\n      // would otherwise cut data from the bottom of the buffer.\n      if (newMaxLength < this.lines.maxLength) {\n        // Trim from the top of the buffer and adjust ybase and ydisp.\n        const amountToTrim = this.lines.length - newMaxLength;\n        if (amountToTrim > 0) {\n          this.lines.trimStart(amountToTrim);\n          this.ybase = Math.max(this.ybase - amountToTrim, 0);\n          this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n          this.savedY = Math.max(this.savedY - amountToTrim, 0);\n        }\n        this.lines.maxLength = newMaxLength;\n      }\n\n      // Make sure that the cursor stays on screen\n      this.x = Math.min(this.x, newCols - 1);\n      this.y = Math.min(this.y, newRows - 1);\n      if (addToY) {\n        this.y += addToY;\n      }\n      this.savedX = Math.min(this.savedX, newCols - 1);\n\n      this.scrollTop = 0;\n    }\n\n    this.scrollBottom = newRows - 1;\n\n    if (this._isReflowEnabled) {\n      this._reflow(newCols, newRows);\n\n      // Trim the end of the line off if cols shrunk\n      if (this._cols > newCols) {\n        for (let i = 0; i < this.lines.length; i++) {\n          this.lines.get(i)!.resize(newCols, nullCell);\n        }\n      }\n    }\n\n    this._cols = newCols;\n    this._rows = newRows;\n  }\n\n  private get _isReflowEnabled(): boolean {\n    return this._hasScrollback && !this._optionsService.options.windowsMode;\n  }\n\n  private _reflow(newCols: number, newRows: number): void {\n    if (this._cols === newCols) {\n      return;\n    }\n\n    // Iterate through rows, ignore the last one as it cannot be wrapped\n    if (newCols > this._cols) {\n      this._reflowLarger(newCols, newRows);\n    } else {\n      this._reflowSmaller(newCols, newRows);\n    }\n  }\n\n  private _reflowLarger(newCols: number, newRows: number): void {\n    const toRemove: number[] = reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(DEFAULT_ATTR_DATA));\n    if (toRemove.length > 0) {\n      const newLayoutResult = reflowLargerCreateNewLayout(this.lines, toRemove);\n      reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n      this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n    }\n  }\n\n  private _reflowLargerAdjustViewport(newCols: number, newRows: number, countRemoved: number): void {\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n    // Adjust viewport based on number of items removed\n    let viewportAdjustments = countRemoved;\n    while (viewportAdjustments-- > 0) {\n      if (this.ybase === 0) {\n        if (this.y > 0) {\n          this.y--;\n        }\n        if (this.lines.length < newRows) {\n          // Add an extra row at the bottom of the viewport\n          this.lines.push(new BufferLine(newCols, nullCell));\n        }\n      } else {\n        if (this.ydisp === this.ybase) {\n          this.ydisp--;\n        }\n        this.ybase--;\n      }\n    }\n    this.savedY = Math.max(this.savedY - countRemoved, 0);\n  }\n\n  private _reflowSmaller(newCols: number, newRows: number): void {\n    const nullCell = this.getNullCell(DEFAULT_ATTR_DATA);\n    // Gather all BufferLines that need to be inserted into the Buffer here so that they can be\n    // batched up and only committed once\n    const toInsert = [];\n    let countToInsert = 0;\n    // Go backwards as many lines may be trimmed and this will avoid considering them\n    for (let y = this.lines.length - 1; y >= 0; y--) {\n      // Check whether this line is a problem\n      let nextLine = this.lines.get(y) as BufferLine;\n      if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n        continue;\n      }\n\n      // Gather wrapped lines and adjust y to be the starting line\n      const wrappedLines: BufferLine[] = [nextLine];\n      while (nextLine.isWrapped && y > 0) {\n        nextLine = this.lines.get(--y) as BufferLine;\n        wrappedLines.unshift(nextLine);\n      }\n\n      // If these lines contain the cursor don't touch them, the program will handle fixing up\n      // wrapped lines with the cursor\n      const absoluteY = this.ybase + this.y;\n      if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n        continue;\n      }\n\n      const lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n      const destLineLengths = reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n      const linesToAdd = destLineLengths.length - wrappedLines.length;\n      let trimmedLines: number;\n      if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n        // If the top section of the buffer is not yet filled\n        trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n      } else {\n        trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n      }\n\n      // Add the new lines\n      const newLines: BufferLine[] = [];\n      for (let i = 0; i < linesToAdd; i++) {\n        const newLine = this.getBlankLine(DEFAULT_ATTR_DATA, true) as BufferLine;\n        newLines.push(newLine);\n      }\n      if (newLines.length > 0) {\n        toInsert.push({\n          // countToInsert here gets the actual index, taking into account other inserted items.\n          // using this we can iterate through the list forwards\n          start: y + wrappedLines.length + countToInsert,\n          newLines\n        });\n        countToInsert += newLines.length;\n      }\n      wrappedLines.push(...newLines);\n\n      // Copy buffer data to new locations, this needs to happen backwards to do in-place\n      let destLineIndex = destLineLengths.length - 1; // Math.floor(cellsNeeded / newCols);\n      let destCol = destLineLengths[destLineIndex]; // cellsNeeded % newCols;\n      if (destCol === 0) {\n        destLineIndex--;\n        destCol = destLineLengths[destLineIndex];\n      }\n      let srcLineIndex = wrappedLines.length - linesToAdd - 1;\n      let srcCol = lastLineLength;\n      while (srcLineIndex >= 0) {\n        const cellsToCopy = Math.min(srcCol, destCol);\n        wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n        destCol -= cellsToCopy;\n        if (destCol === 0) {\n          destLineIndex--;\n          destCol = destLineLengths[destLineIndex];\n        }\n        srcCol -= cellsToCopy;\n        if (srcCol === 0) {\n          srcLineIndex--;\n          const wrappedLinesIndex = Math.max(srcLineIndex, 0);\n          srcCol = getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n        }\n      }\n\n      // Null out the end of the line ends if a wide character wrapped to the following line\n      for (let i = 0; i < wrappedLines.length; i++) {\n        if (destLineLengths[i] < newCols) {\n          wrappedLines[i].setCell(destLineLengths[i], nullCell);\n        }\n      }\n\n      // Adjust viewport as needed\n      let viewportAdjustments = linesToAdd - trimmedLines;\n      while (viewportAdjustments-- > 0) {\n        if (this.ybase === 0) {\n          if (this.y < newRows - 1) {\n            this.y++;\n            this.lines.pop();\n          } else {\n            this.ybase++;\n            this.ydisp++;\n          }\n        } else {\n          // Ensure ybase does not exceed its maximum value\n          if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n            if (this.ybase === this.ydisp) {\n              this.ydisp++;\n            }\n            this.ybase++;\n          }\n        }\n      }\n      this.savedY = Math.min(this.savedY + linesToAdd, this.ybase + newRows - 1);\n    }\n\n    // Rearrange lines in the buffer if there are any insertions, this is done at the end rather\n    // than earlier so that it's a single O(n) pass through the buffer, instead of O(n^2) from many\n    // costly calls to CircularList.splice.\n    if (toInsert.length > 0) {\n      // Record buffer insert events and then play them back backwards so that the indexes are\n      // correct\n      const insertEvents: IInsertEvent[] = [];\n\n      // Record original lines so they don't get overridden when we rearrange the list\n      const originalLines: BufferLine[] = [];\n      for (let i = 0; i < this.lines.length; i++) {\n        originalLines.push(this.lines.get(i) as BufferLine);\n      }\n      const originalLinesLength = this.lines.length;\n\n      let originalLineIndex = originalLinesLength - 1;\n      let nextToInsertIndex = 0;\n      let nextToInsert = toInsert[nextToInsertIndex];\n      this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n      let countInsertedSoFar = 0;\n      for (let i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n        if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n          // Insert extra lines here, adjusting i as needed\n          for (let nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n            this.lines.set(i--, nextToInsert.newLines[nextI]);\n          }\n          i++;\n\n          // Create insert events for later\n          insertEvents.push({\n            index: originalLineIndex + 1,\n            amount: nextToInsert.newLines.length\n          });\n\n          countInsertedSoFar += nextToInsert.newLines.length;\n          nextToInsert = toInsert[++nextToInsertIndex];\n        } else {\n          this.lines.set(i, originalLines[originalLineIndex--]);\n        }\n      }\n\n      // Update markers\n      let insertCountEmitted = 0;\n      for (let i = insertEvents.length - 1; i >= 0; i--) {\n        insertEvents[i].index += insertCountEmitted;\n        this.lines.onInsertEmitter.fire(insertEvents[i]);\n        insertCountEmitted += insertEvents[i].amount;\n      }\n      const amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n      if (amountToTrim > 0) {\n        this.lines.onTrimEmitter.fire(amountToTrim);\n      }\n    }\n  }\n\n  // private _reflowSmallerGetLinesNeeded()\n\n  /**\n   * Translates a string index back to a BufferIndex.\n   * To get the correct buffer position the string must start at `startCol` 0\n   * (default in translateBufferLineToString).\n   * The method also works on wrapped line strings given rows were not trimmed.\n   * The method operates on the CharData string length, there are no\n   * additional content or boundary checks. Therefore the string and the buffer\n   * should not be altered in between.\n   * TODO: respect trim flag after fixing #1685\n   * @param lineIndex line index the string was retrieved from\n   * @param stringIndex index within the string\n   * @param startCol column offset the string was retrieved from\n   */\n  public stringIndexToBufferIndex(lineIndex: number, stringIndex: number, trimRight: boolean = false): BufferIndex {\n    while (stringIndex) {\n      const line = this.lines.get(lineIndex);\n      if (!line) {\n        return [-1, -1];\n      }\n      const length = (trimRight) ? line.getTrimmedLength() : line.length;\n      for (let i = 0; i < length; ++i) {\n        if (line.get(i)[CHAR_DATA_WIDTH_INDEX]) {\n          // empty cells report a string length of 0, but get replaced\n          // with a whitespace in translateToString, thus replace with 1\n          stringIndex -= line.get(i)[CHAR_DATA_CHAR_INDEX].length || 1;\n        }\n        if (stringIndex < 0) {\n          return [lineIndex, i];\n        }\n      }\n      lineIndex++;\n    }\n    return [lineIndex, 0];\n  }\n\n  /**\n   * Translates a buffer line to a string, with optional start and end columns.\n   * Wide characters will count as two columns in the resulting string. This\n   * function is useful for getting the actual text underneath the raw selection\n   * position.\n   * @param line The line being translated.\n   * @param trimRight Whether to trim whitespace to the right.\n   * @param startCol The column to start at.\n   * @param endCol The column to end at.\n   */\n  public translateBufferLineToString(lineIndex: number, trimRight: boolean, startCol: number = 0, endCol?: number): string {\n    const line = this.lines.get(lineIndex);\n    if (!line) {\n      return '';\n    }\n    return line.translateToString(trimRight, startCol, endCol);\n  }\n\n  public getWrappedRangeForLine(y: number): { first: number, last: number } {\n    let first = y;\n    let last = y;\n    // Scan upwards for wrapped lines\n    while (first > 0 && this.lines.get(first)!.isWrapped) {\n      first--;\n    }\n    // Scan downwards for wrapped lines\n    while (last + 1 < this.lines.length && this.lines.get(last + 1)!.isWrapped) {\n      last++;\n    }\n    return { first, last };\n  }\n\n  /**\n   * Setup the tab stops.\n   * @param i The index to start setting up tab stops from.\n   */\n  public setupTabStops(i?: number): void {\n    if (i !== null && i !== undefined) {\n      if (!this.tabs[i]) {\n        i = this.prevStop(i);\n      }\n    } else {\n      this.tabs = {};\n      i = 0;\n    }\n\n    for (; i < this._cols; i += this._optionsService.options.tabStopWidth) {\n      this.tabs[i] = true;\n    }\n  }\n\n  /**\n   * Move the cursor to the previous tab stop from the given position (default is current).\n   * @param x The position to move the cursor to the previous tab stop.\n   */\n  public prevStop(x?: number): number {\n    if (x === null || x === undefined) {\n      x = this.x;\n    }\n    while (!this.tabs[--x] && x > 0);\n    return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n  }\n\n  /**\n   * Move the cursor one tab stop forward from the given position (default is current).\n   * @param x The position to move the cursor one tab stop forward.\n   */\n  public nextStop(x?: number): number {\n    if (x === null || x === undefined) {\n      x = this.x;\n    }\n    while (!this.tabs[++x] && x < this._cols);\n    return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n  }\n\n  public addMarker(y: number): Marker {\n    const marker = new Marker(y);\n    this.markers.push(marker);\n    marker.register(this.lines.onTrim(amount => {\n      marker.line -= amount;\n      // The marker should be disposed when the line is trimmed from the buffer\n      if (marker.line < 0) {\n        marker.dispose();\n      }\n    }));\n    marker.register(this.lines.onInsert(event => {\n      if (marker.line >= event.index) {\n        marker.line += event.amount;\n      }\n    }));\n    marker.register(this.lines.onDelete(event => {\n      // Delete the marker if it's within the range\n      if (marker.line >= event.index && marker.line < event.index + event.amount) {\n        marker.dispose();\n      }\n\n      // Shift the marker if it's after the deleted range\n      if (marker.line > event.index) {\n        marker.line -= event.amount;\n      }\n    }));\n    marker.register(marker.onDispose(() => this._removeMarker(marker)));\n    return marker;\n  }\n\n  private _removeMarker(marker: Marker): void {\n    this.markers.splice(this.markers.indexOf(marker), 1);\n  }\n\n  public iterator(trimRight: boolean, startIndex?: number, endIndex?: number, startOverscan?: number, endOverscan?: number): IBufferStringIterator {\n    return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n  }\n}\n\n/**\n * Iterator to get unwrapped content strings from the buffer.\n * The iterator returns at least the string data between the borders\n * `startIndex` and `endIndex` (exclusive) and will expand the lines\n * by `startOverscan` to the top and by `endOverscan` to the bottom,\n * if no new line was found in between.\n * It will never read/return string data beyond `startIndex - startOverscan`\n * or `endIndex + endOverscan`. Therefore the first and last line might be truncated.\n * It is possible to always get the full string for the first and last line as well\n * by setting the overscan values to the actual buffer length. This not recommended\n * since it might return the whole buffer within a single string in a worst case scenario.\n */\nexport class BufferStringIterator implements IBufferStringIterator {\n  private _current: number;\n\n  constructor (\n    private _buffer: IBuffer,\n    private _trimRight: boolean,\n    private _startIndex: number = 0,\n    private _endIndex: number = _buffer.lines.length,\n    private _startOverscan: number = 0,\n    private _endOverscan: number = 0\n  ) {\n    if (this._startIndex < 0) {\n      this._startIndex = 0;\n    }\n    if (this._endIndex > this._buffer.lines.length) {\n      this._endIndex = this._buffer.lines.length;\n    }\n    this._current = this._startIndex;\n  }\n\n  public hasNext(): boolean {\n    return this._current < this._endIndex;\n  }\n\n  public next(): IBufferStringIteratorResult {\n    const range = this._buffer.getWrappedRangeForLine(this._current);\n    // limit search window to overscan value at both borders\n    if (range.first < this._startIndex - this._startOverscan) {\n      range.first = this._startIndex - this._startOverscan;\n    }\n    if (range.last > this._endIndex + this._endOverscan) {\n      range.last = this._endIndex + this._endOverscan;\n    }\n    // limit to current buffer length\n    range.first = Math.max(range.first, 0);\n    range.last = Math.min(range.last, this._buffer.lines.length);\n    let content = '';\n    for (let i = range.first; i <= range.last; ++i) {\n      content += this._buffer.translateBufferLineToString(i, this._trimRight);\n    }\n    this._current = range.last + 1;\n    return { range, content };\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CharData, IBufferLine, ICellData, IAttributeData, IExtendedAttrs } from 'common/Types';\nimport { stringFromCodePoint } from 'common/input/TextDecoder';\nimport { CHAR_DATA_CHAR_INDEX, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_ATTR_INDEX, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE, WHITESPACE_CELL_CHAR, Content, BgFlags } from 'common/buffer/Constants';\nimport { CellData } from 'common/buffer/CellData';\nimport { AttributeData, ExtendedAttrs } from 'common/buffer/AttributeData';\n\n/**\n * buffer memory layout:\n *\n *   |             uint32_t             |        uint32_t         |        uint32_t         |\n *   |             `content`            |          `FG`           |          `BG`           |\n *   | wcwidth(2) comb(1) codepoint(21) | flags(8) R(8) G(8) B(8) | flags(8) R(8) G(8) B(8) |\n */\n\n\n/** typed array slots taken by one cell */\nconst CELL_SIZE = 3;\n\n/**\n * Cell member indices.\n *\n * Direct access:\n *    `content = data[column * CELL_SIZE + Cell.CONTENT];`\n *    `fg = data[column * CELL_SIZE + Cell.FG];`\n *    `bg = data[column * CELL_SIZE + Cell.BG];`\n */\nconst enum Cell {\n  CONTENT = 0,\n  FG = 1, // currently simply holds all known attrs\n  BG = 2  // currently unused\n}\n\nexport const DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\n\n/**\n * Typed array based bufferline implementation.\n *\n * There are 2 ways to insert data into the cell buffer:\n * - `setCellFromCodepoint` + `addCodepointToCell`\n *   Use these for data that is already UTF32.\n *   Used during normal input in `InputHandler` for faster buffer access.\n * - `setCell`\n *   This method takes a CellData object and stores the data in the buffer.\n *   Use `CellData.fromCharData` to create the CellData object (e.g. from JS string).\n *\n * To retrieve data from the buffer use either one of the primitive methods\n * (if only one particular value is needed) or `loadCell`. For `loadCell` in a loop\n * memory allocs / GC pressure can be greatly reduced by reusing the CellData object.\n */\nexport class BufferLine implements IBufferLine {\n  protected _data: Uint32Array;\n  protected _combined: {[index: number]: string} = {};\n  protected _extendedAttrs: {[index: number]: ExtendedAttrs} = {};\n  public length: number;\n\n  constructor(cols: number, fillCellData?: ICellData, public isWrapped: boolean = false) {\n    this._data = new Uint32Array(cols * CELL_SIZE);\n    const cell = fillCellData || CellData.fromCharData([0, NULL_CELL_CHAR, NULL_CELL_WIDTH, NULL_CELL_CODE]);\n    for (let i = 0; i < cols; ++i) {\n      this.setCell(i, cell);\n    }\n    this.length = cols;\n  }\n\n  /**\n   * Get cell data CharData.\n   * @deprecated\n   */\n  public get(index: number): CharData {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    const cp = content & Content.CODEPOINT_MASK;\n    return [\n      this._data[index * CELL_SIZE + Cell.FG],\n      (content & Content.IS_COMBINED_MASK)\n        ? this._combined[index]\n        : (cp) ? stringFromCodePoint(cp) : '',\n      content >> Content.WIDTH_SHIFT,\n      (content & Content.IS_COMBINED_MASK)\n        ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n        : cp\n    ];\n  }\n\n  /**\n   * Set cell data from CharData.\n   * @deprecated\n   */\n  public set(index: number, value: CharData): void {\n    this._data[index * CELL_SIZE + Cell.FG] = value[CHAR_DATA_ATTR_INDEX];\n    if (value[CHAR_DATA_CHAR_INDEX].length > 1) {\n      this._combined[index] = value[1];\n      this._data[index * CELL_SIZE + Cell.CONTENT] = index | Content.IS_COMBINED_MASK | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    } else {\n      this._data[index * CELL_SIZE + Cell.CONTENT] = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n  }\n\n  /**\n   * primitive getters\n   * use these when only one value is needed, otherwise use `loadCell`\n   */\n  public getWidth(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] >> Content.WIDTH_SHIFT;\n  }\n\n  /** Test whether content has width. */\n  public hasWidth(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.WIDTH_MASK;\n  }\n\n  /** Get FG cell component. */\n  public getFg(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.FG];\n  }\n\n  /** Get BG cell component. */\n  public getBg(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.BG];\n  }\n\n  /**\n   * Test whether contains any chars.\n   * Basically an empty has no content, but other cells might differ in FG/BG\n   * from real empty cells.\n   * */\n  public hasContent(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.HAS_CONTENT_MASK;\n  }\n\n  /**\n   * Get codepoint of the cell.\n   * To be in line with `code` in CharData this either returns\n   * a single UTF32 codepoint or the last codepoint of a combined string.\n   */\n  public getCodePoint(index: number): number {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      return this._combined[index].charCodeAt(this._combined[index].length - 1);\n    }\n    return content & Content.CODEPOINT_MASK;\n  }\n\n  /** Test whether the cell contains a combined string. */\n  public isCombined(index: number): number {\n    return this._data[index * CELL_SIZE + Cell.CONTENT] & Content.IS_COMBINED_MASK;\n  }\n\n  /** Returns the string content of the cell. */\n  public getString(index: number): string {\n    const content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      return this._combined[index];\n    }\n    if (content & Content.CODEPOINT_MASK) {\n      return stringFromCodePoint(content & Content.CODEPOINT_MASK);\n    }\n    // return empty string for empty cells\n    return '';\n  }\n\n  /**\n   * Load data at `index` into `cell`. This is used to access cells in a way that's more friendly\n   * to GC as it significantly reduced the amount of new objects/references needed.\n   */\n  public loadCell(index: number, cell: ICellData): ICellData {\n    const startIndex = index * CELL_SIZE;\n    cell.content = this._data[startIndex + Cell.CONTENT];\n    cell.fg = this._data[startIndex + Cell.FG];\n    cell.bg = this._data[startIndex + Cell.BG];\n    if (cell.content & Content.IS_COMBINED_MASK) {\n      cell.combinedData = this._combined[index];\n    }\n    if (cell.bg & BgFlags.HAS_EXTENDED) {\n      cell.extended = this._extendedAttrs[index];\n    }\n    return cell;\n  }\n\n  /**\n   * Set data at `index` to `cell`.\n   */\n  public setCell(index: number, cell: ICellData): void {\n    if (cell.content & Content.IS_COMBINED_MASK) {\n      this._combined[index] = cell.combinedData;\n    }\n    if (cell.bg & BgFlags.HAS_EXTENDED) {\n      this._extendedAttrs[index] = cell.extended;\n    }\n    this._data[index * CELL_SIZE + Cell.CONTENT] = cell.content;\n    this._data[index * CELL_SIZE + Cell.FG] = cell.fg;\n    this._data[index * CELL_SIZE + Cell.BG] = cell.bg;\n  }\n\n  /**\n   * Set cell data from input handler.\n   * Since the input handler see the incoming chars as UTF32 codepoints,\n   * it gets an optimized access method.\n   */\n  public setCellFromCodePoint(index: number, codePoint: number, width: number, fg: number, bg: number, eAttrs: IExtendedAttrs): void {\n    if (bg & BgFlags.HAS_EXTENDED) {\n      this._extendedAttrs[index] = eAttrs;\n    }\n    this._data[index * CELL_SIZE + Cell.CONTENT] = codePoint | (width << Content.WIDTH_SHIFT);\n    this._data[index * CELL_SIZE + Cell.FG] = fg;\n    this._data[index * CELL_SIZE + Cell.BG] = bg;\n  }\n\n  /**\n   * Add a codepoint to a cell from input handler.\n   * During input stage combining chars with a width of 0 follow and stack\n   * onto a leading char. Since we already set the attrs\n   * by the previous `setDataFromCodePoint` call, we can omit it here.\n   */\n  public addCodepointToCell(index: number, codePoint: number): void {\n    let content = this._data[index * CELL_SIZE + Cell.CONTENT];\n    if (content & Content.IS_COMBINED_MASK) {\n      // we already have a combined string, simply add\n      this._combined[index] += stringFromCodePoint(codePoint);\n    } else {\n      if (content & Content.CODEPOINT_MASK) {\n        // normal case for combining chars:\n        //  - move current leading char + new one into combined string\n        //  - set combined flag\n        this._combined[index] = stringFromCodePoint(content & Content.CODEPOINT_MASK) + stringFromCodePoint(codePoint);\n        content &= ~Content.CODEPOINT_MASK; // set codepoint in buffer to 0\n        content |= Content.IS_COMBINED_MASK;\n      } else {\n        // should not happen - we actually have no data in the cell yet\n        // simply set the data in the cell buffer with a width of 1\n        content = codePoint | (1 << Content.WIDTH_SHIFT);\n      }\n      this._data[index * CELL_SIZE + Cell.CONTENT] = content;\n    }\n  }\n\n  public insertCells(pos: number, n: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    pos %= this.length;\n\n    // handle fullwidth at pos: reset cell one to the left if pos is second cell of a wide char\n    if (pos && this.getWidth(pos - 1) === 2) {\n      this.setCellFromCodePoint(pos - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n\n    if (n < this.length - pos) {\n      const cell = new CellData();\n      for (let i = this.length - pos - n - 1; i >= 0; --i) {\n        this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n      }\n      for (let i = 0; i < n; ++i) {\n        this.setCell(pos + i, fillCellData);\n      }\n    } else {\n      for (let i = pos; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    }\n\n    // handle fullwidth at line end: reset last cell if it is first cell of a wide char\n    if (this.getWidth(this.length - 1) === 2) {\n      this.setCellFromCodePoint(this.length - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n  }\n\n  public deleteCells(pos: number, n: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    pos %= this.length;\n    if (n < this.length - pos) {\n      const cell = new CellData();\n      for (let i = 0; i < this.length - pos - n; ++i) {\n        this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n      }\n      for (let i = this.length - n; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    } else {\n      for (let i = pos; i < this.length; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    }\n\n    // handle fullwidth at pos:\n    // - reset pos-1 if wide char\n    // - reset pos if width==0 (previous second cell of a wide char)\n    if (pos && this.getWidth(pos - 1) === 2) {\n      this.setCellFromCodePoint(pos - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n    if (this.getWidth(pos) === 0 && !this.hasContent(pos)) {\n      this.setCellFromCodePoint(pos, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n  }\n\n  public replaceCells(start: number, end: number, fillCellData: ICellData, eraseAttr?: IAttributeData): void {\n    // handle fullwidth at start: reset cell one to the left if start is second cell of a wide char\n    if (start && this.getWidth(start - 1) === 2) {\n      this.setCellFromCodePoint(start - 1, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n    // handle fullwidth at last cell + 1: reset to empty cell if it is second part of a wide char\n    if (end < this.length && this.getWidth(end - 1) === 2) {\n      this.setCellFromCodePoint(end, 0, 1, eraseAttr?.fg || 0, eraseAttr?.bg || 0, eraseAttr?.extended || new ExtendedAttrs());\n    }\n\n    while (start < end  && start < this.length) {\n      this.setCell(start++, fillCellData);\n    }\n  }\n\n  public resize(cols: number, fillCellData: ICellData): void {\n    if (cols === this.length) {\n      return;\n    }\n    if (cols > this.length) {\n      const data = new Uint32Array(cols * CELL_SIZE);\n      if (this.length) {\n        if (cols * CELL_SIZE < this._data.length) {\n          data.set(this._data.subarray(0, cols * CELL_SIZE));\n        } else {\n          data.set(this._data);\n        }\n      }\n      this._data = data;\n      for (let i = this.length; i < cols; ++i) {\n        this.setCell(i, fillCellData);\n      }\n    } else {\n      if (cols) {\n        const data = new Uint32Array(cols * CELL_SIZE);\n        data.set(this._data.subarray(0, cols * CELL_SIZE));\n        this._data = data;\n        // Remove any cut off combined data, FIXME: repeat this for extended attrs\n        const keys = Object.keys(this._combined);\n        for (let i = 0; i < keys.length; i++) {\n          const key = parseInt(keys[i], 10);\n          if (key >= cols) {\n            delete this._combined[key];\n          }\n        }\n      } else {\n        this._data = new Uint32Array(0);\n        this._combined = {};\n      }\n    }\n    this.length = cols;\n  }\n\n  /** fill a line with fillCharData */\n  public fill(fillCellData: ICellData): void {\n    this._combined = {};\n    this._extendedAttrs = {};\n    for (let i = 0; i < this.length; ++i) {\n      this.setCell(i, fillCellData);\n    }\n  }\n\n  /** alter to a full copy of line  */\n  public copyFrom(line: BufferLine): void {\n    if (this.length !== line.length) {\n      this._data = new Uint32Array(line._data);\n    } else {\n      // use high speed copy if lengths are equal\n      this._data.set(line._data);\n    }\n    this.length = line.length;\n    this._combined = {};\n    for (const el in line._combined) {\n      this._combined[el] = line._combined[el];\n    }\n    this._extendedAttrs = {};\n    for (const el in line._extendedAttrs) {\n      this._extendedAttrs[el] = line._extendedAttrs[el];\n    }\n    this.isWrapped = line.isWrapped;\n  }\n\n  /** create a new clone */\n  public clone(): IBufferLine {\n    const newLine = new BufferLine(0);\n    newLine._data = new Uint32Array(this._data);\n    newLine.length = this.length;\n    for (const el in this._combined) {\n      newLine._combined[el] = this._combined[el];\n    }\n    for (const el in this._extendedAttrs) {\n      newLine._extendedAttrs[el] = this._extendedAttrs[el];\n    }\n    newLine.isWrapped = this.isWrapped;\n    return newLine;\n  }\n\n  public getTrimmedLength(): number {\n    for (let i = this.length - 1; i >= 0; --i) {\n      if ((this._data[i * CELL_SIZE + Cell.CONTENT] & Content.HAS_CONTENT_MASK)) {\n        return i + (this._data[i * CELL_SIZE + Cell.CONTENT] >> Content.WIDTH_SHIFT);\n      }\n    }\n    return 0;\n  }\n\n  public copyCellsFrom(src: BufferLine, srcCol: number, destCol: number, length: number, applyInReverse: boolean): void {\n    const srcData = src._data;\n    if (applyInReverse) {\n      for (let cell = length - 1; cell >= 0; cell--) {\n        for (let i = 0; i < CELL_SIZE; i++) {\n          this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n        }\n      }\n    } else {\n      for (let cell = 0; cell < length; cell++) {\n        for (let i = 0; i < CELL_SIZE; i++) {\n          this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n        }\n      }\n    }\n\n    // Move any combined data over as needed, FIXME: repeat for extended attrs\n    const srcCombinedKeys = Object.keys(src._combined);\n    for (let i = 0; i < srcCombinedKeys.length; i++) {\n      const key = parseInt(srcCombinedKeys[i], 10);\n      if (key >= srcCol) {\n        this._combined[key - srcCol + destCol] = src._combined[key];\n      }\n    }\n  }\n\n  public translateToString(trimRight: boolean = false, startCol: number = 0, endCol: number = this.length): string {\n    if (trimRight) {\n      endCol = Math.min(endCol, this.getTrimmedLength());\n    }\n    let result = '';\n    while (startCol < endCol) {\n      const content = this._data[startCol * CELL_SIZE + Cell.CONTENT];\n      const cp = content & Content.CODEPOINT_MASK;\n      result += (content & Content.IS_COMBINED_MASK) ? this._combined[startCol] : (cp) ? stringFromCodePoint(cp) : WHITESPACE_CELL_CHAR;\n      startCol += (content >> Content.WIDTH_SHIFT) || 1; // always advance by 1\n    }\n    return result;\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferRange } from 'xterm';\n\nexport function getRangeLength(range: IBufferRange, bufferCols: number): number {\n  if (range.start.y > range.end.y) {\n    throw new Error(`Buffer range end (${range.end.x}, ${range.end.y}) cannot be before start (${range.start.x}, ${range.start.y})`);\n  }\n  return bufferCols * (range.end.y - range.start.y) + (range.end.x - range.start.x + 1);\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { BufferLine } from 'common/buffer/BufferLine';\nimport { CircularList } from 'common/CircularList';\nimport { IBufferLine, ICellData } from 'common/Types';\n\nexport interface INewLayoutResult {\n  layout: number[];\n  countRemoved: number;\n}\n\n/**\n * Evaluates and returns indexes to be removed after a reflow larger occurs. Lines will be removed\n * when a wrapped line unwraps.\n * @param lines The buffer lines.\n * @param newCols The columns after resize.\n */\nexport function reflowLargerGetLinesToRemove(lines: CircularList<IBufferLine>, oldCols: number, newCols: number, bufferAbsoluteY: number, nullCell: ICellData): number[] {\n  // Gather all BufferLines that need to be removed from the Buffer here so that they can be\n  // batched up and only committed once\n  const toRemove: number[] = [];\n\n  for (let y = 0; y < lines.length - 1; y++) {\n    // Check if this row is wrapped\n    let i = y;\n    let nextLine = lines.get(++i) as BufferLine;\n    if (!nextLine.isWrapped) {\n      continue;\n    }\n\n    // Check how many lines it's wrapped for\n    const wrappedLines: BufferLine[] = [lines.get(y) as BufferLine];\n    while (i < lines.length && nextLine.isWrapped) {\n      wrappedLines.push(nextLine);\n      nextLine = lines.get(++i) as BufferLine;\n    }\n\n    // If these lines contain the cursor don't touch them, the program will handle fixing up wrapped\n    // lines with the cursor\n    if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n      y += wrappedLines.length - 1;\n      continue;\n    }\n\n    // Copy buffer data to new locations\n    let destLineIndex = 0;\n    let destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n    let srcLineIndex = 1;\n    let srcCol = 0;\n    while (srcLineIndex < wrappedLines.length) {\n      const srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n      const srcRemainingCells = srcTrimmedTineLength - srcCol;\n      const destRemainingCells = newCols - destCol;\n      const cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n\n      wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n\n      destCol += cellsToCopy;\n      if (destCol === newCols) {\n        destLineIndex++;\n        destCol = 0;\n      }\n      srcCol += cellsToCopy;\n      if (srcCol === srcTrimmedTineLength) {\n        srcLineIndex++;\n        srcCol = 0;\n      }\n\n      // Make sure the last cell isn't wide, if it is copy it to the current dest\n      if (destCol === 0 && destLineIndex !== 0) {\n        if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n          wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n          // Null out the end of the last row\n          wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n        }\n      }\n    }\n\n    // Clear out remaining cells or fragments could remain;\n    wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n\n    // Work backwards and remove any rows at the end that only contain null cells\n    let countToRemove = 0;\n    for (let i = wrappedLines.length - 1; i > 0; i--) {\n      if (i > destLineIndex || wrappedLines[i].getTrimmedLength() === 0) {\n        countToRemove++;\n      } else {\n        break;\n      }\n    }\n\n    if (countToRemove > 0) {\n      toRemove.push(y + wrappedLines.length - countToRemove); // index\n      toRemove.push(countToRemove);\n    }\n\n    y += wrappedLines.length - 1;\n  }\n  return toRemove;\n}\n\n/**\n * Creates and return the new layout for lines given an array of indexes to be removed.\n * @param lines The buffer lines.\n * @param toRemove The indexes to remove.\n */\nexport function reflowLargerCreateNewLayout(lines: CircularList<IBufferLine>, toRemove: number[]): INewLayoutResult {\n  const layout: number[] = [];\n  // First iterate through the list and get the actual indexes to use for rows\n  let nextToRemoveIndex = 0;\n  let nextToRemoveStart = toRemove[nextToRemoveIndex];\n  let countRemovedSoFar = 0;\n  for (let i = 0; i < lines.length; i++) {\n    if (nextToRemoveStart === i) {\n      const countToRemove = toRemove[++nextToRemoveIndex];\n\n      // Tell markers that there was a deletion\n      lines.onDeleteEmitter.fire({\n        index: i - countRemovedSoFar,\n        amount: countToRemove\n      });\n\n      i += countToRemove - 1;\n      countRemovedSoFar += countToRemove;\n      nextToRemoveStart = toRemove[++nextToRemoveIndex];\n    } else {\n      layout.push(i);\n    }\n  }\n  return {\n    layout,\n    countRemoved: countRemovedSoFar\n  };\n}\n\n/**\n * Applies a new layout to the buffer. This essentially does the same as many splice calls but it's\n * done all at once in a single iteration through the list since splice is very expensive.\n * @param lines The buffer lines.\n * @param newLayout The new layout to apply.\n */\nexport function reflowLargerApplyNewLayout(lines: CircularList<IBufferLine>, newLayout: number[]): void {\n  // Record original lines so they don't get overridden when we rearrange the list\n  const newLayoutLines: BufferLine[] = [];\n  for (let i = 0; i < newLayout.length; i++) {\n    newLayoutLines.push(lines.get(newLayout[i]) as BufferLine);\n  }\n\n  // Rearrange the list\n  for (let i = 0; i < newLayoutLines.length; i++) {\n    lines.set(i, newLayoutLines[i]);\n  }\n  lines.length = newLayout.length;\n}\n\n/**\n * Gets the new line lengths for a given wrapped line. The purpose of this function it to pre-\n * compute the wrapping points since wide characters may need to be wrapped onto the following line.\n * This function will return an array of numbers of where each line wraps to, the resulting array\n * will only contain the values `newCols` (when the line does not end with a wide character) and\n * `newCols - 1` (when the line does end with a wide character), except for the last value which\n * will contain the remaining items to fill the line.\n *\n * Calling this with a `newCols` value of `1` will lock up.\n *\n * @param wrappedLines The wrapped lines to evaluate.\n * @param oldCols The columns before resize.\n * @param newCols The columns after resize.\n */\nexport function reflowSmallerGetNewLineLengths(wrappedLines: BufferLine[], oldCols: number, newCols: number): number[] {\n  const newLineLengths: number[] = [];\n  const cellsNeeded = wrappedLines.map((l, i) => getWrappedLineTrimmedLength(wrappedLines, i, oldCols)).reduce((p, c) => p + c);\n\n  // Use srcCol and srcLine to find the new wrapping point, use that to get the cellsAvailable and\n  // linesNeeded\n  let srcCol = 0;\n  let srcLine = 0;\n  let cellsAvailable = 0;\n  while (cellsAvailable < cellsNeeded) {\n    if (cellsNeeded - cellsAvailable < newCols) {\n      // Add the final line and exit the loop\n      newLineLengths.push(cellsNeeded - cellsAvailable);\n      break;\n    }\n    srcCol += newCols;\n    const oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n    if (srcCol > oldTrimmedLength) {\n      srcCol -= oldTrimmedLength;\n      srcLine++;\n    }\n    const endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n    if (endsWithWide) {\n      srcCol--;\n    }\n    const lineLength = endsWithWide ? newCols - 1 : newCols;\n    newLineLengths.push(lineLength);\n    cellsAvailable += lineLength;\n  }\n\n  return newLineLengths;\n}\n\nexport function getWrappedLineTrimmedLength(lines: BufferLine[], i: number, cols: number): number {\n  // If this is the last row in the wrapped line, get the actual trimmed length\n  if (i === lines.length - 1) {\n    return lines[i].getTrimmedLength();\n  }\n  // Detect whether the following line starts with a wide character and the end of the current line\n  // is null, if so then we can be pretty sure the null character should be excluded from the line\n  // length]\n  const endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n  const followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n  if (endsInNull && followingLineStartsWithWide) {\n    return cols - 1;\n  }\n  return cols;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { IAttributeData } from 'common/Types';\nimport { Buffer } from 'common/buffer/Buffer';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IOptionsService, IBufferService } from 'common/services/Services';\nimport { Disposable } from 'common/Lifecycle';\n\n/**\n * The BufferSet represents the set of two buffers used by xterm terminals (normal and alt) and\n * provides also utilities for working with them.\n */\nexport class BufferSet extends Disposable implements IBufferSet {\n  private _normal!: Buffer;\n  private _alt!: Buffer;\n  private _activeBuffer!: Buffer;\n\n  private _onBufferActivate = this.register(new EventEmitter<{activeBuffer: IBuffer, inactiveBuffer: IBuffer}>());\n  public get onBufferActivate(): IEvent<{activeBuffer: IBuffer, inactiveBuffer: IBuffer}> { return this._onBufferActivate.event; }\n\n  /**\n   * Create a new BufferSet for the given terminal.\n   * @param _terminal - The terminal the BufferSet will belong to\n   */\n  constructor(\n    private readonly _optionsService: IOptionsService,\n    private readonly _bufferService: IBufferService\n  ) {\n    super();\n    this.reset();\n  }\n\n  public reset(): void {\n    this._normal = new Buffer(true, this._optionsService, this._bufferService);\n    this._normal.fillViewportRows();\n\n    // The alt buffer should never have scrollback.\n    // See http://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h2-The-Alternate-Screen-Buffer\n    this._alt = new Buffer(false, this._optionsService, this._bufferService);\n    this._activeBuffer = this._normal;\n    this._onBufferActivate.fire({\n      activeBuffer: this._normal,\n      inactiveBuffer: this._alt\n    });\n\n    this.setupTabStops();\n  }\n\n  /**\n   * Returns the alt Buffer of the BufferSet\n   */\n  public get alt(): Buffer {\n    return this._alt;\n  }\n\n  /**\n   * Returns the normal Buffer of the BufferSet\n   */\n  public get active(): Buffer {\n    return this._activeBuffer;\n  }\n\n  /**\n   * Returns the currently active Buffer of the BufferSet\n   */\n  public get normal(): Buffer {\n    return this._normal;\n  }\n\n  /**\n   * Sets the normal Buffer of the BufferSet as its currently active Buffer\n   */\n  public activateNormalBuffer(): void {\n    if (this._activeBuffer === this._normal) {\n      return;\n    }\n    this._normal.x = this._alt.x;\n    this._normal.y = this._alt.y;\n    // The alt buffer should always be cleared when we switch to the normal\n    // buffer. This frees up memory since the alt buffer should always be new\n    // when activated.\n    this._alt.clear();\n    this._activeBuffer = this._normal;\n    this._onBufferActivate.fire({\n      activeBuffer: this._normal,\n      inactiveBuffer: this._alt\n    });\n  }\n\n  /**\n   * Sets the alt Buffer of the BufferSet as its currently active Buffer\n   */\n  public activateAltBuffer(fillAttr?: IAttributeData): void {\n    if (this._activeBuffer === this._alt) {\n      return;\n    }\n    // Since the alt buffer is always cleared when the normal buffer is\n    // activated, we want to fill it when switching to it.\n    this._alt.fillViewportRows(fillAttr);\n    this._alt.x = this._normal.x;\n    this._alt.y = this._normal.y;\n    this._activeBuffer = this._alt;\n    this._onBufferActivate.fire({\n      activeBuffer: this._alt,\n      inactiveBuffer: this._normal\n    });\n  }\n\n  /**\n   * Resizes both normal and alt buffers, adjusting their data accordingly.\n   * @param newCols The new number of columns.\n   * @param newRows The new number of rows.\n   */\n  public resize(newCols: number, newRows: number): void {\n    this._normal.resize(newCols, newRows);\n    this._alt.resize(newCols, newRows);\n  }\n\n  /**\n   * Setup the tab stops.\n   * @param i The index to start setting up tab stops from.\n   */\n  public setupTabStops(i?: number): void {\n    this._normal.setupTabStops(i);\n    this._alt.setupTabStops(i);\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CharData, ICellData, IExtendedAttrs } from 'common/Types';\nimport { stringFromCodePoint } from 'common/input/TextDecoder';\nimport { CHAR_DATA_CHAR_INDEX, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_ATTR_INDEX, Content } from 'common/buffer/Constants';\nimport { AttributeData, ExtendedAttrs } from 'common/buffer/AttributeData';\n\n/**\n * CellData - represents a single Cell in the terminal buffer.\n */\nexport class CellData extends AttributeData implements ICellData {\n  /** Helper to create CellData from CharData. */\n  public static fromCharData(value: CharData): CellData {\n    const obj = new CellData();\n    obj.setFromCharData(value);\n    return obj;\n  }\n  /** Primitives from terminal buffer. */\n  public content = 0;\n  public fg = 0;\n  public bg = 0;\n  public extended: IExtendedAttrs = new ExtendedAttrs();\n  public combinedData = '';\n  /** Whether cell contains a combined string. */\n  public isCombined(): number {\n    return this.content & Content.IS_COMBINED_MASK;\n  }\n  /** Width of the cell. */\n  public getWidth(): number {\n    return this.content >> Content.WIDTH_SHIFT;\n  }\n  /** JS string of the content. */\n  public getChars(): string {\n    if (this.content & Content.IS_COMBINED_MASK) {\n      return this.combinedData;\n    }\n    if (this.content & Content.CODEPOINT_MASK) {\n      return stringFromCodePoint(this.content & Content.CODEPOINT_MASK);\n    }\n    return '';\n  }\n  /**\n   * Codepoint of cell\n   * Note this returns the UTF32 codepoint of single chars,\n   * if content is a combined string it returns the codepoint\n   * of the last char in string to be in line with code in CharData.\n   * */\n  public getCode(): number {\n    return (this.isCombined())\n      ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n      : this.content & Content.CODEPOINT_MASK;\n  }\n  /** Set data from CharData */\n  public setFromCharData(value: CharData): void {\n    this.fg = value[CHAR_DATA_ATTR_INDEX];\n    this.bg = 0;\n    let combined = false;\n    // surrogates and combined strings need special treatment\n    if (value[CHAR_DATA_CHAR_INDEX].length > 2) {\n      combined = true;\n    }\n    else if (value[CHAR_DATA_CHAR_INDEX].length === 2) {\n      const code = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n      // if the 2-char string is a surrogate create single codepoint\n      // everything else is combined\n      if (0xD800 <= code && code <= 0xDBFF) {\n        const second = value[CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n        }\n        else {\n          combined = true;\n        }\n      }\n      else {\n        combined = true;\n      }\n    }\n    else {\n      this.content = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n    if (combined) {\n      this.combinedData = value[CHAR_DATA_CHAR_INDEX];\n      this.content = Content.IS_COMBINED_MASK | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n  }\n  /** Get data as CharData. */\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport const DEFAULT_COLOR = 256;\nexport const DEFAULT_ATTR = (0 << 18) | (DEFAULT_COLOR << 9) | (256 << 0);\n\nexport const CHAR_DATA_ATTR_INDEX = 0;\nexport const CHAR_DATA_CHAR_INDEX = 1;\nexport const CHAR_DATA_WIDTH_INDEX = 2;\nexport const CHAR_DATA_CODE_INDEX = 3;\n\n/**\n * Null cell - a real empty cell (containing nothing).\n * Note that code should always be 0 for a null cell as\n * several test condition of the buffer line rely on this.\n */\nexport const NULL_CELL_CHAR = '';\nexport const NULL_CELL_WIDTH = 1;\nexport const NULL_CELL_CODE = 0;\n\n/**\n * Whitespace cell.\n * This is meant as a replacement for empty cells when needed\n * during rendering lines to preserve correct aligment.\n */\nexport const WHITESPACE_CELL_CHAR = ' ';\nexport const WHITESPACE_CELL_WIDTH = 1;\nexport const WHITESPACE_CELL_CODE = 32;\n\n/**\n * Bitmasks for accessing data in `content`.\n */\nexport const enum Content {\n  /**\n   * bit 1..21    codepoint, max allowed in UTF32 is 0x10FFFF (21 bits taken)\n   *              read:   `codepoint = content & Content.codepointMask;`\n   *              write:  `content |= codepoint & Content.codepointMask;`\n   *                      shortcut if precondition `codepoint <= 0x10FFFF` is met:\n   *                      `content |= codepoint;`\n   */\n  CODEPOINT_MASK = 0x1FFFFF,\n\n  /**\n   * bit 22       flag indication whether a cell contains combined content\n   *              read:   `isCombined = content & Content.isCombined;`\n   *              set:    `content |= Content.isCombined;`\n   *              clear:  `content &= ~Content.isCombined;`\n   */\n  IS_COMBINED_MASK = 0x200000,  // 1 << 21\n\n  /**\n   * bit 1..22    mask to check whether a cell contains any string data\n   *              we need to check for codepoint and isCombined bits to see\n   *              whether a cell contains anything\n   *              read:   `isEmpty = !(content & Content.hasContent)`\n   */\n  HAS_CONTENT_MASK = 0x3FFFFF,\n\n  /**\n   * bit 23..24   wcwidth value of cell, takes 2 bits (ranges from 0..2)\n   *              read:   `width = (content & Content.widthMask) >> Content.widthShift;`\n   *                      `hasWidth = content & Content.widthMask;`\n   *                      as long as wcwidth is highest value in `content`:\n   *                      `width = content >> Content.widthShift;`\n   *              write:  `content |= (width << Content.widthShift) & Content.widthMask;`\n   *                      shortcut if precondition `0 <= width <= 3` is met:\n   *                      `content |= width << Content.widthShift;`\n   */\n  WIDTH_MASK = 0xC00000,   // 3 << 22\n  WIDTH_SHIFT = 22\n}\n\nexport const enum Attributes {\n  /**\n   * bit 1..8     blue in RGB, color in P256 and P16\n   */\n  BLUE_MASK = 0xFF,\n  BLUE_SHIFT = 0,\n  PCOLOR_MASK = 0xFF,\n  PCOLOR_SHIFT = 0,\n\n  /**\n   * bit 9..16    green in RGB\n   */\n  GREEN_MASK = 0xFF00,\n  GREEN_SHIFT = 8,\n\n  /**\n   * bit 17..24   red in RGB\n   */\n  RED_MASK = 0xFF0000,\n  RED_SHIFT = 16,\n\n  /**\n   * bit 25..26   color mode: DEFAULT (0) | P16 (1) | P256 (2) | RGB (3)\n   */\n  CM_MASK = 0x3000000,\n  CM_DEFAULT = 0,\n  CM_P16 = 0x1000000,\n  CM_P256 = 0x2000000,\n  CM_RGB = 0x3000000,\n\n  /**\n   * bit 1..24  RGB room\n   */\n  RGB_MASK = 0xFFFFFF\n}\n\nexport const enum FgFlags {\n  /**\n   * bit 27..32\n   */\n  INVERSE = 0x4000000,\n  BOLD = 0x8000000,\n  UNDERLINE = 0x10000000,\n  BLINK = 0x20000000,\n  INVISIBLE = 0x40000000,\n  STRIKETHROUGH = 0x80000000,\n}\n\nexport const enum BgFlags {\n  /**\n   * bit 27..32 (upper 3 unused)\n   */\n  ITALIC = 0x4000000,\n  DIM = 0x8000000,\n  HAS_EXTENDED = 0x10000000\n}\n\nexport const enum UnderlineStyle {\n  NONE = 0,\n  SINGLE = 1,\n  DOUBLE = 2,\n  CURLY = 3,\n  DOTTED = 4,\n  DASHED = 5\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { IMarker } from 'common/Types';\n\nexport class Marker extends Disposable implements IMarker {\n  private static _nextId = 1;\n\n  private _id: number = Marker._nextId++;\n  public isDisposed: boolean = false;\n\n  public get id(): number { return this._id; }\n\n  private _onDispose = new EventEmitter<void>();\n  public get onDispose(): IEvent<void> { return this._onDispose.event; }\n\n  constructor(\n    public line: number\n  ) {\n    super();\n  }\n\n  public dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n    this.isDisposed = true;\n    this.line = -1;\n    // Emit before super.dispose such that dispose listeners get a change to react\n    this._onDispose.fire();\n    super.dispose();\n  }\n}\n", "/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharset } from 'common/Types';\n\n/**\n * The character sets supported by the terminal. These enable several languages\n * to be represented within the terminal with only 8-bit encoding. See ISO 2022\n * for a discussion on character sets. Only VT100 character sets are supported.\n */\nexport const CHARSETS: { [key: string]: ICharset | undefined } = {};\n\n/**\n * The default character set, US.\n */\nexport const DEFAULT_CHARSET: ICharset | undefined = CHARSETS['B'];\n\n/**\n * DEC Special Character and Line Drawing Set.\n * Reference: http://vt100.net/docs/vt102-ug/table5-13.html\n * A lot of curses apps use this if they see TERM=xterm.\n * testing: echo -e '\\e(0a\\e(B'\n * The xterm output sometimes seems to conflict with the\n * reference above. xterm seems in line with the reference\n * when running vttest however.\n * The table below now uses xterm's output from vttest.\n */\nCHARSETS['0'] = {\n  '`': '\\u25c6', // '\u25C6'\n  'a': '\\u2592', // '\u2592'\n  'b': '\\u2409', // '\u2409' (HT)\n  'c': '\\u240c', // '\u240C' (FF)\n  'd': '\\u240d', // '\u240D' (CR)\n  'e': '\\u240a', // '\u240A' (LF)\n  'f': '\\u00b0', // '\u00B0'\n  'g': '\\u00b1', // '\u00B1'\n  'h': '\\u2424', // '\u2424' (NL)\n  'i': '\\u240b', // '\u240B' (VT)\n  'j': '\\u2518', // '\u2518'\n  'k': '\\u2510', // '\u2510'\n  'l': '\\u250c', // '\u250C'\n  'm': '\\u2514', // '\u2514'\n  'n': '\\u253c', // '\u253C'\n  'o': '\\u23ba', // '\u23BA'\n  'p': '\\u23bb', // '\u23BB'\n  'q': '\\u2500', // '\u2500'\n  'r': '\\u23bc', // '\u23BC'\n  's': '\\u23bd', // '\u23BD'\n  't': '\\u251c', // '\u251C'\n  'u': '\\u2524', // '\u2524'\n  'v': '\\u2534', // '\u2534'\n  'w': '\\u252c', // '\u252C'\n  'x': '\\u2502', // '\u2502'\n  'y': '\\u2264', // '\u2264'\n  'z': '\\u2265', // '\u2265'\n  '{': '\\u03c0', // '\u03C0'\n  '|': '\\u2260', // '\u2260'\n  '}': '\\u00a3', // '\u00A3'\n  '~': '\\u00b7'  // '\u00B7'\n};\n\n/**\n * British character set\n * ESC (A\n * Reference: http://vt100.net/docs/vt220-rm/table2-5.html\n */\nCHARSETS['A'] = {\n  '#': '\u00A3'\n};\n\n/**\n * United States character set\n * ESC (B\n */\nCHARSETS['B'] = undefined;\n\n/**\n * Dutch character set\n * ESC (4\n * Reference: http://vt100.net/docs/vt220-rm/table2-6.html\n */\nCHARSETS['4'] = {\n  '#': '\u00A3',\n  '@': '\u00BE',\n  '[': 'ij',\n  '\\\\': '\u00BD',\n  ']': '|',\n  '{': '\u00A8',\n  '|': 'f',\n  '}': '\u00BC',\n  '~': '\u00B4'\n};\n\n/**\n * Finnish character set\n * ESC (C or ESC (5\n * Reference: http://vt100.net/docs/vt220-rm/table2-7.html\n */\nCHARSETS['C'] =\nCHARSETS['5'] = {\n  '[': '\u00C4',\n  '\\\\': '\u00D6',\n  ']': '\u00C5',\n  '^': '\u00DC',\n  '`': '\u00E9',\n  '{': '\u00E4',\n  '|': '\u00F6',\n  '}': '\u00E5',\n  '~': '\u00FC'\n};\n\n/**\n * French character set\n * ESC (R\n * Reference: http://vt100.net/docs/vt220-rm/table2-8.html\n */\nCHARSETS['R'] = {\n  '#': '\u00A3',\n  '@': '\u00E0',\n  '[': '\u00B0',\n  '\\\\': '\u00E7',\n  ']': '\u00A7',\n  '{': '\u00E9',\n  '|': '\u00F9',\n  '}': '\u00E8',\n  '~': '\u00A8'\n};\n\n/**\n * French Canadian character set\n * ESC (Q\n * Reference: http://vt100.net/docs/vt220-rm/table2-9.html\n */\nCHARSETS['Q'] = {\n  '@': '\u00E0',\n  '[': '\u00E2',\n  '\\\\': '\u00E7',\n  ']': '\u00EA',\n  '^': '\u00EE',\n  '`': '\u00F4',\n  '{': '\u00E9',\n  '|': '\u00F9',\n  '}': '\u00E8',\n  '~': '\u00FB'\n};\n\n/**\n * German character set\n * ESC (K\n * Reference: http://vt100.net/docs/vt220-rm/table2-10.html\n */\nCHARSETS['K'] = {\n  '@': '\u00A7',\n  '[': '\u00C4',\n  '\\\\': '\u00D6',\n  ']': '\u00DC',\n  '{': '\u00E4',\n  '|': '\u00F6',\n  '}': '\u00FC',\n  '~': '\u00DF'\n};\n\n/**\n * Italian character set\n * ESC (Y\n * Reference: http://vt100.net/docs/vt220-rm/table2-11.html\n */\nCHARSETS['Y'] = {\n  '#': '\u00A3',\n  '@': '\u00A7',\n  '[': '\u00B0',\n  '\\\\': '\u00E7',\n  ']': '\u00E9',\n  '`': '\u00F9',\n  '{': '\u00E0',\n  '|': '\u00F2',\n  '}': '\u00E8',\n  '~': '\u00EC'\n};\n\n/**\n * Norwegian/Danish character set\n * ESC (E or ESC (6\n * Reference: http://vt100.net/docs/vt220-rm/table2-12.html\n */\nCHARSETS['E'] =\nCHARSETS['6'] = {\n  '@': '\u00C4',\n  '[': '\u00C6',\n  '\\\\': '\u00D8',\n  ']': '\u00C5',\n  '^': '\u00DC',\n  '`': '\u00E4',\n  '{': '\u00E6',\n  '|': '\u00F8',\n  '}': '\u00E5',\n  '~': '\u00FC'\n};\n\n/**\n * Spanish character set\n * ESC (Z\n * Reference: http://vt100.net/docs/vt220-rm/table2-13.html\n */\nCHARSETS['Z'] = {\n  '#': '\u00A3',\n  '@': '\u00A7',\n  '[': '\u00A1',\n  '\\\\': '\u00D1',\n  ']': '\u00BF',\n  '{': '\u00B0',\n  '|': '\u00F1',\n  '}': '\u00E7'\n};\n\n/**\n * Swedish character set\n * ESC (H or ESC (7\n * Reference: http://vt100.net/docs/vt220-rm/table2-14.html\n */\nCHARSETS['H'] =\nCHARSETS['7'] = {\n  '@': '\u00C9',\n  '[': '\u00C4',\n  '\\\\': '\u00D6',\n  ']': '\u00C5',\n  '^': '\u00DC',\n  '`': '\u00E9',\n  '{': '\u00E4',\n  '|': '\u00F6',\n  '}': '\u00E5',\n  '~': '\u00FC'\n};\n\n/**\n * Swiss character set\n * ESC (=\n * Reference: http://vt100.net/docs/vt220-rm/table2-15.html\n */\nCHARSETS['='] = {\n  '#': '\u00F9',\n  '@': '\u00E0',\n  '[': '\u00E9',\n  '\\\\': '\u00E7',\n  ']': '\u00EA',\n  '^': '\u00EE',\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  '_': '\u00E8',\n  '`': '\u00F4',\n  '{': '\u00E4',\n  '|': '\u00F6',\n  '}': '\u00FC',\n  '~': '\u00FB'\n};\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * C0 control codes\n * See = https://en.wikipedia.org/wiki/C0_and_C1_control_codes\n */\nexport namespace C0 {\n  /** Null (Caret = ^@, C = \\0) */\n  export const NUL = '\\x00';\n  /** Start of Heading (Caret = ^A) */\n  export const SOH = '\\x01';\n  /** Start of Text (Caret = ^B) */\n  export const STX = '\\x02';\n  /** End of Text (Caret = ^C) */\n  export const ETX = '\\x03';\n  /** End of Transmission (Caret = ^D) */\n  export const EOT = '\\x04';\n  /** Enquiry (Caret = ^E) */\n  export const ENQ = '\\x05';\n  /** Acknowledge (Caret = ^F) */\n  export const ACK = '\\x06';\n  /** Bell (Caret = ^G, C = \\a) */\n  export const BEL = '\\x07';\n  /** Backspace (Caret = ^H, C = \\b) */\n  export const BS  = '\\x08';\n  /** Character Tabulation, Horizontal Tabulation (Caret = ^I, C = \\t) */\n  export const HT  = '\\x09';\n  /** Line Feed (Caret = ^J, C = \\n) */\n  export const LF  = '\\x0a';\n  /** Line Tabulation, Vertical Tabulation (Caret = ^K, C = \\v) */\n  export const VT  = '\\x0b';\n  /** Form Feed (Caret = ^L, C = \\f) */\n  export const FF  = '\\x0c';\n  /** Carriage Return (Caret = ^M, C = \\r) */\n  export const CR  = '\\x0d';\n  /** Shift Out (Caret = ^N) */\n  export const SO  = '\\x0e';\n  /** Shift In (Caret = ^O) */\n  export const SI  = '\\x0f';\n  /** Data Link Escape (Caret = ^P) */\n  export const DLE = '\\x10';\n  /** Device Control One (XON) (Caret = ^Q) */\n  export const DC1 = '\\x11';\n  /** Device Control Two (Caret = ^R) */\n  export const DC2 = '\\x12';\n  /** Device Control Three (XOFF) (Caret = ^S) */\n  export const DC3 = '\\x13';\n  /** Device Control Four (Caret = ^T) */\n  export const DC4 = '\\x14';\n  /** Negative Acknowledge (Caret = ^U) */\n  export const NAK = '\\x15';\n  /** Synchronous Idle (Caret = ^V) */\n  export const SYN = '\\x16';\n  /** End of Transmission Block (Caret = ^W) */\n  export const ETB = '\\x17';\n  /** Cancel (Caret = ^X) */\n  export const CAN = '\\x18';\n  /** End of Medium (Caret = ^Y) */\n  export const EM  = '\\x19';\n  /** Substitute (Caret = ^Z) */\n  export const SUB = '\\x1a';\n  /** Escape (Caret = ^[, C = \\e) */\n  export const ESC = '\\x1b';\n  /** File Separator (Caret = ^\\) */\n  export const FS  = '\\x1c';\n  /** Group Separator (Caret = ^]) */\n  export const GS  = '\\x1d';\n  /** Record Separator (Caret = ^^) */\n  export const RS  = '\\x1e';\n  /** Unit Separator (Caret = ^_) */\n  export const US  = '\\x1f';\n  /** Space */\n  export const SP  = '\\x20';\n  /** Delete (Caret = ^?) */\n  export const DEL = '\\x7f';\n}\n\n/**\n * C1 control codes\n * See = https://en.wikipedia.org/wiki/C0_and_C1_control_codes\n */\nexport namespace C1 {\n  /** padding character */\n  export const PAD = '\\x80';\n  /** High Octet Preset */\n  export const HOP = '\\x81';\n  /** Break Permitted Here */\n  export const BPH = '\\x82';\n  /** No Break Here */\n  export const NBH = '\\x83';\n  /** Index */\n  export const IND = '\\x84';\n  /** Next Line */\n  export const NEL = '\\x85';\n  /** Start of Selected Area */\n  export const SSA = '\\x86';\n  /** End of Selected Area */\n  export const ESA = '\\x87';\n  /** Horizontal Tabulation Set */\n  export const HTS = '\\x88';\n  /** Horizontal Tabulation With Justification */\n  export const HTJ = '\\x89';\n  /** Vertical Tabulation Set */\n  export const VTS = '\\x8a';\n  /** Partial Line Down */\n  export const PLD = '\\x8b';\n  /** Partial Line Up */\n  export const PLU = '\\x8c';\n  /** Reverse Index */\n  export const RI = '\\x8d';\n  /** Single-Shift 2 */\n  export const SS2 = '\\x8e';\n  /** Single-Shift 3 */\n  export const SS3 = '\\x8f';\n  /** Device Control String */\n  export const DCS = '\\x90';\n  /** Private Use 1 */\n  export const PU1 = '\\x91';\n  /** Private Use 2 */\n  export const PU2 = '\\x92';\n  /** Set Transmit State */\n  export const STS = '\\x93';\n  /** Destructive backspace, intended to eliminate ambiguity about meaning of BS. */\n  export const CCH = '\\x94';\n  /** Message Waiting */\n  export const MW = '\\x95';\n  /** Start of Protected Area */\n  export const SPA = '\\x96';\n  /** End of Protected Area */\n  export const EPA = '\\x97';\n  /** Start of String */\n  export const SOS = '\\x98';\n  /** Single Graphic Character Introducer */\n  export const SGCI = '\\x99';\n  /** Single Character Introducer */\n  export const SCI = '\\x9a';\n  /** Control Sequence Introducer */\n  export const CSI = '\\x9b';\n  /** String Terminator */\n  export const ST = '\\x9c';\n  /** Operating System Command */\n  export const OSC = '\\x9d';\n  /** Privacy Message */\n  export const PM = '\\x9e';\n  /** Application Program Command */\n  export const APC = '\\x9f';\n}\n", "/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * @license MIT\n */\n\nimport { IKeyboardEvent, IKeyboardResult, KeyboardResultType } from 'common/Types';\nimport { C0 } from 'common/data/EscapeSequences';\n\n// reg + shift key mappings for digits and special chars\nconst KEYCODE_KEY_MAPPINGS: { [key: number]: [string, string]} = {\n  // digits 0-9\n  48: ['0', ')'],\n  49: ['1', '!'],\n  50: ['2', '@'],\n  51: ['3', '#'],\n  52: ['4', '$'],\n  53: ['5', '%'],\n  54: ['6', '^'],\n  55: ['7', '&'],\n  56: ['8', '*'],\n  57: ['9', '('],\n\n  // special chars\n  186: [';', ':'],\n  187: ['=', '+'],\n  188: [',', '<'],\n  189: ['-', '_'],\n  190: ['.', '>'],\n  191: ['/', '?'],\n  192: ['`', '~'],\n  219: ['[', '{'],\n  220: ['\\\\', '|'],\n  221: [']', '}'],\n  222: ['\\'', '\"']\n};\n\nexport function evaluateKeyboardEvent(\n  ev: IKeyboardEvent,\n  applicationCursorMode: boolean,\n  isMac: boolean,\n  macOptionIsMeta: boolean\n): IKeyboardResult {\n  const result: IKeyboardResult = {\n    type: KeyboardResultType.SEND_KEY,\n    // Whether to cancel event propagation (NOTE: this may not be needed since the event is\n    // canceled at the end of keyDown\n    cancel: false,\n    // The new key even to emit\n    key: undefined\n  };\n  const modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n  switch (ev.keyCode) {\n    case 0:\n      if (ev.key === 'UIKeyInputUpArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OA';\n        } else {\n          result.key = C0.ESC + '[A';\n        }\n      }\n      else if (ev.key === 'UIKeyInputLeftArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OD';\n        } else {\n          result.key = C0.ESC + '[D';\n        }\n      }\n      else if (ev.key === 'UIKeyInputRightArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OC';\n        } else {\n          result.key = C0.ESC + '[C';\n        }\n      }\n      else if (ev.key === 'UIKeyInputDownArrow') {\n        if (applicationCursorMode) {\n          result.key = C0.ESC + 'OB';\n        } else {\n          result.key = C0.ESC + '[B';\n        }\n      }\n      break;\n    case 8:\n      // backspace\n      if (ev.shiftKey) {\n        result.key = C0.BS; // ^H\n        break;\n      } else if (ev.altKey) {\n        result.key = C0.ESC + C0.DEL; // \\e ^?\n        break;\n      }\n      result.key = C0.DEL; // ^?\n      break;\n    case 9:\n      // tab\n      if (ev.shiftKey) {\n        result.key = C0.ESC + '[Z';\n        break;\n      }\n      result.key = C0.HT;\n      result.cancel = true;\n      break;\n    case 13:\n      // return/enter\n      result.key = ev.altKey ? C0.ESC + C0.CR : C0.CR;\n      result.cancel = true;\n      break;\n    case 27:\n      // escape\n      result.key = C0.ESC;\n      if (ev.altKey) {\n        result.key = C0.ESC + C0.ESC;\n      }\n      result.cancel = true;\n      break;\n    case 37:\n      // left-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'D';\n        // HACK: Make Alt + left-arrow behave like Ctrl + left-arrow: move one word backwards\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (result.key === C0.ESC + '[1;3D') {\n          result.key = C0.ESC + (isMac ? 'b' : '[1;5D');\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OD';\n      } else {\n        result.key = C0.ESC + '[D';\n      }\n      break;\n    case 39:\n      // right-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'C';\n        // HACK: Make Alt + right-arrow behave like Ctrl + right-arrow: move one word forward\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (result.key === C0.ESC + '[1;3C') {\n          result.key = C0.ESC + (isMac ? 'f' : '[1;5C');\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OC';\n      } else {\n        result.key = C0.ESC + '[C';\n      }\n      break;\n    case 38:\n      // up-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'A';\n        // HACK: Make Alt + up-arrow behave like Ctrl + up-arrow\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (!isMac && result.key === C0.ESC + '[1;3A') {\n          result.key = C0.ESC + '[1;5A';\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OA';\n      } else {\n        result.key = C0.ESC + '[A';\n      }\n      break;\n    case 40:\n      // down-arrow\n      if (ev.metaKey) {\n        break;\n      }\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'B';\n        // HACK: Make Alt + down-arrow behave like Ctrl + down-arrow\n        // http://unix.stackexchange.com/a/108106\n        // macOS uses different escape sequences than linux\n        if (!isMac && result.key === C0.ESC + '[1;3B') {\n          result.key = C0.ESC + '[1;5B';\n        }\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OB';\n      } else {\n        result.key = C0.ESC + '[B';\n      }\n      break;\n    case 45:\n      // insert\n      if (!ev.shiftKey && !ev.ctrlKey) {\n        // <Ctrl> or <Shift> + <Insert> are used to\n        // copy-paste on some systems.\n        result.key = C0.ESC + '[2~';\n      }\n      break;\n    case 46:\n      // delete\n      if (modifiers) {\n        result.key = C0.ESC + '[3;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[3~';\n      }\n      break;\n    case 36:\n      // home\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'H';\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OH';\n      } else {\n        result.key = C0.ESC + '[H';\n      }\n      break;\n    case 35:\n      // end\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'F';\n      } else if (applicationCursorMode) {\n        result.key = C0.ESC + 'OF';\n      } else {\n        result.key = C0.ESC + '[F';\n      }\n      break;\n    case 33:\n      // page up\n      if (ev.shiftKey) {\n        result.type = KeyboardResultType.PAGE_UP;\n      } else {\n        result.key = C0.ESC + '[5~';\n      }\n      break;\n    case 34:\n      // page down\n      if (ev.shiftKey) {\n        result.type = KeyboardResultType.PAGE_DOWN;\n      } else {\n        result.key = C0.ESC + '[6~';\n      }\n      break;\n    case 112:\n      // F1-F12\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'P';\n      } else {\n        result.key = C0.ESC + 'OP';\n      }\n      break;\n    case 113:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n      } else {\n        result.key = C0.ESC + 'OQ';\n      }\n      break;\n    case 114:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'R';\n      } else {\n        result.key = C0.ESC + 'OR';\n      }\n      break;\n    case 115:\n      if (modifiers) {\n        result.key = C0.ESC + '[1;' + (modifiers + 1) + 'S';\n      } else {\n        result.key = C0.ESC + 'OS';\n      }\n      break;\n    case 116:\n      if (modifiers) {\n        result.key = C0.ESC + '[15;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[15~';\n      }\n      break;\n    case 117:\n      if (modifiers) {\n        result.key = C0.ESC + '[17;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[17~';\n      }\n      break;\n    case 118:\n      if (modifiers) {\n        result.key = C0.ESC + '[18;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[18~';\n      }\n      break;\n    case 119:\n      if (modifiers) {\n        result.key = C0.ESC + '[19;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[19~';\n      }\n      break;\n    case 120:\n      if (modifiers) {\n        result.key = C0.ESC + '[20;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[20~';\n      }\n      break;\n    case 121:\n      if (modifiers) {\n        result.key = C0.ESC + '[21;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[21~';\n      }\n      break;\n    case 122:\n      if (modifiers) {\n        result.key = C0.ESC + '[23;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[23~';\n      }\n      break;\n    case 123:\n      if (modifiers) {\n        result.key = C0.ESC + '[24;' + (modifiers + 1) + '~';\n      } else {\n        result.key = C0.ESC + '[24~';\n      }\n      break;\n    default:\n      // a-z and space\n      if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n        if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n          result.key = String.fromCharCode(ev.keyCode - 64);\n        } else if (ev.keyCode === 32) {\n          result.key = C0.NUL;\n        } else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n          // escape, file sep, group sep, record sep, unit sep\n          result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n        } else if (ev.keyCode === 56) {\n          result.key = C0.DEL;\n        } else if (ev.keyCode === 219) {\n          result.key = C0.ESC;\n        } else if (ev.keyCode === 220) {\n          result.key = C0.FS;\n        } else if (ev.keyCode === 221) {\n          result.key = C0.GS;\n        }\n      } else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n        // On macOS this is a third level shift when !macOptionIsMeta. Use <Esc> instead.\n        const keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n        const key = keyMapping?.[!ev.shiftKey ? 0 : 1];\n        if (key) {\n          result.key = C0.ESC + key;\n        } else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n          const keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n          result.key = C0.ESC + String.fromCharCode(keyCode);\n        }\n      } else if (isMac && !ev.altKey && !ev.ctrlKey && !ev.shiftKey && ev.metaKey) {\n        if (ev.keyCode === 65) { // cmd + a\n          result.type = KeyboardResultType.SELECT_ALL;\n        }\n      } else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n        // Include only keys that that result in a _single_ character; don't include num lock, volume up, etc.\n        result.key = ev.key;\n      } else if (ev.key && ev.ctrlKey) {\n        if (ev.key === '_') { // ^_\n          result.key = C0.US;\n        }\n      }\n      break;\n  }\n\n  return result;\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * Polyfill - Convert UTF32 codepoint into JS string.\n * Note: The built-in String.fromCodePoint happens to be much slower\n *       due to additional sanity checks. We can avoid them since\n *       we always operate on legal UTF32 (granted by the input decoders)\n *       and use this faster version instead.\n */\nexport function stringFromCodePoint(codePoint: number): string {\n  if (codePoint > 0xFFFF) {\n    codePoint -= 0x10000;\n    return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n  }\n  return String.fromCharCode(codePoint);\n}\n\n/**\n * Convert UTF32 char codes into JS string.\n * Basically the same as `stringFromCodePoint` but for multiple codepoints\n * in a loop (which is a lot faster).\n */\nexport function utf32ToString(data: Uint32Array, start: number = 0, end: number = data.length): string {\n  let result = '';\n  for (let i = start; i < end; ++i) {\n    let codepoint = data[i];\n    if (codepoint > 0xFFFF) {\n      // JS strings are encoded as UTF16, thus a non BMP codepoint gets converted into a surrogate pair\n      // conversion rules:\n      //  - subtract 0x10000 from code point, leaving a 20 bit number\n      //  - add high 10 bits to 0xD800  --> first surrogate\n      //  - add low 10 bits to 0xDC00   --> second surrogate\n      codepoint -= 0x10000;\n      result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n    } else {\n      result += String.fromCharCode(codepoint);\n    }\n  }\n  return result;\n}\n\n/**\n * StringToUtf32 - decodes UTF16 sequences into UTF32 codepoints.\n * To keep the decoder in line with JS strings it handles single surrogates as UCS2.\n */\nexport class StringToUtf32 {\n  private _interim: number = 0;\n\n  /**\n   * Clears interim and resets decoder to clean state.\n   */\n  public clear(): void {\n    this._interim = 0;\n  }\n\n  /**\n   * Decode JS string to UTF32 codepoints.\n   * The methods assumes stream input and will store partly transmitted\n   * surrogate pairs and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided input data does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: string, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let startPos = 0;\n\n    // handle leftover surrogate high\n    if (this._interim) {\n      const second = input.charCodeAt(startPos++);\n      if (0xDC00 <= second && second <= 0xDFFF) {\n        target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n      } else {\n        // illegal codepoint (USC2 handling)\n        target[size++] = this._interim;\n        target[size++] = second;\n      }\n      this._interim = 0;\n    }\n\n    for (let i = startPos; i < length; ++i) {\n      const code = input.charCodeAt(i);\n      // surrogate pair first\n      if (0xD800 <= code && code <= 0xDBFF) {\n        if (++i >= length) {\n          this._interim = code;\n          return size;\n        }\n        const second = input.charCodeAt(i);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        } else {\n          // illegal codepoint (USC2 handling)\n          target[size++] = code;\n          target[size++] = second;\n        }\n        continue;\n      }\n      if (code === 0xFEFF) {\n        // BOM\n        continue;\n      }\n      target[size++] = code;\n    }\n    return size;\n  }\n}\n\n/**\n * Utf8Decoder - decodes UTF8 byte sequences into UTF32 codepoints.\n */\nexport class Utf8ToUtf32 {\n  public interim: Uint8Array = new Uint8Array(3);\n\n  /**\n   * Clears interim bytes and resets decoder to clean state.\n   */\n  public clear(): void {\n    this.interim.fill(0);\n  }\n\n  /**\n   * Decodes UTF8 byte sequences in `input` to UTF32 codepoints in `target`.\n   * The methods assumes stream input and will store partly transmitted bytes\n   * and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided data chunk does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: Uint8Array, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let byte1: number;\n    let byte2: number;\n    let byte3: number;\n    let byte4: number;\n    let codepoint = 0;\n    let startPos = 0;\n\n    // handle leftover bytes\n    if (this.interim[0]) {\n      let discardInterim = false;\n      let cp = this.interim[0];\n      cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n      let pos = 0;\n      let tmp: number;\n      while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n        cp <<= 6;\n        cp |= tmp;\n      }\n      // missing bytes - read ahead from input\n      const type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n      const missing = type - pos;\n      while (startPos < missing) {\n        if (startPos >= length) {\n          return 0;\n        }\n        tmp = input[startPos++];\n        if ((tmp & 0xC0) !== 0x80) {\n          // wrong continuation, discard interim bytes completely\n          startPos--;\n          discardInterim = true;\n          break;\n        } else {\n          // need to save so we can continue short inputs in next call\n          this.interim[pos++] = tmp;\n          cp <<= 6;\n          cp |= tmp & 0x3F;\n        }\n      }\n      if (!discardInterim) {\n        // final test is type dependent\n        if (type === 2) {\n          if (cp < 0x80) {\n            // wrong starter byte\n            startPos--;\n          } else {\n            target[size++] = cp;\n          }\n        } else if (type === 3) {\n          if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF) || cp === 0xFEFF) {\n            // illegal codepoint or BOM\n          } else {\n            target[size++] = cp;\n          }\n        } else {\n          if (cp < 0x010000 || cp > 0x10FFFF) {\n            // illegal codepoint\n          } else {\n            target[size++] = cp;\n          }\n        }\n      }\n      this.interim.fill(0);\n    }\n\n    // loop through input\n    const fourStop = length - 4;\n    let i = startPos;\n    while (i < length) {\n      /**\n       * ASCII shortcut with loop unrolled to 4 consecutive ASCII chars.\n       * This is a compromise between speed gain for ASCII\n       * and penalty for non ASCII:\n       * For best ASCII performance the char should be stored directly into target,\n       * but even a single attempt to write to target and compare afterwards\n       * penalizes non ASCII really bad (-50%), thus we load the char into byteX first,\n       * which reduces ASCII performance by ~15%.\n       * This trial for ASCII reduces non ASCII performance by ~10% which seems acceptible\n       * compared to the gains.\n       * Note that this optimization only takes place for 4 consecutive ASCII chars,\n       * for any shorter it bails out. Worst case - all 4 bytes being read but\n       * thrown away due to the last being a non ASCII char (-10% performance).\n       */\n      while (i < fourStop\n        && !((byte1 = input[i]) & 0x80)\n        && !((byte2 = input[i + 1]) & 0x80)\n        && !((byte3 = input[i + 2]) & 0x80)\n        && !((byte4 = input[i + 3]) & 0x80))\n      {\n        target[size++] = byte1;\n        target[size++] = byte2;\n        target[size++] = byte3;\n        target[size++] = byte4;\n        i += 4;\n      }\n\n      // reread byte1\n      byte1 = input[i++];\n\n      // 1 byte\n      if (byte1 < 0x80) {\n        target[size++] = byte1;\n\n        // 2 bytes\n      } else if ((byte1 & 0xE0) === 0xC0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n        if (codepoint < 0x80) {\n          // wrong starter byte\n          i--;\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 3 bytes\n      } else if ((byte1 & 0xF0) === 0xE0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n        if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF) || codepoint === 0xFEFF) {\n          // illegal codepoint or BOM, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 4 bytes\n      } else if ((byte1 & 0xF8) === 0xF0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          this.interim[2] = byte3;\n          return size;\n        }\n        byte4 = input[i++];\n        if ((byte4 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n        if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n          // illegal codepoint, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n      } else {\n        // illegal byte, just skip\n      }\n    }\n    return size;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IUnicodeVersionProvider } from 'common/services/Services';\nimport { fill } from 'common/TypedArrayUtils';\n\ntype CharWidth = 0 | 1 | 2;\n\nconst BMP_COMBINING = [\n  [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n  [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n  [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n  [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n  [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n  [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n  [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n  [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n  [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n  [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n  [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n  [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n  [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n  [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n  [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n  [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n  [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n  [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n  [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n  [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n  [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n  [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n  [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n  [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n  [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n  [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n  [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n  [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n  [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n  [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n  [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n  [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n  [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n  [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n  [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n  [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n  [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n  [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n  [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n  [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n  [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n  [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n  [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n];\nconst HIGH_COMBINING = [\n  [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n  [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n  [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n  [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n  [0xE0100, 0xE01EF]\n];\n\n// BMP lookup table, lazy initialized during first addon loading\nlet table: Uint8Array;\n\nfunction bisearch(ucs: number, data: number[][]): boolean {\n  let min = 0;\n  let max = data.length - 1;\n  let mid;\n  if (ucs < data[0][0] || ucs > data[max][1]) {\n    return false;\n  }\n  while (max >= min) {\n    mid = (min + max) >> 1;\n    if (ucs > data[mid][1]) {\n      min = mid + 1;\n    } else if (ucs < data[mid][0]) {\n      max = mid - 1;\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport class UnicodeV6 implements IUnicodeVersionProvider {\n  public readonly version = '6';\n\n  constructor() {\n    // init lookup table once\n    if (!table) {\n      table = new Uint8Array(65536);\n      fill(table, 1);\n      table[0] = 0;\n      // control chars\n      fill(table, 0, 1, 32);\n      fill(table, 0, 0x7f, 0xa0);\n\n      // apply wide char rules first\n      // wide chars\n      fill(table, 2, 0x1100, 0x1160);\n      table[0x2329] = 2;\n      table[0x232a] = 2;\n      fill(table, 2, 0x2e80, 0xa4d0);\n      table[0x303f] = 1;  // wrongly in last line\n\n      fill(table, 2, 0xac00, 0xd7a4);\n      fill(table, 2, 0xf900, 0xfb00);\n      fill(table, 2, 0xfe10, 0xfe1a);\n      fill(table, 2, 0xfe30, 0xfe70);\n      fill(table, 2, 0xff00, 0xff61);\n      fill(table, 2, 0xffe0, 0xffe7);\n\n      // apply combining last to ensure we overwrite\n      // wrongly wide set chars:\n      //    the original algo evals combining first and falls\n      //    through to wide check so we simply do here the opposite\n      // combining 0\n      for (let r = 0; r < BMP_COMBINING.length; ++r) {\n        fill(table, 0, BMP_COMBINING[r][0], BMP_COMBINING[r][1] + 1);\n      }\n    }\n  }\n\n  public wcwidth(num: number): CharWidth {\n    if (num < 32) return 0;\n    if (num < 127) return 1;\n    if (num < 65536) return table[num] as CharWidth;\n    if (bisearch(num, HIGH_COMBINING)) return 0;\n    if ((num >= 0x20000 && num <= 0x2fffd) || (num >= 0x30000 && num <= 0x3fffd)) return 2;\n    return 1;\n  }\n}\n", "\n/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ndeclare const setTimeout: (handler: () => void, timeout?: number) => void;\n\n/**\n * Safety watermark to avoid memory exhaustion and browser engine crash on fast data input.\n * Enable flow control to avoid this limit and make sure that your backend correctly\n * propagates this to the underlying pty. (see docs for further instructions)\n * Since this limit is meant as a safety parachute to prevent browser crashs,\n * it is set to a very high number. Typically xterm.js gets unresponsive with\n * a 100 times lower number (>500 kB).\n */\nconst DISCARD_WATERMARK = 50000000; // ~50 MB\n\n/**\n * The max number of ms to spend on writes before allowing the renderer to\n * catch up with a 0ms setTimeout. A value of < 33 to keep us close to\n * 30fps, and a value of < 16 to try to run at 60fps. Of course, the real FPS\n * depends on the time it takes for the renderer to draw the frame.\n */\nconst WRITE_TIMEOUT_MS = 12;\n\n/**\n * Threshold of max held chunks in the write buffer, that were already processed.\n * This is a tradeoff between extensive write buffer shifts (bad runtime) and high\n * memory consumption by data thats not used anymore.\n */\nconst WRITE_BUFFER_LENGTH_THRESHOLD = 50;\n\n// queueMicrotask polyfill for nodejs < v11\nconst qmt: (cb: () => void) => void = (typeof queueMicrotask === 'undefined')\n  ? (cb: () => void) => { Promise.resolve().then(cb); }\n  : queueMicrotask;\n\n\nexport class WriteBuffer {\n  private _writeBuffer: (string | Uint8Array)[] = [];\n  private _callbacks: ((() => void) | undefined)[] = [];\n  private _pendingData = 0;\n  private _bufferOffset = 0;\n  private _isSyncWriting = false;\n  private _syncCalls = 0;\n\n  constructor(private _action: (data: string | Uint8Array, promiseResult?: boolean) => void | Promise<boolean>) { }\n\n  /**\n   * @deprecated Unreliable, to be removed soon.\n   */\n  public writeSync(data: string | Uint8Array, maxSubsequentCalls?: number): void {\n    // stop writeSync recursions with maxSubsequentCalls argument\n    // This is dangerous to use as it will lose the current data chunk\n    // and return immediately.\n    if (maxSubsequentCalls !== undefined && this._syncCalls > maxSubsequentCalls) {\n      // comment next line if a whole loop block should only contain x `writeSync` calls\n      // (total flat vs. deep nested limit)\n      this._syncCalls = 0;\n      return;\n    }\n    // append chunk to buffer\n    this._pendingData += data.length;\n    this._writeBuffer.push(data);\n    this._callbacks.push(undefined);\n\n    // increase recursion counter\n    this._syncCalls++;\n    // exit early if another writeSync loop is active\n    if (this._isSyncWriting) {\n      return;\n    }\n    this._isSyncWriting = true;\n\n    // force sync processing on pending data chunks to avoid in-band data scrambling\n    // does the same as innerWrite but without event loop\n    // we have to do it here as single loop steps to not corrupt loop subject\n    // by another writeSync call triggered from _action\n    let chunk: string | Uint8Array | undefined;\n    while (chunk = this._writeBuffer.shift()) {\n      this._action(chunk);\n      const cb = this._callbacks.shift();\n      if (cb) cb();\n    }\n    // reset to avoid reprocessing of chunks with scheduled innerWrite call\n    // stopping scheduled innerWrite by offset > length condition\n    this._pendingData = 0;\n    this._bufferOffset = 0x7FFFFFFF;\n\n    // allow another writeSync to loop\n    this._isSyncWriting = false;\n    this._syncCalls = 0;\n  }\n\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    if (this._pendingData > DISCARD_WATERMARK) {\n      throw new Error('write data discarded, use flow control to avoid losing data');\n    }\n\n    // schedule chunk processing for next event loop run\n    if (!this._writeBuffer.length) {\n      this._bufferOffset = 0;\n      setTimeout(() => this._innerWrite());\n    }\n\n    this._pendingData += data.length;\n    this._writeBuffer.push(data);\n    this._callbacks.push(callback);\n  }\n\n  /**\n   * Inner write call, that enters the sliced chunk processing by timing.\n   *\n   * `lastTime` indicates, when the last _innerWrite call had started.\n   * It is used to aggregate async handler execution under a timeout constraint\n   * effectively lowering the redrawing needs, schematically:\n   *\n   *   macroTask _innerWrite:\n   *     if (Date.now() - (lastTime | 0) < WRITE_TIMEOUT_MS):\n   *        schedule microTask _innerWrite(lastTime)\n   *     else:\n   *        schedule macroTask _innerWrite(0)\n   *\n   *   overall execution order on task queues:\n   *\n   *   macrotasks:  [...]  -->  _innerWrite(0)  -->  [...]  -->  screenUpdate  -->  [...]\n   *         m  t:                    |\n   *         i  a:                  [...]\n   *         c  s:                    |\n   *         r  k:              while < timeout:\n   *         o  s:                _innerWrite(timeout)\n   *\n   * `promiseResult` depicts the promise resolve value of an async handler.\n   * This value gets carried forward through all saved stack states of the\n   * paused parser for proper continuation.\n   *\n   * Note, for pure sync code `lastTime` and `promiseResult` have no meaning.\n   */\n  protected _innerWrite(lastTime: number = 0, promiseResult: boolean = true): void {\n    const startTime = lastTime || Date.now();\n    while (this._writeBuffer.length > this._bufferOffset) {\n      const data = this._writeBuffer[this._bufferOffset];\n      const result = this._action(data, promiseResult);\n      if (result) {\n        /**\n         * If we get a promise as return value, we re-schedule the continuation\n         * as thenable on the promise and exit right away.\n         *\n         * The exit here means, that we block input processing at the current active chunk,\n         * the exact execution position within the chunk is preserved by the saved\n         * stack content in InputHandler and EscapeSequenceParser.\n         *\n         * Resuming happens automatically from that saved stack state.\n         * Also the resolved promise value is passed along the callstack to\n         * `EscapeSequenceParser.parse` to correctly resume the stopped handler loop.\n         *\n         * Exceptions on async handlers will be logged to console async, but do not interrupt\n         * the input processing (continues with next handler at the current input position).\n         */\n\n        /**\n         * If a promise takes long to resolve, we should schedule continuation behind setTimeout.\n         * This might already be too late, if our .then enters really late (executor + prev thens took very long).\n         * This cannot be solved here for the handler itself (it is the handlers responsibility to slice hard work),\n         * but we can at least schedule a screen update as we gain control.\n         */\n        const continuation: (r: boolean) => void = (r: boolean) => Date.now() - startTime >= WRITE_TIMEOUT_MS\n          ? setTimeout(() => this._innerWrite(0, r))\n          : this._innerWrite(startTime, r);\n\n        /**\n         * Optimization considerations:\n         * The continuation above favors FPS over throughput by eval'ing `startTime` on resolve.\n         * This might schedule too many screen updates with bad throughput drops (in case a slow\n         * resolving handler sliced its work properly behind setTimeout calls). We cannot spot\n         * this condition here, also the renderer has no way to spot nonsense updates either.\n         * FIXME: A proper fix for this would track the FPS at the renderer entry level separately.\n         *\n         * If favoring of FPS shows bad throughtput impact, use the following instead. It favors\n         * throughput by eval'ing `startTime` upfront pulling at least one more chunk into the\n         * current microtask queue (executed before setTimeout).\n         */\n        // const continuation: (r: boolean) => void = Date.now() - startTime >= WRITE_TIMEOUT_MS\n        //   ? r => setTimeout(() => this._innerWrite(0, r))\n        //   : r => this._innerWrite(startTime, r);\n\n        // Handle exceptions synchronously to current band position, idea:\n        // 1. spawn a single microtask which we allow to throw hard\n        // 2. spawn a promise immediately resolving to `true`\n        // (executed on the same queue, thus properly aligned before continuation happens)\n        result.catch(err => {\n          qmt(() => {throw err;});\n          return Promise.resolve(false);\n        }).then(continuation);\n        return;\n      }\n\n      const cb = this._callbacks[this._bufferOffset];\n      if (cb) cb();\n      this._bufferOffset++;\n      this._pendingData -= data.length;\n\n      if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n        break;\n      }\n    }\n    if (this._writeBuffer.length > this._bufferOffset) {\n      // Allow renderer to catch up before processing the next batch\n      // trim already processed chunks if we are above threshold\n      if (this._bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n        this._writeBuffer = this._writeBuffer.slice(this._bufferOffset);\n        this._callbacks = this._callbacks.slice(this._bufferOffset);\n        this._bufferOffset = 0;\n      }\n      setTimeout(() => this._innerWrite());\n    } else {\n      this._writeBuffer.length = 0;\n      this._callbacks.length = 0;\n      this._pendingData = 0;\n      this._bufferOffset = 0;\n    }\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n\n// 'rgb:' rule - matching: r/g/b | rr/gg/bb | rrr/ggg/bbb | rrrr/gggg/bbbb (hex digits)\nconst RGB_REX = /^([\\da-f]{1})\\/([\\da-f]{1})\\/([\\da-f]{1})$|^([\\da-f]{2})\\/([\\da-f]{2})\\/([\\da-f]{2})$|^([\\da-f]{3})\\/([\\da-f]{3})\\/([\\da-f]{3})$|^([\\da-f]{4})\\/([\\da-f]{4})\\/([\\da-f]{4})$/;\n// '#...' rule - matching any hex digits\nconst HASH_REX = /^[\\da-f]+$/;\n\n/**\n * Parse color spec to RGB values (8 bit per channel).\n * See `man xparsecolor` for details about certain format specifications.\n *\n * Supported formats:\n * - rgb:<red>/<green>/<blue> with <red>, <green>, <blue> in h | hh | hhh | hhhh\n * - #RGB, #RRGGBB, #RRRGGGBBB, #RRRRGGGGBBBB\n *\n * All other formats like rgbi: or device-independent string specifications\n * with float numbering are not supported.\n */\nexport function parseColor(data: string): [number, number, number] | undefined {\n  if (!data) return;\n  // also handle uppercases\n  let low = data.toLowerCase();\n  if (low.indexOf('rgb:') === 0) {\n    // 'rgb:' specifier\n    low = low.slice(4);\n    const m = RGB_REX.exec(low);\n    if (m) {\n      const base = m[1] ? 15 : m[4] ? 255 : m[7] ? 4095 : 65535;\n      return [\n        Math.round(parseInt(m[1] || m[4] || m[7] || m[10], 16) / base * 255),\n        Math.round(parseInt(m[2] || m[5] || m[8] || m[11], 16) / base * 255),\n        Math.round(parseInt(m[3] || m[6] || m[9] || m[12], 16) / base * 255)\n      ];\n    }\n  } else if (low.indexOf('#') === 0) {\n    // '#' specifier\n    low = low.slice(1);\n    if (HASH_REX.exec(low) && [3, 6, 9, 12].includes(low.length)) {\n      const adv = low.length / 3;\n      const result: [number, number, number] = [0, 0, 0];\n      for (let i = 0; i < 3; ++i) {\n        const c = parseInt(low.slice(adv * i, adv * i + adv), 16);\n        result[i] = adv === 1 ? c << 4 : adv === 2 ? c : adv === 3 ? c >> 4 : c >> 8;\n      }\n      return result;\n    }\n  }\n\n  // Named colors are currently not supported due to the large addition to the xterm.js bundle size\n  // they would add. In order to support named colors, we would need some way of optionally loading\n  // additional payloads so startup/download time is not bloated (see #3530).\n}\n\n// pad hex output to requested bit width\nfunction pad(n: number, bits: number): string {\n  const s = n.toString(16);\n  const s2 = s.length < 2 ? '0' + s : s;\n  switch (bits) {\n    case 4:\n      return s[0];\n    case 8:\n      return s2;\n    case 12:\n      return (s2 + s2).slice(0, 3);\n    default:\n      return s2 + s2;\n  }\n}\n\n/**\n * Convert a given color to rgb:../../.. string of `bits` depth.\n */\nexport function toRgbString(color: [number, number, number], bits: number = 16): string {\n  const [r, g, b] = color;\n  return `rgb:${pad(r, bits)}/${pad(g, bits)}/${pad(b, bits)}`;\n}\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * Internal states of EscapeSequenceParser.\n */\nexport const enum ParserState {\n  GROUND = 0,\n  ESCAPE = 1,\n  ESCAPE_INTERMEDIATE = 2,\n  CSI_ENTRY = 3,\n  CSI_PARAM = 4,\n  CSI_INTERMEDIATE = 5,\n  CSI_IGNORE = 6,\n  SOS_PM_APC_STRING = 7,\n  OSC_STRING = 8,\n  DCS_ENTRY = 9,\n  DCS_PARAM = 10,\n  DCS_IGNORE = 11,\n  DCS_INTERMEDIATE = 12,\n  DCS_PASSTHROUGH = 13\n}\n\n/**\n* Internal actions of EscapeSequenceParser.\n*/\nexport const enum ParserAction {\n  IGNORE = 0,\n  ERROR = 1,\n  PRINT = 2,\n  EXECUTE = 3,\n  OSC_START = 4,\n  OSC_PUT = 5,\n  OSC_END = 6,\n  CSI_DISPATCH = 7,\n  PARAM = 8,\n  COLLECT = 9,\n  ESC_DISPATCH = 10,\n  CLEAR = 11,\n  DCS_HOOK = 12,\n  DCS_PUT = 13,\n  DCS_UNHOOK = 14\n}\n\n/**\n * Internal states of OscParser.\n */\nexport const enum OscState {\n  START = 0,\n  ID = 1,\n  PAYLOAD = 2,\n  ABORT = 3\n}\n\n// payload limit for OSC and DCS\nexport const PAYLOAD_LIMIT = 10000000;\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDisposable } from 'common/Types';\nimport { IDcsHandler, IParams, IHandlerCollection, IDcsParser, DcsFallbackHandlerType, ISubParserStackState } from 'common/parser/Types';\nimport { utf32ToString } from 'common/input/TextDecoder';\nimport { Params } from 'common/parser/Params';\nimport { PAYLOAD_LIMIT } from 'common/parser/Constants';\n\nconst EMPTY_HANDLERS: IDcsHandler[] = [];\n\nexport class DcsParser implements IDcsParser {\n  private _handlers: IHandlerCollection<IDcsHandler> = Object.create(null);\n  private _active: IDcsHandler[] = EMPTY_HANDLERS;\n  private _ident: number = 0;\n  private _handlerFb: DcsFallbackHandlerType = () => { };\n  private _stack: ISubParserStackState = {\n    paused: false,\n    loopPosition: 0,\n    fallThrough: false\n  };\n\n  public dispose(): void {\n    this._handlers = Object.create(null);\n    this._handlerFb = () => { };\n    this._active = EMPTY_HANDLERS;\n  }\n\n  public registerHandler(ident: number, handler: IDcsHandler): IDisposable {\n    if (this._handlers[ident] === undefined) {\n      this._handlers[ident] = [];\n    }\n    const handlerList = this._handlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n\n  public clearHandler(ident: number): void {\n    if (this._handlers[ident]) delete this._handlers[ident];\n  }\n\n  public setHandlerFallback(handler: DcsFallbackHandlerType): void {\n    this._handlerFb = handler;\n  }\n\n  public reset(): void {\n    // force cleanup leftover handlers\n    if (this._active.length) {\n      for (let j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {\n        this._active[j].unhook(false);\n      }\n    }\n    this._stack.paused = false;\n    this._active = EMPTY_HANDLERS;\n    this._ident = 0;\n  }\n\n  public hook(ident: number, params: IParams): void {\n    // always reset leftover handlers\n    this.reset();\n    this._ident = ident;\n    this._active = this._handlers[ident] || EMPTY_HANDLERS;\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'HOOK', params);\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].hook(params);\n      }\n    }\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'PUT', utf32ToString(data, start, end));\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].put(data, start, end);\n      }\n    }\n  }\n\n  public unhook(success: boolean, promiseResult: boolean = true): void | Promise<boolean> {\n    if (!this._active.length) {\n      this._handlerFb(this._ident, 'UNHOOK', success);\n    } else {\n      let handlerResult: boolean | Promise<boolean> = false;\n      let j = this._active.length - 1;\n      let fallThrough = false;\n      if (this._stack.paused) {\n        j = this._stack.loopPosition - 1;\n        handlerResult = promiseResult;\n        fallThrough = this._stack.fallThrough;\n        this._stack.paused = false;\n      }\n      if (!fallThrough && handlerResult === false) {\n        for (; j >= 0; j--) {\n          handlerResult = this._active[j].unhook(success);\n          if (handlerResult === true) {\n            break;\n          } else if (handlerResult instanceof Promise) {\n            this._stack.paused = true;\n            this._stack.loopPosition = j;\n            this._stack.fallThrough = false;\n            return handlerResult;\n          }\n        }\n        j--;\n      }\n      // cleanup left over handlers (fallThrough for async)\n      for (; j >= 0; j--) {\n        handlerResult = this._active[j].unhook(false);\n        if (handlerResult instanceof Promise) {\n          this._stack.paused = true;\n          this._stack.loopPosition = j;\n          this._stack.fallThrough = true;\n          return handlerResult;\n        }\n      }\n    }\n    this._active = EMPTY_HANDLERS;\n    this._ident = 0;\n  }\n}\n\n// predefine empty params as [0] (ZDM)\nconst EMPTY_PARAMS = new Params();\nEMPTY_PARAMS.addParam(0);\n\n/**\n * Convenient class to create a DCS handler from a single callback function.\n * Note: The payload is currently limited to 50 MB (hardcoded).\n */\nexport class DcsHandler implements IDcsHandler {\n  private _data = '';\n  private _params: IParams = EMPTY_PARAMS;\n  private _hitLimit: boolean = false;\n\n  constructor(private _handler: (data: string, params: IParams) => boolean | Promise<boolean>) { }\n\n  public hook(params: IParams): void {\n    // since we need to preserve params until `unhook`, we have to clone it\n    // (only borrowed from parser and spans multiple parser states)\n    // perf optimization:\n    // clone only, if we have non empty params, otherwise stick with default\n    this._params = (params.length > 1 || params.params[0]) ? params.clone() : EMPTY_PARAMS;\n    this._data = '';\n    this._hitLimit = false;\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._hitLimit) {\n      return;\n    }\n    this._data += utf32ToString(data, start, end);\n    if (this._data.length > PAYLOAD_LIMIT) {\n      this._data = '';\n      this._hitLimit = true;\n    }\n  }\n\n  public unhook(success: boolean): boolean | Promise<boolean> {\n    let ret: boolean | Promise<boolean> = false;\n    if (this._hitLimit) {\n      ret = false;\n    } else if (success) {\n      ret = this._handler(this._data, this._params);\n      if (ret instanceof Promise) {\n        // need to hold data and params until `ret` got resolved\n        // dont care for errors, data will be freed anyway on next start\n        return ret.then(res => {\n          this._params = EMPTY_PARAMS;\n          this._data = '';\n          this._hitLimit = false;\n          return res;\n        });\n      }\n    }\n    this._params = EMPTY_PARAMS;\n    this._data = '';\n    this._hitLimit = false;\n    return ret;\n  }\n}\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IParsingState, IDcsHandler, IEscapeSequenceParser, IParams, IOscHandler, IHandlerCollection, CsiHandlerType, OscFallbackHandlerType, IOscParser, EscHandlerType, IDcsParser, DcsFallbackHandlerType, IFunctionIdentifier, ExecuteFallbackHandlerType, CsiFallbackHandlerType, EscFallbackHandlerType, PrintHandlerType, PrintFallbackHandlerType, ExecuteHandlerType, IParserStackState, ParserStackType, ResumableHandlersType } from 'common/parser/Types';\nimport { ParserState, ParserAction } from 'common/parser/Constants';\nimport { Disposable } from 'common/Lifecycle';\nimport { IDisposable } from 'common/Types';\nimport { fill } from 'common/TypedArrayUtils';\nimport { Params } from 'common/parser/Params';\nimport { OscParser } from 'common/parser/OscParser';\nimport { DcsParser } from 'common/parser/DcsParser';\n\n/**\n * Table values are generated like this:\n *    index:  currentState << TableValue.INDEX_STATE_SHIFT | charCode\n *    value:  action << TableValue.TRANSITION_ACTION_SHIFT | nextState\n */\nconst enum TableAccess {\n  TRANSITION_ACTION_SHIFT = 4,\n  TRANSITION_STATE_MASK = 15,\n  INDEX_STATE_SHIFT = 8\n}\n\n/**\n * Transition table for EscapeSequenceParser.\n */\nexport class TransitionTable {\n  public table: Uint8Array;\n\n  constructor(length: number) {\n    this.table = new Uint8Array(length);\n  }\n\n  /**\n   * Set default transition.\n   * @param action default action\n   * @param next default next state\n   */\n  public setDefault(action: ParserAction, next: ParserState): void {\n    fill(this.table, action << TableAccess.TRANSITION_ACTION_SHIFT | next);\n  }\n\n  /**\n   * Add a transition to the transition table.\n   * @param code input character code\n   * @param state current parser state\n   * @param action parser action to be done\n   * @param next next parser state\n   */\n  public add(code: number, state: ParserState, action: ParserAction, next: ParserState): void {\n    this.table[state << TableAccess.INDEX_STATE_SHIFT | code] = action << TableAccess.TRANSITION_ACTION_SHIFT | next;\n  }\n\n  /**\n   * Add transitions for multiple input character codes.\n   * @param codes input character code array\n   * @param state current parser state\n   * @param action parser action to be done\n   * @param next next parser state\n   */\n  public addMany(codes: number[], state: ParserState, action: ParserAction, next: ParserState): void {\n    for (let i = 0; i < codes.length; i++) {\n      this.table[state << TableAccess.INDEX_STATE_SHIFT | codes[i]] = action << TableAccess.TRANSITION_ACTION_SHIFT | next;\n    }\n  }\n}\n\n\n// Pseudo-character placeholder for printable non-ascii characters (unicode).\nconst NON_ASCII_PRINTABLE = 0xA0;\n\n\n/**\n * VT500 compatible transition table.\n * Taken from https://vt100.net/emu/dec_ansi_parser.\n */\nexport const VT500_TRANSITION_TABLE = (function (): TransitionTable {\n  const table: TransitionTable = new TransitionTable(4095);\n\n  // range macro for byte\n  const BYTE_VALUES = 256;\n  const blueprint = Array.apply(null, Array(BYTE_VALUES)).map((unused: any, i: number) => i);\n  const r = (start: number, end: number): number[] => blueprint.slice(start, end);\n\n  // Default definitions.\n  const PRINTABLES = r(0x20, 0x7f); // 0x20 (SP) included, 0x7F (DEL) excluded\n  const EXECUTABLES = r(0x00, 0x18);\n  EXECUTABLES.push(0x19);\n  EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\n\n  const states: number[] = r(ParserState.GROUND, ParserState.DCS_PASSTHROUGH + 1);\n  let state: any;\n\n  // set default transition\n  table.setDefault(ParserAction.ERROR, ParserState.GROUND);\n  // printables\n  table.addMany(PRINTABLES, ParserState.GROUND, ParserAction.PRINT, ParserState.GROUND);\n  // global anywhere rules\n  for (state in states) {\n    table.addMany([0x18, 0x1a, 0x99, 0x9a], state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.addMany(r(0x80, 0x90), state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.addMany(r(0x90, 0x98), state, ParserAction.EXECUTE, ParserState.GROUND);\n    table.add(0x9c, state, ParserAction.IGNORE, ParserState.GROUND); // ST as terminator\n    table.add(0x1b, state, ParserAction.CLEAR, ParserState.ESCAPE);  // ESC\n    table.add(0x9d, state, ParserAction.OSC_START, ParserState.OSC_STRING);  // OSC\n    table.addMany([0x98, 0x9e, 0x9f], state, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n    table.add(0x9b, state, ParserAction.CLEAR, ParserState.CSI_ENTRY);  // CSI\n    table.add(0x90, state, ParserAction.CLEAR, ParserState.DCS_ENTRY);  // DCS\n  }\n  // rules for executables and 7f\n  table.addMany(EXECUTABLES, ParserState.GROUND, ParserAction.EXECUTE, ParserState.GROUND);\n  table.addMany(EXECUTABLES, ParserState.ESCAPE, ParserAction.EXECUTE, ParserState.ESCAPE);\n  table.add(0x7f, ParserState.ESCAPE, ParserAction.IGNORE, ParserState.ESCAPE);\n  table.addMany(EXECUTABLES, ParserState.OSC_STRING, ParserAction.IGNORE, ParserState.OSC_STRING);\n  table.addMany(EXECUTABLES, ParserState.CSI_ENTRY, ParserAction.EXECUTE, ParserState.CSI_ENTRY);\n  table.add(0x7f, ParserState.CSI_ENTRY, ParserAction.IGNORE, ParserState.CSI_ENTRY);\n  table.addMany(EXECUTABLES, ParserState.CSI_PARAM, ParserAction.EXECUTE, ParserState.CSI_PARAM);\n  table.add(0x7f, ParserState.CSI_PARAM, ParserAction.IGNORE, ParserState.CSI_PARAM);\n  table.addMany(EXECUTABLES, ParserState.CSI_IGNORE, ParserAction.EXECUTE, ParserState.CSI_IGNORE);\n  table.addMany(EXECUTABLES, ParserState.CSI_INTERMEDIATE, ParserAction.EXECUTE, ParserState.CSI_INTERMEDIATE);\n  table.add(0x7f, ParserState.CSI_INTERMEDIATE, ParserAction.IGNORE, ParserState.CSI_INTERMEDIATE);\n  table.addMany(EXECUTABLES, ParserState.ESCAPE_INTERMEDIATE, ParserAction.EXECUTE, ParserState.ESCAPE_INTERMEDIATE);\n  table.add(0x7f, ParserState.ESCAPE_INTERMEDIATE, ParserAction.IGNORE, ParserState.ESCAPE_INTERMEDIATE);\n  // osc\n  table.add(0x5d, ParserState.ESCAPE, ParserAction.OSC_START, ParserState.OSC_STRING);\n  table.addMany(PRINTABLES, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.add(0x7f, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], ParserState.OSC_STRING, ParserAction.OSC_END, ParserState.GROUND);\n  table.addMany(r(0x1c, 0x20), ParserState.OSC_STRING, ParserAction.IGNORE, ParserState.OSC_STRING);\n  // sos/pm/apc does nothing\n  table.addMany([0x58, 0x5e, 0x5f], ParserState.ESCAPE, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.addMany(PRINTABLES, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.addMany(EXECUTABLES, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  table.add(0x9c, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.GROUND);\n  table.add(0x7f, ParserState.SOS_PM_APC_STRING, ParserAction.IGNORE, ParserState.SOS_PM_APC_STRING);\n  // csi entries\n  table.add(0x5b, ParserState.ESCAPE, ParserAction.CLEAR, ParserState.CSI_ENTRY);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_ENTRY, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x30, 0x3c), ParserState.CSI_ENTRY, ParserAction.PARAM, ParserState.CSI_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.CSI_ENTRY, ParserAction.COLLECT, ParserState.CSI_PARAM);\n  table.addMany(r(0x30, 0x3c), ParserState.CSI_PARAM, ParserAction.PARAM, ParserState.CSI_PARAM);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_PARAM, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.CSI_PARAM, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x20, 0x40), ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.add(0x7f, ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.GROUND);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_ENTRY, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_INTERMEDIATE, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  table.addMany(r(0x30, 0x40), ParserState.CSI_INTERMEDIATE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.CSI_INTERMEDIATE, ParserAction.CSI_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x20, 0x30), ParserState.CSI_PARAM, ParserAction.COLLECT, ParserState.CSI_INTERMEDIATE);\n  // esc_intermediate\n  table.addMany(r(0x20, 0x30), ParserState.ESCAPE, ParserAction.COLLECT, ParserState.ESCAPE_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.ESCAPE_INTERMEDIATE, ParserAction.COLLECT, ParserState.ESCAPE_INTERMEDIATE);\n  table.addMany(r(0x30, 0x7f), ParserState.ESCAPE_INTERMEDIATE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x30, 0x50), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x51, 0x58), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany([0x59, 0x5a, 0x5c], ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  table.addMany(r(0x60, 0x7f), ParserState.ESCAPE, ParserAction.ESC_DISPATCH, ParserState.GROUND);\n  // dcs entry\n  table.add(0x50, ParserState.ESCAPE, ParserAction.CLEAR, ParserState.DCS_ENTRY);\n  table.addMany(EXECUTABLES, ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.add(0x7f, ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_ENTRY, ParserAction.IGNORE, ParserState.DCS_ENTRY);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_ENTRY, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x30, 0x3c), ParserState.DCS_ENTRY, ParserAction.PARAM, ParserState.DCS_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.DCS_ENTRY, ParserAction.COLLECT, ParserState.DCS_PARAM);\n  table.addMany(EXECUTABLES, ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x20, 0x80), ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(EXECUTABLES, ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.add(0x7f, ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_PARAM);\n  table.addMany(r(0x30, 0x3c), ParserState.DCS_PARAM, ParserAction.PARAM, ParserState.DCS_PARAM);\n  table.addMany([0x3c, 0x3d, 0x3e, 0x3f], ParserState.DCS_PARAM, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_PARAM, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(EXECUTABLES, ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.add(0x7f, ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x1c, 0x20), ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x20, 0x30), ParserState.DCS_INTERMEDIATE, ParserAction.COLLECT, ParserState.DCS_INTERMEDIATE);\n  table.addMany(r(0x30, 0x40), ParserState.DCS_INTERMEDIATE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_INTERMEDIATE, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_PARAM, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(r(0x40, 0x7f), ParserState.DCS_ENTRY, ParserAction.DCS_HOOK, ParserState.DCS_PASSTHROUGH);\n  table.addMany(EXECUTABLES, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  table.addMany(PRINTABLES, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  table.add(0x7f, ParserState.DCS_PASSTHROUGH, ParserAction.IGNORE, ParserState.DCS_PASSTHROUGH);\n  table.addMany([0x1b, 0x9c, 0x18, 0x1a], ParserState.DCS_PASSTHROUGH, ParserAction.DCS_UNHOOK, ParserState.GROUND);\n  // special handling of unicode chars\n  table.add(NON_ASCII_PRINTABLE, ParserState.GROUND, ParserAction.PRINT, ParserState.GROUND);\n  table.add(NON_ASCII_PRINTABLE, ParserState.OSC_STRING, ParserAction.OSC_PUT, ParserState.OSC_STRING);\n  table.add(NON_ASCII_PRINTABLE, ParserState.CSI_IGNORE, ParserAction.IGNORE, ParserState.CSI_IGNORE);\n  table.add(NON_ASCII_PRINTABLE, ParserState.DCS_IGNORE, ParserAction.IGNORE, ParserState.DCS_IGNORE);\n  table.add(NON_ASCII_PRINTABLE, ParserState.DCS_PASSTHROUGH, ParserAction.DCS_PUT, ParserState.DCS_PASSTHROUGH);\n  return table;\n})();\n\n\n/**\n * EscapeSequenceParser.\n * This class implements the ANSI/DEC compatible parser described by\n * Paul Williams (https://vt100.net/emu/dec_ansi_parser).\n *\n * To implement custom ANSI compliant escape sequences it is not needed to\n * alter this parser, instead consider registering a custom handler.\n * For non ANSI compliant sequences change the transition table with\n * the optional `transitions` constructor argument and\n * reimplement the `parse` method.\n *\n * This parser is currently hardcoded to operate in ZDM (Zero Default Mode)\n * as suggested by the original parser, thus empty parameters are set to 0.\n * This this is not in line with the latest ECMA-48 specification\n * (ZDM was part of the early specs and got completely removed later on).\n *\n * Other than the original parser from vt100.net this parser supports\n * sub parameters in digital parameters separated by colons. Empty sub parameters\n * are set to -1 (no ZDM for sub parameters).\n *\n * About prefix and intermediate bytes:\n * This parser follows the assumptions of the vt100.net parser with these restrictions:\n * - only one prefix byte is allowed as first parameter byte, byte range 0x3c .. 0x3f\n * - max. two intermediates are respected, byte range 0x20 .. 0x2f\n * Note that this is not in line with ECMA-48 which does not limit either of those.\n * Furthermore ECMA-48 allows the prefix byte range at any param byte position. Currently\n * there are no known sequences that follow the broader definition of the specification.\n *\n * TODO: implement error recovery hook via error handler return values\n */\nexport class EscapeSequenceParser extends Disposable implements IEscapeSequenceParser {\n  public initialState: number;\n  public currentState: number;\n  public precedingCodepoint: number;\n\n  // buffers over several parse calls\n  protected _params: Params;\n  protected _collect: number;\n\n  // handler lookup containers\n  protected _printHandler: PrintHandlerType;\n  protected _executeHandlers: { [flag: number]: ExecuteHandlerType };\n  protected _csiHandlers: IHandlerCollection<CsiHandlerType>;\n  protected _escHandlers: IHandlerCollection<EscHandlerType>;\n  protected _oscParser: IOscParser;\n  protected _dcsParser: IDcsParser;\n  protected _errorHandler: (state: IParsingState) => IParsingState;\n\n  // fallback handlers\n  protected _printHandlerFb: PrintFallbackHandlerType;\n  protected _executeHandlerFb: ExecuteFallbackHandlerType;\n  protected _csiHandlerFb: CsiFallbackHandlerType;\n  protected _escHandlerFb: EscFallbackHandlerType;\n  protected _errorHandlerFb: (state: IParsingState) => IParsingState;\n\n  // parser stack save for async handler support\n  protected _parseStack: IParserStackState = {\n    state: ParserStackType.NONE,\n    handlers: [],\n    handlerPos: 0,\n    transition: 0,\n    chunkPos: 0\n  };\n\n  constructor(\n    protected readonly _transitions: TransitionTable = VT500_TRANSITION_TABLE\n  ) {\n    super();\n\n    this.initialState = ParserState.GROUND;\n    this.currentState = this.initialState;\n    this._params = new Params(); // defaults to 32 storable params/subparams\n    this._params.addParam(0);    // ZDM\n    this._collect = 0;\n    this.precedingCodepoint = 0;\n\n    // set default fallback handlers and handler lookup containers\n    this._printHandlerFb = (data, start, end): void => { };\n    this._executeHandlerFb = (code: number): void => { };\n    this._csiHandlerFb = (ident: number, params: IParams): void => { };\n    this._escHandlerFb = (ident: number): void => { };\n    this._errorHandlerFb = (state: IParsingState): IParsingState => state;\n    this._printHandler = this._printHandlerFb;\n    this._executeHandlers = Object.create(null);\n    this._csiHandlers = Object.create(null);\n    this._escHandlers = Object.create(null);\n    this._oscParser = new OscParser();\n    this._dcsParser = new DcsParser();\n    this._errorHandler = this._errorHandlerFb;\n\n    // swallow 7bit ST (ESC+\\)\n    this.registerEscHandler({ final: '\\\\' }, () => true);\n  }\n\n  protected _identifier(id: IFunctionIdentifier, finalRange: number[] = [0x40, 0x7e]): number {\n    let res = 0;\n    if (id.prefix) {\n      if (id.prefix.length > 1) {\n        throw new Error('only one byte as prefix supported');\n      }\n      res = id.prefix.charCodeAt(0);\n      if (res && 0x3c > res || res > 0x3f) {\n        throw new Error('prefix must be in range 0x3c .. 0x3f');\n      }\n    }\n    if (id.intermediates) {\n      if (id.intermediates.length > 2) {\n        throw new Error('only two bytes as intermediates are supported');\n      }\n      for (let i = 0; i < id.intermediates.length; ++i) {\n        const intermediate = id.intermediates.charCodeAt(i);\n        if (0x20 > intermediate || intermediate > 0x2f) {\n          throw new Error('intermediate must be in range 0x20 .. 0x2f');\n        }\n        res <<= 8;\n        res |= intermediate;\n      }\n    }\n    if (id.final.length !== 1) {\n      throw new Error('final must be a single byte');\n    }\n    const finalCode = id.final.charCodeAt(0);\n    if (finalRange[0] > finalCode || finalCode > finalRange[1]) {\n      throw new Error(`final must be in range ${finalRange[0]} .. ${finalRange[1]}`);\n    }\n    res <<= 8;\n    res |= finalCode;\n\n    return res;\n  }\n\n  public identToString(ident: number): string {\n    const res: string[] = [];\n    while (ident) {\n      res.push(String.fromCharCode(ident & 0xFF));\n      ident >>= 8;\n    }\n    return res.reverse().join('');\n  }\n\n  public dispose(): void {\n    this._csiHandlers = Object.create(null);\n    this._executeHandlers = Object.create(null);\n    this._escHandlers = Object.create(null);\n    this._oscParser.dispose();\n    this._dcsParser.dispose();\n  }\n\n  public setPrintHandler(handler: PrintHandlerType): void {\n    this._printHandler = handler;\n  }\n  public clearPrintHandler(): void {\n    this._printHandler = this._printHandlerFb;\n  }\n\n  public registerEscHandler(id: IFunctionIdentifier, handler: EscHandlerType): IDisposable {\n    const ident = this._identifier(id, [0x30, 0x7e]);\n    if (this._escHandlers[ident] === undefined) {\n      this._escHandlers[ident] = [];\n    }\n    const handlerList = this._escHandlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearEscHandler(id: IFunctionIdentifier): void {\n    if (this._escHandlers[this._identifier(id, [0x30, 0x7e])]) delete this._escHandlers[this._identifier(id, [0x30, 0x7e])];\n  }\n  public setEscHandlerFallback(handler: EscFallbackHandlerType): void {\n    this._escHandlerFb = handler;\n  }\n\n  public setExecuteHandler(flag: string, handler: ExecuteHandlerType): void {\n    this._executeHandlers[flag.charCodeAt(0)] = handler;\n  }\n  public clearExecuteHandler(flag: string): void {\n    if (this._executeHandlers[flag.charCodeAt(0)]) delete this._executeHandlers[flag.charCodeAt(0)];\n  }\n  public setExecuteHandlerFallback(handler: ExecuteFallbackHandlerType): void {\n    this._executeHandlerFb = handler;\n  }\n\n  public registerCsiHandler(id: IFunctionIdentifier, handler: CsiHandlerType): IDisposable {\n    const ident = this._identifier(id);\n    if (this._csiHandlers[ident] === undefined) {\n      this._csiHandlers[ident] = [];\n    }\n    const handlerList = this._csiHandlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearCsiHandler(id: IFunctionIdentifier): void {\n    if (this._csiHandlers[this._identifier(id)]) delete this._csiHandlers[this._identifier(id)];\n  }\n  public setCsiHandlerFallback(callback: (ident: number, params: IParams) => void): void {\n    this._csiHandlerFb = callback;\n  }\n\n  public registerDcsHandler(id: IFunctionIdentifier, handler: IDcsHandler): IDisposable {\n    return this._dcsParser.registerHandler(this._identifier(id), handler);\n  }\n  public clearDcsHandler(id: IFunctionIdentifier): void {\n    this._dcsParser.clearHandler(this._identifier(id));\n  }\n  public setDcsHandlerFallback(handler: DcsFallbackHandlerType): void {\n    this._dcsParser.setHandlerFallback(handler);\n  }\n\n  public registerOscHandler(ident: number, handler: IOscHandler): IDisposable {\n    return this._oscParser.registerHandler(ident, handler);\n  }\n  public clearOscHandler(ident: number): void {\n    this._oscParser.clearHandler(ident);\n  }\n  public setOscHandlerFallback(handler: OscFallbackHandlerType): void {\n    this._oscParser.setHandlerFallback(handler);\n  }\n\n  public setErrorHandler(callback: (state: IParsingState) => IParsingState): void {\n    this._errorHandler = callback;\n  }\n  public clearErrorHandler(): void {\n    this._errorHandler = this._errorHandlerFb;\n  }\n\n  /**\n   * Reset parser to initial values.\n   *\n   * This can also be used to lift the improper continuation error condition\n   * when dealing with async handlers. Use this only as a last resort to silence\n   * that error when the terminal has no pending data to be processed. Note that\n   * the interrupted async handler might continue its work in the future messing\n   * up the terminal state even further.\n   */\n  public reset(): void {\n    this.currentState = this.initialState;\n    this._oscParser.reset();\n    this._dcsParser.reset();\n    this._params.reset();\n    this._params.addParam(0); // ZDM\n    this._collect = 0;\n    this.precedingCodepoint = 0;\n    // abort pending continuation from async handler\n    // Here the RESET type indicates, that the next parse call will\n    // ignore any saved stack, instead continues sync with next codepoint from GROUND\n    if (this._parseStack.state !== ParserStackType.NONE) {\n      this._parseStack.state = ParserStackType.RESET;\n      this._parseStack.handlers = []; // also release handlers ref\n    }\n  }\n\n  /**\n   * Async parse support.\n   */\n  protected _preserveStack(\n    state: ParserStackType,\n    handlers: ResumableHandlersType,\n    handlerPos: number,\n    transition: number,\n    chunkPos: number\n  ): void {\n    this._parseStack.state = state;\n    this._parseStack.handlers = handlers;\n    this._parseStack.handlerPos = handlerPos;\n    this._parseStack.transition = transition;\n    this._parseStack.chunkPos = chunkPos;\n  }\n\n  /**\n   * Parse UTF32 codepoints in `data` up to `length`.\n   *\n   * Note: For several actions with high data load the parsing is optimized\n   * by using local read ahead loops with hardcoded conditions to\n   * avoid costly table lookups. Make sure that any change of table values\n   * will be reflected in the loop conditions as well and vice versa.\n   * Affected states/actions:\n   * - GROUND:PRINT\n   * - CSI_PARAM:PARAM\n   * - DCS_PARAM:PARAM\n   * - OSC_STRING:OSC_PUT\n   * - DCS_PASSTHROUGH:DCS_PUT\n   *\n   * Note on asynchronous handler support:\n   * Any handler returning a promise will be treated as asynchronous.\n   * To keep the in-band blocking working for async handlers, `parse` pauses execution,\n   * creates a stack save and returns the promise to the caller.\n   * For proper continuation of the paused state it is important\n   * to await the promise resolving. On resolve the parse must be repeated\n   * with the same chunk of data and the resolved value in `promiseResult`\n   * until no promise is returned.\n   *\n   * Important: With only sync handlers defined, parsing is completely synchronous as well.\n   * As soon as an async handler is involved, synchronous parsing is not possible anymore.\n   *\n   * Boilerplate for proper parsing of multiple chunks with async handlers:\n   *\n   * ```typescript\n   * async function parseMultipleChunks(chunks: Uint32Array[]): Promise<void> {\n   *   for (const chunk of chunks) {\n   *     let result: void | Promise<boolean>;\n   *     let prev: boolean | undefined;\n   *     while (result = parser.parse(chunk, chunk.length, prev)) {\n   *       prev = await result;\n   *     }\n   *   }\n   *   // finished parsing all chunks...\n   * }\n   * ```\n   */\n  public parse(data: Uint32Array, length: number, promiseResult?: boolean): void | Promise<boolean> {\n    let code = 0;\n    let transition = 0;\n    let start = 0;\n    let handlerResult: void | boolean | Promise<boolean>;\n\n    // resume from async handler\n    if (this._parseStack.state) {\n      // allow sync parser reset even in continuation mode\n      // Note: can be used to recover parser from improper continuation error below\n      if (this._parseStack.state === ParserStackType.RESET) {\n        this._parseStack.state = ParserStackType.NONE;\n        start = this._parseStack.chunkPos + 1; // continue with next codepoint in GROUND\n      } else {\n        if (promiseResult === undefined || this._parseStack.state === ParserStackType.FAIL) {\n          /**\n           * Reject further parsing on improper continuation after pausing.\n           * This is a really bad condition with screwed up execution order and prolly messed up\n           * terminal state, therefore we exit hard with an exception and reject any further parsing.\n           *\n           * Note: With `Terminal.write` usage this exception should never occur, as the top level\n           * calls are guaranteed to handle async conditions properly. If you ever encounter this\n           * exception in your terminal integration it indicates, that you injected data chunks to\n           * `InputHandler.parse` or `EscapeSequenceParser.parse` synchronously without waiting for\n           * continuation of a running async handler.\n           *\n           * It is possible to get rid of this error by calling `reset`. But dont rely on that,\n           * as the pending async handler still might mess up the terminal later. Instead fix the faulty\n           * async handling, so this error will not be thrown anymore.\n           */\n          this._parseStack.state = ParserStackType.FAIL;\n          throw new Error('improper continuation due to previous async handler, giving up parsing');\n        }\n\n        // we have to resume the old handler loop if:\n        // - return value of the promise was `false`\n        // - handlers are not exhausted yet\n        const handlers = this._parseStack.handlers;\n        let handlerPos = this._parseStack.handlerPos - 1;\n        switch (this._parseStack.state) {\n          case ParserStackType.CSI:\n            if (promiseResult === false && handlerPos > -1) {\n              for (; handlerPos >= 0; handlerPos--) {\n                handlerResult = (handlers as CsiHandlerType[])[handlerPos](this._params);\n                if (handlerResult === true) {\n                  break;\n                } else if (handlerResult instanceof Promise) {\n                  this._parseStack.handlerPos = handlerPos;\n                  return handlerResult;\n                }\n              }\n            }\n            this._parseStack.handlers = [];\n            break;\n          case ParserStackType.ESC:\n            if (promiseResult === false && handlerPos > -1) {\n              for (; handlerPos >= 0; handlerPos--) {\n                handlerResult = (handlers as EscHandlerType[])[handlerPos]();\n                if (handlerResult === true) {\n                  break;\n                } else if (handlerResult instanceof Promise) {\n                  this._parseStack.handlerPos = handlerPos;\n                  return handlerResult;\n                }\n              }\n            }\n            this._parseStack.handlers = [];\n            break;\n          case ParserStackType.DCS:\n            code = data[this._parseStack.chunkPos];\n            handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a, promiseResult);\n            if (handlerResult) {\n              return handlerResult;\n            }\n            if (code === 0x1b) this._parseStack.transition |= ParserState.ESCAPE;\n            this._params.reset();\n            this._params.addParam(0); // ZDM\n            this._collect = 0;\n            break;\n          case ParserStackType.OSC:\n            code = data[this._parseStack.chunkPos];\n            handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a, promiseResult);\n            if (handlerResult) {\n              return handlerResult;\n            }\n            if (code === 0x1b) this._parseStack.transition |= ParserState.ESCAPE;\n            this._params.reset();\n            this._params.addParam(0); // ZDM\n            this._collect = 0;\n            break;\n        }\n        // cleanup before continuing with the main sync loop\n        this._parseStack.state = ParserStackType.NONE;\n        start = this._parseStack.chunkPos + 1;\n        this.precedingCodepoint = 0;\n        this.currentState = this._parseStack.transition & TableAccess.TRANSITION_STATE_MASK;\n      }\n    }\n\n    // continue with main sync loop\n\n    // process input string\n    for (let i = start; i < length; ++i) {\n      code = data[i];\n\n      // normal transition & action lookup\n      transition = this._transitions.table[this.currentState << TableAccess.INDEX_STATE_SHIFT | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n      switch (transition >> TableAccess.TRANSITION_ACTION_SHIFT) {\n        case ParserAction.PRINT:\n          // read ahead with loop unrolling\n          // Note: 0x20 (SP) is included, 0x7F (DEL) is excluded\n          for (let j = i + 1; ; ++j) {\n            if (j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n            if (++j >= length || (code = data[j]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {\n              this._printHandler(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.EXECUTE:\n          if (this._executeHandlers[code]) this._executeHandlers[code]();\n          else this._executeHandlerFb(code);\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.IGNORE:\n          break;\n        case ParserAction.ERROR:\n          const inject: IParsingState = this._errorHandler(\n            {\n              position: i,\n              code,\n              currentState: this.currentState,\n              collect: this._collect,\n              params: this._params,\n              abort: false\n            });\n          if (inject.abort) return;\n          // inject values: currently not implemented\n          break;\n        case ParserAction.CSI_DISPATCH:\n          // Trigger CSI Handler\n          const handlers = this._csiHandlers[this._collect << 8 | code];\n          let j = handlers ? handlers.length - 1 : -1;\n          for (; j >= 0; j--) {\n            // true means success and to stop bubbling\n            // a promise indicates an async handler that needs to finish before progressing\n            handlerResult = handlers[j](this._params);\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._preserveStack(ParserStackType.CSI, handlers, j, transition, i);\n              return handlerResult;\n            }\n          }\n          if (j < 0) {\n            this._csiHandlerFb(this._collect << 8 | code, this._params);\n          }\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.PARAM:\n          // inner loop: digits (0x30 - 0x39) and ; (0x3b) and : (0x3a)\n          do {\n            switch (code) {\n              case 0x3b:\n                this._params.addParam(0);  // ZDM\n                break;\n              case 0x3a:\n                this._params.addSubParam(-1);\n                break;\n              default:  // 0x30 - 0x39\n                this._params.addDigit(code - 48);\n            }\n          } while (++i < length && (code = data[i]) > 0x2f && code < 0x3c);\n          i--;\n          break;\n        case ParserAction.COLLECT:\n          this._collect <<= 8;\n          this._collect |= code;\n          break;\n        case ParserAction.ESC_DISPATCH:\n          const handlersEsc = this._escHandlers[this._collect << 8 | code];\n          let jj = handlersEsc ? handlersEsc.length - 1 : -1;\n          for (; jj >= 0; jj--) {\n            // true means success and to stop bubbling\n            // a promise indicates an async handler that needs to finish before progressing\n            handlerResult = handlersEsc[jj]();\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._preserveStack(ParserStackType.ESC, handlersEsc, jj, transition, i);\n              return handlerResult;\n            }\n          }\n          if (jj < 0) {\n            this._escHandlerFb(this._collect << 8 | code);\n          }\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.CLEAR:\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          break;\n        case ParserAction.DCS_HOOK:\n          this._dcsParser.hook(this._collect << 8 | code, this._params);\n          break;\n        case ParserAction.DCS_PUT:\n          // inner loop - exit DCS_PUT: 0x18, 0x1a, 0x1b, 0x7f, 0x80 - 0x9f\n          // unhook triggered by: 0x1b, 0x9c (success) and 0x18, 0x1a (abort)\n          for (let j = i + 1; ; ++j) {\n            if (j >= length || (code = data[j]) === 0x18 || code === 0x1a || code === 0x1b || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {\n              this._dcsParser.put(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.DCS_UNHOOK:\n          handlerResult = this._dcsParser.unhook(code !== 0x18 && code !== 0x1a);\n          if (handlerResult) {\n            this._preserveStack(ParserStackType.DCS, [], 0, transition, i);\n            return handlerResult;\n          }\n          if (code === 0x1b) transition |= ParserState.ESCAPE;\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          this.precedingCodepoint = 0;\n          break;\n        case ParserAction.OSC_START:\n          this._oscParser.start();\n          break;\n        case ParserAction.OSC_PUT:\n          // inner loop: 0x20 (SP) included, 0x7F (DEL) included\n          for (let j = i + 1; ; j++) {\n            if (j >= length || (code = data[j]) < 0x20 || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {\n              this._oscParser.put(data, i, j);\n              i = j - 1;\n              break;\n            }\n          }\n          break;\n        case ParserAction.OSC_END:\n          handlerResult = this._oscParser.end(code !== 0x18 && code !== 0x1a);\n          if (handlerResult) {\n            this._preserveStack(ParserStackType.OSC, [], 0, transition, i);\n            return handlerResult;\n          }\n          if (code === 0x1b) transition |= ParserState.ESCAPE;\n          this._params.reset();\n          this._params.addParam(0); // ZDM\n          this._collect = 0;\n          this.precedingCodepoint = 0;\n          break;\n      }\n      this.currentState = transition & TableAccess.TRANSITION_STATE_MASK;\n    }\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOscHandler, IHandlerCollection, OscFallbackHandlerType, IOscParser, ISubParserStackState } from 'common/parser/Types';\nimport { OscState, PAYLOAD_LIMIT } from 'common/parser/Constants';\nimport { utf32ToString } from 'common/input/TextDecoder';\nimport { IDisposable } from 'common/Types';\n\nconst EMPTY_HANDLERS: IOscHandler[] = [];\n\nexport class OscParser implements IOscParser {\n  private _state = OscState.START;\n  private _active = EMPTY_HANDLERS;\n  private _id = -1;\n  private _handlers: IHandlerCollection<IOscHandler> = Object.create(null);\n  private _handlerFb: OscFallbackHandlerType = () => { };\n  private _stack: ISubParserStackState = {\n    paused: false,\n    loopPosition: 0,\n    fallThrough: false\n  };\n\n  public registerHandler(ident: number, handler: IOscHandler): IDisposable {\n    if (this._handlers[ident] === undefined) {\n      this._handlers[ident] = [];\n    }\n    const handlerList = this._handlers[ident];\n    handlerList.push(handler);\n    return {\n      dispose: () => {\n        const handlerIndex = handlerList.indexOf(handler);\n        if (handlerIndex !== -1) {\n          handlerList.splice(handlerIndex, 1);\n        }\n      }\n    };\n  }\n  public clearHandler(ident: number): void {\n    if (this._handlers[ident]) delete this._handlers[ident];\n  }\n  public setHandlerFallback(handler: OscFallbackHandlerType): void {\n    this._handlerFb = handler;\n  }\n\n  public dispose(): void {\n    this._handlers = Object.create(null);\n    this._handlerFb = () => { };\n    this._active = EMPTY_HANDLERS;\n  }\n\n  public reset(): void {\n    // force cleanup handlers if payload was already sent\n    if (this._state === OscState.PAYLOAD) {\n      for (let j = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; j >= 0; --j) {\n        this._active[j].end(false);\n      }\n    }\n    this._stack.paused = false;\n    this._active = EMPTY_HANDLERS;\n    this._id = -1;\n    this._state = OscState.START;\n  }\n\n  private _start(): void {\n    this._active = this._handlers[this._id] || EMPTY_HANDLERS;\n    if (!this._active.length) {\n      this._handlerFb(this._id, 'START');\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].start();\n      }\n    }\n  }\n\n  private _put(data: Uint32Array, start: number, end: number): void {\n    if (!this._active.length) {\n      this._handlerFb(this._id, 'PUT', utf32ToString(data, start, end));\n    } else {\n      for (let j = this._active.length - 1; j >= 0; j--) {\n        this._active[j].put(data, start, end);\n      }\n    }\n  }\n\n  public start(): void {\n    // always reset leftover handlers\n    this.reset();\n    this._state = OscState.ID;\n  }\n\n  /**\n   * Put data to current OSC command.\n   * Expects the identifier of the OSC command in the form\n   * OSC id ; payload ST/BEL\n   * Payload chunks are not further processed and get\n   * directly passed to the handlers.\n   */\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._state === OscState.ABORT) {\n      return;\n    }\n    if (this._state === OscState.ID) {\n      while (start < end) {\n        const code = data[start++];\n        if (code === 0x3b) {\n          this._state = OscState.PAYLOAD;\n          this._start();\n          break;\n        }\n        if (code < 0x30 || 0x39 < code) {\n          this._state = OscState.ABORT;\n          return;\n        }\n        if (this._id === -1) {\n          this._id = 0;\n        }\n        this._id = this._id * 10 + code - 48;\n      }\n    }\n    if (this._state === OscState.PAYLOAD && end - start > 0) {\n      this._put(data, start, end);\n    }\n  }\n\n  /**\n   * Indicates end of an OSC command.\n   * Whether the OSC got aborted or finished normally\n   * is indicated by `success`.\n   */\n  public end(success: boolean, promiseResult: boolean = true): void | Promise<boolean> {\n    if (this._state === OscState.START) {\n      return;\n    }\n    // do nothing if command was faulty\n    if (this._state !== OscState.ABORT) {\n      // if we are still in ID state and get an early end\n      // means that the command has no payload thus we still have\n      // to announce START and send END right after\n      if (this._state === OscState.ID) {\n        this._start();\n      }\n\n      if (!this._active.length) {\n        this._handlerFb(this._id, 'END', success);\n      } else {\n        let handlerResult: boolean | Promise<boolean> = false;\n        let j = this._active.length - 1;\n        let fallThrough = false;\n        if (this._stack.paused) {\n          j = this._stack.loopPosition - 1;\n          handlerResult = promiseResult;\n          fallThrough = this._stack.fallThrough;\n          this._stack.paused = false;\n        }\n        if (!fallThrough && handlerResult === false) {\n          for (; j >= 0; j--) {\n            handlerResult = this._active[j].end(success);\n            if (handlerResult === true) {\n              break;\n            } else if (handlerResult instanceof Promise) {\n              this._stack.paused = true;\n              this._stack.loopPosition = j;\n              this._stack.fallThrough = false;\n              return handlerResult;\n            }\n          }\n          j--;\n        }\n        // cleanup left over handlers\n        // we always have to call .end for proper cleanup,\n        // here we use `success` to indicate whether a handler should execute\n        for (; j >= 0; j--) {\n          handlerResult = this._active[j].end(false);\n          if (handlerResult instanceof Promise) {\n            this._stack.paused = true;\n            this._stack.loopPosition = j;\n            this._stack.fallThrough = true;\n            return handlerResult;\n          }\n        }\n      }\n\n    }\n    this._active = EMPTY_HANDLERS;\n    this._id = -1;\n    this._state = OscState.START;\n  }\n}\n\n/**\n * Convenient class to allow attaching string based handler functions\n * as OSC handlers.\n */\nexport class OscHandler implements IOscHandler {\n  private _data = '';\n  private _hitLimit: boolean = false;\n\n  constructor(private _handler: (data: string) => boolean | Promise<boolean>) { }\n\n  public start(): void {\n    this._data = '';\n    this._hitLimit = false;\n  }\n\n  public put(data: Uint32Array, start: number, end: number): void {\n    if (this._hitLimit) {\n      return;\n    }\n    this._data += utf32ToString(data, start, end);\n    if (this._data.length > PAYLOAD_LIMIT) {\n      this._data = '';\n      this._hitLimit = true;\n    }\n  }\n\n  public end(success: boolean): boolean | Promise<boolean> {\n    let ret: boolean | Promise<boolean> = false;\n    if (this._hitLimit) {\n      ret = false;\n    } else if (success) {\n      ret = this._handler(this._data);\n      if (ret instanceof Promise) {\n        // need to hold data until `ret` got resolved\n        // dont care for errors, data will be freed anyway on next start\n        return ret.then(res => {\n          this._data = '';\n          this._hitLimit = false;\n          return res;\n        });\n      }\n    }\n    this._data = '';\n    this._hitLimit = false;\n    return ret;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IParams, ParamsArray } from 'common/parser/Types';\n\n// max value supported for a single param/subparam (clamped to positive int32 range)\nconst MAX_VALUE = 0x7FFFFFFF;\n// max allowed subparams for a single sequence (hardcoded limitation)\nconst MAX_SUBPARAMS = 256;\n\n/**\n * Params storage class.\n * This type is used by the parser to accumulate sequence parameters and sub parameters\n * and transmit them to the input handler actions.\n *\n * NOTES:\n *  - params object for action handlers is borrowed, use `.toArray` or `.clone` to get a copy\n *  - never read beyond `params.length - 1` (likely to contain arbitrary data)\n *  - `.getSubParams` returns a borrowed typed array, use `.getSubParamsAll` for cloned sub params\n *  - hardcoded limitations:\n *    - max. value for a single (sub) param is 2^31 - 1 (greater values are clamped to that)\n *    - max. 256 sub params possible\n *    - negative values are not allowed beside -1 (placeholder for default value)\n *\n * About ZDM (Zero Default Mode):\n * ZDM is not orchestrated by this class. If the parser is in ZDM,\n * it should add 0 for empty params, otherwise -1. This does not apply\n * to subparams, empty subparams should always be added with -1.\n */\nexport class Params implements IParams {\n  // params store and length\n  public params: Int32Array;\n  public length: number;\n\n  // sub params store and length\n  protected _subParams: Int32Array;\n  protected _subParamsLength: number;\n\n  // sub params offsets from param: param idx --> [start, end] offset\n  private _subParamsIdx: Uint16Array;\n  private _rejectDigits: boolean;\n  private _rejectSubDigits: boolean;\n  private _digitIsSub: boolean;\n\n  /**\n   * Create a `Params` type from JS array representation.\n   */\n  public static fromArray(values: ParamsArray): Params {\n    const params = new Params();\n    if (!values.length) {\n      return params;\n    }\n    // skip leading sub params\n    for (let i = (Array.isArray(values[0])) ? 1 : 0; i < values.length; ++i) {\n      const value = values[i];\n      if (Array.isArray(value)) {\n        for (let k = 0; k < value.length; ++k) {\n          params.addSubParam(value[k]);\n        }\n      } else {\n        params.addParam(value);\n      }\n    }\n    return params;\n  }\n\n  /**\n   * @param maxLength max length of storable parameters\n   * @param maxSubParamsLength max length of storable sub parameters\n   */\n  constructor(public maxLength: number = 32, public maxSubParamsLength: number = 32) {\n    if (maxSubParamsLength > MAX_SUBPARAMS) {\n      throw new Error('maxSubParamsLength must not be greater than 256');\n    }\n    this.params = new Int32Array(maxLength);\n    this.length = 0;\n    this._subParams = new Int32Array(maxSubParamsLength);\n    this._subParamsLength = 0;\n    this._subParamsIdx = new Uint16Array(maxLength);\n    this._rejectDigits = false;\n    this._rejectSubDigits = false;\n    this._digitIsSub = false;\n  }\n\n  /**\n   * Clone object.\n   */\n  public clone(): Params {\n    const newParams = new Params(this.maxLength, this.maxSubParamsLength);\n    newParams.params.set(this.params);\n    newParams.length = this.length;\n    newParams._subParams.set(this._subParams);\n    newParams._subParamsLength = this._subParamsLength;\n    newParams._subParamsIdx.set(this._subParamsIdx);\n    newParams._rejectDigits = this._rejectDigits;\n    newParams._rejectSubDigits = this._rejectSubDigits;\n    newParams._digitIsSub = this._digitIsSub;\n    return newParams;\n  }\n\n  /**\n   * Get a JS array representation of the current parameters and sub parameters.\n   * The array is structured as follows:\n   *    sequence: \"1;2:3:4;5::6\"\n   *    array   : [1, 2, [3, 4], 5, [-1, 6]]\n   */\n  public toArray(): ParamsArray {\n    const res: ParamsArray = [];\n    for (let i = 0; i < this.length; ++i) {\n      res.push(this.params[i]);\n      const start = this._subParamsIdx[i] >> 8;\n      const end = this._subParamsIdx[i] & 0xFF;\n      if (end - start > 0) {\n        res.push(Array.prototype.slice.call(this._subParams, start, end));\n      }\n    }\n    return res;\n  }\n\n  /**\n   * Reset to initial empty state.\n   */\n  public reset(): void {\n    this.length = 0;\n    this._subParamsLength = 0;\n    this._rejectDigits = false;\n    this._rejectSubDigits = false;\n    this._digitIsSub = false;\n  }\n\n  /**\n   * Add a parameter value.\n   * `Params` only stores up to `maxLength` parameters, any later\n   * parameter will be ignored.\n   * Note: VT devices only stored up to 16 values, xterm seems to\n   * store up to 30.\n   */\n  public addParam(value: number): void {\n    this._digitIsSub = false;\n    if (this.length >= this.maxLength) {\n      this._rejectDigits = true;\n      return;\n    }\n    if (value < -1) {\n      throw new Error('values lesser than -1 are not allowed');\n    }\n    this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength;\n    this.params[this.length++] = value > MAX_VALUE ? MAX_VALUE : value;\n  }\n\n  /**\n   * Add a sub parameter value.\n   * The sub parameter is automatically associated with the last parameter value.\n   * Thus it is not possible to add a subparameter without any parameter added yet.\n   * `Params` only stores up to `subParamsLength` sub parameters, any later\n   * sub parameter will be ignored.\n   */\n  public addSubParam(value: number): void {\n    this._digitIsSub = true;\n    if (!this.length) {\n      return;\n    }\n    if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {\n      this._rejectSubDigits = true;\n      return;\n    }\n    if (value < -1) {\n      throw new Error('values lesser than -1 are not allowed');\n    }\n    this._subParams[this._subParamsLength++] = value > MAX_VALUE ? MAX_VALUE : value;\n    this._subParamsIdx[this.length - 1]++;\n  }\n\n  /**\n   * Whether parameter at index `idx` has sub parameters.\n   */\n  public hasSubParams(idx: number): boolean {\n    return ((this._subParamsIdx[idx] & 0xFF) - (this._subParamsIdx[idx] >> 8) > 0);\n  }\n\n  /**\n   * Return sub parameters for parameter at index `idx`.\n   * Note: The values are borrowed, thus you need to copy\n   * the values if you need to hold them in nonlocal scope.\n   */\n  public getSubParams(idx: number): Int32Array | null {\n    const start = this._subParamsIdx[idx] >> 8;\n    const end = this._subParamsIdx[idx] & 0xFF;\n    if (end - start > 0) {\n      return this._subParams.subarray(start, end);\n    }\n    return null;\n  }\n\n  /**\n   * Return all sub parameters as {idx: subparams} mapping.\n   * Note: The values are not borrowed.\n   */\n  public getSubParamsAll(): {[idx: number]: Int32Array} {\n    const result: {[idx: number]: Int32Array} = {};\n    for (let i = 0; i < this.length; ++i) {\n      const start = this._subParamsIdx[i] >> 8;\n      const end = this._subParamsIdx[i] & 0xFF;\n      if (end - start > 0) {\n        result[i] = this._subParams.slice(start, end);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Add a single digit value to current parameter.\n   * This is used by the parser to account digits on a char by char basis.\n   */\n  public addDigit(value: number): void {\n    let length;\n    if (this._rejectDigits\n      || !(length = this._digitIsSub ? this._subParamsLength : this.length)\n      || (this._digitIsSub && this._rejectSubDigits)\n    ) {\n      return;\n    }\n\n    const store = this._digitIsSub ? this._subParams : this.params;\n    const cur = store[length - 1];\n    store[length - 1] = ~cur ? Math.min(cur * 10 + value, MAX_VALUE) : value;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ITerminalAddon, IDisposable, Terminal } from 'xterm';\n\nexport interface ILoadedAddon {\n  instance: ITerminalAddon;\n  dispose: () => void;\n  isDisposed: boolean;\n}\n\nexport class AddonManager implements IDisposable {\n  protected _addons: ILoadedAddon[] = [];\n\n  constructor() {\n  }\n\n  public dispose(): void {\n    for (let i = this._addons.length - 1; i >= 0; i--) {\n      this._addons[i].instance.dispose();\n    }\n  }\n\n  public loadAddon(terminal: Terminal, instance: ITerminalAddon): void {\n    const loadedAddon: ILoadedAddon = {\n      instance,\n      dispose: instance.dispose,\n      isDisposed: false\n    };\n    this._addons.push(loadedAddon);\n    instance.dispose = () => this._wrappedAddonDispose(loadedAddon);\n    instance.activate(terminal as any);\n  }\n\n  private _wrappedAddonDispose(loadedAddon: ILoadedAddon): void {\n    if (loadedAddon.isDisposed) {\n      // Do nothing if already disposed\n      return;\n    }\n    let index = -1;\n    for (let i = 0; i < this._addons.length; i++) {\n      if (this._addons[i] === loadedAddon) {\n        index = i;\n        break;\n      }\n    }\n    if (index === -1) {\n      throw new Error('Could not dispose an addon that has not been loaded');\n    }\n    loadedAddon.isDisposed = true;\n    loadedAddon.dispose.apply(loadedAddon.instance);\n    this._addons.splice(index, 1);\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBuffer as IBufferApi, IBufferLine as IBufferLineApi, IBufferCell as IBufferCellApi } from 'xterm';\nimport { IBuffer } from 'common/buffer/Types';\nimport { BufferLineApiView } from 'common/public/BufferLineApiView';\nimport { CellData } from 'common/buffer/CellData';\n\nexport class BufferApiView implements IBufferApi {\n  constructor(\n    private _buffer: IBuffer,\n    public readonly type: 'normal' | 'alternate'\n  ) { }\n\n  public init(buffer: IBuffer): BufferApiView {\n    this._buffer = buffer;\n    return this;\n  }\n\n  public get cursorY(): number { return this._buffer.y; }\n  public get cursorX(): number { return this._buffer.x; }\n  public get viewportY(): number { return this._buffer.ydisp; }\n  public get baseY(): number { return this._buffer.ybase; }\n  public get length(): number { return this._buffer.lines.length; }\n  public getLine(y: number): IBufferLineApi | undefined {\n    const line = this._buffer.lines.get(y);\n    if (!line) {\n      return undefined;\n    }\n    return new BufferLineApiView(line);\n  }\n  public getNullCell(): IBufferCellApi { return new CellData(); }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CellData } from 'common/buffer/CellData';\nimport { IBufferLine, ICellData } from 'common/Types';\nimport { IBufferCell as IBufferCellApi, IBufferLine as IBufferLineApi } from 'xterm';\n\nexport class BufferLineApiView implements IBufferLineApi {\n  constructor(private _line: IBufferLine) { }\n\n  public get isWrapped(): boolean { return this._line.isWrapped; }\n  public get length(): number { return this._line.length; }\n  public getCell(x: number, cell?: IBufferCellApi): IBufferCellApi | undefined {\n    if (x < 0 || x >= this._line.length) {\n      return undefined;\n    }\n\n    if (cell) {\n      this._line.loadCell(x, cell as ICellData);\n      return cell;\n    }\n    return this._line.loadCell(x, new CellData());\n  }\n  public translateToString(trimRight?: boolean, startColumn?: number, endColumn?: number): string {\n    return this._line.translateToString(trimRight, startColumn, endColumn);\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBuffer as IBufferApi, IBufferNamespace as IBufferNamespaceApi } from 'xterm';\nimport { BufferApiView } from 'common/public/BufferApiView';\nimport { IEvent, EventEmitter } from 'common/EventEmitter';\nimport { ICoreTerminal } from 'common/Types';\n\nexport class BufferNamespaceApi implements IBufferNamespaceApi {\n  private _normal: BufferApiView;\n  private _alternate: BufferApiView;\n  private _onBufferChange = new EventEmitter<IBufferApi>();\n  public get onBufferChange(): IEvent<IBufferApi> { return this._onBufferChange.event; }\n\n  constructor(private _core: ICoreTerminal) {\n    this._normal = new BufferApiView(this._core.buffers.normal, 'normal');\n    this._alternate = new BufferApiView(this._core.buffers.alt, 'alternate');\n    this._core.buffers.onBufferActivate(() => this._onBufferChange.fire(this.active));\n  }\n  public get active(): IBufferApi {\n    if (this._core.buffers.active === this._core.buffers.normal) { return this.normal; }\n    if (this._core.buffers.active === this._core.buffers.alt) { return this.alternate; }\n    throw new Error('Active buffer is neither normal nor alternate');\n  }\n  public get normal(): IBufferApi {\n    return this._normal.init(this._core.buffers.normal);\n  }\n  public get alternate(): IBufferApi {\n    return this._alternate.init(this._core.buffers.alt);\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IParams } from 'common/parser/Types';\nimport { IDisposable, IFunctionIdentifier, IParser } from 'xterm';\nimport { ICoreTerminal } from 'common/Types';\n\nexport class ParserApi implements IParser {\n  constructor(private _core: ICoreTerminal) { }\n\n  public registerCsiHandler(id: IFunctionIdentifier, callback: (params: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerCsiHandler(id, (params: IParams) => callback(params.toArray()));\n  }\n  public addCsiHandler(id: IFunctionIdentifier, callback: (params: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this.registerCsiHandler(id, callback);\n  }\n  public registerDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerDcsHandler(id, (data: string, params: IParams) => callback(data, params.toArray()));\n  }\n  public addDcsHandler(id: IFunctionIdentifier, callback: (data: string, param: (number | number[])[]) => boolean | Promise<boolean>): IDisposable {\n    return this.registerDcsHandler(id, callback);\n  }\n  public registerEscHandler(id: IFunctionIdentifier, handler: () => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerEscHandler(id, handler);\n  }\n  public addEscHandler(id: IFunctionIdentifier, handler: () => boolean | Promise<boolean>): IDisposable {\n    return this.registerEscHandler(id, handler);\n  }\n  public registerOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this._core.registerOscHandler(ident, callback);\n  }\n  public addOscHandler(ident: number, callback: (data: string) => boolean | Promise<boolean>): IDisposable {\n    return this.registerOscHandler(ident, callback);\n  }\n}\n", "/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreTerminal } from 'common/Types';\nimport { IUnicodeHandling, IUnicodeVersionProvider } from 'xterm';\n\nexport class UnicodeApi implements IUnicodeHandling {\n  constructor(private _core: ICoreTerminal) { }\n\n  public register(provider: IUnicodeVersionProvider): void {\n    this._core.unicodeService.register(provider);\n  }\n\n  public get versions(): string[] {\n    return this._core.unicodeService.versions;\n  }\n\n  public get activeVersion(): string {\n    return this._core.unicodeService.activeVersion;\n  }\n\n  public set activeVersion(version: string) {\n    this._core.unicodeService.activeVersion = version;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService, IOptionsService } from 'common/services/Services';\nimport { BufferSet } from 'common/buffer/BufferSet';\nimport { IBufferSet, IBuffer } from 'common/buffer/Types';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { Disposable } from 'common/Lifecycle';\nimport { IAttributeData, IBufferLine, ScrollSource } from 'common/Types';\n\nexport const MINIMUM_COLS = 2; // Less than 2 can mess with wide chars\nexport const MINIMUM_ROWS = 1;\n\nexport class BufferService extends Disposable implements IBufferService {\n  public serviceBrand: any;\n\n  public cols: number;\n  public rows: number;\n  public buffers: IBufferSet;\n  /** Whether the user is scrolling (locks the scroll position) */\n  public isUserScrolling: boolean = false;\n\n  private _onResize = new EventEmitter<{ cols: number, rows: number }>();\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._onResize.event; }\n  private _onScroll = new EventEmitter<number>();\n  public get onScroll(): IEvent<number> { return this._onScroll.event; }\n\n  public get buffer(): IBuffer { return this.buffers.active; }\n\n  /** An IBufferline to clone/copy from for new blank lines */\n  private _cachedBlankLine: IBufferLine | undefined;\n\n  constructor(\n    @IOptionsService private _optionsService: IOptionsService\n  ) {\n    super();\n    this.cols = Math.max(_optionsService.options.cols || 0, MINIMUM_COLS);\n    this.rows = Math.max(_optionsService.options.rows || 0, MINIMUM_ROWS);\n    this.buffers = new BufferSet(_optionsService, this);\n  }\n\n  public dispose(): void {\n    super.dispose();\n    this.buffers.dispose();\n  }\n\n  public resize(cols: number, rows: number): void {\n    this.cols = cols;\n    this.rows = rows;\n    this.buffers.resize(cols, rows);\n    this.buffers.setupTabStops(this.cols);\n    this._onResize.fire({ cols, rows });\n  }\n\n  public reset(): void {\n    this.buffers.reset();\n    this.isUserScrolling = false;\n  }\n\n  /**\n   * Scroll the terminal down 1 row, creating a blank line.\n   * @param isWrapped Whether the new line is wrapped from the previous line.\n   */\n  public scroll(eraseAttr: IAttributeData, isWrapped: boolean = false): void {\n    const buffer = this.buffer;\n\n    let newLine: IBufferLine | undefined;\n    newLine = this._cachedBlankLine;\n    if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n      newLine = buffer.getBlankLine(eraseAttr, isWrapped);\n      this._cachedBlankLine = newLine;\n    }\n    newLine.isWrapped = isWrapped;\n\n    const topRow = buffer.ybase + buffer.scrollTop;\n    const bottomRow = buffer.ybase + buffer.scrollBottom;\n\n    if (buffer.scrollTop === 0) {\n      // Determine whether the buffer is going to be trimmed after insertion.\n      const willBufferBeTrimmed = buffer.lines.isFull;\n\n      // Insert the line using the fastest method\n      if (bottomRow === buffer.lines.length - 1) {\n        if (willBufferBeTrimmed) {\n          buffer.lines.recycle().copyFrom(newLine);\n        } else {\n          buffer.lines.push(newLine.clone());\n        }\n      } else {\n        buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n      }\n\n      // Only adjust ybase and ydisp when the buffer is not trimmed\n      if (!willBufferBeTrimmed) {\n        buffer.ybase++;\n        // Only scroll the ydisp with ybase if the user has not scrolled up\n        if (!this.isUserScrolling) {\n          buffer.ydisp++;\n        }\n      } else {\n        // When the buffer is full and the user has scrolled up, keep the text\n        // stable unless ydisp is right at the top\n        if (this.isUserScrolling) {\n          buffer.ydisp = Math.max(buffer.ydisp - 1, 0);\n        }\n      }\n    } else {\n      // scrollTop is non-zero which means no line will be going to the\n      // scrollback, instead we can just shift them in-place.\n      const scrollRegionHeight = bottomRow - topRow + 1 /* as it's zero-based */;\n      buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n      buffer.lines.set(bottomRow, newLine.clone());\n    }\n\n    // Move the viewport to the bottom of the buffer unless the user is\n    // scrolling.\n    if (!this.isUserScrolling) {\n      buffer.ydisp = buffer.ybase;\n    }\n\n    this._onScroll.fire(buffer.ydisp);\n  }\n\n  /**\n   * Scroll the display of the terminal\n   * @param disp The number of lines to scroll down (negative scroll up).\n   * @param suppressScrollEvent Don't emit the scroll event as scrollLines. This is used\n   * to avoid unwanted events being handled by the viewport when the event was triggered from the\n   * viewport originally.\n   */\n  public scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void {\n    const buffer = this.buffer;\n    if (disp < 0) {\n      if (buffer.ydisp === 0) {\n        return;\n      }\n      this.isUserScrolling = true;\n    } else if (disp + buffer.ydisp >= buffer.ybase) {\n      this.isUserScrolling = false;\n    }\n\n    const oldYdisp = buffer.ydisp;\n    buffer.ydisp = Math.max(Math.min(buffer.ydisp + disp, buffer.ybase), 0);\n\n    // No change occurred, don't trigger scroll/refresh\n    if (oldYdisp === buffer.ydisp) {\n      return;\n    }\n\n    if (!suppressScrollEvent) {\n      this._onScroll.fire(buffer.ydisp);\n    }\n  }\n\n  /**\n   * Scroll the display of the terminal by a number of pages.\n   * @param pageCount The number of pages to scroll (negative scrolls up).\n   */\n  public scrollPages(pageCount: number): void {\n    this.scrollLines(pageCount * (this.rows - 1));\n  }\n\n  /**\n   * Scrolls the display of the terminal to the top.\n   */\n  public scrollToTop(): void {\n    this.scrollLines(-this.buffer.ydisp);\n  }\n\n  /**\n   * Scrolls the display of the terminal to the bottom.\n   */\n  public scrollToBottom(): void {\n    this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n  }\n\n  public scrollToLine(line: number): void {\n    const scrollAmount = line - this.buffer.ydisp;\n    if (scrollAmount !== 0) {\n      this.scrollLines(scrollAmount);\n    }\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharsetService } from 'common/services/Services';\nimport { ICharset } from 'common/Types';\n\nexport class CharsetService implements ICharsetService {\n  public serviceBrand: any;\n\n  public charset: ICharset | undefined;\n  public glevel: number = 0;\n\n  private _charsets: (ICharset | undefined)[] = [];\n\n  public reset(): void {\n    this.charset = undefined;\n    this._charsets = [];\n    this.glevel = 0;\n  }\n\n  public setgLevel(g: number): void {\n    this.glevel = g;\n    this.charset = this._charsets[g];\n  }\n\n  public setgCharset(g: number, charset: ICharset | undefined): void {\n    this._charsets[g] = charset;\n    if (this.glevel === g) {\n      this.charset = charset;\n    }\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IBufferService, ICoreService, ICoreMouseService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { ICoreMouseProtocol, ICoreMouseEvent, CoreMouseEncoding, CoreMouseEventType, CoreMouseButton, CoreMouseAction } from 'common/Types';\n\n/**\n * Supported default protocols.\n */\nconst DEFAULT_PROTOCOLS: {[key: string]: ICoreMouseProtocol} = {\n  /**\n   * NONE\n   * Events: none\n   * Modifiers: none\n   */\n  NONE: {\n    events: CoreMouseEventType.NONE,\n    restrict: () => false\n  },\n  /**\n   * X10\n   * Events: mousedown\n   * Modifiers: none\n   */\n  X10: {\n    events: CoreMouseEventType.DOWN,\n    restrict: (e: ICoreMouseEvent) => {\n      // no wheel, no move, no up\n      if (e.button === CoreMouseButton.WHEEL || e.action !== CoreMouseAction.DOWN) {\n        return false;\n      }\n      // no modifiers\n      e.ctrl = false;\n      e.alt = false;\n      e.shift = false;\n      return true;\n    }\n  },\n  /**\n   * VT200\n   * Events: mousedown / mouseup / wheel\n   * Modifiers: all\n   */\n  VT200: {\n    events: CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL,\n    restrict: (e: ICoreMouseEvent) => {\n      // no move\n      if (e.action === CoreMouseAction.MOVE) {\n        return false;\n      }\n      return true;\n    }\n  },\n  /**\n   * DRAG\n   * Events: mousedown / mouseup / wheel / mousedrag\n   * Modifiers: all\n   */\n  DRAG: {\n    events: CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL | CoreMouseEventType.DRAG,\n    restrict: (e: ICoreMouseEvent) => {\n      // no move without button\n      if (e.action === CoreMouseAction.MOVE && e.button === CoreMouseButton.NONE) {\n        return false;\n      }\n      return true;\n    }\n  },\n  /**\n   * ANY\n   * Events: all mouse related events\n   * Modifiers: all\n   */\n  ANY: {\n    events:\n      CoreMouseEventType.DOWN | CoreMouseEventType.UP | CoreMouseEventType.WHEEL\n      | CoreMouseEventType.DRAG | CoreMouseEventType.MOVE,\n    restrict: (e: ICoreMouseEvent) => true\n  }\n};\n\nconst enum Modifiers {\n  SHIFT = 4,\n  ALT = 8,\n  CTRL = 16\n}\n\n// helper for default encoders to generate the event code.\nfunction eventCode(e: ICoreMouseEvent, isSGR: boolean): number {\n  let code = (e.ctrl ? Modifiers.CTRL : 0) | (e.shift ? Modifiers.SHIFT : 0) | (e.alt ? Modifiers.ALT : 0);\n  if (e.button === CoreMouseButton.WHEEL) {\n    code |= 64;\n    code |= e.action;\n  } else {\n    code |= e.button & 3;\n    if (e.button & 4) {\n      code |= 64;\n    }\n    if (e.button & 8) {\n      code |= 128;\n    }\n    if (e.action === CoreMouseAction.MOVE) {\n      code |= CoreMouseAction.MOVE;\n    } else if (e.action === CoreMouseAction.UP && !isSGR) {\n      // special case - only SGR can report button on release\n      // all others have to go with NONE\n      code |= CoreMouseButton.NONE;\n    }\n  }\n  return code;\n}\n\nconst S = String.fromCharCode;\n\n/**\n * Supported default encodings.\n */\nconst DEFAULT_ENCODINGS: {[key: string]: CoreMouseEncoding} = {\n  /**\n   * DEFAULT - CSI M Pb Px Py\n   * Single byte encoding for coords and event code.\n   * Can encode values up to 223 (1-based).\n   */\n  DEFAULT: (e: ICoreMouseEvent) => {\n    const params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];\n    // supress mouse report if we exceed addressible range\n    // Note this is handled differently by emulators\n    // - xterm:         sends 0;0 coords instead\n    // - vte, konsole:  no report\n    if (params[0] > 255 || params[1] > 255 || params[2] > 255) {\n      return '';\n    }\n    return `\\x1b[M${S(params[0])}${S(params[1])}${S(params[2])}`;\n  },\n  /**\n   * SGR - CSI < Pb ; Px ; Py M|m\n   * No encoding limitation.\n   * Can report button on release and works with a well formed sequence.\n   */\n  SGR: (e: ICoreMouseEvent) => {\n    const final = (e.action === CoreMouseAction.UP && e.button !== CoreMouseButton.WHEEL) ? 'm' : 'M';\n    return `\\x1b[<${eventCode(e, true)};${e.col};${e.row}${final}`;\n  }\n};\n\n/**\n * CoreMouseService\n *\n * Provides mouse tracking reports with different protocols and encodings.\n *  - protocols: NONE (default), X10, VT200, DRAG, ANY\n *  - encodings: DEFAULT, SGR (UTF8, URXVT removed in #2507)\n *\n * Custom protocols/encodings can be added by `addProtocol` / `addEncoding`.\n * To activate a protocol/encoding, set `activeProtocol` / `activeEncoding`.\n * Switching a protocol will send a notification event `onProtocolChange`\n * with a list of needed events to track.\n *\n * The service handles the mouse tracking state and decides whether to send\n * a tracking report to the backend based on protocol and encoding limitations.\n * To send a mouse event call `triggerMouseEvent`.\n */\nexport class CoreMouseService implements ICoreMouseService {\n  private _protocols: {[name: string]: ICoreMouseProtocol} = {};\n  private _encodings: {[name: string]: CoreMouseEncoding} = {};\n  private _activeProtocol: string = '';\n  private _activeEncoding: string = '';\n  private _onProtocolChange = new EventEmitter<CoreMouseEventType>();\n  private _lastEvent: ICoreMouseEvent | null = null;\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ICoreService private readonly _coreService: ICoreService\n  ) {\n    // register default protocols and encodings\n    for (const name of Object.keys(DEFAULT_PROTOCOLS)) this.addProtocol(name, DEFAULT_PROTOCOLS[name]);\n    for (const name of Object.keys(DEFAULT_ENCODINGS)) this.addEncoding(name, DEFAULT_ENCODINGS[name]);\n    // call reset to set defaults\n    this.reset();\n  }\n\n  public addProtocol(name: string, protocol: ICoreMouseProtocol): void {\n    this._protocols[name] = protocol;\n  }\n\n  public addEncoding(name: string, encoding: CoreMouseEncoding): void {\n    this._encodings[name] = encoding;\n  }\n\n  public get activeProtocol(): string {\n    return this._activeProtocol;\n  }\n\n  public get areMouseEventsActive(): boolean {\n    return this._protocols[this._activeProtocol].events !== 0;\n  }\n\n  public set activeProtocol(name: string) {\n    if (!this._protocols[name]) {\n      throw new Error(`unknown protocol \"${name}\"`);\n    }\n    this._activeProtocol = name;\n    this._onProtocolChange.fire(this._protocols[name].events);\n  }\n\n  public get activeEncoding(): string {\n    return this._activeEncoding;\n  }\n\n  public set activeEncoding(name: string) {\n    if (!this._encodings[name]) {\n      throw new Error(`unknown encoding \"${name}\"`);\n    }\n    this._activeEncoding = name;\n  }\n\n  public reset(): void {\n    this.activeProtocol = 'NONE';\n    this.activeEncoding = 'DEFAULT';\n    this._lastEvent = null;\n  }\n\n  /**\n   * Event to announce changes in mouse tracking.\n   */\n  public get onProtocolChange(): IEvent<CoreMouseEventType> {\n    return this._onProtocolChange.event;\n  }\n\n  /**\n   * Triggers a mouse event to be sent.\n   *\n   * Returns true if the event passed all protocol restrictions and a report\n   * was sent, otherwise false. The return value may be used to decide whether\n   * the default event action in the bowser component should be omitted.\n   *\n   * Note: The method will change values of the given event object\n   * to fullfill protocol and encoding restrictions.\n   */\n  public triggerMouseEvent(e: ICoreMouseEvent): boolean {\n    // range check for col/row\n    if (e.col < 0 || e.col >= this._bufferService.cols\n        || e.row < 0 || e.row >= this._bufferService.rows) {\n      return false;\n    }\n\n    // filter nonsense combinations of button + action\n    if (e.button === CoreMouseButton.WHEEL && e.action === CoreMouseAction.MOVE) {\n      return false;\n    }\n    if (e.button === CoreMouseButton.NONE && e.action !== CoreMouseAction.MOVE) {\n      return false;\n    }\n    if (e.button !== CoreMouseButton.WHEEL && (e.action === CoreMouseAction.LEFT || e.action === CoreMouseAction.RIGHT)) {\n      return false;\n    }\n\n    // report 1-based coords\n    e.col++;\n    e.row++;\n\n    // debounce move at grid level\n    if (e.action === CoreMouseAction.MOVE && this._lastEvent && this._compareEvents(this._lastEvent, e)) {\n      return false;\n    }\n\n    // apply protocol restrictions\n    if (!this._protocols[this._activeProtocol].restrict(e)) {\n      return false;\n    }\n\n    // encode report and send\n    const report = this._encodings[this._activeEncoding](e);\n    if (report) {\n      // always send DEFAULT as binary data\n      if (this._activeEncoding === 'DEFAULT') {\n        this._coreService.triggerBinaryEvent(report);\n      } else {\n        this._coreService.triggerDataEvent(report, true);\n      }\n    }\n\n    this._lastEvent = e;\n\n    return true;\n  }\n\n  public explainEvents(events: CoreMouseEventType): {[event: string]: boolean} {\n    return {\n      down: !!(events & CoreMouseEventType.DOWN),\n      up: !!(events & CoreMouseEventType.UP),\n      drag: !!(events & CoreMouseEventType.DRAG),\n      move: !!(events & CoreMouseEventType.MOVE),\n      wheel: !!(events & CoreMouseEventType.WHEEL)\n    };\n  }\n\n  private _compareEvents(e1: ICoreMouseEvent, e2: ICoreMouseEvent): boolean {\n    if (e1.col !== e2.col) return false;\n    if (e1.row !== e2.row) return false;\n    if (e1.button !== e2.button) return false;\n    if (e1.action !== e2.action) return false;\n    if (e1.ctrl !== e2.ctrl) return false;\n    if (e1.alt !== e2.alt) return false;\n    if (e1.shift !== e2.shift) return false;\n    return true;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreService, ILogService, IOptionsService, IBufferService } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { IDecPrivateModes, IModes } from 'common/Types';\nimport { clone } from 'common/Clone';\nimport { Disposable } from 'common/Lifecycle';\n\nconst DEFAULT_MODES: IModes = Object.freeze({\n  insertMode: false\n});\n\nconst DEFAULT_DEC_PRIVATE_MODES: IDecPrivateModes = Object.freeze({\n  applicationCursorKeys: false,\n  applicationKeypad: false,\n  bracketedPasteMode: false,\n  origin: false,\n  reverseWraparound: false,\n  sendFocus: false,\n  wraparound: true // defaults: xterm - true, vt100 - false\n});\n\nexport class CoreService extends Disposable implements ICoreService {\n  public serviceBrand: any;\n\n  public isCursorInitialized: boolean = false;\n  public isCursorHidden: boolean = false;\n  public modes: IModes;\n  public decPrivateModes: IDecPrivateModes;\n\n  // Circular dependency, this must be unset or memory will leak after Terminal.dispose\n  private _scrollToBottom: (() => void) | undefined;\n\n  private _onData = this.register(new EventEmitter<string>());\n  public get onData(): IEvent<string> { return this._onData.event; }\n  private _onUserInput = this.register(new EventEmitter<void>());\n  public get onUserInput(): IEvent<void> { return this._onUserInput.event; }\n  private _onBinary = this.register(new EventEmitter<string>());\n  public get onBinary(): IEvent<string> { return this._onBinary.event; }\n\n  constructor(\n    // TODO: Move this into a service\n    scrollToBottom: () => void,\n    @IBufferService private readonly _bufferService: IBufferService,\n    @ILogService private readonly _logService: ILogService,\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n    this._scrollToBottom = scrollToBottom;\n    this.register({ dispose: () => this._scrollToBottom = undefined });\n    this.modes = clone(DEFAULT_MODES);\n    this.decPrivateModes = clone(DEFAULT_DEC_PRIVATE_MODES);\n  }\n\n  public reset(): void {\n    this.modes = clone(DEFAULT_MODES);\n    this.decPrivateModes = clone(DEFAULT_DEC_PRIVATE_MODES);\n  }\n\n  public triggerDataEvent(data: string, wasUserInput: boolean = false): void {\n    // Prevents all events to pty process if stdin is disabled\n    if (this._optionsService.options.disableStdin) {\n      return;\n    }\n\n    // Input is being sent to the terminal, the terminal should focus the prompt.\n    const buffer = this._bufferService.buffer;\n    if (buffer.ybase !== buffer.ydisp) {\n      this._scrollToBottom!();\n    }\n\n    // Fire onUserInput so listeners can react as well (eg. clear selection)\n    if (wasUserInput) {\n      this._onUserInput.fire();\n    }\n\n    // Fire onData API\n    this._logService.debug(`sending data \"${data}\"`, () => data.split('').map(e => e.charCodeAt(0)));\n    this._onData.fire(data);\n  }\n\n  public triggerBinaryEvent(data: string): void {\n    if (this._optionsService.options.disableStdin) {\n      return;\n    }\n    this._logService.debug(`sending binary \"${data}\"`, () => data.split('').map(e => e.charCodeAt(0)));\n    this._onBinary.fire(data);\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IBufferService, IDirtyRowService } from 'common/services/Services';\n\nexport class DirtyRowService implements IDirtyRowService {\n  public serviceBrand: any;\n\n  private _start!: number;\n  private _end!: number;\n\n  public get start(): number { return this._start; }\n  public get end(): number { return this._end; }\n\n  constructor(\n    @IBufferService private readonly _bufferService: IBufferService\n  ) {\n    this.clearRange();\n  }\n\n  public clearRange(): void {\n    this._start = this._bufferService.buffer.y;\n    this._end = this._bufferService.buffer.y;\n  }\n\n  public markDirty(y: number): void {\n    if (y < this._start) {\n      this._start = y;\n    } else if (y > this._end) {\n      this._end = y;\n    }\n  }\n\n  public markRangeDirty(y1: number, y2: number): void {\n    if (y1 > y2) {\n      const temp = y1;\n      y1 = y2;\n      y2 = temp;\n    }\n    if (y1 < this._start) {\n      this._start = y1;\n    }\n    if (y2 > this._end) {\n      this._end = y2;\n    }\n  }\n\n  public markAllDirty(): void {\n    this.markRangeDirty(0, this._bufferService.rows - 1);\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * This was heavily inspired from microsoft/vscode's dependency injection system (MIT).\n */\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IInstantiationService, IServiceIdentifier } from 'common/services/Services';\nimport { getServiceDependencies } from 'common/services/ServiceRegistry';\n\nexport class ServiceCollection {\n\n  private _entries = new Map<IServiceIdentifier<any>, any>();\n\n  constructor(...entries: [IServiceIdentifier<any>, any][]) {\n    for (const [id, service] of entries) {\n      this.set(id, service);\n    }\n  }\n\n  public set<T>(id: IServiceIdentifier<T>, instance: T): T {\n    const result = this._entries.get(id);\n    this._entries.set(id, instance);\n    return result;\n  }\n\n  public forEach(callback: (id: IServiceIdentifier<any>, instance: any) => any): void {\n    this._entries.forEach((value, key) => callback(key, value));\n  }\n\n  public has(id: IServiceIdentifier<any>): boolean {\n    return this._entries.has(id);\n  }\n\n  public get<T>(id: IServiceIdentifier<T>): T | undefined {\n    return this._entries.get(id);\n  }\n}\n\nexport class InstantiationService implements IInstantiationService {\n  public serviceBrand: undefined;\n\n  private readonly _services: ServiceCollection = new ServiceCollection();\n\n  constructor() {\n    this._services.set(IInstantiationService, this);\n  }\n\n  public setService<T>(id: IServiceIdentifier<T>, instance: T): void {\n    this._services.set(id, instance);\n  }\n\n  public getService<T>(id: IServiceIdentifier<T>): T | undefined {\n    return this._services.get(id);\n  }\n\n  public createInstance<T>(ctor: any, ...args: any[]): T {\n    const serviceDependencies = getServiceDependencies(ctor).sort((a, b) => a.index - b.index);\n\n    const serviceArgs: any[] = [];\n    for (const dependency of serviceDependencies) {\n      const service = this._services.get(dependency.id);\n      if (!service) {\n        throw new Error(`[createInstance] ${ctor.name} depends on UNKNOWN service ${dependency.id}.`);\n      }\n      serviceArgs.push(service);\n    }\n\n    const firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;\n\n    // check for argument mismatches, adjust static args if needed\n    if (args.length !== firstServiceArgPos) {\n      throw new Error(`[createInstance] First service dependency of ${ctor.name} at position ${firstServiceArgPos + 1} conflicts with ${args.length} static arguments`);\n    }\n\n    // now create the instance\n    return new ctor(...[...args, ...serviceArgs]);\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ILogService, IOptionsService, LogLevelEnum } from 'common/services/Services';\n\ntype LogType = (message?: any, ...optionalParams: any[]) => void;\n\ninterface IConsole {\n  log: LogType;\n  error: LogType;\n  info: LogType;\n  trace: LogType;\n  warn: LogType;\n}\n\n// console is available on both node.js and browser contexts but the common\n// module doesn't depend on them so we need to explicitly declare it.\ndeclare const console: IConsole;\n\nconst optionsKeyToLogLevel: { [key: string]: LogLevelEnum } = {\n  debug: LogLevelEnum.DEBUG,\n  info: LogLevelEnum.INFO,\n  warn: LogLevelEnum.WARN,\n  error: LogLevelEnum.ERROR,\n  off: LogLevelEnum.OFF\n};\n\nconst LOG_PREFIX = 'xterm.js: ';\n\nexport class LogService implements ILogService {\n  public serviceBrand: any;\n\n  public logLevel: LogLevelEnum = LogLevelEnum.OFF;\n\n  constructor(\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    this._updateLogLevel();\n    this._optionsService.onOptionChange(key => {\n      if (key === 'logLevel') {\n        this._updateLogLevel();\n      }\n    });\n  }\n\n  private _updateLogLevel(): void {\n    this.logLevel = optionsKeyToLogLevel[this._optionsService.options.logLevel];\n  }\n\n  private _evalLazyOptionalParams(optionalParams: any[]): void {\n    for (let i = 0; i < optionalParams.length; i++) {\n      if (typeof optionalParams[i] === 'function') {\n        optionalParams[i] = optionalParams[i]();\n      }\n    }\n  }\n\n  private _log(type: LogType, message: string, optionalParams: any[]): void {\n    this._evalLazyOptionalParams(optionalParams);\n    type.call(console, LOG_PREFIX + message, ...optionalParams);\n  }\n\n  public debug(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.DEBUG) {\n      this._log(console.log, message, optionalParams);\n    }\n  }\n\n  public info(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.INFO) {\n      this._log(console.info, message, optionalParams);\n    }\n  }\n\n  public warn(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.WARN) {\n      this._log(console.warn, message, optionalParams);\n    }\n  }\n\n  public error(message: string, ...optionalParams: any[]): void {\n    if (this.logLevel <= LogLevelEnum.ERROR) {\n      this._log(console.error, message, optionalParams);\n    }\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IOptionsService, ITerminalOptions, FontWeight } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { isMac } from 'common/Platform';\n\n// Source: https://freesound.org/people/altemark/sounds/45759/\n// This sound is released under the Creative Commons Attribution 3.0 Unported\n// (CC BY 3.0) license. It was created by 'altemark'. No modifications have been\n// made, apart from the conversion to base64.\nexport const DEFAULT_BELL_SOUND = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq';\n\nexport const DEFAULT_OPTIONS: Readonly<ITerminalOptions> = {\n  cols: 80,\n  rows: 24,\n  cursorBlink: false,\n  cursorStyle: 'block',\n  cursorWidth: 1,\n  customGlyphs: true,\n  bellSound: DEFAULT_BELL_SOUND,\n  bellStyle: 'none',\n  drawBoldTextInBrightColors: true,\n  fastScrollModifier: 'alt',\n  fastScrollSensitivity: 5,\n  fontFamily: 'courier-new, courier, monospace',\n  fontSize: 15,\n  fontWeight: 'normal',\n  fontWeightBold: 'bold',\n  lineHeight: 1.0,\n  linkTooltipHoverDuration: 500,\n  letterSpacing: 0,\n  logLevel: 'info',\n  scrollback: 1000,\n  scrollSensitivity: 1,\n  screenReaderMode: false,\n  macOptionIsMeta: false,\n  macOptionClickForcesSelection: false,\n  minimumContrastRatio: 1,\n  disableStdin: false,\n  allowProposedApi: true,\n  allowTransparency: false,\n  tabStopWidth: 8,\n  theme: {},\n  rightClickSelectsWord: isMac,\n  rendererType: 'canvas',\n  windowOptions: {},\n  windowsMode: false,\n  wordSeparator: ' ()[]{}\\',\"`',\n  altClickMovesCursor: true,\n  convertEol: false,\n  termName: 'xterm',\n  cancelEvents: false\n};\n\nconst FONT_WEIGHT_OPTIONS: Extract<FontWeight, string>[] = ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'];\n\nexport class OptionsService implements IOptionsService {\n  public serviceBrand: any;\n\n  private _options: ITerminalOptions;\n  public options: ITerminalOptions;\n\n  private _onOptionChange = new EventEmitter<string>();\n  public get onOptionChange(): IEvent<string> { return this._onOptionChange.event; }\n\n  constructor(options: Partial<ITerminalOptions>) {\n    // set the default value of each option\n    this._options = { ...DEFAULT_OPTIONS };\n    for (const key in options) {\n      if (key in this._options) {\n        try {\n          const newValue = options[key];\n          this._options[key] = this._sanitizeAndValidateOption(key, newValue);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n\n    // set up getters and setters for each option\n    this.options = this._setupOptions(this._options);\n  }\n\n  private _setupOptions(options: ITerminalOptions): ITerminalOptions {\n    const copiedOptions = { ... options };\n    for (const propName in copiedOptions) {\n      Object.defineProperty(copiedOptions, propName, {\n        get: () => {\n          if (!(propName in DEFAULT_OPTIONS)) {\n            throw new Error(`No option with key \"${propName}\"`);\n          }\n          return this._options[propName];\n        },\n        set: (value: any) => {\n          if (!(propName in DEFAULT_OPTIONS)) {\n            throw new Error(`No option with key \"${propName}\"`);\n          }\n\n          value = this._sanitizeAndValidateOption(propName, value);\n          // Don't fire an option change event if they didn't change\n          if (this._options[propName] !== value) {\n            this._options[propName] = value;\n            this._onOptionChange.fire(propName);\n          }\n        }\n      });\n    }\n    return copiedOptions;\n  }\n\n  public setOption(key: string, value: any): void {\n    this.options[key] = value;\n  }\n\n  private _sanitizeAndValidateOption(key: string, value: any): any {\n    switch (key) {\n      case 'bellStyle':\n      case 'cursorStyle':\n      case 'rendererType':\n      case 'wordSeparator':\n        if (!value) {\n          value = DEFAULT_OPTIONS[key];\n        }\n        break;\n      case 'fontWeight':\n      case 'fontWeightBold':\n        if (typeof value === 'number' && 1 <= value && value <= 1000) {\n          // already valid numeric value\n          break;\n        }\n        value = FONT_WEIGHT_OPTIONS.includes(value) ? value : DEFAULT_OPTIONS[key];\n        break;\n      case 'cursorWidth':\n        value = Math.floor(value);\n        // Fall through for bounds check\n      case 'lineHeight':\n      case 'tabStopWidth':\n        if (value < 1) {\n          throw new Error(`${key} cannot be less than 1, value: ${value}`);\n        }\n        break;\n      case 'minimumContrastRatio':\n        value = Math.max(1, Math.min(21, Math.round(value * 10) / 10));\n        break;\n      case 'scrollback':\n        value = Math.min(value, 4294967295);\n        if (value < 0) {\n          throw new Error(`${key} cannot be less than 0, value: ${value}`);\n        }\n        break;\n      case 'fastScrollSensitivity':\n      case 'scrollSensitivity':\n        if (value <= 0) {\n          throw new Error(`${key} cannot be less than or equal to 0, value: ${value}`);\n        }\n      case 'rows':\n      case 'cols':\n        if (!value && value !== 0) {\n          throw new Error(`${key} must be numeric, value: ${value}`);\n        }\n        break;\n    }\n    return value;\n  }\n\n  public getOption(key: string): any {\n    return this.options[key];\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * This was heavily inspired from microsoft/vscode's dependency injection system (MIT).\n */\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IServiceIdentifier } from 'common/services/Services';\n\nconst DI_TARGET = 'di$target';\nconst DI_DEPENDENCIES = 'di$dependencies';\n\nexport const serviceRegistry: Map<string, IServiceIdentifier<any>> = new Map();\n\nexport function getServiceDependencies(ctor: any): { id: IServiceIdentifier<any>, index: number, optional: boolean }[] {\n  return ctor[DI_DEPENDENCIES] || [];\n}\n\nexport function createDecorator<T>(id: string): IServiceIdentifier<T> {\n  if (serviceRegistry.has(id)) {\n    return serviceRegistry.get(id)!;\n  }\n\n  const decorator: any = function (target: Function, key: string, index: number): any {\n    if (arguments.length !== 3) {\n      throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n    }\n\n    storeServiceDependency(decorator, target, index);\n  };\n\n  decorator.toString = () => id;\n\n  serviceRegistry.set(id, decorator);\n  return decorator;\n}\n\nfunction storeServiceDependency(id: Function, target: Function, index: number): void {\n  if ((target as any)[DI_TARGET] === target) {\n    (target as any)[DI_DEPENDENCIES].push({ id, index });\n  } else {\n    (target as any)[DI_DEPENDENCIES] = [{ id, index }];\n    (target as any)[DI_TARGET] = target;\n  }\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IEvent } from 'common/EventEmitter';\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { IDecPrivateModes, ICoreMouseEvent, CoreMouseEncoding, ICoreMouseProtocol, CoreMouseEventType, ICharset, IWindowOptions, IModes, IAttributeData, ScrollSource } from 'common/Types';\nimport { createDecorator } from 'common/services/ServiceRegistry';\n\nexport const IBufferService = createDecorator<IBufferService>('BufferService');\nexport interface IBufferService {\n  serviceBrand: undefined;\n\n  readonly cols: number;\n  readonly rows: number;\n  readonly buffer: IBuffer;\n  readonly buffers: IBufferSet;\n  isUserScrolling: boolean;\n  onResize: IEvent<{ cols: number, rows: number }>;\n  onScroll: IEvent<number>;\n  scroll(eraseAttr: IAttributeData, isWrapped?: boolean): void;\n  scrollToBottom(): void;\n  scrollToTop(): void;\n  scrollToLine(line: number): void;\n  scrollLines(disp: number, suppressScrollEvent?: boolean, source?: ScrollSource): void;\n  scrollPages(pageCount: number): void;\n  resize(cols: number, rows: number): void;\n  reset(): void;\n}\n\nexport const ICoreMouseService = createDecorator<ICoreMouseService>('CoreMouseService');\nexport interface ICoreMouseService {\n  activeProtocol: string;\n  activeEncoding: string;\n  areMouseEventsActive: boolean;\n  addProtocol(name: string, protocol: ICoreMouseProtocol): void;\n  addEncoding(name: string, encoding: CoreMouseEncoding): void;\n  reset(): void;\n\n  /**\n   * Triggers a mouse event to be sent.\n   *\n   * Returns true if the event passed all protocol restrictions and a report\n   * was sent, otherwise false. The return value may be used to decide whether\n   * the default event action in the bowser component should be omitted.\n   *\n   * Note: The method will change values of the given event object\n   * to fullfill protocol and encoding restrictions.\n   */\n  triggerMouseEvent(event: ICoreMouseEvent): boolean;\n\n  /**\n   * Event to announce changes in mouse tracking.\n   */\n  onProtocolChange: IEvent<CoreMouseEventType>;\n\n  /**\n   * Human readable version of mouse events.\n   */\n  explainEvents(events: CoreMouseEventType): { [event: string]: boolean };\n}\n\nexport const ICoreService = createDecorator<ICoreService>('CoreService');\nexport interface ICoreService {\n  serviceBrand: undefined;\n\n  /**\n   * Initially the cursor will not be visible until the first time the terminal\n   * is focused.\n   */\n  isCursorInitialized: boolean;\n  isCursorHidden: boolean;\n\n  readonly modes: IModes;\n  readonly decPrivateModes: IDecPrivateModes;\n\n  readonly onData: IEvent<string>;\n  readonly onUserInput: IEvent<void>;\n  readonly onBinary: IEvent<string>;\n\n  reset(): void;\n\n  /**\n   * Triggers the onData event in the public API.\n   * @param data The data that is being emitted.\n   * @param wasFromUser Whether the data originated from the user (as opposed to\n   * resulting from parsing incoming data). When true this will also:\n   * - Scroll to the bottom of the buffer.s\n   * - Fire the `onUserInput` event (so selection can be cleared).\n   */\n  triggerDataEvent(data: string, wasUserInput?: boolean): void;\n\n  /**\n   * Triggers the onBinary event in the public API.\n   * @param data The data that is being emitted.\n   */\n  triggerBinaryEvent(data: string): void;\n}\n\nexport const ICharsetService = createDecorator<ICharsetService>('CharsetService');\nexport interface ICharsetService {\n  serviceBrand: undefined;\n\n  charset: ICharset | undefined;\n  readonly glevel: number;\n\n  reset(): void;\n\n  /**\n   * Set the G level of the terminal.\n   * @param g\n   */\n  setgLevel(g: number): void;\n\n  /**\n   * Set the charset for the given G level of the terminal.\n   * @param g\n   * @param charset\n   */\n  setgCharset(g: number, charset: ICharset | undefined): void;\n}\n\nexport const IDirtyRowService = createDecorator<IDirtyRowService>('DirtyRowService');\nexport interface IDirtyRowService {\n  serviceBrand: undefined;\n\n  readonly start: number;\n  readonly end: number;\n\n  clearRange(): void;\n  markDirty(y: number): void;\n  markRangeDirty(y1: number, y2: number): void;\n  markAllDirty(): void;\n}\n\nexport interface IServiceIdentifier<T> {\n  (...args: any[]): void;\n  type: T;\n}\n\nexport interface IBrandedService {\n  serviceBrand: undefined;\n}\n\ntype GetLeadingNonServiceArgs<Args> =\n  Args extends [...IBrandedService[]] ? []\n    : Args extends [infer A1, ...IBrandedService[]] ? [A1]\n      : Args extends [infer A1, infer A2, ...IBrandedService[]] ? [A1, A2]\n        : Args extends [infer A1, infer A2, infer A3, ...IBrandedService[]] ? [A1, A2, A3]\n          : Args extends [infer A1, infer A2, infer A3, infer A4, ...IBrandedService[]] ? [A1, A2, A3, A4]\n            : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, ...IBrandedService[]] ? [A1, A2, A3, A4, A5]\n              : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6]\n                : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7]\n                  : Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, infer A8, ...IBrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7, A8]\n                    : never;\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('InstantiationService');\nexport interface IInstantiationService {\n  serviceBrand: undefined;\n\n  setService<T>(id: IServiceIdentifier<T>, instance: T): void;\n  getService<T>(id: IServiceIdentifier<T>): T | undefined;\n  createInstance<Ctor extends new (...args: any[]) => any, R extends InstanceType<Ctor>>(t: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n}\n\nexport enum LogLevelEnum {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  OFF = 4\n}\n\nexport const ILogService = createDecorator<ILogService>('LogService');\nexport interface ILogService {\n  serviceBrand: undefined;\n\n  logLevel: LogLevelEnum;\n\n  debug(message: any, ...optionalParams: any[]): void;\n  info(message: any, ...optionalParams: any[]): void;\n  warn(message: any, ...optionalParams: any[]): void;\n  error(message: any, ...optionalParams: any[]): void;\n}\n\nexport const IOptionsService = createDecorator<IOptionsService>('OptionsService');\nexport interface IOptionsService {\n  serviceBrand: undefined;\n\n  readonly options: ITerminalOptions;\n\n  readonly onOptionChange: IEvent<string>;\n\n  setOption<T>(key: string, value: T): void;\n  getOption<T>(key: string): T | undefined;\n}\n\nexport type FontWeight = 'normal' | 'bold' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900' | number;\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'off';\n\nexport type RendererType = 'dom' | 'canvas';\n\nexport interface ITerminalOptions {\n  allowProposedApi: boolean;\n  allowTransparency: boolean;\n  altClickMovesCursor: boolean;\n  bellSound: string;\n  bellStyle: 'none' | 'sound' /* | 'visual' | 'both' */;\n  cols: number;\n  convertEol: boolean;\n  cursorBlink: boolean;\n  cursorStyle: 'block' | 'underline' | 'bar';\n  cursorWidth: number;\n  customGlyphs: boolean;\n  disableStdin: boolean;\n  drawBoldTextInBrightColors: boolean;\n  fastScrollModifier: 'alt' | 'ctrl' | 'shift' | undefined;\n  fastScrollSensitivity: number;\n  fontSize: number;\n  fontFamily: string;\n  fontWeight: FontWeight;\n  fontWeightBold: FontWeight;\n  letterSpacing: number;\n  lineHeight: number;\n  linkTooltipHoverDuration: number;\n  logLevel: LogLevel;\n  macOptionIsMeta: boolean;\n  macOptionClickForcesSelection: boolean;\n  minimumContrastRatio: number;\n  rendererType: RendererType;\n  rightClickSelectsWord: boolean;\n  rows: number;\n  screenReaderMode: boolean;\n  scrollback: number;\n  scrollSensitivity: number;\n  tabStopWidth: number;\n  theme: ITheme;\n  windowsMode: boolean;\n  windowOptions: IWindowOptions;\n  wordSeparator: string;\n\n  [key: string]: any;\n  cancelEvents: boolean;\n  termName: string;\n}\n\nexport interface ITheme {\n  foreground?: string;\n  background?: string;\n  cursor?: string;\n  cursorAccent?: string;\n  selection?: string;\n  black?: string;\n  red?: string;\n  green?: string;\n  yellow?: string;\n  blue?: string;\n  magenta?: string;\n  cyan?: string;\n  white?: string;\n  brightBlack?: string;\n  brightRed?: string;\n  brightGreen?: string;\n  brightYellow?: string;\n  brightBlue?: string;\n  brightMagenta?: string;\n  brightCyan?: string;\n  brightWhite?: string;\n}\n\nexport const IUnicodeService = createDecorator<IUnicodeService>('UnicodeService');\nexport interface IUnicodeService {\n  serviceBrand: undefined;\n  /** Register an Unicode version provider. */\n  register(provider: IUnicodeVersionProvider): void;\n  /** Registered Unicode versions. */\n  readonly versions: string[];\n  /** Currently active version. */\n  activeVersion: string;\n  /** Event triggered, when activate version changed. */\n  readonly onChange: IEvent<string>;\n\n  /**\n   * Unicode version dependent\n   */\n  wcwidth(codepoint: number): number;\n  getStringCellWidth(s: string): number;\n}\n\nexport interface IUnicodeVersionProvider {\n  readonly version: string;\n  wcwidth(ucs: number): 0 | 1 | 2;\n}\n", "/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { IUnicodeService, IUnicodeVersionProvider } from 'common/services/Services';\nimport { EventEmitter, IEvent } from 'common/EventEmitter';\nimport { UnicodeV6 } from 'common/input/UnicodeV6';\n\n\nexport class UnicodeService implements IUnicodeService {\n  public serviceBrand: any;\n\n  private _providers: {[key: string]: IUnicodeVersionProvider} = Object.create(null);\n  private _active: string = '';\n  private _activeProvider: IUnicodeVersionProvider;\n  private _onChange = new EventEmitter<string>();\n  public get onChange(): IEvent<string> { return this._onChange.event; }\n\n  constructor() {\n    const defaultProvider = new UnicodeV6();\n    this.register(defaultProvider);\n    this._active = defaultProvider.version;\n    this._activeProvider = defaultProvider;\n  }\n\n  public get versions(): string[] {\n    return Object.keys(this._providers);\n  }\n\n  public get activeVersion(): string {\n    return this._active;\n  }\n\n  public set activeVersion(version: string) {\n    if (!this._providers[version]) {\n      throw new Error(`unknown Unicode version \"${version}\"`);\n    }\n    this._active = version;\n    this._activeProvider = this._providers[version];\n    this._onChange.fire(version);\n  }\n\n  public register(provider: IUnicodeVersionProvider): void {\n    this._providers[provider.version] = provider;\n  }\n\n  /**\n   * Unicode version dependent interface.\n   */\n  public wcwidth(num: number): number {\n    return this._activeProvider.wcwidth(num);\n  }\n\n  public getStringCellWidth(s: string): number {\n    let result = 0;\n    const length = s.length;\n    for (let i = 0; i < length; ++i) {\n      let code = s.charCodeAt(i);\n      // surrogate pair first\n      if (0xD800 <= code && code <= 0xDBFF) {\n        if (++i >= length) {\n          // this should not happen with strings retrieved from\n          // Buffer.translateToString as it converts from UTF-32\n          // and therefore always should contain the second part\n          // for any other string we still have to handle it somehow:\n          // simply treat the lonely surrogate first as a single char (UCS-2 behavior)\n          return result + this.wcwidth(code);\n        }\n        const second = s.charCodeAt(i);\n        // convert surrogate pair to high codepoint only for valid second part (UTF-16)\n        // otherwise treat them independently (UCS-2 behavior)\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        } else {\n          result += this.wcwidth(second);\n        }\n      }\n      result += this.wcwidth(code);\n    }\n    return result;\n  }\n}\n", "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n", "/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Terminal as ITerminalApi, IMarker, IDisposable, ILinkMatcherOptions, ITheme, ILocalizableStrings, ITerminalAddon, ISelectionPosition, IBufferNamespace as IBufferNamespaceApi, IParser, ILinkProvider, IUnicodeHandling, FontWeight, IModes } from 'xterm';\nimport { ITerminal } from 'browser/Types';\nimport { Terminal as TerminalCore } from 'browser/Terminal';\nimport * as Strings from 'browser/LocalizableStrings';\nimport { IEvent } from 'common/EventEmitter';\nimport { ParserApi } from 'common/public/ParserApi';\nimport { UnicodeApi } from 'common/public/UnicodeApi';\nimport { AddonManager } from 'common/public/AddonManager';\nimport { BufferNamespaceApi } from 'common/public/BufferNamespaceApi';\nimport { ITerminalOptions } from 'common/Types';\n\n/**\n * The set of options that only have an effect when set in the Terminal constructor.\n */\nconst CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\n\nexport class Terminal implements ITerminalApi {\n  private _core: ITerminal;\n  private _addonManager: AddonManager;\n  private _parser: IParser | undefined;\n  private _buffer: BufferNamespaceApi | undefined;\n  private _publicOptions: ITerminalOptions;\n\n  constructor(options?: ITerminalOptions) {\n    this._core = new TerminalCore(options);\n    this._addonManager = new AddonManager();\n\n    this._publicOptions = {};\n    for (const propName in this._core.options) {\n      Object.defineProperty(this._publicOptions, propName, {\n        get: () => {\n          return this._core.options[propName];\n        },\n        set: (value: any) => {\n          this._checkReadonlyOptions(propName);\n          this._core.options[propName] = value;\n        }\n      });\n    }\n  }\n\n  private _checkReadonlyOptions(propName: string): void {\n    // Throw an error if any constructor only option is modified\n    // from terminal.options\n    // Modifications from anywhere else are allowed\n    if (CONSTRUCTOR_ONLY_OPTIONS.includes(propName)) {\n      throw new Error(`Option \"${propName}\" can only be set in the constructor`);\n    }\n  }\n\n  private _checkProposedApi(): void {\n    if (!this._core.optionsService.options.allowProposedApi) {\n      throw new Error('You must set the allowProposedApi option to true to use proposed API');\n    }\n  }\n\n  public get onBell(): IEvent<void> { return this._core.onBell; }\n  public get onBinary(): IEvent<string> { return this._core.onBinary; }\n  public get onCursorMove(): IEvent<void> { return this._core.onCursorMove; }\n  public get onData(): IEvent<string> { return this._core.onData; }\n  public get onKey(): IEvent<{ key: string, domEvent: KeyboardEvent }> { return this._core.onKey; }\n  public get onLineFeed(): IEvent<void> { return this._core.onLineFeed; }\n  public get onRender(): IEvent<{ start: number, end: number }> { return this._core.onRender; }\n  public get onResize(): IEvent<{ cols: number, rows: number }> { return this._core.onResize; }\n  public get onScroll(): IEvent<number> { return this._core.onScroll; }\n  public get onSelectionChange(): IEvent<void> { return this._core.onSelectionChange; }\n  public get onTitleChange(): IEvent<string> { return this._core.onTitleChange; }\n\n  public get element(): HTMLElement | undefined { return this._core.element; }\n  public get parser(): IParser {\n    this._checkProposedApi();\n    if (!this._parser) {\n      this._parser = new ParserApi(this._core);\n    }\n    return this._parser;\n  }\n  public get unicode(): IUnicodeHandling {\n    this._checkProposedApi();\n    return new UnicodeApi(this._core);\n  }\n  public get textarea(): HTMLTextAreaElement | undefined { return this._core.textarea; }\n  public get rows(): number { return this._core.rows; }\n  public get cols(): number { return this._core.cols; }\n  public get buffer(): IBufferNamespaceApi {\n    this._checkProposedApi();\n    if (!this._buffer) {\n      this._buffer = new BufferNamespaceApi(this._core);\n    }\n    return this._buffer;\n  }\n  public get markers(): ReadonlyArray<IMarker> {\n    this._checkProposedApi();\n    return this._core.markers;\n  }\n  public get modes(): IModes {\n    const m = this._core.coreService.decPrivateModes;\n    let mouseTrackingMode: 'none' | 'x10' | 'vt200' | 'drag' | 'any' = 'none';\n    switch (this._core.coreMouseService.activeProtocol) {\n      case 'X10': mouseTrackingMode = 'x10'; break;\n      case 'VT200': mouseTrackingMode = 'vt200'; break;\n      case 'DRAG': mouseTrackingMode = 'drag'; break;\n      case 'ANY': mouseTrackingMode = 'any'; break;\n    }\n    return {\n      applicationCursorKeysMode: m.applicationCursorKeys,\n      applicationKeypadMode: m.applicationKeypad,\n      bracketedPasteMode: m.bracketedPasteMode,\n      insertMode: this._core.coreService.modes.insertMode,\n      mouseTrackingMode: mouseTrackingMode,\n      originMode: m.origin,\n      reverseWraparoundMode: m.reverseWraparound,\n      sendFocusMode: m.sendFocus,\n      wraparoundMode: m.wraparound\n    };\n  }\n  public get options(): ITerminalOptions {\n    return this._publicOptions;\n  }\n  public set options(options: ITerminalOptions) {\n    for (const propName in options) {\n      this._publicOptions[propName] = options[propName];\n    }\n  }\n  public blur(): void {\n    this._core.blur();\n  }\n  public focus(): void {\n    this._core.focus();\n  }\n  public resize(columns: number, rows: number): void {\n    this._verifyIntegers(columns, rows);\n    this._core.resize(columns, rows);\n  }\n  public open(parent: HTMLElement): void {\n    this._core.open(parent);\n  }\n  public attachCustomKeyEventHandler(customKeyEventHandler: (event: KeyboardEvent) => boolean): void {\n    this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n  }\n  public registerLinkMatcher(regex: RegExp, handler: (event: MouseEvent, uri: string) => void, options?: ILinkMatcherOptions): number {\n    this._checkProposedApi();\n    return this._core.registerLinkMatcher(regex, handler, options);\n  }\n  public deregisterLinkMatcher(matcherId: number): void {\n    this._checkProposedApi();\n    this._core.deregisterLinkMatcher(matcherId);\n  }\n  public registerLinkProvider(linkProvider: ILinkProvider): IDisposable {\n    this._checkProposedApi();\n    return this._core.registerLinkProvider(linkProvider);\n  }\n  public registerCharacterJoiner(handler: (text: string) => [number, number][]): number {\n    this._checkProposedApi();\n    return this._core.registerCharacterJoiner(handler);\n  }\n  public deregisterCharacterJoiner(joinerId: number): void {\n    this._checkProposedApi();\n    this._core.deregisterCharacterJoiner(joinerId);\n  }\n  public registerMarker(cursorYOffset: number): IMarker | undefined {\n    this._checkProposedApi();\n    this._verifyIntegers(cursorYOffset);\n    return this._core.addMarker(cursorYOffset);\n  }\n  public addMarker(cursorYOffset: number): IMarker | undefined {\n    return this.registerMarker(cursorYOffset);\n  }\n  public hasSelection(): boolean {\n    return this._core.hasSelection();\n  }\n  public select(column: number, row: number, length: number): void {\n    this._verifyIntegers(column, row, length);\n    this._core.select(column, row, length);\n  }\n  public getSelection(): string {\n    return this._core.getSelection();\n  }\n  public getSelectionPosition(): ISelectionPosition | undefined {\n    return this._core.getSelectionPosition();\n  }\n  public clearSelection(): void {\n    this._core.clearSelection();\n  }\n  public selectAll(): void {\n    this._core.selectAll();\n  }\n  public selectLines(start: number, end: number): void {\n    this._verifyIntegers(start, end);\n    this._core.selectLines(start, end);\n  }\n  public dispose(): void {\n    this._addonManager.dispose();\n    this._core.dispose();\n  }\n  public scrollLines(amount: number): void {\n    this._verifyIntegers(amount);\n    this._core.scrollLines(amount);\n  }\n  public scrollPages(pageCount: number): void {\n    this._verifyIntegers(pageCount);\n    this._core.scrollPages(pageCount);\n  }\n  public scrollToTop(): void {\n    this._core.scrollToTop();\n  }\n  public scrollToBottom(): void {\n    this._core.scrollToBottom();\n  }\n  public scrollToLine(line: number): void {\n    this._verifyIntegers(line);\n    this._core.scrollToLine(line);\n  }\n  public clear(): void {\n    this._core.clear();\n  }\n  public write(data: string | Uint8Array, callback?: () => void): void {\n    this._core.write(data, callback);\n  }\n  public writeUtf8(data: Uint8Array, callback?: () => void): void {\n    this._core.write(data, callback);\n  }\n  public writeln(data: string | Uint8Array, callback?: () => void): void {\n    this._core.write(data);\n    this._core.write('\\r\\n', callback);\n  }\n  public paste(data: string): void {\n    this._core.paste(data);\n  }\n  public getOption(key: 'bellSound' | 'bellStyle' | 'cursorStyle' | 'fontFamily' | 'logLevel' | 'rendererType' | 'termName' | 'wordSeparator'): string;\n  public getOption(key: 'allowTransparency' | 'altClickMovesCursor' | 'cancelEvents' | 'convertEol' | 'cursorBlink' | 'disableStdin' | 'macOptionIsMeta' | 'rightClickSelectsWord' | 'popOnBell' | 'visualBell'): boolean;\n  public getOption(key: 'cols' | 'fontSize' | 'letterSpacing' | 'lineHeight' | 'rows' | 'tabStopWidth' | 'scrollback'): number;\n  public getOption(key: 'fontWeight' | 'fontWeightBold'): FontWeight;\n  public getOption(key: string): any;\n  public getOption(key: any): any {\n    return this._core.optionsService.getOption(key);\n  }\n  public setOption(key: 'bellSound' | 'fontFamily' | 'termName' | 'wordSeparator', value: string): void;\n  public setOption(key: 'fontWeight' | 'fontWeightBold', value: 'normal' | 'bold' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900' | number): void;\n  public setOption(key: 'logLevel', value: 'debug' | 'info' | 'warn' | 'error' | 'off'): void;\n  public setOption(key: 'bellStyle', value: 'none' | 'visual' | 'sound' | 'both'): void;\n  public setOption(key: 'cursorStyle', value: 'block' | 'underline' | 'bar'): void;\n  public setOption(key: 'allowTransparency' | 'altClickMovesCursor' | 'cancelEvents' | 'convertEol' | 'cursorBlink' | 'disableStdin' | 'macOptionIsMeta' | 'rightClickSelectsWord' | 'popOnBell' | 'visualBell', value: boolean): void;\n  public setOption(key: 'fontSize' | 'letterSpacing' | 'lineHeight' | 'tabStopWidth' | 'scrollback', value: number): void;\n  public setOption(key: 'theme', value: ITheme): void;\n  public setOption(key: 'cols' | 'rows', value: number): void;\n  public setOption(key: string, value: any): void;\n  public setOption(key: any, value: any): void {\n    this._checkReadonlyOptions(key);\n    this._core.optionsService.setOption(key, value);\n  }\n  public refresh(start: number, end: number): void {\n    this._verifyIntegers(start, end);\n    this._core.refresh(start, end);\n  }\n  public reset(): void {\n    this._core.reset();\n  }\n  public clearTextureAtlas(): void {\n    this._core.clearTextureAtlas();\n  }\n  public loadAddon(addon: ITerminalAddon): void {\n    return this._addonManager.loadAddon(this, addon);\n  }\n  public static get strings(): ILocalizableStrings {\n    return Strings;\n  }\n\n  private _verifyIntegers(...values: number[]): void {\n    for (const value of values) {\n      if (value === Infinity || isNaN(value) || value % 1 !== 0) {\n        throw new Error('This API only accepts integers');\n      }\n    }\n  }\n}\n", "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm) })\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose)\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false\n      if (cm.lineCount() == 1) {\n        var input = cm.getInputField()\n        empty = input.nodeName == \"TEXTAREA\" ? !cm.getLine(0).length\n          : !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent)\n      }\n      if (empty) setPlaceholder(cm)\n      else clearPlaceholder(cm)\n    }, 20)\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n});\n", "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    closeBefore: \")]}'\\\":;>\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, \"pairs\"))\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  function ensureBound(chars) {\n    for (var i = 0; i < chars.length; i++) {\n      var ch = chars.charAt(i), key = \"'\" + ch + \"'\"\n      if (!keyMap[key]) keyMap[key] = handler(ch)\n    }\n  }\n  ensureBound(defaults.pairs + \"`\")\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      var linesep = cm.lineSeparator() || \"\\n\";\n      cm.replaceSelection(linesep + linesep, null);\n      moveSel(cm, -1)\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function moveSel(cm, dir) {\n    var newRanges = [], ranges = cm.listSelections(), primary = 0\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i]\n      if (range.head == cm.getCursor()) primary = i\n      var pos = range.head.ch || dir > 0 ? {line: range.head.line, ch: range.head.ch + dir} : {line: range.head.line - 1}\n      newRanges.push({anchor: pos, head: pos})\n    }\n    cm.setSelections(newRanges, primary)\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n\n    var closeBefore = getOption(conf,\"closeBefore\");\n\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {\n        if (cur.ch > 2 && /\\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2)))) return CodeMirror.Pass;\n        curType = \"addFour\";\n      } else if (identical) {\n        var prev = cur.ch == 0 ? \" \" : cm.getRange(Pos(cur.line, cur.ch - 1), cur)\n        if (!CodeMirror.isWordChar(next) && prev != ch && !CodeMirror.isWordChar(prev)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (next.length === 0 || /\\s/.test(next) || closeBefore.indexOf(next) > -1)) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        moveSel(cm, 1)\n      } else if (type == \"skipThree\") {\n        moveSel(cm, 3)\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        moveSel(cm, -1)\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        moveSel(cm, 1)\n      }\n    });\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch &&\n      (pos.ch == 0 || !/\\bstring/.test(cm.getTokenTypeAt(pos)))\n  }\n});\n", "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\n\n  function bracketRegex(config) {\n    return config && config.bracketRegex || /[(){}[\\]]/\n  }\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n    var re = bracketRegex(config)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\n        re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = bracketRegex(config)\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined ||\n                            (cm.getTokenTypeAt(Pos(lineNo, pos + 1)) || \"\") == (style || \"\"))) {\n          var match = matching[ch];\n          if (match && (match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000,\n      highlightNonMatching = config && config.highlightNonMatching;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && (match.match || highlightNonMatching !== false) && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textarea whenever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  function clearHighlighted(cm) {\n    if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n      cm.state.matchBrackets.currentlyHighlighted();\n      cm.state.matchBrackets.currentlyHighlighted = null;\n    }\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      cm.off(\"focus\", doMatchBrackets)\n      cm.off(\"blur\", clearHighlighted)\n      clearHighlighted(cm);\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n      cm.on(\"focus\", doMatchBrackets)\n      cm.on(\"blur\", clearHighlighted)\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n", "import { Decoder } from '../Decoders';\n\nexport class Base64 implements Decoder {\n  public name(): string {\n    return 'base64';\n  }\n\n  public matches(code: string): boolean {\n    // base64 input is at least 4 chars\n    if (code.length < 4) {\n      return false;\n    }\n\n    try {\n      atob(code);\n\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  public decode(code: string): number[] {\n    return Array.from(atob(code)).map((c: string): number => c.charCodeAt(0));\n  }\n}\nexport default Base64;\n", "import { Decoder } from '../Decoders';\n\nexport class Default implements Decoder {\n  public name(): string {\n    return 'default';\n  }\n\n  public matches(): boolean {\n    return true;\n  }\n\n  public decode(code: string): number[] {\n    return Array.from(code).map((char: string): number => char.charCodeAt(0));\n  }\n}\n\nexport default Default;\n", "export class Lang {\n  constructor(\n    private id: string,\n    private name: string,\n    private runner: (code: number[], input: string, args: string) => Worker,\n    private url: string = null,\n    private args: string[] | null = null,\n    private highlighterRef: string = id\n  ) {}\n\n  getId(): string {\n    return this.id;\n  }\n\n  getName(): string {\n    return this.name;\n  }\n\n  getURL(): string {\n    return this.url;\n  }\n\n  getArgs(): string[] | null {\n    return this.args;\n  }\n\n  getHighlighterRef(): string {\n    return this.highlighterRef;\n  }\n\n  run(code: number[], args: string, input: string): Worker {\n    return this.runner(code, input, args);\n  }\n}\n\nexport default Lang;\n", "import { Lang } from '../../Lang';\nimport 'codemirror/mode/javascript/javascript';\n\nexport class JavaScript extends Lang {\n  constructor() {\n    super(\n      'javascript-browser',\n      'JavaScript (Browser)',\n      (code: number[], input: string, args: string): Worker => {\n        const worker = new Worker('dist/js/langs/javascript-browser/worker.js');\n\n        worker.postMessage({\n          type: 'run',\n          code,\n          args,\n          input,\n        });\n\n        return worker;\n      },\n      'https://www.ecma-international.org/publications-and-standards/standards/ecma-262/',\n      null,\n      'javascript'\n    );\n  }\n}\n\nexport default JavaScript;\n", "import { Lang } from '../../Lang';\nimport 'codemirror/mode/perl/perl';\n\nexport class Perl extends Lang {\n  constructor() {\n    super(\n      'webperl-5.28.1',\n      'Perl 5.28.1 (webperl)',\n      (code: number[], input: string, args: string): Worker => {\n        const worker = new Worker('dist/js/langs/webperl-5.28.1/worker.js');\n\n        worker.postMessage({\n          type: 'run',\n          code,\n          args,\n          input,\n        });\n\n        return worker;\n      },\n      'https://www.perl.org/',\n      ['-M5.10.0', '-F', '-l', '-p'],\n      'perl'\n    );\n  }\n}\n\nexport default Perl;\n", "import { Editor, EditorConfiguration, fromTextArea } from 'codemirror';\nimport { ITerminalOptions, Terminal } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit/src/FitAddon';\nimport IO from './IO';\nimport { langs } from './Langs';\n\nimport 'codemirror/addon/display/placeholder';\nimport 'codemirror/addon/edit/closebrackets';\nimport 'codemirror/addon/edit/matchbrackets';\nimport { decoders } from './Decoders';\n\nexport type IHashData = {\n  lang: string;\n  header?: string;\n  code: string;\n  footer?: string;\n  args?: string;\n  input?: string;\n  type?: 'tty' | 'resource';\n  mime?: string;\n};\n\nexport class UI {\n  private io: IO;\n  private expanders: NodeListOf<HTMLInputElement>;\n  private outputTypes: NodeListOf<HTMLInputElement>;\n  private argsWrapper: HTMLDivElement;\n  private addArg: HTMLHeadingElement;\n  private stopButton: HTMLInputElement;\n  private runButton: HTMLInputElement;\n  private bytesCount: HTMLSpanElement;\n  private bytesPlural: HTMLSpanElement;\n  private encoded: HTMLSpanElement;\n  private format: HTMLSpanElement;\n  private langSelector: HTMLSelectElement;\n  private copyLinkButton: HTMLInputElement;\n  private markdownButton: HTMLInputElement;\n  private stdout: Terminal;\n  private stderr: Terminal;\n  private fit: FitAddon;\n  private codeHeader: CodeMirror.Editor;\n  private code: CodeMirror.Editor;\n  private codeFooter: CodeMirror.Editor;\n  private stdin: CodeMirror.Editor;\n  private args: CodeMirror.Editor;\n\n  constructor() {\n    this.langSelector = document.querySelector(\n      'select[name=\"lang\"]'\n    ) as HTMLSelectElement;\n\n    this.addRegisteredLangs();\n\n    this.stdout = UI.createTerminal();\n\n    this.stderr = UI.createTerminal({\n      theme: {\n        foreground: '#f92672',\n      },\n    });\n\n    this.fit = new FitAddon();\n\n    this.stdout.loadAddon(this.fit);\n    this.stdout.open(document.querySelector('div.stdout') as HTMLDivElement);\n    this.stderr.open(document.querySelector('div.stderr') as HTMLDivElement);\n\n    this.codeHeader = UI.createEditor(\n      document.querySelector('textarea[name=\"header\"]') as HTMLTextAreaElement,\n      {\n        autoCloseBrackets: true,\n        autofocus: true,\n        matchBrackets: true,\n      }\n    );\n    this.code = UI.createEditor(\n      document.querySelector('textarea[name=\"code\"]') as HTMLTextAreaElement,\n      {\n        autoCloseBrackets: true,\n        autofocus: true,\n        matchBrackets: true,\n      }\n    );\n    this.codeFooter = UI.createEditor(\n      document.querySelector('textarea[name=\"footer\"]') as HTMLTextAreaElement,\n      {\n        autoCloseBrackets: true,\n        autofocus: true,\n        matchBrackets: true,\n      }\n    );\n    this.stdin = UI.createEditor(\n      document.querySelector('textarea[name=\"input\"]') as HTMLTextAreaElement\n    );\n    this.args = UI.createEditor(\n      document.querySelector('textarea[name=\"args\"]') as HTMLTextAreaElement\n    );\n\n    this.io = new IO(\n      this.langSelector,\n      this.codeHeader,\n      this.code,\n      this.codeFooter,\n      this.stdin,\n      this.stdout,\n      this.stderr,\n      this.args,\n      document.querySelector('.html-out')\n    );\n\n    this.expanders = document.querySelectorAll(\n      'input[name=\"expand\"]'\n    ) as NodeListOf<HTMLInputElement>;\n    this.argsWrapper = document.querySelector(\n      '.args-wrapper'\n    ) as HTMLDivElement;\n    this.addArg = document.querySelector('.add-arg') as HTMLHeadingElement;\n    this.runButton = document.querySelector(\n      'input[name=\"run\"]'\n    ) as HTMLInputElement;\n    this.stopButton = document.querySelector(\n      'input[name=\"stop\"]'\n    ) as HTMLInputElement;\n    this.bytesCount = document.querySelector(\n      '.bytes .byte-count'\n    ) as HTMLSpanElement;\n    this.bytesPlural = document.querySelector(\n      '.bytes .plural'\n    ) as HTMLSpanElement;\n    this.encoded = document.querySelector('.encoded') as HTMLSpanElement;\n    this.format = document.querySelector('.format') as HTMLSpanElement;\n    this.copyLinkButton = document.querySelector(\n      'input[name=\"copy\"]'\n    ) as HTMLInputElement;\n    this.markdownButton = document.querySelector(\n      'input[name=\"markdown\"]'\n    ) as HTMLInputElement;\n    this.outputTypes = document.querySelectorAll('.stdout-header button');\n    this.connectExpanders();\n    this.parseHashData(window.location.hash);\n    this.populateArgs();\n    this.codeOnChange();\n\n    if (this.io.getCodeAsArray().length) {\n      this.runCode();\n    }\n\n    this.resize();\n\n    // bind events\n    this.io.onCodeChange(() => this.codeOnChange());\n\n    this.runButton.addEventListener('click', () => this.runCode());\n    this.langSelector.addEventListener('change', () => this.populateArgs());\n    this.copyLinkButton.addEventListener('click', () => {\n      const link = this.buildLink();\n\n      window.history.pushState(this.buildHashData(), document.title, link);\n      navigator.clipboard.writeText(link);\n\n      UI.copied(this.copyLinkButton);\n    });\n    this.markdownButton.addEventListener('click', () => {\n      navigator.clipboard.writeText(this.buildMarkdown());\n\n      UI.copied(this.markdownButton);\n    });\n    this.outputTypes.forEach((button) =>\n      button.addEventListener('click', () => this.setOutputType(button))\n    );\n\n    window.addEventListener('hashchange', () => {\n      this.parseHashData(window.location.hash);\n\n      if (this.io.getCodeAsArray().length) {\n        this.runCode();\n      }\n    });\n    window.addEventListener('resize', () => this.resize());\n  }\n\n  private addRegisteredLangs(): void {\n    langs.all().forEach((langKey) => {\n      const lang = langs.get(langKey),\n        option = document.createElement('option');\n\n      option.setAttribute('value', lang.getId());\n      option.append(document.createTextNode(lang.getName()));\n\n      this.langSelector.append(option);\n    });\n  }\n\n  private setLang(lang: string): void {\n    const availableLangs = langs.all();\n\n    if (!availableLangs.includes(lang)) {\n      throw new TypeError(`Unknown lang: ${lang}.`);\n    }\n\n    this.langSelector.value = lang;\n\n    this.setCodeHighlight();\n  }\n\n  private getLangId(): string {\n    return this.langSelector.value;\n  }\n\n  private setCodeHighlight(): void {\n    const lang = langs.get(this.getLangId());\n\n    [this.codeHeader, this.code, this.codeFooter].forEach((editor) => {\n      const decoder = decoders.decoder(IO.getRaw(editor));\n\n      if (decoder.name() !== 'default') {\n        if (editor.getOption('mode') !== null) {\n          editor.setOption('mode', null);\n        }\n\n        return;\n      }\n\n      if (editor.getOption('mode') !== lang.getHighlighterRef()) {\n        editor.setOption('mode', lang.getHighlighterRef());\n      }\n    });\n  }\n\n  private static createTerminal(options: ITerminalOptions = {}): Terminal {\n    return new Terminal({\n      ...options,\n      theme: {\n        background: '#272822',\n        cursor: 'transparent',\n        foreground: '#f8f8f2',\n        ...(options.theme ?? {}),\n      },\n    });\n  }\n\n  private static createEditor(\n    element: HTMLTextAreaElement,\n    options: EditorConfiguration = {}\n  ): Editor {\n    return fromTextArea(element, {\n      mode: null,\n      theme: 'monokai',\n      viewportMargin: Infinity,\n      extraKeys: {\n        'Shift-Tab': false,\n        Tab: false,\n      },\n      ...options,\n    });\n  }\n\n  private resize(): void {\n    if (this.stdout.element.parentElement.hasAttribute('hidden')) {\n      this.fit.activate(this.stderr);\n\n      this.fit.fit();\n\n      this.stderr.resize(this.stderr.cols, 6);\n\n      return;\n    }\n\n    this.fit.activate(this.stdout);\n\n    this.fit.fit();\n    this.stderr.resize(this.stdout.cols, 6);\n  }\n\n  private codeOnChange(): void {\n    const code = this.io.getCodeAsArray();\n\n    this.encoded.setAttribute('hidden', '');\n\n    this.setCodeHighlight();\n\n    const decoder = decoders.decoder(this.io.getRawCode());\n\n    if (decoder.name() !== 'default') {\n      this.encoded.removeAttribute('hidden');\n\n      this.format.innerText = decoder.name();\n    }\n\n    this.showBytes(code.length);\n  }\n\n  private runCode(): void {\n    const started = Date.now(),\n      stopHandler = () => {\n        worker.terminate();\n\n        this.io.writeStderr(\n          `Aborted execution after ${Date.now() - started}ms`\n        );\n\n        this.runButton.removeAttribute('disabled');\n        this.stopButton.setAttribute('disabled', '');\n\n        this.stopButton.removeEventListener('click', stopHandler);\n      };\n\n    this.io.clearStdout();\n    this.io.clearStderr();\n\n    this.runButton.setAttribute('disabled', '');\n    this.stopButton.removeAttribute('disabled');\n\n    const worker = langs.run(\n      this.getLangId(),\n      this.io.getFullCodeAsArray(),\n      this.io.getArgs(),\n      this.io.getStdin()\n    );\n\n    this.stopButton.addEventListener('click', stopHandler);\n\n    worker.onmessage = ({ data }) => {\n      const { type, output, error } = data;\n\n      if (output) {\n        this.io.writeStdout(output);\n      }\n\n      if (error) {\n        this.io.writeStderr(error ?? '');\n      }\n\n      if (type === 'done') {\n        this.io.writeStderr(\n          `Completed execution after ${Date.now() - started}ms`\n        );\n\n        this.runButton.removeAttribute('disabled');\n        this.stopButton.setAttribute('disabled', '');\n\n        this.stopButton.removeEventListener('click', stopHandler);\n\n        // Make sure the process is stopped\n        worker.terminate();\n      }\n    };\n\n    worker.onerror = (e) => {\n      console.error(e);\n\n      this.runButton.removeAttribute('disabled');\n      this.stopButton.setAttribute('disabled', '');\n    };\n  }\n\n  private populateArgs(): void {\n    while (this.addArg.firstElementChild) {\n      this.addArg.firstElementChild.remove();\n    }\n\n    const lang = langs.get(this.getLangId());\n\n    if (!lang) {\n      throw new TypeError('Unregistered lang: ' + this.getLangId());\n    }\n\n    const args = lang.getArgs();\n\n    if (args !== null) {\n      this.argsWrapper.removeAttribute('hidden');\n\n      args.forEach((arg) => {\n        const argButton = document.createElement('input');\n\n        argButton.setAttribute('type', 'button');\n        argButton.setAttribute('value', arg);\n\n        argButton.addEventListener('click', () => {\n          const currentValue = this.io.getArgs() ?? '',\n            match = new RegExp('(\\\\n|^)' + arg + '(\\\\n|$)');\n\n          if (match.test(currentValue)) {\n            return;\n          }\n\n          this.io.setArgs((currentValue + '\\n' + arg).trim());\n        });\n\n        this.addArg.append(argButton);\n      });\n    } else {\n      this.argsWrapper.setAttribute('hidden', '');\n    }\n\n    this.io.argsRefresh();\n  }\n\n  private static expand(expander: HTMLInputElement): void {\n    const collapser = expander.nextElementSibling,\n      target = document.querySelector(expander.dataset.target);\n\n    if (!target) {\n      console.debug('No collapser or target for expander: ', expander);\n\n      return;\n    }\n\n    expander.setAttribute('hidden', '');\n    target.removeAttribute('hidden');\n    collapser.removeAttribute('hidden');\n  }\n\n  private static collapse(expander: HTMLInputElement): void {\n    const collapser = expander.nextElementSibling,\n      target = document.querySelector(expander.dataset.target);\n\n    if (!target) {\n      console.debug('No collapser or target for expander: ', expander);\n\n      return;\n    }\n\n    expander.removeAttribute('hidden');\n    target.setAttribute('hidden', '');\n    collapser.setAttribute('hidden', '');\n  }\n\n  private connectExpanders(): void {\n    this.expanders.forEach((expander) => {\n      const collapser = expander.nextElementSibling;\n\n      if (!collapser || !collapser.matches('input[name=\"collapse\"]')) {\n        console.debug('No collapser or target for expander: ', expander);\n\n        return;\n      }\n\n      expander.addEventListener('click', () => UI.expand(expander));\n      collapser.addEventListener('click', () => UI.collapse(expander));\n    });\n  }\n\n  private setOutputType(button: HTMLButtonElement): void {\n    const [current] = Array.from(this.outputTypes).filter((button) =>\n      button.hasAttribute('disabled')\n    );\n\n    if (current === button) {\n      return;\n    }\n\n    current.removeAttribute('disabled');\n    document.querySelector(current.dataset.target).setAttribute('hidden', '');\n\n    button.setAttribute('disabled', '');\n    document.querySelector(button.dataset.target).removeAttribute('hidden');\n\n    this.resize();\n  }\n\n  private getOutputType(): string {\n    const [current] = Array.from(this.outputTypes).filter((button) =>\n      button.hasAttribute('disabled')\n    );\n\n    return current.dataset.type;\n  }\n\n  private static copied(button: HTMLButtonElement | HTMLInputElement): void {\n    const originalText = button.value;\n\n    button.setAttribute('disabled', '');\n    button.style.width = button.offsetWidth + 'px';\n    button.value = 'Copied!';\n\n    window.setTimeout(() => {\n      button.removeAttribute('disabled');\n      button.style.width = null;\n      button.value = originalText;\n    }, 1000);\n  }\n\n  private parseHashData(hash): void {\n    if (!hash || hash.length < 2) {\n      return;\n    }\n\n    let data;\n\n    try {\n      const jsonData = atob(hash.slice(1));\n\n      data = JSON.parse(jsonData);\n    } catch (e) {\n      if (e instanceof DOMException) {\n        console.error('Bad base64 data: ', e);\n\n        return;\n      }\n\n      if (e instanceof SyntaxError) {\n        console.error('Bad JSON data: ', e);\n\n        return;\n      }\n\n      throw e;\n    }\n\n    const [headerExpander] = Array.from(this.expanders).filter((expander) =>\n        expander.parentElement.matches('.code-header')\n      ),\n      [footerExpander] = Array.from(this.expanders).filter((expander) =>\n        expander.parentElement.matches('.code-footer')\n      );\n\n    if (data.header) {\n      UI.expand(headerExpander);\n    } else {\n      UI.collapse(headerExpander);\n    }\n\n    if (data.footer) {\n      UI.expand(footerExpander);\n    } else {\n      UI.collapse(footerExpander);\n    }\n\n    this.setLang(data.lang ?? this.getLangId());\n    this.io.setCodeHeader(data.header ?? '');\n    this.io.setCode(data.code ?? '');\n    this.io.setCodeFooter(data.footer ?? '');\n    this.io.setArgs(data.args ?? '');\n    this.io.setStdin(data.input ?? '');\n\n    if (data.type) {\n      this.outputTypes.forEach((button) => {\n        if (button.dataset.type === data.type) {\n          this.setOutputType(button);\n        }\n      });\n    }\n\n    // `mime` being set implies `type`\n    if (data.mime) {\n      this.io.setHTMLOutMimeType(data.mime);\n\n      if (!data.type) {\n        this.outputTypes.forEach((button) => {\n          if (button.dataset.type === 'resource') {\n            this.setOutputType(button);\n          }\n        });\n      }\n    }\n  }\n\n  private buildHashData() {\n    const data: IHashData = {\n        lang: this.getLangId(),\n        code: this.io.getRawCode(),\n      },\n      header = this.io.getRawCodeHeader(),\n      footer = this.io.getRawCodeFooter(),\n      args = this.io.getArgs(),\n      input = this.io.getStdin(),\n      type = this.getOutputType(),\n      mime = this.io.getHTMLOutMimeType();\n\n    Object.entries({\n      header,\n      footer,\n      args,\n      input,\n    }).forEach(([key, value]) => {\n      if (value) {\n        data[key] = value;\n      }\n    });\n\n    // we don't need to set both mime and type most of the time\n    if (type === 'resource') {\n      if (mime === 'text/html') {\n        data.type = 'resource';\n      } else {\n        data.mime = mime;\n      }\n    }\n\n    return btoa(JSON.stringify(data));\n  }\n\n  private buildLink(): string {\n    const hash = this.buildHashData();\n\n    return (\n      window.location.protocol +\n      '//' +\n      window.location.host +\n      window.location.pathname +\n      '#' +\n      hash\n    );\n  }\n\n  private buildMarkdown(): string {\n    const args = this.io.getArgs().trim().split(/\\n/).join(' '),\n      lang = langs.get(this.getLangId()),\n      key = Math.random().toString(36).slice(2, 10),\n      bytes = this.io.getCodeAsArray().length;\n\n    return `# [${lang.getName()}]${\n      args ? ` + \\`${args}\\`` : ''\n    }, ${bytes} byte${bytes === 1 ? '' : 's'}\n\n<!-- language-all: lang-${lang.getHighlighterRef()} -->\n\n<pre><code>${this.io\n      .getCodeAsString()\n      .replace(/[&<>]/g, (char) =>\n        char === '<'\n          ? '&lt;'\n          : char === '>'\n          ? '&gt;'\n          : char === '&'\n          ? '&amp;'\n          : char\n      )}</code></pre>\n\n[Try it online!][TIO-${key}]\n\n[${lang.getName()}]: ${lang.getURL()}\n[TIO-${key}]: ${this.buildLink()}`;\n  }\n\n  private showBytes(byteCount: number): void {\n    this.bytesCount.innerText = byteCount.toString();\n\n    if (byteCount === 1) {\n      this.bytesPlural.setAttribute('hidden', '');\n\n      return;\n    }\n\n    this.bytesPlural.removeAttribute('hidden');\n  }\n}\n\nexport default UI;\n", "/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Terminal, ITerminalAddon } from 'xterm';\n\ninterface ITerminalDimensions {\n  /**\n   * The number of rows in the terminal.\n   */\n  rows: number;\n\n  /**\n   * The number of columns in the terminal.\n   */\n  cols: number;\n}\n\nconst MINIMUM_COLS = 2;\nconst MINIMUM_ROWS = 1;\n\nexport class FitAddon implements ITerminalAddon {\n  private _terminal: Terminal | undefined;\n\n  constructor() {}\n\n  public activate(terminal: Terminal): void {\n    this._terminal = terminal;\n  }\n\n  public dispose(): void {}\n\n  public fit(): void {\n    const dims = this.proposeDimensions();\n    if (!dims || !this._terminal) {\n      return;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n\n    // Force a full render\n    if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {\n      core._renderService.clear();\n      this._terminal.resize(dims.cols, dims.rows);\n    }\n  }\n\n  public proposeDimensions(): ITerminalDimensions | undefined {\n    if (!this._terminal) {\n      return undefined;\n    }\n\n    if (!this._terminal.element || !this._terminal.element.parentElement) {\n      return undefined;\n    }\n\n    // TODO: Remove reliance on private API\n    const core = (this._terminal as any)._core;\n\n    if (core._renderService.dimensions.actualCellWidth === 0 || core._renderService.dimensions.actualCellHeight === 0) {\n      return undefined;\n    }\n\n    const parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);\n    const parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    const parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    const elementStyle = window.getComputedStyle(this._terminal.element);\n    const elementPadding = {\n      top: parseInt(elementStyle.getPropertyValue('padding-top')),\n      bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n      right: parseInt(elementStyle.getPropertyValue('padding-right')),\n      left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    const elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    const elementPaddingHor = elementPadding.right + elementPadding.left;\n    const availableHeight = parentElementHeight - elementPaddingVer;\n    const availableWidth = parentElementWidth - elementPaddingHor - core.viewport.scrollBarWidth;\n    const geometry = {\n      cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / core._renderService.dimensions.actualCellWidth)),\n      rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / core._renderService.dimensions.actualCellHeight))\n    };\n    return geometry;\n  }\n}\n", "export interface Decoder {\n  name(): string;\n  matches(code: string): boolean;\n  decode(code: string): number[];\n}\n\nexport class Decoders {\n  private registered: Decoder[] = [];\n\n  public register(...decoders: Decoder[]): void {\n    this.registered.push(...decoders);\n  }\n\n  public decoder(code: string): Decoder {\n    const [decoder] = this.registered.filter((decoder): boolean =>\n      decoder.matches(code)\n    );\n\n    return decoder;\n  }\n}\n\nexport default Decoders;\n\nexport const decoders = new Decoders();\n", "import { Editor } from 'codemirror';\nimport { Terminal } from 'xterm';\nimport { decoders } from './Decoders';\n\nexport class IO {\n  private stdoutBuffer: string = '';\n  private htmlOutMimeType: string = 'text/html';\n  private htmlOutTimeout: null | number = null;\n\n  constructor(\n    private languageSelector: HTMLSelectElement,\n    private header: Editor,\n    private code: Editor,\n    private footer: Editor,\n    private stdin: Editor,\n    private stdout: Terminal,\n    private stderr: Terminal,\n    private args: Editor,\n    private htmlOut: HTMLIFrameElement\n  ) {}\n\n  public writeStdout(text: string): void {\n    this.stdoutBuffer += text;\n\n    // patch for xterm.js - this allows VT and FF but patches \\n, vs. convertEol option\n    this.stdout.write(text.replace(/(?<!\\r)\\n/g, '\\r\\n'));\n\n    if (this.htmlOutTimeout) {\n      clearTimeout(this.htmlOutTimeout);\n    }\n\n    this.htmlOutTimeout = setTimeout(() => {\n      this.htmlOut.src = `data:${this.htmlOutMimeType};base64,${btoa(\n        this.stdoutBuffer\n      )}`;\n\n      this.htmlOutTimeout = null;\n    }, 100);\n  }\n\n  public writeStderr(text: string): void {\n    // patch for xterm.js - this allows VT and FF but patches \\n, vs. convertEol option\n    this.stderr.write(text.replace(/(?<!\\r)\\n/g, '\\r\\n'));\n  }\n\n  public clearStdout(): void {\n    this.stdoutBuffer = '';\n    this.stdout.reset();\n    this.htmlOut.src = `data:${this.htmlOutMimeType};base64,`;\n  }\n\n  public clearStderr(): void {\n    this.stderr.reset();\n  }\n\n  public getHTMLOutMimeType(): string {\n    return this.htmlOutMimeType;\n  }\n\n  public setHTMLOutMimeType(type: string): void {\n    this.htmlOutMimeType = type;\n    this.htmlOut.src = `data:${this.htmlOutMimeType};base64,${btoa(\n      this.stdoutBuffer\n    )}`;\n  }\n\n  public static getRaw(field: Editor): string {\n    return field.getValue();\n  }\n\n  private static getAsArray(field: Editor): number[] {\n    const code = IO.getRaw(field),\n      decoder = decoders.decoder(code);\n\n    return decoder.decode(code);\n  }\n\n  public getRawCodeHeader(): string {\n    return IO.getRaw(this.header);\n  }\n\n  public getCodeHeaderAsArray(): number[] {\n    return IO.getAsArray(this.header);\n  }\n\n  public setCodeHeader(code: string): void {\n    this.header.setValue(code);\n  }\n\n  public getRawCode(): string {\n    return IO.getRaw(this.code);\n  }\n\n  public getCodeAsArray(): number[] {\n    return IO.getAsArray(this.code);\n  }\n\n  public getCodeAsString(replaceBinaryBytes: string | null = '.'): string {\n    let code = this.getRawCode(),\n      decoder = decoders.decoder(code);\n\n    if (decoder.name() !== 'default') {\n      code = String.fromCharCode(...decoder.decode(code));\n    }\n\n    if (replaceBinaryBytes !== null) {\n      code = code.replace(/[\\x00-\\x1f\\x7f-\\xff]/g, replaceBinaryBytes);\n    }\n\n    return code;\n  }\n\n  public getFullCodeAsArray(): number[] {\n    return [\n      ...this.getCodeHeaderAsArray(),\n      ...this.getCodeAsArray(),\n      ...this.getCodeFooterAsArray(),\n    ];\n  }\n\n  public setCode(value: string): void {\n    this.code.setValue(value);\n  }\n\n  public onCodeChange(handler: Function): void {\n    this.code.on('change', (): void => handler());\n  }\n\n  public getRawCodeFooter(): string {\n    return IO.getRaw(this.footer);\n  }\n\n  public getCodeFooterAsArray(): number[] {\n    return IO.getAsArray(this.footer);\n  }\n\n  public setCodeFooter(code: string): void {\n    this.footer.setValue(code);\n  }\n\n  public getArgs(): string {\n    return this.args.getValue();\n  }\n\n  public setArgs(value: string): void {\n    this.args.setValue(value);\n  }\n\n  public argsRefresh(): void {\n    this.args.refresh();\n  }\n\n  public getStdin(): string {\n    return this.stdin.getValue();\n  }\n\n  public setStdin(value: string): void {\n    this.stdin.setValue(value);\n  }\n}\n\nexport default IO;\n", "import Lang from './Lang';\n\nexport class Langs {\n  private data: { [key: string]: Lang } = {};\n\n  public register(...langs: Lang[]): void {\n    langs.forEach((lang: Lang): void => {\n      this.data[lang.getId()] = lang;\n    });\n  }\n\n  public get(lang: string): Lang {\n    return this.data[lang];\n  }\n\n  public all(): string[] {\n    return Object.keys(this.data);\n  }\n\n  public run(\n    langId: string,\n    code: number[],\n    args: string,\n    input: string\n  ): Worker {\n    return this.data[langId].run(code, args, input);\n  }\n}\n\nexport const langs = new Langs();\n\nexport default langs;\n", "import { Decoder } from '../Decoders';\n\nexport class Xxd implements Decoder {\n  public name(): string {\n    return 'xxd';\n  }\n\n  public matches(code: string): boolean {\n    return /^(\\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\\n|$))+$/.test(code);\n  }\n\n  public decode(code: string): number[] {\n    return code\n      .trim()\n      .replace(/(?<=^|\\n)\\d{7,8}: (((.{2}){1,2} ){1,8}).+/g, '$1')\n      .replace(/\\s+/g, '')\n      .match(/../g)\n      .map((c: string): number => parseInt(c, 16));\n  }\n}\nexport default Xxd;\n", "import Base64 from './Decoders/Base64';\nimport Default from './Decoders/Default';\nimport JavaScript from './langs/javascript-browser/JavaScript';\nimport Perl from './langs/webperl-5.28.1/Perl';\nimport UI from './UI';\nimport Xxd from './Decoders/Xxd';\nimport { decoders } from './Decoders';\nimport { langs } from './Langs';\n\ndecoders.register(new Xxd(), new Base64(), new Default());\nlangs.register(new JavaScript(), new Perl());\n\nconst ui = new UI();\n"],
  "mappings": "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AAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,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",
  "names": []
}
