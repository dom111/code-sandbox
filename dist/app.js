(()=>{var Qc=Object.create;var Go=Object.defineProperty;var eu=Object.getOwnPropertyDescriptor;var tu=Object.getOwnPropertyNames;var ru=Object.getPrototypeOf,iu=Object.prototype.hasOwnProperty;var nu=J=>Go(J,"__esModule",{value:!0});var Zt=(J,te)=>()=>(te||J((te={exports:{}}).exports,te),te.exports);var ou=(J,te,ae,fe)=>{if(te&&typeof te=="object"||typeof te=="function")for(let Y of tu(te))!iu.call(J,Y)&&(ae||Y!=="default")&&Go(J,Y,{get:()=>te[Y],enumerable:!(fe=eu(te,Y))||fe.enumerable});return J},ai=(J,te)=>ou(nu(Go(J!=null?Qc(ru(J)):{},"default",!te&&J&&J.__esModule?{get:()=>J.default,enumerable:!0}:{value:J,enumerable:!0})),J);var Fa=Zt((to,Xo)=>{(function(J,te){if(typeof to=="object"&&typeof Xo=="object")Xo.exports=te();else if(typeof define=="function"&&define.amd)define([],te);else{var ae=te();for(var fe in ae)(typeof to=="object"?to:J)[fe]=ae[fe]}})(self,function(){return(()=>{"use strict";var J={4567:function(Y,d,x){var _,S=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)});Object.defineProperty(d,"__esModule",{value:!0}),d.AccessibilityManager=void 0;var L=x(9042),m=x(6114),b=x(9924),y=x(3656),u=x(844),h=x(5596),v=x(9631),a=function(s){function o(l,f){var p=s.call(this)||this;p._terminal=l,p._renderService=f,p._liveRegionLineCount=0,p._charsToConsume=[],p._charsToAnnounce="",p._accessibilityTreeRoot=document.createElement("div"),p._accessibilityTreeRoot.setAttribute("role","document"),p._accessibilityTreeRoot.classList.add("xterm-accessibility"),p._accessibilityTreeRoot.tabIndex=0,p._rowContainer=document.createElement("div"),p._rowContainer.setAttribute("role","list"),p._rowContainer.classList.add("xterm-accessibility-tree"),p._rowElements=[];for(var C=0;C<p._terminal.rows;C++)p._rowElements[C]=p._createAccessibilityTreeNode(),p._rowContainer.appendChild(p._rowElements[C]);if(p._topBoundaryFocusListener=function(E){return p._onBoundaryFocus(E,0)},p._bottomBoundaryFocusListener=function(E){return p._onBoundaryFocus(E,1)},p._rowElements[0].addEventListener("focus",p._topBoundaryFocusListener),p._rowElements[p._rowElements.length-1].addEventListener("focus",p._bottomBoundaryFocusListener),p._refreshRowsDimensions(),p._accessibilityTreeRoot.appendChild(p._rowContainer),p._renderRowsDebouncer=new b.TimeBasedDebouncer(p._renderRows.bind(p)),p._refreshRows(),p._liveRegion=document.createElement("div"),p._liveRegion.classList.add("live-region"),p._liveRegion.setAttribute("aria-live","assertive"),p._accessibilityTreeRoot.appendChild(p._liveRegion),!p._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return p._terminal.element.insertAdjacentElement("afterbegin",p._accessibilityTreeRoot),p.register(p._renderRowsDebouncer),p.register(p._terminal.onResize(function(E){return p._onResize(E.rows)})),p.register(p._terminal.onRender(function(E){return p._refreshRows(E.start,E.end)})),p.register(p._terminal.onScroll(function(){return p._refreshRows()})),p.register(p._terminal.onA11yChar(function(E){return p._onChar(E)})),p.register(p._terminal.onLineFeed(function(){return p._onChar(`
`)})),p.register(p._terminal.onA11yTab(function(E){return p._onTab(E)})),p.register(p._terminal.onKey(function(E){return p._onKey(E.key)})),p.register(p._terminal.onBlur(function(){return p._clearLiveRegion()})),p.register(p._renderService.onDimensionsChange(function(){return p._refreshRowsDimensions()})),p._screenDprMonitor=new h.ScreenDprMonitor,p.register(p._screenDprMonitor),p._screenDprMonitor.setListener(function(){return p._refreshRowsDimensions()}),p.register((0,y.addDisposableDomListener)(window,"resize",function(){return p._refreshRowsDimensions()})),p}return S(o,s),o.prototype.dispose=function(){s.prototype.dispose.call(this),(0,v.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},o.prototype._onBoundaryFocus=function(l,f){var p=l.target,C=this._rowElements[f===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")!==(f===0?"1":""+this._terminal.buffer.lines.length)&&l.relatedTarget===C){var E,O;if(f===0?(E=p,O=this._rowElements.pop(),this._rowContainer.removeChild(O)):(E=this._rowElements.shift(),O=p,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),O.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){var R=this._createAccessibilityTreeNode();this._rowElements.unshift(R),this._rowContainer.insertAdjacentElement("afterbegin",R)}else R=this._createAccessibilityTreeNode(),this._rowElements.push(R),this._rowContainer.appendChild(R);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}},o.prototype._onResize=function(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},o.prototype._createAccessibilityTreeNode=function(){var l=document.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l},o.prototype._onTab=function(l){for(var f=0;f<l;f++)this._onChar(" ")},o.prototype._onChar=function(l){var f=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=L.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){f._accessibilityTreeRoot.appendChild(f._liveRegion)},0))},o.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,m.isMac&&(0,v.removeElementFromParent)(this._liveRegion)},o.prototype._onKey=function(l){this._clearLiveRegion(),this._charsToConsume.push(l)},o.prototype._refreshRows=function(l,f){this._renderRowsDebouncer.refresh(l,f,this._terminal.rows)},o.prototype._renderRows=function(l,f){for(var p=this._terminal.buffer,C=p.lines.length.toString(),E=l;E<=f;E++){var O=p.translateBufferLineToString(p.ydisp+E,!0),R=(p.ydisp+E+1).toString(),M=this._rowElements[E];M&&(O.length===0?M.innerText="\xA0":M.textContent=O,M.setAttribute("aria-posinset",R),M.setAttribute("aria-setsize",C))}this._announceCharacters()},o.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}},o.prototype._refreshRowDimensions=function(l){l.style.height=this._renderService.dimensions.actualCellHeight+"px"},o.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},o}(u.Disposable);d.AccessibilityManager=a},3614:(Y,d)=>{function x(m){return m.replace(/\r?\n/g,"\r")}function _(m,b){return b?"[200~"+m+"[201~":m}function S(m,b,y){m=_(m=x(m),y.decPrivateModes.bracketedPasteMode),y.triggerDataEvent(m,!0),b.value=""}function L(m,b,y){var u=y.getBoundingClientRect(),h=m.clientX-u.left-10,v=m.clientY-u.top-10;b.style.width="20px",b.style.height="20px",b.style.left=h+"px",b.style.top=v+"px",b.style.zIndex="1000",b.focus()}Object.defineProperty(d,"__esModule",{value:!0}),d.rightClickHandler=d.moveTextAreaUnderMouseCursor=d.paste=d.handlePasteEvent=d.copyHandler=d.bracketTextForPaste=d.prepareTextForTerminal=void 0,d.prepareTextForTerminal=x,d.bracketTextForPaste=_,d.copyHandler=function(m,b){m.clipboardData&&m.clipboardData.setData("text/plain",b.selectionText),m.preventDefault()},d.handlePasteEvent=function(m,b,y){m.stopPropagation(),m.clipboardData&&S(m.clipboardData.getData("text/plain"),b,y)},d.paste=S,d.moveTextAreaUnderMouseCursor=L,d.rightClickHandler=function(m,b,y,u,h){L(m,b,y),h&&u.rightClickSelect(m),b.value=u.selectionText,b.select()}},4774:(Y,d)=>{var x,_,S,L;function m(y){var u=y.toString(16);return u.length<2?"0"+u:u}function b(y,u){return y<u?(u+.05)/(y+.05):(y+.05)/(u+.05)}Object.defineProperty(d,"__esModule",{value:!0}),d.contrastRatio=d.toPaddedHex=d.rgba=d.rgb=d.css=d.color=d.channels=void 0,function(y){y.toCss=function(u,h,v,a){return a!==void 0?"#"+m(u)+m(h)+m(v)+m(a):"#"+m(u)+m(h)+m(v)},y.toRgba=function(u,h,v,a){return a===void 0&&(a=255),(u<<24|h<<16|v<<8|a)>>>0}}(x=d.channels||(d.channels={})),(_=d.color||(d.color={})).blend=function(y,u){var h=(255&u.rgba)/255;if(h===1)return{css:u.css,rgba:u.rgba};var v=u.rgba>>24&255,a=u.rgba>>16&255,s=u.rgba>>8&255,o=y.rgba>>24&255,l=y.rgba>>16&255,f=y.rgba>>8&255,p=o+Math.round((v-o)*h),C=l+Math.round((a-l)*h),E=f+Math.round((s-f)*h);return{css:x.toCss(p,C,E),rgba:x.toRgba(p,C,E)}},_.isOpaque=function(y){return(255&y.rgba)==255},_.ensureContrastRatio=function(y,u,h){var v=L.ensureContrastRatio(y.rgba,u.rgba,h);if(v)return L.toColor(v>>24&255,v>>16&255,v>>8&255)},_.opaque=function(y){var u=(255|y.rgba)>>>0,h=L.toChannels(u),v=h[0],a=h[1],s=h[2];return{css:x.toCss(v,a,s),rgba:u}},_.opacity=function(y,u){var h=Math.round(255*u),v=L.toChannels(y.rgba),a=v[0],s=v[1],o=v[2];return{css:x.toCss(a,s,o,h),rgba:x.toRgba(a,s,o,h)}},_.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]},(d.css||(d.css={})).toColor=function(y){switch(y.length){case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(y){function u(h,v,a){var s=h/255,o=v/255,l=a/255;return .2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))}y.relativeLuminance=function(h){return u(h>>16&255,h>>8&255,255&h)},y.relativeLuminance2=u}(S=d.rgb||(d.rgb={})),function(y){function u(v,a,s){for(var o=v>>24&255,l=v>>16&255,f=v>>8&255,p=a>>24&255,C=a>>16&255,E=a>>8&255,O=b(S.relativeLuminance2(p,E,C),S.relativeLuminance2(o,l,f));O<s&&(p>0||C>0||E>0);)p-=Math.max(0,Math.ceil(.1*p)),C-=Math.max(0,Math.ceil(.1*C)),E-=Math.max(0,Math.ceil(.1*E)),O=b(S.relativeLuminance2(p,E,C),S.relativeLuminance2(o,l,f));return(p<<24|C<<16|E<<8|255)>>>0}function h(v,a,s){for(var o=v>>24&255,l=v>>16&255,f=v>>8&255,p=a>>24&255,C=a>>16&255,E=a>>8&255,O=b(S.relativeLuminance2(p,E,C),S.relativeLuminance2(o,l,f));O<s&&(p<255||C<255||E<255);)p=Math.min(255,p+Math.ceil(.1*(255-p))),C=Math.min(255,C+Math.ceil(.1*(255-C))),E=Math.min(255,E+Math.ceil(.1*(255-E))),O=b(S.relativeLuminance2(p,E,C),S.relativeLuminance2(o,l,f));return(p<<24|C<<16|E<<8|255)>>>0}y.ensureContrastRatio=function(v,a,s){var o=S.relativeLuminance(v>>8),l=S.relativeLuminance(a>>8);if(b(o,l)<s)return l<o?u(v,a,s):h(v,a,s)},y.reduceLuminance=u,y.increaseLuminance=h,y.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},y.toColor=function(v,a,s){return{css:x.toCss(v,a,s),rgba:x.toRgba(v,a,s)}}}(L=d.rgba||(d.rgba={})),d.toPaddedHex=m,d.contrastRatio=b},7239:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorContrastCache=void 0;var x=function(){function _(){this._color={},this._rgba={}}return _.prototype.clear=function(){this._color={},this._rgba={}},_.prototype.setCss=function(S,L,m){this._rgba[S]||(this._rgba[S]={}),this._rgba[S][L]=m},_.prototype.getCss=function(S,L){return this._rgba[S]?this._rgba[S][L]:void 0},_.prototype.setColor=function(S,L,m){this._color[S]||(this._color[S]={}),this._color[S][L]=m},_.prototype.getColor=function(S,L){return this._color[S]?this._color[S][L]:void 0},_}();d.ColorContrastCache=x},5680:function(Y,d,x){var _=this&&this.__spreadArray||function(a,s,o){if(o||arguments.length===2)for(var l,f=0,p=s.length;f<p;f++)!l&&f in s||(l||(l=Array.prototype.slice.call(s,0,f)),l[f]=s[f]);return a.concat(l||Array.prototype.slice.call(s))};Object.defineProperty(d,"__esModule",{value:!0}),d.ColorManager=d.DEFAULT_ANSI_COLORS=void 0;var S=x(4774),L=x(7239),m=S.css.toColor("#ffffff"),b=S.css.toColor("#000000"),y=S.css.toColor("#ffffff"),u=S.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};d.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[S.css.toColor("#2e3436"),S.css.toColor("#cc0000"),S.css.toColor("#4e9a06"),S.css.toColor("#c4a000"),S.css.toColor("#3465a4"),S.css.toColor("#75507b"),S.css.toColor("#06989a"),S.css.toColor("#d3d7cf"),S.css.toColor("#555753"),S.css.toColor("#ef2929"),S.css.toColor("#8ae234"),S.css.toColor("#fce94f"),S.css.toColor("#729fcf"),S.css.toColor("#ad7fa8"),S.css.toColor("#34e2e2"),S.css.toColor("#eeeeec")],s=[0,95,135,175,215,255],o=0;o<216;o++){var l=s[o/36%6|0],f=s[o/6%6|0],p=s[o%6];a.push({css:S.channels.toCss(l,f,p),rgba:S.channels.toRgba(l,f,p)})}for(o=0;o<24;o++){var C=8+10*o;a.push({css:S.channels.toCss(C,C,C),rgba:S.channels.toRgba(C,C,C)})}return a}());var v=function(){function a(s,o){this.allowTransparency=o;var l=s.createElement("canvas");l.width=1,l.height=1;var f=l.getContext("2d");if(!f)throw new Error("Could not get rendering context");this._ctx=f,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new L.ColorContrastCache,this.colors={foreground:m,background:b,cursor:y,cursorAccent:u,selectionTransparent:h,selectionOpaque:S.color.blend(b,h),ansi:d.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return a.prototype.onOptionsChange=function(s){s==="minimumContrastRatio"&&this._contrastCache.clear()},a.prototype.setTheme=function(s){s===void 0&&(s={}),this.colors.foreground=this._parseColor(s.foreground,m),this.colors.background=this._parseColor(s.background,b),this.colors.cursor=this._parseColor(s.cursor,y,!0),this.colors.cursorAccent=this._parseColor(s.cursorAccent,u,!0),this.colors.selectionTransparent=this._parseColor(s.selection,h,!0),this.colors.selectionOpaque=S.color.blend(this.colors.background,this.colors.selectionTransparent),S.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=S.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(s.black,d.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(s.red,d.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(s.green,d.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(s.yellow,d.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(s.blue,d.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(s.magenta,d.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(s.cyan,d.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(s.white,d.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(s.brightBlack,d.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(s.brightRed,d.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(s.brightGreen,d.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(s.brightYellow,d.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(s.brightBlue,d.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(s.brightMagenta,d.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(s.brightCyan,d.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(s.brightWhite,d.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},a.prototype.restoreColor=function(s){if(s!==void 0)switch(s){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[s]=this._restoreColors.ansi[s]}else for(var o=0;o<this._restoreColors.ansi.length;++o)this.colors.ansi[o]=this._restoreColors.ansi[o]},a.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:_([],this.colors.ansi,!0)}},a.prototype._parseColor=function(s,o,l){if(l===void 0&&(l=this.allowTransparency),s===void 0)return o;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+s+" is invalid using fallback "+o.css),o;this._ctx.fillRect(0,0,1,1);var f=this._ctx.getImageData(0,0,1,1).data;if(f[3]!==255){if(!l)return console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+o.css+"."),o;var p=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(A){return Number(A)}),C=p[0],E=p[1],O=p[2],R=p[3],M=Math.round(255*R);return{rgba:S.channels.toRgba(C,E,O,M),css:s}}return{css:this._ctx.fillStyle,rgba:S.channels.toRgba(f[0],f[1],f[2],f[3])}},a}();d.ColorManager=v},9631:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.removeElementFromParent=void 0,d.removeElementFromParent=function(){for(var x,_=[],S=0;S<arguments.length;S++)_[S]=arguments[S];for(var L=0,m=_;L<m.length;L++){var b=m[L];(x=b==null?void 0:b.parentElement)===null||x===void 0||x.removeChild(b)}}},3656:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.addDisposableDomListener=void 0,d.addDisposableDomListener=function(x,_,S,L){x.addEventListener(_,S,L);var m=!1;return{dispose:function(){m||(m=!0,x.removeEventListener(_,S,L))}}}},3551:function(Y,d,x){var _=this&&this.__decorate||function(u,h,v,a){var s,o=arguments.length,l=o<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,v):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,h,v,a);else for(var f=u.length-1;f>=0;f--)(s=u[f])&&(l=(o<3?s(l):o>3?s(h,v,l):s(h,v))||l);return o>3&&l&&Object.defineProperty(h,v,l),l},S=this&&this.__param||function(u,h){return function(v,a){h(v,a,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseZone=d.Linkifier=void 0;var L=x(8460),m=x(2585),b=function(){function u(h,v,a){this._bufferService=h,this._logService=v,this._unicodeService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new L.EventEmitter,this._onHideLinkUnderline=new L.EventEmitter,this._onLinkTooltip=new L.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(u.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),u.prototype.attachToDom=function(h,v){this._element=h,this._mouseZoneManager=v},u.prototype.linkifyRows=function(h,v){var a=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=v):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,v)),this._mouseZoneManager.clearAll(h,v),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},u._timeBeforeLatency))},u.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var v=h.ydisp+this._rowsToLinkify.start;if(!(v>=h.lines.length)){for(var a=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,s=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,v,a,s,s);o.hasNext();)for(var l=o.next(),f=0;f<this._linkMatchers.length;f++)this._doLinkifyRow(l.range.first,l.content,this._linkMatchers[f]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},u.prototype.registerLinkMatcher=function(h,v,a){if(a===void 0&&(a={}),!v)throw new Error("handler must be defined");var s={id:this._nextLinkMatcherId++,regex:h,handler:v,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,priority:a.priority||0};return this._addLinkMatcherToList(s),s.id},u.prototype._addLinkMatcherToList=function(h){if(this._linkMatchers.length!==0){for(var v=this._linkMatchers.length-1;v>=0;v--)if(h.priority<=this._linkMatchers[v].priority)return void this._linkMatchers.splice(v+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},u.prototype.deregisterLinkMatcher=function(h){for(var v=0;v<this._linkMatchers.length;v++)if(this._linkMatchers[v].id===h)return this._linkMatchers.splice(v,1),!0;return!1},u.prototype._doLinkifyRow=function(h,v,a){for(var s,o=this,l=new RegExp(a.regex.source,(a.regex.flags||"")+"g"),f=-1,p=function(){var E=s[typeof a.matchIndex!="number"?0:a.matchIndex];if(!E)return C._logService.debug("match found without corresponding matchIndex",s,a),"break";if(f=v.indexOf(E,f+1),l.lastIndex=f+E.length,f<0)return"break";var O=C._bufferService.buffer.stringIndexToBufferIndex(h,f);if(O[0]<0)return"break";var R=C._bufferService.buffer.lines.get(O[0]);if(!R)return"break";var M=R.getFg(O[1]),A=M?M>>9&511:void 0;a.validationCallback?a.validationCallback(E,function(D){o._rowsTimeoutId||D&&o._addLink(O[1],O[0]-o._bufferService.buffer.ydisp,E,a,A)}):C._addLink(O[1],O[0]-C._bufferService.buffer.ydisp,E,a,A)},C=this;(s=l.exec(v))!==null&&p()!=="break";);},u.prototype._addLink=function(h,v,a,s,o){var l=this;if(this._mouseZoneManager&&this._element){var f=this._unicodeService.getStringCellWidth(a),p=h%this._bufferService.cols,C=v+Math.floor(h/this._bufferService.cols),E=(p+f)%this._bufferService.cols,O=C+Math.floor((p+f)/this._bufferService.cols);E===0&&(E=this._bufferService.cols,O--),this._mouseZoneManager.add(new y(p+1,C+1,E+1,O+1,function(R){if(s.handler)return s.handler(R,a);var M=window.open();M?(M.opener=null,M.location.href=a):console.warn("Opening link blocked as opener could not be cleared")},function(){l._onShowLinkUnderline.fire(l._createLinkHoverEvent(p,C,E,O,o)),l._element.classList.add("xterm-cursor-pointer")},function(R){l._onLinkTooltip.fire(l._createLinkHoverEvent(p,C,E,O,o)),s.hoverTooltipCallback&&s.hoverTooltipCallback(R,a,{start:{x:p,y:C},end:{x:E,y:O}})},function(){l._onHideLinkUnderline.fire(l._createLinkHoverEvent(p,C,E,O,o)),l._element.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()},function(R){return!s.willLinkActivate||s.willLinkActivate(R,a)}))}},u.prototype._createLinkHoverEvent=function(h,v,a,s,o){return{x1:h,y1:v,x2:a,y2:s,cols:this._bufferService.cols,fg:o}},u._timeBeforeLatency=200,u=_([S(0,m.IBufferService),S(1,m.ILogService),S(2,m.IUnicodeService)],u)}();d.Linkifier=b;var y=function(u,h,v,a,s,o,l,f,p){this.x1=u,this.y1=h,this.x2=v,this.y2=a,this.clickCallback=s,this.hoverCallback=o,this.tooltipCallback=l,this.leaveCallback=f,this.willLinkActivate=p};d.MouseZone=y},6465:function(Y,d,x){var _,S=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),L=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},m=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Linkifier2=void 0;var b=x(2585),y=x(8460),u=x(844),h=x(3656),v=function(a){function s(o){var l=a.call(this)||this;return l._bufferService=o,l._linkProviders=[],l._linkCacheDisposables=[],l._isMouseOut=!0,l._activeLine=-1,l._onShowLinkUnderline=l.register(new y.EventEmitter),l._onHideLinkUnderline=l.register(new y.EventEmitter),l.register((0,u.getDisposeArrayDisposable)(l._linkCacheDisposables)),l}return S(s,a),Object.defineProperty(s.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),s.prototype.registerLinkProvider=function(o){var l=this;return this._linkProviders.push(o),{dispose:function(){var f=l._linkProviders.indexOf(o);f!==-1&&l._linkProviders.splice(f,1)}}},s.prototype.attachToDom=function(o,l,f){var p=this;this._element=o,this._mouseService=l,this._renderService=f,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",function(){p._isMouseOut=!0,p._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},s.prototype._onMouseMove=function(o){if(this._lastMouseEvent=o,this._element&&this._mouseService){var l=this._positionFromMouseEvent(o,this._element,this._mouseService);if(l){this._isMouseOut=!1;for(var f=o.composedPath(),p=0;p<f.length;p++){var C=f[p];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._onHover(l),this._lastBufferCell=l)}}},s.prototype._onHover=function(o){if(this._activeLine!==o.y)return this._clearCurrentLink(),void this._askForLink(o,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))},s.prototype._askForLink=function(o,l){var f,p=this;this._activeProviderReplies&&l||((f=this._activeProviderReplies)===null||f===void 0||f.forEach(function(E){E==null||E.forEach(function(O){O.link.dispose&&O.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);var C=!1;this._linkProviders.forEach(function(E,O){var R;l?((R=p._activeProviderReplies)===null||R===void 0?void 0:R.get(O))&&(C=p._checkLinkProviderResult(O,o,C)):E.provideLinks(o.y,function(M){var A,D;if(!p._isMouseOut){var P=M==null?void 0:M.map(function(z){return{link:z}});(A=p._activeProviderReplies)===null||A===void 0||A.set(O,P),C=p._checkLinkProviderResult(O,o,C),((D=p._activeProviderReplies)===null||D===void 0?void 0:D.size)===p._linkProviders.length&&p._removeIntersectingLinks(o.y,p._activeProviderReplies)}})})},s.prototype._removeIntersectingLinks=function(o,l){for(var f=new Set,p=0;p<l.size;p++){var C=l.get(p);if(C)for(var E=0;E<C.length;E++)for(var O=C[E],R=O.link.range.start.y<o?0:O.link.range.start.x,M=O.link.range.end.y>o?this._bufferService.cols:O.link.range.end.x,A=R;A<=M;A++){if(f.has(A)){C.splice(E--,1);break}f.add(A)}}},s.prototype._checkLinkProviderResult=function(o,l,f){var p,C=this;if(!this._activeProviderReplies)return f;for(var E=this._activeProviderReplies.get(o),O=!1,R=0;R<o;R++)this._activeProviderReplies.has(R)&&!this._activeProviderReplies.get(R)||(O=!0);if(!O&&E){var M=E.find(function(D){return C._linkAtPosition(D.link,l)});M&&(f=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(R=0;R<this._activeProviderReplies.size;R++){var A=(p=this._activeProviderReplies.get(R))===null||p===void 0?void 0:p.find(function(D){return C._linkAtPosition(D.link,l)});if(A){f=!0,this._handleNewLink(A);break}}return f},s.prototype._onClick=function(o){if(this._element&&this._mouseService&&this._currentLink){var l=this._positionFromMouseEvent(o,this._element,this._mouseService);l&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(o,this._currentLink.link.text)}},s.prototype._clearCurrentLink=function(o,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!l||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))},s.prototype._handleNewLink=function(o){var l=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(o.link,f)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:function(){var p,C;return(C=(p=l._currentLink)===null||p===void 0?void 0:p.state)===null||C===void 0?void 0:C.decorations.pointerCursor},set:function(p){var C,E;((C=l._currentLink)===null||C===void 0?void 0:C.state)&&l._currentLink.state.decorations.pointerCursor!==p&&(l._currentLink.state.decorations.pointerCursor=p,l._currentLink.state.isHovered&&((E=l._element)===null||E===void 0||E.classList.toggle("xterm-cursor-pointer",p)))}},underline:{get:function(){var p,C;return(C=(p=l._currentLink)===null||p===void 0?void 0:p.state)===null||C===void 0?void 0:C.decorations.underline},set:function(p){var C,E,O;((C=l._currentLink)===null||C===void 0?void 0:C.state)&&((O=(E=l._currentLink)===null||E===void 0?void 0:E.state)===null||O===void 0?void 0:O.decorations.underline)!==p&&(l._currentLink.state.decorations.underline=p,l._currentLink.state.isHovered&&l._fireUnderlineEvent(o.link,p))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(p){var C=p.start===0?0:p.start+1+l._bufferService.buffer.ydisp;l._clearCurrentLink(C,p.end+1+l._bufferService.buffer.ydisp)})))}},s.prototype._linkHover=function(o,l,f){var p;((p=this._currentLink)===null||p===void 0?void 0:p.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(f,l.text)},s.prototype._fireUnderlineEvent=function(o,l){var f=o.range,p=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-p-1,f.end.x,f.end.y-p-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)},s.prototype._linkLeave=function(o,l,f){var p;((p=this._currentLink)===null||p===void 0?void 0:p.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(f,l.text)},s.prototype._linkAtPosition=function(o,l){var f=o.range.start.y===o.range.end.y,p=o.range.start.y<l.y,C=o.range.end.y>l.y;return(f&&o.range.start.x<=l.x&&o.range.end.x>=l.x||p&&o.range.end.x>=l.x||C&&o.range.start.x<=l.x||p&&C)&&o.range.start.y<=l.y&&o.range.end.y>=l.y},s.prototype._positionFromMouseEvent=function(o,l,f){var p=f.getCoords(o,l,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}},s.prototype._createLinkUnderlineEvent=function(o,l,f,p,C){return{x1:o,y1:l,x2:f,y2:p,cols:this._bufferService.cols,fg:C}},L([m(0,b.IBufferService)],s)}(u.Disposable);d.Linkifier2=v},9042:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.tooMuchOutput=d.promptLabel=void 0,d.promptLabel="Terminal input",d.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(Y,d,x){var _,S=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),L=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},m=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseZoneManager=void 0;var b=x(844),y=x(3656),u=x(4725),h=x(2585),v=function(a){function s(o,l,f,p,C,E){var O=a.call(this)||this;return O._element=o,O._screenElement=l,O._bufferService=f,O._mouseService=p,O._selectionService=C,O._optionsService=E,O._zones=[],O._areZonesActive=!1,O._lastHoverCoords=[void 0,void 0],O._initialSelectionLength=0,O.register((0,y.addDisposableDomListener)(O._element,"mousedown",function(R){return O._onMouseDown(R)})),O._mouseMoveListener=function(R){return O._onMouseMove(R)},O._mouseLeaveListener=function(R){return O._onMouseLeave(R)},O._clickListener=function(R){return O._onClick(R)},O}return S(s,a),s.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},s.prototype.add=function(o){this._zones.push(o),this._zones.length===1&&this._activate()},s.prototype.clearAll=function(o,l){if(this._zones.length!==0){o&&l||(o=0,l=this._bufferService.rows-1);for(var f=0;f<this._zones.length;f++){var p=this._zones[f];(p.y1>o&&p.y1<=l+1||p.y2>o&&p.y2<=l+1||p.y1<o&&p.y2>l+1)&&(this._currentZone&&this._currentZone===p&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(f--,1))}this._zones.length===0&&this._deactivate()}},s.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},s.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},s.prototype._onMouseMove=function(o){this._lastHoverCoords[0]===o.pageX&&this._lastHoverCoords[1]===o.pageY||(this._onHover(o),this._lastHoverCoords=[o.pageX,o.pageY])},s.prototype._onHover=function(o){var l=this,f=this._findZoneEventAt(o);f!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),f&&(this._currentZone=f,f.hoverCallback&&f.hoverCallback(o),this._tooltipTimeout=window.setTimeout(function(){return l._onTooltip(o)},this._optionsService.options.linkTooltipHoverDuration)))},s.prototype._onTooltip=function(o){this._tooltipTimeout=void 0;var l=this._findZoneEventAt(o);l==null||l.tooltipCallback(o)},s.prototype._onMouseDown=function(o){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var l=this._findZoneEventAt(o);(l==null?void 0:l.willLinkActivate(o))&&(o.preventDefault(),o.stopImmediatePropagation())}},s.prototype._onMouseLeave=function(o){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},s.prototype._onClick=function(o){var l=this._findZoneEventAt(o),f=this._getSelectionLength();l&&f===this._initialSelectionLength&&(l.clickCallback(o),o.preventDefault(),o.stopImmediatePropagation())},s.prototype._getSelectionLength=function(){var o=this._selectionService.selectionText;return o?o.length:0},s.prototype._findZoneEventAt=function(o){var l=this._mouseService.getCoords(o,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(l)for(var f=l[0],p=l[1],C=0;C<this._zones.length;C++){var E=this._zones[C];if(E.y1===E.y2){if(p===E.y1&&f>=E.x1&&f<E.x2)return E}else if(p===E.y1&&f>=E.x1||p===E.y2&&f<E.x2||p>E.y1&&p<E.y2)return E}},L([m(2,h.IBufferService),m(3,u.IMouseService),m(4,u.ISelectionService),m(5,h.IOptionsService)],s)}(b.Disposable);d.MouseZoneManager=v},6193:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.RenderDebouncer=void 0;var x=function(){function _(S){this._renderCallback=S}return _.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},_.prototype.refresh=function(S,L,m){var b=this;this._rowCount=m,S=S!==void 0?S:0,L=L!==void 0?L:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,S):S,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,L):L,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return b._innerRefresh()}))},_.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var S=Math.max(this._rowStart,0),L=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(S,L)}},_}();d.RenderDebouncer=x},5596:function(Y,d,x){var _,S=this&&this.__extends||(_=function(m,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,u){y.__proto__=u}||function(y,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(y[h]=u[h])},_(m,b)},function(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function y(){this.constructor=m}_(m,b),m.prototype=b===null?Object.create(b):(y.prototype=b.prototype,new y)});Object.defineProperty(d,"__esModule",{value:!0}),d.ScreenDprMonitor=void 0;var L=function(m){function b(){var y=m!==null&&m.apply(this,arguments)||this;return y._currentDevicePixelRatio=window.devicePixelRatio,y}return S(b,m),b.prototype.setListener=function(y){var u=this;this._listener&&this.clearListener(),this._listener=y,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},b.prototype.dispose=function(){m.prototype.dispose.call(this),this.clearListener()},b.prototype._updateDpr=function(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},b.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},b}(x(844).Disposable);d.ScreenDprMonitor=L},3236:function(Y,d,x){var _,S=this&&this.__extends||(_=function(ye,H){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,U){j.__proto__=U}||function(j,U){for(var re in U)Object.prototype.hasOwnProperty.call(U,re)&&(j[re]=U[re])},_(ye,H)},function(ye,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function j(){this.constructor=ye}_(ye,H),ye.prototype=H===null?Object.create(H):(j.prototype=H.prototype,new j)});Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;var L=x(2950),m=x(1680),b=x(3614),y=x(2584),u=x(5435),h=x(3525),v=x(3551),a=x(9312),s=x(6114),o=x(3656),l=x(9042),f=x(357),p=x(6954),C=x(4567),E=x(1296),O=x(7399),R=x(8460),M=x(8437),A=x(5680),D=x(3230),P=x(4725),z=x(428),W=x(8934),B=x(6465),I=x(5114),q=x(8969),X=x(4774),oe=x(4269),ne=x(5941),_e=typeof window!="undefined"?window.document:null,Ce=function(ye){function H(j){j===void 0&&(j={});var U=ye.call(this,j)||this;return U.browser=s,U._keyDownHandled=!1,U._keyPressHandled=!1,U._unprocessedDeadKey=!1,U._onCursorMove=new R.EventEmitter,U._onKey=new R.EventEmitter,U._onRender=new R.EventEmitter,U._onSelectionChange=new R.EventEmitter,U._onTitleChange=new R.EventEmitter,U._onBell=new R.EventEmitter,U._onFocus=new R.EventEmitter,U._onBlur=new R.EventEmitter,U._onA11yCharEmitter=new R.EventEmitter,U._onA11yTabEmitter=new R.EventEmitter,U._setup(),U.linkifier=U._instantiationService.createInstance(v.Linkifier),U.linkifier2=U.register(U._instantiationService.createInstance(B.Linkifier2)),U.register(U._inputHandler.onRequestBell(function(){return U.bell()})),U.register(U._inputHandler.onRequestRefreshRows(function(re,K){return U.refresh(re,K)})),U.register(U._inputHandler.onRequestSendFocus(function(){return U._reportFocus()})),U.register(U._inputHandler.onRequestReset(function(){return U.reset()})),U.register(U._inputHandler.onRequestWindowsOptionsReport(function(re){return U._reportWindowsOptions(re)})),U.register(U._inputHandler.onColor(function(re){return U._handleColorEvent(re)})),U.register((0,R.forwardEvent)(U._inputHandler.onCursorMove,U._onCursorMove)),U.register((0,R.forwardEvent)(U._inputHandler.onTitleChange,U._onTitleChange)),U.register((0,R.forwardEvent)(U._inputHandler.onA11yChar,U._onA11yCharEmitter)),U.register((0,R.forwardEvent)(U._inputHandler.onA11yTab,U._onA11yTabEmitter)),U.register(U._bufferService.onResize(function(re){return U._afterResize(re.cols,re.rows)})),U}return S(H,ye),Object.defineProperty(H.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),H.prototype._handleColorEvent=function(j){var U,re;if(this._colorManager){for(var K=0,de=j;K<de.length;K++){var me=de[K],Te=void 0,Le="";switch(me.index){case 256:Te="foreground",Le="10";break;case 257:Te="background",Le="11";break;case 258:Te="cursor",Le="12";break;default:Te="ansi",Le="4;"+me.index}if(Te)switch(me.type){case 0:var qe=X.color.toColorRGB(Te==="ansi"?this._colorManager.colors.ansi[me.index]:this._colorManager.colors[Te]);this.coreService.triggerDataEvent(y.C0.ESC+"]"+Le+";"+(0,ne.toRgbString)(qe)+y.C0.BEL);break;case 1:Te==="ansi"?this._colorManager.colors.ansi[me.index]=X.rgba.toColor.apply(X.rgba,me.color):this._colorManager.colors[Te]=X.rgba.toColor.apply(X.rgba,me.color);break;case 2:this._colorManager.restoreColor(me.index)}}(U=this._renderService)===null||U===void 0||U.setColors(this._colorManager.colors),(re=this.viewport)===null||re===void 0||re.onThemeChange(this._colorManager.colors)}},H.prototype.dispose=function(){var j,U,re;this._isDisposed||(ye.prototype.dispose.call(this),(j=this._renderService)===null||j===void 0||j.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(re=(U=this.element)===null||U===void 0?void 0:U.parentNode)===null||re===void 0||re.removeChild(this.element))},H.prototype._setup=function(){ye.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(H.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),H.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},H.prototype._updateOptions=function(j){var U,re,K,de;switch(ye.prototype._updateOptions.call(this,j),j){case"fontFamily":case"fontSize":(U=this._renderService)===null||U===void 0||U.clear(),(re=this._charSizeService)===null||re===void 0||re.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(K=this.viewport)===null||K===void 0||K.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new C.AccessibilityManager(this,this._renderService)):((de=this._accessibilityManager)===null||de===void 0||de.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},H.prototype._onTextAreaFocus=function(j){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[I"),this.updateCursorStyle(j),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},H.prototype.blur=function(){var j;return(j=this.textarea)===null||j===void 0?void 0:j.blur()},H.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},H.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var j=this.buffer.ybase+this.buffer.y,U=this.buffer.lines.get(j);if(U){var re=Math.min(this.buffer.x,this.cols-1),K=this._renderService.dimensions.actualCellHeight,de=U.getWidth(re),me=this._renderService.dimensions.actualCellWidth*de,Te=this.buffer.y*this._renderService.dimensions.actualCellHeight,Le=re*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Le+"px",this.textarea.style.top=Te+"px",this.textarea.style.width=me+"px",this.textarea.style.height=K+"px",this.textarea.style.lineHeight=K+"px",this.textarea.style.zIndex="-5"}}},H.prototype._initGlobal=function(){var j=this;this._bindKeys(),this.register((0,o.addDisposableDomListener)(this.element,"copy",function(re){j.hasSelection()&&(0,b.copyHandler)(re,j._selectionService)}));var U=function(re){return(0,b.handlePasteEvent)(re,j.textarea,j.coreService)};this.register((0,o.addDisposableDomListener)(this.textarea,"paste",U)),this.register((0,o.addDisposableDomListener)(this.element,"paste",U)),s.isFirefox?this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(re){re.button===2&&(0,b.rightClickHandler)(re,j.textarea,j.screenElement,j._selectionService,j.options.rightClickSelectsWord)})):this.register((0,o.addDisposableDomListener)(this.element,"contextmenu",function(re){(0,b.rightClickHandler)(re,j.textarea,j.screenElement,j._selectionService,j.options.rightClickSelectsWord)})),s.isLinux&&this.register((0,o.addDisposableDomListener)(this.element,"auxclick",function(re){re.button===1&&(0,b.moveTextAreaUnderMouseCursor)(re,j.textarea,j.screenElement)}))},H.prototype._bindKeys=function(){var j=this;this.register((0,o.addDisposableDomListener)(this.textarea,"keyup",function(U){return j._keyUp(U)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keydown",function(U){return j._keyDown(U)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keypress",function(U){return j._keyPress(U)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionstart",function(){return j._compositionHelper.compositionstart()})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionupdate",function(U){return j._compositionHelper.compositionupdate(U)})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionend",function(){return j._compositionHelper.compositionend()})),this.register((0,o.addDisposableDomListener)(this.textarea,"input",function(U){return j._inputEvent(U)},!0)),this.register(this.onRender(function(){return j._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(U){return j._queueLinkification(U.start,U.end)}))},H.prototype.open=function(j){var U=this;if(!j)throw new Error("Terminal requires a parent element.");j.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=j.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),j.appendChild(this.element);var re=_e.createDocumentFragment();this._viewportElement=_e.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),re.appendChild(this._viewportElement),this._viewportScrollArea=_e.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=_e.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=_e.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),re.appendChild(this.screenElement),this.textarea=_e.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,o.addDisposableDomListener)(this.textarea,"focus",function(me){return U._onTextAreaFocus(me)})),this.register((0,o.addDisposableDomListener)(this.textarea,"blur",function(){return U._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var K=this._instantiationService.createInstance(I.CoreBrowserService,this.textarea);this._instantiationService.setService(P.ICoreBrowserService,K),this._charSizeService=this._instantiationService.createInstance(z.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(P.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new A.ColorManager(_e,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(me){return U._colorManager.onOptionsChange(me)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(oe.CharacterJoinerService),this._instantiationService.setService(P.ICharacterJoinerService,this._characterJoinerService);var de=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,de,this.rows,this.screenElement)),this._instantiationService.setService(P.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(me){return U._onRender.fire(me)})),this.onResize(function(me){return U._renderService.resize(me.cols,me.rows)}),this._compositionView=_e.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(L.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(re),this._soundService=this._instantiationService.createInstance(f.SoundService),this._instantiationService.setService(P.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(W.MouseService),this._instantiationService.setService(P.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(m.Viewport,function(me){return U.scrollLines(me,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return U.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){U._renderService.onCursorMove(),U._syncTextArea()})),this.register(this.onResize(function(){return U._renderService.onResize(U.cols,U.rows)})),this.register(this.onBlur(function(){return U._renderService.onBlur()})),this.register(this.onFocus(function(){return U._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return U.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(a.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(P.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(me){return U.scrollLines(me.amount,me.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return U._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(me){return U._renderService.onSelectionChanged(me.start,me.end,me.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(me){U.textarea.value=me,U.textarea.focus(),U.textarea.select()})),this.register(this._onScroll.event(function(me){U.viewport.syncScrollArea(),U._selectionService.refresh()})),this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",function(){return U._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(p.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return U._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(me){return U._selectionService.onMouseDown(me)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new C.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},H.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(h.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(E.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},H.prototype._setTheme=function(j){var U,re,K;this._theme=j,(U=this._colorManager)===null||U===void 0||U.setTheme(j),(re=this._renderService)===null||re===void 0||re.setColors(this._colorManager.colors),(K=this.viewport)===null||K===void 0||K.onThemeChange(this._colorManager.colors)},H.prototype.bindMouse=function(){var j=this,U=this,re=this.element;function K(ve){var Xe,ut,Et=U._mouseService.getRawByteCoords(ve,U.screenElement,U.cols,U.rows);if(!Et)return!1;switch(ve.overrideType||ve.type){case"mousemove":ut=32,ve.buttons===void 0?(Xe=3,ve.button!==void 0&&(Xe=ve.button<3?ve.button:3)):Xe=1&ve.buttons?0:4&ve.buttons?1:2&ve.buttons?2:3;break;case"mouseup":ut=0,Xe=ve.button<3?ve.button:3;break;case"mousedown":ut=1,Xe=ve.button<3?ve.button:3;break;case"wheel":ve.deltaY!==0&&(ut=ve.deltaY<0?0:1),Xe=4;break;default:return!1}return!(ut===void 0||Xe===void 0||Xe>4)&&U.coreMouseService.triggerMouseEvent({col:Et.x-33,row:Et.y-33,button:Xe,action:ut,ctrl:ve.ctrlKey,alt:ve.altKey,shift:ve.shiftKey})}var de={mouseup:null,wheel:null,mousedrag:null,mousemove:null},me=function(ve){return K(ve),ve.buttons||(j._document.removeEventListener("mouseup",de.mouseup),de.mousedrag&&j._document.removeEventListener("mousemove",de.mousedrag)),j.cancel(ve)},Te=function(ve){return K(ve),j.cancel(ve,!0)},Le=function(ve){ve.buttons&&K(ve)},qe=function(ve){ve.buttons||K(ve)};this.register(this.coreMouseService.onProtocolChange(function(ve){ve?(j.optionsService.options.logLevel==="debug"&&j._logService.debug("Binding to mouse events:",j.coreMouseService.explainEvents(ve)),j.element.classList.add("enable-mouse-events"),j._selectionService.disable()):(j._logService.debug("Unbinding from mouse events."),j.element.classList.remove("enable-mouse-events"),j._selectionService.enable()),8&ve?de.mousemove||(re.addEventListener("mousemove",qe),de.mousemove=qe):(re.removeEventListener("mousemove",de.mousemove),de.mousemove=null),16&ve?de.wheel||(re.addEventListener("wheel",Te,{passive:!1}),de.wheel=Te):(re.removeEventListener("wheel",de.wheel),de.wheel=null),2&ve?de.mouseup||(de.mouseup=me):(j._document.removeEventListener("mouseup",de.mouseup),de.mouseup=null),4&ve?de.mousedrag||(de.mousedrag=Le):(j._document.removeEventListener("mousemove",de.mousedrag),de.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,o.addDisposableDomListener)(re,"mousedown",function(ve){if(ve.preventDefault(),j.focus(),j.coreMouseService.areMouseEventsActive&&!j._selectionService.shouldForceSelection(ve))return K(ve),de.mouseup&&j._document.addEventListener("mouseup",de.mouseup),de.mousedrag&&j._document.addEventListener("mousemove",de.mousedrag),j.cancel(ve)})),this.register((0,o.addDisposableDomListener)(re,"wheel",function(ve){if(!de.wheel){if(!j.buffer.hasScrollback){var Xe=j.viewport.getLinesScrolled(ve);if(Xe===0)return;for(var ut=y.C0.ESC+(j.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ve.deltaY<0?"A":"B"),Et="",Ut=0;Ut<Math.abs(Xe);Ut++)Et+=ut;return j.coreService.triggerDataEvent(Et,!0),j.cancel(ve,!0)}return j.viewport.onWheel(ve)?j.cancel(ve):void 0}},{passive:!1})),this.register((0,o.addDisposableDomListener)(re,"touchstart",function(ve){if(!j.coreMouseService.areMouseEventsActive)return j.viewport.onTouchStart(ve),j.cancel(ve)},{passive:!0})),this.register((0,o.addDisposableDomListener)(re,"touchmove",function(ve){if(!j.coreMouseService.areMouseEventsActive)return j.viewport.onTouchMove(ve)?void 0:j.cancel(ve)},{passive:!1}))},H.prototype.refresh=function(j,U){var re;(re=this._renderService)===null||re===void 0||re.refreshRows(j,U)},H.prototype._queueLinkification=function(j,U){var re;(re=this.linkifier)===null||re===void 0||re.linkifyRows(j,U)},H.prototype.updateCursorStyle=function(j){var U;((U=this._selectionService)===null||U===void 0?void 0:U.shouldColumnSelect(j))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},H.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},H.prototype.scrollLines=function(j,U,re){re===void 0&&(re=0),ye.prototype.scrollLines.call(this,j,U,re),this.refresh(0,this.rows-1)},H.prototype.paste=function(j){(0,b.paste)(j,this.textarea,this.coreService)},H.prototype.attachCustomKeyEventHandler=function(j){this._customKeyEventHandler=j},H.prototype.registerLinkMatcher=function(j,U,re){var K=this.linkifier.registerLinkMatcher(j,U,re);return this.refresh(0,this.rows-1),K},H.prototype.deregisterLinkMatcher=function(j){this.linkifier.deregisterLinkMatcher(j)&&this.refresh(0,this.rows-1)},H.prototype.registerLinkProvider=function(j){return this.linkifier2.registerLinkProvider(j)},H.prototype.registerCharacterJoiner=function(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var U=this._characterJoinerService.register(j);return this.refresh(0,this.rows-1),U},H.prototype.deregisterCharacterJoiner=function(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(j)&&this.refresh(0,this.rows-1)},Object.defineProperty(H.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),H.prototype.addMarker=function(j){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+j)},H.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},H.prototype.select=function(j,U,re){this._selectionService.setSelection(j,U,re)},H.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},H.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},H.prototype.clearSelection=function(){var j;(j=this._selectionService)===null||j===void 0||j.clearSelection()},H.prototype.selectAll=function(){var j;(j=this._selectionService)===null||j===void 0||j.selectAll()},H.prototype.selectLines=function(j,U){var re;(re=this._selectionService)===null||re===void 0||re.selectLines(j,U)},H.prototype._keyDown=function(j){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(!this._compositionHelper.keydown(j))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;j.key!=="Dead"&&j.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var U=(0,O.evaluateKeyboardEvent)(j,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(j),U.type===3||U.type===2){var re=this.rows-1;return this.scrollLines(U.type===2?-re:re),this.cancel(j,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,j)||(U.cancel&&this.cancel(j,!0),!U.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==y.C0.ETX&&U.key!==y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(j,!0))))},H.prototype._isThirdLevelShift=function(j,U){var re=j.isMac&&!this.options.macOptionIsMeta&&U.altKey&&!U.ctrlKey&&!U.metaKey||j.isWindows&&U.altKey&&U.ctrlKey&&!U.metaKey||j.isWindows&&U.getModifierState("AltGraph");return U.type==="keypress"?re:re&&(!U.keyCode||U.keyCode>47)},H.prototype._keyUp=function(j){this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1||(function(U){return U.keyCode===16||U.keyCode===17||U.keyCode===18}(j)||this.focus(),this.updateCursorStyle(j),this._keyPressHandled=!1)},H.prototype._keyPress=function(j){var U;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(this.cancel(j),j.charCode)U=j.charCode;else if(j.which===null||j.which===void 0)U=j.keyCode;else{if(j.which===0||j.charCode===0)return!1;U=j.which}return!(!U||(j.altKey||j.ctrlKey||j.metaKey)&&!this._isThirdLevelShift(this.browser,j)||(U=String.fromCharCode(U),this._onKey.fire({key:U,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(U,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},H.prototype._inputEvent=function(j){if(j.data&&j.inputType==="insertText"&&!j.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var U=j.data;return this.coreService.triggerDataEvent(U,!0),this.cancel(j),!0}return!1},H.prototype.bell=function(){var j;this._soundBell()&&((j=this._soundService)===null||j===void 0||j.playBellSound()),this._onBell.fire()},H.prototype.resize=function(j,U){j!==this.cols||U!==this.rows?ye.prototype.resize.call(this,j,U):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},H.prototype._afterResize=function(j,U){var re,K;(re=this._charSizeService)===null||re===void 0||re.measure(),(K=this.viewport)===null||K===void 0||K.syncScrollArea(!0)},H.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine(M.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},H.prototype.reset=function(){var j,U;this.options.rows=this.rows,this.options.cols=this.cols;var re=this._customKeyEventHandler;this._setup(),ye.prototype.reset.call(this),(j=this._selectionService)===null||j===void 0||j.reset(),this._customKeyEventHandler=re,this.refresh(0,this.rows-1),(U=this.viewport)===null||U===void 0||U.syncScrollArea()},H.prototype.clearTextureAtlas=function(){var j;(j=this._renderService)===null||j===void 0||j.clearTextureAtlas()},H.prototype._reportFocus=function(){var j;((j=this.element)===null||j===void 0?void 0:j.classList.contains("focus"))?this.coreService.triggerDataEvent(y.C0.ESC+"[I"):this.coreService.triggerDataEvent(y.C0.ESC+"[O")},H.prototype._reportWindowsOptions=function(j){if(this._renderService)switch(j){case u.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var U=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),re=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(y.C0.ESC+"[4;"+re+";"+U+"t");break;case u.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var K=this._renderService.dimensions.scaledCellWidth.toFixed(0),de=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(y.C0.ESC+"[6;"+de+";"+K+"t")}},H.prototype.cancel=function(j,U){if(this.options.cancelEvents||U)return j.preventDefault(),j.stopPropagation(),!1},H.prototype._visualBell=function(){return!1},H.prototype._soundBell=function(){return this.options.bellStyle==="sound"},H}(q.CoreTerminal);d.Terminal=Ce},9924:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TimeBasedDebouncer=void 0;var x=function(){function _(S,L){L===void 0&&(L=1e3),this._renderCallback=S,this._debounceThresholdMS=L,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return _.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},_.prototype.refresh=function(S,L,m){var b=this;this._rowCount=m,S=S!==void 0?S:0,L=L!==void 0?L:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,S):S,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,L):L;var y=Date.now();if(y-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=y,this._innerRefresh();else if(!this._additionalRefreshRequested){var u=y-this._lastRefreshMs,h=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){b._lastRefreshMs=Date.now(),b._innerRefresh(),b._additionalRefreshRequested=!1,b._refreshTimeoutID=void 0},h)}},_.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var S=Math.max(this._rowStart,0),L=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(S,L)}},_}();d.TimeBasedDebouncer=x},1680:function(Y,d,x){var _,S=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),L=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},m=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Viewport=void 0;var b=x(844),y=x(3656),u=x(4725),h=x(2585),v=function(a){function s(o,l,f,p,C,E,O,R){var M=a.call(this)||this;return M._scrollLines=o,M._viewportElement=l,M._scrollArea=f,M._element=p,M._bufferService=C,M._optionsService=E,M._charSizeService=O,M._renderService=R,M.scrollBarWidth=0,M._currentRowHeight=0,M._currentScaledCellHeight=0,M._lastRecordedBufferLength=0,M._lastRecordedViewportHeight=0,M._lastRecordedBufferHeight=0,M._lastTouchY=0,M._lastScrollTop=0,M._lastHadScrollBar=!1,M._wheelPartialScroll=0,M._refreshAnimationFrame=null,M._ignoreNextScrollEvent=!1,M.scrollBarWidth=M._viewportElement.offsetWidth-M._scrollArea.offsetWidth||15,M._lastHadScrollBar=!0,M.register((0,y.addDisposableDomListener)(M._viewportElement,"scroll",M._onScroll.bind(M))),M._activeBuffer=M._bufferService.buffer,M.register(M._bufferService.buffers.onBufferActivate(function(A){return M._activeBuffer=A.activeBuffer})),M._renderDimensions=M._renderService.dimensions,M.register(M._renderService.onDimensionsChange(function(A){return M._renderDimensions=A})),setTimeout(function(){return M.syncScrollArea()},0),M}return S(s,a),s.prototype.onThemeChange=function(o){this._viewportElement.style.backgroundColor=o.background.css},s.prototype._refresh=function(o){var l=this;if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return l._innerRefresh()}))},s.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var f=window.getComputedStyle(this._element),p=parseInt(f.paddingLeft)+parseInt(f.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?p:0)).toString()+"px",this._refreshAnimationFrame=null},s.prototype.syncScrollArea=function(o){if(o===void 0&&(o=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(o):this._refresh(o)},s.prototype._onScroll=function(o){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(l)}},s.prototype._bubbleScroll=function(o,l){var f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&f<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)},s.prototype.onWheel=function(o){var l=this._getPixelsScrolled(o);return l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(o,l))},s.prototype._getPixelsScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var l=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l},s.prototype.getLinesScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var l=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l},s.prototype._applyScrollModifier=function(o,l){var f=this._optionsService.options.fastScrollModifier;return f==="alt"&&l.altKey||f==="ctrl"&&l.ctrlKey||f==="shift"&&l.shiftKey?o*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:o*this._optionsService.options.scrollSensitivity},s.prototype.onTouchStart=function(o){this._lastTouchY=o.touches[0].pageY},s.prototype.onTouchMove=function(o){var l=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(o,l))},L([m(4,h.IBufferService),m(5,h.IOptionsService),m(6,u.ICharSizeService),m(7,u.IRenderService)],s)}(b.Disposable);d.Viewport=v},2950:function(Y,d,x){var _=this&&this.__decorate||function(y,u,h,v){var a,s=arguments.length,o=s<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(y,u,h,v);else for(var l=y.length-1;l>=0;l--)(a=y[l])&&(o=(s<3?a(o):s>3?a(u,h,o):a(u,h))||o);return s>3&&o&&Object.defineProperty(u,h,o),o},S=this&&this.__param||function(y,u){return function(h,v){u(h,v,y)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CompositionHelper=void 0;var L=x(4725),m=x(2585),b=function(){function y(u,h,v,a,s,o){this._textarea=u,this._compositionView=h,this._bufferService=v,this._optionsService=a,this._coreService=s,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(y.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),y.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},y.prototype.compositionupdate=function(u){var h=this;this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(function(){h._compositionPosition.end=h._textarea.value.length},0)},y.prototype.compositionend=function(){this._finalizeComposition(!0)},y.prototype.keydown=function(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},y.prototype._finalizeComposition=function(u){var h=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){var v={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(h._isSendingComposition){h._isSendingComposition=!1;var s;v.start+=h._dataAlreadySent.length,(s=h._isComposing?h._textarea.value.substring(v.start,v.end):h._textarea.value.substring(v.start)).length>0&&h._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;var a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}},y.prototype._handleAnyTextareaChanges=function(){var u=this,h=this._textarea.value;setTimeout(function(){if(!u._isComposing){var v=u._textarea.value.replace(h,"");v.length>0&&(u._dataAlreadySent=v,u._coreService.triggerDataEvent(v,!0))}},0)},y.prototype.updateCompositionElements=function(u){var h=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.actualCellHeight,s=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=v*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}u||setTimeout(function(){return h.updateCompositionElements(!0)},0)}},_([S(2,m.IBufferService),S(3,m.IOptionsService),S(4,m.ICoreService),S(5,L.IRenderService)],y)}();d.CompositionHelper=b},9806:(Y,d)=>{function x(_,S){var L=S.getBoundingClientRect();return[_.clientX-L.left,_.clientY-L.top]}Object.defineProperty(d,"__esModule",{value:!0}),d.getRawByteCoords=d.getCoords=d.getCoordsRelativeToElement=void 0,d.getCoordsRelativeToElement=x,d.getCoords=function(_,S,L,m,b,y,u,h){if(b){var v=x(_,S);if(v)return v[0]=Math.ceil((v[0]+(h?y/2:0))/y),v[1]=Math.ceil(v[1]/u),v[0]=Math.min(Math.max(v[0],1),L+(h?1:0)),v[1]=Math.min(Math.max(v[1],1),m),v}},d.getRawByteCoords=function(_){if(_)return{x:_[0]+32,y:_[1]+32}}},9504:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.moveToCellSequence=void 0;var _=x(2584);function S(h,v,a,s){var o=h-L(a,h),l=v-L(a,v),f=Math.abs(o-l)-function(p,C,E){for(var O=0,R=p-L(E,p),M=C-L(E,C),A=0;A<Math.abs(R-M);A++){var D=m(p,C)==="A"?-1:1,P=E.buffer.lines.get(R+D*A);(P==null?void 0:P.isWrapped)&&O++}return O}(h,v,a);return u(f,y(m(h,v),s))}function L(h,v){for(var a=0,s=h.buffer.lines.get(v),o=s==null?void 0:s.isWrapped;o&&v>=0&&v<h.rows;)a++,o=(s=h.buffer.lines.get(--v))==null?void 0:s.isWrapped;return a}function m(h,v){return h>v?"A":"B"}function b(h,v,a,s,o,l){for(var f=h,p=v,C="";f!==a||p!==s;)f+=o?1:-1,o&&f>l.cols-1?(C+=l.buffer.translateBufferLineToString(p,!1,h,f),f=0,h=0,p++):!o&&f<0&&(C+=l.buffer.translateBufferLineToString(p,!1,0,h+1),h=f=l.cols-1,p--);return C+l.buffer.translateBufferLineToString(p,!1,h,f)}function y(h,v){var a=v?"O":"[";return _.C0.ESC+a+h}function u(h,v){h=Math.floor(h);for(var a="",s=0;s<h;s++)a+=v;return a}d.moveToCellSequence=function(h,v,a,s){var o,l=a.buffer.x,f=a.buffer.y;if(!a.buffer.hasScrollback)return function(C,E,O,R,M,A){return S(E,R,M,A).length===0?"":u(b(C,E,C,E-L(M,E),!1,M).length,y("D",A))}(l,f,0,v,a,s)+S(f,v,a,s)+function(C,E,O,R,M,A){var D;D=S(E,R,M,A).length>0?R-L(M,R):E;var P=R,z=function(W,B,I,q,X,oe){var ne;return ne=S(I,q,X,oe).length>0?q-L(X,q):B,W<I&&ne<=q||W>=I&&ne<q?"C":"D"}(C,E,O,R,M,A);return u(b(C,D,O,P,z==="C",M).length,y(z,A))}(l,f,h,v,a,s);if(f===v)return o=l>h?"D":"C",u(Math.abs(l-h),y(o,s));o=f>v?"D":"C";var p=Math.abs(f-v);return u(function(C,E){return E.cols-C}(f>v?h:l,a)+(p-1)*a.cols+1+((f>v?l:h)-1),y(o,s))}},1546:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseRenderLayer=void 0;var _=x(643),S=x(8803),L=x(1420),m=x(3734),b=x(1752),y=x(4774),u=x(9631),h=x(8978),v=function(){function a(s,o,l,f,p,C,E,O){this._container=s,this._alpha=f,this._colors=p,this._rendererId=C,this._bufferService=E,this._optionsService=O,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+o+"-layer"),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return a.prototype.dispose=function(){var s;(0,u.removeElementFromParent)(this._canvas),(s=this._charAtlas)===null||s===void 0||s.dispose()},a.prototype._initCanvas=function(){this._ctx=(0,b.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},a.prototype.onOptionsChanged=function(){},a.prototype.onBlur=function(){},a.prototype.onFocus=function(){},a.prototype.onCursorMove=function(){},a.prototype.onGridChanged=function(s,o){},a.prototype.onSelectionChanged=function(s,o,l){l===void 0&&(l=!1)},a.prototype.setColors=function(s){this._refreshCharAtlas(s)},a.prototype._setTransparency=function(s){if(s!==this._alpha){var o=this._canvas;this._alpha=s,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,o),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},a.prototype._refreshCharAtlas=function(s){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,L.acquireCharAtlas)(this._optionsService.options,this._rendererId,s,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},a.prototype.resize=function(s){this._scaledCellWidth=s.scaledCellWidth,this._scaledCellHeight=s.scaledCellHeight,this._scaledCharWidth=s.scaledCharWidth,this._scaledCharHeight=s.scaledCharHeight,this._scaledCharLeft=s.scaledCharLeft,this._scaledCharTop=s.scaledCharTop,this._canvas.width=s.scaledCanvasWidth,this._canvas.height=s.scaledCanvasHeight,this._canvas.style.width=s.canvasWidth+"px",this._canvas.style.height=s.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},a.prototype.clearTextureAtlas=function(){var s;(s=this._charAtlas)===null||s===void 0||s.clear()},a.prototype._fillCells=function(s,o,l,f){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,f*this._scaledCellHeight)},a.prototype._fillMiddleLineAtCells=function(s,o,l){l===void 0&&(l=1);var f=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-f-window.devicePixelRatio,l*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillBottomLineAtCells=function(s,o,l){l===void 0&&(l=1),this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-window.devicePixelRatio-1,l*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillLeftLineAtCell=function(s,o,l){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,window.devicePixelRatio*l,this._scaledCellHeight)},a.prototype._strokeRectAtCell=function(s,o,l,f){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(s*this._scaledCellWidth+window.devicePixelRatio/2,o*this._scaledCellHeight+window.devicePixelRatio/2,l*this._scaledCellWidth-window.devicePixelRatio,f*this._scaledCellHeight-window.devicePixelRatio)},a.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},a.prototype._clearCells=function(s,o,l,f){this._alpha?this._ctx.clearRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,f*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,f*this._scaledCellHeight))},a.prototype._fillCharTrueColor=function(s,o,l){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=S.TEXT_BASELINE,this._clipRow(l);var f=!1;this._optionsService.options.customGlyphs!==!1&&(f=(0,h.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),f||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},a.prototype._drawChars=function(s,o,l){var f,p,C,E=this._getContrastColor(s);E||s.isFgRGB()||s.isBgRGB()?this._drawUncachedChars(s,o,l,E):(s.isInverse()?(p=s.isBgDefault()?S.INVERTED_DEFAULT_COLOR:s.getBgColor(),C=s.isFgDefault()?S.INVERTED_DEFAULT_COLOR:s.getFgColor()):(C=s.isBgDefault()?_.DEFAULT_COLOR:s.getBgColor(),p=s.isFgDefault()?_.DEFAULT_COLOR:s.getFgColor()),p+=this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&p<8?8:0,this._currentGlyphIdentifier.chars=s.getChars()||_.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=s.getCode()||_.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=C,this._currentGlyphIdentifier.fg=p,this._currentGlyphIdentifier.bold=!!s.isBold(),this._currentGlyphIdentifier.dim=!!s.isDim(),this._currentGlyphIdentifier.italic=!!s.isItalic(),((f=this._charAtlas)===null||f===void 0?void 0:f.draw(this._ctx,this._currentGlyphIdentifier,o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(s,o,l))},a.prototype._drawUncachedChars=function(s,o,l,f){if(this._ctx.save(),this._ctx.font=this._getFont(!!s.isBold(),!!s.isItalic()),this._ctx.textBaseline=S.TEXT_BASELINE,s.isInverse())if(f)this._ctx.fillStyle=f.css;else if(s.isBgDefault())this._ctx.fillStyle=y.color.opaque(this._colors.background).css;else if(s.isBgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(s.getBgColor()).join(",")+")";else{var p=s.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&p<8&&(p+=8),this._ctx.fillStyle=this._colors.ansi[p].css}else if(f)this._ctx.fillStyle=f.css;else if(s.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(s.isFgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(s.getFgColor()).join(",")+")";else{var C=s.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&C<8&&(C+=8),this._ctx.fillStyle=this._colors.ansi[C].css}this._clipRow(l),s.isDim()&&(this._ctx.globalAlpha=S.DIM_OPACITY);var E=!1;this._optionsService.options.customGlyphs!==!1&&(E=(0,h.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),E||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},a.prototype._clipRow=function(s){this._ctx.beginPath(),this._ctx.rect(0,s*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},a.prototype._getFont=function(s,o){return(o?"italic":"")+" "+(s?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},a.prototype._getContrastColor=function(s){if(this._optionsService.options.minimumContrastRatio!==1){var o=this._colors.contrastCache.getColor(s.bg,s.fg);if(o!==void 0)return o||void 0;var l=s.getFgColor(),f=s.getFgColorMode(),p=s.getBgColor(),C=s.getBgColorMode(),E=!!s.isInverse(),O=!!s.isInverse();if(E){var R=l;l=p,p=R;var M=f;f=C,C=M}var A=this._resolveBackgroundRgba(C,p,E),D=this._resolveForegroundRgba(f,l,E,O),P=y.rgba.ensureContrastRatio(A,D,this._optionsService.options.minimumContrastRatio);if(P){var z={css:y.channels.toCss(P>>24&255,P>>16&255,P>>8&255),rgba:P};return this._colors.contrastCache.setColor(s.bg,s.fg,z),z}this._colors.contrastCache.setColor(s.bg,s.fg,null)}},a.prototype._resolveBackgroundRgba=function(s,o,l){switch(s){case 16777216:case 33554432:return this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return l?this._colors.foreground.rgba:this._colors.background.rgba}},a.prototype._resolveForegroundRgba=function(s,o,l,f){switch(s){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&f&&o<8&&(o+=8),this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return l?this._colors.background.rgba:this._colors.foreground.rgba}},a}();d.BaseRenderLayer=v},2512:function(Y,d,x){var _,S=this&&this.__extends||(_=function(o,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(f[C]=p[C])},_(o,l)},function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function f(){this.constructor=o}_(o,l),o.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}),L=this&&this.__decorate||function(o,l,f,p){var C,E=arguments.length,O=E<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,f):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(o,l,f,p);else for(var R=o.length-1;R>=0;R--)(C=o[R])&&(O=(E<3?C(O):E>3?C(l,f,O):C(l,f))||O);return E>3&&O&&Object.defineProperty(l,f,O),O},m=this&&this.__param||function(o,l){return function(f,p){l(f,p,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CursorRenderLayer=void 0;var b=x(1546),y=x(511),u=x(2585),h=x(4725),v=600,a=function(o){function l(f,p,C,E,O,R,M,A,D){var P=o.call(this,f,"cursor",p,!0,C,E,R,M)||this;return P._onRequestRedraw=O,P._coreService=A,P._coreBrowserService=D,P._cell=new y.CellData,P._state={x:0,y:0,isFocused:!1,style:"",width:0},P._cursorRenderers={bar:P._renderBarCursor.bind(P),block:P._renderBlockCursor.bind(P),underline:P._renderUnderlineCursor.bind(P)},P}return S(l,o),l.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),o.prototype.dispose.call(this)},l.prototype.resize=function(f){o.prototype.resize.call(this,f),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},l.prototype.reset=function(){var f;this._clearCursor(),(f=this._cursorBlinkStateManager)===null||f===void 0||f.restartBlinkAnimation(),this.onOptionsChanged()},l.prototype.onBlur=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onFocus=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onOptionsChanged=function(){var f,p=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(this._coreBrowserService.isFocused,function(){p._render(!0)})):((f=this._cursorBlinkStateManager)===null||f===void 0||f.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onCursorMove=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.restartBlinkAnimation()},l.prototype.onGridChanged=function(f,p){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},l.prototype._render=function(f){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var p=this._bufferService.buffer.ybase+this._bufferService.buffer.y,C=p-this._bufferService.buffer.ydisp;if(C<0||C>=this._bufferService.rows)this._clearCursor();else{var E=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(p).loadCell(E,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var O=this._optionsService.options.cursorStyle;return O&&O!=="block"?this._cursorRenderers[O](E,C,this._cell):this._renderBlurCursor(E,C,this._cell),this._ctx.restore(),this._state.x=E,this._state.y=C,this._state.isFocused=!1,this._state.style=O,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===E&&this._state.y===C&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](E,C,this._cell),this._ctx.restore(),this._state.x=E,this._state.y=C,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},l.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},l.prototype._renderBarCursor=function(f,p,C){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(f,p,this._optionsService.options.cursorWidth),this._ctx.restore()},l.prototype._renderBlockCursor=function(f,p,C){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(f,p,C.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(C,f,p),this._ctx.restore()},l.prototype._renderUnderlineCursor=function(f,p,C){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(f,p),this._ctx.restore()},l.prototype._renderBlurCursor=function(f,p,C){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(f,p,C.getWidth(),1),this._ctx.restore()},L([m(5,u.IBufferService),m(6,u.IOptionsService),m(7,u.ICoreService),m(8,h.ICoreBrowserService)],l)}(b.BaseRenderLayer);d.CursorRenderLayer=a;var s=function(){function o(l,f){this._renderCallback=f,this.isCursorVisible=!0,l&&this._restartInterval()}return Object.defineProperty(o.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),o.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.restartBlinkAnimation=function(){var l=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=void 0})))},o.prototype._restartInterval=function(l){var f=this;l===void 0&&(l=v),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(f._animationTimeRestarted){var p=v-(Date.now()-f._animationTimeRestarted);if(f._animationTimeRestarted=void 0,p>0)return void f._restartInterval(p)}f.isCursorVisible=!1,f._animationFrame=window.requestAnimationFrame(function(){f._renderCallback(),f._animationFrame=void 0}),f._blinkInterval=window.setInterval(function(){if(f._animationTimeRestarted){var C=v-(Date.now()-f._animationTimeRestarted);return f._animationTimeRestarted=void 0,void f._restartInterval(C)}f.isCursorVisible=!f.isCursorVisible,f._animationFrame=window.requestAnimationFrame(function(){f._renderCallback(),f._animationFrame=void 0})},v)},l)},o.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},o}()},8978:(Y,d,x)=>{var _,S,L,m,b,y,u,h,v,a,s,o,l,f,p,C,E,O,R,M,A,D,P,z,W,B,I,q,X,oe,ne,_e,Ce,ye,H,j,U,re,K,de,me,Te,Le,qe,ve,Xe,ut,Et,Ut,dr,ci,Zi,Wr,ui,$t,Ji,Vt,Qt,$i,wt,hi,be,pr,Qe,Oe,Pe,Nr,tt,Bt,ze,Ur,vr,jt,_r,jr,fi,gr,di,yr,pi,mr,vi,_i,br,gi,Sr,Pt,yi,mi,er,Cr,Ht,bi,Mt,wr,qr,De,pe,At,Lr,ht,Ee,Tt,qt,xr,ie,we,kr,Er,tr,rr,zr,xe,Vi,Si,Mr,mt,Ci,wi,ir,Kr,Li,Gr,xi,ki,Ei,Mi,Qi;Object.defineProperty(d,"__esModule",{value:!0}),d.tryDrawCustomChar=d.boxDrawingDefinitions=d.blockElementDefinitions=void 0;var Mn=x(1752);d.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var An={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};d.boxDrawingDefinitions={"\u2500":(_={},_[1]="M0,.5 L1,.5",_),"\u2501":(S={},S[3]="M0,.5 L1,.5",S),"\u2502":(L={},L[1]="M.5,0 L.5,1",L),"\u2503":(m={},m[3]="M.5,0 L.5,1",m),"\u250C":(b={},b[1]="M0.5,1 L.5,.5 L1,.5",b),"\u250F":(y={},y[3]="M0.5,1 L.5,.5 L1,.5",y),"\u2510":(u={},u[1]="M0,.5 L.5,.5 L.5,1",u),"\u2513":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"\u2514":(v={},v[1]="M.5,0 L.5,.5 L1,.5",v),"\u2517":(a={},a[3]="M.5,0 L.5,.5 L1,.5",a),"\u2518":(s={},s[1]="M.5,0 L.5,.5 L0,.5",s),"\u251B":(o={},o[3]="M.5,0 L.5,.5 L0,.5",o),"\u251C":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L1,.5",l),"\u2523":(f={},f[3]="M.5,0 L.5,1 M.5,.5 L1,.5",f),"\u2524":(p={},p[1]="M.5,0 L.5,1 M.5,.5 L0,.5",p),"\u252B":(C={},C[3]="M.5,0 L.5,1 M.5,.5 L0,.5",C),"\u252C":(E={},E[1]="M0,.5 L1,.5 M.5,.5 L.5,1",E),"\u2533":(O={},O[3]="M0,.5 L1,.5 M.5,.5 L.5,1",O),"\u2534":(R={},R[1]="M0,.5 L1,.5 M.5,.5 L.5,0",R),"\u253B":(M={},M[3]="M0,.5 L1,.5 M.5,.5 L.5,0",M),"\u253C":(A={},A[1]="M0,.5 L1,.5 M.5,0 L.5,1",A),"\u254B":(D={},D[3]="M0,.5 L1,.5 M.5,0 L.5,1",D),"\u2574":(P={},P[1]="M.5,.5 L0,.5",P),"\u2578":(z={},z[3]="M.5,.5 L0,.5",z),"\u2575":(W={},W[1]="M.5,.5 L.5,0",W),"\u2579":(B={},B[3]="M.5,.5 L.5,0",B),"\u2576":(I={},I[1]="M.5,.5 L1,.5",I),"\u257A":(q={},q[3]="M.5,.5 L1,.5",q),"\u2577":(X={},X[1]="M.5,.5 L.5,1",X),"\u257B":(oe={},oe[3]="M.5,.5 L.5,1",oe),"\u2550":(ne={},ne[1]=function(Q,V){return"M0,"+(.5-V)+" L1,"+(.5-V)+" M0,"+(.5+V)+" L1,"+(.5+V)},ne),"\u2551":(_e={},_e[1]=function(Q,V){return"M"+(.5-Q)+",0 L"+(.5-Q)+",1 M"+(.5+Q)+",0 L"+(.5+Q)+",1"},_e),"\u2552":(Ce={},Ce[1]=function(Q,V){return"M.5,1 L.5,"+(.5-V)+" L1,"+(.5-V)+" M.5,"+(.5+V)+" L1,"+(.5+V)},Ce),"\u2553":(ye={},ye[1]=function(Q,V){return"M"+(.5-Q)+",1 L"+(.5-Q)+",.5 L1,.5 M"+(.5+Q)+",.5 L"+(.5+Q)+",1"},ye),"\u2554":(H={},H[1]=function(Q,V){return"M1,"+(.5-V)+" L"+(.5-Q)+","+(.5-V)+" L"+(.5-Q)+",1 M1,"+(.5+V)+" L"+(.5+Q)+","+(.5+V)+" L"+(.5+Q)+",1"},H),"\u2555":(j={},j[1]=function(Q,V){return"M0,"+(.5-V)+" L.5,"+(.5-V)+" L.5,1 M0,"+(.5+V)+" L.5,"+(.5+V)},j),"\u2556":(U={},U[1]=function(Q,V){return"M"+(.5+Q)+",1 L"+(.5+Q)+",.5 L0,.5 M"+(.5-Q)+",.5 L"+(.5-Q)+",1"},U),"\u2557":(re={},re[1]=function(Q,V){return"M0,"+(.5+V)+" L"+(.5-Q)+","+(.5+V)+" L"+(.5-Q)+",1 M0,"+(.5-V)+" L"+(.5+Q)+","+(.5-V)+" L"+(.5+Q)+",1"},re),"\u2558":(K={},K[1]=function(Q,V){return"M.5,0 L.5,"+(.5+V)+" L1,"+(.5+V)+" M.5,"+(.5-V)+" L1,"+(.5-V)},K),"\u2559":(de={},de[1]=function(Q,V){return"M1,.5 L"+(.5-Q)+",.5 L"+(.5-Q)+",0 M"+(.5+Q)+",.5 L"+(.5+Q)+",0"},de),"\u255A":(me={},me[1]=function(Q,V){return"M1,"+(.5-V)+" L"+(.5+Q)+","+(.5-V)+" L"+(.5+Q)+",0 M1,"+(.5+V)+" L"+(.5-Q)+","+(.5+V)+" L"+(.5-Q)+",0"},me),"\u255B":(Te={},Te[1]=function(Q,V){return"M0,"+(.5+V)+" L.5,"+(.5+V)+" L.5,0 M0,"+(.5-V)+" L.5,"+(.5-V)},Te),"\u255C":(Le={},Le[1]=function(Q,V){return"M0,.5 L"+(.5+Q)+",.5 L"+(.5+Q)+",0 M"+(.5-Q)+",.5 L"+(.5-Q)+",0"},Le),"\u255D":(qe={},qe[1]=function(Q,V){return"M0,"+(.5-V)+" L"+(.5-Q)+","+(.5-V)+" L"+(.5-Q)+",0 M0,"+(.5+V)+" L"+(.5+Q)+","+(.5+V)+" L"+(.5+Q)+",0"},qe),"\u255E":(ve={},ve[1]=function(Q,V){return"M.5,0 L.5,1 M.5,"+(.5-V)+" L1,"+(.5-V)+" M.5,"+(.5+V)+" L1,"+(.5+V)},ve),"\u255F":(Xe={},Xe[1]=function(Q,V){return"M"+(.5-Q)+",0 L"+(.5-Q)+",1 M"+(.5+Q)+",0 L"+(.5+Q)+",1 M"+(.5+Q)+",.5 L1,.5"},Xe),"\u2560":(ut={},ut[1]=function(Q,V){return"M"+(.5-Q)+",0 L"+(.5-Q)+",1 M1,"+(.5+V)+" L"+(.5+Q)+","+(.5+V)+" L"+(.5+Q)+",1 M1,"+(.5-V)+" L"+(.5+Q)+","+(.5-V)+" L"+(.5+Q)+",0"},ut),"\u2561":(Et={},Et[1]=function(Q,V){return"M.5,0 L.5,1 M0,"+(.5-V)+" L.5,"+(.5-V)+" M0,"+(.5+V)+" L.5,"+(.5+V)},Et),"\u2562":(Ut={},Ut[1]=function(Q,V){return"M0,.5 L"+(.5-Q)+",.5 M"+(.5-Q)+",0 L"+(.5-Q)+",1 M"+(.5+Q)+",0 L"+(.5+Q)+",1"},Ut),"\u2563":(dr={},dr[1]=function(Q,V){return"M"+(.5+Q)+",0 L"+(.5+Q)+",1 M0,"+(.5+V)+" L"+(.5-Q)+","+(.5+V)+" L"+(.5-Q)+",1 M0,"+(.5-V)+" L"+(.5-Q)+","+(.5-V)+" L"+(.5-Q)+",0"},dr),"\u2564":(ci={},ci[1]=function(Q,V){return"M0,"+(.5-V)+" L1,"+(.5-V)+" M0,"+(.5+V)+" L1,"+(.5+V)+" M.5,"+(.5+V)+" L.5,1"},ci),"\u2565":(Zi={},Zi[1]=function(Q,V){return"M0,.5 L1,.5 M"+(.5-Q)+",.5 L"+(.5-Q)+",1 M"+(.5+Q)+",.5 L"+(.5+Q)+",1"},Zi),"\u2566":(Wr={},Wr[1]=function(Q,V){return"M0,"+(.5-V)+" L1,"+(.5-V)+" M0,"+(.5+V)+" L"+(.5-Q)+","+(.5+V)+" L"+(.5-Q)+",1 M1,"+(.5+V)+" L"+(.5+Q)+","+(.5+V)+" L"+(.5+Q)+",1"},Wr),"\u2567":(ui={},ui[1]=function(Q,V){return"M.5,0 L.5,"+(.5-V)+" M0,"+(.5-V)+" L1,"+(.5-V)+" M0,"+(.5+V)+" L1,"+(.5+V)},ui),"\u2568":($t={},$t[1]=function(Q,V){return"M0,.5 L1,.5 M"+(.5-Q)+",.5 L"+(.5-Q)+",0 M"+(.5+Q)+",.5 L"+(.5+Q)+",0"},$t),"\u2569":(Ji={},Ji[1]=function(Q,V){return"M0,"+(.5+V)+" L1,"+(.5+V)+" M0,"+(.5-V)+" L"+(.5-Q)+","+(.5-V)+" L"+(.5-Q)+",0 M1,"+(.5-V)+" L"+(.5+Q)+","+(.5-V)+" L"+(.5+Q)+",0"},Ji),"\u256A":(Vt={},Vt[1]=function(Q,V){return"M.5,0 L.5,1 M0,"+(.5-V)+" L1,"+(.5-V)+" M0,"+(.5+V)+" L1,"+(.5+V)},Vt),"\u256B":(Qt={},Qt[1]=function(Q,V){return"M0,.5 L1,.5 M"+(.5-Q)+",0 L"+(.5-Q)+",1 M"+(.5+Q)+",0 L"+(.5+Q)+",1"},Qt),"\u256C":($i={},$i[1]=function(Q,V){return"M0,"+(.5+V)+" L"+(.5-Q)+","+(.5+V)+" L"+(.5-Q)+",1 M1,"+(.5+V)+" L"+(.5+Q)+","+(.5+V)+" L"+(.5+Q)+",1 M0,"+(.5-V)+" L"+(.5-Q)+","+(.5-V)+" L"+(.5-Q)+",0 M1,"+(.5-V)+" L"+(.5+Q)+","+(.5-V)+" L"+(.5+Q)+",0"},$i),"\u2571":(wt={},wt[1]="M1,0 L0,1",wt),"\u2572":(hi={},hi[1]="M0,0 L1,1",hi),"\u2573":(be={},be[1]="M1,0 L0,1 M0,0 L1,1",be),"\u257C":(pr={},pr[1]="M.5,.5 L0,.5",pr[3]="M.5,.5 L1,.5",pr),"\u257D":(Qe={},Qe[1]="M.5,.5 L.5,0",Qe[3]="M.5,.5 L.5,1",Qe),"\u257E":(Oe={},Oe[1]="M.5,.5 L1,.5",Oe[3]="M.5,.5 L0,.5",Oe),"\u257F":(Pe={},Pe[1]="M.5,.5 L.5,1",Pe[3]="M.5,.5 L.5,0",Pe),"\u250D":(Nr={},Nr[1]="M.5,.5 L.5,1",Nr[3]="M.5,.5 L1,.5",Nr),"\u250E":(tt={},tt[1]="M.5,.5 L1,.5",tt[3]="M.5,.5 L.5,1",tt),"\u2511":(Bt={},Bt[1]="M.5,.5 L.5,1",Bt[3]="M.5,.5 L0,.5",Bt),"\u2512":(ze={},ze[1]="M.5,.5 L0,.5",ze[3]="M.5,.5 L.5,1",ze),"\u2515":(Ur={},Ur[1]="M.5,.5 L.5,0",Ur[3]="M.5,.5 L1,.5",Ur),"\u2516":(vr={},vr[1]="M.5,.5 L1,.5",vr[3]="M.5,.5 L.5,0",vr),"\u2519":(jt={},jt[1]="M.5,.5 L.5,0",jt[3]="M.5,.5 L0,.5",jt),"\u251A":(_r={},_r[1]="M.5,.5 L0,.5",_r[3]="M.5,.5 L.5,0",_r),"\u251D":(jr={},jr[1]="M.5,0 L.5,1",jr[3]="M.5,.5 L1,.5",jr),"\u251E":(fi={},fi[1]="M0.5,1 L.5,.5 L1,.5",fi[3]="M.5,.5 L.5,0",fi),"\u251F":(gr={},gr[1]="M.5,0 L.5,.5 L1,.5",gr[3]="M.5,.5 L.5,1",gr),"\u2520":(di={},di[1]="M.5,.5 L1,.5",di[3]="M.5,0 L.5,1",di),"\u2521":(yr={},yr[1]="M.5,.5 L.5,1",yr[3]="M.5,0 L.5,.5 L1,.5",yr),"\u2522":(pi={},pi[1]="M.5,.5 L.5,0",pi[3]="M0.5,1 L.5,.5 L1,.5",pi),"\u2525":(mr={},mr[1]="M.5,0 L.5,1",mr[3]="M.5,.5 L0,.5",mr),"\u2526":(vi={},vi[1]="M0,.5 L.5,.5 L.5,1",vi[3]="M.5,.5 L.5,0",vi),"\u2527":(_i={},_i[1]="M.5,0 L.5,.5 L0,.5",_i[3]="M.5,.5 L.5,1",_i),"\u2528":(br={},br[1]="M.5,.5 L0,.5",br[3]="M.5,0 L.5,1",br),"\u2529":(gi={},gi[1]="M.5,.5 L.5,1",gi[3]="M.5,0 L.5,.5 L0,.5",gi),"\u252A":(Sr={},Sr[1]="M.5,.5 L.5,0",Sr[3]="M0,.5 L.5,.5 L.5,1",Sr),"\u252D":(Pt={},Pt[1]="M0.5,1 L.5,.5 L1,.5",Pt[3]="M.5,.5 L0,.5",Pt),"\u252E":(yi={},yi[1]="M0,.5 L.5,.5 L.5,1",yi[3]="M.5,.5 L1,.5",yi),"\u252F":(mi={},mi[1]="M.5,.5 L.5,1",mi[3]="M0,.5 L1,.5",mi),"\u2530":(er={},er[1]="M0,.5 L1,.5",er[3]="M.5,.5 L.5,1",er),"\u2531":(Cr={},Cr[1]="M.5,.5 L1,.5",Cr[3]="M0,.5 L.5,.5 L.5,1",Cr),"\u2532":(Ht={},Ht[1]="M.5,.5 L0,.5",Ht[3]="M0.5,1 L.5,.5 L1,.5",Ht),"\u2535":(bi={},bi[1]="M.5,0 L.5,.5 L1,.5",bi[3]="M.5,.5 L0,.5",bi),"\u2536":(Mt={},Mt[1]="M.5,0 L.5,.5 L0,.5",Mt[3]="M.5,.5 L1,.5",Mt),"\u2537":(wr={},wr[1]="M.5,.5 L.5,0",wr[3]="M0,.5 L1,.5",wr),"\u2538":(qr={},qr[1]="M0,.5 L1,.5",qr[3]="M.5,.5 L.5,0",qr),"\u2539":(De={},De[1]="M.5,.5 L1,.5",De[3]="M.5,0 L.5,.5 L0,.5",De),"\u253A":(pe={},pe[1]="M.5,.5 L0,.5",pe[3]="M.5,0 L.5,.5 L1,.5",pe),"\u253D":(At={},At[1]="M.5,0 L.5,1 M.5,.5 L1,.5",At[3]="M.5,.5 L0,.5",At),"\u253E":(Lr={},Lr[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Lr[3]="M.5,.5 L1,.5",Lr),"\u253F":(ht={},ht[1]="M.5,0 L.5,1",ht[3]="M0,.5 L1,.5",ht),"\u2540":(Ee={},Ee[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ee[3]="M.5,.5 L.5,0",Ee),"\u2541":(Tt={},Tt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Tt[3]="M.5,.5 L.5,1",Tt),"\u2542":(qt={},qt[1]="M0,.5 L1,.5",qt[3]="M.5,0 L.5,1",qt),"\u2543":(xr={},xr[1]="M0.5,1 L.5,.5 L1,.5",xr[3]="M.5,0 L.5,.5 L0,.5",xr),"\u2544":(ie={},ie[1]="M0,.5 L.5,.5 L.5,1",ie[3]="M.5,0 L.5,.5 L1,.5",ie),"\u2545":(we={},we[1]="M.5,0 L.5,.5 L1,.5",we[3]="M0,.5 L.5,.5 L.5,1",we),"\u2546":(kr={},kr[1]="M.5,0 L.5,.5 L0,.5",kr[3]="M0.5,1 L.5,.5 L1,.5",kr),"\u2547":(Er={},Er[1]="M.5,.5 L.5,1",Er[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Er),"\u2548":(tr={},tr[1]="M.5,.5 L.5,0",tr[3]="M0,.5 L1,.5 M.5,.5 L.5,1",tr),"\u2549":(rr={},rr[1]="M.5,.5 L1,.5",rr[3]="M.5,0 L.5,1 M.5,.5 L0,.5",rr),"\u254A":(zr={},zr[1]="M.5,.5 L0,.5",zr[3]="M.5,0 L.5,1 M.5,.5 L1,.5",zr),"\u254C":(xe={},xe[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",xe),"\u254D":(Vi={},Vi[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Vi),"\u2504":(Si={},Si[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Si),"\u2505":(Mr={},Mr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Mr),"\u2508":(mt={},mt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",mt),"\u2509":(Ci={},Ci[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ci),"\u254E":(wi={},wi[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",wi),"\u254F":(ir={},ir[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ir),"\u2506":(Kr={},Kr[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Kr),"\u2507":(Li={},Li[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Li),"\u250A":(Gr={},Gr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Gr),"\u250B":(xi={},xi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",xi),"\u256D":(ki={},ki[1]="C.5,1,.5,.5,1,.5",ki),"\u256E":(Ei={},Ei[1]="C.5,1,.5,.5,0,.5",Ei),"\u256F":(Mi={},Mi[1]="C.5,0,.5,.5,0,.5",Mi),"\u2570":(Qi={},Qi[1]="C.5,0,.5,.5,1,.5",Qi)},d.tryDrawCustomChar=function(Q,V,Ot,Xr,Yr,We){var Lt=d.blockElementDefinitions[V];if(Lt)return function(rt,ft,zt,nr,or,sr){for(var it=0;it<ft.length;it++){var dt=ft[it],Ie=or/8,Ke=sr/8;rt.fillRect(zt+dt.x*Ie,nr+dt.y*Ke,dt.w*Ie,dt.h*Ke)}}(Q,Lt,Ot,Xr,Yr,We),!0;var Dt=An[V];if(Dt)return function(rt,ft,zt,nr,or,sr){var it,dt=Rt.get(ft);dt||(dt=new Map,Rt.set(ft,dt));var Ie=rt.fillStyle;if(typeof Ie!="string")throw new Error('Unexpected fillStyle type "'+Ie+'"');var Ke=dt.get(Ie);if(!Ke){var xt=ft[0].length,ar=ft.length,It=document.createElement("canvas");It.width=xt,It.height=ar;var Zr=(0,Mn.throwIfFalsy)(It.getContext("2d")),nt=new ImageData(xt,ar),Kt=void 0,ot=void 0,Tr=void 0,Jr=void 0;if(Ie.startsWith("#"))Kt=parseInt(Ie.substr(1,2),16),ot=parseInt(Ie.substr(3,2),16),Tr=parseInt(Ie.substr(5,2),16),Jr=Ie.length>7&&parseInt(Ie.substr(7,2),16)||1;else{if(!Ie.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ie+'" when drawing pattern glyph');Kt=(it=Ie.substring(5,Ie.length-1).split(",").map(function(oo){return parseFloat(oo)}))[0],ot=it[1],Tr=it[2],Jr=it[3]}for(var bt=0;bt<ar;bt++)for(var lr=0;lr<xt;lr++)nt.data[4*(bt*xt+lr)]=Kt,nt.data[4*(bt*xt+lr)+1]=ot,nt.data[4*(bt*xt+lr)+2]=Tr,nt.data[4*(bt*xt+lr)+3]=ft[bt][lr]*(255*Jr);Zr.putImageData(nt,0,0),Ke=(0,Mn.throwIfFalsy)(rt.createPattern(It,null)),dt.set(Ie,Ke)}rt.fillStyle=Ke,rt.fillRect(zt,nr,or,sr)}(Q,Dt,Ot,Xr,Yr,We),!0;var Ar=d.boxDrawingDefinitions[V];return!!Ar&&(function(rt,ft,zt,nr,or,sr){rt.strokeStyle=rt.fillStyle;for(var it=0,dt=Object.entries(ft);it<dt.length;it++){var Ie=dt[it],Ke=Ie[0],xt=Ie[1];rt.beginPath(),rt.lineWidth=window.devicePixelRatio*Number.parseInt(Ke);for(var ar=0,It=(typeof xt=="function"?xt(.15,.15/sr*or):xt).split(" ");ar<It.length;ar++){var Zr=It[ar],nt=Zr[0],Kt=no[nt];if(Kt){var ot=Zr.substring(1).split(",");ot[0]&&ot[1]&&Kt(rt,Ai(ot,or,sr,zt,nr))}else console.error('Could not find drawing instructions for "'+nt+'"')}rt.stroke(),rt.closePath()}}(Q,Ar,Ot,Xr,Yr,We),!0)};var Rt=new Map;function Tn(Q,V,Ot){return Ot===void 0&&(Ot=0),Math.max(Math.min(Q,V),Ot)}var no={C:function(Q,V){return Q.bezierCurveTo(V[0],V[1],V[2],V[3],V[4],V[5])},L:function(Q,V){return Q.lineTo(V[0],V[1])},M:function(Q,V){return Q.moveTo(V[0],V[1])}};function Ai(Q,V,Ot,Xr,Yr){var We=Q.map(function(Ar){return parseFloat(Ar)||parseInt(Ar)});if(We.length<2)throw new Error("Too few arguments for instruction");for(var Lt=0;Lt<We.length;Lt+=2)We[Lt]*=V,We[Lt]!==0&&(We[Lt]=Tn(Math.round(We[Lt]+.5)-.5,V,0)),We[Lt]+=Xr;for(var Dt=1;Dt<We.length;Dt+=2)We[Dt]*=Ot,We[Dt]!==0&&(We[Dt]=Tn(Math.round(We[Dt]+.5)-.5,Ot,0)),We[Dt]+=Yr;return We}},3700:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GridCache=void 0;var x=function(){function _(){this.cache=[]}return _.prototype.resize=function(S,L){for(var m=0;m<S;m++){this.cache.length<=m&&this.cache.push([]);for(var b=this.cache[m].length;b<L;b++)this.cache[m].push(void 0);this.cache[m].length=L}this.cache.length=S},_.prototype.clear=function(){for(var S=0;S<this.cache.length;S++)for(var L=0;L<this.cache[S].length;L++)this.cache[S][L]=void 0},_}();d.GridCache=x},5098:function(Y,d,x){var _,S=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),L=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},m=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.LinkRenderLayer=void 0;var b=x(1546),y=x(8803),u=x(2040),h=x(2585),v=function(a){function s(o,l,f,p,C,E,O,R){var M=a.call(this,o,"link",l,!0,f,p,O,R)||this;return C.onShowLinkUnderline(function(A){return M._onShowLinkUnderline(A)}),C.onHideLinkUnderline(function(A){return M._onHideLinkUnderline(A)}),E.onShowLinkUnderline(function(A){return M._onShowLinkUnderline(A)}),E.onHideLinkUnderline(function(A){return M._onHideLinkUnderline(A)}),M}return S(s,a),s.prototype.resize=function(o){a.prototype.resize.call(this,o),this._state=void 0},s.prototype.reset=function(){this._clearCurrentLink()},s.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},s.prototype._onShowLinkUnderline=function(o){if(o.fg===y.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&(0,u.is256Color)(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var l=o.y1+1;l<o.y2;l++)this._fillBottomLineAtCells(0,l,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},s.prototype._onHideLinkUnderline=function(o){this._clearCurrentLink()},L([m(6,h.IBufferService),m(7,h.IOptionsService)],s)}(b.BaseRenderLayer);d.LinkRenderLayer=v},3525:function(Y,d,x){var _,S=this&&this.__extends||(_=function(C,E){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var M in R)Object.prototype.hasOwnProperty.call(R,M)&&(O[M]=R[M])},_(C,E)},function(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=C}_(C,E),C.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}),L=this&&this.__decorate||function(C,E,O,R){var M,A=arguments.length,D=A<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,O):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(C,E,O,R);else for(var P=C.length-1;P>=0;P--)(M=C[P])&&(D=(A<3?M(D):A>3?M(E,O,D):M(E,O))||D);return A>3&&D&&Object.defineProperty(E,O,D),D},m=this&&this.__param||function(C,E){return function(O,R){E(O,R,C)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Renderer=void 0;var b=x(9596),y=x(4149),u=x(2512),h=x(5098),v=x(844),a=x(4725),s=x(2585),o=x(1420),l=x(8460),f=1,p=function(C){function E(O,R,M,A,D,P,z,W){var B=C.call(this)||this;B._colors=O,B._screenElement=R,B._bufferService=P,B._charSizeService=z,B._optionsService=W,B._id=f++,B._onRequestRedraw=new l.EventEmitter;var I=B._optionsService.options.allowTransparency;return B._renderLayers=[D.createInstance(b.TextRenderLayer,B._screenElement,0,B._colors,I,B._id),D.createInstance(y.SelectionRenderLayer,B._screenElement,1,B._colors,B._id),D.createInstance(h.LinkRenderLayer,B._screenElement,2,B._colors,B._id,M,A),D.createInstance(u.CursorRenderLayer,B._screenElement,3,B._colors,B._id,B._onRequestRedraw)],B.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},B._devicePixelRatio=window.devicePixelRatio,B._updateDimensions(),B.onOptionsChanged(),B}return S(E,C),Object.defineProperty(E.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),E.prototype.dispose=function(){for(var O=0,R=this._renderLayers;O<R.length;O++)R[O].dispose();C.prototype.dispose.call(this),(0,o.removeTerminalFromCache)(this._id)},E.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},E.prototype.setColors=function(O){this._colors=O;for(var R=0,M=this._renderLayers;R<M.length;R++){var A=M[R];A.setColors(this._colors),A.reset()}},E.prototype.onResize=function(O,R){this._updateDimensions();for(var M=0,A=this._renderLayers;M<A.length;M++)A[M].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},E.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},E.prototype.onBlur=function(){this._runOperation(function(O){return O.onBlur()})},E.prototype.onFocus=function(){this._runOperation(function(O){return O.onFocus()})},E.prototype.onSelectionChanged=function(O,R,M){M===void 0&&(M=!1),this._runOperation(function(A){return A.onSelectionChanged(O,R,M)})},E.prototype.onCursorMove=function(){this._runOperation(function(O){return O.onCursorMove()})},E.prototype.onOptionsChanged=function(){this._runOperation(function(O){return O.onOptionsChanged()})},E.prototype.clear=function(){this._runOperation(function(O){return O.reset()})},E.prototype._runOperation=function(O){for(var R=0,M=this._renderLayers;R<M.length;R++)O(M[R])},E.prototype.renderRows=function(O,R){for(var M=0,A=this._renderLayers;M<A.length;M++)A[M].onGridChanged(O,R)},E.prototype.clearTextureAtlas=function(){for(var O=0,R=this._renderLayers;O<R.length;O++)R[O].clearTextureAtlas()},E.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},L([m(4,s.IInstantiationService),m(5,s.IBufferService),m(6,a.ICharSizeService),m(7,s.IOptionsService)],E)}(v.Disposable);d.Renderer=p},1752:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.throwIfFalsy=void 0,d.throwIfFalsy=function(x){if(!x)throw new Error("value must not be falsy");return x}},4149:function(Y,d,x){var _,S=this&&this.__extends||(_=function(h,v){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},_(h,v)},function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function a(){this.constructor=h}_(h,v),h.prototype=v===null?Object.create(v):(a.prototype=v.prototype,new a)}),L=this&&this.__decorate||function(h,v,a,s){var o,l=arguments.length,f=l<3?v:s===null?s=Object.getOwnPropertyDescriptor(v,a):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(h,v,a,s);else for(var p=h.length-1;p>=0;p--)(o=h[p])&&(f=(l<3?o(f):l>3?o(v,a,f):o(v,a))||f);return l>3&&f&&Object.defineProperty(v,a,f),f},m=this&&this.__param||function(h,v){return function(a,s){v(a,s,h)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionRenderLayer=void 0;var b=x(1546),y=x(2585),u=function(h){function v(a,s,o,l,f,p){var C=h.call(this,a,"selection",s,!0,o,l,f,p)||this;return C._clearState(),C}return S(v,h),v.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},v.prototype.resize=function(a){h.prototype.resize.call(this,a),this._clearState()},v.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},v.prototype.onSelectionChanged=function(a,s,o){if(this._didStateChange(a,s,o,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&s){var l=a[1]-this._bufferService.buffer.ydisp,f=s[1]-this._bufferService.buffer.ydisp,p=Math.max(l,0),C=Math.min(f,this._bufferService.rows-1);if(p>=this._bufferService.rows||C<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,o){var E=a[0],O=s[0]-E,R=C-p+1;this._fillCells(E,p,O,R)}else{E=l===p?a[0]:0;var M=p===f?s[0]:this._bufferService.cols;this._fillCells(E,p,M-E,1);var A=Math.max(C-p-1,0);if(this._fillCells(0,p+1,this._bufferService.cols,A),p!==C){var D=f===C?s[0]:this._bufferService.cols;this._fillCells(0,C,D,1)}}this._state.start=[a[0],a[1]],this._state.end=[s[0],s[1]],this._state.columnSelectMode=o,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},v.prototype._didStateChange=function(a,s,o,l){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(s,this._state.end)||o!==this._state.columnSelectMode||l!==this._state.ydisp},v.prototype._areCoordinatesEqual=function(a,s){return!(!a||!s)&&a[0]===s[0]&&a[1]===s[1]},L([m(4,y.IBufferService),m(5,y.IOptionsService)],v)}(b.BaseRenderLayer);d.SelectionRenderLayer=u},9596:function(Y,d,x){var _,S=this&&this.__extends||(_=function(f,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,E){C.__proto__=E}||function(C,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(C[O]=E[O])},_(f,p)},function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function C(){this.constructor=f}_(f,p),f.prototype=p===null?Object.create(p):(C.prototype=p.prototype,new C)}),L=this&&this.__decorate||function(f,p,C,E){var O,R=arguments.length,M=R<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(f,p,C,E);else for(var A=f.length-1;A>=0;A--)(O=f[A])&&(M=(R<3?O(M):R>3?O(p,C,M):O(p,C))||M);return R>3&&M&&Object.defineProperty(p,C,M),M},m=this&&this.__param||function(f,p){return function(C,E){p(C,E,f)}};Object.defineProperty(d,"__esModule",{value:!0}),d.TextRenderLayer=void 0;var b=x(3700),y=x(1546),u=x(3734),h=x(643),v=x(511),a=x(2585),s=x(4725),o=x(4269),l=function(f){function p(C,E,O,R,M,A,D,P){var z=f.call(this,C,"text",E,R,O,M,A,D)||this;return z._characterJoinerService=P,z._characterWidth=0,z._characterFont="",z._characterOverlapCache={},z._workCell=new v.CellData,z._state=new b.GridCache,z}return S(p,f),p.prototype.resize=function(C){f.prototype.resize.call(this,C);var E=this._getFont(!1,!1);this._characterWidth===C.scaledCharWidth&&this._characterFont===E||(this._characterWidth=C.scaledCharWidth,this._characterFont=E,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},p.prototype.reset=function(){this._state.clear(),this._clearAll()},p.prototype._forEachCell=function(C,E,O){for(var R=C;R<=E;R++)for(var M=R+this._bufferService.buffer.ydisp,A=this._bufferService.buffer.lines.get(M),D=this._characterJoinerService.getJoinedCharacters(M),P=0;P<this._bufferService.cols;P++){A.loadCell(P,this._workCell);var z=this._workCell,W=!1,B=P;if(z.getWidth()!==0){if(D.length>0&&P===D[0][0]){W=!0;var I=D.shift();z=new o.JoinedCellData(this._workCell,A.translateToString(!0,I[0],I[1]),I[1]-I[0]),B=I[1]-1}!W&&this._isOverlapping(z)&&B<A.length-1&&A.getCodePoint(B+1)===h.NULL_CELL_CODE&&(z.content&=-12582913,z.content|=2<<22),O(z,P,R),P=B}}},p.prototype._drawBackground=function(C,E){var O=this,R=this._ctx,M=this._bufferService.cols,A=0,D=0,P=null;R.save(),this._forEachCell(C,E,function(z,W,B){var I=null;z.isInverse()?I=z.isFgDefault()?O._colors.foreground.css:z.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(z.getFgColor()).join(",")+")":O._colors.ansi[z.getFgColor()].css:z.isBgRGB()?I="rgb("+u.AttributeData.toColorRGB(z.getBgColor()).join(",")+")":z.isBgPalette()&&(I=O._colors.ansi[z.getBgColor()].css),P===null&&(A=W,D=B),B!==D?(R.fillStyle=P||"",O._fillCells(A,D,M-A,1),A=W,D=B):P!==I&&(R.fillStyle=P||"",O._fillCells(A,D,W-A,1),A=W,D=B),P=I}),P!==null&&(R.fillStyle=P,this._fillCells(A,D,M-A,1)),R.restore()},p.prototype._drawForeground=function(C,E){var O=this;this._forEachCell(C,E,function(R,M,A){if(!R.isInvisible()&&(O._drawChars(R,M,A),R.isUnderline()||R.isStrikethrough())){if(O._ctx.save(),R.isInverse())if(R.isBgDefault())O._ctx.fillStyle=O._colors.background.css;else if(R.isBgRGB())O._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(R.getBgColor()).join(",")+")";else{var D=R.getBgColor();O._optionsService.options.drawBoldTextInBrightColors&&R.isBold()&&D<8&&(D+=8),O._ctx.fillStyle=O._colors.ansi[D].css}else if(R.isFgDefault())O._ctx.fillStyle=O._colors.foreground.css;else if(R.isFgRGB())O._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(R.getFgColor()).join(",")+")";else{var P=R.getFgColor();O._optionsService.options.drawBoldTextInBrightColors&&R.isBold()&&P<8&&(P+=8),O._ctx.fillStyle=O._colors.ansi[P].css}R.isStrikethrough()&&O._fillMiddleLineAtCells(M,A,R.getWidth()),R.isUnderline()&&O._fillBottomLineAtCells(M,A,R.getWidth()),O._ctx.restore()}})},p.prototype.onGridChanged=function(C,E){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,C,this._bufferService.cols,E-C+1),this._drawBackground(C,E),this._drawForeground(C,E))},p.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},p.prototype._isOverlapping=function(C){if(C.getWidth()!==1||C.getCode()<256)return!1;var E=C.getChars();if(this._characterOverlapCache.hasOwnProperty(E))return this._characterOverlapCache[E];this._ctx.save(),this._ctx.font=this._characterFont;var O=Math.floor(this._ctx.measureText(E).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[E]=O,O},L([m(5,a.IBufferService),m(6,a.IOptionsService),m(7,s.ICharacterJoinerService)],p)}(y.BaseRenderLayer);d.TextRenderLayer=l},9616:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseCharAtlas=void 0;var x=function(){function _(){this._didWarmUp=!1}return _.prototype.dispose=function(){},_.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},_.prototype._doWarmUp=function(){},_.prototype.clear=function(){},_.prototype.beginFrame=function(){},_}();d.BaseCharAtlas=x},1420:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.removeTerminalFromCache=d.acquireCharAtlas=void 0;var _=x(2040),S=x(1906),L=[];d.acquireCharAtlas=function(m,b,y,u,h){for(var v=(0,_.generateConfig)(u,h,m,y),a=0;a<L.length;a++){var s=(o=L[a]).ownedBy.indexOf(b);if(s>=0){if((0,_.configEquals)(o.config,v))return o.atlas;o.ownedBy.length===1?(o.atlas.dispose(),L.splice(a,1)):o.ownedBy.splice(s,1);break}}for(a=0;a<L.length;a++){var o=L[a];if((0,_.configEquals)(o.config,v))return o.ownedBy.push(b),o.atlas}var l={atlas:new S.DynamicCharAtlas(document,v),config:v,ownedBy:[b]};return L.push(l),l.atlas},d.removeTerminalFromCache=function(m){for(var b=0;b<L.length;b++){var y=L[b].ownedBy.indexOf(m);if(y!==-1){L[b].ownedBy.length===1?(L[b].atlas.dispose(),L.splice(b,1)):L[b].ownedBy.splice(y,1);break}}}},2040:function(Y,d,x){var _=this&&this.__spreadArray||function(L,m,b){if(b||arguments.length===2)for(var y,u=0,h=m.length;u<h;u++)!y&&u in m||(y||(y=Array.prototype.slice.call(m,0,u)),y[u]=m[u]);return L.concat(y||Array.prototype.slice.call(m))};Object.defineProperty(d,"__esModule",{value:!0}),d.is256Color=d.configEquals=d.generateConfig=void 0;var S=x(643);d.generateConfig=function(L,m,b,y){var u={foreground:y.foreground,background:y.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:_([],y.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:L,scaledCharHeight:m,fontFamily:b.fontFamily,fontSize:b.fontSize,fontWeight:b.fontWeight,fontWeightBold:b.fontWeightBold,allowTransparency:b.allowTransparency,colors:u}},d.configEquals=function(L,m){for(var b=0;b<L.colors.ansi.length;b++)if(L.colors.ansi[b].rgba!==m.colors.ansi[b].rgba)return!1;return L.devicePixelRatio===m.devicePixelRatio&&L.fontFamily===m.fontFamily&&L.fontSize===m.fontSize&&L.fontWeight===m.fontWeight&&L.fontWeightBold===m.fontWeightBold&&L.allowTransparency===m.allowTransparency&&L.scaledCharWidth===m.scaledCharWidth&&L.scaledCharHeight===m.scaledCharHeight&&L.colors.foreground===m.colors.foreground&&L.colors.background===m.colors.background},d.is256Color=function(L){return L<S.DEFAULT_COLOR}},8803:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CHAR_ATLAS_CELL_SPACING=d.TEXT_BASELINE=d.DIM_OPACITY=d.INVERTED_DEFAULT_COLOR=void 0;var _=x(6114);d.INVERTED_DEFAULT_COLOR=257,d.DIM_OPACITY=.5,d.TEXT_BASELINE=_.isFirefox?"bottom":"ideographic",d.CHAR_ATLAS_CELL_SPACING=1},1906:function(Y,d,x){var _,S=this&&this.__extends||(_=function(E,O){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,M){R.__proto__=M}||function(R,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(R[A]=M[A])},_(E,O)},function(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function R(){this.constructor=E}_(E,O),E.prototype=O===null?Object.create(O):(R.prototype=O.prototype,new R)});Object.defineProperty(d,"__esModule",{value:!0}),d.NoneCharAtlas=d.DynamicCharAtlas=d.getGlyphCacheKey=void 0;var L=x(8803),m=x(9616),b=x(5680),y=x(7001),u=x(6114),h=x(1752),v=x(4774),a=1024,s=1024,o={css:"rgba(0, 0, 0, 0)",rgba:0};function l(E){return E.code<<21|E.bg<<12|E.fg<<3|(E.bold?0:4)+(E.dim?0:2)+(E.italic?0:1)}d.getGlyphCacheKey=l;var f=function(E){function O(R,M){var A=E.call(this)||this;A._config=M,A._drawToCacheCount=0,A._glyphsWaitingOnBitmap=[],A._bitmapCommitTimeout=null,A._bitmap=null,A._cacheCanvas=R.createElement("canvas"),A._cacheCanvas.width=a,A._cacheCanvas.height=s,A._cacheCtx=(0,h.throwIfFalsy)(A._cacheCanvas.getContext("2d",{alpha:!0}));var D=R.createElement("canvas");D.width=A._config.scaledCharWidth,D.height=A._config.scaledCharHeight,A._tmpCtx=(0,h.throwIfFalsy)(D.getContext("2d",{alpha:A._config.allowTransparency})),A._width=Math.floor(a/A._config.scaledCharWidth),A._height=Math.floor(s/A._config.scaledCharHeight);var P=A._width*A._height;return A._cacheMap=new y.LRUMap(P),A._cacheMap.prealloc(P),A}return S(O,E),O.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},O.prototype.beginFrame=function(){this._drawToCacheCount=0},O.prototype.clear=function(){if(this._cacheMap.size>0){var R=this._width*this._height;this._cacheMap=new y.LRUMap(R),this._cacheMap.prealloc(R)}this._cacheCtx.clearRect(0,0,a,s),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},O.prototype.draw=function(R,M,A,D){if(M.code===32)return!0;if(!this._canCache(M))return!1;var P=l(M),z=this._cacheMap.get(P);if(z!=null)return this._drawFromCache(R,z,A,D),!0;if(this._drawToCacheCount<100){var W;W=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var B=this._drawToCache(M,W);return this._cacheMap.set(P,B),this._drawFromCache(R,B,A,D),!0}return!1},O.prototype._canCache=function(R){return R.code<256},O.prototype._toCoordinateX=function(R){return R%this._width*this._config.scaledCharWidth},O.prototype._toCoordinateY=function(R){return Math.floor(R/this._width)*this._config.scaledCharHeight},O.prototype._drawFromCache=function(R,M,A,D){if(!M.isEmpty){var P=this._toCoordinateX(M.index),z=this._toCoordinateY(M.index);R.drawImage(M.inBitmap?this._bitmap:this._cacheCanvas,P,z,this._config.scaledCharWidth,this._config.scaledCharHeight,A,D,this._config.scaledCharWidth,this._config.scaledCharHeight)}},O.prototype._getColorFromAnsiIndex=function(R){return R<this._config.colors.ansi.length?this._config.colors.ansi[R]:b.DEFAULT_ANSI_COLORS[R]},O.prototype._getBackgroundColor=function(R){return this._config.allowTransparency?o:R.bg===L.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:R.bg<256?this._getColorFromAnsiIndex(R.bg):this._config.colors.background},O.prototype._getForegroundColor=function(R){return R.fg===L.INVERTED_DEFAULT_COLOR?v.color.opaque(this._config.colors.background):R.fg<256?this._getColorFromAnsiIndex(R.fg):this._config.colors.foreground},O.prototype._drawToCache=function(R,M){this._drawToCacheCount++,this._tmpCtx.save();var A=this._getBackgroundColor(R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=A.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var D=R.bold?this._config.fontWeightBold:this._config.fontWeight,P=R.italic?"italic":"";this._tmpCtx.font=P+" "+D+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=L.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(R).css,R.dim&&(this._tmpCtx.globalAlpha=L.DIM_OPACITY),this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight);var z=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),W=!1;if(this._config.allowTransparency||(W=C(z,A)),W&&R.chars==="_"&&!this._config.allowTransparency)for(var B=1;B<=5&&(this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight-B),W=C(z=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),A));B++);this._tmpCtx.restore();var I=this._toCoordinateX(M),q=this._toCoordinateY(M);this._cacheCtx.putImageData(z,I,q);var X={index:M,isEmpty:W,inBitmap:!1};return this._addGlyphToBitmap(X),X},O.prototype._addGlyphToBitmap=function(R){var M=this;!("createImageBitmap"in window)||u.isFirefox||u.isSafari||(this._glyphsWaitingOnBitmap.push(R),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return M._generateBitmap()},100)))},O.prototype._generateBitmap=function(){var R=this,M=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(A){R._bitmap=A;for(var D=0;D<M.length;D++)M[D].inBitmap=!0}),this._bitmapCommitTimeout=null},O}(m.BaseCharAtlas);d.DynamicCharAtlas=f;var p=function(E){function O(R,M){return E.call(this)||this}return S(O,E),O.prototype.draw=function(R,M,A,D){return!1},O}(m.BaseCharAtlas);function C(E,O){for(var R=!0,M=O.rgba>>>24,A=O.rgba>>>16&255,D=O.rgba>>>8&255,P=0;P<E.data.length;P+=4)E.data[P]===M&&E.data[P+1]===A&&E.data[P+2]===D?E.data[P+3]=0:R=!1;return R}d.NoneCharAtlas=p},7001:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LRUMap=void 0;var x=function(){function _(S){this.capacity=S,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return _.prototype._unlinkNode=function(S){var L=S.prev,m=S.next;S===this._head&&(this._head=m),S===this._tail&&(this._tail=L),L!==null&&(L.next=m),m!==null&&(m.prev=L)},_.prototype._appendNode=function(S){var L=this._tail;L!==null&&(L.next=S),S.prev=L,S.next=null,this._tail=S,this._head===null&&(this._head=S)},_.prototype.prealloc=function(S){for(var L=this._nodePool,m=0;m<S;m++)L.push({prev:null,next:null,key:null,value:null})},_.prototype.get=function(S){var L=this._map[S];return L!==void 0?(this._unlinkNode(L),this._appendNode(L),L.value):null},_.prototype.peekValue=function(S){var L=this._map[S];return L!==void 0?L.value:null},_.prototype.peek=function(){var S=this._head;return S===null?null:S.value},_.prototype.set=function(S,L){var m=this._map[S];if(m!==void 0)m=this._map[S],this._unlinkNode(m),m.value=L;else if(this.size>=this.capacity)m=this._head,this._unlinkNode(m),delete this._map[m.key],m.key=S,m.value=L,this._map[S]=m;else{var b=this._nodePool;b.length>0?((m=b.pop()).key=S,m.value=L):m={prev:null,next:null,key:S,value:L},this._map[S]=m,this.size++}this._appendNode(m)},_}();d.LRUMap=x},1296:function(Y,d,x){var _,S=this&&this.__extends||(_=function(R,M){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,D){A.__proto__=D}||function(A,D){for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(A[P]=D[P])},_(R,M)},function(R,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function A(){this.constructor=R}_(R,M),R.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}),L=this&&this.__decorate||function(R,M,A,D){var P,z=arguments.length,W=z<3?M:D===null?D=Object.getOwnPropertyDescriptor(M,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(R,M,A,D);else for(var B=R.length-1;B>=0;B--)(P=R[B])&&(W=(z<3?P(W):z>3?P(M,A,W):P(M,A))||W);return z>3&&W&&Object.defineProperty(M,A,W),W},m=this&&this.__param||function(R,M){return function(A,D){M(A,D,R)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRenderer=void 0;var b=x(3787),y=x(8803),u=x(844),h=x(4725),v=x(2585),a=x(8460),s=x(4774),o=x(9631),l="xterm-dom-renderer-owner-",f="xterm-fg-",p="xterm-bg-",C="xterm-focus",E=1,O=function(R){function M(A,D,P,z,W,B,I,q,X,oe){var ne=R.call(this)||this;return ne._colors=A,ne._element=D,ne._screenElement=P,ne._viewportElement=z,ne._linkifier=W,ne._linkifier2=B,ne._charSizeService=q,ne._optionsService=X,ne._bufferService=oe,ne._terminalClass=E++,ne._rowElements=[],ne._rowContainer=document.createElement("div"),ne._rowContainer.classList.add("xterm-rows"),ne._rowContainer.style.lineHeight="normal",ne._rowContainer.setAttribute("aria-hidden","true"),ne._refreshRowElements(ne._bufferService.cols,ne._bufferService.rows),ne._selectionContainer=document.createElement("div"),ne._selectionContainer.classList.add("xterm-selection"),ne._selectionContainer.setAttribute("aria-hidden","true"),ne.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},ne._updateDimensions(),ne._injectCss(),ne._rowFactory=I.createInstance(b.DomRendererRowFactory,document,ne._colors),ne._element.classList.add(l+ne._terminalClass),ne._screenElement.appendChild(ne._rowContainer),ne._screenElement.appendChild(ne._selectionContainer),ne._linkifier.onShowLinkUnderline(function(_e){return ne._onLinkHover(_e)}),ne._linkifier.onHideLinkUnderline(function(_e){return ne._onLinkLeave(_e)}),ne._linkifier2.onShowLinkUnderline(function(_e){return ne._onLinkHover(_e)}),ne._linkifier2.onHideLinkUnderline(function(_e){return ne._onLinkLeave(_e)}),ne}return S(M,R),Object.defineProperty(M.prototype,"onRequestRedraw",{get:function(){return new a.EventEmitter().event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){this._element.classList.remove(l+this._terminalClass),(0,o.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),R.prototype.dispose.call(this)},M.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var A=0,D=this._rowElements;A<D.length;A++){var P=D[A];P.style.width=this.dimensions.canvasWidth+"px",P.style.height=this.dimensions.actualCellHeight+"px",P.style.lineHeight=this.dimensions.actualCellHeight+"px",P.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var z=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=z,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},M.prototype.setColors=function(A){this._colors=A,this._injectCss()},M.prototype._injectCss=function(){var A=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var D=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";D+=this._terminalSelector+" span:not(."+b.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+b.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+b.ITALIC_CLASS+" { font-style: italic;}",D+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",D+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",D+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+":not(."+b.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",D+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(P,z){D+=A._terminalSelector+" ."+f+z+" { color: "+P.css+"; }"+A._terminalSelector+" ."+p+z+" { background-color: "+P.css+"; }"}),D+=this._terminalSelector+" ."+f+y.INVERTED_DEFAULT_COLOR+" { color: "+s.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+p+y.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=D},M.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},M.prototype._refreshRowElements=function(A,D){for(var P=this._rowElements.length;P<=D;P++){var z=document.createElement("div");this._rowContainer.appendChild(z),this._rowElements.push(z)}for(;this._rowElements.length>D;)this._rowContainer.removeChild(this._rowElements.pop())},M.prototype.onResize=function(A,D){this._refreshRowElements(A,D),this._updateDimensions()},M.prototype.onCharSizeChanged=function(){this._updateDimensions()},M.prototype.onBlur=function(){this._rowContainer.classList.remove(C)},M.prototype.onFocus=function(){this._rowContainer.classList.add(C)},M.prototype.onSelectionChanged=function(A,D,P){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(A&&D){var z=A[1]-this._bufferService.buffer.ydisp,W=D[1]-this._bufferService.buffer.ydisp,B=Math.max(z,0),I=Math.min(W,this._bufferService.rows-1);if(!(B>=this._bufferService.rows||I<0)){var q=document.createDocumentFragment();if(P)q.appendChild(this._createSelectionElement(B,A[0],D[0],I-B+1));else{var X=z===B?A[0]:0,oe=B===W?D[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(B,X,oe));var ne=I-B-1;if(q.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,ne)),B!==I){var _e=W===I?D[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(I,0,_e))}}this._selectionContainer.appendChild(q)}}},M.prototype._createSelectionElement=function(A,D,P,z){z===void 0&&(z=1);var W=document.createElement("div");return W.style.height=z*this.dimensions.actualCellHeight+"px",W.style.top=A*this.dimensions.actualCellHeight+"px",W.style.left=D*this.dimensions.actualCellWidth+"px",W.style.width=this.dimensions.actualCellWidth*(P-D)+"px",W},M.prototype.onCursorMove=function(){},M.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},M.prototype.clear=function(){for(var A=0,D=this._rowElements;A<D.length;A++)D[A].innerText=""},M.prototype.renderRows=function(A,D){for(var P=this._bufferService.buffer.ybase+this._bufferService.buffer.y,z=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),W=this._optionsService.options.cursorBlink,B=A;B<=D;B++){var I=this._rowElements[B];I.innerText="";var q=B+this._bufferService.buffer.ydisp,X=this._bufferService.buffer.lines.get(q),oe=this._optionsService.options.cursorStyle;I.appendChild(this._rowFactory.createRow(X,q,q===P,oe,z,W,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(M.prototype,"_terminalSelector",{get:function(){return"."+l+this._terminalClass},enumerable:!1,configurable:!0}),M.prototype._onLinkHover=function(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)},M.prototype._onLinkLeave=function(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)},M.prototype._setCellUnderline=function(A,D,P,z,W,B){for(;A!==D||P!==z;){var I=this._rowElements[P];if(!I)return;var q=I.children[A];q&&(q.style.textDecoration=B?"underline":"none"),++A>=W&&(A=0,P++)}},L([m(6,v.IInstantiationService),m(7,h.ICharSizeService),m(8,v.IOptionsService),m(9,v.IBufferService)],M)}(u.Disposable);d.DomRenderer=O},3787:function(Y,d,x){var _=this&&this.__decorate||function(o,l,f,p){var C,E=arguments.length,O=E<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,f):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(o,l,f,p);else for(var R=o.length-1;R>=0;R--)(C=o[R])&&(O=(E<3?C(O):E>3?C(l,f,O):C(l,f))||O);return E>3&&O&&Object.defineProperty(l,f,O),O},S=this&&this.__param||function(o,l){return function(f,p){l(f,p,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRendererRowFactory=d.CURSOR_STYLE_UNDERLINE_CLASS=d.CURSOR_STYLE_BAR_CLASS=d.CURSOR_STYLE_BLOCK_CLASS=d.CURSOR_BLINK_CLASS=d.CURSOR_CLASS=d.STRIKETHROUGH_CLASS=d.UNDERLINE_CLASS=d.ITALIC_CLASS=d.DIM_CLASS=d.BOLD_CLASS=void 0;var L=x(8803),m=x(643),b=x(511),y=x(2585),u=x(4774),h=x(4725),v=x(4269);d.BOLD_CLASS="xterm-bold",d.DIM_CLASS="xterm-dim",d.ITALIC_CLASS="xterm-italic",d.UNDERLINE_CLASS="xterm-underline",d.STRIKETHROUGH_CLASS="xterm-strikethrough",d.CURSOR_CLASS="xterm-cursor",d.CURSOR_BLINK_CLASS="xterm-cursor-blink",d.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",d.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",d.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var a=function(){function o(l,f,p,C,E){this._document=l,this._colors=f,this._characterJoinerService=p,this._optionsService=C,this._coreService=E,this._workCell=new b.CellData}return o.prototype.setColors=function(l){this._colors=l},o.prototype.createRow=function(l,f,p,C,E,O,R,M){for(var A=this._document.createDocumentFragment(),D=this._characterJoinerService.getJoinedCharacters(f),P=0,z=Math.min(l.length,M)-1;z>=0;z--)if(l.loadCell(z,this._workCell).getCode()!==m.NULL_CELL_CODE||p&&z===E){P=z+1;break}for(z=0;z<P;z++){l.loadCell(z,this._workCell);var W=this._workCell.getWidth();if(W!==0){var B=!1,I=z,q=this._workCell;if(D.length>0&&z===D[0][0]){B=!0;var X=D.shift();q=new v.JoinedCellData(this._workCell,l.translateToString(!0,X[0],X[1]),X[1]-X[0]),I=X[1]-1,W=q.getWidth()}var oe=this._document.createElement("span");if(W>1&&(oe.style.width=R*W+"px"),B&&(oe.style.display="inline",E>=z&&E<=I&&(E=z)),!this._coreService.isCursorHidden&&p&&z===E)switch(oe.classList.add(d.CURSOR_CLASS),O&&oe.classList.add(d.CURSOR_BLINK_CLASS),C){case"bar":oe.classList.add(d.CURSOR_STYLE_BAR_CLASS);break;case"underline":oe.classList.add(d.CURSOR_STYLE_UNDERLINE_CLASS);break;default:oe.classList.add(d.CURSOR_STYLE_BLOCK_CLASS)}q.isBold()&&oe.classList.add(d.BOLD_CLASS),q.isItalic()&&oe.classList.add(d.ITALIC_CLASS),q.isDim()&&oe.classList.add(d.DIM_CLASS),q.isUnderline()&&oe.classList.add(d.UNDERLINE_CLASS),q.isInvisible()?oe.textContent=m.WHITESPACE_CELL_CHAR:oe.textContent=q.getChars()||m.WHITESPACE_CELL_CHAR,q.isStrikethrough()&&oe.classList.add(d.STRIKETHROUGH_CLASS);var ne=q.getFgColor(),_e=q.getFgColorMode(),Ce=q.getBgColor(),ye=q.getBgColorMode(),H=!!q.isInverse();if(H){var j=ne;ne=Ce,Ce=j;var U=_e;_e=ye,ye=U}switch(_e){case 16777216:case 33554432:q.isBold()&&ne<8&&this._optionsService.options.drawBoldTextInBrightColors&&(ne+=8),this._applyMinimumContrast(oe,this._colors.background,this._colors.ansi[ne])||oe.classList.add("xterm-fg-"+ne);break;case 50331648:var re=u.rgba.toColor(ne>>16&255,ne>>8&255,255&ne);this._applyMinimumContrast(oe,this._colors.background,re)||this._addStyle(oe,"color:#"+s(ne.toString(16),"0",6));break;default:this._applyMinimumContrast(oe,this._colors.background,this._colors.foreground)||H&&oe.classList.add("xterm-fg-"+L.INVERTED_DEFAULT_COLOR)}switch(ye){case 16777216:case 33554432:oe.classList.add("xterm-bg-"+Ce);break;case 50331648:this._addStyle(oe,"background-color:#"+s(Ce.toString(16),"0",6));break;default:H&&oe.classList.add("xterm-bg-"+L.INVERTED_DEFAULT_COLOR)}A.appendChild(oe),z=I}}return A},o.prototype._applyMinimumContrast=function(l,f,p){if(this._optionsService.options.minimumContrastRatio===1)return!1;var C=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return C===void 0&&(C=u.color.ensureContrastRatio(f,p,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,C??null)),!!C&&(this._addStyle(l,"color:"+C.css),!0)},o.prototype._addStyle=function(l,f){l.setAttribute("style",""+(l.getAttribute("style")||"")+f+";")},_([S(2,h.ICharacterJoinerService),S(3,y.IOptionsService),S(4,y.ICoreService)],o)}();function s(o,l,f){for(;o.length<f;)o=l+o;return o}d.DomRendererRowFactory=a},456:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionModel=void 0;var x=function(){function _(S){this._bufferService=S,this.isSelectAllActive=!1,this.selectionStartLength=0}return _.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(_.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var S=this.selectionStart[0]+this.selectionStartLength;return S>this._bufferService.cols?S%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(S/this._bufferService.cols)-1]:[S%this._bufferService.cols,this.selectionStart[1]+Math.floor(S/this._bufferService.cols)]:[S,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),_.prototype.areSelectionValuesReversed=function(){var S=this.selectionStart,L=this.selectionEnd;return!(!S||!L)&&(S[1]>L[1]||S[1]===L[1]&&S[0]>L[0])},_.prototype.onTrim=function(S){return this.selectionStart&&(this.selectionStart[1]-=S),this.selectionEnd&&(this.selectionEnd[1]-=S),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},_}();d.SelectionModel=x},428:function(Y,d,x){var _=this&&this.__decorate||function(u,h,v,a){var s,o=arguments.length,l=o<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,v):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,h,v,a);else for(var f=u.length-1;f>=0;f--)(s=u[f])&&(l=(o<3?s(l):o>3?s(h,v,l):s(h,v))||l);return o>3&&l&&Object.defineProperty(h,v,l),l},S=this&&this.__param||function(u,h){return function(v,a){h(v,a,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharSizeService=void 0;var L=x(2585),m=x(8460),b=function(){function u(h,v,a){this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=new m.EventEmitter,this._measureStrategy=new y(h,v,this._optionsService)}return Object.defineProperty(u.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),u.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},_([S(2,L.IOptionsService)],u)}();d.CharSizeService=b;var y=function(){function u(h,v,a){this._document=h,this._parentElement=v,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return u.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return h.width!==0&&h.height!==0&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},u}()},4269:function(Y,d,x){var _,S=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}),L=this&&this.__decorate||function(s,o,l,f){var p,C=arguments.length,E=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,l):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(s,o,l,f);else for(var O=s.length-1;O>=0;O--)(p=s[O])&&(E=(C<3?p(E):C>3?p(o,l,E):p(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},m=this&&this.__param||function(s,o){return function(l,f){o(l,f,s)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharacterJoinerService=d.JoinedCellData=void 0;var b=x(3734),y=x(643),u=x(511),h=x(2585),v=function(s){function o(l,f,p){var C=s.call(this)||this;return C.content=0,C.combinedData="",C.fg=l.fg,C.bg=l.bg,C.combinedData=f,C._width=p,C}return S(o,s),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(l){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(b.AttributeData);d.JoinedCellData=v;var a=function(){function s(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return s.prototype.register=function(o){var l={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(l),l.id},s.prototype.deregister=function(o){for(var l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===o)return this._characterJoiners.splice(l,1),!0;return!1},s.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var l=this._bufferService.buffer.lines.get(o);if(!l||l.length===0)return[];for(var f=[],p=l.translateToString(!0),C=0,E=0,O=0,R=l.getFg(0),M=l.getBg(0),A=0;A<l.getTrimmedLength();A++)if(l.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==R||this._workCell.bg!==M){if(A-C>1)for(var D=this._getJoinedRanges(p,O,E,l,C),P=0;P<D.length;P++)f.push(D[P]);C=A,O=E,R=this._workCell.fg,M=this._workCell.bg}E+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1)for(D=this._getJoinedRanges(p,O,E,l,C),P=0;P<D.length;P++)f.push(D[P]);return f},s.prototype._getJoinedRanges=function(o,l,f,p,C){var E=o.substring(l,f),O=[];try{O=this._characterJoiners[0].handler(E)}catch(D){console.error(D)}for(var R=1;R<this._characterJoiners.length;R++)try{for(var M=this._characterJoiners[R].handler(E),A=0;A<M.length;A++)s._mergeRanges(O,M[A])}catch(D){console.error(D)}return this._stringRangesToCellRanges(O,p,C),O},s.prototype._stringRangesToCellRanges=function(o,l,f){var p=0,C=!1,E=0,O=o[p];if(O){for(var R=f;R<this._bufferService.cols;R++){var M=l.getWidth(R),A=l.getString(R).length||y.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!C&&O[0]<=E&&(O[0]=R,C=!0),O[1]<=E){if(O[1]=R,!(O=o[++p]))break;O[0]<=E?(O[0]=R,C=!0):C=!1}E+=A}}O&&(O[1]=this._bufferService.cols)}},s._mergeRanges=function(o,l){for(var f=!1,p=0;p<o.length;p++){var C=o[p];if(f){if(l[1]<=C[0])return o[p-1][1]=l[1],o;if(l[1]<=C[1])return o[p-1][1]=Math.max(l[1],C[1]),o.splice(p,1),o;o.splice(p,1),p--}else{if(l[1]<=C[0])return o.splice(p,0,l),o;if(l[1]<=C[1])return C[0]=Math.min(l[0],C[0]),o;l[0]<C[1]&&(C[0]=Math.min(l[0],C[0]),f=!0)}}return f?o[o.length-1][1]=l[1]:o.push(l),o},s=L([m(0,h.IBufferService)],s)}();d.CharacterJoinerService=a},5114:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CoreBrowserService=void 0;var x=function(){function _(S){this._textarea=S}return Object.defineProperty(_.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),_}();d.CoreBrowserService=x},8934:function(Y,d,x){var _=this&&this.__decorate||function(y,u,h,v){var a,s=arguments.length,o=s<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(y,u,h,v);else for(var l=y.length-1;l>=0;l--)(a=y[l])&&(o=(s<3?a(o):s>3?a(u,h,o):a(u,h))||o);return s>3&&o&&Object.defineProperty(u,h,o),o},S=this&&this.__param||function(y,u){return function(h,v){u(h,v,y)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseService=void 0;var L=x(4725),m=x(9806),b=function(){function y(u,h){this._renderService=u,this._charSizeService=h}return y.prototype.getCoords=function(u,h,v,a,s){return(0,m.getCoords)(u,h,v,a,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,s)},y.prototype.getRawByteCoords=function(u,h,v,a){var s=this.getCoords(u,h,v,a);return(0,m.getRawByteCoords)(s)},_([S(0,L.IRenderService),S(1,L.ICharSizeService)],y)}();d.MouseService=b},3230:function(Y,d,x){var _,S=this&&this.__extends||(_=function(l,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,C){p.__proto__=C}||function(p,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(p[E]=C[E])},_(l,f)},function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function p(){this.constructor=l}_(l,f),l.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}),L=this&&this.__decorate||function(l,f,p,C){var E,O=arguments.length,R=O<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(l,f,p,C);else for(var M=l.length-1;M>=0;M--)(E=l[M])&&(R=(O<3?E(R):O>3?E(f,p,R):E(f,p))||R);return O>3&&R&&Object.defineProperty(f,p,R),R},m=this&&this.__param||function(l,f){return function(p,C){f(p,C,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.RenderService=void 0;var b=x(6193),y=x(8460),u=x(844),h=x(5596),v=x(3656),a=x(2585),s=x(4725),o=function(l){function f(p,C,E,O,R,M){var A=l.call(this)||this;if(A._renderer=p,A._rowCount=C,A._charSizeService=R,A._isPaused=!1,A._needsFullRefresh=!1,A._isNextRenderRedrawOnly=!0,A._needsSelectionRefresh=!1,A._canvasWidth=0,A._canvasHeight=0,A._selectionState={start:void 0,end:void 0,columnSelectMode:!1},A._onDimensionsChange=new y.EventEmitter,A._onRender=new y.EventEmitter,A._onRefreshRequest=new y.EventEmitter,A.register({dispose:function(){return A._renderer.dispose()}}),A._renderDebouncer=new b.RenderDebouncer(function(P,z){return A._renderRows(P,z)}),A.register(A._renderDebouncer),A._screenDprMonitor=new h.ScreenDprMonitor,A._screenDprMonitor.setListener(function(){return A.onDevicePixelRatioChange()}),A.register(A._screenDprMonitor),A.register(M.onResize(function(P){return A._fullRefresh()})),A.register(O.onOptionChange(function(){return A._renderer.onOptionsChanged()})),A.register(A._charSizeService.onCharSizeChange(function(){return A.onCharSizeChanged()})),A._renderer.onRequestRedraw(function(P){return A.refreshRows(P.start,P.end,!0)}),A.register((0,v.addDisposableDomListener)(window,"resize",function(){return A.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var D=new IntersectionObserver(function(P){return A._onIntersectionChange(P[P.length-1])},{threshold:0});D.observe(E),A.register({dispose:function(){return D.disconnect()}})}return A}return S(f,l),Object.defineProperty(f.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),f.prototype._onIntersectionChange=function(p){this._isPaused=p.isIntersecting===void 0?p.intersectionRatio===0:!p.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},f.prototype.refreshRows=function(p,C,E){E===void 0&&(E=!1),this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(p,C,this._rowCount))},f.prototype._renderRows=function(p,C){this._renderer.renderRows(p,C),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:p,end:C}),this._isNextRenderRedrawOnly=!0},f.prototype.resize=function(p,C){this._rowCount=C,this._fireOnCanvasResize()},f.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},f.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},f.prototype.dispose=function(){l.prototype.dispose.call(this)},f.prototype.setRenderer=function(p){var C=this;this._renderer.dispose(),this._renderer=p,this._renderer.onRequestRedraw(function(E){return C.refreshRows(E.start,E.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},f.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},f.prototype.clearTextureAtlas=function(){var p,C;(C=(p=this._renderer)===null||p===void 0?void 0:p.clearTextureAtlas)===null||C===void 0||C.call(p),this._fullRefresh()},f.prototype.setColors=function(p){this._renderer.setColors(p),this._fullRefresh()},f.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},f.prototype.onResize=function(p,C){this._renderer.onResize(p,C),this._fullRefresh()},f.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},f.prototype.onBlur=function(){this._renderer.onBlur()},f.prototype.onFocus=function(){this._renderer.onFocus()},f.prototype.onSelectionChanged=function(p,C,E){this._selectionState.start=p,this._selectionState.end=C,this._selectionState.columnSelectMode=E,this._renderer.onSelectionChanged(p,C,E)},f.prototype.onCursorMove=function(){this._renderer.onCursorMove()},f.prototype.clear=function(){this._renderer.clear()},L([m(3,a.IOptionsService),m(4,s.ICharSizeService),m(5,a.IBufferService)],f)}(u.Disposable);d.RenderService=o},9312:function(Y,d,x){var _,S=this&&this.__extends||(_=function(O,R){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,A){M.__proto__=A}||function(M,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(M[D]=A[D])},_(O,R)},function(O,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function M(){this.constructor=O}_(O,R),O.prototype=R===null?Object.create(R):(M.prototype=R.prototype,new M)}),L=this&&this.__decorate||function(O,R,M,A){var D,P=arguments.length,z=P<3?R:A===null?A=Object.getOwnPropertyDescriptor(R,M):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(O,R,M,A);else for(var W=O.length-1;W>=0;W--)(D=O[W])&&(z=(P<3?D(z):P>3?D(R,M,z):D(R,M))||z);return P>3&&z&&Object.defineProperty(R,M,z),z},m=this&&this.__param||function(O,R){return function(M,A){R(M,A,O)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionService=void 0;var b=x(6114),y=x(456),u=x(511),h=x(8460),v=x(4725),a=x(2585),s=x(9806),o=x(9504),l=x(844),f=x(4841),p=String.fromCharCode(160),C=new RegExp(p,"g"),E=function(O){function R(M,A,D,P,z,W,B,I){var q=O.call(this)||this;return q._element=M,q._screenElement=A,q._linkifier=D,q._bufferService=P,q._coreService=z,q._mouseService=W,q._optionsService=B,q._renderService=I,q._dragScrollAmount=0,q._enabled=!0,q._workCell=new u.CellData,q._mouseDownTimeStamp=0,q._oldHasSelection=!1,q._oldSelectionStart=void 0,q._oldSelectionEnd=void 0,q._onLinuxMouseSelection=q.register(new h.EventEmitter),q._onRedrawRequest=q.register(new h.EventEmitter),q._onSelectionChange=q.register(new h.EventEmitter),q._onRequestScrollLines=q.register(new h.EventEmitter),q._mouseMoveListener=function(X){return q._onMouseMove(X)},q._mouseUpListener=function(X){return q._onMouseUp(X)},q._coreService.onUserInput(function(){q.hasSelection&&q.clearSelection()}),q._trimListener=q._bufferService.buffer.lines.onTrim(function(X){return q._onTrim(X)}),q.register(q._bufferService.buffers.onBufferActivate(function(X){return q._onBufferActivate(X)})),q.enable(),q._model=new y.SelectionModel(q._bufferService),q._activeSelectionMode=0,q}return S(R,O),Object.defineProperty(R.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),R.prototype.dispose=function(){this._removeMouseDownListeners()},R.prototype.reset=function(){this.clearSelection()},R.prototype.disable=function(){this.clearSelection(),this._enabled=!1},R.prototype.enable=function(){this._enabled=!0},Object.defineProperty(R.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"hasSelection",{get:function(){var M=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!M||!A||M[0]===A[0]&&M[1]===A[1])},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionText",{get:function(){var M=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!M||!A)return"";var D=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(M[0]===A[0])return"";for(var z=M[1];z<=A[1];z++){var W=D.translateBufferLineToString(z,!0,M[0],A[0]);P.push(W)}}else{var B=M[1]===A[1]?A[0]:void 0;for(P.push(D.translateBufferLineToString(M[1],!0,M[0],B)),z=M[1]+1;z<=A[1]-1;z++){var I=D.lines.get(z);W=D.translateBufferLineToString(z,!0),(I==null?void 0:I.isWrapped)?P[P.length-1]+=W:P.push(W)}M[1]!==A[1]&&(I=D.lines.get(A[1]),W=D.translateBufferLineToString(A[1],!0,0,A[0]),I&&I.isWrapped?P[P.length-1]+=W:P.push(W))}return P.map(function(q){return q.replace(C," ")}).join(b.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),R.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},R.prototype.refresh=function(M){var A=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return A._refresh()})),b.isLinux&&M&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},R.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},R.prototype._isClickInSelection=function(M){var A=this._getMouseBufferCoords(M),D=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(D&&P&&A)&&this._areCoordsInSelection(A,D,P)},R.prototype._areCoordsInSelection=function(M,A,D){return M[1]>A[1]&&M[1]<D[1]||A[1]===D[1]&&M[1]===A[1]&&M[0]>=A[0]&&M[0]<D[0]||A[1]<D[1]&&M[1]===D[1]&&M[0]<D[0]||A[1]<D[1]&&M[1]===A[1]&&M[0]>=A[0]},R.prototype._selectWordAtCursor=function(M,A){var D,P,z=(P=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||P===void 0?void 0:P.range;if(z)return this._model.selectionStart=[z.start.x-1,z.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(z,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var W=this._getMouseBufferCoords(M);return!!W&&(this._selectWordAt(W,A),this._model.selectionEnd=void 0,!0)},R.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},R.prototype.selectLines=function(M,A){this._model.clearSelection(),M=Math.max(M,0),A=Math.min(A,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,M],this._model.selectionEnd=[this._bufferService.cols,A],this.refresh(),this._onSelectionChange.fire()},R.prototype._onTrim=function(M){this._model.onTrim(M)&&this.refresh()},R.prototype._getMouseBufferCoords=function(M){var A=this._mouseService.getCoords(M,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(A)return A[0]--,A[1]--,A[1]+=this._bufferService.buffer.ydisp,A},R.prototype._getMouseEventScrollAmount=function(M){var A=(0,s.getCoordsRelativeToElement)(M,this._screenElement)[1],D=this._renderService.dimensions.canvasHeight;return A>=0&&A<=D?0:(A>D&&(A-=D),A=Math.min(Math.max(A,-50),50),(A/=50)/Math.abs(A)+Math.round(14*A))},R.prototype.shouldForceSelection=function(M){return b.isMac?M.altKey&&this._optionsService.options.macOptionClickForcesSelection:M.shiftKey},R.prototype.onMouseDown=function(M){if(this._mouseDownTimeStamp=M.timeStamp,(M.button!==2||!this.hasSelection)&&M.button===0){if(!this._enabled){if(!this.shouldForceSelection(M))return;M.stopPropagation()}M.preventDefault(),this._dragScrollAmount=0,this._enabled&&M.shiftKey?this._onIncrementalClick(M):M.detail===1?this._onSingleClick(M):M.detail===2?this._onDoubleClick(M):M.detail===3&&this._onTripleClick(M),this._addMouseDownListeners(),this.refresh(!0)}},R.prototype._addMouseDownListeners=function(){var M=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return M._dragScroll()},50)},R.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},R.prototype._onIncrementalClick=function(M){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(M))},R.prototype._onSingleClick=function(M){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(M)?3:0,this._model.selectionStart=this._getMouseBufferCoords(M),this._model.selectionStart){this._model.selectionEnd=void 0;var A=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);A&&A.length!==this._model.selectionStart[0]&&A.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},R.prototype._onDoubleClick=function(M){this._selectWordAtCursor(M,!0)&&(this._activeSelectionMode=1)},R.prototype._onTripleClick=function(M){var A=this._getMouseBufferCoords(M);A&&(this._activeSelectionMode=2,this._selectLineAt(A[1]))},R.prototype.shouldColumnSelect=function(M){return M.altKey&&!(b.isMac&&this._optionsService.options.macOptionClickForcesSelection)},R.prototype._onMouseMove=function(M){if(M.stopImmediatePropagation(),this._model.selectionStart){var A=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(M),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(M),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){var P=D.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}A&&A[0]===this._model.selectionEnd[0]&&A[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},R.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var M=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(M.ydisp+this._bufferService.rows,M.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=M.ydisp),this.refresh()}},R.prototype._onMouseUp=function(M){var A=M.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&A<500&&M.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var D=this._mouseService.getCoords(M,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){var P=(0,o.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()},R.prototype._fireEventIfSelectionChanged=function(){var M=this._model.finalSelectionStart,A=this._model.finalSelectionEnd,D=!(!M||!A||M[0]===A[0]&&M[1]===A[1]);D?M&&A&&(this._oldSelectionStart&&this._oldSelectionEnd&&M[0]===this._oldSelectionStart[0]&&M[1]===this._oldSelectionStart[1]&&A[0]===this._oldSelectionEnd[0]&&A[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(M,A,D)):this._oldHasSelection&&this._fireOnSelectionChange(M,A,D)},R.prototype._fireOnSelectionChange=function(M,A,D){this._oldSelectionStart=M,this._oldSelectionEnd=A,this._oldHasSelection=D,this._onSelectionChange.fire()},R.prototype._onBufferActivate=function(M){var A=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=M.activeBuffer.lines.onTrim(function(D){return A._onTrim(D)})},R.prototype._convertViewportColToCharacterIndex=function(M,A){for(var D=A[0],P=0;A[0]>=P;P++){var z=M.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:z>1&&A[0]!==P&&(D+=z-1)}return D},R.prototype.setSelection=function(M,A,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[M,A],this._model.selectionStartLength=D,this.refresh()},R.prototype.rightClickSelect=function(M){this._isClickInSelection(M)||(this._selectWordAtCursor(M,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},R.prototype._getWordAt=function(M,A,D,P){if(D===void 0&&(D=!0),P===void 0&&(P=!0),!(M[0]>=this._bufferService.cols)){var z=this._bufferService.buffer,W=z.lines.get(M[1]);if(W){var B=z.translateBufferLineToString(M[1],!1),I=this._convertViewportColToCharacterIndex(W,M),q=I,X=M[0]-I,oe=0,ne=0,_e=0,Ce=0;if(B.charAt(I)===" "){for(;I>0&&B.charAt(I-1)===" ";)I--;for(;q<B.length&&B.charAt(q+1)===" ";)q++}else{var ye=M[0],H=M[0];W.getWidth(ye)===0&&(oe++,ye--),W.getWidth(H)===2&&(ne++,H++);var j=W.getString(H).length;for(j>1&&(Ce+=j-1,q+=j-1);ye>0&&I>0&&!this._isCharWordSeparator(W.loadCell(ye-1,this._workCell));){W.loadCell(ye-1,this._workCell);var U=this._workCell.getChars().length;this._workCell.getWidth()===0?(oe++,ye--):U>1&&(_e+=U-1,I-=U-1),I--,ye--}for(;H<W.length&&q+1<B.length&&!this._isCharWordSeparator(W.loadCell(H+1,this._workCell));){W.loadCell(H+1,this._workCell);var re=this._workCell.getChars().length;this._workCell.getWidth()===2?(ne++,H++):re>1&&(Ce+=re-1,q+=re-1),q++,H++}}q++;var K=I+X-oe+_e,de=Math.min(this._bufferService.cols,q-I+oe+ne-_e-Ce);if(A||B.slice(I,q).trim()!==""){if(D&&K===0&&W.getCodePoint(0)!==32){var me=z.lines.get(M[1]-1);if(me&&W.isWrapped&&me.getCodePoint(this._bufferService.cols-1)!==32){var Te=this._getWordAt([this._bufferService.cols-1,M[1]-1],!1,!0,!1);if(Te){var Le=this._bufferService.cols-Te.start;K-=Le,de+=Le}}}if(P&&K+de===this._bufferService.cols&&W.getCodePoint(this._bufferService.cols-1)!==32){var qe=z.lines.get(M[1]+1);if((qe==null?void 0:qe.isWrapped)&&qe.getCodePoint(0)!==32){var ve=this._getWordAt([0,M[1]+1],!1,!1,!0);ve&&(de+=ve.length)}}return{start:K,length:de}}}}},R.prototype._selectWordAt=function(M,A){var D=this._getWordAt(M,A);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,M[1]--;this._model.selectionStart=[D.start,M[1]],this._model.selectionStartLength=D.length}},R.prototype._selectToWordAt=function(M){var A=this._getWordAt(M,!0);if(A){for(var D=M[1];A.start<0;)A.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;A.start+A.length>this._bufferService.cols;)A.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?A.start:A.start+A.length,D]}},R.prototype._isCharWordSeparator=function(M){return M.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(M.getChars())>=0},R.prototype._selectLineAt=function(M){var A=this._bufferService.buffer.getWrappedRangeForLine(M);this._model.selectionStart=[0,A.first],this._model.selectionEnd=[this._bufferService.cols,A.last],this._model.selectionStartLength=0},L([m(3,a.IBufferService),m(4,a.ICoreService),m(5,v.IMouseService),m(6,a.IOptionsService),m(7,v.IRenderService)],R)}(l.Disposable);d.SelectionService=E},4725:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ICharacterJoinerService=d.ISoundService=d.ISelectionService=d.IRenderService=d.IMouseService=d.ICoreBrowserService=d.ICharSizeService=void 0;var _=x(8343);d.ICharSizeService=(0,_.createDecorator)("CharSizeService"),d.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),d.IMouseService=(0,_.createDecorator)("MouseService"),d.IRenderService=(0,_.createDecorator)("RenderService"),d.ISelectionService=(0,_.createDecorator)("SelectionService"),d.ISoundService=(0,_.createDecorator)("SoundService"),d.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService")},357:function(Y,d,x){var _=this&&this.__decorate||function(b,y,u,h){var v,a=arguments.length,s=a<3?y:h===null?h=Object.getOwnPropertyDescriptor(y,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(b,y,u,h);else for(var o=b.length-1;o>=0;o--)(v=b[o])&&(s=(a<3?v(s):a>3?v(y,u,s):v(y,u))||s);return a>3&&s&&Object.defineProperty(y,u,s),s},S=this&&this.__param||function(b,y){return function(u,h){y(u,h,b)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SoundService=void 0;var L=x(2585),m=function(){function b(y){this._optionsService=y}return Object.defineProperty(b,"audioContext",{get:function(){if(!b._audioContext){var y=window.AudioContext||window.webkitAudioContext;if(!y)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;b._audioContext=new y}return b._audioContext},enumerable:!1,configurable:!0}),b.prototype.playBellSound=function(){var y=b.audioContext;if(y){var u=y.createBufferSource();y.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(h){u.buffer=h,u.connect(y.destination),u.start(0)})}},b.prototype._base64ToArrayBuffer=function(y){for(var u=window.atob(y),h=u.length,v=new Uint8Array(h),a=0;a<h;a++)v[a]=u.charCodeAt(a);return v.buffer},b.prototype._removeMimeType=function(y){return y.split(",")[1]},b=_([S(0,L.IOptionsService)],b)}();d.SoundService=m},6349:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CircularList=void 0;var _=x(8460),S=function(){function L(m){this._maxLength=m,this.onDeleteEmitter=new _.EventEmitter,this.onInsertEmitter=new _.EventEmitter,this.onTrimEmitter=new _.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(L.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"maxLength",{get:function(){return this._maxLength},set:function(m){if(this._maxLength!==m){for(var b=new Array(m),y=0;y<Math.min(m,this.length);y++)b[y]=this._array[this._getCyclicIndex(y)];this._array=b,this._maxLength=m,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"length",{get:function(){return this._length},set:function(m){if(m>this._length)for(var b=this._length;b<m;b++)this._array[b]=void 0;this._length=m},enumerable:!1,configurable:!0}),L.prototype.get=function(m){return this._array[this._getCyclicIndex(m)]},L.prototype.set=function(m,b){this._array[this._getCyclicIndex(m)]=b},L.prototype.push=function(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},L.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(L.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),L.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},L.prototype.splice=function(m,b){for(var y=[],u=2;u<arguments.length;u++)y[u-2]=arguments[u];if(b){for(var h=m;h<this._length-b;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+b)];this._length-=b,this.onDeleteEmitter.fire({index:m,amount:b})}for(h=this._length-1;h>=m;h--)this._array[this._getCyclicIndex(h+y.length)]=this._array[this._getCyclicIndex(h)];for(h=0;h<y.length;h++)this._array[this._getCyclicIndex(m+h)]=y[h];if(y.length&&this.onInsertEmitter.fire({index:m,amount:y.length}),this._length+y.length>this._maxLength){var v=this._length+y.length-this._maxLength;this._startIndex+=v,this._length=this._maxLength,this.onTrimEmitter.fire(v)}else this._length+=y.length},L.prototype.trimStart=function(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)},L.prototype.shiftElements=function(m,b,y){if(!(b<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(var u=b-1;u>=0;u--)this.set(m+u+y,this.get(m+u));var h=m+b+y-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(u=0;u<b;u++)this.set(m+u+y,this.get(m+u))}},L.prototype._getCyclicIndex=function(m){return(this._startIndex+m)%this._maxLength},L}();d.CircularList=S},1439:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.clone=void 0,d.clone=function x(_,S){if(S===void 0&&(S=5),typeof _!="object")return _;var L=Array.isArray(_)?[]:{};for(var m in _)L[m]=S<=1?_[m]:_[m]&&x(_[m],S-1);return L}},8969:function(Y,d,x){var _,S=this&&this.__extends||(_=function(M,A){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(D[z]=P[z])},_(M,A)},function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function D(){this.constructor=M}_(M,A),M.prototype=A===null?Object.create(A):(D.prototype=A.prototype,new D)});Object.defineProperty(d,"__esModule",{value:!0}),d.CoreTerminal=void 0;var L=x(844),m=x(2585),b=x(4348),y=x(7866),u=x(744),h=x(7302),v=x(6975),a=x(8460),s=x(1753),o=x(3730),l=x(1480),f=x(7994),p=x(9282),C=x(5435),E=x(5981),O=!1,R=function(M){function A(D){var P=M.call(this)||this;return P._onBinary=new a.EventEmitter,P._onData=new a.EventEmitter,P._onLineFeed=new a.EventEmitter,P._onResize=new a.EventEmitter,P._onScroll=new a.EventEmitter,P._instantiationService=new b.InstantiationService,P.optionsService=new h.OptionsService(D),P._instantiationService.setService(m.IOptionsService,P.optionsService),P._bufferService=P.register(P._instantiationService.createInstance(u.BufferService)),P._instantiationService.setService(m.IBufferService,P._bufferService),P._logService=P._instantiationService.createInstance(y.LogService),P._instantiationService.setService(m.ILogService,P._logService),P.coreService=P.register(P._instantiationService.createInstance(v.CoreService,function(){return P.scrollToBottom()})),P._instantiationService.setService(m.ICoreService,P.coreService),P.coreMouseService=P._instantiationService.createInstance(s.CoreMouseService),P._instantiationService.setService(m.ICoreMouseService,P.coreMouseService),P._dirtyRowService=P._instantiationService.createInstance(o.DirtyRowService),P._instantiationService.setService(m.IDirtyRowService,P._dirtyRowService),P.unicodeService=P._instantiationService.createInstance(l.UnicodeService),P._instantiationService.setService(m.IUnicodeService,P.unicodeService),P._charsetService=P._instantiationService.createInstance(f.CharsetService),P._instantiationService.setService(m.ICharsetService,P._charsetService),P._inputHandler=new C.InputHandler(P._bufferService,P._charsetService,P.coreService,P._dirtyRowService,P._logService,P.optionsService,P.coreMouseService,P.unicodeService),P.register((0,a.forwardEvent)(P._inputHandler.onLineFeed,P._onLineFeed)),P.register(P._inputHandler),P.register((0,a.forwardEvent)(P._bufferService.onResize,P._onResize)),P.register((0,a.forwardEvent)(P.coreService.onData,P._onData)),P.register((0,a.forwardEvent)(P.coreService.onBinary,P._onBinary)),P.register(P.optionsService.onOptionChange(function(z){return P._updateOptions(z)})),P.register(P._bufferService.onScroll(function(z){P._onScroll.fire({position:P._bufferService.buffer.ydisp,source:0}),P._dirtyRowService.markRangeDirty(P._bufferService.buffer.scrollTop,P._bufferService.buffer.scrollBottom)})),P.register(P._inputHandler.onScroll(function(z){P._onScroll.fire({position:P._bufferService.buffer.ydisp,source:0}),P._dirtyRowService.markRangeDirty(P._bufferService.buffer.scrollTop,P._bufferService.buffer.scrollBottom)})),P._writeBuffer=new E.WriteBuffer(function(z,W){return P._inputHandler.parse(z,W)}),P}return S(A,M),Object.defineProperty(A.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onScroll",{get:function(){var D=this;return this._onScrollApi||(this._onScrollApi=new a.EventEmitter,this.register(this._onScroll.event(function(P){var z;(z=D._onScrollApi)===null||z===void 0||z.fire(P.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return this.optionsService.options},set:function(D){for(var P in D)this.optionsService.options[P]=D[P]},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){var D;this._isDisposed||(M.prototype.dispose.call(this),(D=this._windowsMode)===null||D===void 0||D.dispose(),this._windowsMode=void 0)},A.prototype.write=function(D,P){this._writeBuffer.write(D,P)},A.prototype.writeSync=function(D,P){this._logService.logLevel<=m.LogLevelEnum.WARN&&!O&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O=!0),this._writeBuffer.writeSync(D,P)},A.prototype.resize=function(D,P){isNaN(D)||isNaN(P)||(D=Math.max(D,u.MINIMUM_COLS),P=Math.max(P,u.MINIMUM_ROWS),this._bufferService.resize(D,P))},A.prototype.scroll=function(D,P){P===void 0&&(P=!1),this._bufferService.scroll(D,P)},A.prototype.scrollLines=function(D,P,z){this._bufferService.scrollLines(D,P,z)},A.prototype.scrollPages=function(D){this._bufferService.scrollPages(D)},A.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},A.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},A.prototype.scrollToLine=function(D){this._bufferService.scrollToLine(D)},A.prototype.registerEscHandler=function(D,P){return this._inputHandler.registerEscHandler(D,P)},A.prototype.registerDcsHandler=function(D,P){return this._inputHandler.registerDcsHandler(D,P)},A.prototype.registerCsiHandler=function(D,P){return this._inputHandler.registerCsiHandler(D,P)},A.prototype.registerOscHandler=function(D,P){return this._inputHandler.registerOscHandler(D,P)},A.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},A.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},A.prototype._updateOptions=function(D){var P;switch(D){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((P=this._windowsMode)===null||P===void 0||P.dispose(),this._windowsMode=void 0)}},A.prototype._enableWindowsMode=function(){var D=this;if(!this._windowsMode){var P=[];P.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},function(){return(0,p.updateWindowsModeWrappedState)(D._bufferService),!1})),this._windowsMode={dispose:function(){for(var z=0,W=P;z<W.length;z++)W[z].dispose()}}}},A}(L.Disposable);d.CoreTerminal=R},8460:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.forwardEvent=d.EventEmitter=void 0;var x=function(){function _(){this._listeners=[],this._disposed=!1}return Object.defineProperty(_.prototype,"event",{get:function(){var S=this;return this._event||(this._event=function(L){return S._listeners.push(L),{dispose:function(){if(!S._disposed){for(var m=0;m<S._listeners.length;m++)if(S._listeners[m]===L)return void S._listeners.splice(m,1)}}}}),this._event},enumerable:!1,configurable:!0}),_.prototype.fire=function(S,L){for(var m=[],b=0;b<this._listeners.length;b++)m.push(this._listeners[b]);for(b=0;b<m.length;b++)m[b].call(void 0,S,L)},_.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},_}();d.EventEmitter=x,d.forwardEvent=function(_,S){return _(function(L){return S.fire(L)})}},5435:function(Y,d,x){var _,S=this&&this.__extends||(_=function(z,W){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,I){B.__proto__=I}||function(B,I){for(var q in I)Object.prototype.hasOwnProperty.call(I,q)&&(B[q]=I[q])},_(z,W)},function(z,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function B(){this.constructor=z}_(z,W),z.prototype=W===null?Object.create(W):(B.prototype=W.prototype,new B)});Object.defineProperty(d,"__esModule",{value:!0}),d.InputHandler=d.WindowsOptionsReportType=void 0;var L,m=x(2584),b=x(7116),y=x(2015),u=x(844),h=x(8273),v=x(482),a=x(8437),s=x(8460),o=x(643),l=x(511),f=x(3734),p=x(2585),C=x(6242),E=x(6351),O=x(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function A(z,W){if(z>24)return W.setWinLines||!1;switch(z){case 1:return!!W.restoreWin;case 2:return!!W.minimizeWin;case 3:return!!W.setWinPosition;case 4:return!!W.setWinSizePixels;case 5:return!!W.raiseWin;case 6:return!!W.lowerWin;case 7:return!!W.refreshWin;case 8:return!!W.setWinSizeChars;case 9:return!!W.maximizeWin;case 10:return!!W.fullscreenWin;case 11:return!!W.getWinState;case 13:return!!W.getWinPosition;case 14:return!!W.getWinSizePixels;case 15:return!!W.getScreenSizePixels;case 16:return!!W.getCellSizePixels;case 18:return!!W.getWinSizeChars;case 19:return!!W.getScreenSizeChars;case 20:return!!W.getIconTitle;case 21:return!!W.getWinTitle;case 22:return!!W.pushTitle;case 23:return!!W.popTitle;case 24:return!!W.setWinLines}return!1}(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(L=d.WindowsOptionsReportType||(d.WindowsOptionsReportType={}));var D=function(){function z(W,B,I,q){this._bufferService=W,this._coreService=B,this._logService=I,this._optionsService=q,this._data=new Uint32Array(0)}return z.prototype.hook=function(W){this._data=new Uint32Array(0)},z.prototype.put=function(W,B,I){this._data=(0,h.concat)(this._data,W.subarray(B,I))},z.prototype.unhook=function(W){if(!W)return this._data=new Uint32Array(0),!0;var B=(0,v.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),B){case'"q':this._coreService.triggerDataEvent(m.C0.ESC+'P1$r0"q'+m.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(m.C0.ESC+'P1$r61;1"p'+m.C0.ESC+"\\");break;case"r":var I=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(m.C0.ESC+"P1$r"+I+m.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(m.C0.ESC+"P1$r0m"+m.C0.ESC+"\\");break;case" q":var q={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];q-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(m.C0.ESC+"P1$r"+q+" q"+m.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",B),this._coreService.triggerDataEvent(m.C0.ESC+"P0$r"+m.C0.ESC+"\\")}return!0},z}(),P=function(z){function W(B,I,q,X,oe,ne,_e,Ce,ye){ye===void 0&&(ye=new y.EscapeSequenceParser);var H=z.call(this)||this;H._bufferService=B,H._charsetService=I,H._coreService=q,H._dirtyRowService=X,H._logService=oe,H._optionsService=ne,H._coreMouseService=_e,H._unicodeService=Ce,H._parser=ye,H._parseBuffer=new Uint32Array(4096),H._stringDecoder=new v.StringToUtf32,H._utf8Decoder=new v.Utf8ToUtf32,H._workCell=new l.CellData,H._windowTitle="",H._iconName="",H._windowTitleStack=[],H._iconNameStack=[],H._curAttrData=a.DEFAULT_ATTR_DATA.clone(),H._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),H._onRequestBell=new s.EventEmitter,H._onRequestRefreshRows=new s.EventEmitter,H._onRequestReset=new s.EventEmitter,H._onRequestSendFocus=new s.EventEmitter,H._onRequestSyncScrollBar=new s.EventEmitter,H._onRequestWindowsOptionsReport=new s.EventEmitter,H._onA11yChar=new s.EventEmitter,H._onA11yTab=new s.EventEmitter,H._onCursorMove=new s.EventEmitter,H._onLineFeed=new s.EventEmitter,H._onScroll=new s.EventEmitter,H._onTitleChange=new s.EventEmitter,H._onColor=new s.EventEmitter,H._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},H._specialColors=[256,257,258],H.register(H._parser),H._activeBuffer=H._bufferService.buffer,H.register(H._bufferService.buffers.onBufferActivate(function(K){return H._activeBuffer=K.activeBuffer})),H._parser.setCsiHandlerFallback(function(K,de){H._logService.debug("Unknown CSI code: ",{identifier:H._parser.identToString(K),params:de.toArray()})}),H._parser.setEscHandlerFallback(function(K){H._logService.debug("Unknown ESC code: ",{identifier:H._parser.identToString(K)})}),H._parser.setExecuteHandlerFallback(function(K){H._logService.debug("Unknown EXECUTE code: ",{code:K})}),H._parser.setOscHandlerFallback(function(K,de,me){H._logService.debug("Unknown OSC code: ",{identifier:K,action:de,data:me})}),H._parser.setDcsHandlerFallback(function(K,de,me){de==="HOOK"&&(me=me.toArray()),H._logService.debug("Unknown DCS code: ",{identifier:H._parser.identToString(K),action:de,payload:me})}),H._parser.setPrintHandler(function(K,de,me){return H.print(K,de,me)}),H._parser.registerCsiHandler({final:"@"},function(K){return H.insertChars(K)}),H._parser.registerCsiHandler({intermediates:" ",final:"@"},function(K){return H.scrollLeft(K)}),H._parser.registerCsiHandler({final:"A"},function(K){return H.cursorUp(K)}),H._parser.registerCsiHandler({intermediates:" ",final:"A"},function(K){return H.scrollRight(K)}),H._parser.registerCsiHandler({final:"B"},function(K){return H.cursorDown(K)}),H._parser.registerCsiHandler({final:"C"},function(K){return H.cursorForward(K)}),H._parser.registerCsiHandler({final:"D"},function(K){return H.cursorBackward(K)}),H._parser.registerCsiHandler({final:"E"},function(K){return H.cursorNextLine(K)}),H._parser.registerCsiHandler({final:"F"},function(K){return H.cursorPrecedingLine(K)}),H._parser.registerCsiHandler({final:"G"},function(K){return H.cursorCharAbsolute(K)}),H._parser.registerCsiHandler({final:"H"},function(K){return H.cursorPosition(K)}),H._parser.registerCsiHandler({final:"I"},function(K){return H.cursorForwardTab(K)}),H._parser.registerCsiHandler({final:"J"},function(K){return H.eraseInDisplay(K)}),H._parser.registerCsiHandler({prefix:"?",final:"J"},function(K){return H.eraseInDisplay(K)}),H._parser.registerCsiHandler({final:"K"},function(K){return H.eraseInLine(K)}),H._parser.registerCsiHandler({prefix:"?",final:"K"},function(K){return H.eraseInLine(K)}),H._parser.registerCsiHandler({final:"L"},function(K){return H.insertLines(K)}),H._parser.registerCsiHandler({final:"M"},function(K){return H.deleteLines(K)}),H._parser.registerCsiHandler({final:"P"},function(K){return H.deleteChars(K)}),H._parser.registerCsiHandler({final:"S"},function(K){return H.scrollUp(K)}),H._parser.registerCsiHandler({final:"T"},function(K){return H.scrollDown(K)}),H._parser.registerCsiHandler({final:"X"},function(K){return H.eraseChars(K)}),H._parser.registerCsiHandler({final:"Z"},function(K){return H.cursorBackwardTab(K)}),H._parser.registerCsiHandler({final:"`"},function(K){return H.charPosAbsolute(K)}),H._parser.registerCsiHandler({final:"a"},function(K){return H.hPositionRelative(K)}),H._parser.registerCsiHandler({final:"b"},function(K){return H.repeatPrecedingCharacter(K)}),H._parser.registerCsiHandler({final:"c"},function(K){return H.sendDeviceAttributesPrimary(K)}),H._parser.registerCsiHandler({prefix:">",final:"c"},function(K){return H.sendDeviceAttributesSecondary(K)}),H._parser.registerCsiHandler({final:"d"},function(K){return H.linePosAbsolute(K)}),H._parser.registerCsiHandler({final:"e"},function(K){return H.vPositionRelative(K)}),H._parser.registerCsiHandler({final:"f"},function(K){return H.hVPosition(K)}),H._parser.registerCsiHandler({final:"g"},function(K){return H.tabClear(K)}),H._parser.registerCsiHandler({final:"h"},function(K){return H.setMode(K)}),H._parser.registerCsiHandler({prefix:"?",final:"h"},function(K){return H.setModePrivate(K)}),H._parser.registerCsiHandler({final:"l"},function(K){return H.resetMode(K)}),H._parser.registerCsiHandler({prefix:"?",final:"l"},function(K){return H.resetModePrivate(K)}),H._parser.registerCsiHandler({final:"m"},function(K){return H.charAttributes(K)}),H._parser.registerCsiHandler({final:"n"},function(K){return H.deviceStatus(K)}),H._parser.registerCsiHandler({prefix:"?",final:"n"},function(K){return H.deviceStatusPrivate(K)}),H._parser.registerCsiHandler({intermediates:"!",final:"p"},function(K){return H.softReset(K)}),H._parser.registerCsiHandler({intermediates:" ",final:"q"},function(K){return H.setCursorStyle(K)}),H._parser.registerCsiHandler({final:"r"},function(K){return H.setScrollRegion(K)}),H._parser.registerCsiHandler({final:"s"},function(K){return H.saveCursor(K)}),H._parser.registerCsiHandler({final:"t"},function(K){return H.windowOptions(K)}),H._parser.registerCsiHandler({final:"u"},function(K){return H.restoreCursor(K)}),H._parser.registerCsiHandler({intermediates:"'",final:"}"},function(K){return H.insertColumns(K)}),H._parser.registerCsiHandler({intermediates:"'",final:"~"},function(K){return H.deleteColumns(K)}),H._parser.setExecuteHandler(m.C0.BEL,function(){return H.bell()}),H._parser.setExecuteHandler(m.C0.LF,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.VT,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.FF,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.CR,function(){return H.carriageReturn()}),H._parser.setExecuteHandler(m.C0.BS,function(){return H.backspace()}),H._parser.setExecuteHandler(m.C0.HT,function(){return H.tab()}),H._parser.setExecuteHandler(m.C0.SO,function(){return H.shiftOut()}),H._parser.setExecuteHandler(m.C0.SI,function(){return H.shiftIn()}),H._parser.setExecuteHandler(m.C1.IND,function(){return H.index()}),H._parser.setExecuteHandler(m.C1.NEL,function(){return H.nextLine()}),H._parser.setExecuteHandler(m.C1.HTS,function(){return H.tabSet()}),H._parser.registerOscHandler(0,new C.OscHandler(function(K){return H.setTitle(K),H.setIconName(K),!0})),H._parser.registerOscHandler(1,new C.OscHandler(function(K){return H.setIconName(K)})),H._parser.registerOscHandler(2,new C.OscHandler(function(K){return H.setTitle(K)})),H._parser.registerOscHandler(4,new C.OscHandler(function(K){return H.setOrReportIndexedColor(K)})),H._parser.registerOscHandler(10,new C.OscHandler(function(K){return H.setOrReportFgColor(K)})),H._parser.registerOscHandler(11,new C.OscHandler(function(K){return H.setOrReportBgColor(K)})),H._parser.registerOscHandler(12,new C.OscHandler(function(K){return H.setOrReportCursorColor(K)})),H._parser.registerOscHandler(104,new C.OscHandler(function(K){return H.restoreIndexedColor(K)})),H._parser.registerOscHandler(110,new C.OscHandler(function(K){return H.restoreFgColor(K)})),H._parser.registerOscHandler(111,new C.OscHandler(function(K){return H.restoreBgColor(K)})),H._parser.registerOscHandler(112,new C.OscHandler(function(K){return H.restoreCursorColor(K)})),H._parser.registerEscHandler({final:"7"},function(){return H.saveCursor()}),H._parser.registerEscHandler({final:"8"},function(){return H.restoreCursor()}),H._parser.registerEscHandler({final:"D"},function(){return H.index()}),H._parser.registerEscHandler({final:"E"},function(){return H.nextLine()}),H._parser.registerEscHandler({final:"H"},function(){return H.tabSet()}),H._parser.registerEscHandler({final:"M"},function(){return H.reverseIndex()}),H._parser.registerEscHandler({final:"="},function(){return H.keypadApplicationMode()}),H._parser.registerEscHandler({final:">"},function(){return H.keypadNumericMode()}),H._parser.registerEscHandler({final:"c"},function(){return H.fullReset()}),H._parser.registerEscHandler({final:"n"},function(){return H.setgLevel(2)}),H._parser.registerEscHandler({final:"o"},function(){return H.setgLevel(3)}),H._parser.registerEscHandler({final:"|"},function(){return H.setgLevel(3)}),H._parser.registerEscHandler({final:"}"},function(){return H.setgLevel(2)}),H._parser.registerEscHandler({final:"~"},function(){return H.setgLevel(1)}),H._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return H.selectDefaultCharset()}),H._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return H.selectDefaultCharset()});var j=function(K){U._parser.registerEscHandler({intermediates:"(",final:K},function(){return H.selectCharset("("+K)}),U._parser.registerEscHandler({intermediates:")",final:K},function(){return H.selectCharset(")"+K)}),U._parser.registerEscHandler({intermediates:"*",final:K},function(){return H.selectCharset("*"+K)}),U._parser.registerEscHandler({intermediates:"+",final:K},function(){return H.selectCharset("+"+K)}),U._parser.registerEscHandler({intermediates:"-",final:K},function(){return H.selectCharset("-"+K)}),U._parser.registerEscHandler({intermediates:".",final:K},function(){return H.selectCharset("."+K)}),U._parser.registerEscHandler({intermediates:"/",final:K},function(){return H.selectCharset("/"+K)})},U=this;for(var re in b.CHARSETS)j(re);return H._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return H.screenAlignmentPattern()}),H._parser.setErrorHandler(function(K){return H._logService.error("Parsing error: ",K),K}),H._parser.registerDcsHandler({intermediates:"$",final:"q"},new D(H._bufferService,H._coreService,H._logService,H._optionsService)),H}return S(W,z),Object.defineProperty(W.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),W.prototype.dispose=function(){z.prototype.dispose.call(this)},W.prototype._preserveStack=function(B,I,q,X){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=q,this._parseStack.position=X},W.prototype._logSlowResolvingAsync=function(B){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([B,new Promise(function(I,q){return setTimeout(function(){return q("#SLOW_TIMEOUT")},5e3)})]).catch(function(I){if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})},W.prototype.parse=function(B,I){var q,X=this._activeBuffer.x,oe=this._activeBuffer.y,ne=0,_e=this._parseStack.paused;if(_e){if(q=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(q),q;X=this._parseStack.cursorStartX,oe=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>M&&(ne=this._parseStack.position+M)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?' "'+B+'"':""),typeof B=="string"?B.split("").map(function(j){return j.charCodeAt(0)}):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(B.length,M))),_e||this._dirtyRowService.clearRange(),B.length>M)for(var Ce=ne;Ce<B.length;Ce+=M){var ye=Ce+M<B.length?Ce+M:B.length,H=typeof B=="string"?this._stringDecoder.decode(B.substring(Ce,ye),this._parseBuffer):this._utf8Decoder.decode(B.subarray(Ce,ye),this._parseBuffer);if(q=this._parser.parse(this._parseBuffer,H))return this._preserveStack(X,oe,H,Ce),this._logSlowResolvingAsync(q),q}else if(!_e&&(H=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer),q=this._parser.parse(this._parseBuffer,H)))return this._preserveStack(X,oe,H,0),this._logSlowResolvingAsync(q),q;this._activeBuffer.x===X&&this._activeBuffer.y===oe||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},W.prototype.print=function(B,I,q){var X,oe,ne=this._charsetService.charset,_e=this._optionsService.options.screenReaderMode,Ce=this._bufferService.cols,ye=this._coreService.decPrivateModes.wraparound,H=this._coreService.modes.insertMode,j=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&q-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,j.fg,j.bg,j.extended);for(var re=I;re<q;++re){if(X=B[re],oe=this._unicodeService.wcwidth(X),X<127&&ne){var K=ne[String.fromCharCode(X)];K&&(X=K.charCodeAt(0))}if(_e&&this._onA11yChar.fire((0,v.stringFromCodePoint)(X)),oe||!this._activeBuffer.x){if(this._activeBuffer.x+oe-1>=Ce){if(ye){for(;this._activeBuffer.x<Ce;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,j.fg,j.bg,j.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Ce-1,oe===2)continue}if(H&&(U.insertCells(this._activeBuffer.x,oe,this._activeBuffer.getNullCell(j),j),U.getWidth(Ce-1)===2&&U.setCellFromCodePoint(Ce-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,j.fg,j.bg,j.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,X,oe,j.fg,j.bg,j.extended),oe>0)for(;--oe;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,j.fg,j.bg,j.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,X):U.addCodepointToCell(this._activeBuffer.x-2,X)}q-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Ce&&q-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,j.fg,j.bg,j.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype.registerCsiHandler=function(B,I){var q=this;return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,I):this._parser.registerCsiHandler(B,function(X){return!A(X.params[0],q._optionsService.options.windowOptions)||I(X)})},W.prototype.registerDcsHandler=function(B,I){return this._parser.registerDcsHandler(B,new E.DcsHandler(I))},W.prototype.registerEscHandler=function(B,I){return this._parser.registerEscHandler(B,I)},W.prototype.registerOscHandler=function(B,I){return this._parser.registerOscHandler(B,new C.OscHandler(I))},W.prototype.bell=function(){return this._onRequestBell.fire(),!0},W.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},W.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},W.prototype.backspace=function(){var B;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||B===void 0?void 0:B.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},W.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0},W.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},W.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},W.prototype._restrictCursor=function(B){B===void 0&&(B=this._bufferService.cols-1),this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype._setCursor=function(B,I){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=B,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype._moveCursor=function(B,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+I)},W.prototype.cursorUp=function(B){var I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0},W.prototype.cursorDown=function(B){var I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0},W.prototype.cursorForward=function(B){return this._moveCursor(B.params[0]||1,0),!0},W.prototype.cursorBackward=function(B){return this._moveCursor(-(B.params[0]||1),0),!0},W.prototype.cursorNextLine=function(B){return this.cursorDown(B),this._activeBuffer.x=0,!0},W.prototype.cursorPrecedingLine=function(B){return this.cursorUp(B),this._activeBuffer.x=0,!0},W.prototype.cursorCharAbsolute=function(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0},W.prototype.cursorPosition=function(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0},W.prototype.charPosAbsolute=function(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0},W.prototype.hPositionRelative=function(B){return this._moveCursor(B.params[0]||1,0),!0},W.prototype.linePosAbsolute=function(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0},W.prototype.vPositionRelative=function(B){return this._moveCursor(0,B.params[0]||1),!0},W.prototype.hVPosition=function(B){return this.cursorPosition(B),!0},W.prototype.tabClear=function(B){var I=B.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0},W.prototype.cursorForwardTab=function(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var I=B.params[0]||1;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},W.prototype.cursorBackwardTab=function(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var I=B.params[0]||1;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},W.prototype._eraseInBufferLine=function(B,I,q,X){X===void 0&&(X=!1);var oe=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);oe.replaceCells(I,q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),X&&(oe.isWrapped=!1)},W.prototype._resetBufferLine=function(B){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1},W.prototype.eraseInDisplay=function(B){var I;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowService.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);I<this._bufferService.rows;I++)this._resetBufferLine(I);this._dirtyRowService.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowService.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I);this._dirtyRowService.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowService.markDirty(I-1);I--;)this._resetBufferLine(I);this._dirtyRowService.markDirty(0);break;case 3:var q=this._activeBuffer.lines.length-this._bufferService.rows;q>0&&(this._activeBuffer.lines.trimStart(q),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-q,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-q,0),this._onScroll.fire(0))}return!0},W.prototype.eraseInLine=function(B){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},W.prototype.insertLines=function(B){this._restrictCursor();var I=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var q=this._activeBuffer.ybase+this._activeBuffer.y,X=this._bufferService.rows-1-this._activeBuffer.scrollBottom,oe=this._bufferService.rows-1+this._activeBuffer.ybase-X+1;I--;)this._activeBuffer.lines.splice(oe-1,1),this._activeBuffer.lines.splice(q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},W.prototype.deleteLines=function(B){this._restrictCursor();var I=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var q,X=this._activeBuffer.ybase+this._activeBuffer.y;for(q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-q;I--;)this._activeBuffer.lines.splice(X,1),this._activeBuffer.lines.splice(q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},W.prototype.insertChars=function(B){this._restrictCursor();var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.deleteChars=function(B){this._restrictCursor();var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.scrollUp=function(B){for(var I=B.params[0]||1;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollDown=function(B){for(var I=B.params[0]||1;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollLeft=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=B.params[0]||1,q=this._activeBuffer.scrollTop;q<=this._activeBuffer.scrollBottom;++q){var X=this._activeBuffer.lines.get(this._activeBuffer.ybase+q);X.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),X.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollRight=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=B.params[0]||1,q=this._activeBuffer.scrollTop;q<=this._activeBuffer.scrollBottom;++q){var X=this._activeBuffer.lines.get(this._activeBuffer.ybase+q);X.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),X.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.insertColumns=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=B.params[0]||1,q=this._activeBuffer.scrollTop;q<=this._activeBuffer.scrollBottom;++q){var X=this._activeBuffer.lines.get(this._activeBuffer.ybase+q);X.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),X.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.deleteColumns=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=B.params[0]||1,q=this._activeBuffer.scrollTop;q<=this._activeBuffer.scrollBottom;++q){var X=this._activeBuffer.lines.get(this._activeBuffer.ybase+q);X.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),X.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.eraseChars=function(B){this._restrictCursor();var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.repeatPrecedingCharacter=function(B){if(!this._parser.precedingCodepoint)return!0;for(var I=B.params[0]||1,q=new Uint32Array(I),X=0;X<I;++X)q[X]=this._parser.precedingCodepoint;return this.print(q,0,q.length),!0},W.prototype.sendDeviceAttributesPrimary=function(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0},W.prototype.sendDeviceAttributesSecondary=function(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0},W.prototype._is=function(B){return(this._optionsService.options.termName+"").indexOf(B)===0},W.prototype.setMode=function(B){for(var I=0;I<B.length;I++)B.params[I]===4&&(this._coreService.modes.insertMode=!0);return!0},W.prototype.setModePrivate=function(B){for(var I=0;I<B.length;I++)switch(B.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},W.prototype.resetMode=function(B){for(var I=0;I<B.length;I++)B.params[I]===4&&(this._coreService.modes.insertMode=!1);return!0},W.prototype.resetModePrivate=function(B){for(var I=0;I<B.length;I++)switch(B.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},W.prototype._updateAttrColor=function(B,I,q,X,oe){return I===2?(B|=50331648,B&=-16777216,B|=f.AttributeData.fromColorRGB([q,X,oe])):I===5&&(B&=-50331904,B|=33554432|255&q),B},W.prototype._extractColor=function(B,I,q){var X=[0,0,-1,0,0,0],oe=0,ne=0;do{if(X[ne+oe]=B.params[I+ne],B.hasSubParams(I+ne)){var _e=B.getSubParams(I+ne),Ce=0;do X[1]===5&&(oe=1),X[ne+Ce+1+oe]=_e[Ce];while(++Ce<_e.length&&Ce+ne+1+oe<X.length);break}if(X[1]===5&&ne+oe>=2||X[1]===2&&ne+oe>=5)break;X[1]&&(oe=1)}while(++ne+I<B.length&&ne+oe<X.length);for(Ce=2;Ce<X.length;++Ce)X[Ce]===-1&&(X[Ce]=0);switch(X[0]){case 38:q.fg=this._updateAttrColor(q.fg,X[1],X[3],X[4],X[5]);break;case 48:q.bg=this._updateAttrColor(q.bg,X[1],X[3],X[4],X[5]);break;case 58:q.extended=q.extended.clone(),q.extended.underlineColor=this._updateAttrColor(q.extended.underlineColor,X[1],X[3],X[4],X[5])}return ne},W.prototype._processUnderline=function(B,I){I.extended=I.extended.clone(),(!~B||B>5)&&(B=1),I.extended.underlineStyle=B,I.fg|=268435456,B===0&&(I.fg&=-268435457),I.updateExtended()},W.prototype.charAttributes=function(B){if(B.length===1&&B.params[0]===0)return this._curAttrData.fg=a.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=a.DEFAULT_ATTR_DATA.bg,!0;for(var I,q=B.length,X=this._curAttrData,oe=0;oe<q;oe++)(I=B.params[oe])>=30&&I<=37?(X.fg&=-50331904,X.fg|=16777216|I-30):I>=40&&I<=47?(X.bg&=-50331904,X.bg|=16777216|I-40):I>=90&&I<=97?(X.fg&=-50331904,X.fg|=16777224|I-90):I>=100&&I<=107?(X.bg&=-50331904,X.bg|=16777224|I-100):I===0?(X.fg=a.DEFAULT_ATTR_DATA.fg,X.bg=a.DEFAULT_ATTR_DATA.bg):I===1?X.fg|=134217728:I===3?X.bg|=67108864:I===4?(X.fg|=268435456,this._processUnderline(B.hasSubParams(oe)?B.getSubParams(oe)[0]:1,X)):I===5?X.fg|=536870912:I===7?X.fg|=67108864:I===8?X.fg|=1073741824:I===9?X.fg|=2147483648:I===2?X.bg|=134217728:I===21?this._processUnderline(2,X):I===22?(X.fg&=-134217729,X.bg&=-134217729):I===23?X.bg&=-67108865:I===24?X.fg&=-268435457:I===25?X.fg&=-536870913:I===27?X.fg&=-67108865:I===28?X.fg&=-1073741825:I===29?X.fg&=2147483647:I===39?(X.fg&=-67108864,X.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):I===49?(X.bg&=-67108864,X.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?oe+=this._extractColor(B,oe,X):I===59?(X.extended=X.extended.clone(),X.extended.underlineColor=-1,X.updateExtended()):I===100?(X.fg&=-67108864,X.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,X.bg&=-67108864,X.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0},W.prototype.deviceStatus=function(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(m.C0.ESC+"[0n");break;case 6:var I=this._activeBuffer.y+1,q=this._activeBuffer.x+1;this._coreService.triggerDataEvent(m.C0.ESC+"["+I+";"+q+"R")}return!0},W.prototype.deviceStatusPrivate=function(B){if(B.params[0]===6){var I=this._activeBuffer.y+1,q=this._activeBuffer.x+1;this._coreService.triggerDataEvent(m.C0.ESC+"[?"+I+";"+q+"R")}return!0},W.prototype.softReset=function(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},W.prototype.setCursorStyle=function(B){var I=B.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var q=I%2==1;return this._optionsService.options.cursorBlink=q,!0},W.prototype.setScrollRegion=function(B){var I,q=B.params[0]||1;return(B.length<2||(I=B.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>q&&(this._activeBuffer.scrollTop=q-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0},W.prototype.windowOptions=function(B){if(!A(B.params[0],this._optionsService.options.windowOptions))return!0;var I=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(L.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(L.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(m.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},W.prototype.saveCursor=function(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},W.prototype.restoreCursor=function(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},W.prototype.setTitle=function(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0},W.prototype.setIconName=function(B){return this._iconName=B,!0},W.prototype.setOrReportIndexedColor=function(B){for(var I=[],q=B.split(";");q.length>1;){var X=q.shift(),oe=q.shift();if(/^\d+$/.exec(X)){var ne=parseInt(X);if(0<=ne&&ne<256)if(oe==="?")I.push({type:0,index:ne});else{var _e=(0,O.parseColor)(oe);_e&&I.push({type:1,index:ne,color:_e})}}}return I.length&&this._onColor.fire(I),!0},W.prototype._setOrReportSpecialColor=function(B,I){for(var q=B.split(";"),X=0;X<q.length&&!(I>=this._specialColors.length);++X,++I)if(q[X]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{var oe=(0,O.parseColor)(q[X]);oe&&this._onColor.fire([{type:1,index:this._specialColors[I],color:oe}])}return!0},W.prototype.setOrReportFgColor=function(B){return this._setOrReportSpecialColor(B,0)},W.prototype.setOrReportBgColor=function(B){return this._setOrReportSpecialColor(B,1)},W.prototype.setOrReportCursorColor=function(B){return this._setOrReportSpecialColor(B,2)},W.prototype.restoreIndexedColor=function(B){if(!B)return this._onColor.fire([{type:2}]),!0;for(var I=[],q=B.split(";"),X=0;X<q.length;++X)if(/^\d+$/.exec(q[X])){var oe=parseInt(q[X]);0<=oe&&oe<256&&I.push({type:2,index:oe})}return I.length&&this._onColor.fire(I),!0},W.prototype.restoreFgColor=function(B){return this._onColor.fire([{type:2,index:256}]),!0},W.prototype.restoreBgColor=function(B){return this._onColor.fire([{type:2,index:257}]),!0},W.prototype.restoreCursorColor=function(B){return this._onColor.fire([{type:2,index:258}]),!0},W.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},W.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},W.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},W.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0},W.prototype.selectCharset=function(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(R[B[0]],b.CHARSETS[B[1]]||b.DEFAULT_CHARSET),!0)},W.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},W.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},W.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},W.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},W.prototype.reset=function(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()},W.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},W.prototype.setgLevel=function(B){return this._charsetService.setgLevel(B),!0},W.prototype.screenAlignmentPattern=function(){var B=new l.CellData;B.content=1<<22|"E".charCodeAt(0),B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(var I=0;I<this._bufferService.rows;++I){var q=this._activeBuffer.ybase+this._activeBuffer.y+I,X=this._activeBuffer.lines.get(q);X&&(X.fill(B),X.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},W}(u.Disposable);d.InputHandler=P},844:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getDisposeArrayDisposable=d.disposeArray=d.Disposable=void 0;var x=function(){function S(){this._disposables=[],this._isDisposed=!1}return S.prototype.dispose=function(){this._isDisposed=!0;for(var L=0,m=this._disposables;L<m.length;L++)m[L].dispose();this._disposables.length=0},S.prototype.register=function(L){return this._disposables.push(L),L},S.prototype.unregister=function(L){var m=this._disposables.indexOf(L);m!==-1&&this._disposables.splice(m,1)},S}();function _(S){for(var L=0,m=S;L<m.length;L++)m[L].dispose();S.length=0}d.Disposable=x,d.disposeArray=_,d.getDisposeArrayDisposable=function(S){return{dispose:function(){return _(S)}}}},6114:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.isLinux=d.isWindows=d.isIphone=d.isIpad=d.isMac=d.isSafari=d.isFirefox=void 0;var x=typeof navigator=="undefined",_=x?"node":navigator.userAgent,S=x?"node":navigator.platform;d.isFirefox=_.includes("Firefox"),d.isSafari=/^((?!chrome|android).)*safari/i.test(_),d.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(S),d.isIpad=S==="iPad",d.isIphone=S==="iPhone",d.isWindows=["Windows","Win16","Win32","WinCE"].includes(S),d.isLinux=S.indexOf("Linux")>=0},8273:(Y,d)=>{function x(_,S,L,m){if(L===void 0&&(L=0),m===void 0&&(m=_.length),L>=_.length)return _;L=(_.length+L)%_.length,m=m>=_.length?_.length:(_.length+m)%_.length;for(var b=L;b<m;++b)_[b]=S;return _}Object.defineProperty(d,"__esModule",{value:!0}),d.concat=d.fillFallback=d.fill=void 0,d.fill=function(_,S,L,m){return _.fill?_.fill(S,L,m):x(_,S,L,m)},d.fillFallback=x,d.concat=function(_,S){var L=new _.constructor(_.length+S.length);return L.set(_),L.set(S,_.length),L}},9282:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.updateWindowsModeWrappedState=void 0;var _=x(643);d.updateWindowsModeWrappedState=function(S){var L=S.buffer.lines.get(S.buffer.ybase+S.buffer.y-1),m=L==null?void 0:L.get(S.cols-1),b=S.buffer.lines.get(S.buffer.ybase+S.buffer.y);b&&m&&(b.isWrapped=m[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&m[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ExtendedAttrs=d.AttributeData=void 0;var x=function(){function S(){this.fg=0,this.bg=0,this.extended=new _}return S.toColorRGB=function(L){return[L>>>16&255,L>>>8&255,255&L]},S.fromColorRGB=function(L){return(255&L[0])<<16|(255&L[1])<<8|255&L[2]},S.prototype.clone=function(){var L=new S;return L.fg=this.fg,L.bg=this.bg,L.extended=this.extended.clone(),L},S.prototype.isInverse=function(){return 67108864&this.fg},S.prototype.isBold=function(){return 134217728&this.fg},S.prototype.isUnderline=function(){return 268435456&this.fg},S.prototype.isBlink=function(){return 536870912&this.fg},S.prototype.isInvisible=function(){return 1073741824&this.fg},S.prototype.isItalic=function(){return 67108864&this.bg},S.prototype.isDim=function(){return 134217728&this.bg},S.prototype.isStrikethrough=function(){return 2147483648&this.fg},S.prototype.getFgColorMode=function(){return 50331648&this.fg},S.prototype.getBgColorMode=function(){return 50331648&this.bg},S.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},S.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},S.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},S.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},S.prototype.isFgDefault=function(){return(50331648&this.fg)==0},S.prototype.isBgDefault=function(){return(50331648&this.bg)==0},S.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},S.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},S.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},S.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},S.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},S.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},S.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},S.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},S.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},S.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},S.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},S}();d.AttributeData=x;var _=function(){function S(L,m){L===void 0&&(L=0),m===void 0&&(m=-1),this.underlineStyle=L,this.underlineColor=m}return S.prototype.clone=function(){return new S(this.underlineStyle,this.underlineColor)},S.prototype.isEmpty=function(){return this.underlineStyle===0},S}();d.ExtendedAttrs=_},9092:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferStringIterator=d.Buffer=d.MAX_BUFFER_SIZE=void 0;var _=x(6349),S=x(8437),L=x(511),m=x(643),b=x(4634),y=x(4863),u=x(7116),h=x(3734);d.MAX_BUFFER_SIZE=4294967295;var v=function(){function s(o,l,f){this._hasScrollback=o,this._optionsService=l,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=S.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=L.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=L.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return s.prototype.getNullCell=function(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell},s.prototype.getWhitespaceCell=function(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell},s.prototype.getBlankLine=function(o,l){return new S.BufferLine(this._bufferService.cols,this.getNullCell(o),l)},Object.defineProperty(s.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isCursorInViewport",{get:function(){var o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows},enumerable:!1,configurable:!0}),s.prototype._getCorrectBufferLength=function(o){if(!this._hasScrollback)return o;var l=o+this._optionsService.options.scrollback;return l>d.MAX_BUFFER_SIZE?d.MAX_BUFFER_SIZE:l},s.prototype.fillViewportRows=function(o){if(this.lines.length===0){o===void 0&&(o=S.DEFAULT_ATTR_DATA);for(var l=this._rows;l--;)this.lines.push(this.getBlankLine(o))}},s.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},s.prototype.resize=function(o,l){var f=this.getNullCell(S.DEFAULT_ATTR_DATA),p=this._getCorrectBufferLength(l);if(p>this.lines.maxLength&&(this.lines.maxLength=p),this.lines.length>0){if(this._cols<o)for(var C=0;C<this.lines.length;C++)this.lines.get(C).resize(o,f);var E=0;if(this._rows<l)for(var O=this._rows;O<l;O++)this.lines.length<l+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new S.BufferLine(o,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new S.BufferLine(o,f)));else for(O=this._rows;O>l;O--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(p<this.lines.maxLength){var R=this.lines.length-p;R>0&&(this.lines.trimStart(R),this.ybase=Math.max(this.ybase-R,0),this.ydisp=Math.max(this.ydisp-R,0),this.savedY=Math.max(this.savedY-R,0)),this.lines.maxLength=p}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,l-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(o,l),this._cols>o))for(C=0;C<this.lines.length;C++)this.lines.get(C).resize(o,f);this._cols=o,this._rows=l},Object.defineProperty(s.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),s.prototype._reflow=function(o,l){this._cols!==o&&(o>this._cols?this._reflowLarger(o,l):this._reflowSmaller(o,l))},s.prototype._reflowLarger=function(o,l){var f=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(S.DEFAULT_ATTR_DATA));if(f.length>0){var p=(0,b.reflowLargerCreateNewLayout)(this.lines,f);(0,b.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(o,l,p.countRemoved)}},s.prototype._reflowLargerAdjustViewport=function(o,l,f){for(var p=this.getNullCell(S.DEFAULT_ATTR_DATA),C=f;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new S.BufferLine(o,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)},s.prototype._reflowSmaller=function(o,l){for(var f=this.getNullCell(S.DEFAULT_ATTR_DATA),p=[],C=0,E=this.lines.length-1;E>=0;E--){var O=this.lines.get(E);if(!(!O||!O.isWrapped&&O.getTrimmedLength()<=o)){for(var R=[O];O.isWrapped&&E>0;)O=this.lines.get(--E),R.unshift(O);var M=this.ybase+this.y;if(!(M>=E&&M<E+R.length)){var A,D=R[R.length-1].getTrimmedLength(),P=(0,b.reflowSmallerGetNewLineLengths)(R,this._cols,o),z=P.length-R.length;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+z):Math.max(0,this.lines.length-this.lines.maxLength+z);for(var W=[],B=0;B<z;B++){var I=this.getBlankLine(S.DEFAULT_ATTR_DATA,!0);W.push(I)}W.length>0&&(p.push({start:E+R.length+C,newLines:W}),C+=W.length),R.push.apply(R,W);var q=P.length-1,X=P[q];X===0&&(X=P[--q]);for(var oe=R.length-z-1,ne=D;oe>=0;){var _e=Math.min(ne,X);if(R[q].copyCellsFrom(R[oe],ne-_e,X-_e,_e,!0),(X-=_e)==0&&(X=P[--q]),(ne-=_e)==0){oe--;var Ce=Math.max(oe,0);ne=(0,b.getWrappedLineTrimmedLength)(R,Ce,this._cols)}}for(B=0;B<R.length;B++)P[B]<o&&R[B].setCell(P[B],f);for(var ye=z-A;ye-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+z,this.ybase+l-1)}}}if(p.length>0){var H=[],j=[];for(B=0;B<this.lines.length;B++)j.push(this.lines.get(B));var U=this.lines.length,re=U-1,K=0,de=p[K];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);var me=0;for(B=Math.min(this.lines.maxLength-1,U+C-1);B>=0;B--)if(de&&de.start>re+me){for(var Te=de.newLines.length-1;Te>=0;Te--)this.lines.set(B--,de.newLines[Te]);B++,H.push({index:re+1,amount:de.newLines.length}),me+=de.newLines.length,de=p[++K]}else this.lines.set(B,j[re--]);var Le=0;for(B=H.length-1;B>=0;B--)H[B].index+=Le,this.lines.onInsertEmitter.fire(H[B]),Le+=H[B].amount;var qe=Math.max(0,U+C-this.lines.maxLength);qe>0&&this.lines.onTrimEmitter.fire(qe)}},s.prototype.stringIndexToBufferIndex=function(o,l,f){for(f===void 0&&(f=!1);l;){var p=this.lines.get(o);if(!p)return[-1,-1];for(var C=f?p.getTrimmedLength():p.length,E=0;E<C;++E)if(p.get(E)[m.CHAR_DATA_WIDTH_INDEX]&&(l-=p.get(E)[m.CHAR_DATA_CHAR_INDEX].length||1),l<0)return[o,E];o++}return[o,0]},s.prototype.translateBufferLineToString=function(o,l,f,p){f===void 0&&(f=0);var C=this.lines.get(o);return C?C.translateToString(l,f,p):""},s.prototype.getWrappedRangeForLine=function(o){for(var l=o,f=o;l>0&&this.lines.get(l).isWrapped;)l--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:l,last:f}},s.prototype.setupTabStops=function(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.options.tabStopWidth)this.tabs[o]=!0},s.prototype.prevStop=function(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.nextStop=function(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.addMarker=function(o){var l=this,f=new y.Marker(o);return this.markers.push(f),f.register(this.lines.onTrim(function(p){f.line-=p,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(function(p){f.line>=p.index&&(f.line+=p.amount)})),f.register(this.lines.onDelete(function(p){f.line>=p.index&&f.line<p.index+p.amount&&f.dispose(),f.line>p.index&&(f.line-=p.amount)})),f.register(f.onDispose(function(){return l._removeMarker(f)})),f},s.prototype._removeMarker=function(o){this.markers.splice(this.markers.indexOf(o),1)},s.prototype.iterator=function(o,l,f,p,C){return new a(this,o,l,f,p,C)},s}();d.Buffer=v;var a=function(){function s(o,l,f,p,C,E){f===void 0&&(f=0),p===void 0&&(p=o.lines.length),C===void 0&&(C=0),E===void 0&&(E=0),this._buffer=o,this._trimRight=l,this._startIndex=f,this._endIndex=p,this._startOverscan=C,this._endOverscan=E,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return s.prototype.hasNext=function(){return this._current<this._endIndex},s.prototype.next=function(){var o=this._buffer.getWrappedRangeForLine(this._current);o.first<this._startIndex-this._startOverscan&&(o.first=this._startIndex-this._startOverscan),o.last>this._endIndex+this._endOverscan&&(o.last=this._endIndex+this._endOverscan),o.first=Math.max(o.first,0),o.last=Math.min(o.last,this._buffer.lines.length);for(var l="",f=o.first;f<=o.last;++f)l+=this._buffer.translateBufferLineToString(f,this._trimRight);return this._current=o.last+1,{range:o,content:l}},s}();d.BufferStringIterator=a},8437:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLine=d.DEFAULT_ATTR_DATA=void 0;var _=x(482),S=x(643),L=x(511),m=x(3734);d.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);var b=function(){function y(u,h,v){v===void 0&&(v=!1),this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);for(var a=h||L.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),s=0;s<u;++s)this.setCell(s,a);this.length=u}return y.prototype.get=function(u){var h=this._data[3*u+0],v=2097151&h;return[this._data[3*u+1],2097152&h?this._combined[u]:v?(0,_.stringFromCodePoint)(v):"",h>>22,2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):v]},y.prototype.set=function(u,h){this._data[3*u+1]=h[S.CHAR_DATA_ATTR_INDEX],h[S.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=h[1],this._data[3*u+0]=2097152|u|h[S.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=h[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[S.CHAR_DATA_WIDTH_INDEX]<<22},y.prototype.getWidth=function(u){return this._data[3*u+0]>>22},y.prototype.hasWidth=function(u){return 12582912&this._data[3*u+0]},y.prototype.getFg=function(u){return this._data[3*u+1]},y.prototype.getBg=function(u){return this._data[3*u+2]},y.prototype.hasContent=function(u){return 4194303&this._data[3*u+0]},y.prototype.getCodePoint=function(u){var h=this._data[3*u+0];return 2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&h},y.prototype.isCombined=function(u){return 2097152&this._data[3*u+0]},y.prototype.getString=function(u){var h=this._data[3*u+0];return 2097152&h?this._combined[u]:2097151&h?(0,_.stringFromCodePoint)(2097151&h):""},y.prototype.loadCell=function(u,h){var v=3*u;return h.content=this._data[v+0],h.fg=this._data[v+1],h.bg=this._data[v+2],2097152&h.content&&(h.combinedData=this._combined[u]),268435456&h.bg&&(h.extended=this._extendedAttrs[u]),h},y.prototype.setCell=function(u,h){2097152&h.content&&(this._combined[u]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=h.content,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg},y.prototype.setCellFromCodePoint=function(u,h,v,a,s,o){268435456&s&&(this._extendedAttrs[u]=o),this._data[3*u+0]=h|v<<22,this._data[3*u+1]=a,this._data[3*u+2]=s},y.prototype.addCodepointToCell=function(u,h){var v=this._data[3*u+0];2097152&v?this._combined[u]+=(0,_.stringFromCodePoint)(h):(2097151&v?(this._combined[u]=(0,_.stringFromCodePoint)(2097151&v)+(0,_.stringFromCodePoint)(h),v&=-2097152,v|=2097152):v=h|1<<22,this._data[3*u+0]=v)},y.prototype.insertCells=function(u,h,v,a){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs),h<this.length-u){for(var s=new L.CellData,o=this.length-u-h-1;o>=0;--o)this.setCell(u+h+o,this.loadCell(u+o,s));for(o=0;o<h;++o)this.setCell(u+o,v)}else for(o=u;o<this.length;++o)this.setCell(o,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs)},y.prototype.deleteCells=function(u,h,v,a){if(u%=this.length,h<this.length-u){for(var s=new L.CellData,o=0;o<this.length-u-h;++o)this.setCell(u+o,this.loadCell(u+h+o,s));for(o=this.length-h;o<this.length;++o)this.setCell(o,v)}else for(o=u;o<this.length;++o)this.setCell(o,v);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs)},y.prototype.replaceCells=function(u,h,v,a){for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new m.ExtendedAttrs);u<h&&u<this.length;)this.setCell(u++,v)},y.prototype.resize=function(u,h){if(u!==this.length){if(u>this.length){var v=new Uint32Array(3*u);this.length&&(3*u<this._data.length?v.set(this._data.subarray(0,3*u)):v.set(this._data)),this._data=v;for(var a=this.length;a<u;++a)this.setCell(a,h)}else if(u){(v=new Uint32Array(3*u)).set(this._data.subarray(0,3*u)),this._data=v;var s=Object.keys(this._combined);for(a=0;a<s.length;a++){var o=parseInt(s[a],10);o>=u&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},y.prototype.fill=function(u){this._combined={},this._extendedAttrs={};for(var h=0;h<this.length;++h)this.setCell(h,u)},y.prototype.copyFrom=function(u){for(var h in this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={},u._combined)this._combined[h]=u._combined[h];for(var h in this._extendedAttrs={},u._extendedAttrs)this._extendedAttrs[h]=u._extendedAttrs[h];this.isWrapped=u.isWrapped},y.prototype.clone=function(){var u=new y(0);for(var h in u._data=new Uint32Array(this._data),u.length=this.length,this._combined)u._combined[h]=this._combined[h];for(var h in this._extendedAttrs)u._extendedAttrs[h]=this._extendedAttrs[h];return u.isWrapped=this.isWrapped,u},y.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0},y.prototype.copyCellsFrom=function(u,h,v,a,s){var o=u._data;if(s)for(var l=a-1;l>=0;l--)for(var f=0;f<3;f++)this._data[3*(v+l)+f]=o[3*(h+l)+f];else for(l=0;l<a;l++)for(f=0;f<3;f++)this._data[3*(v+l)+f]=o[3*(h+l)+f];var p=Object.keys(u._combined);for(f=0;f<p.length;f++){var C=parseInt(p[f],10);C>=h&&(this._combined[C-h+v]=u._combined[C])}},y.prototype.translateToString=function(u,h,v){u===void 0&&(u=!1),h===void 0&&(h=0),v===void 0&&(v=this.length),u&&(v=Math.min(v,this.getTrimmedLength()));for(var a="";h<v;){var s=this._data[3*h+0],o=2097151&s;a+=2097152&s?this._combined[h]:o?(0,_.stringFromCodePoint)(o):S.WHITESPACE_CELL_CHAR,h+=s>>22||1}return a},y}();d.BufferLine=b},4841:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getRangeLength=void 0,d.getRangeLength=function(x,_){if(x.start.y>x.end.y)throw new Error("Buffer range end ("+x.end.x+", "+x.end.y+") cannot be before start ("+x.start.x+", "+x.start.y+")");return _*(x.end.y-x.start.y)+(x.end.x-x.start.x+1)}},4634:(Y,d)=>{function x(_,S,L){if(S===_.length-1)return _[S].getTrimmedLength();var m=!_[S].hasContent(L-1)&&_[S].getWidth(L-1)===1,b=_[S+1].getWidth(0)===2;return m&&b?L-1:L}Object.defineProperty(d,"__esModule",{value:!0}),d.getWrappedLineTrimmedLength=d.reflowSmallerGetNewLineLengths=d.reflowLargerApplyNewLayout=d.reflowLargerCreateNewLayout=d.reflowLargerGetLinesToRemove=void 0,d.reflowLargerGetLinesToRemove=function(_,S,L,m,b){for(var y=[],u=0;u<_.length-1;u++){var h=u,v=_.get(++h);if(v.isWrapped){for(var a=[_.get(u)];h<_.length&&v.isWrapped;)a.push(v),v=_.get(++h);if(m>=u&&m<h)u+=a.length-1;else{for(var s=0,o=x(a,s,S),l=1,f=0;l<a.length;){var p=x(a,l,S),C=p-f,E=L-o,O=Math.min(C,E);a[s].copyCellsFrom(a[l],f,o,O,!1),(o+=O)===L&&(s++,o=0),(f+=O)===p&&(l++,f=0),o===0&&s!==0&&a[s-1].getWidth(L-1)===2&&(a[s].copyCellsFrom(a[s-1],L-1,o++,1,!1),a[s-1].setCell(L-1,b))}a[s].replaceCells(o,L,b);for(var R=0,M=a.length-1;M>0&&(M>s||a[M].getTrimmedLength()===0);M--)R++;R>0&&(y.push(u+a.length-R),y.push(R)),u+=a.length-1}}}return y},d.reflowLargerCreateNewLayout=function(_,S){for(var L=[],m=0,b=S[m],y=0,u=0;u<_.length;u++)if(b===u){var h=S[++m];_.onDeleteEmitter.fire({index:u-y,amount:h}),u+=h-1,y+=h,b=S[++m]}else L.push(u);return{layout:L,countRemoved:y}},d.reflowLargerApplyNewLayout=function(_,S){for(var L=[],m=0;m<S.length;m++)L.push(_.get(S[m]));for(m=0;m<L.length;m++)_.set(m,L[m]);_.length=S.length},d.reflowSmallerGetNewLineLengths=function(_,S,L){for(var m=[],b=_.map(function(o,l){return x(_,l,S)}).reduce(function(o,l){return o+l}),y=0,u=0,h=0;h<b;){if(b-h<L){m.push(b-h);break}y+=L;var v=x(_,u,S);y>v&&(y-=v,u++);var a=_[u].getWidth(y-1)===2;a&&y--;var s=a?L-1:L;m.push(s),h+=s}return m},d.getWrappedLineTrimmedLength=x},5295:function(Y,d,x){var _,S=this&&this.__extends||(_=function(y,u){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var a in v)Object.prototype.hasOwnProperty.call(v,a)&&(h[a]=v[a])},_(y,u)},function(y,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function h(){this.constructor=y}_(y,u),y.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(d,"__esModule",{value:!0}),d.BufferSet=void 0;var L=x(9092),m=x(8460),b=function(y){function u(h,v){var a=y.call(this)||this;return a._optionsService=h,a._bufferService=v,a._onBufferActivate=a.register(new m.EventEmitter),a.reset(),a}return S(u,y),Object.defineProperty(u.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),u.prototype.reset=function(){this._normal=new L.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new L.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(u.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),u.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},u.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},u.prototype.resize=function(h,v){this._normal.resize(h,v),this._alt.resize(h,v)},u.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},u}(x(844).Disposable);d.BufferSet=b},511:function(Y,d,x){var _,S=this&&this.__extends||(_=function(u,h){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,a){v.__proto__=a}||function(v,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(v[s]=a[s])},_(u,h)},function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function v(){this.constructor=u}_(u,h),u.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(d,"__esModule",{value:!0}),d.CellData=void 0;var L=x(482),m=x(643),b=x(3734),y=function(u){function h(){var v=u!==null&&u.apply(this,arguments)||this;return v.content=0,v.fg=0,v.bg=0,v.extended=new b.ExtendedAttrs,v.combinedData="",v}return S(h,u),h.fromCharData=function(v){var a=new h;return a.setFromCharData(v),a},h.prototype.isCombined=function(){return 2097152&this.content},h.prototype.getWidth=function(){return this.content>>22},h.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,L.stringFromCodePoint)(2097151&this.content):""},h.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},h.prototype.setFromCharData=function(v){this.fg=v[m.CHAR_DATA_ATTR_INDEX],this.bg=0;var a=!1;if(v[m.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(v[m.CHAR_DATA_CHAR_INDEX].length===2){var s=v[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){var o=v[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(s-55296)+o-56320+65536|v[m.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=v[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[m.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=v[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[m.CHAR_DATA_WIDTH_INDEX]<<22)},h.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},h}(b.AttributeData);d.CellData=y},643:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WHITESPACE_CELL_CODE=d.WHITESPACE_CELL_WIDTH=d.WHITESPACE_CELL_CHAR=d.NULL_CELL_CODE=d.NULL_CELL_WIDTH=d.NULL_CELL_CHAR=d.CHAR_DATA_CODE_INDEX=d.CHAR_DATA_WIDTH_INDEX=d.CHAR_DATA_CHAR_INDEX=d.CHAR_DATA_ATTR_INDEX=d.DEFAULT_ATTR=d.DEFAULT_COLOR=void 0,d.DEFAULT_COLOR=256,d.DEFAULT_ATTR=256|d.DEFAULT_COLOR<<9,d.CHAR_DATA_ATTR_INDEX=0,d.CHAR_DATA_CHAR_INDEX=1,d.CHAR_DATA_WIDTH_INDEX=2,d.CHAR_DATA_CODE_INDEX=3,d.NULL_CELL_CHAR="",d.NULL_CELL_WIDTH=1,d.NULL_CELL_CODE=0,d.WHITESPACE_CELL_CHAR=" ",d.WHITESPACE_CELL_WIDTH=1,d.WHITESPACE_CELL_CODE=32},4863:function(Y,d,x){var _,S=this&&this.__extends||(_=function(b,y){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(u[v]=h[v])},_(b,y)},function(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function u(){this.constructor=b}_(b,y),b.prototype=y===null?Object.create(y):(u.prototype=y.prototype,new u)});Object.defineProperty(d,"__esModule",{value:!0}),d.Marker=void 0;var L=x(8460),m=function(b){function y(u){var h=b.call(this)||this;return h.line=u,h._id=y._nextId++,h.isDisposed=!1,h._onDispose=new L.EventEmitter,h}return S(y,b),Object.defineProperty(y.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),b.prototype.dispose.call(this))},y._nextId=1,y}(x(844).Disposable);d.Marker=m},7116:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_CHARSET=d.CHARSETS=void 0,d.CHARSETS={},d.DEFAULT_CHARSET=d.CHARSETS.B,d.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},d.CHARSETS.A={"#":"\xA3"},d.CHARSETS.B=void 0,d.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},d.CHARSETS.C=d.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},d.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},d.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},d.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},d.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},d.CHARSETS.E=d.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},d.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},d.CHARSETS.H=d.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},d.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(Y,d)=>{var x,_;Object.defineProperty(d,"__esModule",{value:!0}),d.C1=d.C0=void 0,(_=d.C0||(d.C0={})).NUL="\0",_.SOH="",_.STX="",_.ETX="",_.EOT="",_.ENQ="",_.ACK="",_.BEL="\x07",_.BS="\b",_.HT="	",_.LF=`
`,_.VT="\v",_.FF="\f",_.CR="\r",_.SO="",_.SI="",_.DLE="",_.DC1="",_.DC2="",_.DC3="",_.DC4="",_.NAK="",_.SYN="",_.ETB="",_.CAN="",_.EM="",_.SUB="",_.ESC="",_.FS="",_.GS="",_.RS="",_.US="",_.SP=" ",_.DEL="\x7F",(x=d.C1||(d.C1={})).PAD="\x80",x.HOP="\x81",x.BPH="\x82",x.NBH="\x83",x.IND="\x84",x.NEL="\x85",x.SSA="\x86",x.ESA="\x87",x.HTS="\x88",x.HTJ="\x89",x.VTS="\x8A",x.PLD="\x8B",x.PLU="\x8C",x.RI="\x8D",x.SS2="\x8E",x.SS3="\x8F",x.DCS="\x90",x.PU1="\x91",x.PU2="\x92",x.STS="\x93",x.CCH="\x94",x.MW="\x95",x.SPA="\x96",x.EPA="\x97",x.SOS="\x98",x.SGCI="\x99",x.SCI="\x9A",x.CSI="\x9B",x.ST="\x9C",x.OSC="\x9D",x.PM="\x9E",x.APC="\x9F"},7399:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.evaluateKeyboardEvent=void 0;var _=x(2584),S={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};d.evaluateKeyboardEvent=function(L,m,b,y){var u={type:0,cancel:!1,key:void 0},h=(L.shiftKey?1:0)|(L.altKey?2:0)|(L.ctrlKey?4:0)|(L.metaKey?8:0);switch(L.keyCode){case 0:L.key==="UIKeyInputUpArrow"?u.key=m?_.C0.ESC+"OA":_.C0.ESC+"[A":L.key==="UIKeyInputLeftArrow"?u.key=m?_.C0.ESC+"OD":_.C0.ESC+"[D":L.key==="UIKeyInputRightArrow"?u.key=m?_.C0.ESC+"OC":_.C0.ESC+"[C":L.key==="UIKeyInputDownArrow"&&(u.key=m?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(L.shiftKey){u.key=_.C0.BS;break}if(L.altKey){u.key=_.C0.ESC+_.C0.DEL;break}u.key=_.C0.DEL;break;case 9:if(L.shiftKey){u.key=_.C0.ESC+"[Z";break}u.key=_.C0.HT,u.cancel=!0;break;case 13:u.key=L.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,u.cancel=!0;break;case 27:u.key=_.C0.ESC,L.altKey&&(u.key=_.C0.ESC+_.C0.ESC),u.cancel=!0;break;case 37:if(L.metaKey)break;h?(u.key=_.C0.ESC+"[1;"+(h+1)+"D",u.key===_.C0.ESC+"[1;3D"&&(u.key=_.C0.ESC+(b?"b":"[1;5D"))):u.key=m?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(L.metaKey)break;h?(u.key=_.C0.ESC+"[1;"+(h+1)+"C",u.key===_.C0.ESC+"[1;3C"&&(u.key=_.C0.ESC+(b?"f":"[1;5C"))):u.key=m?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(L.metaKey)break;h?(u.key=_.C0.ESC+"[1;"+(h+1)+"A",b||u.key!==_.C0.ESC+"[1;3A"||(u.key=_.C0.ESC+"[1;5A")):u.key=m?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(L.metaKey)break;h?(u.key=_.C0.ESC+"[1;"+(h+1)+"B",b||u.key!==_.C0.ESC+"[1;3B"||(u.key=_.C0.ESC+"[1;5B")):u.key=m?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:L.shiftKey||L.ctrlKey||(u.key=_.C0.ESC+"[2~");break;case 46:u.key=h?_.C0.ESC+"[3;"+(h+1)+"~":_.C0.ESC+"[3~";break;case 36:u.key=h?_.C0.ESC+"[1;"+(h+1)+"H":m?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:u.key=h?_.C0.ESC+"[1;"+(h+1)+"F":m?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:L.shiftKey?u.type=2:u.key=_.C0.ESC+"[5~";break;case 34:L.shiftKey?u.type=3:u.key=_.C0.ESC+"[6~";break;case 112:u.key=h?_.C0.ESC+"[1;"+(h+1)+"P":_.C0.ESC+"OP";break;case 113:u.key=h?_.C0.ESC+"[1;"+(h+1)+"Q":_.C0.ESC+"OQ";break;case 114:u.key=h?_.C0.ESC+"[1;"+(h+1)+"R":_.C0.ESC+"OR";break;case 115:u.key=h?_.C0.ESC+"[1;"+(h+1)+"S":_.C0.ESC+"OS";break;case 116:u.key=h?_.C0.ESC+"[15;"+(h+1)+"~":_.C0.ESC+"[15~";break;case 117:u.key=h?_.C0.ESC+"[17;"+(h+1)+"~":_.C0.ESC+"[17~";break;case 118:u.key=h?_.C0.ESC+"[18;"+(h+1)+"~":_.C0.ESC+"[18~";break;case 119:u.key=h?_.C0.ESC+"[19;"+(h+1)+"~":_.C0.ESC+"[19~";break;case 120:u.key=h?_.C0.ESC+"[20;"+(h+1)+"~":_.C0.ESC+"[20~";break;case 121:u.key=h?_.C0.ESC+"[21;"+(h+1)+"~":_.C0.ESC+"[21~";break;case 122:u.key=h?_.C0.ESC+"[23;"+(h+1)+"~":_.C0.ESC+"[23~";break;case 123:u.key=h?_.C0.ESC+"[24;"+(h+1)+"~":_.C0.ESC+"[24~";break;default:if(!L.ctrlKey||L.shiftKey||L.altKey||L.metaKey)if(b&&!y||!L.altKey||L.metaKey)!b||L.altKey||L.ctrlKey||L.shiftKey||!L.metaKey?L.key&&!L.ctrlKey&&!L.altKey&&!L.metaKey&&L.keyCode>=48&&L.key.length===1?u.key=L.key:L.key&&L.ctrlKey&&L.key==="_"&&(u.key=_.C0.US):L.keyCode===65&&(u.type=1);else{var v=S[L.keyCode],a=v==null?void 0:v[L.shiftKey?1:0];if(a)u.key=_.C0.ESC+a;else if(L.keyCode>=65&&L.keyCode<=90){var s=L.ctrlKey?L.keyCode-64:L.keyCode+32;u.key=_.C0.ESC+String.fromCharCode(s)}}else L.keyCode>=65&&L.keyCode<=90?u.key=String.fromCharCode(L.keyCode-64):L.keyCode===32?u.key=_.C0.NUL:L.keyCode>=51&&L.keyCode<=55?u.key=String.fromCharCode(L.keyCode-51+27):L.keyCode===56?u.key=_.C0.DEL:L.keyCode===219?u.key=_.C0.ESC:L.keyCode===220?u.key=_.C0.FS:L.keyCode===221&&(u.key=_.C0.GS)}return u}},482:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Utf8ToUtf32=d.StringToUtf32=d.utf32ToString=d.stringFromCodePoint=void 0,d.stringFromCodePoint=function(S){return S>65535?(S-=65536,String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):String.fromCharCode(S)},d.utf32ToString=function(S,L,m){L===void 0&&(L=0),m===void 0&&(m=S.length);for(var b="",y=L;y<m;++y){var u=S[y];u>65535?(u-=65536,b+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):b+=String.fromCharCode(u)}return b};var x=function(){function S(){this._interim=0}return S.prototype.clear=function(){this._interim=0},S.prototype.decode=function(L,m){var b=L.length;if(!b)return 0;var y=0,u=0;this._interim&&(56320<=(a=L.charCodeAt(u++))&&a<=57343?m[y++]=1024*(this._interim-55296)+a-56320+65536:(m[y++]=this._interim,m[y++]=a),this._interim=0);for(var h=u;h<b;++h){var v=L.charCodeAt(h);if(55296<=v&&v<=56319){if(++h>=b)return this._interim=v,y;var a;56320<=(a=L.charCodeAt(h))&&a<=57343?m[y++]=1024*(v-55296)+a-56320+65536:(m[y++]=v,m[y++]=a)}else v!==65279&&(m[y++]=v)}return y},S}();d.StringToUtf32=x;var _=function(){function S(){this.interim=new Uint8Array(3)}return S.prototype.clear=function(){this.interim.fill(0)},S.prototype.decode=function(L,m){var b=L.length;if(!b)return 0;var y,u,h,v,a=0,s=0,o=0;if(this.interim[0]){var l=!1,f=this.interim[0];f&=(224&f)==192?31:(240&f)==224?15:7;for(var p=0,C=void 0;(C=63&this.interim[++p])&&p<4;)f<<=6,f|=C;for(var E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,O=E-p;o<O;){if(o>=b)return 0;if((192&(C=L[o++]))!=128){o--,l=!0;break}this.interim[p++]=C,f<<=6,f|=63&C}l||(E===2?f<128?o--:m[a++]=f:E===3?f<2048||f>=55296&&f<=57343||f===65279||(m[a++]=f):f<65536||f>1114111||(m[a++]=f)),this.interim.fill(0)}for(var R=b-4,M=o;M<b;){for(;!(!(M<R)||128&(y=L[M])||128&(u=L[M+1])||128&(h=L[M+2])||128&(v=L[M+3]));)m[a++]=y,m[a++]=u,m[a++]=h,m[a++]=v,M+=4;if((y=L[M++])<128)m[a++]=y;else if((224&y)==192){if(M>=b)return this.interim[0]=y,a;if((192&(u=L[M++]))!=128){M--;continue}if((s=(31&y)<<6|63&u)<128){M--;continue}m[a++]=s}else if((240&y)==224){if(M>=b)return this.interim[0]=y,a;if((192&(u=L[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=y,this.interim[1]=u,a;if((192&(h=L[M++]))!=128){M--;continue}if((s=(15&y)<<12|(63&u)<<6|63&h)<2048||s>=55296&&s<=57343||s===65279)continue;m[a++]=s}else if((248&y)==240){if(M>=b)return this.interim[0]=y,a;if((192&(u=L[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=y,this.interim[1]=u,a;if((192&(h=L[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=y,this.interim[1]=u,this.interim[2]=h,a;if((192&(v=L[M++]))!=128){M--;continue}if((s=(7&y)<<18|(63&u)<<12|(63&h)<<6|63&v)<65536||s>1114111)continue;m[a++]=s}}return a},S}();d.Utf8ToUtf32=_},225:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeV6=void 0;var _,S=x(8273),L=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],b=function(){function y(){if(this.version="6",!_){_=new Uint8Array(65536),(0,S.fill)(_,1),_[0]=0,(0,S.fill)(_,0,1,32),(0,S.fill)(_,0,127,160),(0,S.fill)(_,2,4352,4448),_[9001]=2,_[9002]=2,(0,S.fill)(_,2,11904,42192),_[12351]=1,(0,S.fill)(_,2,44032,55204),(0,S.fill)(_,2,63744,64256),(0,S.fill)(_,2,65040,65050),(0,S.fill)(_,2,65072,65136),(0,S.fill)(_,2,65280,65377),(0,S.fill)(_,2,65504,65511);for(var u=0;u<L.length;++u)(0,S.fill)(_,0,L[u][0],L[u][1]+1)}}return y.prototype.wcwidth=function(u){return u<32?0:u<127?1:u<65536?_[u]:function(h,v){var a,s=0,o=v.length-1;if(h<v[0][0]||h>v[o][1])return!1;for(;o>=s;)if(h>v[a=s+o>>1][1])s=a+1;else{if(!(h<v[a][0]))return!0;o=a-1}return!1}(u,m)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1},y}();d.UnicodeV6=b},5981:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WriteBuffer=void 0;var x=typeof queueMicrotask=="undefined"?function(S){Promise.resolve().then(S)}:queueMicrotask,_=function(){function S(L){this._action=L,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return S.prototype.writeSync=function(L,m){if(m!==void 0&&this._syncCalls>m)this._syncCalls=0;else if(this._pendingData+=L.length,this._writeBuffer.push(L),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);var y=this._callbacks.shift();y&&y()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},S.prototype.write=function(L,m){var b=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return b._innerWrite()})),this._pendingData+=L.length,this._writeBuffer.push(L),this._callbacks.push(m)},S.prototype._innerWrite=function(L,m){var b=this;L===void 0&&(L=0),m===void 0&&(m=!0);for(var y=L||Date.now();this._writeBuffer.length>this._bufferOffset;){var u=this._writeBuffer[this._bufferOffset],h=this._action(u,m);if(h)return void h.catch(function(a){return x(function(){throw a}),Promise.resolve(!1)}).then(function(a){return Date.now()-y>=12?setTimeout(function(){return b._innerWrite(0,a)}):b._innerWrite(y,a)});var v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return b._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},S}();d.WriteBuffer=_},5941:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.toRgbString=d.parseColor=void 0;var x=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function S(L,m){var b=L.toString(16),y=b.length<2?"0"+b:b;switch(m){case 4:return b[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}d.parseColor=function(L){if(L){var m=L.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);var b=x.exec(m);if(b){var y=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/y*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/y*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/y*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),_.exec(m)&&[3,6,9,12].includes(m.length))){for(var u=m.length/3,h=[0,0,0],v=0;v<3;++v){var a=parseInt(m.slice(u*v,u*v+u),16);h[v]=u===1?a<<4:u===2?a:u===3?a>>4:a>>8}return h}}},d.toRgbString=function(L,m){m===void 0&&(m=16);var b=L[0],y=L[1],u=L[2];return"rgb:"+S(b,m)+"/"+S(y,m)+"/"+S(u,m)}},5770:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PAYLOAD_LIMIT=void 0,d.PAYLOAD_LIMIT=1e7},6351:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DcsHandler=d.DcsParser=void 0;var _=x(482),S=x(8742),L=x(5770),m=[],b=function(){function h(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return h.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=m},h.prototype.registerHandler=function(v,a){this._handlers[v]===void 0&&(this._handlers[v]=[]);var s=this._handlers[v];return s.push(a),{dispose:function(){var o=s.indexOf(a);o!==-1&&s.splice(o,1)}}},h.prototype.clearHandler=function(v){this._handlers[v]&&delete this._handlers[v]},h.prototype.setHandlerFallback=function(v){this._handlerFb=v},h.prototype.reset=function(){if(this._active.length)for(var v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0},h.prototype.hook=function(v,a){if(this.reset(),this._ident=v,this._active=this._handlers[v]||m,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].hook(a);else this._handlerFb(this._ident,"HOOK",a)},h.prototype.put=function(v,a,s){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(v,a,s);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(v,a,s))},h.prototype.unhook=function(v,a){if(a===void 0&&(a=!0),this._active.length){var s=!1,o=this._active.length-1,l=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=a,l=this._stack.fallThrough,this._stack.paused=!1),!l&&s===!1){for(;o>=0&&(s=this._active[o].unhook(v))!==!0;o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if((s=this._active[o].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",v);this._active=m,this._ident=0},h}();d.DcsParser=b;var y=new S.Params;y.addParam(0);var u=function(){function h(v){this._handler=v,this._data="",this._params=y,this._hitLimit=!1}return h.prototype.hook=function(v){this._params=v.length>1||v.params[0]?v.clone():y,this._data="",this._hitLimit=!1},h.prototype.put=function(v,a,s){this._hitLimit||(this._data+=(0,_.utf32ToString)(v,a,s),this._data.length>L.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},h.prototype.unhook=function(v){var a=this,s=!1;if(this._hitLimit)s=!1;else if(v&&(s=this._handler(this._data,this._params))instanceof Promise)return s.then(function(o){return a._params=y,a._data="",a._hitLimit=!1,o});return this._params=y,this._data="",this._hitLimit=!1,s},h}();d.DcsHandler=u},2015:function(Y,d,x){var _,S=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)});Object.defineProperty(d,"__esModule",{value:!0}),d.EscapeSequenceParser=d.VT500_TRANSITION_TABLE=d.TransitionTable=void 0;var L=x(844),m=x(8273),b=x(8742),y=x(6242),u=x(6351),h=function(){function s(o){this.table=new Uint8Array(o)}return s.prototype.setDefault=function(o,l){(0,m.fill)(this.table,o<<4|l)},s.prototype.add=function(o,l,f,p){this.table[l<<8|o]=f<<4|p},s.prototype.addMany=function(o,l,f,p){for(var C=0;C<o.length;C++)this.table[l<<8|o[C]]=f<<4|p},s}();d.TransitionTable=h;var v=160;d.VT500_TRANSITION_TABLE=function(){var s=new h(4095),o=Array.apply(null,Array(256)).map(function(O,R){return R}),l=function(O,R){return o.slice(O,R)},f=l(32,127),p=l(0,24);p.push(25),p.push.apply(p,l(28,32));var C,E=l(0,14);for(C in s.setDefault(1,0),s.addMany(f,0,2,0),E)s.addMany([24,26,153,154],C,3,0),s.addMany(l(128,144),C,3,0),s.addMany(l(144,152),C,3,0),s.add(156,C,0,0),s.add(27,C,11,1),s.add(157,C,4,8),s.addMany([152,158,159],C,0,7),s.add(155,C,11,3),s.add(144,C,11,9);return s.addMany(p,0,3,0),s.addMany(p,1,3,1),s.add(127,1,0,1),s.addMany(p,8,0,8),s.addMany(p,3,3,3),s.add(127,3,0,3),s.addMany(p,4,3,4),s.add(127,4,0,4),s.addMany(p,6,3,6),s.addMany(p,5,3,5),s.add(127,5,0,5),s.addMany(p,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(f,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(l(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(f,7,0,7),s.addMany(p,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(l(64,127),3,7,0),s.addMany(l(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(l(48,60),4,8,4),s.addMany(l(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(l(32,64),6,0,6),s.add(127,6,0,6),s.addMany(l(64,127),6,0,0),s.addMany(l(32,48),3,9,5),s.addMany(l(32,48),5,9,5),s.addMany(l(48,64),5,0,6),s.addMany(l(64,127),5,7,0),s.addMany(l(32,48),4,9,5),s.addMany(l(32,48),1,9,2),s.addMany(l(32,48),2,9,2),s.addMany(l(48,127),2,10,0),s.addMany(l(48,80),1,10,0),s.addMany(l(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(l(96,127),1,10,0),s.add(80,1,11,9),s.addMany(p,9,0,9),s.add(127,9,0,9),s.addMany(l(28,32),9,0,9),s.addMany(l(32,48),9,9,12),s.addMany(l(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(p,11,0,11),s.addMany(l(32,128),11,0,11),s.addMany(l(28,32),11,0,11),s.addMany(p,10,0,10),s.add(127,10,0,10),s.addMany(l(28,32),10,0,10),s.addMany(l(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(l(32,48),10,9,12),s.addMany(p,12,0,12),s.add(127,12,0,12),s.addMany(l(28,32),12,0,12),s.addMany(l(32,48),12,9,12),s.addMany(l(48,64),12,0,11),s.addMany(l(64,127),12,12,13),s.addMany(l(64,127),10,12,13),s.addMany(l(64,127),9,12,13),s.addMany(p,13,13,13),s.addMany(f,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(v,0,2,0),s.add(v,8,5,8),s.add(v,6,0,6),s.add(v,11,0,11),s.add(v,13,13,13),s}();var a=function(s){function o(l){l===void 0&&(l=d.VT500_TRANSITION_TABLE);var f=s.call(this)||this;return f._transitions=l,f._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},f.initialState=0,f.currentState=f.initialState,f._params=new b.Params,f._params.addParam(0),f._collect=0,f.precedingCodepoint=0,f._printHandlerFb=function(p,C,E){},f._executeHandlerFb=function(p){},f._csiHandlerFb=function(p,C){},f._escHandlerFb=function(p){},f._errorHandlerFb=function(p){return p},f._printHandler=f._printHandlerFb,f._executeHandlers=Object.create(null),f._csiHandlers=Object.create(null),f._escHandlers=Object.create(null),f._oscParser=new y.OscParser,f._dcsParser=new u.DcsParser,f._errorHandler=f._errorHandlerFb,f.registerEscHandler({final:"\\"},function(){return!0}),f}return S(o,s),o.prototype._identifier=function(l,f){f===void 0&&(f=[64,126]);var p=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if((p=l.prefix.charCodeAt(0))&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var C=0;C<l.intermediates.length;++C){var E=l.intermediates.charCodeAt(C);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=E}}if(l.final.length!==1)throw new Error("final must be a single byte");var O=l.final.charCodeAt(0);if(f[0]>O||O>f[1])throw new Error("final must be in range "+f[0]+" .. "+f[1]);return(p<<=8)|O},o.prototype.identToString=function(l){for(var f=[];l;)f.push(String.fromCharCode(255&l)),l>>=8;return f.reverse().join("")},o.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},o.prototype.setPrintHandler=function(l){this._printHandler=l},o.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},o.prototype.registerEscHandler=function(l,f){var p=this._identifier(l,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);var C=this._escHandlers[p];return C.push(f),{dispose:function(){var E=C.indexOf(f);E!==-1&&C.splice(E,1)}}},o.prototype.clearEscHandler=function(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]},o.prototype.setEscHandlerFallback=function(l){this._escHandlerFb=l},o.prototype.setExecuteHandler=function(l,f){this._executeHandlers[l.charCodeAt(0)]=f},o.prototype.clearExecuteHandler=function(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]},o.prototype.setExecuteHandlerFallback=function(l){this._executeHandlerFb=l},o.prototype.registerCsiHandler=function(l,f){var p=this._identifier(l);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);var C=this._csiHandlers[p];return C.push(f),{dispose:function(){var E=C.indexOf(f);E!==-1&&C.splice(E,1)}}},o.prototype.clearCsiHandler=function(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]},o.prototype.setCsiHandlerFallback=function(l){this._csiHandlerFb=l},o.prototype.registerDcsHandler=function(l,f){return this._dcsParser.registerHandler(this._identifier(l),f)},o.prototype.clearDcsHandler=function(l){this._dcsParser.clearHandler(this._identifier(l))},o.prototype.setDcsHandlerFallback=function(l){this._dcsParser.setHandlerFallback(l)},o.prototype.registerOscHandler=function(l,f){return this._oscParser.registerHandler(l,f)},o.prototype.clearOscHandler=function(l){this._oscParser.clearHandler(l)},o.prototype.setOscHandlerFallback=function(l){this._oscParser.setHandlerFallback(l)},o.prototype.setErrorHandler=function(l){this._errorHandler=l},o.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},o.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},o.prototype._preserveStack=function(l,f,p,C,E){this._parseStack.state=l,this._parseStack.handlers=f,this._parseStack.handlerPos=p,this._parseStack.transition=C,this._parseStack.chunkPos=E},o.prototype.parse=function(l,f,p){var C,E=0,O=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var M=this._parseStack.handlers,A=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&A>-1){for(;A>=0&&(C=M[A](this._params))!==!0;A--)if(C instanceof Promise)return this._parseStack.handlerPos=A,C}this._parseStack.handlers=[];break;case 4:if(p===!1&&A>-1){for(;A>=0&&(C=M[A]())!==!0;A--)if(C instanceof Promise)return this._parseStack.handlerPos=A,C}this._parseStack.handlers=[];break;case 6:if(E=l[this._parseStack.chunkPos],C=this._dcsParser.unhook(E!==24&&E!==26,p))return C;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=l[this._parseStack.chunkPos],C=this._oscParser.end(E!==24&&E!==26,p))return C;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var D=R;D<f;++D){switch(E=l[D],(O=this._transitions.table[this.currentState<<8|(E<160?E:v)])>>4){case 2:for(var P=D+1;;++P){if(P>=f||(E=l[P])<32||E>126&&E<v){this._printHandler(l,D,P),D=P-1;break}if(++P>=f||(E=l[P])<32||E>126&&E<v){this._printHandler(l,D,P),D=P-1;break}if(++P>=f||(E=l[P])<32||E>126&&E<v){this._printHandler(l,D,P),D=P-1;break}if(++P>=f||(E=l[P])<32||E>126&&E<v){this._printHandler(l,D,P),D=P-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:D,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var z=(M=this._csiHandlers[this._collect<<8|E])?M.length-1:-1;z>=0&&(C=M[z](this._params))!==!0;z--)if(C instanceof Promise)return this._preserveStack(3,M,z,O,D),C;z<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingCodepoint=0;break;case 8:do switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}while(++D<f&&(E=l[D])>47&&E<60);D--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:for(var W=this._escHandlers[this._collect<<8|E],B=W?W.length-1:-1;B>=0&&(C=W[B]())!==!0;B--)if(C instanceof Promise)return this._preserveStack(4,W,B,O,D),C;B<0&&this._escHandlerFb(this._collect<<8|E),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(var I=D+1;;++I)if(I>=f||(E=l[I])===24||E===26||E===27||E>127&&E<v){this._dcsParser.put(l,D,I),D=I-1;break}break;case 14:if(C=this._dcsParser.unhook(E!==24&&E!==26))return this._preserveStack(6,[],0,O,D),C;E===27&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var q=D+1;;q++)if(q>=f||(E=l[q])<32||E>127&&E<v){this._oscParser.put(l,D,q),D=q-1;break}break;case 6:if(C=this._oscParser.end(E!==24&&E!==26))return this._preserveStack(5,[],0,O,D),C;E===27&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&O}},o}(L.Disposable);d.EscapeSequenceParser=a},6242:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OscHandler=d.OscParser=void 0;var _=x(5770),S=x(482),L=[],m=function(){function y(){this._state=0,this._active=L,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return y.prototype.registerHandler=function(u,h){this._handlers[u]===void 0&&(this._handlers[u]=[]);var v=this._handlers[u];return v.push(h),{dispose:function(){var a=v.indexOf(h);a!==-1&&v.splice(a,1)}}},y.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},y.prototype.setHandlerFallback=function(u){this._handlerFb=u},y.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=L},y.prototype.reset=function(){if(this._state===2)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=L,this._id=-1,this._state=0},y.prototype._start=function(){if(this._active=this._handlers[this._id]||L,this._active.length)for(var u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")},y.prototype._put=function(u,h,v){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(u,h,v);else this._handlerFb(this._id,"PUT",(0,S.utf32ToString)(u,h,v))},y.prototype.start=function(){this.reset(),this._state=1},y.prototype.put=function(u,h,v){if(this._state!==3){if(this._state===1)for(;h<v;){var a=u[h++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&v-h>0&&this._put(u,h,v)}},y.prototype.end=function(u,h){if(h===void 0&&(h=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var v=!1,a=this._active.length-1,s=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,v=h,s=this._stack.fallThrough,this._stack.paused=!1),!s&&v===!1){for(;a>=0&&(v=this._active[a].end(u))!==!0;a--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,v;a--}for(;a>=0;a--)if((v=this._active[a].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",u);this._active=L,this._id=-1,this._state=0}},y}();d.OscParser=m;var b=function(){function y(u){this._handler=u,this._data="",this._hitLimit=!1}return y.prototype.start=function(){this._data="",this._hitLimit=!1},y.prototype.put=function(u,h,v){this._hitLimit||(this._data+=(0,S.utf32ToString)(u,h,v),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},y.prototype.end=function(u){var h=this,v=!1;if(this._hitLimit)v=!1;else if(u&&(v=this._handler(this._data))instanceof Promise)return v.then(function(a){return h._data="",h._hitLimit=!1,a});return this._data="",this._hitLimit=!1,v},y}();d.OscHandler=b},8742:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Params=void 0;var x=2147483647,_=function(){function S(L,m){if(L===void 0&&(L=32),m===void 0&&(m=32),this.maxLength=L,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(L),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(L),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return S.fromArray=function(L){var m=new S;if(!L.length)return m;for(var b=Array.isArray(L[0])?1:0;b<L.length;++b){var y=L[b];if(Array.isArray(y))for(var u=0;u<y.length;++u)m.addSubParam(y[u]);else m.addParam(y)}return m},S.prototype.clone=function(){var L=new S(this.maxLength,this.maxSubParamsLength);return L.params.set(this.params),L.length=this.length,L._subParams.set(this._subParams),L._subParamsLength=this._subParamsLength,L._subParamsIdx.set(this._subParamsIdx),L._rejectDigits=this._rejectDigits,L._rejectSubDigits=this._rejectSubDigits,L._digitIsSub=this._digitIsSub,L},S.prototype.toArray=function(){for(var L=[],m=0;m<this.length;++m){L.push(this.params[m]);var b=this._subParamsIdx[m]>>8,y=255&this._subParamsIdx[m];y-b>0&&L.push(Array.prototype.slice.call(this._subParams,b,y))}return L},S.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},S.prototype.addParam=function(L){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(L<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=L>x?x:L}},S.prototype.addSubParam=function(L){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(L<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=L>x?x:L,this._subParamsIdx[this.length-1]++}},S.prototype.hasSubParams=function(L){return(255&this._subParamsIdx[L])-(this._subParamsIdx[L]>>8)>0},S.prototype.getSubParams=function(L){var m=this._subParamsIdx[L]>>8,b=255&this._subParamsIdx[L];return b-m>0?this._subParams.subarray(m,b):null},S.prototype.getSubParamsAll=function(){for(var L={},m=0;m<this.length;++m){var b=this._subParamsIdx[m]>>8,y=255&this._subParamsIdx[m];y-b>0&&(L[m]=this._subParams.slice(b,y))}return L},S.prototype.addDigit=function(L){var m;if(!(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var b=this._digitIsSub?this._subParams:this.params,y=b[m-1];b[m-1]=~y?Math.min(10*y+L,x):L}},S}();d.Params=_},5741:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AddonManager=void 0;var x=function(){function _(){this._addons=[]}return _.prototype.dispose=function(){for(var S=this._addons.length-1;S>=0;S--)this._addons[S].instance.dispose()},_.prototype.loadAddon=function(S,L){var m=this,b={instance:L,dispose:L.dispose,isDisposed:!1};this._addons.push(b),L.dispose=function(){return m._wrappedAddonDispose(b)},L.activate(S)},_.prototype._wrappedAddonDispose=function(S){if(!S.isDisposed){for(var L=-1,m=0;m<this._addons.length;m++)if(this._addons[m]===S){L=m;break}if(L===-1)throw new Error("Could not dispose an addon that has not been loaded");S.isDisposed=!0,S.dispose.apply(S.instance),this._addons.splice(L,1)}},_}();d.AddonManager=x},8771:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferApiView=void 0;var _=x(3785),S=x(511),L=function(){function m(b,y){this._buffer=b,this.type=y}return m.prototype.init=function(b){return this._buffer=b,this},Object.defineProperty(m.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),m.prototype.getLine=function(b){var y=this._buffer.lines.get(b);if(y)return new _.BufferLineApiView(y)},m.prototype.getNullCell=function(){return new S.CellData},m}();d.BufferApiView=L},3785:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLineApiView=void 0;var _=x(511),S=function(){function L(m){this._line=m}return Object.defineProperty(L.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),L.prototype.getCell=function(m,b){if(!(m<0||m>=this._line.length))return b?(this._line.loadCell(m,b),b):this._line.loadCell(m,new _.CellData)},L.prototype.translateToString=function(m,b,y){return this._line.translateToString(m,b,y)},L}();d.BufferLineApiView=S},8285:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferNamespaceApi=void 0;var _=x(8771),S=x(8460),L=function(){function m(b){var y=this;this._core=b,this._onBufferChange=new S.EventEmitter,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return y._onBufferChange.fire(y.active)})}return Object.defineProperty(m.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),m}();d.BufferNamespaceApi=L},7975:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParserApi=void 0;var x=function(){function _(S){this._core=S}return _.prototype.registerCsiHandler=function(S,L){return this._core.registerCsiHandler(S,function(m){return L(m.toArray())})},_.prototype.addCsiHandler=function(S,L){return this.registerCsiHandler(S,L)},_.prototype.registerDcsHandler=function(S,L){return this._core.registerDcsHandler(S,function(m,b){return L(m,b.toArray())})},_.prototype.addDcsHandler=function(S,L){return this.registerDcsHandler(S,L)},_.prototype.registerEscHandler=function(S,L){return this._core.registerEscHandler(S,L)},_.prototype.addEscHandler=function(S,L){return this.registerEscHandler(S,L)},_.prototype.registerOscHandler=function(S,L){return this._core.registerOscHandler(S,L)},_.prototype.addOscHandler=function(S,L){return this.registerOscHandler(S,L)},_}();d.ParserApi=x},7090:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeApi=void 0;var x=function(){function _(S){this._core=S}return _.prototype.register=function(S){this._core.unicodeService.register(S)},Object.defineProperty(_.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(S){this._core.unicodeService.activeVersion=S},enumerable:!1,configurable:!0}),_}();d.UnicodeApi=x},744:function(Y,d,x){var _,S=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),L=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},m=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.BufferService=d.MINIMUM_ROWS=d.MINIMUM_COLS=void 0;var b=x(2585),y=x(5295),u=x(8460),h=x(844);d.MINIMUM_COLS=2,d.MINIMUM_ROWS=1;var v=function(a){function s(o){var l=a.call(this)||this;return l._optionsService=o,l.isUserScrolling=!1,l._onResize=new u.EventEmitter,l._onScroll=new u.EventEmitter,l.cols=Math.max(o.options.cols||0,d.MINIMUM_COLS),l.rows=Math.max(o.options.rows||0,d.MINIMUM_ROWS),l.buffers=new y.BufferSet(o,l),l}return S(s,a),Object.defineProperty(s.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),s.prototype.dispose=function(){a.prototype.dispose.call(this),this.buffers.dispose()},s.prototype.resize=function(o,l){this.cols=o,this.rows=l,this.buffers.resize(o,l),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:o,rows:l})},s.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},s.prototype.scroll=function(o,l){l===void 0&&(l=!1);var f,p=this.buffer;(f=this._cachedBlankLine)&&f.length===this.cols&&f.getFg(0)===o.fg&&f.getBg(0)===o.bg||(f=p.getBlankLine(o,l),this._cachedBlankLine=f),f.isWrapped=l;var C=p.ybase+p.scrollTop,E=p.ybase+p.scrollBottom;if(p.scrollTop===0){var O=p.lines.isFull;E===p.lines.length-1?O?p.lines.recycle().copyFrom(f):p.lines.push(f.clone()):p.lines.splice(E+1,0,f.clone()),O?this.isUserScrolling&&(p.ydisp=Math.max(p.ydisp-1,0)):(p.ybase++,this.isUserScrolling||p.ydisp++)}else{var R=E-C+1;p.lines.shiftElements(C+1,R-1,-1),p.lines.set(E,f.clone())}this.isUserScrolling||(p.ydisp=p.ybase),this._onScroll.fire(p.ydisp)},s.prototype.scrollLines=function(o,l,f){var p=this.buffer;if(o<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else o+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);var C=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+o,p.ybase),0),C!==p.ydisp&&(l||this._onScroll.fire(p.ydisp))},s.prototype.scrollPages=function(o){this.scrollLines(o*(this.rows-1))},s.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},s.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},s.prototype.scrollToLine=function(o){var l=o-this.buffer.ydisp;l!==0&&this.scrollLines(l)},L([m(0,b.IOptionsService)],s)}(h.Disposable);d.BufferService=v},7994:(Y,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CharsetService=void 0;var x=function(){function _(){this.glevel=0,this._charsets=[]}return _.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},_.prototype.setgLevel=function(S){this.glevel=S,this.charset=this._charsets[S]},_.prototype.setgCharset=function(S,L){this._charsets[S]=L,this.glevel===S&&(this.charset=L)},_}();d.CharsetService=x},1753:function(Y,d,x){var _=this&&this.__decorate||function(a,s,o,l){var f,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,s,o,l);else for(var E=a.length-1;E>=0;E--)(f=a[E])&&(C=(p<3?f(C):p>3?f(s,o,C):f(s,o))||C);return p>3&&C&&Object.defineProperty(s,o,C),C},S=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreMouseService=void 0;var L=x(2585),m=x(8460),b={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(a){return a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)}},VT200:{events:19,restrict:function(a){return a.action!==32}},DRAG:{events:23,restrict:function(a){return a.action!==32||a.button!==3}},ANY:{events:31,restrict:function(a){return!0}}};function y(a,s){var o=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(o|=64,o|=a.action):(o|=3&a.button,4&a.button&&(o|=64),8&a.button&&(o|=128),a.action===32?o|=32:a.action!==0||s||(o|=3)),o}var u=String.fromCharCode,h={DEFAULT:function(a){var s=[y(a,!1)+32,a.col+32,a.row+32];return s[0]>255||s[1]>255||s[2]>255?"":"[M"+u(s[0])+u(s[1])+u(s[2])},SGR:function(a){var s=a.action===0&&a.button!==4?"m":"M";return"[<"+y(a,!0)+";"+a.col+";"+a.row+s}},v=function(){function a(s,o){this._bufferService=s,this._coreService=o,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new m.EventEmitter,this._lastEvent=null;for(var l=0,f=Object.keys(b);l<f.length;l++){var p=f[l];this.addProtocol(p,b[p])}for(var C=0,E=Object.keys(h);C<E.length;C++){var O=E[C];this.addEncoding(O,h[O])}this.reset()}return a.prototype.addProtocol=function(s,o){this._protocols[s]=o},a.prototype.addEncoding=function(s,o){this._encodings[s]=o},Object.defineProperty(a.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(s){if(!this._protocols[s])throw new Error('unknown protocol "'+s+'"');this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(s){if(!this._encodings[s])throw new Error('unknown encoding "'+s+'"');this._activeEncoding=s},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(a.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),a.prototype.triggerMouseEvent=function(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,s))||!this._protocols[this._activeProtocol].restrict(s))return!1;var o=this._encodings[this._activeEncoding](s);return o&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(o):this._coreService.triggerDataEvent(o,!0)),this._lastEvent=s,!0},a.prototype.explainEvents=function(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}},a.prototype._compareEvents=function(s,o){return s.col===o.col&&s.row===o.row&&s.button===o.button&&s.action===o.action&&s.ctrl===o.ctrl&&s.alt===o.alt&&s.shift===o.shift},_([S(0,L.IBufferService),S(1,L.ICoreService)],a)}();d.CoreMouseService=v},6975:function(Y,d,x){var _,S=this&&this.__extends||(_=function(o,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(f[C]=p[C])},_(o,l)},function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function f(){this.constructor=o}_(o,l),o.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}),L=this&&this.__decorate||function(o,l,f,p){var C,E=arguments.length,O=E<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,f):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(o,l,f,p);else for(var R=o.length-1;R>=0;R--)(C=o[R])&&(O=(E<3?C(O):E>3?C(l,f,O):C(l,f))||O);return E>3&&O&&Object.defineProperty(l,f,O),O},m=this&&this.__param||function(o,l){return function(f,p){l(f,p,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreService=void 0;var b=x(2585),y=x(8460),u=x(1439),h=x(844),v=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),s=function(o){function l(f,p,C,E){var O=o.call(this)||this;return O._bufferService=p,O._logService=C,O._optionsService=E,O.isCursorInitialized=!1,O.isCursorHidden=!1,O._onData=O.register(new y.EventEmitter),O._onUserInput=O.register(new y.EventEmitter),O._onBinary=O.register(new y.EventEmitter),O._scrollToBottom=f,O.register({dispose:function(){return O._scrollToBottom=void 0}}),O.modes=(0,u.clone)(v),O.decPrivateModes=(0,u.clone)(a),O}return S(l,o),Object.defineProperty(l.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.modes=(0,u.clone)(v),this.decPrivateModes=(0,u.clone)(a)},l.prototype.triggerDataEvent=function(f,p){if(p===void 0&&(p=!1),!this._optionsService.options.disableStdin){var C=this._bufferService.buffer;C.ybase!==C.ydisp&&this._scrollToBottom(),p&&this._onUserInput.fire(),this._logService.debug('sending data "'+f+'"',function(){return f.split("").map(function(E){return E.charCodeAt(0)})}),this._onData.fire(f)}},l.prototype.triggerBinaryEvent=function(f){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+f+'"',function(){return f.split("").map(function(p){return p.charCodeAt(0)})}),this._onBinary.fire(f))},L([m(1,b.IBufferService),m(2,b.ILogService),m(3,b.IOptionsService)],l)}(h.Disposable);d.CoreService=s},3730:function(Y,d,x){var _=this&&this.__decorate||function(b,y,u,h){var v,a=arguments.length,s=a<3?y:h===null?h=Object.getOwnPropertyDescriptor(y,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(b,y,u,h);else for(var o=b.length-1;o>=0;o--)(v=b[o])&&(s=(a<3?v(s):a>3?v(y,u,s):v(y,u))||s);return a>3&&s&&Object.defineProperty(y,u,s),s},S=this&&this.__param||function(b,y){return function(u,h){y(u,h,b)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DirtyRowService=void 0;var L=x(2585),m=function(){function b(y){this._bufferService=y,this.clearRange()}return Object.defineProperty(b.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),b.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},b.prototype.markDirty=function(y){y<this._start?this._start=y:y>this._end&&(this._end=y)},b.prototype.markRangeDirty=function(y,u){if(y>u){var h=y;y=u,u=h}y<this._start&&(this._start=y),u>this._end&&(this._end=u)},b.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},_([S(0,L.IBufferService)],b)}();d.DirtyRowService=m},4348:function(Y,d,x){var _=this&&this.__spreadArray||function(y,u,h){if(h||arguments.length===2)for(var v,a=0,s=u.length;a<s;a++)!v&&a in u||(v||(v=Array.prototype.slice.call(u,0,a)),v[a]=u[a]);return y.concat(v||Array.prototype.slice.call(u))};Object.defineProperty(d,"__esModule",{value:!0}),d.InstantiationService=d.ServiceCollection=void 0;var S=x(2585),L=x(8343),m=function(){function y(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];this._entries=new Map;for(var v=0,a=u;v<a.length;v++){var s=a[v],o=s[0],l=s[1];this.set(o,l)}}return y.prototype.set=function(u,h){var v=this._entries.get(u);return this._entries.set(u,h),v},y.prototype.forEach=function(u){this._entries.forEach(function(h,v){return u(v,h)})},y.prototype.has=function(u){return this._entries.has(u)},y.prototype.get=function(u){return this._entries.get(u)},y}();d.ServiceCollection=m;var b=function(){function y(){this._services=new m,this._services.set(S.IInstantiationService,this)}return y.prototype.setService=function(u,h){this._services.set(u,h)},y.prototype.getService=function(u){return this._services.get(u)},y.prototype.createInstance=function(u){for(var h=[],v=1;v<arguments.length;v++)h[v-1]=arguments[v];for(var a=(0,L.getServiceDependencies)(u).sort(function(E,O){return E.index-O.index}),s=[],o=0,l=a;o<l.length;o++){var f=l[o],p=this._services.get(f.id);if(!p)throw new Error("[createInstance] "+u.name+" depends on UNKNOWN service "+f.id+".");s.push(p)}var C=a.length>0?a[0].index:h.length;if(h.length!==C)throw new Error("[createInstance] First service dependency of "+u.name+" at position "+(C+1)+" conflicts with "+h.length+" static arguments");return new(u.bind.apply(u,_([void 0],_(_([],h,!0),s,!0),!1)))},y}();d.InstantiationService=b},7866:function(Y,d,x){var _=this&&this.__decorate||function(u,h,v,a){var s,o=arguments.length,l=o<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,v):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,h,v,a);else for(var f=u.length-1;f>=0;f--)(s=u[f])&&(l=(o<3?s(l):o>3?s(h,v,l):s(h,v))||l);return o>3&&l&&Object.defineProperty(h,v,l),l},S=this&&this.__param||function(u,h){return function(v,a){h(v,a,u)}},L=this&&this.__spreadArray||function(u,h,v){if(v||arguments.length===2)for(var a,s=0,o=h.length;s<o;s++)!a&&s in h||(a||(a=Array.prototype.slice.call(h,0,s)),a[s]=h[s]);return u.concat(a||Array.prototype.slice.call(h))};Object.defineProperty(d,"__esModule",{value:!0}),d.LogService=void 0;var m=x(2585),b={debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF},y=function(){function u(h){var v=this;this._optionsService=h,this.logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(a){a==="logLevel"&&v._updateLogLevel()})}return u.prototype._updateLogLevel=function(){this.logLevel=b[this._optionsService.options.logLevel]},u.prototype._evalLazyOptionalParams=function(h){for(var v=0;v<h.length;v++)typeof h[v]=="function"&&(h[v]=h[v]())},u.prototype._log=function(h,v,a){this._evalLazyOptionalParams(a),h.call.apply(h,L([console,"xterm.js: "+v],a,!1))},u.prototype.debug=function(h){for(var v=[],a=1;a<arguments.length;a++)v[a-1]=arguments[a];this.logLevel<=m.LogLevelEnum.DEBUG&&this._log(console.log,h,v)},u.prototype.info=function(h){for(var v=[],a=1;a<arguments.length;a++)v[a-1]=arguments[a];this.logLevel<=m.LogLevelEnum.INFO&&this._log(console.info,h,v)},u.prototype.warn=function(h){for(var v=[],a=1;a<arguments.length;a++)v[a-1]=arguments[a];this.logLevel<=m.LogLevelEnum.WARN&&this._log(console.warn,h,v)},u.prototype.error=function(h){for(var v=[],a=1;a<arguments.length;a++)v[a-1]=arguments[a];this.logLevel<=m.LogLevelEnum.ERROR&&this._log(console.error,h,v)},_([S(0,m.IOptionsService)],u)}();d.LogService=y},7302:function(Y,d,x){var _=this&&this.__assign||function(){return _=Object.assign||function(y){for(var u,h=1,v=arguments.length;h<v;h++)for(var a in u=arguments[h])Object.prototype.hasOwnProperty.call(u,a)&&(y[a]=u[a]);return y},_.apply(this,arguments)};Object.defineProperty(d,"__esModule",{value:!0}),d.OptionsService=d.DEFAULT_OPTIONS=d.DEFAULT_BELL_SOUND=void 0;var S=x(8460),L=x(6114);d.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",d.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:d.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:L.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var m=["normal","bold","100","200","300","400","500","600","700","800","900"],b=function(){function y(u){for(var h in this._onOptionChange=new S.EventEmitter,this._options=_({},d.DEFAULT_OPTIONS),u)if(h in this._options)try{var v=u[h];this._options[h]=this._sanitizeAndValidateOption(h,v)}catch(a){console.error(a)}this.options=this._setupOptions(this._options)}return Object.defineProperty(y.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),y.prototype._setupOptions=function(u){var h=this,v=_({},u),a=function(o){Object.defineProperty(v,o,{get:function(){if(!(o in d.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return h._options[o]},set:function(l){if(!(o in d.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');l=h._sanitizeAndValidateOption(o,l),h._options[o]!==l&&(h._options[o]=l,h._onOptionChange.fire(o))}})};for(var s in v)a(s);return v},y.prototype.setOption=function(u,h){this.options[u]=h},y.prototype._sanitizeAndValidateOption=function(u,h){switch(u){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":h||(h=d.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=m.includes(h)?h:d.DEFAULT_OPTIONS[u];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(u+" cannot be less than 1, value: "+h);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(u+" cannot be less than 0, value: "+h);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(u+" cannot be less than or equal to 0, value: "+h);case"rows":case"cols":if(!h&&h!==0)throw new Error(u+" must be numeric, value: "+h)}return h},y.prototype.getOption=function(u){return this.options[u]},y}();d.OptionsService=b},8343:(Y,d)=>{function x(_,S,L){S.di$target===S?S.di$dependencies.push({id:_,index:L}):(S.di$dependencies=[{id:_,index:L}],S.di$target=S)}Object.defineProperty(d,"__esModule",{value:!0}),d.createDecorator=d.getServiceDependencies=d.serviceRegistry=void 0,d.serviceRegistry=new Map,d.getServiceDependencies=function(_){return _.di$dependencies||[]},d.createDecorator=function(_){if(d.serviceRegistry.has(_))return d.serviceRegistry.get(_);var S=function(L,m,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");x(S,L,b)};return S.toString=function(){return _},d.serviceRegistry.set(_,S),S}},2585:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.IUnicodeService=d.IOptionsService=d.ILogService=d.LogLevelEnum=d.IInstantiationService=d.IDirtyRowService=d.ICharsetService=d.ICoreService=d.ICoreMouseService=d.IBufferService=void 0;var _,S=x(8343);d.IBufferService=(0,S.createDecorator)("BufferService"),d.ICoreMouseService=(0,S.createDecorator)("CoreMouseService"),d.ICoreService=(0,S.createDecorator)("CoreService"),d.ICharsetService=(0,S.createDecorator)("CharsetService"),d.IDirtyRowService=(0,S.createDecorator)("DirtyRowService"),d.IInstantiationService=(0,S.createDecorator)("InstantiationService"),(_=d.LogLevelEnum||(d.LogLevelEnum={}))[_.DEBUG=0]="DEBUG",_[_.INFO=1]="INFO",_[_.WARN=2]="WARN",_[_.ERROR=3]="ERROR",_[_.OFF=4]="OFF",d.ILogService=(0,S.createDecorator)("LogService"),d.IOptionsService=(0,S.createDecorator)("OptionsService"),d.IUnicodeService=(0,S.createDecorator)("UnicodeService")},1480:(Y,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeService=void 0;var _=x(8460),S=x(225),L=function(){function m(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter;var b=new S.UnicodeV6;this.register(b),this._active=b.version,this._activeProvider=b}return Object.defineProperty(m.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"activeVersion",{get:function(){return this._active},set:function(b){if(!this._providers[b])throw new Error('unknown Unicode version "'+b+'"');this._active=b,this._activeProvider=this._providers[b],this._onChange.fire(b)},enumerable:!1,configurable:!0}),m.prototype.register=function(b){this._providers[b.version]=b},m.prototype.wcwidth=function(b){return this._activeProvider.wcwidth(b)},m.prototype.getStringCellWidth=function(b){for(var y=0,u=b.length,h=0;h<u;++h){var v=b.charCodeAt(h);if(55296<=v&&v<=56319){if(++h>=u)return y+this.wcwidth(v);var a=b.charCodeAt(h);56320<=a&&a<=57343?v=1024*(v-55296)+a-56320+65536:y+=this.wcwidth(a)}y+=this.wcwidth(v)}return y},m}();d.UnicodeService=L}},te={};function ae(Y){var d=te[Y];if(d!==void 0)return d.exports;var x=te[Y]={exports:{}};return J[Y].call(x.exports,x,x.exports,ae),x.exports}var fe={};return(()=>{var Y=fe;Object.defineProperty(Y,"__esModule",{value:!0}),Y.Terminal=void 0;var d=ae(3236),x=ae(9042),_=ae(7975),S=ae(7090),L=ae(5741),m=ae(8285),b=["cols","rows"],y=function(){function u(h){var v=this;this._core=new d.Terminal(h),this._addonManager=new L.AddonManager,this._publicOptions={};var a=function(l){Object.defineProperty(s._publicOptions,l,{get:function(){return v._core.options[l]},set:function(f){v._checkReadonlyOptions(l),v._core.options[l]=f}})},s=this;for(var o in this._core.options)a(o)}return u.prototype._checkReadonlyOptions=function(h){if(b.includes(h))throw new Error('Option "'+h+'" can only be set in the constructor')},u.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(u.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new _.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"unicode",{get:function(){return this._checkProposedApi(),new S.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new m.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"modes",{get:function(){var h=this._core.coreService.decPrivateModes,v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"options",{get:function(){return this._publicOptions},set:function(h){for(var v in h)this._publicOptions[v]=h[v]},enumerable:!1,configurable:!0}),u.prototype.blur=function(){this._core.blur()},u.prototype.focus=function(){this._core.focus()},u.prototype.resize=function(h,v){this._verifyIntegers(h,v),this._core.resize(h,v)},u.prototype.open=function(h){this._core.open(h)},u.prototype.attachCustomKeyEventHandler=function(h){this._core.attachCustomKeyEventHandler(h)},u.prototype.registerLinkMatcher=function(h,v,a){return this._checkProposedApi(),this._core.registerLinkMatcher(h,v,a)},u.prototype.deregisterLinkMatcher=function(h){this._checkProposedApi(),this._core.deregisterLinkMatcher(h)},u.prototype.registerLinkProvider=function(h){return this._checkProposedApi(),this._core.registerLinkProvider(h)},u.prototype.registerCharacterJoiner=function(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)},u.prototype.deregisterCharacterJoiner=function(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)},u.prototype.registerMarker=function(h){return this._checkProposedApi(),this._verifyIntegers(h),this._core.addMarker(h)},u.prototype.addMarker=function(h){return this.registerMarker(h)},u.prototype.hasSelection=function(){return this._core.hasSelection()},u.prototype.select=function(h,v,a){this._verifyIntegers(h,v,a),this._core.select(h,v,a)},u.prototype.getSelection=function(){return this._core.getSelection()},u.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},u.prototype.clearSelection=function(){this._core.clearSelection()},u.prototype.selectAll=function(){this._core.selectAll()},u.prototype.selectLines=function(h,v){this._verifyIntegers(h,v),this._core.selectLines(h,v)},u.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},u.prototype.scrollLines=function(h){this._verifyIntegers(h),this._core.scrollLines(h)},u.prototype.scrollPages=function(h){this._verifyIntegers(h),this._core.scrollPages(h)},u.prototype.scrollToTop=function(){this._core.scrollToTop()},u.prototype.scrollToBottom=function(){this._core.scrollToBottom()},u.prototype.scrollToLine=function(h){this._verifyIntegers(h),this._core.scrollToLine(h)},u.prototype.clear=function(){this._core.clear()},u.prototype.write=function(h,v){this._core.write(h,v)},u.prototype.writeUtf8=function(h,v){this._core.write(h,v)},u.prototype.writeln=function(h,v){this._core.write(h),this._core.write(`\r
`,v)},u.prototype.paste=function(h){this._core.paste(h)},u.prototype.getOption=function(h){return this._core.optionsService.getOption(h)},u.prototype.setOption=function(h,v){this._checkReadonlyOptions(h),this._core.optionsService.setOption(h,v)},u.prototype.refresh=function(h,v){this._verifyIntegers(h,v),this._core.refresh(h,v)},u.prototype.reset=function(){this._core.reset()},u.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},u.prototype.loadAddon=function(h){return this._addonManager.loadAddon(this,h)},Object.defineProperty(u,"strings",{get:function(){return x},enumerable:!1,configurable:!0}),u.prototype._verifyIntegers=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];for(var a=0,s=h;a<s.length;a++){var o=s[a];if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}},u}();Y.Terminal=y})(),fe})()})});var Jt=Zt((Zo,Jo)=>{(function(J,te){typeof Zo=="object"&&typeof Jo!="undefined"?Jo.exports=te():typeof define=="function"&&define.amd?define(te):(J=J||self,J.CodeMirror=te())})(Zo,function(){"use strict";var J=navigator.userAgent,te=navigator.platform,ae=/gecko\/\d/i.test(J),fe=/MSIE \d/.test(J),Y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),d=/Edge\/(\d+)/.exec(J),x=fe||Y||d,_=x&&(fe?document.documentMode||6:+(d||Y)[1]),S=!d&&/WebKit\//.test(J),L=S&&/Qt\/\d+\.\d+/.test(J),m=!d&&/Chrome\//.test(J),b=/Opera\//.test(J),y=/Apple Computer/.test(navigator.vendor),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),h=/PhantomJS/.test(J),v=y&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),a=/Android/.test(J),s=v||a||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),o=v||/Mac/.test(te),l=/\bCrOS\b/.test(J),f=/win/i.test(te),p=b&&J.match(/Version\/(\d*\.\d*)/);p&&(p=Number(p[1])),p&&p>=15&&(b=!1,S=!0);var C=o&&(L||b&&(p==null||p<12.11)),E=ae||x&&_>=9;function O(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var R=function(e,t){var i=e.className,r=O(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function A(e,t){return M(e).appendChild(t)}function D(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)n.appendChild(t[c]);return n}function P(e,t,i,r){var n=D(e,t,i,r);return n.setAttribute("role","presentation"),n}var z;document.createRange?z=function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:z=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function W(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function B(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function I(e,t){var i=e.className;O(t).test(i)||(e.className+=(i?" ":"")+t)}function q(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!O(i[r]).test(t)&&(t+=" "+i[r]);return t}var X=function(e){e.select()};v?X=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(X=function(e){try{e.select()}catch{}});function oe(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ne(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function _e(e,t,i,r,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=r||0,g=n||0;;){var w=e.indexOf("	",c);if(w<0||w>=t)return g+(t-c);g+=w-c,g+=i-g%i,c=w+1}}var Ce=function(){this.id=null,this.f=null,this.time=0,this.handler=oe(this.onTimeout,this)};Ce.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Ce.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function ye(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var H=50,j={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},re={origin:"*mouse"},K={origin:"+move"};function de(e,t,i){for(var r=0,n=0;;){var c=e.indexOf("	",r);c==-1&&(c=e.length);var g=c-r;if(c==e.length||n+g>=t)return r+Math.min(g,t-n);if(n+=c-r,n+=i-n%i,r=c+1,n>=t)return r}}var me=[""];function Te(e){for(;me.length<=e;)me.push(Le(me)+" ");return me[e]}function Le(e){return e[e.length-1]}function qe(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function ve(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}function Xe(){}function ut(e,t){var i;return Object.create?i=Object.create(e):(Xe.prototype=e,i=new Xe),t&&ne(t,i),i}var Et=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ut(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Et.test(e))}function dr(e,t){return t?t.source.indexOf("\\w")>-1&&Ut(e)?!0:t.test(e):Ut(e)}function ci(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Zi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Wr(e){return e.charCodeAt(0)>=768&&Zi.test(e)}function ui(e,t,i){for(;(i<0?t>0:t<e.length)&&Wr(e.charAt(t));)t+=i;return t}function $t(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var n=(t+i)/2,c=r<0?Math.ceil(n):Math.floor(n);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+r}}function Ji(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var n=!1,c=0;c<e.length;++c){var g=e[c];(g.from<i&&g.to>t||t==i&&g.to==t)&&(r(Math.max(g.from,t),Math.min(g.to,i),g.level==1?"rtl":"ltr",c),n=!0)}n||r(t,i,"ltr")}var Vt=null;function Qt(e,t,i){var r;Vt=null;for(var n=0;n<e.length;++n){var c=e[n];if(c.from<t&&c.to>t)return n;c.to==t&&(c.from!=c.to&&i=="before"?r=n:Vt=n),c.from==t&&(c.from!=c.to&&i!="before"?r=n:Vt=n)}return r??Vt}var $i=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(T){return T<=247?e.charAt(T):1424<=T&&T<=1524?"R":1536<=T&&T<=1785?t.charAt(T-1536):1774<=T&&T<=2220?"r":8192<=T&&T<=8203?"w":T==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,c=/[LRr]/,g=/[Lb1n]/,w=/[1n]/;function k(T,F,N){this.level=T,this.from=F,this.to=N}return function(T,F){var N=F=="ltr"?"L":"R";if(T.length==0||F=="ltr"&&!r.test(T))return!1;for(var Z=T.length,G=[],$=0;$<Z;++$)G.push(i(T.charCodeAt($)));for(var ee=0,se=N;ee<Z;++ee){var le=G[ee];le=="m"?G[ee]=se:se=le}for(var ue=0,ce=N;ue<Z;++ue){var he=G[ue];he=="1"&&ce=="r"?G[ue]="n":c.test(he)&&(ce=he,he=="r"&&(G[ue]="R"))}for(var Se=1,ge=G[0];Se<Z-1;++Se){var ke=G[Se];ke=="+"&&ge=="1"&&G[Se+1]=="1"?G[Se]="1":ke==","&&ge==G[Se+1]&&(ge=="1"||ge=="n")&&(G[Se]=ge),ge=ke}for(var Re=0;Re<Z;++Re){var $e=G[Re];if($e==",")G[Re]="N";else if($e=="%"){var He=void 0;for(He=Re+1;He<Z&&G[He]=="%";++He);for(var Ct=Re&&G[Re-1]=="!"||He<Z&&G[He]=="1"?"1":"N",_t=Re;_t<He;++_t)G[_t]=Ct;Re=He-1}}for(var Ue=0,gt=N;Ue<Z;++Ue){var et=G[Ue];gt=="L"&&et=="1"?G[Ue]="L":c.test(et)&&(gt=et)}for(var Ge=0;Ge<Z;++Ge)if(n.test(G[Ge])){var je=void 0;for(je=Ge+1;je<Z&&n.test(G[je]);++je);for(var Fe=(Ge?G[Ge-1]:N)=="L",yt=(je<Z?G[je]:N)=="L",Gi=Fe==yt?Fe?"L":"R":N,Fr=Ge;Fr<je;++Fr)G[Fr]=Gi;Ge=je-1}for(var at=[],Yt,Ve=0;Ve<Z;)if(g.test(G[Ve])){var zo=Ve;for(++Ve;Ve<Z&&g.test(G[Ve]);++Ve);at.push(new k(0,zo,Ve))}else{var fr=Ve,oi=at.length,si=F=="rtl"?1:0;for(++Ve;Ve<Z&&G[Ve]!="L";++Ve);for(var ct=fr;ct<Ve;)if(w.test(G[ct])){fr<ct&&(at.splice(oi,0,new k(1,fr,ct)),oi+=si);var Xi=ct;for(++ct;ct<Ve&&w.test(G[ct]);++ct);at.splice(oi,0,new k(2,Xi,ct)),oi+=si,fr=ct}else++ct;fr<Ve&&at.splice(oi,0,new k(1,fr,Ve))}return F=="ltr"&&(at[0].level==1&&(Yt=T.match(/^\s+/))&&(at[0].from=Yt[0].length,at.unshift(new k(0,0,Yt[0].length))),Le(at).level==1&&(Yt=T.match(/\s+$/))&&(Le(at).to-=Yt[0].length,at.push(new k(0,Z-Yt[0].length,Z)))),F=="rtl"?at.reverse():at}}();function wt(e,t){var i=e.order;return i==null&&(i=e.order=$i(e.text,t)),i}var hi=[],be=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||hi).concat(i)}};function pr(e,t){return e._handlers&&e._handlers[t]||hi}function Qe(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var c=ye(n,i);c>-1&&(r[t]=n.slice(0,c).concat(n.slice(c+1)))}}}function Oe(e,t){var i=pr(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function Pe(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Oe(e,i||t.type,e,t),vr(t)||t.codemirrorIgnore}function Nr(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)ye(i,t[r])==-1&&i.push(t[r])}function tt(e,t){return pr(e,t).length>0}function Bt(e){e.prototype.on=function(t,i){be(this,t,i)},e.prototype.off=function(t,i){Qe(this,t,i)}}function ze(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ur(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function vr(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function jt(e){ze(e),Ur(e)}function _r(e){return e.target||e.srcElement}function jr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),o&&e.ctrlKey&&t==1&&(t=3),t}var fi=function(){if(x&&_<9)return!1;var e=D("div");return"draggable"in e||"dragDrop"in e}(),gr;function di(e){if(gr==null){var t=D("span","\u200B");A(e,D("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(gr=t.offsetWidth<=1&&t.offsetHeight>2&&!(x&&_<8))}var i=gr?D("span","\u200B"):D("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var yr;function pi(e){if(yr!=null)return yr;var t=A(e,document.createTextNode("A\u062EA")),i=z(t,0,1).getBoundingClientRect(),r=z(t,1,2).getBoundingClientRect();return M(e),!i||i.left==i.right?!1:yr=r.right-i.right<3}var mr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var c=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),g=c.indexOf("\r");g!=-1?(i.push(c.slice(0,g)),t+=g+1):(i.push(c),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},vi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},_i=function(){var e=D("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),br=null;function gi(e){if(br!=null)return br;var t=A(e,D("span","x")),i=t.getBoundingClientRect(),r=z(t,0,1).getBoundingClientRect();return br=Math.abs(i.left-r.left)>1}var Sr={},Pt={};function yi(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Sr[e]=t}function mi(e,t){Pt[e]=t}function er(e){if(typeof e=="string"&&Pt.hasOwnProperty(e))e=Pt[e];else if(e&&typeof e.name=="string"&&Pt.hasOwnProperty(e.name)){var t=Pt[e.name];typeof t=="string"&&(t={name:t}),e=ut(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return er("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return er("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Cr(e,t){t=er(t);var i=Sr[t.name];if(!i)return Cr(e,"text/plain");var r=i(e,t);if(Ht.hasOwnProperty(t.name)){var n=Ht[t.name];for(var c in n)!n.hasOwnProperty(c)||(r.hasOwnProperty(c)&&(r["_"+c]=r[c]),r[c]=n[c])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var g in t.modeProps)r[g]=t.modeProps[g];return r}var Ht={};function bi(e,t){var i=Ht.hasOwnProperty(e)?Ht[e]:Ht[e]={};ne(t,i)}function Mt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function wr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function qr(e,t,i){return e.startState?e.startState(t,i):!0}var De=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};De.prototype.eol=function(){return this.pos>=this.string.length},De.prototype.sol=function(){return this.pos==this.lineStart},De.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},De.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},De.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},De.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},De.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},De.prototype.skipToEnd=function(){this.pos=this.string.length},De.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},De.prototype.backUp=function(e){this.pos-=e},De.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=_e(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?_e(this.string,this.lineStart,this.tabSize):0)},De.prototype.indentation=function(){return _e(this.string,null,this.tabSize)-(this.lineStart?_e(this.string,this.lineStart,this.tabSize):0)},De.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(g){return i?g.toLowerCase():g},n=this.string.substr(this.pos,e.length);if(r(n)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},De.prototype.current=function(){return this.string.slice(this.start,this.pos)},De.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},De.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},De.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function pe(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],c=n.chunkSize();if(t<c){i=n;break}t-=c}return i.lines[t]}function At(e,t,i){var r=[],n=t.line;return e.iter(t.line,i.line+1,function(c){var g=c.text;n==i.line&&(g=g.slice(0,i.ch)),n==t.line&&(g=g.slice(t.ch)),r.push(g),++n}),r}function Lr(e,t,i){var r=[];return e.iter(t,i,function(n){r.push(n.text)}),r}function ht(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function Ee(e){if(e.parent==null)return null;for(var t=e.parent,i=ye(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function Tt(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],c=n.height;if(t<c){e=n;continue e}t-=c,i+=n.chunkSize()}return i}while(!e.lines);for(var g=0;g<e.lines.length;++g){var w=e.lines[g],k=w.height;if(t<k)break;t-=k}return i+g}function qt(e,t){return t>=e.first&&t<e.first+e.size}function xr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ie(e,t,i){if(i===void 0&&(i=null),!(this instanceof ie))return new ie(e,t,i);this.line=e,this.ch=t,this.sticky=i}function we(e,t){return e.line-t.line||e.ch-t.ch}function kr(e,t){return e.sticky==t.sticky&&we(e,t)==0}function Er(e){return ie(e.line,e.ch)}function tr(e,t){return we(e,t)<0?t:e}function rr(e,t){return we(e,t)<0?e:t}function zr(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xe(e,t){if(t.line<e.first)return ie(e.first,0);var i=e.first+e.size-1;return t.line>i?ie(i,pe(e,i).text.length):Vi(t,pe(e,t.line).text.length)}function Vi(e,t){var i=e.ch;return i==null||i>t?ie(e.line,t):i<0?ie(e.line,0):e}function Si(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=xe(e,t[r]);return i}var Mr=function(e,t){this.state=e,this.lookAhead=t},mt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};mt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},mt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},mt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},mt.fromSaved=function(e,t,i){return t instanceof Mr?new mt(e,Mt(e.mode,t.state),i,t.lookAhead):new mt(e,Mt(e.mode,t),i)},mt.prototype.save=function(e){var t=e!==!1?Mt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Mr(t,this.maxLookAhead):t};function Ci(e,t,i,r){var n=[e.state.modeGen],c={};Mi(e,t.text,e.doc.mode,i,function(T,F){return n.push(T,F)},c,r);for(var g=i.state,w=function(T){i.baseTokens=n;var F=e.state.overlays[T],N=1,Z=0;i.state=!0,Mi(e,t.text,F.mode,i,function(G,$){for(var ee=N;Z<G;){var se=n[N];se>G&&n.splice(N,1,G,n[N+1],se),N+=2,Z=Math.min(G,se)}if(!!$)if(F.opaque)n.splice(ee,N-ee,G,"overlay "+$),N=ee+2;else for(;ee<N;ee+=2){var le=n[ee+1];n[ee+1]=(le?le+" ":"")+"overlay "+$}},c),i.state=g,i.baseTokens=null,i.baseTokenPos=1},k=0;k<e.state.overlays.length;++k)w(k);return{styles:n,classes:c.bgClass||c.textClass?c:null}}function wi(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ir(e,Ee(t)),n=t.text.length>e.options.maxHighlightLength&&Mt(e.doc.mode,r.state),c=Ci(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ir(e,t,i){var r=e.doc,n=e.display;if(!r.mode.startState)return new mt(r,!0,t);var c=Qi(e,t,i),g=c>r.first&&pe(r,c-1).stateAfter,w=g?mt.fromSaved(r,g,c):new mt(r,qr(r.mode),c);return r.iter(c,t,function(k){Kr(e,k.text,w);var T=w.line;k.stateAfter=T==t-1||T%5==0||T>=n.viewFrom&&T<n.viewTo?w.save():null,w.nextLine()}),i&&(r.modeFrontier=w.line),w}function Kr(e,t,i,r){var n=e.doc.mode,c=new De(t,e.options.tabSize,i);for(c.start=c.pos=r||0,t==""&&Li(n,i.state);!c.eol();)Gr(n,c,i.state),c.start=c.pos}function Li(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=wr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function Gr(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=wr(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var xi=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function ki(e,t,i,r){var n=e.doc,c=n.mode,g;t=xe(n,t);var w=pe(n,t.line),k=ir(e,t.line,i),T=new De(w.text,e.options.tabSize,k),F;for(r&&(F=[]);(r||T.pos<t.ch)&&!T.eol();)T.start=T.pos,g=Gr(c,T,k.state),r&&F.push(new xi(T,g,Mt(n.mode,k.state)));return r?F:new xi(T,g,k.state)}function Ei(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Mi(e,t,i,r,n,c,g){var w=i.flattenSpans;w==null&&(w=e.options.flattenSpans);var k=0,T=null,F=new De(t,e.options.tabSize,r),N,Z=e.options.addModeClass&&[null];for(t==""&&Ei(Li(i,r.state),c);!F.eol();){if(F.pos>e.options.maxHighlightLength?(w=!1,g&&Kr(e,t,r,F.pos),F.pos=t.length,N=null):N=Ei(Gr(i,F,r.state,Z),c),Z){var G=Z[0].name;G&&(N="m-"+(N?G+" "+N:G))}if(!w||T!=N){for(;k<F.start;)k=Math.min(F.start,k+5e3),n(k,T);T=N}F.start=F.pos}for(;k<F.pos;){var $=Math.min(F.pos,k+5e3);n($,T),k=$}}function Qi(e,t,i){for(var r,n,c=e.doc,g=i?-1:t-(e.doc.mode.innerMode?1e3:100),w=t;w>g;--w){if(w<=c.first)return c.first;var k=pe(c,w-1),T=k.stateAfter;if(T&&(!i||w+(T instanceof Mr?T.lookAhead:0)<=c.modeFrontier))return w;var F=_e(k.text,null,e.options.tabSize);(n==null||r>F)&&(n=w-1,r=F)}return n}function Mn(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var n=pe(e,r).stateAfter;if(n&&(!(n instanceof Mr)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var An=!1,Rt=!1;function Tn(){An=!0}function no(){Rt=!0}function Ai(e,t,i){this.marker=e,this.from=t,this.to=i}function Q(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function V(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function Ot(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function Xr(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],g=c.marker,w=c.from==null||(g.inclusiveLeft?c.from<=t:c.from<t);if(w||c.from==t&&g.type=="bookmark"&&(!i||!c.marker.insertLeft)){var k=c.to==null||(g.inclusiveRight?c.to>=t:c.to>t);(r||(r=[])).push(new Ai(g,c.from,k?null:c.to))}}return r}function Yr(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],g=c.marker,w=c.to==null||(g.inclusiveRight?c.to>=t:c.to>t);if(w||c.from==t&&g.type=="bookmark"&&(!i||c.marker.insertLeft)){var k=c.from==null||(g.inclusiveLeft?c.from<=t:c.from<t);(r||(r=[])).push(new Ai(g,k?null:c.from-t,c.to==null?null:c.to-t))}}return r}function We(e,t){if(t.full)return null;var i=qt(e,t.from.line)&&pe(e,t.from.line).markedSpans,r=qt(e,t.to.line)&&pe(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,c=t.to.ch,g=we(t.from,t.to)==0,w=Xr(i,n,g),k=Yr(r,c,g),T=t.text.length==1,F=Le(t.text).length+(T?n:0);if(w)for(var N=0;N<w.length;++N){var Z=w[N];if(Z.to==null){var G=Q(k,Z.marker);G?T&&(Z.to=G.to==null?null:G.to+F):Z.to=n}}if(k)for(var $=0;$<k.length;++$){var ee=k[$];if(ee.to!=null&&(ee.to+=F),ee.from==null){var se=Q(w,ee.marker);se||(ee.from=F,T&&(w||(w=[])).push(ee))}else ee.from+=F,T&&(w||(w=[])).push(ee)}w&&(w=Lt(w)),k&&k!=w&&(k=Lt(k));var le=[w];if(!T){var ue=t.text.length-2,ce;if(ue>0&&w)for(var he=0;he<w.length;++he)w[he].to==null&&(ce||(ce=[])).push(new Ai(w[he].marker,null,null));for(var Se=0;Se<ue;++Se)le.push(ce);le.push(k)}return le}function Lt(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Dt(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(G){if(G.markedSpans)for(var $=0;$<G.markedSpans.length;++$){var ee=G.markedSpans[$].marker;ee.readOnly&&(!r||ye(r,ee)==-1)&&(r||(r=[])).push(ee)}}),!r)return null;for(var n=[{from:t,to:i}],c=0;c<r.length;++c)for(var g=r[c],w=g.find(0),k=0;k<n.length;++k){var T=n[k];if(!(we(T.to,w.from)<0||we(T.from,w.to)>0)){var F=[k,1],N=we(T.from,w.from),Z=we(T.to,w.to);(N<0||!g.inclusiveLeft&&!N)&&F.push({from:T.from,to:w.from}),(Z>0||!g.inclusiveRight&&!Z)&&F.push({from:w.to,to:T.to}),n.splice.apply(n,F),k+=F.length-3}}return n}function Ar(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function rt(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function ft(e){return e.inclusiveLeft?-1:0}function zt(e){return e.inclusiveRight?1:0}function nr(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),n=t.find(),c=we(r.from,n.from)||ft(e)-ft(t);if(c)return-c;var g=we(r.to,n.to)||zt(e)-zt(t);return g||t.id-e.id}function or(e,t){var i=Rt&&e.markedSpans,r;if(i)for(var n=void 0,c=0;c<i.length;++c)n=i[c],n.marker.collapsed&&(t?n.from:n.to)==null&&(!r||nr(r,n.marker)<0)&&(r=n.marker);return r}function sr(e){return or(e,!0)}function it(e){return or(e,!1)}function dt(e,t){var i=Rt&&e.markedSpans,r;if(i)for(var n=0;n<i.length;++n){var c=i[n];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!r||nr(r,c.marker)<0)&&(r=c.marker)}return r}function Ie(e,t,i,r,n){var c=pe(e,t),g=Rt&&c.markedSpans;if(g)for(var w=0;w<g.length;++w){var k=g[w];if(!!k.marker.collapsed){var T=k.marker.find(0),F=we(T.from,i)||ft(k.marker)-ft(n),N=we(T.to,r)||zt(k.marker)-zt(n);if(!(F>=0&&N<=0||F<=0&&N>=0)&&(F<=0&&(k.marker.inclusiveRight&&n.inclusiveLeft?we(T.to,i)>=0:we(T.to,i)>0)||F>=0&&(k.marker.inclusiveRight&&n.inclusiveLeft?we(T.from,r)<=0:we(T.from,r)<0)))return!0}}}function Ke(e){for(var t;t=sr(e);)e=t.find(-1,!0).line;return e}function xt(e){for(var t;t=it(e);)e=t.find(1,!0).line;return e}function ar(e){for(var t,i;t=it(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function It(e,t){var i=pe(e,t),r=Ke(i);return i==r?t:Ee(r)}function Zr(e,t){if(t>e.lastLine())return t;var i=pe(e,t),r;if(!nt(e,i))return t;for(;r=it(i);)i=r.find(1,!0).line;return Ee(i)+1}function nt(e,t){var i=Rt&&t.markedSpans;if(i){for(var r=void 0,n=0;n<i.length;++n)if(r=i[n],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Kt(e,t,r))return!0}}}function Kt(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Kt(e,r.line,Q(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,c=0;c<t.markedSpans.length;++c)if(n=t.markedSpans[c],n.marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(n.to==null||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Kt(e,t,n))return!0}function ot(e){e=Ke(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var c=i.parent;c;i=c,c=i.parent)for(var g=0;g<c.children.length;++g){var w=c.children[g];if(w==i)break;t+=w.height}return t}function Tr(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=sr(r);){var n=i.find(0,!0);r=n.from.line,t+=n.from.ch-n.to.ch}for(r=e;i=it(r);){var c=i.find(0,!0);t-=r.text.length-c.from.ch,r=c.to.line,t+=r.text.length-c.to.ch}return t}function Jr(e){var t=e.display,i=e.doc;t.maxLine=pe(i,i.first),t.maxLineLength=Tr(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var n=Tr(r);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=r)})}var bt=function(e,t,i){this.text=e,rt(this,t),this.height=i?i(this):1};bt.prototype.lineNo=function(){return Ee(this)},Bt(bt);function lr(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Ar(e),rt(e,i);var n=r?r(e):1;n!=e.height&&ht(e,n)}function oo(e){e.parent=null,Ar(e)}var vl={},_l={};function ts(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?_l:vl;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function rs(e,t){var i=P("span",null,null,S?"padding-right: .1px":null),r={pre:P("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var c=n?t.rest[n-1]:t.line,g=void 0;r.pos=0,r.addToken=yl,pi(e.display.measure)&&(g=wt(c,e.doc.direction))&&(r.addToken=bl(r.addToken,g)),r.map=[];var w=t!=e.display.externalMeasured&&Ee(c);Sl(c,r,wi(e,c,w)),c.styleClasses&&(c.styleClasses.bgClass&&(r.bgClass=q(c.styleClasses.bgClass,r.bgClass||"")),c.styleClasses.textClass&&(r.textClass=q(c.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(di(e.display.measure))),n==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(S){var k=r.content.lastChild;(/\bcm-tab\b/.test(k.className)||k.querySelector&&k.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Oe(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=q(r.pre.className,r.textClass||"")),r}function gl(e){var t=D("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function yl(e,t,i,r,n,c,g){if(!!t){var w=e.splitSpaces?ml(t,e.trailingSpace):t,k=e.cm.state.specialChars,T=!1,F;if(!k.test(t))e.col+=t.length,F=document.createTextNode(w),e.map.push(e.pos,e.pos+t.length,F),x&&_<9&&(T=!0),e.pos+=t.length;else{F=document.createDocumentFragment();for(var N=0;;){k.lastIndex=N;var Z=k.exec(t),G=Z?Z.index-N:t.length-N;if(G){var $=document.createTextNode(w.slice(N,N+G));x&&_<9?F.appendChild(D("span",[$])):F.appendChild($),e.map.push(e.pos,e.pos+G,$),e.col+=G,e.pos+=G}if(!Z)break;N+=G+1;var ee=void 0;if(Z[0]=="	"){var se=e.cm.options.tabSize,le=se-e.col%se;ee=F.appendChild(D("span",Te(le),"cm-tab")),ee.setAttribute("role","presentation"),ee.setAttribute("cm-text","	"),e.col+=le}else Z[0]=="\r"||Z[0]==`
`?(ee=F.appendChild(D("span",Z[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),ee.setAttribute("cm-text",Z[0]),e.col+=1):(ee=e.cm.options.specialCharPlaceholder(Z[0]),ee.setAttribute("cm-text",Z[0]),x&&_<9?F.appendChild(D("span",[ee])):F.appendChild(ee),e.col+=1);e.map.push(e.pos,e.pos+1,ee),e.pos++}}if(e.trailingSpace=w.charCodeAt(t.length-1)==32,i||r||n||T||c||g){var ue=i||"";r&&(ue+=r),n&&(ue+=n);var ce=D("span",[F],ue,c);if(g)for(var he in g)g.hasOwnProperty(he)&&he!="style"&&he!="class"&&ce.setAttribute(he,g[he]);return e.content.appendChild(ce)}e.content.appendChild(F)}}function ml(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var c=e.charAt(n);c==" "&&i&&(n==e.length-1||e.charCodeAt(n+1)==32)&&(c="\xA0"),r+=c,i=c==" "}return r}function bl(e,t){return function(i,r,n,c,g,w,k){n=n?n+" cm-force-border":"cm-force-border";for(var T=i.pos,F=T+r.length;;){for(var N=void 0,Z=0;Z<t.length&&(N=t[Z],!(N.to>T&&N.from<=T));Z++);if(N.to>=F)return e(i,r,n,c,g,w,k);e(i,r.slice(0,N.to-T),n,c,null,w,k),c=null,r=r.slice(N.to-T),T=N.to}}}function is(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function Sl(e,t,i){var r=e.markedSpans,n=e.text,c=0;if(!r){for(var g=1;g<i.length;g+=2)t.addToken(t,n.slice(c,c=i[g]),ts(i[g+1],t.cm.options));return}for(var w=n.length,k=0,T=1,F="",N,Z,G=0,$,ee,se,le,ue;;){if(G==k){$=ee=se=Z="",ue=null,le=null,G=1/0;for(var ce=[],he=void 0,Se=0;Se<r.length;++Se){var ge=r[Se],ke=ge.marker;if(ke.type=="bookmark"&&ge.from==k&&ke.widgetNode)ce.push(ke);else if(ge.from<=k&&(ge.to==null||ge.to>k||ke.collapsed&&ge.to==k&&ge.from==k)){if(ge.to!=null&&ge.to!=k&&G>ge.to&&(G=ge.to,ee=""),ke.className&&($+=" "+ke.className),ke.css&&(Z=(Z?Z+";":"")+ke.css),ke.startStyle&&ge.from==k&&(se+=" "+ke.startStyle),ke.endStyle&&ge.to==G&&(he||(he=[])).push(ke.endStyle,ge.to),ke.title&&((ue||(ue={})).title=ke.title),ke.attributes)for(var Re in ke.attributes)(ue||(ue={}))[Re]=ke.attributes[Re];ke.collapsed&&(!le||nr(le.marker,ke)<0)&&(le=ge)}else ge.from>k&&G>ge.from&&(G=ge.from)}if(he)for(var $e=0;$e<he.length;$e+=2)he[$e+1]==G&&(ee+=" "+he[$e]);if(!le||le.from==k)for(var He=0;He<ce.length;++He)is(t,0,ce[He]);if(le&&(le.from||0)==k){if(is(t,(le.to==null?w+1:le.to)-k,le.marker,le.from==null),le.to==null)return;le.to==k&&(le=!1)}}if(k>=w)break;for(var Ct=Math.min(w,G);;){if(F){var _t=k+F.length;if(!le){var Ue=_t>Ct?F.slice(0,Ct-k):F;t.addToken(t,Ue,N?N+$:$,se,k+Ue.length==G?ee:"",Z,ue)}if(_t>=Ct){F=F.slice(Ct-k),k=Ct;break}k=_t,se=""}F=n.slice(c,c=i[T++]),N=ts(i[T++],t.cm.options)}}}function ns(e,t,i){this.line=t,this.rest=ar(t),this.size=this.rest?Ee(Le(this.rest))-i+1:1,this.node=this.text=null,this.hidden=nt(e,t)}function Rn(e,t,i){for(var r=[],n,c=t;c<i;c=n){var g=new ns(e.doc,pe(e.doc,c),c);n=c+g.size,r.push(g)}return r}var Ti=null;function Cl(e){Ti?Ti.ops.push(e):e.ownsGroup=Ti={ops:[e],delayedCallbacks:[]}}function wl(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}function Ll(e,t){var i=e.ownsGroup;if(!!i)try{wl(i)}finally{Ti=null,t(i)}}var en=null;function Ye(e,t){var i=pr(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),n;Ti?n=Ti.delayedCallbacks:en?n=en:(n=en=[],setTimeout(xl,0));for(var c=function(w){n.push(function(){return i[w].apply(null,r)})},g=0;g<i.length;++g)c(g)}}function xl(){var e=en;en=null;for(var t=0;t<e.length;++t)e[t]()}function os(e,t,i,r){for(var n=0;n<t.changes.length;n++){var c=t.changes[n];c=="text"?El(e,t):c=="gutter"?as(e,t,i,r):c=="class"?so(e,t):c=="widget"&&Ml(e,t,r)}t.changes=null}function tn(e){return e.node==e.text&&(e.node=D("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&_<8&&(e.node.style.zIndex=2)),e.node}function kl(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=tn(t);t.background=r.insertBefore(D("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function ss(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):rs(e,t)}function El(e,t){var i=t.text.className,r=ss(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,so(e,t)):i&&(t.text.className=i)}function so(e,t){kl(e,t),t.line.wrapClass?tn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function as(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=tn(t);t.gutterBackground=D("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var g=tn(t),w=t.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(w.setAttribute("aria-hidden","true"),e.display.input.setUneditable(w),g.insertBefore(w,t.text),t.line.gutterClass&&(w.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=w.appendChild(D("div",xr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var k=0;k<e.display.gutterSpecs.length;++k){var T=e.display.gutterSpecs[k].className,F=c.hasOwnProperty(T)&&c[T];F&&w.appendChild(D("div",[F],"CodeMirror-gutter-elt","left: "+r.gutterLeft[T]+"px; width: "+r.gutterWidth[T]+"px"))}}}function Ml(e,t,i){t.alignable&&(t.alignable=null);for(var r=O("CodeMirror-linewidget"),n=t.node.firstChild,c=void 0;n;n=c)c=n.nextSibling,r.test(n.className)&&t.node.removeChild(n);ls(e,t,i)}function Al(e,t,i,r){var n=ss(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),so(e,t),as(e,t,i,r),ls(e,t,r),t.node}function ls(e,t,i){if(cs(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)cs(e,t.rest[r],t,i,!1)}function cs(e,t,i,r,n){if(!!t.widgets)for(var c=tn(i),g=0,w=t.widgets;g<w.length;++g){var k=w[g],T=D("div",[k.node],"CodeMirror-linewidget"+(k.className?" "+k.className:""));k.handleMouseEvents||T.setAttribute("cm-ignore-events","true"),Tl(k,T,i,r),e.display.input.setUneditable(T),n&&k.above?c.insertBefore(T,i.gutter||i.text):c.appendChild(T),Ye(k,"redraw")}}function Tl(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function rn(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!W(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),A(t.display.measure,D("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function cr(e,t){for(var i=_r(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function On(e){return e.lineSpace.offsetTop}function ao(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function us(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=A(e.measure,D("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Gt(e){return H-e.display.nativeBarWidth}function $r(e){return e.display.scroller.clientWidth-Gt(e)-e.display.barWidth}function lo(e){return e.display.scroller.clientHeight-Gt(e)-e.display.barHeight}function Rl(e,t,i){var r=e.options.lineWrapping,n=r&&$r(e);if(!t.measure.heights||r&&t.measure.width!=n){var c=t.measure.heights=[];if(r){t.measure.width=n;for(var g=t.text.firstChild.getClientRects(),w=0;w<g.length-1;w++){var k=g[w],T=g[w+1];Math.abs(k.bottom-T.bottom)>2&&c.push((k.bottom+T.top)/2-i.top)}}c.push(i.bottom-i.top)}}function hs(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(Ee(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}}function Ol(e,t){t=Ke(t);var i=Ee(t),r=e.display.externalMeasured=new ns(e.doc,t,i);r.lineN=i;var n=r.built=rs(e,r);return r.text=n.pre,A(e.display.lineMeasure,n.pre),r}function fs(e,t,i,r){return Xt(e,Ri(e,t),i,r)}function co(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ei(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function Ri(e,t){var i=Ee(t),r=co(e,i);r&&!r.text?r=null:r&&r.changes&&(os(e,r,i,vo(e)),e.curOp.forceUpdate=!0),r||(r=Ol(e,t));var n=hs(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Xt(e,t,i,r,n){t.before&&(i=-1);var c=i+(r||""),g;return t.cache.hasOwnProperty(c)?g=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Rl(e,t.view,t.rect),t.hasHeights=!0),g=Bl(e,t,i,r),g.bogus||(t.cache[c]=g)),{left:g.left,right:g.right,top:n?g.rtop:g.top,bottom:n?g.rbottom:g.bottom}}var ds={left:0,right:0,top:0,bottom:0};function ps(e,t,i){for(var r,n,c,g,w,k,T=0;T<e.length;T+=3)if(w=e[T],k=e[T+1],t<w?(n=0,c=1,g="left"):t<k?(n=t-w,c=n+1):(T==e.length-3||t==k&&e[T+3]>t)&&(c=k-w,n=c-1,t>=k&&(g="right")),n!=null){if(r=e[T+2],w==k&&i==(r.insertLeft?"left":"right")&&(g=i),i=="left"&&n==0)for(;T&&e[T-2]==e[T-3]&&e[T-1].insertLeft;)r=e[(T-=3)+2],g="left";if(i=="right"&&n==k-w)for(;T<e.length-3&&e[T+3]==e[T+4]&&!e[T+5].insertLeft;)r=e[(T+=3)+2],g="right";break}return{node:r,start:n,end:c,collapse:g,coverStart:w,coverEnd:k}}function Dl(e,t){var i=ds;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function Bl(e,t,i,r){var n=ps(t.map,i,r),c=n.node,g=n.start,w=n.end,k=n.collapse,T;if(c.nodeType==3){for(var F=0;F<4;F++){for(;g&&Wr(t.line.text.charAt(n.coverStart+g));)--g;for(;n.coverStart+w<n.coverEnd&&Wr(t.line.text.charAt(n.coverStart+w));)++w;if(x&&_<9&&g==0&&w==n.coverEnd-n.coverStart?T=c.parentNode.getBoundingClientRect():T=Dl(z(c,g,w).getClientRects(),r),T.left||T.right||g==0)break;w=g,g=g-1,k="right"}x&&_<11&&(T=Pl(e.display.measure,T))}else{g>0&&(k=r="right");var N;e.options.lineWrapping&&(N=c.getClientRects()).length>1?T=N[r=="right"?N.length-1:0]:T=c.getBoundingClientRect()}if(x&&_<9&&!g&&(!T||!T.left&&!T.right)){var Z=c.parentNode.getClientRects()[0];Z?T={left:Z.left,right:Z.left+Di(e.display),top:Z.top,bottom:Z.bottom}:T=ds}for(var G=T.top-t.rect.top,$=T.bottom-t.rect.top,ee=(G+$)/2,se=t.view.measure.heights,le=0;le<se.length-1&&!(ee<se[le]);le++);var ue=le?se[le-1]:0,ce=se[le],he={left:(k=="right"?T.right:T.left)-t.rect.left,right:(k=="left"?T.left:T.right)-t.rect.left,top:ue,bottom:ce};return!T.left&&!T.right&&(he.bogus=!0),e.options.singleCursorHeightPerLine||(he.rtop=G,he.rbottom=$),he}function Pl(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!gi(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function vs(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function _s(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)vs(e.display.view[t])}function nn(e){_s(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function gs(){return m&&a?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ys(){return m&&a?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function uo(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=rn(e.widgets[i]));return t}function Dn(e,t,i,r,n){if(!n){var c=uo(t);i.top+=c,i.bottom+=c}if(r=="line")return i;r||(r="local");var g=ot(t);if(r=="local"?g+=On(e.display):g-=e.display.viewOffset,r=="page"||r=="window"){var w=e.display.lineSpace.getBoundingClientRect();g+=w.top+(r=="window"?0:ys());var k=w.left+(r=="window"?0:gs());i.left+=k,i.right+=k}return i.top+=g,i.bottom+=g,i}function ms(e,t,i){if(i=="div")return t;var r=t.left,n=t.top;if(i=="page")r-=gs(),n-=ys();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();r+=c.left,n+=c.top}var g=e.display.lineSpace.getBoundingClientRect();return{left:r-g.left,top:n-g.top}}function Bn(e,t,i,r,n){return r||(r=pe(e.doc,t.line)),Dn(e,r,fs(e,r,t.ch,n),i)}function Ft(e,t,i,r,n,c){r=r||pe(e.doc,t.line),n||(n=Ri(e,r));function g($,ee){var se=Xt(e,n,$,ee?"right":"left",c);return ee?se.left=se.right:se.right=se.left,Dn(e,r,se,i)}var w=wt(r,e.doc.direction),k=t.ch,T=t.sticky;if(k>=r.text.length?(k=r.text.length,T="before"):k<=0&&(k=0,T="after"),!w)return g(T=="before"?k-1:k,T=="before");function F($,ee,se){var le=w[ee],ue=le.level==1;return g(se?$-1:$,ue!=se)}var N=Qt(w,k,T),Z=Vt,G=F(k,N,T=="before");return Z!=null&&(G.other=F(k,Z,T!="before")),G}function bs(e,t){var i=0;t=xe(e.doc,t),e.options.lineWrapping||(i=Di(e.display)*t.ch);var r=pe(e.doc,t.line),n=ot(r)+On(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function ho(e,t,i,r,n){var c=ie(e,t,i);return c.xRel=n,r&&(c.outside=r),c}function fo(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return ho(r.first,0,null,-1,-1);var n=Tt(r,i),c=r.first+r.size-1;if(n>c)return ho(r.first+r.size-1,pe(r,c).text.length,null,1,1);t<0&&(t=0);for(var g=pe(r,n);;){var w=Hl(e,g,n,t,i),k=dt(g,w.ch+(w.xRel>0||w.outside>0?1:0));if(!k)return w;var T=k.find(1);if(T.line==n)return T;g=pe(r,n=T.line)}}function Ss(e,t,i,r){r-=uo(t);var n=t.text.length,c=$t(function(g){return Xt(e,i,g-1).bottom<=r},n,0);return n=$t(function(g){return Xt(e,i,g).top>r},c,n),{begin:c,end:n}}function Cs(e,t,i,r){i||(i=Ri(e,t));var n=Dn(e,t,Xt(e,i,r),"line").top;return Ss(e,t,i,n)}function po(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function Hl(e,t,i,r,n){n-=ot(t);var c=Ri(e,t),g=uo(t),w=0,k=t.text.length,T=!0,F=wt(t,e.doc.direction);if(F){var N=(e.options.lineWrapping?Fl:Il)(e,t,i,c,F,r,n);T=N.level!=1,w=T?N.from:N.to-1,k=T?N.to:N.from-1}var Z=null,G=null,$=$t(function(Se){var ge=Xt(e,c,Se);return ge.top+=g,ge.bottom+=g,po(ge,r,n,!1)?(ge.top<=n&&ge.left<=r&&(Z=Se,G=ge),!0):!1},w,k),ee,se,le=!1;if(G){var ue=r-G.left<G.right-r,ce=ue==T;$=Z+(ce?0:1),se=ce?"after":"before",ee=ue?G.left:G.right}else{!T&&($==k||$==w)&&$++,se=$==0?"after":$==t.text.length?"before":Xt(e,c,$-(T?1:0)).bottom+g<=n==T?"after":"before";var he=Ft(e,ie(i,$,se),"line",t,c);ee=he.left,le=n<he.top?-1:n>=he.bottom?1:0}return $=ui(t.text,$,1),ho(i,$,se,le,r-ee)}function Il(e,t,i,r,n,c,g){var w=$t(function(N){var Z=n[N],G=Z.level!=1;return po(Ft(e,ie(i,G?Z.to:Z.from,G?"before":"after"),"line",t,r),c,g,!0)},0,n.length-1),k=n[w];if(w>0){var T=k.level!=1,F=Ft(e,ie(i,T?k.from:k.to,T?"after":"before"),"line",t,r);po(F,c,g,!0)&&F.top>g&&(k=n[w-1])}return k}function Fl(e,t,i,r,n,c,g){var w=Ss(e,t,r,g),k=w.begin,T=w.end;/\s/.test(t.text.charAt(T-1))&&T--;for(var F=null,N=null,Z=0;Z<n.length;Z++){var G=n[Z];if(!(G.from>=T||G.to<=k)){var $=G.level!=1,ee=Xt(e,r,$?Math.min(T,G.to)-1:Math.max(k,G.from)).right,se=ee<c?c-ee+1e9:ee-c;(!F||N>se)&&(F=G,N=se)}}return F||(F=n[n.length-1]),F.from<k&&(F={from:k,to:F.to,level:F.level}),F.to>T&&(F={from:F.from,to:T,level:F.level}),F}var Vr;function Oi(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Vr==null){Vr=D("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Vr.appendChild(document.createTextNode("x")),Vr.appendChild(D("br"));Vr.appendChild(document.createTextNode("x"))}A(e.measure,Vr);var i=Vr.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),M(e.measure),i||1}function Di(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=D("span","xxxxxxxxxx"),i=D("pre",[t],"CodeMirror-line-like");A(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function vo(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,c=t.gutters.firstChild,g=0;c;c=c.nextSibling,++g){var w=e.display.gutterSpecs[g].className;i[w]=c.offsetLeft+c.clientLeft+n,r[w]=c.clientWidth}return{fixedPos:_o(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function _o(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ws(e){var t=Oi(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/Di(e.display)-3);return function(n){if(nt(e.doc,n))return 0;var c=0;if(n.widgets)for(var g=0;g<n.widgets.length;g++)n.widgets[g].height&&(c+=n.widgets[g].height);return i?c+(Math.ceil(n.text.length/r)||1)*t:c+t}}function go(e){var t=e.doc,i=ws(e);t.iter(function(r){var n=i(r);n!=r.height&&ht(r,n)})}function Qr(e,t,i,r){var n=e.display;if(!i&&_r(t).getAttribute("cm-not-content")=="true")return null;var c,g,w=n.lineSpace.getBoundingClientRect();try{c=t.clientX-w.left,g=t.clientY-w.top}catch{return null}var k=fo(e,c,g),T;if(r&&k.xRel>0&&(T=pe(e.doc,k.line).text).length==k.ch){var F=_e(T,T.length,e.options.tabSize)-T.length;k=ie(k.line,Math.max(0,Math.round((c-us(e.display).left)/Di(e.display))-F))}return k}function ei(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function pt(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Rt&&It(e.doc,t)<n.viewTo&&Or(e);else if(i<=n.viewFrom)Rt&&Zr(e.doc,i+r)>n.viewFrom?Or(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)Or(e);else if(t<=n.viewFrom){var c=Pn(e,i,i+r,1);c?(n.view=n.view.slice(c.index),n.viewFrom=c.lineN,n.viewTo+=r):Or(e)}else if(i>=n.viewTo){var g=Pn(e,t,t,-1);g?(n.view=n.view.slice(0,g.index),n.viewTo=g.lineN):Or(e)}else{var w=Pn(e,t,t,-1),k=Pn(e,i,i+r,1);w&&k?(n.view=n.view.slice(0,w.index).concat(Rn(e,w.lineN,k.lineN)).concat(n.view.slice(k.index)),n.viewTo+=r):Or(e)}var T=n.externalMeasured;T&&(i<T.lineN?T.lineN+=r:t<T.lineN+T.size&&(n.externalMeasured=null))}function Rr(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var c=r.view[ei(e,t)];if(c.node!=null){var g=c.changes||(c.changes=[]);ye(g,i)==-1&&g.push(i)}}}function Or(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Pn(e,t,i,r){var n=ei(e,t),c,g=e.display.view;if(!Rt||i==e.doc.first+e.doc.size)return{index:n,lineN:i};for(var w=e.display.viewFrom,k=0;k<n;k++)w+=g[k].size;if(w!=t){if(r>0){if(n==g.length-1)return null;c=w+g[n].size-t,n++}else c=w-t;t+=c,i+=c}for(;It(e.doc,i)!=i;){if(n==(r<0?0:g.length-1))return null;i+=r*g[n-(r<0?1:0)].size,n+=r}return{index:n,lineN:i}}function Wl(e,t,i){var r=e.display,n=r.view;n.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Rn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Rn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ei(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Rn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,ei(e,i)))),r.viewTo=i}function Ls(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];!n.hidden&&(!n.node||n.changes)&&++i}return i}function on(e){e.display.input.showSelection(e.display.input.prepareSelection())}function xs(e,t){t===void 0&&(t=!0);var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),c=r.selection=document.createDocumentFragment(),g=e.options.$customCursor;g&&(t=!0);for(var w=0;w<i.sel.ranges.length;w++)if(!(!t&&w==i.sel.primIndex)){var k=i.sel.ranges[w];if(!(k.from().line>=e.display.viewTo||k.to().line<e.display.viewFrom)){var T=k.empty();if(g){var F=g(e,k);F&&yo(e,F,n)}else(T||e.options.showCursorWhenSelecting)&&yo(e,k.head,n);T||Nl(e,k,c)}}return r}function yo(e,t,i){var r=Ft(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(D("div","\xA0","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=Bn(e,t,"div",null,null),g=c.right-c.left;n.style.width=(g>0?g:e.defaultCharWidth())+"px"}if(r.other){var w=i.appendChild(D("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));w.style.display="",w.style.left=r.other.left+"px",w.style.top=r.other.top+"px",w.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Hn(e,t){return e.top-t.top||e.left-t.left}function Nl(e,t,i){var r=e.display,n=e.doc,c=document.createDocumentFragment(),g=us(e.display),w=g.left,k=Math.max(r.sizerWidth,$r(e)-r.sizer.offsetLeft)-g.right,T=n.direction=="ltr";function F(ce,he,Se,ge){he<0&&(he=0),he=Math.round(he),ge=Math.round(ge),c.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+ce+`px;
                             top: `+he+"px; width: "+(Se??k-ce)+`px;
                             height: `+(ge-he)+"px"))}function N(ce,he,Se){var ge=pe(n,ce),ke=ge.text.length,Re,$e;function He(Ue,gt){return Bn(e,ie(ce,Ue),"div",ge,gt)}function Ct(Ue,gt,et){var Ge=Cs(e,ge,null,Ue),je=gt=="ltr"==(et=="after")?"left":"right",Fe=et=="after"?Ge.begin:Ge.end-(/\s/.test(ge.text.charAt(Ge.end-1))?2:1);return He(Fe,je)[je]}var _t=wt(ge,n.direction);return Ji(_t,he||0,Se??ke,function(Ue,gt,et,Ge){var je=et=="ltr",Fe=He(Ue,je?"left":"right"),yt=He(gt-1,je?"right":"left"),Gi=he==null&&Ue==0,Fr=Se==null&&gt==ke,at=Ge==0,Yt=!_t||Ge==_t.length-1;if(yt.top-Fe.top<=3){var Ve=(T?Gi:Fr)&&at,zo=(T?Fr:Gi)&&Yt,fr=Ve?w:(je?Fe:yt).left,oi=zo?k:(je?yt:Fe).right;F(fr,Fe.top,oi-fr,Fe.bottom)}else{var si,ct,Xi,Ko;je?(si=T&&Gi&&at?w:Fe.left,ct=T?k:Ct(Ue,et,"before"),Xi=T?w:Ct(gt,et,"after"),Ko=T&&Fr&&Yt?k:yt.right):(si=T?Ct(Ue,et,"before"):w,ct=!T&&Gi&&at?k:Fe.right,Xi=!T&&Fr&&Yt?w:yt.left,Ko=T?Ct(gt,et,"after"):k),F(si,Fe.top,ct-si,Fe.bottom),Fe.bottom<yt.top&&F(w,Fe.bottom,null,yt.top),F(Xi,yt.top,Ko-Xi,yt.bottom)}(!Re||Hn(Fe,Re)<0)&&(Re=Fe),Hn(yt,Re)<0&&(Re=yt),(!$e||Hn(Fe,$e)<0)&&($e=Fe),Hn(yt,$e)<0&&($e=yt)}),{start:Re,end:$e}}var Z=t.from(),G=t.to();if(Z.line==G.line)N(Z.line,Z.ch,G.ch);else{var $=pe(n,Z.line),ee=pe(n,G.line),se=Ke($)==Ke(ee),le=N(Z.line,Z.ch,se?$.text.length+1:null).end,ue=N(G.line,se?0:null,G.ch).start;se&&(le.top<ue.top-2?(F(le.right,le.top,null,le.bottom),F(w,ue.top,ue.left,ue.bottom)):F(le.right,le.top,ue.left-le.right,le.bottom)),le.bottom<ue.top&&F(w,le.bottom,null,ue.top)}i.appendChild(c)}function mo(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Bi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ks(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||So(e))}function bo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Bi(e))},100)}function So(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Oe(e,"focus",e,t),e.state.focused=!0,I(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),S&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),mo(e))}function Bi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Oe(e,"blur",e,t),e.state.focused=!1,R(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function In(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),n=t.lineDiv.getBoundingClientRect().top,c=0,g=0;g<t.view.length;g++){var w=t.view[g],k=e.options.lineWrapping,T=void 0,F=0;if(!w.hidden){if(n+=w.line.height,x&&_<8){var N=w.node.offsetTop+w.node.offsetHeight;T=N-i,i=N}else{var Z=w.node.getBoundingClientRect();T=Z.bottom-Z.top,!k&&w.text.firstChild&&(F=w.text.firstChild.getBoundingClientRect().right-Z.left-1)}var G=w.line.height-T;if((G>.005||G<-.005)&&(n<r&&(c-=G),ht(w.line,T),Es(w.line),w.rest))for(var $=0;$<w.rest.length;$++)Es(w.rest[$]);if(F>e.display.sizerWidth){var ee=Math.ceil(F/Di(e.display));ee>e.display.maxLineLength&&(e.display.maxLineLength=ee,e.display.maxLine=w.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function Es(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Fn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-On(e));var n=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,c=Tt(t,r),g=Tt(t,n);if(i&&i.ensure){var w=i.ensure.from.line,k=i.ensure.to.line;w<c?(c=w,g=Tt(t,ot(pe(t,w))+e.wrapper.clientHeight)):Math.min(k,t.lastLine())>=g&&(c=Tt(t,ot(pe(t,k))-e.wrapper.clientHeight),g=k)}return{from:c,to:Math.max(g,c+1)}}function Ul(e,t){if(!Pe(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!h){var c=D("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-On(e.display))+`px;
                         height: `+(t.bottom-t.top+Gt(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(n),e.display.lineSpace.removeChild(c)}}}function jl(e,t,i,r){r==null&&(r=0);var n;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?ie(t.line,t.ch+1,"before"):t,t=t.ch?ie(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var g=!1,w=Ft(e,t),k=!i||i==t?w:Ft(e,i);n={left:Math.min(w.left,k.left),top:Math.min(w.top,k.top)-r,right:Math.max(w.left,k.left),bottom:Math.max(w.bottom,k.bottom)+r};var T=Co(e,n),F=e.doc.scrollTop,N=e.doc.scrollLeft;if(T.scrollTop!=null&&(an(e,T.scrollTop),Math.abs(e.doc.scrollTop-F)>1&&(g=!0)),T.scrollLeft!=null&&(ti(e,T.scrollLeft),Math.abs(e.doc.scrollLeft-N)>1&&(g=!0)),!g)break}return n}function ql(e,t){var i=Co(e,t);i.scrollTop!=null&&an(e,i.scrollTop),i.scrollLeft!=null&&ti(e,i.scrollLeft)}function Co(e,t){var i=e.display,r=Oi(e.display);t.top<0&&(t.top=0);var n=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=lo(e),g={};t.bottom-t.top>c&&(t.bottom=t.top+c);var w=e.doc.height+ao(i),k=t.top<r,T=t.bottom>w-r;if(t.top<n)g.scrollTop=k?0:t.top;else if(t.bottom>n+c){var F=Math.min(t.top,(T?w:t.bottom)-c);F!=n&&(g.scrollTop=F)}var N=e.options.fixedGutter?0:i.gutters.offsetWidth,Z=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-N,G=$r(e)-i.gutters.offsetWidth,$=t.right-t.left>G;return $&&(t.right=t.left+G),t.left<10?g.scrollLeft=0:t.left<Z?g.scrollLeft=Math.max(0,t.left+N-($?0:10)):t.right>G+Z-3&&(g.scrollLeft=t.right+($?0:10)-G),g}function wo(e,t){t!=null&&(Wn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Pi(e){Wn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function sn(e,t,i){(t!=null||i!=null)&&Wn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function zl(e,t){Wn(e),e.curOp.scrollToPos=t}function Wn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=bs(e,t.from),r=bs(e,t.to);Ms(e,i,r,t.margin)}}function Ms(e,t,i,r){var n=Co(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});sn(e,n.scrollLeft,n.scrollTop)}function an(e,t){Math.abs(e.doc.scrollTop-t)<2||(ae||xo(e,{top:t}),As(e,t,!0),ae&&xo(e),un(e,100))}function As(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function ti(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Bs(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ln(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+ao(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Gt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var ri=function(e,t,i){this.cm=i;var r=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,e(r),e(n),be(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),be(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,x&&_<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ri.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},ri.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ri.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ri.prototype.zeroWidthHack=function(){var e=o&&!u?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ce,this.disableVert=new Ce},ri.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var n=e.getBoundingClientRect(),c=i=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},ri.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var cn=function(){};cn.prototype.update=function(){return{bottom:0,right:0}},cn.prototype.setScrollLeft=function(){},cn.prototype.setScrollTop=function(){},cn.prototype.clear=function(){};function Hi(e,t){t||(t=ln(e));var i=e.display.barWidth,r=e.display.barHeight;Ts(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&In(e),Ts(e,ln(e)),i=e.display.barWidth,r=e.display.barHeight}function Ts(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var Rs={native:ri,null:cn};function Os(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Rs[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),be(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?ti(e,t):an(e,t)},e),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)}var Kl=0;function ii(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Kl,markArrays:null},Cl(e.curOp)}function ni(e){var t=e.curOp;t&&Ll(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;Gl(i)})}function Gl(e){for(var t=e.ops,i=0;i<t.length;i++)Xl(t[i]);for(var r=0;r<t.length;r++)Yl(t[r]);for(var n=0;n<t.length;n++)Zl(t[n]);for(var c=0;c<t.length;c++)Jl(t[c]);for(var g=0;g<t.length;g++)$l(t[g])}function Xl(e){var t=e.cm,i=t.display;Ql(t),e.updateMaxLine&&Jr(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Nn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yl(e){e.updatedDisplay=e.mustUpdate&&Lo(e.cm,e.update)}function Zl(e){var t=e.cm,i=t.display;e.updatedDisplay&&In(t),e.barMeasure=ln(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=fs(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Gt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-$r(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Jl(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&ti(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==B();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Hi(t,e.barMeasure),e.updatedDisplay&&Eo(t,e.barMeasure),e.selectionChanged&&mo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ks(e.cm)}function $l(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&Ds(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&As(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ti(t,e.scrollLeft,!0,!0),e.scrollToPos){var n=jl(t,xe(r,e.scrollToPos.from),xe(r,e.scrollToPos.to),e.scrollToPos.margin);Ul(t,n)}var c=e.maybeHiddenMarkers,g=e.maybeUnhiddenMarkers;if(c)for(var w=0;w<c.length;++w)c[w].lines.length||Oe(c[w],"hide");if(g)for(var k=0;k<g.length;++k)g[k].lines.length&&Oe(g[k],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Oe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function St(e,t){if(e.curOp)return t();ii(e);try{return t()}finally{ni(e)}}function Ze(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ii(e);try{return t.apply(e,arguments)}finally{ni(e)}}}function lt(e){return function(){if(this.curOp)return e.apply(this,arguments);ii(this);try{return e.apply(this,arguments)}finally{ni(this)}}}function Je(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ii(t);try{return e.apply(this,arguments)}finally{ni(t)}}}function un(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,oe(Vl,e))}function Vl(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=ir(e,t.highlightFrontier),n=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(r.line>=e.display.viewFrom){var g=c.styles,w=c.text.length>e.options.maxHighlightLength?Mt(t.mode,r.state):null,k=Ci(e,c,r,!0);w&&(r.state=w),c.styles=k.styles;var T=c.styleClasses,F=k.classes;F?c.styleClasses=F:T&&(c.styleClasses=null);for(var N=!g||g.length!=c.styles.length||T!=F&&(!T||!F||T.bgClass!=F.bgClass||T.textClass!=F.textClass),Z=0;!N&&Z<g.length;++Z)N=g[Z]!=c.styles[Z];N&&n.push(r.line),c.stateAfter=r.save(),r.nextLine()}else c.text.length<=e.options.maxHighlightLength&&Kr(e,c.text,r),c.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return un(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),n.length&&St(e,function(){for(var c=0;c<n.length;c++)Rr(e,n[c],"text")})}}var Nn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Fn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=$r(e),this.force=i,this.dims=vo(e),this.events=[]};Nn.prototype.signal=function(e,t){tt(e,t)&&this.events.push(arguments)},Nn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Oe.apply(null,this.events[e])};function Ql(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Gt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Gt(e)+"px",t.scrollbarsClipped=!0)}function ec(e){if(e.hasFocus())return null;var t=B();if(!t||!W(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&W(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function tc(e){if(!(!e||!e.activeElt||e.activeElt==B())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&W(document.body,e.anchorNode)&&W(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function Lo(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return Or(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Ls(e)==0)return!1;Ps(e)&&(Or(e),t.dims=vo(e));var n=r.first+r.size,c=Math.max(t.visible.from-e.options.viewportMargin,r.first),g=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(r.first,i.viewFrom)),i.viewTo>g&&i.viewTo-g<20&&(g=Math.min(n,i.viewTo)),Rt&&(c=It(e.doc,c),g=Zr(e.doc,g));var w=c!=i.viewFrom||g!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Wl(e,c,g),i.viewOffset=ot(pe(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var k=Ls(e);if(!w&&k==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var T=ec(e);return k>4&&(i.lineDiv.style.display="none"),rc(e,i.updateLineNumbers,t.dims),k>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,tc(T),M(i.cursorDiv),M(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,w&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,un(e,400)),i.updateLineNumbers=null,!0}function Ds(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==$r(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+ao(e.display)-lo(e),i.top)}),t.visible=Fn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Fn(e.display,e.doc,i));if(!Lo(e,t))break;In(e);var n=ln(e);on(e),Hi(e,n),Eo(e,n),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function xo(e,t){var i=new Nn(e,t);if(Lo(e,i)){In(e),Ds(e,i);var r=ln(e);on(e),Hi(e,r),Eo(e,r),i.finish()}}function rc(e,t,i){var r=e.display,n=e.options.lineNumbers,c=r.lineDiv,g=c.firstChild;function w($){var ee=$.nextSibling;return S&&o&&e.display.currentWheelTarget==$?$.style.display="none":$.parentNode.removeChild($),ee}for(var k=r.view,T=r.viewFrom,F=0;F<k.length;F++){var N=k[F];if(!N.hidden)if(!N.node||N.node.parentNode!=c){var Z=Al(e,N,T,i);c.insertBefore(Z,g)}else{for(;g!=N.node;)g=w(g);var G=n&&t!=null&&t<=T&&N.lineNumber;N.changes&&(ye(N.changes,"gutter")>-1&&(G=!1),os(e,N,T,i)),G&&(M(N.lineNumber),N.lineNumber.appendChild(document.createTextNode(xr(e.options,T)))),g=N.node.nextSibling}T+=N.size}for(;g;)g=w(g)}function ko(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Ye(e,"gutterChanged",e)}function Eo(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Gt(e)+"px"}function Bs(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=_o(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,c=r+"px",g=0;g<i.length;g++)if(!i[g].hidden){e.options.fixedGutter&&(i[g].gutter&&(i[g].gutter.style.left=c),i[g].gutterBackground&&(i[g].gutterBackground.style.left=c));var w=i[g].alignable;if(w)for(var k=0;k<w.length;k++)w[k].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function Ps(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=xr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var n=r.measure.appendChild(D("div",[D("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=n.firstChild.offsetWidth,g=n.offsetWidth-c;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(c,r.lineGutter.offsetWidth-g)+1,r.lineNumWidth=r.lineNumInnerWidth+g,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ko(e.display),!0}return!1}function Mo(e,t){for(var i=[],r=!1,n=0;n<e.length;n++){var c=e[n],g=null;if(typeof c!="string"&&(g=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:c,style:g})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Hs(e){var t=e.gutters,i=e.gutterSpecs;M(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var n=i[r],c=n.className,g=n.style,w=t.appendChild(D("div",null,"CodeMirror-gutter "+c));g&&(w.style.cssText=g),c=="CodeMirror-linenumbers"&&(e.lineGutter=w,w.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",ko(e)}function hn(e){Hs(e.display),pt(e),Bs(e)}function ic(e,t,i,r){var n=this;this.input=i,n.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=D("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=P("div",null,"CodeMirror-code"),n.selectionDiv=D("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=D("div",null,"CodeMirror-cursors"),n.measure=D("div",null,"CodeMirror-measure"),n.lineMeasure=D("div",null,"CodeMirror-measure"),n.lineSpace=P("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var c=P("div",[n.lineSpace],"CodeMirror-lines");n.mover=D("div",[c],null,"position: relative"),n.sizer=D("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=D("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),n.gutters=D("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=D("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=D("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),n.wrapper.setAttribute("translate","no"),x&&_<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!S&&!(ae&&s)&&(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=Mo(r.gutters,r.lineNumbers),Hs(n),i.init(n)}var Un=0,ur=null;x?ur=-.53:ae?ur=15:m?ur=-.7:y&&(ur=-1/3);function Is(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function nc(e){var t=Is(e);return t.x*=ur,t.y*=ur,t}function Fs(e,t){var i=Is(t),r=i.x,n=i.y,c=ur;t.deltaMode===0&&(r=t.deltaX,n=t.deltaY,c=1);var g=e.display,w=g.scroller,k=w.scrollWidth>w.clientWidth,T=w.scrollHeight>w.clientHeight;if(!!(r&&k||n&&T)){if(n&&o&&S){e:for(var F=t.target,N=g.view;F!=w;F=F.parentNode)for(var Z=0;Z<N.length;Z++)if(N[Z].node==F){e.display.currentWheelTarget=F;break e}}if(r&&!ae&&!b&&c!=null){n&&T&&an(e,Math.max(0,w.scrollTop+n*c)),ti(e,Math.max(0,w.scrollLeft+r*c)),(!n||n&&T)&&ze(t),g.wheelStartX=null;return}if(n&&c!=null){var G=n*c,$=e.doc.scrollTop,ee=$+g.wrapper.clientHeight;G<0?$=Math.max(0,$+G-50):ee=Math.min(e.doc.height,ee+G+50),xo(e,{top:$,bottom:ee})}Un<20&&t.deltaMode!==0&&(g.wheelStartX==null?(g.wheelStartX=w.scrollLeft,g.wheelStartY=w.scrollTop,g.wheelDX=r,g.wheelDY=n,setTimeout(function(){if(g.wheelStartX!=null){var se=w.scrollLeft-g.wheelStartX,le=w.scrollTop-g.wheelStartY,ue=le&&g.wheelDY&&le/g.wheelDY||se&&g.wheelDX&&se/g.wheelDX;g.wheelStartX=g.wheelStartY=null,!!ue&&(ur=(ur*Un+ue)/(Un+1),++Un)}},200)):(g.wheelDX+=r,g.wheelDY+=n))}}var kt=function(e,t){this.ranges=e,this.primIndex=t};kt.prototype.primary=function(){return this.ranges[this.primIndex]},kt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!kr(i.anchor,r.anchor)||!kr(i.head,r.head))return!1}return!0},kt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Me(Er(this.ranges[t].anchor),Er(this.ranges[t].head));return new kt(e,this.primIndex)},kt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},kt.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(we(t,r.from())>=0&&we(e,r.to())<=0)return i}return-1};var Me=function(e,t){this.anchor=e,this.head=t};Me.prototype.from=function(){return rr(this.anchor,this.head)},Me.prototype.to=function(){return tr(this.anchor,this.head)},Me.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Wt(e,t,i){var r=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(Z,G){return we(Z.from(),G.from())}),i=ye(t,n);for(var c=1;c<t.length;c++){var g=t[c],w=t[c-1],k=we(w.to(),g.from());if(r&&!g.empty()?k>0:k>=0){var T=rr(w.from(),g.from()),F=tr(w.to(),g.to()),N=w.empty()?g.from()==g.head:w.from()==w.head;c<=i&&--i,t.splice(--c,2,new Me(N?F:T,N?T:F))}}return new kt(t,i)}function Dr(e,t){return new kt([new Me(e,t||e)],0)}function Br(e){return e.text?ie(e.from.line+e.text.length-1,Le(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Ws(e,t){if(we(e,t.from)<0)return e;if(we(e,t.to)<=0)return Br(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Br(t).ch-t.to.ch),ie(i,r)}function Ao(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new Me(Ws(n.anchor,t),Ws(n.head,t)))}return Wt(e.cm,i,e.sel.primIndex)}function Ns(e,t,i){return e.line==t.line?ie(i.line,e.ch-t.ch+i.ch):ie(i.line+(e.line-t.line),e.ch)}function oc(e,t,i){for(var r=[],n=ie(e.first,0),c=n,g=0;g<t.length;g++){var w=t[g],k=Ns(w.from,n,c),T=Ns(Br(w),n,c);if(n=w.to,c=T,i=="around"){var F=e.sel.ranges[g],N=we(F.head,F.anchor)<0;r[g]=new Me(N?T:k,N?k:T)}else r[g]=new Me(k,k)}return new kt(r,e.sel.primIndex)}function To(e){e.doc.mode=Cr(e.options,e.doc.modeOption),fn(e)}function fn(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,un(e,100),e.state.modeGen++,e.curOp&&pt(e)}function Us(e,t){return t.from.ch==0&&t.to.ch==0&&Le(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ro(e,t,i,r){function n(ue){return i?i[ue]:null}function c(ue,ce,he){lr(ue,ce,he,r),Ye(ue,"change",ue,t)}function g(ue,ce){for(var he=[],Se=ue;Se<ce;++Se)he.push(new bt(T[Se],n(Se),r));return he}var w=t.from,k=t.to,T=t.text,F=pe(e,w.line),N=pe(e,k.line),Z=Le(T),G=n(T.length-1),$=k.line-w.line;if(t.full)e.insert(0,g(0,T.length)),e.remove(T.length,e.size-T.length);else if(Us(e,t)){var ee=g(0,T.length-1);c(N,N.text,G),$&&e.remove(w.line,$),ee.length&&e.insert(w.line,ee)}else if(F==N)if(T.length==1)c(F,F.text.slice(0,w.ch)+Z+F.text.slice(k.ch),G);else{var se=g(1,T.length-1);se.push(new bt(Z+F.text.slice(k.ch),G,r)),c(F,F.text.slice(0,w.ch)+T[0],n(0)),e.insert(w.line+1,se)}else if(T.length==1)c(F,F.text.slice(0,w.ch)+T[0]+N.text.slice(k.ch),n(0)),e.remove(w.line+1,$);else{c(F,F.text.slice(0,w.ch)+T[0],n(0)),c(N,Z+N.text.slice(k.ch),G);var le=g(1,T.length-1);$>1&&e.remove(w.line+1,$-1),e.insert(w.line+1,le)}Ye(e,"change",e,t)}function Pr(e,t,i){function r(n,c,g){if(n.linked)for(var w=0;w<n.linked.length;++w){var k=n.linked[w];if(k.doc!=c){var T=g&&k.sharedHist;i&&!T||(t(k.doc,T),r(k.doc,n,T))}}}r(e,null,!0)}function js(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,go(e),To(e),qs(e),e.options.direction=t.direction,e.options.lineWrapping||Jr(e),e.options.mode=t.modeOption,pt(e)}function qs(e){(e.doc.direction=="rtl"?I:R)(e.display.lineDiv,"CodeMirror-rtl")}function sc(e){St(e,function(){qs(e),pt(e)})}function jn(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Oo(e,t){var i={from:Er(t.from),to:Br(t),text:At(e,t.from,t.to)};return Gs(e,i,t.from.line,t.to.line+1),Pr(e,function(r){return Gs(r,i,t.from.line,t.to.line+1)},!0),i}function zs(e){for(;e.length;){var t=Le(e);if(t.ranges)e.pop();else break}}function ac(e,t){if(t)return zs(e.done),Le(e.done);if(e.done.length&&!Le(e.done).ranges)return Le(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Le(e.done)}function Ks(e,t,i,r){var n=e.history;n.undone.length=0;var c=+new Date,g,w;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&n.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(g=ac(n,n.lastOp==r)))w=Le(g.changes),we(t.from,t.to)==0&&we(t.from,w.to)==0?w.to=Br(t):g.changes.push(Oo(e,t));else{var k=Le(n.done);for((!k||!k.ranges)&&qn(e.sel,n.done),g={changes:[Oo(e,t)],generation:n.generation},n.done.push(g);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=c,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,w||Oe(e,"historyAdded")}function lc(e,t,i,r){var n=t.charAt(0);return n=="*"||n=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function cc(e,t,i,r){var n=e.history,c=r&&r.origin;i==n.lastSelOp||c&&n.lastSelOrigin==c&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==c||lc(e,c,Le(n.done),t))?n.done[n.done.length-1]=t:qn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=c,n.lastSelOp=i,r&&r.clearRedo!==!1&&zs(n.undone)}function qn(e,t){var i=Le(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Gs(e,t,i,r){var n=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(g){g.markedSpans&&((n||(n=t["spans_"+e.id]={}))[c]=g.markedSpans),++c})}function uc(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function hc(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(uc(i[n]));return r}function Xs(e,t){var i=hc(e,t),r=We(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var c=i[n],g=r[n];if(c&&g){e:for(var w=0;w<g.length;++w){for(var k=g[w],T=0;T<c.length;++T)if(c[T].marker==k.marker)continue e;c.push(k)}}else g&&(i[n]=g)}return i}function Ii(e,t,i){for(var r=[],n=0;n<e.length;++n){var c=e[n];if(c.ranges){r.push(i?kt.prototype.deepCopy.call(c):c);continue}var g=c.changes,w=[];r.push({changes:w});for(var k=0;k<g.length;++k){var T=g[k],F=void 0;if(w.push({from:T.from,to:T.to,text:T.text}),t)for(var N in T)(F=N.match(/^spans_(\d+)$/))&&ye(t,Number(F[1]))>-1&&(Le(w)[N]=T[N],delete T[N])}}return r}function Do(e,t,i,r){if(r){var n=e.anchor;if(i){var c=we(t,n)<0;c!=we(i,n)<0?(n=t,t=i):c!=we(t,i)<0&&(t=i)}return new Me(n,t)}else return new Me(i||t,t)}function zn(e,t,i,r,n){n==null&&(n=e.cm&&(e.cm.display.shift||e.extend)),st(e,new kt([Do(e.sel.primary(),t,i,n)],0),r)}function Ys(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)r[c]=Do(e.sel.ranges[c],t[c],null,n);var g=Wt(e.cm,r,e.sel.primIndex);st(e,g,i)}function Bo(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,st(e,Wt(e.cm,n,e.sel.primIndex),r)}function Zs(e,t,i,r){st(e,Dr(t,i),r)}function fc(e,t,i){var r={ranges:t.ranges,update:function(n){this.ranges=[];for(var c=0;c<n.length;c++)this.ranges[c]=new Me(xe(e,n[c].anchor),xe(e,n[c].head))},origin:i&&i.origin};return Oe(e,"beforeSelectionChange",e,r),e.cm&&Oe(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Wt(e.cm,r.ranges,r.ranges.length-1):t}function Js(e,t,i){var r=e.history.done,n=Le(r);n&&n.ranges?(r[r.length-1]=t,Kn(e,t,i)):st(e,t,i)}function st(e,t,i){Kn(e,t,i),cc(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Kn(e,t,i){(tt(e,"beforeSelectionChange")||e.cm&&tt(e.cm,"beforeSelectionChange"))&&(t=fc(e,t,i));var r=i&&i.bias||(we(t.primary().head,e.sel.primary().head)<0?-1:1);$s(e,Qs(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Pi(e.cm)}function $s(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Nr(e.cm)),Ye(e,"cursorActivity",e))}function Vs(e){$s(e,Qs(e,e.sel,null,!1))}function Qs(e,t,i,r){for(var n,c=0;c<t.ranges.length;c++){var g=t.ranges[c],w=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],k=Gn(e,g.anchor,w&&w.anchor,i,r),T=Gn(e,g.head,w&&w.head,i,r);(n||k!=g.anchor||T!=g.head)&&(n||(n=t.ranges.slice(0,c)),n[c]=new Me(k,T))}return n?Wt(e.cm,n,t.primIndex):t}function Fi(e,t,i,r,n){var c=pe(e,t.line);if(c.markedSpans)for(var g=0;g<c.markedSpans.length;++g){var w=c.markedSpans[g],k=w.marker,T="selectLeft"in k?!k.selectLeft:k.inclusiveLeft,F="selectRight"in k?!k.selectRight:k.inclusiveRight;if((w.from==null||(T?w.from<=t.ch:w.from<t.ch))&&(w.to==null||(F?w.to>=t.ch:w.to>t.ch))){if(n&&(Oe(k,"beforeCursorEnter"),k.explicitlyCleared))if(c.markedSpans){--g;continue}else break;if(!k.atomic)continue;if(i){var N=k.find(r<0?1:-1),Z=void 0;if((r<0?F:T)&&(N=ea(e,N,-r,N&&N.line==t.line?c:null)),N&&N.line==t.line&&(Z=we(N,i))&&(r<0?Z<0:Z>0))return Fi(e,N,t,r,n)}var G=k.find(r<0?-1:1);return(r<0?T:F)&&(G=ea(e,G,r,G.line==t.line?c:null)),G?Fi(e,G,t,r,n):null}}return t}function Gn(e,t,i,r,n){var c=r||1,g=Fi(e,t,i,c,n)||!n&&Fi(e,t,i,c,!0)||Fi(e,t,i,-c,n)||!n&&Fi(e,t,i,-c,!0);return g||(e.cantEdit=!0,ie(e.first,0))}function ea(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?xe(e,ie(t.line-1)):null:i>0&&t.ch==(r||pe(e,t.line)).text.length?t.line<e.first+e.size-1?ie(t.line+1,0):null:new ie(t.line,t.ch+i)}function ta(e){e.setSelection(ie(e.firstLine(),0),ie(e.lastLine()),U)}function ra(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(n,c,g,w){n&&(r.from=xe(e,n)),c&&(r.to=xe(e,c)),g&&(r.text=g),w!==void 0&&(r.origin=w)}),Oe(e,"beforeChange",e,r),e.cm&&Oe(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Wi(e,t,i){if(e.cm){if(!e.cm.curOp)return Ze(e.cm,Wi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((tt(e,"beforeChange")||e.cm&&tt(e.cm,"beforeChange"))&&(t=ra(e,t,!0),!t))){var r=An&&!i&&Dt(e,t.from,t.to);if(r)for(var n=r.length-1;n>=0;--n)ia(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else ia(e,t)}}function ia(e,t){if(!(t.text.length==1&&t.text[0]==""&&we(t.from,t.to)==0)){var i=Ao(e,t);Ks(e,t,i,e.cm?e.cm.curOp.id:NaN),dn(e,t,i,We(e,t));var r=[];Pr(e,function(n,c){!c&&ye(r,n.history)==-1&&(aa(n.history,t),r.push(n.history)),dn(n,t,null,We(n,t))})}}function Xn(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var n=e.history,c,g=e.sel,w=t=="undo"?n.done:n.undone,k=t=="undo"?n.undone:n.done,T=0;T<w.length&&(c=w[T],!(i?c.ranges&&!c.equals(e.sel):!c.ranges));T++);if(T!=w.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(c=w.pop(),c.ranges){if(qn(c,k),i&&!c.equals(e.sel)){st(e,c,{clearRedo:!1});return}g=c}else if(r){w.push(c);return}else break;var F=[];qn(g,k),k.push({changes:F,generation:n.generation}),n.generation=c.generation||++n.maxGeneration;for(var N=tt(e,"beforeChange")||e.cm&&tt(e.cm,"beforeChange"),Z=function(ee){var se=c.changes[ee];if(se.origin=t,N&&!ra(e,se,!1))return w.length=0,{};F.push(Oo(e,se));var le=ee?Ao(e,se):Le(w);dn(e,se,le,Xs(e,se)),!ee&&e.cm&&e.cm.scrollIntoView({from:se.from,to:Br(se)});var ue=[];Pr(e,function(ce,he){!he&&ye(ue,ce.history)==-1&&(aa(ce.history,se),ue.push(ce.history)),dn(ce,se,null,Xs(ce,se))})},G=c.changes.length-1;G>=0;--G){var $=Z(G);if($)return $.v}}}}function na(e,t){if(t!=0&&(e.first+=t,e.sel=new kt(qe(e.sel.ranges,function(n){return new Me(ie(n.anchor.line+t,n.anchor.ch),ie(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){pt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)Rr(e.cm,r,"gutter")}}function dn(e,t,i,r){if(e.cm&&!e.cm.curOp)return Ze(e.cm,dn)(e,t,i,r);if(t.to.line<e.first){na(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);na(e,n),t={from:ie(e.first,0),to:ie(t.to.line+n,t.to.ch),text:[Le(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:ie(c,pe(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=At(e,t.from,t.to),i||(i=Ao(e,t)),e.cm?dc(e.cm,t,r):Ro(e,t,r),Kn(e,i,U),e.cantEdit&&Gn(e,ie(e.firstLine(),0))&&(e.cantEdit=!1)}}function dc(e,t,i){var r=e.doc,n=e.display,c=t.from,g=t.to,w=!1,k=c.line;e.options.lineWrapping||(k=Ee(Ke(pe(r,c.line))),r.iter(k,g.line+1,function(G){if(G==n.maxLine)return w=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Nr(e),Ro(r,t,i,ws(e)),e.options.lineWrapping||(r.iter(k,c.line+t.text.length,function(G){var $=Tr(G);$>n.maxLineLength&&(n.maxLine=G,n.maxLineLength=$,n.maxLineChanged=!0,w=!1)}),w&&(e.curOp.updateMaxLine=!0)),Mn(r,c.line),un(e,400);var T=t.text.length-(g.line-c.line)-1;t.full?pt(e):c.line==g.line&&t.text.length==1&&!Us(e.doc,t)?Rr(e,c.line,"text"):pt(e,c.line,g.line+1,T);var F=tt(e,"changes"),N=tt(e,"change");if(N||F){var Z={from:c,to:g,text:t.text,removed:t.removed,origin:t.origin};N&&Ye(e,"change",e,Z),F&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(Z)}e.display.selForContextMenu=null}function Ni(e,t,i,r,n){var c;r||(r=i),we(r,i)<0&&(c=[r,i],i=c[0],r=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Wi(e,{from:i,to:r,text:t,origin:n})}function oa(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function sa(e,t,i,r){for(var n=0;n<e.length;++n){var c=e[n],g=!0;if(c.ranges){c.copied||(c=e[n]=c.deepCopy(),c.copied=!0);for(var w=0;w<c.ranges.length;w++)oa(c.ranges[w].anchor,t,i,r),oa(c.ranges[w].head,t,i,r);continue}for(var k=0;k<c.changes.length;++k){var T=c.changes[k];if(i<T.from.line)T.from=ie(T.from.line+r,T.from.ch),T.to=ie(T.to.line+r,T.to.ch);else if(t<=T.to.line){g=!1;break}}g||(e.splice(0,n+1),n=0)}}function aa(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;sa(e.done,i,r,n),sa(e.undone,i,r,n)}function pn(e,t,i,r){var n=t,c=t;return typeof t=="number"?c=pe(e,zr(e,t)):n=Ee(t),n==null?null:(r(c,n)&&e.cm&&Rr(e.cm,n,i),c)}function vn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}vn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var n=this.lines[i];this.height-=n.height,oo(n),Ye(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function _n(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}_n.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var c=Math.min(t,n-e),g=r.height;if(r.removeInner(e,c),this.height-=g-r.height,n==c&&(this.children.splice(i--,1),r.parent=null),(t-=c)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof vn))){var w=[];this.collapse(w),this.children=[new vn(w)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<=c){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(var g=n.lines.length%25+25,w=g;w<n.lines.length;){var k=new vn(n.lines.slice(w,w+=25));n.height-=k.height,this.children.splice(++r,0,k),k.parent=this}n.lines=n.lines.slice(0,g),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new _n(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=ye(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new _n(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<c){var g=Math.min(t,c-e);if(n.iterN(e,g,i))return!0;if((t-=g)==0)break;e=0}else e-=c}}};var gn=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};gn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=Ee(i);if(!(r==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var c=rn(this);ht(i,Math.max(0,i.height-c)),e&&(St(e,function(){la(e,i,-c),Rr(e,r,"widget")}),Ye(e,"lineWidgetCleared",e,this,r))}},gn.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=rn(this)-t;!n||(nt(this.doc,r)||ht(r,r.height+n),i&&St(i,function(){i.curOp.forceUpdate=!0,la(i,r,n),Ye(i,"lineWidgetChanged",i,e,Ee(r))}))},Bt(gn);function la(e,t,i){ot(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&wo(e,i)}function pc(e,t,i,r){var n=new gn(e,i,r),c=e.cm;return c&&n.noHScroll&&(c.display.alignWidgets=!0),pn(e,t,"widget",function(g){var w=g.widgets||(g.widgets=[]);if(n.insertAt==null?w.push(n):w.splice(Math.min(w.length,Math.max(0,n.insertAt)),0,n),n.line=g,c&&!nt(e,g)){var k=ot(g)<e.scrollTop;ht(g,g.height+rn(n)),k&&wo(c,n.height),c.curOp.forceUpdate=!0}return!0}),c&&Ye(c,"lineWidgetAdded",c,n,typeof t=="number"?t:Ee(t)),n}var ca=0,Hr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ca};Hr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ii(e),tt(this,"clear")){var i=this.find();i&&Ye(this,"clear",i.from,i.to)}for(var r=null,n=null,c=0;c<this.lines.length;++c){var g=this.lines[c],w=Q(g.markedSpans,this);e&&!this.collapsed?Rr(e,Ee(g),"text"):e&&(w.to!=null&&(n=Ee(g)),w.from!=null&&(r=Ee(g))),g.markedSpans=V(g.markedSpans,w),w.from==null&&this.collapsed&&!nt(this.doc,g)&&e&&ht(g,Oi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var k=0;k<this.lines.length;++k){var T=Ke(this.lines[k]),F=Tr(T);F>e.display.maxLineLength&&(e.display.maxLine=T,e.display.maxLineLength=F,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&pt(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Vs(e.doc)),e&&Ye(e,"markerCleared",e,this,r,n),t&&ni(e),this.parent&&this.parent.clear()}},Hr.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,n=0;n<this.lines.length;++n){var c=this.lines[n],g=Q(c.markedSpans,this);if(g.from!=null&&(i=ie(t?c:Ee(c),g.from),e==-1))return i;if(g.to!=null&&(r=ie(t?c:Ee(c),g.to),e==1))return r}return i&&{from:i,to:r}},Hr.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||St(r,function(){var n=t.line,c=Ee(t.line),g=co(r,c);if(g&&(vs(g),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!nt(i.doc,n)&&i.height!=null){var w=i.height;i.height=null;var k=rn(i)-w;k&&ht(n,n.height+k)}Ye(r,"markerChanged",r,e)})},Hr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ye(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Hr.prototype.detachLine=function(e){if(this.lines.splice(ye(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Bt(Hr);function Ui(e,t,i,r,n){if(r&&r.shared)return vc(e,t,i,r,n);if(e.cm&&!e.cm.curOp)return Ze(e.cm,Ui)(e,t,i,r,n);var c=new Hr(e,n),g=we(t,i);if(r&&ne(r,c,!1),g>0||g==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=P("span",[c.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(Ie(e,t.line,t,i,c)||t.line!=i.line&&Ie(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");no()}c.addToHistory&&Ks(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var w=t.line,k=e.cm,T;if(e.iter(w,i.line+1,function(N){k&&c.collapsed&&!k.options.lineWrapping&&Ke(N)==k.display.maxLine&&(T=!0),c.collapsed&&w!=t.line&&ht(N,0),Ot(N,new Ai(c,w==t.line?t.ch:null,w==i.line?i.ch:null),e.cm&&e.cm.curOp),++w}),c.collapsed&&e.iter(t.line,i.line+1,function(N){nt(e,N)&&ht(N,0)}),c.clearOnEnter&&be(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(Tn(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++ca,c.atomic=!0),k){if(T&&(k.curOp.updateMaxLine=!0),c.collapsed)pt(k,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var F=t.line;F<=i.line;F++)Rr(k,F,"text");c.atomic&&Vs(k.doc),Ye(k,"markerAdded",k,c)}return c}var yn=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};yn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ye(this,"clear")}},yn.prototype.find=function(e,t){return this.primary.find(e,t)},Bt(yn);function vc(e,t,i,r,n){r=ne(r),r.shared=!1;var c=[Ui(e,t,i,r,n)],g=c[0],w=r.widgetNode;return Pr(e,function(k){w&&(r.widgetNode=w.cloneNode(!0)),c.push(Ui(k,xe(k,t),xe(k,i),r,n));for(var T=0;T<k.linked.length;++T)if(k.linked[T].isParent)return;g=Le(c)}),new yn(c,g)}function ua(e){return e.findMarks(ie(e.first,0),e.clipPos(ie(e.lastLine())),function(t){return t.parent})}function _c(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),c=e.clipPos(n.from),g=e.clipPos(n.to);if(we(c,g)){var w=Ui(e,c,g,r.primary,r.primary.type);r.markers.push(w),w.parent=r}}}function gc(e){for(var t=function(r){var n=e[r],c=[n.primary.doc];Pr(n.primary.doc,function(k){return c.push(k)});for(var g=0;g<n.markers.length;g++){var w=n.markers[g];ye(c,w.doc)==-1&&(w.parent=null,n.markers.splice(g--,1))}},i=0;i<e.length;i++)t(i)}var yc=0,vt=function(e,t,i,r,n){if(!(this instanceof vt))return new vt(e,t,i,r,n);i==null&&(i=0),_n.call(this,[new vn([new bt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=ie(i,0);this.sel=Dr(c),this.history=new jn(null),this.id=++yc,this.modeOption=t,this.lineSep=r,this.direction=n=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Ro(this,{from:c,to:c,text:e}),st(this,Dr(c),U)};vt.prototype=ut(_n.prototype,{constructor:vt,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Lr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Je(function(e){var t=ie(this.first,0),i=this.first+this.size-1;Wi(this,{from:t,to:ie(i,pe(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&sn(this.cm,0,0),st(this,Dr(t),U)}),replaceRange:function(e,t,i,r){t=xe(this,t),i=i?xe(this,i):t,Ni(this,e,t,i,r)},getRange:function(e,t,i){var r=At(this,xe(this,e),xe(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(qt(this,e))return pe(this,e)},getLineNumber:function(e){return Ee(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=pe(this,e)),Ke(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xe(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Je(function(e,t,i){Zs(this,xe(this,typeof e=="number"?ie(e,t||0):e),null,i)}),setSelection:Je(function(e,t,i){Zs(this,xe(this,e),xe(this,t||e),i)}),extendSelection:Je(function(e,t,i){zn(this,xe(this,e),t&&xe(this,t),i)}),extendSelections:Je(function(e,t){Ys(this,Si(this,e),t)}),extendSelectionsBy:Je(function(e,t){var i=qe(this.sel.ranges,e);Ys(this,Si(this,i),t)}),setSelections:Je(function(e,t,i){if(!!e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new Me(xe(this,e[n].anchor),xe(this,e[n].head||e[n].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),st(this,Wt(this.cm,r,t),i)}}),addSelection:Je(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Me(xe(this,e),xe(this,t||e))),st(this,Wt(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var n=At(this,t[r].from(),t[r].to());i=i?i.concat(n):n}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=At(this,i[r].from(),i[r].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:Je(function(e,t,i){for(var r=[],n=this.sel,c=0;c<n.ranges.length;c++){var g=n.ranges[c];r[c]={from:g.from(),to:g.to(),text:this.splitLines(e[c]),origin:i}}for(var w=t&&t!="end"&&oc(this,r,t),k=r.length-1;k>=0;k--)Wi(this,r[k]);w?Js(this,w):this.cm&&Pi(this.cm)}),undo:Je(function(){Xn(this,"undo")}),redo:Je(function(){Xn(this,"redo")}),undoSelection:Je(function(){Xn(this,"undo",!0)}),redoSelection:Je(function(){Xn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new jn(this.history),Pr(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ii(this.history.done),undone:Ii(this.history.undone)}},setHistory:function(e){var t=this.history=new jn(this.history);t.done=Ii(e.done.slice(0),null,!0),t.undone=Ii(e.undone.slice(0),null,!0)},setGutterMarker:Je(function(e,t,i){return pn(this,e,"gutter",function(r){var n=r.gutterMarkers||(r.gutterMarkers={});return n[t]=i,!i&&ci(n)&&(r.gutterMarkers=null),!0})}),clearGutter:Je(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&pn(t,i,"gutter",function(){return i.gutterMarkers[e]=null,ci(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!qt(this,e)||(t=e,e=pe(this,e),!e))return null}else if(t=Ee(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Je(function(e,t,i){return pn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[n])r[n]=i;else{if(O(i).test(r[n]))return!1;r[n]+=" "+i}return!0})}),removeLineClass:Je(function(e,t,i){return pn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=r[n];if(c)if(i==null)r[n]=null;else{var g=c.match(O(i));if(!g)return!1;var w=g.index+g[0].length;r[n]=c.slice(0,g.index)+(!g.index||w==c.length?"":" ")+c.slice(w)||null}else return!1;return!0})}),addLineWidget:Je(function(e,t,i){return pc(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Ui(this,xe(this,e),xe(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=xe(this,e),Ui(this,e,e,i,"bookmark")},findMarksAt:function(e){e=xe(this,e);var t=[],i=pe(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=xe(this,e),t=xe(this,t);var r=[],n=e.line;return this.iter(e.line,t.line+1,function(c){var g=c.markedSpans;if(g)for(var w=0;w<g.length;w++){var k=g[w];!(k.to!=null&&n==e.line&&e.ch>=k.to||k.from==null&&n!=e.line||k.from!=null&&n==t.line&&k.from>=t.ch)&&(!i||i(k.marker))&&r.push(k.marker.parent||k.marker)}++n}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(n){var c=n.text.length+r;if(c>e)return t=e,!0;e-=c,++i}),xe(this,ie(i,t))},indexFromPos:function(e){e=xe(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new vt(Lr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new vt(Lr(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],_c(r,ua(this)),r},unlinkDoc:function(e){if(e instanceof Be&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),gc(ua(this));break}}if(e.history==this.history){var r=[e.id];Pr(e,function(n){return r.push(n.id)},!0),e.history=new jn(null),e.history.done=Ii(this.history.done,r),e.history.undone=Ii(this.history.undone,r)}},iterLinkedDocs:function(e){Pr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):mr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Je(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&sc(this.cm))})}),vt.prototype.eachLine=vt.prototype.iter;var ha=0;function mc(e){var t=this;if(fa(t),!(Pe(t,e)||cr(t.display,e))){ze(e),x&&(ha=+new Date);var i=Qr(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var n=r.length,c=Array(n),g=0,w=function(){++g==n&&Ze(t,function(){i=xe(t.doc,i);var G={from:i,to:i,text:t.doc.splitLines(c.filter(function($){return $!=null}).join(t.doc.lineSeparator())),origin:"paste"};Wi(t.doc,G),Js(t.doc,Dr(xe(t.doc,i),xe(t.doc,Br(G))))})()},k=function(G,$){if(t.options.allowDropFileTypes&&ye(t.options.allowDropFileTypes,G.type)==-1){w();return}var ee=new FileReader;ee.onerror=function(){return w()},ee.onload=function(){var se=ee.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(se)){w();return}c[$]=se,w()},ee.readAsText(G)},T=0;T<r.length;T++)k(r[T],T);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var F=e.dataTransfer.getData("Text");if(F){var N;if(t.state.draggingText&&!t.state.draggingText.copy&&(N=t.listSelections()),Kn(t.doc,Dr(i,i)),N)for(var Z=0;Z<N.length;++Z)Ni(t.doc,"",N[Z].anchor,N[Z].head,"drag");t.replaceSelection(F,"around","paste"),t.display.input.focus()}}catch{}}}}function bc(e,t){if(x&&(!e.state.draggingText||+new Date-ha<100)){jt(t);return}if(!(Pe(e,t)||cr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!y)){var i=D("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),b&&i.parentNode.removeChild(i)}}function Sc(e,t){var i=Qr(e,t);if(!!i){var r=document.createDocumentFragment();yo(e,i,r),e.display.dragCursor||(e.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),A(e.display.dragCursor,r)}}function fa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function da(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&i.push(n)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var pa=!1;function Cc(){pa||(wc(),pa=!0)}function wc(){var e;be(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,da(Lc)},100))}),be(window,"blur",function(){return da(Bi)})}function Lc(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ir={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},mn=0;mn<10;mn++)Ir[mn+48]=Ir[mn+96]=String(mn);for(var Yn=65;Yn<=90;Yn++)Ir[Yn]=String.fromCharCode(Yn);for(var bn=1;bn<=12;bn++)Ir[bn+111]=Ir[bn+63235]="F"+bn;var hr={};hr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},hr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},hr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},hr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},hr.default=o?hr.macDefault:hr.pcDefault;function xc(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,n,c,g=0;g<t.length-1;g++){var w=t[g];if(/^(cmd|meta|m)$/i.test(w))c=!0;else if(/^a(lt)?$/i.test(w))i=!0;else if(/^(c|ctrl|control)$/i.test(w))r=!0;else if(/^s(hift)?$/i.test(w))n=!0;else throw new Error("Unrecognized modifier name: "+w)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function kc(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var n=qe(i.split(" "),xc),c=0;c<n.length;c++){var g=void 0,w=void 0;c==n.length-1?(w=n.join(" "),g=r):(w=n.slice(0,c+1).join(" "),g="...");var k=t[w];if(!k)t[w]=g;else if(k!=g)throw new Error("Inconsistent bindings for "+w)}delete e[i]}for(var T in t)e[T]=t[T];return e}function ji(e,t,i,r){t=Zn(t);var n=t.call?t.call(e,r):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&i(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return ji(e,t.fallthrough,i,r);for(var c=0;c<t.fallthrough.length;c++){var g=ji(e,t.fallthrough[c],i,r);if(g)return g}}}function va(e){var t=typeof e=="string"?e:Ir[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function _a(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(C?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(C?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function ga(e,t){if(b&&e.keyCode==34&&e.char)return!1;var i=Ir[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),_a(i,e,t))}function Zn(e){return typeof e=="string"?hr[e]:e}function qi(e,t){for(var i=e.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var c=t(i[n]);r.length&&we(c.from,Le(r).to)<=0;){var g=r.pop();if(we(g.from,c.from)<0){c.from=g.from;break}}r.push(c)}St(e,function(){for(var w=r.length-1;w>=0;w--)Ni(e.doc,"",r[w].from,r[w].to,"+delete");Pi(e)})}function Po(e,t,i){var r=ui(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Ho(e,t,i){var r=Po(e,t.ch,i);return r==null?null:new ie(t.line,r,i<0?"after":"before")}function Io(e,t,i,r,n){if(e){t.doc.direction=="rtl"&&(n=-n);var c=wt(i,t.doc.direction);if(c){var g=n<0?Le(c):c[0],w=n<0==(g.level==1),k=w?"after":"before",T;if(g.level>0||t.doc.direction=="rtl"){var F=Ri(t,i);T=n<0?i.text.length-1:0;var N=Xt(t,F,T).top;T=$t(function(Z){return Xt(t,F,Z).top==N},n<0==(g.level==1)?g.from:g.to-1,T),k=="before"&&(T=Po(i,T,1))}else T=n<0?g.to:g.from;return new ie(r,T,k)}}return new ie(r,n<0?i.text.length:0,n<0?"before":"after")}function Ec(e,t,i,r){var n=wt(t,e.doc.direction);if(!n)return Ho(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Qt(n,i.ch,i.sticky),g=n[c];if(e.doc.direction=="ltr"&&g.level%2==0&&(r>0?g.to>i.ch:g.from<i.ch))return Ho(t,i,r);var w=function(le,ue){return Po(t,le instanceof ie?le.ch:le,ue)},k,T=function(le){return e.options.lineWrapping?(k=k||Ri(e,t),Cs(e,t,k,le)):{begin:0,end:t.text.length}},F=T(i.sticky=="before"?w(i,-1):i.ch);if(e.doc.direction=="rtl"||g.level==1){var N=g.level==1==r<0,Z=w(i,N?1:-1);if(Z!=null&&(N?Z<=g.to&&Z<=F.end:Z>=g.from&&Z>=F.begin)){var G=N?"before":"after";return new ie(i.line,Z,G)}}var $=function(le,ue,ce){for(var he=function(Re,$e){return $e?new ie(i.line,w(Re,1),"before"):new ie(i.line,Re,"after")};le>=0&&le<n.length;le+=ue){var Se=n[le],ge=ue>0==(Se.level!=1),ke=ge?ce.begin:w(ce.end,-1);if(Se.from<=ke&&ke<Se.to||(ke=ge?Se.from:w(Se.to,-1),ce.begin<=ke&&ke<ce.end))return he(ke,ge)}},ee=$(c+r,r,F);if(ee)return ee;var se=r>0?F.end:w(F.begin,-1);return se!=null&&!(r>0&&se==t.text.length)&&(ee=$(r>0?0:n.length-1,r,T(se)),ee)?ee:null}var Sn={selectAll:ta,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U)},killLine:function(e){return qi(e,function(t){if(t.empty()){var i=pe(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:ie(t.head.line+1,0)}:{from:t.head,to:ie(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qi(e,function(t){return{from:ie(t.from().line,0),to:xe(e.doc,ie(t.to().line+1,0))}})},delLineLeft:function(e){return qi(e,function(t){return{from:ie(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ie(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ie(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ya(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ma(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Mc(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},K)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},K)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?ma(e,t.head):r},K)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var c=i[n].from(),g=_e(e.getLine(c.line),c.ch,r);t.push(Te(r-g%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return St(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var n=t[r].head,c=pe(e.doc,n.line).text;if(c){if(n.ch==c.length&&(n=new ie(n.line,n.ch-1)),n.ch>0)n=new ie(n.line,n.ch+1),e.replaceRange(c.charAt(n.ch-1)+c.charAt(n.ch-2),ie(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var g=pe(e.doc,n.line-1).text;g&&(n=new ie(n.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+g.charAt(g.length-1),ie(n.line-1,g.length-1),n,"+transpose"))}}i.push(new Me(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return St(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Pi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ya(e,t){var i=pe(e.doc,t),r=Ke(i);return r!=i&&(t=Ee(r)),Io(!0,e,r,t,1)}function Mc(e,t){var i=pe(e.doc,t),r=xt(i);return r!=i&&(t=Ee(r)),Io(!0,e,i,t,-1)}function ma(e,t){var i=ya(e,t.line),r=pe(e.doc,i.line),n=wt(r,e.doc.direction);if(!n||n[0].level==0){var c=Math.max(i.ch,r.text.search(/\S/)),g=t.line==i.line&&t.ch<=c&&t.ch;return ie(i.line,g?0:c,i.sticky)}return i}function Jn(e,t,i){if(typeof t=="string"&&(t=Sn[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=j}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}function Ac(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=ji(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&ji(t,e.options.extraKeys,i,e)||ji(t,e.options.keyMap,i,e)}var Tc=new Ce;function Cn(e,t,i,r){var n=e.state.keySeq;if(n){if(va(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Tc.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),ba(e,n+" "+t,i,r))return!0}return ba(e,t,i,r)}function ba(e,t,i,r){var n=Ac(e,t,r);return n=="multi"&&(e.state.keySeq=t),n=="handled"&&Ye(e,"keyHandled",e,t,i),(n=="handled"||n=="multi")&&(ze(i),mo(e)),!!n}function Sa(e,t){var i=ga(t,!0);return i?t.shiftKey&&!e.state.keySeq?Cn(e,"Shift-"+i,t,function(r){return Jn(e,r,!0)})||Cn(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return Jn(e,r)}):Cn(e,i,t,function(r){return Jn(e,r)}):!1}function Rc(e,t,i){return Cn(e,"'"+i+"'",t,function(r){return Jn(e,r,!0)})}var Fo=null;function Ca(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=B(),!Pe(t,e))){x&&_<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=Sa(t,e);b&&(Fo=r?i:null,!r&&i==88&&!_i&&(o?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),ae&&!o&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Oc(t)}}function Oc(e){var t=e.display.lineDiv;I(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(R(t,"CodeMirror-crosshair"),Qe(document,"keyup",i),Qe(document,"mouseover",i))}be(document,"keyup",i),be(document,"mouseover",i)}function wa(e){e.keyCode==16&&(this.doc.sel.shift=!1),Pe(this,e)}function La(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(cr(t.display,e)||Pe(t,e)||e.ctrlKey&&!e.altKey||o&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(b&&i==Fo){Fo=null,ze(e);return}if(!(b&&(!e.which||e.which<10)&&Sa(t,e))){var n=String.fromCharCode(r??i);n!="\b"&&(Rc(t,e,n)||t.display.input.onKeyPress(e))}}}var Dc=400,Wo=function(e,t,i){this.time=e,this.pos=t,this.button=i};Wo.prototype.compare=function(e,t,i){return this.time+Dc>e&&we(t,this.pos)==0&&i==this.button};var wn,Ln;function Bc(e,t){var i=+new Date;return Ln&&Ln.compare(i,e,t)?(wn=Ln=null,"triple"):wn&&wn.compare(i,e,t)?(Ln=new Wo(i,e,t),wn=null,"double"):(wn=new Wo(i,e,t),Ln=null,"single")}function xa(e){var t=this,i=t.display;if(!(Pe(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,cr(i,e)){S||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!No(t,e)){var r=Qr(t,e),n=jr(e),c=r?Bc(r,n):"single";window.focus(),n==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&Pc(t,n,r,c,e))&&(n==1?r?Ic(t,r,c,e):_r(e)==i.scroller&&ze(e):n==2?(r&&zn(t.doc,r),setTimeout(function(){return i.input.focus()},20)):n==3&&(E?t.display.input.onContextMenu(e):bo(t)))}}}function Pc(e,t,i,r,n){var c="Click";return r=="double"?c="Double"+c:r=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,Cn(e,_a(c,n),n,function(g){if(typeof g=="string"&&(g=Sn[g]),!g)return!1;var w=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),w=g(e,i)!=j}finally{e.state.suppressEdits=!1}return w})}function Hc(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(n.unit==null){var c=l?i.shiftKey&&i.metaKey:i.altKey;n.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(n.extend==null||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),n.addNew==null&&(n.addNew=o?i.metaKey:i.ctrlKey),n.moveOnDrag==null&&(n.moveOnDrag=!(o?i.altKey:i.ctrlKey)),n}function Ic(e,t,i,r){x?setTimeout(oe(ks,e),0):e.curOp.focus=B();var n=Hc(e,i,r),c=e.doc.sel,g;e.options.dragDrop&&fi&&!e.isReadOnly()&&i=="single"&&(g=c.contains(t))>-1&&(we((g=c.ranges[g]).from(),t)<0||t.xRel>0)&&(we(g.to(),t)>0||t.xRel<0)?Fc(e,r,t,n):Wc(e,r,t,n)}function Fc(e,t,i,r){var n=e.display,c=!1,g=Ze(e,function(T){S&&(n.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:bo(e)),Qe(n.wrapper.ownerDocument,"mouseup",g),Qe(n.wrapper.ownerDocument,"mousemove",w),Qe(n.scroller,"dragstart",k),Qe(n.scroller,"drop",g),c||(ze(T),r.addNew||zn(e.doc,i,null,null,r.extend),S&&!y||x&&_==9?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),w=function(T){c=c||Math.abs(t.clientX-T.clientX)+Math.abs(t.clientY-T.clientY)>=10},k=function(){return c=!0};S&&(n.scroller.draggable=!0),e.state.draggingText=g,g.copy=!r.moveOnDrag,be(n.wrapper.ownerDocument,"mouseup",g),be(n.wrapper.ownerDocument,"mousemove",w),be(n.scroller,"dragstart",k),be(n.scroller,"drop",g),e.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}function ka(e,t,i){if(i=="char")return new Me(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Me(ie(t.line,0),xe(e.doc,ie(t.line+1,0)));var r=i(e,t);return new Me(r.from,r.to)}function Wc(e,t,i,r){x&&bo(e);var n=e.display,c=e.doc;ze(t);var g,w,k=c.sel,T=k.ranges;if(r.addNew&&!r.extend?(w=c.sel.contains(i),w>-1?g=T[w]:g=new Me(i,i)):(g=c.sel.primary(),w=c.sel.primIndex),r.unit=="rectangle")r.addNew||(g=new Me(i,i)),i=Qr(e,t,!0,!0),w=-1;else{var F=ka(e,i,r.unit);r.extend?g=Do(g,F.anchor,F.head,r.extend):g=F}r.addNew?w==-1?(w=T.length,st(c,Wt(e,T.concat([g]),w),{scroll:!1,origin:"*mouse"})):T.length>1&&T[w].empty()&&r.unit=="char"&&!r.extend?(st(c,Wt(e,T.slice(0,w).concat(T.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),k=c.sel):Bo(c,w,g,re):(w=0,st(c,new kt([g],0),re),k=c.sel);var N=i;function Z(ce){if(we(N,ce)!=0)if(N=ce,r.unit=="rectangle"){for(var he=[],Se=e.options.tabSize,ge=_e(pe(c,i.line).text,i.ch,Se),ke=_e(pe(c,ce.line).text,ce.ch,Se),Re=Math.min(ge,ke),$e=Math.max(ge,ke),He=Math.min(i.line,ce.line),Ct=Math.min(e.lastLine(),Math.max(i.line,ce.line));He<=Ct;He++){var _t=pe(c,He).text,Ue=de(_t,Re,Se);Re==$e?he.push(new Me(ie(He,Ue),ie(He,Ue))):_t.length>Ue&&he.push(new Me(ie(He,Ue),ie(He,de(_t,$e,Se))))}he.length||he.push(new Me(i,i)),st(c,Wt(e,k.ranges.slice(0,w).concat(he),w),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ce)}else{var gt=g,et=ka(e,ce,r.unit),Ge=gt.anchor,je;we(et.anchor,Ge)>0?(je=et.head,Ge=rr(gt.from(),et.anchor)):(je=et.anchor,Ge=tr(gt.to(),et.head));var Fe=k.ranges.slice(0);Fe[w]=Nc(e,new Me(xe(c,Ge),je)),st(c,Wt(e,Fe,w),re)}}var G=n.wrapper.getBoundingClientRect(),$=0;function ee(ce){var he=++$,Se=Qr(e,ce,!0,r.unit=="rectangle");if(!!Se)if(we(Se,N)!=0){e.curOp.focus=B(),Z(Se);var ge=Fn(n,c);(Se.line>=ge.to||Se.line<ge.from)&&setTimeout(Ze(e,function(){$==he&&ee(ce)}),150)}else{var ke=ce.clientY<G.top?-20:ce.clientY>G.bottom?20:0;ke&&setTimeout(Ze(e,function(){$==he&&(n.scroller.scrollTop+=ke,ee(ce))}),50)}}function se(ce){e.state.selectingText=!1,$=1/0,ce&&(ze(ce),n.input.focus()),Qe(n.wrapper.ownerDocument,"mousemove",le),Qe(n.wrapper.ownerDocument,"mouseup",ue),c.history.lastSelOrigin=null}var le=Ze(e,function(ce){ce.buttons===0||!jr(ce)?se(ce):ee(ce)}),ue=Ze(e,se);e.state.selectingText=ue,be(n.wrapper.ownerDocument,"mousemove",le),be(n.wrapper.ownerDocument,"mouseup",ue)}function Nc(e,t){var i=t.anchor,r=t.head,n=pe(e.doc,i.line);if(we(i,r)==0&&i.sticky==r.sticky)return t;var c=wt(n);if(!c)return t;var g=Qt(c,i.ch,i.sticky),w=c[g];if(w.from!=i.ch&&w.to!=i.ch)return t;var k=g+(w.from==i.ch==(w.level!=1)?0:1);if(k==0||k==c.length)return t;var T;if(r.line!=i.line)T=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var F=Qt(c,r.ch,r.sticky),N=F-g||(r.ch-i.ch)*(w.level==1?-1:1);F==k-1||F==k?T=N<0:T=N>0}var Z=c[k+(T?-1:0)],G=T==(Z.level==1),$=G?Z.from:Z.to,ee=G?"after":"before";return i.ch==$&&i.sticky==ee?t:new Me(new ie(i.line,$,ee),r)}function Ea(e,t,i,r){var n,c;if(t.touches)n=t.touches[0].clientX,c=t.touches[0].clientY;else try{n=t.clientX,c=t.clientY}catch{return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ze(t);var g=e.display,w=g.lineDiv.getBoundingClientRect();if(c>w.bottom||!tt(e,i))return vr(t);c-=w.top-g.viewOffset;for(var k=0;k<e.display.gutterSpecs.length;++k){var T=g.gutters.childNodes[k];if(T&&T.getBoundingClientRect().right>=n){var F=Tt(e.doc,c),N=e.display.gutterSpecs[k];return Oe(e,i,e,F,N.className,t),vr(t)}}}function No(e,t){return Ea(e,t,"gutterClick",!0)}function Ma(e,t){cr(e.display,t)||Uc(e,t)||Pe(e,t,"contextmenu")||E||e.display.input.onContextMenu(t)}function Uc(e,t){return tt(e,"gutterContextMenu")?Ea(e,t,"gutterContextMenu",!1):!1}function Aa(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nn(e)}var zi={toString:function(){return"CodeMirror.Init"}},Ta={},$n={};function jc(e){var t=e.optionHandlers;function i(r,n,c,g){e.defaults[r]=n,c&&(t[r]=g?function(w,k,T){T!=zi&&c(w,k,T)}:c)}e.defineOption=i,e.Init=zi,i("value","",function(r,n){return r.setValue(n)},!0),i("mode",null,function(r,n){r.doc.modeOption=n,To(r)},!0),i("indentUnit",2,To,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){fn(r),nn(r),pt(r)},!0),i("lineSeparator",null,function(r,n){if(r.doc.lineSep=n,!!n){var c=[],g=r.doc.first;r.doc.iter(function(k){for(var T=0;;){var F=k.text.indexOf(n,T);if(F==-1)break;T=F+n.length,c.push(ie(g,F))}g++});for(var w=c.length-1;w>=0;w--)Ni(r.doc,n,c[w],ie(c[w].line,c[w].ch+n.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,n,c){r.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),c!=zi&&r.refresh()}),i("specialCharPlaceholder",gl,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",s?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,n){return r.getInputField().spellcheck=n},!0),i("autocorrect",!1,function(r,n){return r.getInputField().autocorrect=n},!0),i("autocapitalize",!1,function(r,n){return r.getInputField().autocapitalize=n},!0),i("rtlMoveVisually",!f),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){Aa(r),hn(r)},!0),i("keyMap","default",function(r,n,c){var g=Zn(n),w=c!=zi&&Zn(c);w&&w.detach&&w.detach(r,g),g.attach&&g.attach(r,w||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,zc,!0),i("gutters",[],function(r,n){r.display.gutterSpecs=Mo(n,r.options.lineNumbers),hn(r)},!0),i("fixedGutter",!0,function(r,n){r.display.gutters.style.left=n?_o(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Hi(r)},!0),i("scrollbarStyle","native",function(r){Os(r),Hi(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,n){r.display.gutterSpecs=Mo(r.options.gutters,n),hn(r)},!0),i("firstLineNumber",1,hn,!0),i("lineNumberFormatter",function(r){return r},hn,!0),i("showCursorWhenSelecting",!1,on,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,n){n=="nocursor"&&(Bi(r),r.display.input.blur()),r.display.input.readOnlyChanged(n)}),i("screenReaderLabel",null,function(r,n){n=n===""?null:n,r.display.input.screenReaderLabelChanged(n)}),i("disableInput",!1,function(r,n){n||r.display.input.reset()},!0),i("dragDrop",!0,qc),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,on,!0),i("singleCursorHeightPerLine",!0,on,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,fn,!0),i("addModeClass",!1,fn,!0),i("pollInterval",100),i("undoDepth",200,function(r,n){return r.doc.history.undoDepth=n}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,fn,!0),i("moveInputWithCursor",!0,function(r,n){n||r.display.input.resetPosition()}),i("tabindex",null,function(r,n){return r.display.input.getField().tabIndex=n||""}),i("autofocus",null),i("direction","ltr",function(r,n){return r.doc.setDirection(n)},!0),i("phrases",null)}function qc(e,t,i){var r=i&&i!=zi;if(!t!=!r){var n=e.display.dragFunctions,c=t?be:Qe;c(e.display.scroller,"dragstart",n.start),c(e.display.scroller,"dragenter",n.enter),c(e.display.scroller,"dragover",n.over),c(e.display.scroller,"dragleave",n.leave),c(e.display.scroller,"drop",n.drop)}}function zc(e){e.options.lineWrapping?(I(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(R(e.display.wrapper,"CodeMirror-wrap"),Jr(e)),go(e),pt(e),nn(e),setTimeout(function(){return Hi(e)},100)}function Be(e,t){var i=this;if(!(this instanceof Be))return new Be(e,t);this.options=t=t?ne(t):{},ne(Ta,t,!1);var r=t.value;typeof r=="string"?r=new vt(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var n=new Be.inputStyles[t.inputStyle](this),c=this.display=new ic(e,r,n,t);c.wrapper.CodeMirror=this,Aa(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Os(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ce,keySeq:null,specialChars:null},t.autofocus&&!s&&c.input.focus(),x&&_<11&&setTimeout(function(){return i.display.input.reset(!0)},20),Kc(this),Cc(),ii(this),this.curOp.forceUpdate=!0,js(this,r),t.autofocus&&!s||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&So(i)},20):Bi(this);for(var g in $n)$n.hasOwnProperty(g)&&$n[g](this,t[g],zi);Ps(this),t.finishInit&&t.finishInit(this);for(var w=0;w<Uo.length;++w)Uo[w](this);ni(this),S&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}Be.defaults=Ta,Be.optionHandlers=$n;function Kc(e){var t=e.display;be(t.scroller,"mousedown",Ze(e,xa)),x&&_<11?be(t.scroller,"dblclick",Ze(e,function(k){if(!Pe(e,k)){var T=Qr(e,k);if(!(!T||No(e,k)||cr(e.display,k))){ze(k);var F=e.findWordAt(T);zn(e.doc,F.anchor,F.head)}}})):be(t.scroller,"dblclick",function(k){return Pe(e,k)||ze(k)}),be(t.scroller,"contextmenu",function(k){return Ma(e,k)}),be(t.input.getField(),"contextmenu",function(k){t.scroller.contains(k.target)||Ma(e,k)});var i,r={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function c(k){if(k.touches.length!=1)return!1;var T=k.touches[0];return T.radiusX<=1&&T.radiusY<=1}function g(k,T){if(T.left==null)return!0;var F=T.left-k.left,N=T.top-k.top;return F*F+N*N>20*20}be(t.scroller,"touchstart",function(k){if(!Pe(e,k)&&!c(k)&&!No(e,k)){t.input.ensurePolled(),clearTimeout(i);var T=+new Date;t.activeTouch={start:T,moved:!1,prev:T-r.end<=300?r:null},k.touches.length==1&&(t.activeTouch.left=k.touches[0].pageX,t.activeTouch.top=k.touches[0].pageY)}}),be(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),be(t.scroller,"touchend",function(k){var T=t.activeTouch;if(T&&!cr(t,k)&&T.left!=null&&!T.moved&&new Date-T.start<300){var F=e.coordsChar(t.activeTouch,"page"),N;!T.prev||g(T,T.prev)?N=new Me(F,F):!T.prev.prev||g(T,T.prev.prev)?N=e.findWordAt(F):N=new Me(ie(F.line,0),xe(e.doc,ie(F.line+1,0))),e.setSelection(N.anchor,N.head),e.focus(),ze(k)}n()}),be(t.scroller,"touchcancel",n),be(t.scroller,"scroll",function(){t.scroller.clientHeight&&(an(e,t.scroller.scrollTop),ti(e,t.scroller.scrollLeft,!0),Oe(e,"scroll",e))}),be(t.scroller,"mousewheel",function(k){return Fs(e,k)}),be(t.scroller,"DOMMouseScroll",function(k){return Fs(e,k)}),be(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(k){Pe(e,k)||jt(k)},over:function(k){Pe(e,k)||(Sc(e,k),jt(k))},start:function(k){return bc(e,k)},drop:Ze(e,mc),leave:function(k){Pe(e,k)||fa(e)}};var w=t.input.getField();be(w,"keyup",function(k){return wa.call(e,k)}),be(w,"keydown",Ze(e,Ca)),be(w,"keypress",Ze(e,La)),be(w,"focus",function(k){return So(e,k)}),be(w,"blur",function(k){return Bi(e,k)})}var Uo=[];Be.defineInitHook=function(e){return Uo.push(e)};function xn(e,t,i,r){var n=e.doc,c;i==null&&(i="add"),i=="smart"&&(n.mode.indent?c=ir(e,t).state:i="prev");var g=e.options.tabSize,w=pe(n,t),k=_e(w.text,null,g);w.stateAfter&&(w.stateAfter=null);var T=w.text.match(/^\s*/)[0],F;if(!r&&!/\S/.test(w.text))F=0,i="not";else if(i=="smart"&&(F=n.mode.indent(c,w.text.slice(T.length),w.text),F==j||F>150)){if(!r)return;i="prev"}i=="prev"?t>n.first?F=_e(pe(n,t-1).text,null,g):F=0:i=="add"?F=k+e.options.indentUnit:i=="subtract"?F=k-e.options.indentUnit:typeof i=="number"&&(F=k+i),F=Math.max(0,F);var N="",Z=0;if(e.options.indentWithTabs)for(var G=Math.floor(F/g);G;--G)Z+=g,N+="	";if(Z<F&&(N+=Te(F-Z)),N!=T)return Ni(n,N,ie(t,0),ie(t,T.length),"+input"),w.stateAfter=null,!0;for(var $=0;$<n.sel.ranges.length;$++){var ee=n.sel.ranges[$];if(ee.head.line==t&&ee.head.ch<T.length){var se=ie(t,T.length);Bo(n,$,new Me(se,se));break}}}var Nt=null;function Vn(e){Nt=e}function jo(e,t,i,r,n){var c=e.doc;e.display.shift=!1,r||(r=c.sel);var g=+new Date-200,w=n=="paste"||e.state.pasteIncoming>g,k=mr(t),T=null;if(w&&r.ranges.length>1)if(Nt&&Nt.text.join(`
`)==t){if(r.ranges.length%Nt.text.length==0){T=[];for(var F=0;F<Nt.text.length;F++)T.push(c.splitLines(Nt.text[F]))}}else k.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(T=qe(k,function(le){return[le]}));for(var N=e.curOp.updateInput,Z=r.ranges.length-1;Z>=0;Z--){var G=r.ranges[Z],$=G.from(),ee=G.to();G.empty()&&(i&&i>0?$=ie($.line,$.ch-i):e.state.overwrite&&!w?ee=ie(ee.line,Math.min(pe(c,ee.line).text.length,ee.ch+Le(k).length)):w&&Nt&&Nt.lineWise&&Nt.text.join(`
`)==k.join(`
`)&&($=ee=ie($.line,0)));var se={from:$,to:ee,text:T?T[Z%T.length]:k,origin:n||(w?"paste":e.state.cutIncoming>g?"cut":"+input")};Wi(e.doc,se),Ye(e,"inputRead",e,se)}t&&!w&&Oa(e,t),Pi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=N),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ra(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&St(t,function(){return jo(t,i,0,null,"paste")}),!0}function Oa(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var n=i.ranges[r];if(!(n.head.ch>100||r&&i.ranges[r-1].head.line==n.head.line)){var c=e.getModeAt(n.head),g=!1;if(c.electricChars){for(var w=0;w<c.electricChars.length;w++)if(t.indexOf(c.electricChars.charAt(w))>-1){g=xn(e,n.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(pe(e.doc,n.head.line).text.slice(0,n.head.ch))&&(g=xn(e,n.head.line,"smart"));g&&Ye(e,"electricInput",e,n.head.line)}}}function Da(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,c={anchor:ie(n,0),head:ie(n+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function Ba(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Pa(){var e=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=D("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return S?e.style.width="1000px":e.setAttribute("wrap","off"),v&&(e.style.border="1px solid black"),Ba(e),t}function Gc(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,n){var c=this.options,g=c[r];c[r]==n&&r!="mode"||(c[r]=n,t.hasOwnProperty(r)&&Ze(this,t[r])(this,n,g),Oe(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,n){this.state.keyMaps[n?"push":"unshift"](Zn(r))},removeKeyMap:function(r){for(var n=this.state.keyMaps,c=0;c<n.length;++c)if(n[c]==r||n[c].name==r)return n.splice(c,1),!0},addOverlay:lt(function(r,n){var c=r.token?r:e.getMode(this.options,r);if(c.startState)throw new Error("Overlays may not be stateful.");ve(this.state.overlays,{mode:c,modeSpec:r,opaque:n&&n.opaque,priority:n&&n.priority||0},function(g){return g.priority}),this.state.modeGen++,pt(this)}),removeOverlay:lt(function(r){for(var n=this.state.overlays,c=0;c<n.length;++c){var g=n[c].modeSpec;if(g==r||typeof r=="string"&&g.name==r){n.splice(c,1),this.state.modeGen++,pt(this);return}}}),indentLine:lt(function(r,n,c){typeof n!="string"&&typeof n!="number"&&(n==null?n=this.options.smartIndent?"smart":"prev":n=n?"add":"subtract"),qt(this.doc,r)&&xn(this,r,n,c)}),indentSelection:lt(function(r){for(var n=this.doc.sel.ranges,c=-1,g=0;g<n.length;g++){var w=n[g];if(w.empty())w.head.line>c&&(xn(this,w.head.line,r,!0),c=w.head.line,g==this.doc.sel.primIndex&&Pi(this));else{var k=w.from(),T=w.to(),F=Math.max(c,k.line);c=Math.min(this.lastLine(),T.line-(T.ch?0:1))+1;for(var N=F;N<c;++N)xn(this,N,r);var Z=this.doc.sel.ranges;k.ch==0&&n.length==Z.length&&Z[g].from().ch>0&&Bo(this.doc,g,new Me(k,Z[g].to()),U)}}}),getTokenAt:function(r,n){return ki(this,r,n)},getLineTokens:function(r,n){return ki(this,ie(r),n,!0)},getTokenTypeAt:function(r){r=xe(this.doc,r);var n=wi(this,pe(this.doc,r.line)),c=0,g=(n.length-1)/2,w=r.ch,k;if(w==0)k=n[2];else for(;;){var T=c+g>>1;if((T?n[T*2-1]:0)>=w)g=T;else if(n[T*2+1]<w)c=T+1;else{k=n[T*2+2];break}}var F=k?k.indexOf("overlay "):-1;return F<0?k:F==0?null:k.slice(0,F-1)},getModeAt:function(r){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(r).state).mode:n},getHelper:function(r,n){return this.getHelpers(r,n)[0]},getHelpers:function(r,n){var c=[];if(!i.hasOwnProperty(n))return c;var g=i[n],w=this.getModeAt(r);if(typeof w[n]=="string")g[w[n]]&&c.push(g[w[n]]);else if(w[n])for(var k=0;k<w[n].length;k++){var T=g[w[n][k]];T&&c.push(T)}else w.helperType&&g[w.helperType]?c.push(g[w.helperType]):g[w.name]&&c.push(g[w.name]);for(var F=0;F<g._global.length;F++){var N=g._global[F];N.pred(w,this)&&ye(c,N.val)==-1&&c.push(N.val)}return c},getStateAfter:function(r,n){var c=this.doc;return r=zr(c,r??c.first+c.size-1),ir(this,r+1,n).state},cursorCoords:function(r,n){var c,g=this.doc.sel.primary();return r==null?c=g.head:typeof r=="object"?c=xe(this.doc,r):c=r?g.from():g.to(),Ft(this,c,n||"page")},charCoords:function(r,n){return Bn(this,xe(this.doc,r),n||"page")},coordsChar:function(r,n){return r=ms(this,r,n||"page"),fo(this,r.left,r.top)},lineAtHeight:function(r,n){return r=ms(this,{top:r,left:0},n||"page").top,Tt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,n,c){var g=!1,w;if(typeof r=="number"){var k=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>k&&(r=k,g=!0),w=pe(this.doc,r)}else w=r;return Dn(this,w,{top:0,left:0},n||"page",c||g).top+(g?this.doc.height-ot(w):0)},defaultTextHeight:function(){return Oi(this.display)},defaultCharWidth:function(){return Di(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,n,c,g,w){var k=this.display;r=Ft(this,xe(this.doc,r));var T=r.bottom,F=r.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),k.sizer.appendChild(n),g=="over")T=r.top;else if(g=="above"||g=="near"){var N=Math.max(k.wrapper.clientHeight,this.doc.height),Z=Math.max(k.sizer.clientWidth,k.lineSpace.clientWidth);(g=="above"||r.bottom+n.offsetHeight>N)&&r.top>n.offsetHeight?T=r.top-n.offsetHeight:r.bottom+n.offsetHeight<=N&&(T=r.bottom),F+n.offsetWidth>Z&&(F=Z-n.offsetWidth)}n.style.top=T+"px",n.style.left=n.style.right="",w=="right"?(F=k.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):(w=="left"?F=0:w=="middle"&&(F=(k.sizer.clientWidth-n.offsetWidth)/2),n.style.left=F+"px"),c&&ql(this,{left:F,top:T,right:F+n.offsetWidth,bottom:T+n.offsetHeight})},triggerOnKeyDown:lt(Ca),triggerOnKeyPress:lt(La),triggerOnKeyUp:wa,triggerOnMouseDown:lt(xa),execCommand:function(r){if(Sn.hasOwnProperty(r))return Sn[r].call(null,this)},triggerElectric:lt(function(r){Oa(this,r)}),findPosH:function(r,n,c,g){var w=1;n<0&&(w=-1,n=-n);for(var k=xe(this.doc,r),T=0;T<n&&(k=qo(this.doc,k,w,c,g),!k.hitSide);++T);return k},moveH:lt(function(r,n){var c=this;this.extendSelectionsBy(function(g){return c.display.shift||c.doc.extend||g.empty()?qo(c.doc,g.head,r,n,c.options.rtlMoveVisually):r<0?g.from():g.to()},K)}),deleteH:lt(function(r,n){var c=this.doc.sel,g=this.doc;c.somethingSelected()?g.replaceSelection("",null,"+delete"):qi(this,function(w){var k=qo(g,w.head,r,n,!1);return r<0?{from:k,to:w.head}:{from:w.head,to:k}})}),findPosV:function(r,n,c,g){var w=1,k=g;n<0&&(w=-1,n=-n);for(var T=xe(this.doc,r),F=0;F<n;++F){var N=Ft(this,T,"div");if(k==null?k=N.left:N.left=k,T=Ha(this,N,w,c),T.hitSide)break}return T},moveV:lt(function(r,n){var c=this,g=this.doc,w=[],k=!this.display.shift&&!g.extend&&g.sel.somethingSelected();if(g.extendSelectionsBy(function(F){if(k)return r<0?F.from():F.to();var N=Ft(c,F.head,"div");F.goalColumn!=null&&(N.left=F.goalColumn),w.push(N.left);var Z=Ha(c,N,r,n);return n=="page"&&F==g.sel.primary()&&wo(c,Bn(c,Z,"div").top-N.top),Z},K),w.length)for(var T=0;T<g.sel.ranges.length;T++)g.sel.ranges[T].goalColumn=w[T]}),findWordAt:function(r){var n=this.doc,c=pe(n,r.line).text,g=r.ch,w=r.ch;if(c){var k=this.getHelper(r,"wordChars");(r.sticky=="before"||w==c.length)&&g?--g:++w;for(var T=c.charAt(g),F=dr(T,k)?function(N){return dr(N,k)}:/\s/.test(T)?function(N){return/\s/.test(N)}:function(N){return!/\s/.test(N)&&!dr(N)};g>0&&F(c.charAt(g-1));)--g;for(;w<c.length&&F(c.charAt(w));)++w}return new Me(ie(r.line,g),ie(r.line,w))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?I(this.display.cursorDiv,"CodeMirror-overwrite"):R(this.display.cursorDiv,"CodeMirror-overwrite"),Oe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==B()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:lt(function(r,n){sn(this,r,n)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Gt(this)-this.display.barHeight,width:r.scrollWidth-Gt(this)-this.display.barWidth,clientHeight:lo(this),clientWidth:$r(this)}},scrollIntoView:lt(function(r,n){r==null?(r={from:this.doc.sel.primary().head,to:null},n==null&&(n=this.options.cursorScrollMargin)):typeof r=="number"?r={from:ie(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=n||0,r.from.line!=null?zl(this,r):Ms(this,r.from,r.to,r.margin)}),setSize:lt(function(r,n){var c=this,g=function(k){return typeof k=="number"||/^\d+$/.test(String(k))?k+"px":k};r!=null&&(this.display.wrapper.style.width=g(r)),n!=null&&(this.display.wrapper.style.height=g(n)),this.options.lineWrapping&&_s(this);var w=this.display.viewFrom;this.doc.iter(w,this.display.viewTo,function(k){if(k.widgets){for(var T=0;T<k.widgets.length;T++)if(k.widgets[T].noHScroll){Rr(c,w,"widget");break}}++w}),this.curOp.forceUpdate=!0,Oe(this,"refresh",this)}),operation:function(r){return St(this,r)},startOperation:function(){return ii(this)},endOperation:function(){return ni(this)},refresh:lt(function(){var r=this.display.cachedTextHeight;pt(this),this.curOp.forceUpdate=!0,nn(this),sn(this,this.doc.scrollLeft,this.doc.scrollTop),ko(this.display),(r==null||Math.abs(r-Oi(this.display))>.5||this.options.lineWrapping)&&go(this),Oe(this,"refresh",this)}),swapDoc:lt(function(r){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),js(this,r),nn(this),this.display.input.reset(),sn(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,Ye(this,"swapDoc",this,n),n}),phrase:function(r){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,r)?n[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Bt(e),e.registerHelper=function(r,n,c){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][n]=c},e.registerGlobalHelper=function(r,n,c,g){e.registerHelper(r,n,g),i[r]._global.push({pred:c,val:g})}}function qo(e,t,i,r,n){var c=t,g=i,w=pe(e,t.line),k=n&&e.direction=="rtl"?-i:i;function T(){var ue=t.line+k;return ue<e.first||ue>=e.first+e.size?!1:(t=new ie(ue,t.ch,t.sticky),w=pe(e,ue))}function F(ue){var ce;if(r=="codepoint"){var he=w.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(he))ce=null;else{var Se=i>0?he>=55296&&he<56320:he>=56320&&he<57343;ce=new ie(t.line,Math.max(0,Math.min(w.text.length,t.ch+i*(Se?2:1))),-i)}}else n?ce=Ec(e.cm,w,t,i):ce=Ho(w,t,i);if(ce==null)if(!ue&&T())t=Io(n,e.cm,w,t.line,k);else return!1;else t=ce;return!0}if(r=="char"||r=="codepoint")F();else if(r=="column")F(!0);else if(r=="word"||r=="group")for(var N=null,Z=r=="group",G=e.cm&&e.cm.getHelper(t,"wordChars"),$=!0;!(i<0&&!F(!$));$=!1){var ee=w.text.charAt(t.ch)||`
`,se=dr(ee,G)?"w":Z&&ee==`
`?"n":!Z||/\s/.test(ee)?null:"p";if(Z&&!$&&!se&&(se="s"),N&&N!=se){i<0&&(i=1,F(),t.sticky="after");break}if(se&&(N=se),i>0&&!F(!$))break}var le=Gn(e,t,c,g,!0);return kr(c,le)&&(le.hitSide=!0),le}function Ha(e,t,i,r){var n=e.doc,c=t.left,g;if(r=="page"){var w=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),k=Math.max(w-.5*Oi(e.display),3);g=(i>0?t.bottom:t.top)+i*k}else r=="line"&&(g=i>0?t.bottom+3:t.top-3);for(var T;T=fo(e,c,g),!!T.outside;){if(i<0?g<=0:g>=n.height){T.hitSide=!0;break}g+=i*5}return T}var Ae=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ce,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ae.prototype.init=function(e){var t=this,i=this,r=i.cm,n=i.div=e.lineDiv;n.contentEditable=!0,Ba(n,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function c(w){for(var k=w.target;k;k=k.parentNode){if(k==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(k.className))break}return!1}be(n,"paste",function(w){!c(w)||Pe(r,w)||Ra(w,r)||_<=11&&setTimeout(Ze(r,function(){return t.updateFromDOM()}),20)}),be(n,"compositionstart",function(w){t.composing={data:w.data,done:!1}}),be(n,"compositionupdate",function(w){t.composing||(t.composing={data:w.data,done:!1})}),be(n,"compositionend",function(w){t.composing&&(w.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),be(n,"touchstart",function(){return i.forceCompositionEnd()}),be(n,"input",function(){t.composing||t.readFromDOMSoon()});function g(w){if(!(!c(w)||Pe(r,w))){if(r.somethingSelected())Vn({lineWise:!1,text:r.getSelections()}),w.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var k=Da(r);Vn({lineWise:!0,text:k.text}),w.type=="cut"&&r.operation(function(){r.setSelections(k.ranges,0,U),r.replaceSelection("",null,"cut")})}else return;if(w.clipboardData){w.clipboardData.clearData();var T=Nt.text.join(`
`);if(w.clipboardData.setData("Text",T),w.clipboardData.getData("Text")==T){w.preventDefault();return}}var F=Pa(),N=F.firstChild;r.display.lineSpace.insertBefore(F,r.display.lineSpace.firstChild),N.value=Nt.text.join(`
`);var Z=B();X(N),setTimeout(function(){r.display.lineSpace.removeChild(F),Z.focus(),Z==n&&i.showPrimarySelection()},50)}}be(n,"copy",g),be(n,"cut",g)},Ae.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ae.prototype.prepareSelection=function(){var e=xs(this.cm,!1);return e.focus=B()==this.div,e},Ae.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ae.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ae.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),n=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||n.line<t.display.viewFrom){e.removeAllRanges();return}var c=Qn(t,e.anchorNode,e.anchorOffset),g=Qn(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&g&&!g.bad&&we(rr(c,g),r)==0&&we(tr(c,g),n)==0)){var w=t.display.view,k=r.line>=t.display.viewFrom&&Ia(t,r)||{node:w[0].measure.map[2],offset:0},T=n.line<t.display.viewTo&&Ia(t,n);if(!T){var F=w[w.length-1].measure,N=F.maps?F.maps[F.maps.length-1]:F.map;T={node:N[N.length-1],offset:N[N.length-2]-N[N.length-3]}}if(!k||!T){e.removeAllRanges();return}var Z=e.rangeCount&&e.getRangeAt(0),G;try{G=z(k.node,k.offset,T.offset,T.node)}catch{}G&&(!ae&&t.state.focused?(e.collapse(k.node,k.offset),G.collapsed||(e.removeAllRanges(),e.addRange(G))):(e.removeAllRanges(),e.addRange(G)),Z&&e.anchorNode==null?e.addRange(Z):ae&&this.startGracePeriod()),this.rememberSelection()}},Ae.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ae.prototype.showMultipleSelections=function(e){A(this.cm.display.cursorDiv,e.cursors),A(this.cm.display.selectionDiv,e.selection)},Ae.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ae.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return W(this.div,t)},Ae.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||B()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ae.prototype.blur=function(){this.div.blur()},Ae.prototype.getField=function(){return this.div},Ae.prototype.supportsTouch=function(){return!0},Ae.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):St(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Ae.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ae.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(a&&m&&this.cm.display.gutterSpecs.length&&Xc(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=Qn(t,e.anchorNode,e.anchorOffset),r=Qn(t,e.focusNode,e.focusOffset);i&&r&&St(t,function(){st(t.doc,Dr(i,r),U),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ae.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),n=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=ie(r.line-1,pe(e.doc,r.line-1).length)),n.ch==pe(e.doc,n.line).text.length&&n.line<e.lastLine()&&(n=ie(n.line+1,0)),r.line<t.viewFrom||n.line>t.viewTo-1)return!1;var c,g,w;r.line==t.viewFrom||(c=ei(e,r.line))==0?(g=Ee(t.view[0].line),w=t.view[0].node):(g=Ee(t.view[c].line),w=t.view[c-1].node.nextSibling);var k=ei(e,n.line),T,F;if(k==t.view.length-1?(T=t.viewTo-1,F=t.lineDiv.lastChild):(T=Ee(t.view[k+1].line)-1,F=t.view[k+1].node.previousSibling),!w)return!1;for(var N=e.doc.splitLines(Yc(e,w,F,g,T)),Z=At(e.doc,ie(g,0),ie(T,pe(e.doc,T).text.length));N.length>1&&Z.length>1;)if(Le(N)==Le(Z))N.pop(),Z.pop(),T--;else if(N[0]==Z[0])N.shift(),Z.shift(),g++;else break;for(var G=0,$=0,ee=N[0],se=Z[0],le=Math.min(ee.length,se.length);G<le&&ee.charCodeAt(G)==se.charCodeAt(G);)++G;for(var ue=Le(N),ce=Le(Z),he=Math.min(ue.length-(N.length==1?G:0),ce.length-(Z.length==1?G:0));$<he&&ue.charCodeAt(ue.length-$-1)==ce.charCodeAt(ce.length-$-1);)++$;if(N.length==1&&Z.length==1&&g==r.line)for(;G&&G>r.ch&&ue.charCodeAt(ue.length-$-1)==ce.charCodeAt(ce.length-$-1);)G--,$++;N[N.length-1]=ue.slice(0,ue.length-$).replace(/^\u200b+/,""),N[0]=N[0].slice(G).replace(/\u200b+$/,"");var Se=ie(g,G),ge=ie(T,Z.length?Le(Z).length-$:0);if(N.length>1||N[0]||we(Se,ge))return Ni(e.doc,N,Se,ge,"+input"),!0},Ae.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ae.prototype.reset=function(){this.forceCompositionEnd()},Ae.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ae.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ae.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&St(this.cm,function(){return pt(e.cm)})},Ae.prototype.setUneditable=function(e){e.contentEditable="false"},Ae.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ze(this.cm,jo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ae.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ae.prototype.onContextMenu=function(){},Ae.prototype.resetPosition=function(){},Ae.prototype.needsContentAttribute=!0;function Ia(e,t){var i=co(e,t.line);if(!i||i.hidden)return null;var r=pe(e.doc,t.line),n=hs(i,r,t.line),c=wt(r,e.doc.direction),g="left";if(c){var w=Qt(c,t.ch);g=w%2?"right":"left"}var k=ps(n.map,t.ch,g);return k.offset=k.collapse=="right"?k.end:k.start,k}function Xc(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Ki(e,t){return t&&(e.bad=!0),e}function Yc(e,t,i,r,n){var c="",g=!1,w=e.doc.lineSeparator(),k=!1;function T(G){return function($){return $.id==G}}function F(){g&&(c+=w,k&&(c+=w),g=k=!1)}function N(G){G&&(F(),c+=G)}function Z(G){if(G.nodeType==1){var $=G.getAttribute("cm-text");if($){N($);return}var ee=G.getAttribute("cm-marker"),se;if(ee){var le=e.findMarks(ie(r,0),ie(n+1,0),T(+ee));le.length&&(se=le[0].find(0))&&N(At(e.doc,se.from,se.to).join(w));return}if(G.getAttribute("contenteditable")=="false")return;var ue=/^(pre|div|p|li|table|br)$/i.test(G.nodeName);if(!/^br$/i.test(G.nodeName)&&G.textContent.length==0)return;ue&&F();for(var ce=0;ce<G.childNodes.length;ce++)Z(G.childNodes[ce]);/^(pre|p)$/i.test(G.nodeName)&&(k=!0),ue&&(g=!0)}else G.nodeType==3&&N(G.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Z(t),t!=i;)t=t.nextSibling,k=!1;return c}function Qn(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return Ki(e.clipPos(ie(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var c=e.display.view[n];if(c.node==r)return Zc(c,t,i)}}function Zc(e,t,i){var r=e.text.firstChild,n=!1;if(!t||!W(r,t))return Ki(ie(Ee(e.line),0),!0);if(t==r&&(n=!0,t=r.childNodes[i],i=0,!t)){var c=e.rest?Le(e.rest):e.line;return Ki(ie(Ee(c),c.text.length),n)}var g=t.nodeType==3?t:null,w=t;for(!g&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(g=t.firstChild,i&&(i=g.nodeValue.length));w.parentNode!=r;)w=w.parentNode;var k=e.measure,T=k.maps;function F(se,le,ue){for(var ce=-1;ce<(T?T.length:0);ce++)for(var he=ce<0?k.map:T[ce],Se=0;Se<he.length;Se+=3){var ge=he[Se+2];if(ge==se||ge==le){var ke=Ee(ce<0?e.line:e.rest[ce]),Re=he[Se]+ue;return(ue<0||ge!=se)&&(Re=he[Se+(ue?1:0)]),ie(ke,Re)}}}var N=F(g,w,i);if(N)return Ki(N,n);for(var Z=w.nextSibling,G=g?g.nodeValue.length-i:0;Z;Z=Z.nextSibling){if(N=F(Z,Z.firstChild,0),N)return Ki(ie(N.line,N.ch-G),n);G+=Z.textContent.length}for(var $=w.previousSibling,ee=i;$;$=$.previousSibling){if(N=F($,$.firstChild,-1),N)return Ki(ie(N.line,N.ch+ee),n);ee+=$.textContent.length}}var Ne=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ce,this.hasSelection=!1,this.composing=null};Ne.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var n=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),v&&(n.style.width="0px"),be(n,"input",function(){x&&_>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),be(n,"paste",function(g){Pe(r,g)||Ra(g,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function c(g){if(!Pe(r,g)){if(r.somethingSelected())Vn({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var w=Da(r);Vn({lineWise:!0,text:w.text}),g.type=="cut"?r.setSelections(w.ranges,null,U):(i.prevInput="",n.value=w.text.join(`
`),X(n))}else return;g.type=="cut"&&(r.state.cutIncoming=+new Date)}}be(n,"cut",c),be(n,"copy",c),be(e.scroller,"paste",function(g){if(!(cr(e,g)||Pe(r,g))){if(!n.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var w=new Event("paste");w.clipboardData=g.clipboardData,n.dispatchEvent(w)}}),be(e.lineSpace,"selectstart",function(g){cr(e,g)||ze(g)}),be(n,"compositionstart",function(){var g=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:g,range:r.markText(g,r.getCursor("to"),{className:"CodeMirror-composing"})}}),be(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ne.prototype.createField=function(e){this.wrapper=Pa(),this.textarea=this.wrapper.firstChild},Ne.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ne.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=xs(e);if(e.options.moveInputWithCursor){var n=Ft(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),g=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+g.top-c.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+g.left-c.left))}return r},Ne.prototype.showSelection=function(e){var t=this.cm,i=t.display;A(i.cursorDiv,e.cursors),A(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ne.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&X(this.textarea),x&&_>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",x&&_>=9&&(this.hasSelection=null))}},Ne.prototype.getField=function(){return this.textarea},Ne.prototype.supportsTouch=function(){return!1},Ne.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!s||B()!=this.textarea))try{this.textarea.focus()}catch{}},Ne.prototype.blur=function(){this.textarea.blur()},Ne.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ne.prototype.receivedFocus=function(){this.slowPoll()},Ne.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ne.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},Ne.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||vi(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(x&&_>=9&&this.hasSelection===n||o&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=n.charCodeAt(0);if(c==8203&&!r&&(r="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var g=0,w=Math.min(r.length,n.length);g<w&&r.charCodeAt(g)==n.charCodeAt(g);)++g;return St(t,function(){jo(t,n.slice(g),r.length-g,null,e.composing?"*compose":null),n.length>1e3||n.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ne.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ne.prototype.onKeyPress=function(){x&&_>=9&&(this.hasSelection=null),this.fastPoll()},Ne.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,n=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=Qr(i,e),g=r.scroller.scrollTop;if(!c||b)return;var w=i.options.resetSelectionOnContextMenu;w&&i.doc.sel.contains(c)==-1&&Ze(i,st)(i.doc,Dr(c),U);var k=n.style.cssText,T=t.wrapper.style.cssText,F=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",n.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-F.top-5)+"px; left: "+(e.clientX-F.left-5)+`px;
      z-index: 1000; background: `+(x?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var N;S&&(N=window.scrollY),r.input.focus(),S&&window.scrollTo(null,N),r.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=G,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function Z(){if(n.selectionStart!=null){var ee=i.somethingSelected(),se="\u200B"+(ee?n.value:"");n.value="\u21DA",n.value=se,t.prevInput=ee?"":"\u200B",n.selectionStart=1,n.selectionEnd=se.length,r.selForContextMenu=i.doc.sel}}function G(){if(t.contextMenuPending==G&&(t.contextMenuPending=!1,t.wrapper.style.cssText=T,n.style.cssText=k,x&&_<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=g),n.selectionStart!=null)){(!x||x&&_<9)&&Z();var ee=0,se=function(){r.selForContextMenu==i.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="\u200B"?Ze(i,ta)(i):ee++<10?r.detectingSelectAll=setTimeout(se,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(se,200)}}if(x&&_>=9&&Z(),E){jt(e);var $=function(){Qe(window,"mouseup",$),setTimeout(G,20)};be(window,"mouseup",$)}else setTimeout(G,50)},Ne.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ne.prototype.setUneditable=function(){},Ne.prototype.needsContentAttribute=!1;function Jc(e,t){if(t=t?ne(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=B();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=w.getValue()}var n;if(e.form&&(be(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var c=e.form;n=c.submit;try{var g=c.submit=function(){r(),c.submit=n,c.submit(),c.submit=g}}catch{}}t.finishInit=function(k){k.save=r,k.getTextArea=function(){return e},k.toTextArea=function(){k.toTextArea=isNaN,r(),e.parentNode.removeChild(k.getWrapperElement()),e.style.display="",e.form&&(Qe(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=n))}},e.style.display="none";var w=Be(function(k){return e.parentNode.insertBefore(k,e.nextSibling)},t);return w}function $c(e){e.off=Qe,e.on=be,e.wheelEventPixels=nc,e.Doc=vt,e.splitLines=mr,e.countColumn=_e,e.findColumn=de,e.isWordChar=Ut,e.Pass=j,e.signal=Oe,e.Line=bt,e.changeEnd=Br,e.scrollbarModel=Rs,e.Pos=ie,e.cmpPos=we,e.modes=Sr,e.mimeModes=Pt,e.resolveMode=er,e.getMode=Cr,e.modeExtensions=Ht,e.extendMode=bi,e.copyState=Mt,e.startState=qr,e.innerMode=wr,e.commands=Sn,e.keyMap=hr,e.keyName=ga,e.isModifierKey=va,e.lookupKey=ji,e.normalizeKeyMap=kc,e.StringStream=De,e.SharedTextMarker=yn,e.TextMarker=Hr,e.LineWidget=gn,e.e_preventDefault=ze,e.e_stopPropagation=Ur,e.e_stop=jt,e.addClass=I,e.contains=W,e.rmClass=R,e.keyNames=Ir}jc(Be),Gc(Be);var Vc="iter insert remove copy getEditor constructor".split(" ");for(var eo in vt.prototype)vt.prototype.hasOwnProperty(eo)&&ye(Vc,eo)<0&&(Be.prototype[eo]=function(e){return function(){return e.apply(this.doc,arguments)}}(vt.prototype[eo]));return Bt(vt),Be.inputStyles={textarea:Ne,contenteditable:Ae},Be.defineMode=function(e){!Be.defaults.mode&&e!="null"&&(Be.defaults.mode=e),yi.apply(this,arguments)},Be.defineMIME=mi,Be.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Be.defineMIME("text/plain","null"),Be.defineExtension=function(e,t){Be.prototype[e]=t},Be.defineDocExtension=function(e,t){vt.prototype[e]=t},Be.fromTextArea=Jc,$c(Be),Be.version="5.65.0",Be})});var Ua=Zt((Wa,Na)=>{(function(J){typeof Wa=="object"&&typeof Na=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){"use strict";J.defineMode("perl",function(){var d={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},x="string-2",_=/[goseximacplud]/;function S(b,y,u,h,v){return y.chain=null,y.style=null,y.tail=null,y.tokenize=function(a,s){for(var o=!1,l,f=0;l=a.next();){if(l===u[f]&&!o)return u[++f]!==void 0?(s.chain=u[f],s.style=h,s.tail=v):v&&a.eatWhile(v),s.tokenize=m,h;o=!o&&l=="\\"}return h},y.tokenize(b,y)}function L(b,y,u){return y.tokenize=function(h,v){return h.string==u&&(v.tokenize=m),h.skipToEnd(),"string"},y.tokenize(b,y)}function m(b,y){if(b.eatSpace())return null;if(y.chain)return S(b,y,y.chain,y.style,y.tail);if(b.match(/^\-?[\d\.]/,!1)&&b.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(b.match(/^<<(?=[_a-zA-Z])/))return b.eatWhile(/\w/),L(b,y,b.current().substr(2));if(b.sol()&&b.match(/^\=item(?!\w)/))return L(b,y,"=cut");var u=b.next();if(u=='"'||u=="'"){if(ae(b,3)=="<<"+u){var h=b.pos;b.eatWhile(/\w/);var v=b.current().substr(1);if(v&&b.eat(u))return L(b,y,v);b.pos=h}return S(b,y,[u],"string")}if(u=="q"){var a=te(b,-2);if(!(a&&/\w/.test(a))){if(a=te(b,0),a=="x"){if(a=te(b,1),a=="(")return Y(b,2),S(b,y,[")"],x,_);if(a=="[")return Y(b,2),S(b,y,["]"],x,_);if(a=="{")return Y(b,2),S(b,y,["}"],x,_);if(a=="<")return Y(b,2),S(b,y,[">"],x,_);if(/[\^'"!~\/]/.test(a))return Y(b,1),S(b,y,[b.eat(a)],x,_)}else if(a=="q"){if(a=te(b,1),a=="(")return Y(b,2),S(b,y,[")"],"string");if(a=="[")return Y(b,2),S(b,y,["]"],"string");if(a=="{")return Y(b,2),S(b,y,["}"],"string");if(a=="<")return Y(b,2),S(b,y,[">"],"string");if(/[\^'"!~\/]/.test(a))return Y(b,1),S(b,y,[b.eat(a)],"string")}else if(a=="w"){if(a=te(b,1),a=="(")return Y(b,2),S(b,y,[")"],"bracket");if(a=="[")return Y(b,2),S(b,y,["]"],"bracket");if(a=="{")return Y(b,2),S(b,y,["}"],"bracket");if(a=="<")return Y(b,2),S(b,y,[">"],"bracket");if(/[\^'"!~\/]/.test(a))return Y(b,1),S(b,y,[b.eat(a)],"bracket")}else if(a=="r"){if(a=te(b,1),a=="(")return Y(b,2),S(b,y,[")"],x,_);if(a=="[")return Y(b,2),S(b,y,["]"],x,_);if(a=="{")return Y(b,2),S(b,y,["}"],x,_);if(a=="<")return Y(b,2),S(b,y,[">"],x,_);if(/[\^'"!~\/]/.test(a))return Y(b,1),S(b,y,[b.eat(a)],x,_)}else if(/[\^'"!~\/(\[{<]/.test(a)){if(a=="(")return Y(b,1),S(b,y,[")"],"string");if(a=="[")return Y(b,1),S(b,y,["]"],"string");if(a=="{")return Y(b,1),S(b,y,["}"],"string");if(a=="<")return Y(b,1),S(b,y,[">"],"string");if(/[\^'"!~\/]/.test(a))return S(b,y,[b.eat(a)],"string")}}}if(u=="m"){var a=te(b,-2);if(!(a&&/\w/.test(a))&&(a=b.eat(/[(\[{<\^'"!~\/]/),a)){if(/[\^'"!~\/]/.test(a))return S(b,y,[a],x,_);if(a=="(")return S(b,y,[")"],x,_);if(a=="[")return S(b,y,["]"],x,_);if(a=="{")return S(b,y,["}"],x,_);if(a=="<")return S(b,y,[">"],x,_)}}if(u=="s"){var a=/[\/>\]})\w]/.test(te(b,-2));if(!a&&(a=b.eat(/[(\[{<\^'"!~\/]/),a))return a=="["?S(b,y,["]","]"],x,_):a=="{"?S(b,y,["}","}"],x,_):a=="<"?S(b,y,[">",">"],x,_):a=="("?S(b,y,[")",")"],x,_):S(b,y,[a,a],x,_)}if(u=="y"){var a=/[\/>\]})\w]/.test(te(b,-2));if(!a&&(a=b.eat(/[(\[{<\^'"!~\/]/),a))return a=="["?S(b,y,["]","]"],x,_):a=="{"?S(b,y,["}","}"],x,_):a=="<"?S(b,y,[">",">"],x,_):a=="("?S(b,y,[")",")"],x,_):S(b,y,[a,a],x,_)}if(u=="t"){var a=/[\/>\]})\w]/.test(te(b,-2));if(!a&&(a=b.eat("r"),a&&(a=b.eat(/[(\[{<\^'"!~\/]/),a)))return a=="["?S(b,y,["]","]"],x,_):a=="{"?S(b,y,["}","}"],x,_):a=="<"?S(b,y,[">",">"],x,_):a=="("?S(b,y,[")",")"],x,_):S(b,y,[a,a],x,_)}if(u=="`")return S(b,y,[u],"variable-2");if(u=="/")return/~\s*$/.test(ae(b))?S(b,y,[u],x,_):"operator";if(u=="$"){var h=b.pos;if(b.eatWhile(/\d/)||b.eat("{")&&b.eatWhile(/\d/)&&b.eat("}"))return"variable-2";b.pos=h}if(/[$@%]/.test(u)){var h=b.pos;if(b.eat("^")&&b.eat(/[A-Z]/)||!/[@$%&]/.test(te(b,-2))&&b.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var a=b.current();if(d[a])return"variable-2"}b.pos=h}if(/[$@%&]/.test(u)&&(b.eatWhile(/[\w$]/)||b.eat("{")&&b.eatWhile(/[\w$]/)&&b.eat("}"))){var a=b.current();return d[a]?"variable-2":"variable"}if(u=="#"&&te(b,-2)!="$")return b.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(u)){var h=b.pos;if(b.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),d[b.current()])return"operator";b.pos=h}if(u=="_"&&b.pos==1){if(fe(b,6)=="_END__")return S(b,y,["\0"],"comment");if(fe(b,7)=="_DATA__")return S(b,y,["\0"],"variable-2");if(fe(b,7)=="_C__")return S(b,y,["\0"],"string")}if(/\w/.test(u)){var h=b.pos;if(te(b,-2)=="{"&&(te(b,0)=="}"||b.eatWhile(/\w/)&&te(b,0)=="}"))return"string";b.pos=h}if(/[A-Z]/.test(u)){var s=te(b,-2),h=b.pos;if(b.eatWhile(/[A-Z_]/),/[\da-z]/.test(te(b,0)))b.pos=h;else{var a=d[b.current()];return a?(a[1]&&(a=a[0]),s!=":"?a==1?"keyword":a==2?"def":a==3?"atom":a==4?"operator":a==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(u)){var s=te(b,-2);b.eatWhile(/\w/);var a=d[b.current()];return a?(a[1]&&(a=a[0]),s!=":"?a==1?"keyword":a==2?"def":a==3?"atom":a==4?"operator":a==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:m,chain:null,style:null,tail:null}},token:function(b,y){return(y.tokenize||m)(b,y)},lineComment:"#"}}),J.registerHelper("wordChars","perl",/[\w$]/),J.defineMIME("text/x-perl","perl");function te(d,x){return d.string.charAt(d.pos+(x||0))}function ae(d,x){if(x){var _=d.pos-x;return d.string.substr(_>=0?_:0,x)}else return d.string.substr(0,d.pos-1)}function fe(d,x){var _=d.string.length,S=_-d.pos+1;return d.string.substr(d.pos,x&&x<_?x:S)}function Y(d,x){var _=d.pos+x,S;_<=0?d.pos=0:_>=(S=d.string.length-1)?d.pos=S:d.pos=_}})});var za=Zt((ja,qa)=>{(function(J){typeof ja=="object"&&typeof qa=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){J.defineOption("placeholder","",function(_,S,L){var m=L&&L!=J.Init;if(S&&!m)_.on("blur",Y),_.on("change",d),_.on("swapDoc",d),J.on(_.getInputField(),"compositionupdate",_.state.placeholderCompose=function(){fe(_)}),d(_);else if(!S&&m){_.off("blur",Y),_.off("change",d),_.off("swapDoc",d),J.off(_.getInputField(),"compositionupdate",_.state.placeholderCompose),te(_);var b=_.getWrapperElement();b.className=b.className.replace(" CodeMirror-empty","")}S&&!_.hasFocus()&&Y(_)});function te(_){_.state.placeholder&&(_.state.placeholder.parentNode.removeChild(_.state.placeholder),_.state.placeholder=null)}function ae(_){te(_);var S=_.state.placeholder=document.createElement("pre");S.style.cssText="height: 0; overflow: visible",S.style.direction=_.getOption("direction"),S.className="CodeMirror-placeholder CodeMirror-line-like";var L=_.getOption("placeholder");typeof L=="string"&&(L=document.createTextNode(L)),S.appendChild(L),_.display.lineSpace.insertBefore(S,_.display.lineSpace.firstChild)}function fe(_){setTimeout(function(){var S=!1;if(_.lineCount()==1){var L=_.getInputField();S=L.nodeName=="TEXTAREA"?!_.getLine(0).length:!/[^\u200b]/.test(L.querySelector(".CodeMirror-line").textContent)}S?ae(_):te(_)},20)}function Y(_){x(_)&&ae(_)}function d(_){var S=_.getWrapperElement(),L=x(_);S.className=S.className.replace(" CodeMirror-empty","")+(L?" CodeMirror-empty":""),L?ae(_):te(_)}function x(_){return _.lineCount()===1&&_.getLine(0)===""}})});var Xa=Zt((Ka,Ga)=>{(function(J){typeof Ka=="object"&&typeof Ga=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){var te={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},ae=J.Pos;J.defineOption("autoCloseBrackets",!1,function(v,a,s){s&&s!=J.Init&&(v.removeKeyMap(Y),v.state.closeBrackets=null),a&&(d(fe(a,"pairs")),v.state.closeBrackets=a,v.addKeyMap(Y))});function fe(v,a){return a=="pairs"&&typeof v=="string"?v:typeof v=="object"&&v[a]!=null?v[a]:te[a]}var Y={Backspace:S,Enter:L};function d(v){for(var a=0;a<v.length;a++){var s=v.charAt(a),o="'"+s+"'";Y[o]||(Y[o]=x(s))}}d(te.pairs+"`");function x(v){return function(a){return y(a,v)}}function _(v){var a=v.state.closeBrackets;if(!a||a.override)return a;var s=v.getModeAt(v.getCursor());return s.closeBrackets||a}function S(v){var a=_(v);if(!a||v.getOption("disableInput"))return J.Pass;for(var s=fe(a,"pairs"),o=v.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return J.Pass;var f=u(v,o[l].head);if(!f||s.indexOf(f)%2!=0)return J.Pass}for(var l=o.length-1;l>=0;l--){var p=o[l].head;v.replaceRange("",ae(p.line,p.ch-1),ae(p.line,p.ch+1),"+delete")}}function L(v){var a=_(v),s=a&&fe(a,"explode");if(!s||v.getOption("disableInput"))return J.Pass;for(var o=v.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return J.Pass;var f=u(v,o[l].head);if(!f||s.indexOf(f)%2!=0)return J.Pass}v.operation(function(){var p=v.lineSeparator()||`
`;v.replaceSelection(p+p,null),m(v,-1),o=v.listSelections();for(var C=0;C<o.length;C++){var E=o[C].head.line;v.indentLine(E,null,!0),v.indentLine(E+1,null,!0)}})}function m(v,a){for(var s=[],o=v.listSelections(),l=0,f=0;f<o.length;f++){var p=o[f];p.head==v.getCursor()&&(l=f);var C=p.head.ch||a>0?{line:p.head.line,ch:p.head.ch+a}:{line:p.head.line-1};s.push({anchor:C,head:C})}v.setSelections(s,l)}function b(v){var a=J.cmpPos(v.anchor,v.head)>0;return{anchor:new ae(v.anchor.line,v.anchor.ch+(a?-1:1)),head:new ae(v.head.line,v.head.ch+(a?1:-1))}}function y(v,a){var s=_(v);if(!s||v.getOption("disableInput"))return J.Pass;var o=fe(s,"pairs"),l=o.indexOf(a);if(l==-1)return J.Pass;for(var f=fe(s,"closeBefore"),p=fe(s,"triples"),C=o.charAt(l+1)==a,E=v.listSelections(),O=l%2==0,R,M=0;M<E.length;M++){var A=E[M],D=A.head,P,z=v.getRange(D,ae(D.line,D.ch+1));if(O&&!A.empty())P="surround";else if((C||!O)&&z==a)C&&h(v,D)?P="both":p.indexOf(a)>=0&&v.getRange(D,ae(D.line,D.ch+3))==a+a+a?P="skipThree":P="skip";else if(C&&D.ch>1&&p.indexOf(a)>=0&&v.getRange(ae(D.line,D.ch-2),D)==a+a){if(D.ch>2&&/\bstring/.test(v.getTokenTypeAt(ae(D.line,D.ch-2))))return J.Pass;P="addFour"}else if(C){var W=D.ch==0?" ":v.getRange(ae(D.line,D.ch-1),D);if(!J.isWordChar(z)&&W!=a&&!J.isWordChar(W))P="both";else return J.Pass}else if(O&&(z.length===0||/\s/.test(z)||f.indexOf(z)>-1))P="both";else return J.Pass;if(!R)R=P;else if(R!=P)return J.Pass}var B=l%2?o.charAt(l-1):a,I=l%2?a:o.charAt(l+1);v.operation(function(){if(R=="skip")m(v,1);else if(R=="skipThree")m(v,3);else if(R=="surround"){for(var q=v.getSelections(),X=0;X<q.length;X++)q[X]=B+q[X]+I;v.replaceSelections(q,"around"),q=v.listSelections().slice();for(var X=0;X<q.length;X++)q[X]=b(q[X]);v.setSelections(q)}else R=="both"?(v.replaceSelection(B+I,null),v.triggerElectric(B+I),m(v,-1)):R=="addFour"&&(v.replaceSelection(B+B+B+B,"before"),m(v,1))})}function u(v,a){var s=v.getRange(ae(a.line,a.ch-1),ae(a.line,a.ch+1));return s.length==2?s:null}function h(v,a){var s=v.getTokenAt(ae(a.line,a.ch+1));return/\bstring/.test(s.type)&&s.start==a.ch&&(a.ch==0||!/\bstring/.test(v.getTokenTypeAt(a)))}})});var Ja=Zt((Ya,Za)=>{(function(J){typeof Ya=="object"&&typeof Za=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){var te=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),ae=J.Pos,fe={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function Y(m){return m&&m.bracketRegex||/[(){}[\]]/}function d(m,b,y){var u=m.getLineHandle(b.line),h=b.ch-1,v=y&&y.afterCursor;v==null&&(v=/(^| )cm-fat-cursor($| )/.test(m.getWrapperElement().className));var a=Y(y),s=!v&&h>=0&&a.test(u.text.charAt(h))&&fe[u.text.charAt(h)]||a.test(u.text.charAt(h+1))&&fe[u.text.charAt(++h)];if(!s)return null;var o=s.charAt(1)==">"?1:-1;if(y&&y.strict&&o>0!=(h==b.ch))return null;var l=m.getTokenTypeAt(ae(b.line,h+1)),f=x(m,ae(b.line,h+(o>0?1:0)),o,l,y);return f==null?null:{from:ae(b.line,h),to:f&&f.pos,match:f&&f.ch==s.charAt(0),forward:o>0}}function x(m,b,y,u,h){for(var v=h&&h.maxScanLineLength||1e4,a=h&&h.maxScanLines||1e3,s=[],o=Y(h),l=y>0?Math.min(b.line+a,m.lastLine()+1):Math.max(m.firstLine()-1,b.line-a),f=b.line;f!=l;f+=y){var p=m.getLine(f);if(!!p){var C=y>0?0:p.length-1,E=y>0?p.length:-1;if(!(p.length>v))for(f==b.line&&(C=b.ch-(y<0?1:0));C!=E;C+=y){var O=p.charAt(C);if(o.test(O)&&(u===void 0||(m.getTokenTypeAt(ae(f,C+1))||"")==(u||""))){var R=fe[O];if(R&&R.charAt(1)==">"==y>0)s.push(O);else if(s.length)s.pop();else return{pos:ae(f,C),ch:O}}}}}return f-y==(y>0?m.lastLine():m.firstLine())?!1:null}function _(m,b,y){for(var u=m.state.matchBrackets.maxHighlightLineLength||1e3,h=y&&y.highlightNonMatching,v=[],a=m.listSelections(),s=0;s<a.length;s++){var o=a[s].empty()&&d(m,a[s].head,y);if(o&&(o.match||h!==!1)&&m.getLine(o.from.line).length<=u){var l=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";v.push(m.markText(o.from,ae(o.from.line,o.from.ch+1),{className:l})),o.to&&m.getLine(o.to.line).length<=u&&v.push(m.markText(o.to,ae(o.to.line,o.to.ch+1),{className:l}))}}if(v.length){te&&m.state.focused&&m.focus();var f=function(){m.operation(function(){for(var p=0;p<v.length;p++)v[p].clear()})};if(b)setTimeout(f,800);else return f}}function S(m){m.operation(function(){m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null),m.state.matchBrackets.currentlyHighlighted=_(m,!1,m.state.matchBrackets)})}function L(m){m.state.matchBrackets&&m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null)}J.defineOption("matchBrackets",!1,function(m,b,y){y&&y!=J.Init&&(m.off("cursorActivity",S),m.off("focus",S),m.off("blur",L),L(m)),b&&(m.state.matchBrackets=typeof b=="object"?b:{},m.on("cursorActivity",S),m.on("focus",S),m.on("blur",L))}),J.defineExtension("matchBrackets",function(){_(this,!0)}),J.defineExtension("findMatchingBracket",function(m,b,y){return(y||typeof b=="boolean")&&(y?(y.strict=b,b=y):b=b?{strict:!0}:null),d(this,m,b)}),J.defineExtension("scanForBracket",function(m,b,y,u){return x(this,m,b,y,u)})})});var Qa=Zt(($a,Va)=>{(function(J){typeof $a=="object"&&typeof Va=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){"use strict";var te=J.Pos;function ae(a){var s=a.flags;return s??(a.ignoreCase?"i":"")+(a.global?"g":"")+(a.multiline?"m":"")}function fe(a,s){for(var o=ae(a),l=o,f=0;f<s.length;f++)l.indexOf(s.charAt(f))==-1&&(l+=s.charAt(f));return o==l?a:new RegExp(a.source,l)}function Y(a){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(a.source)}function d(a,s,o){s=fe(s,"g");for(var l=o.line,f=o.ch,p=a.lastLine();l<=p;l++,f=0){s.lastIndex=f;var C=a.getLine(l),E=s.exec(C);if(E)return{from:te(l,E.index),to:te(l,E.index+E[0].length),match:E}}}function x(a,s,o){if(!Y(s))return d(a,s,o);s=fe(s,"gm");for(var l,f=1,p=o.line,C=a.lastLine();p<=C;){for(var E=0;E<f&&!(p>C);E++){var O=a.getLine(p++);l=l==null?O:l+`
`+O}f=f*2,s.lastIndex=o.ch;var R=s.exec(l);if(R){var M=l.slice(0,R.index).split(`
`),A=R[0].split(`
`),D=o.line+M.length-1,P=M[M.length-1].length;return{from:te(D,P),to:te(D+A.length-1,A.length==1?P+A[0].length:A[A.length-1].length),match:R}}}}function _(a,s,o){for(var l,f=0;f<=a.length;){s.lastIndex=f;var p=s.exec(a);if(!p)break;var C=p.index+p[0].length;if(C>a.length-o)break;(!l||C>l.index+l[0].length)&&(l=p),f=p.index+1}return l}function S(a,s,o){s=fe(s,"g");for(var l=o.line,f=o.ch,p=a.firstLine();l>=p;l--,f=-1){var C=a.getLine(l),E=_(C,s,f<0?0:C.length-f);if(E)return{from:te(l,E.index),to:te(l,E.index+E[0].length),match:E}}}function L(a,s,o){if(!Y(s))return S(a,s,o);s=fe(s,"gm");for(var l,f=1,p=a.getLine(o.line).length-o.ch,C=o.line,E=a.firstLine();C>=E;){for(var O=0;O<f&&C>=E;O++){var R=a.getLine(C--);l=l==null?R:R+`
`+l}f*=2;var M=_(l,s,p);if(M){var A=l.slice(0,M.index).split(`
`),D=M[0].split(`
`),P=C+A.length,z=A[A.length-1].length;return{from:te(P,z),to:te(P+D.length-1,D.length==1?z+D[0].length:D[D.length-1].length),match:M}}}}var m,b;String.prototype.normalize?(m=function(a){return a.normalize("NFD").toLowerCase()},b=function(a){return a.normalize("NFD")}):(m=function(a){return a.toLowerCase()},b=function(a){return a});function y(a,s,o,l){if(a.length==s.length)return o;for(var f=0,p=o+Math.max(0,a.length-s.length);;){if(f==p)return f;var C=f+p>>1,E=l(a.slice(0,C)).length;if(E==o)return C;E>o?p=C:f=C+1}}function u(a,s,o,l){if(!s.length)return null;var f=l?m:b,p=f(s).split(/\r|\n\r?/);e:for(var C=o.line,E=o.ch,O=a.lastLine()+1-p.length;C<=O;C++,E=0){var R=a.getLine(C).slice(E),M=f(R);if(p.length==1){var A=M.indexOf(p[0]);if(A==-1)continue e;var o=y(R,M,A,f)+E;return{from:te(C,y(R,M,A,f)+E),to:te(C,y(R,M,A+p[0].length,f)+E)}}else{var D=M.length-p[0].length;if(M.slice(D)!=p[0])continue e;for(var P=1;P<p.length-1;P++)if(f(a.getLine(C+P))!=p[P])continue e;var z=a.getLine(C+p.length-1),W=f(z),B=p[p.length-1];if(W.slice(0,B.length)!=B)continue e;return{from:te(C,y(R,M,D,f)+E),to:te(C+p.length-1,y(z,W,B.length,f))}}}}function h(a,s,o,l){if(!s.length)return null;var f=l?m:b,p=f(s).split(/\r|\n\r?/);e:for(var C=o.line,E=o.ch,O=a.firstLine()-1+p.length;C>=O;C--,E=-1){var R=a.getLine(C);E>-1&&(R=R.slice(0,E));var M=f(R);if(p.length==1){var A=M.lastIndexOf(p[0]);if(A==-1)continue e;return{from:te(C,y(R,M,A,f)),to:te(C,y(R,M,A+p[0].length,f))}}else{var D=p[p.length-1];if(M.slice(0,D.length)!=D)continue e;for(var P=1,o=C-p.length+1;P<p.length-1;P++)if(f(a.getLine(o+P))!=p[P])continue e;var z=a.getLine(C+1-p.length),W=f(z);if(W.slice(W.length-p[0].length)!=p[0])continue e;return{from:te(C+1-p.length,y(z,W,z.length-p[0].length,f)),to:te(C,y(R,M,D.length,f))}}}}function v(a,s,o,l){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=a,o=o?a.clipPos(o):te(0,0),this.pos={from:o,to:o};var f;typeof l=="object"?f=l.caseFold:(f=l,l=null),typeof s=="string"?(f==null&&(f=!1),this.matches=function(p,C){return(p?h:u)(a,s,C,f)}):(s=fe(s,"gm"),!l||l.multiline!==!1?this.matches=function(p,C){return(p?L:x)(a,s,C)}:this.matches=function(p,C){return(p?S:d)(a,s,C)})}v.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(a){var s=this.doc.clipPos(a?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(s=te(s.line,s.ch),a?(s.ch--,s.ch<0&&(s.line--,s.ch=(this.doc.getLine(s.line)||"").length)):(s.ch++,s.ch>(this.doc.getLine(s.line)||"").length&&(s.ch=0,s.line++)),J.cmpPos(s,this.doc.clipPos(s))!=0))return this.atOccurrence=!1;var o=this.matches(a,s);if(this.afterEmptyMatch=o&&J.cmpPos(o.from,o.to)==0,o)return this.pos=o,this.atOccurrence=!0,this.pos.match||!0;var l=te(a?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:l,to:l},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(a,s){if(!!this.atOccurrence){var o=J.splitLines(a);this.doc.replaceRange(o,this.pos.from,this.pos.to,s),this.pos.to=te(this.pos.from.line+o.length-1,o[o.length-1].length+(o.length==1?this.pos.from.ch:0))}}},J.defineExtension("getSearchCursor",function(a,s,o){return new v(this.doc,a,s,o)}),J.defineDocExtension("getSearchCursor",function(a,s,o){return new v(this,a,s,o)}),J.defineExtension("selectMatches",function(a,s){for(var o=[],l=this.getSearchCursor(a,this.getCursor("from"),s);l.findNext()&&!(J.cmpPos(l.to(),this.getCursor("to"))>0);)o.push({anchor:l.from(),head:l.to()});o.length&&this.setSelections(o,0)})})});var rl=Zt((el,tl)=>{(function(J){typeof el=="object"&&typeof tl=="object"?J(Jt()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)})(function(J){"use strict";J.defineExtension("annotateScrollbar",function(ae){return typeof ae=="string"&&(ae={className:ae}),new te(this,ae)}),J.defineOption("scrollButtonHeight",0);function te(ae,fe){this.cm=ae,this.options=fe,this.buttonHeight=fe.scrollButtonHeight||ae.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=ae.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();function Y(x){clearTimeout(d.doRedraw),d.doRedraw=setTimeout(function(){d.redraw()},x)}var d=this;ae.on("refresh",this.resizeHandler=function(){clearTimeout(d.doUpdate),d.doUpdate=setTimeout(function(){d.computeScale()&&Y(20)},100)}),ae.on("markerAdded",this.resizeHandler),ae.on("markerCleared",this.resizeHandler),fe.listenForChanges!==!1&&ae.on("changes",this.changeHandler=function(){Y(250)})}te.prototype.computeScale=function(){var ae=this.cm,fe=(ae.getWrapperElement().clientHeight-ae.display.barHeight-this.buttonHeight*2)/ae.getScrollerElement().scrollHeight;if(fe!=this.hScale)return this.hScale=fe,!0},te.prototype.update=function(ae){this.annotations=ae,this.redraw()},te.prototype.redraw=function(ae){ae!==!1&&this.computeScale();var fe=this.cm,Y=this.hScale,d=document.createDocumentFragment(),x=this.annotations,_=fe.getOption("lineWrapping"),S=_&&fe.defaultTextHeight()*1.5,L=null,m=null;function b(f,p){if(L!=f.line){L=f.line,m=fe.getLineHandle(f.line);var C=fe.getLineHandleVisualStart(m);C!=m&&(L=fe.getLineNumber(C),m=C)}if(m.widgets&&m.widgets.length||_&&m.height>S)return fe.charCoords(f,"local")[p?"top":"bottom"];var E=fe.heightAtLine(m,"local");return E+(p?0:m.height)}var y=fe.lastLine();if(fe.display.barWidth)for(var u=0,h;u<x.length;u++){var v=x[u];if(!(v.to.line>y)){for(var a=h||b(v.from,!0)*Y,s=b(v.to,!1)*Y;u<x.length-1&&!(x[u+1].to.line>y||(h=b(x[u+1].from,!0)*Y,h>s+.9));)v=x[++u],s=b(v.to,!1)*Y;if(s!=a){var o=Math.max(s-a,3),l=d.appendChild(document.createElement("div"));l.style.cssText="position: absolute; right: 0px; width: "+Math.max(fe.display.barWidth-1,2)+"px; top: "+(a+this.buttonHeight)+"px; height: "+o+"px",l.className=this.options.className,v.id&&l.setAttribute("annotation-id",v.id)}}}this.div.textContent="",this.div.appendChild(d)},te.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}})});var ol=Zt((il,nl)=>{(function(J){typeof il=="object"&&typeof nl=="object"?J(Jt(),Qa(),rl()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],J):J(CodeMirror)})(function(J){"use strict";J.defineExtension("showMatchesOnScrollbar",function(Y,d,x){return typeof x=="string"&&(x={className:x}),x||(x={}),new te(this,Y,d,x)});function te(Y,d,x,_){this.cm=Y,this.options=_;var S={listenForChanges:!1};for(var L in _)S[L]=_[L];S.className||(S.className="CodeMirror-search-match"),this.annotation=Y.annotateScrollbar(S),this.query=d,this.caseFold=x,this.gap={from:Y.firstLine(),to:Y.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var m=this;Y.on("change",this.changeHandler=function(b,y){m.onChange(y)})}var ae=1e3;te.prototype.findMatches=function(){if(!!this.gap){for(var Y=0;Y<this.matches.length;Y++){var d=this.matches[Y];if(d.from.line>=this.gap.to)break;d.to.line>=this.gap.from&&this.matches.splice(Y--,1)}for(var x=this.cm.getSearchCursor(this.query,J.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),_=this.options&&this.options.maxMatches||ae;x.findNext();){var d={from:x.from(),to:x.to()};if(d.from.line>=this.gap.to||(this.matches.splice(Y++,0,d),this.matches.length>_))break}this.gap=null}};function fe(Y,d,x){return Y<=d?Y:Math.max(d,Y+x)}te.prototype.onChange=function(Y){var d=Y.from.line,x=J.changeEnd(Y).line,_=x-Y.to.line;if(this.gap?(this.gap.from=Math.min(fe(this.gap.from,d,_),Y.from.line),this.gap.to=Math.max(fe(this.gap.to,d,_),Y.from.line)):this.gap={from:Y.from.line,to:x+1},_)for(var S=0;S<this.matches.length;S++){var L=this.matches[S],m=fe(L.from.line,d,_);m!=L.from.line&&(L.from=J.Pos(m,L.from.ch));var b=fe(L.to.line,d,_);b!=L.to.line&&(L.to=J.Pos(b,L.to.ch))}clearTimeout(this.update);var y=this;this.update=setTimeout(function(){y.updateAfterChange()},250)},te.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},te.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}})});var ll=Zt((sl,al)=>{(function(J){typeof sl=="object"&&typeof al=="object"?J(Jt(),ol()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],J):J(CodeMirror)})(function(J){"use strict";var te={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};function ae(y){this.options={};for(var u in te)this.options[u]=(y&&y.hasOwnProperty(u)?y:te)[u];this.overlay=this.timeout=null,this.matchesonscroll=null,this.active=!1}J.defineOption("highlightSelectionMatches",!1,function(y,u,h){if(h&&h!=J.Init&&(_(y),clearTimeout(y.state.matchHighlighter.timeout),y.state.matchHighlighter=null,y.off("cursorActivity",fe),y.off("focus",Y)),u){var v=y.state.matchHighlighter=new ae(u);y.hasFocus()?(v.active=!0,S(y)):y.on("focus",Y),y.on("cursorActivity",fe)}});function fe(y){var u=y.state.matchHighlighter;(u.active||y.hasFocus())&&d(y,u)}function Y(y){var u=y.state.matchHighlighter;u.active||(u.active=!0,d(y,u))}function d(y,u){clearTimeout(u.timeout),u.timeout=setTimeout(function(){S(y)},u.options.delay)}function x(y,u,h,v){var a=y.state.matchHighlighter;if(y.addOverlay(a.overlay=b(u,h,v)),a.options.annotateScrollbar&&y.showMatchesOnScrollbar){var s=h?new RegExp((/\w/.test(u.charAt(0))?"\\b":"")+u.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+(/\w/.test(u.charAt(u.length-1))?"\\b":"")):u;a.matchesonscroll=y.showMatchesOnScrollbar(s,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function _(y){var u=y.state.matchHighlighter;u.overlay&&(y.removeOverlay(u.overlay),u.overlay=null,u.matchesonscroll&&(u.matchesonscroll.clear(),u.matchesonscroll=null))}function S(y){y.operation(function(){var u=y.state.matchHighlighter;if(_(y),!y.somethingSelected()&&u.options.showToken){for(var h=u.options.showToken===!0?/[\w$]/:u.options.showToken,v=y.getCursor(),a=y.getLine(v.line),s=v.ch,o=s;s&&h.test(a.charAt(s-1));)--s;for(;o<a.length&&h.test(a.charAt(o));)++o;s<o&&x(y,a.slice(s,o),h,u.options.style);return}var l=y.getCursor("from"),f=y.getCursor("to");if(l.line==f.line&&!(u.options.wordsOnly&&!L(y,l,f))){var p=y.getRange(l,f);u.options.trim&&(p=p.replace(/^\s+|\s+$/g,"")),p.length>=u.options.minChars&&x(y,p,!1,u.options.style)}})}function L(y,u,h){var v=y.getRange(u,h);if(v.match(/^\w+$/)!==null){if(u.ch>0){var a={line:u.line,ch:u.ch-1},s=y.getRange(a,u);if(s.match(/\W/)===null)return!1}if(h.ch<y.getLine(u.line).length){var a={line:h.line,ch:h.ch+1},s=y.getRange(h,a);if(s.match(/\W/)===null)return!1}return!0}else return!1}function m(y,u){return(!y.start||!u.test(y.string.charAt(y.start-1)))&&(y.pos==y.string.length||!u.test(y.string.charAt(y.pos)))}function b(y,u,h){return{token:function(v){if(v.match(y)&&(!u||m(v,u)))return h;v.next(),v.skipTo(y.charAt(0))||v.skipToEnd()}}}})});var Qo=ai(Fa());var su=2,au=1,Yo=class{constructor(){}activate(te){this._terminal=te}dispose(){}fit(){let te=this.proposeDimensions();if(!te||!this._terminal)return;let ae=this._terminal._core;(this._terminal.rows!==te.rows||this._terminal.cols!==te.cols)&&(ae._renderService.clear(),this._terminal.resize(te.cols,te.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let te=this._terminal._core;if(te._renderService.dimensions.actualCellWidth===0||te._renderService.dimensions.actualCellHeight===0)return;let ae=window.getComputedStyle(this._terminal.element.parentElement),fe=parseInt(ae.getPropertyValue("height")),Y=Math.max(0,parseInt(ae.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),x={top:parseInt(d.getPropertyValue("padding-top")),bottom:parseInt(d.getPropertyValue("padding-bottom")),right:parseInt(d.getPropertyValue("padding-right")),left:parseInt(d.getPropertyValue("padding-left"))},_=x.top+x.bottom,S=x.right+x.left,L=fe-_,m=Y-S-te.viewport.scrollBarWidth;return{cols:Math.max(su,Math.floor(m/te._renderService.dimensions.actualCellWidth)),rows:Math.max(au,Math.floor(L/te._renderService.dimensions.actualCellHeight))}}};var ro=ai(Jt()),Cu=ai(Ua()),wu=ai(za()),Lu=ai(Xa()),xu=ai(Ja()),ku=ai(ll());var $o=J=>J.match(/^0{8}: /),lu=J=>J.replace(/(?<=^|\n)\d{8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map(te=>parseInt(te,16)),Vo=lu;var cu=document.querySelector('textarea[name="code"]'),uu=document.querySelector('textarea[name="args"]'),hu=document.querySelector('textarea[name="input"]'),kn=document.querySelector('input[name="run"]'),li=document.querySelector('input[name="stop"]'),fu=document.querySelector(".bytes"),cl=document.querySelector(".byte-count"),ul=document.querySelector(".xxd-dump"),hl=document.querySelector('select[name="lang"]'),fl=new Yo,En=new Qo.Terminal({convertEol:!0,theme:{background:"#272822",cursor:"transparent",foreground:"#d0d0d0"}}),io=new Qo.Terminal({convertEol:!0,theme:{background:"#272822",cursor:"transparent",foreground:"#f92672"}}),du=()=>En.reset(),pu=()=>io.reset(),vu=J=>{En.write(J)},es=J=>{io.write(J)},dl=()=>{fl.fit(),io.resize(En.cols,6)},Yi=ro.default.fromTextArea(cu,{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0,matchHighlighter:!0,mode:null,theme:"monokai",viewportMargin:1/0}),_u=ro.default.fromTextArea(uu,{mode:null,theme:"monokai",viewportMargin:1/0}),gu=ro.default.fromTextArea(hu,{mode:null,theme:"monokai",viewportMargin:1/0}),pl=()=>{let J=Yi.getOption("mode"),te=Yi.getValue();if(fu.removeAttribute("hidden"),$o(te)){J!==null&&Yi.setOption("mode",null),ul.removeAttribute("hidden");let ae=Vo(te);cl.innerText=ae.length;return}ul.setAttribute("hidden",""),cl.innerText=te.length,J!==hl.value&&Yi.setOption("mode",hl.value)};En.loadAddon(fl);En.open(document.querySelector("div.stdout"));io.open(document.querySelector("div.stderr"));dl();window.addEventListener("resize",()=>dl());pl();Yi.on("change",()=>pl());kn.addEventListener("click",()=>{let J=Date.now(),te=()=>{ae.terminate(),es(`

Aborted execution after ${Date.now()-J}ms`),kn.removeAttribute("disabled"),li.setAttribute("disabled",""),li.removeEventListener("click",te)};du(),pu(),kn.setAttribute("disabled",""),li.removeAttribute("disabled");let ae=new Worker("./js/worker.js"),fe=Yi.getValue();$o(fe)&&(fe=Vo(fe)),ae.postMessage({type:"run",code:fe,args:_u.getValue(),input:gu.getValue()}),li.addEventListener("click",te),ae.onmessage=({data:Y})=>{let{type:d,output:x,error:_}=Y;x&&vu(x),_&&es(_??""),d==="done"&&(es(`

Completed execution after ${Date.now()-J}ms`),kn.removeAttribute("disabled"),li.setAttribute("disabled",""),li.removeEventListener("click",te))},ae.onerror=Y=>{console.error(Y),kn.removeAttribute("disabled"),li.setAttribute("disabled","")}});})();
/**
 * Copyright (c) 2017 The xterm.js authors. All rights reserved.
 * @license MIT
 */
//# sourceMappingURL=app.js.map
