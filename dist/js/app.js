<<<<<<< Updated upstream
(()=>{var xu=Object.create;var lo=Object.defineProperty,ku=Object.defineProperties,Eu=Object.getOwnPropertyDescriptor,Mu=Object.getOwnPropertyDescriptors,Tu=Object.getOwnPropertyNames,Ya=Object.getOwnPropertySymbols,Au=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty,Ru=Object.prototype.propertyIsEnumerable;var Va=(ee,P,z)=>P in ee?lo(ee,P,{enumerable:!0,configurable:!0,writable:!0,value:z}):ee[P]=z,ci=(ee,P)=>{for(var z in P||(P={}))Za.call(P,z)&&Va(ee,z,P[z]);if(Ya)for(var z of Ya(P))Ru.call(P,z)&&Va(ee,z,P[z]);return ee},on=(ee,P)=>ku(ee,Mu(P)),Du=ee=>lo(ee,"__esModule",{value:!0});var ui=(ee,P)=>()=>(P||ee((P={exports:{}}).exports,P),P.exports);var Ou=(ee,P,z,te)=>{if(P&&typeof P=="object"||typeof P=="function")for(let X of Tu(P))!Za.call(ee,X)&&(z||X!=="default")&&lo(ee,X,{get:()=>P[X],enumerable:!(te=Eu(P,X))||te.enumerable});return ee},Rr=(ee,P)=>Ou(Du(lo(ee!=null?xu(Au(ee)):{},"default",!P&&ee&&ee.__esModule?{get:()=>ee.default,enumerable:!0}:{value:ee,enumerable:!0})),ee);var Ai=ui((rs,is)=>{(function(ee,P){typeof rs=="object"&&typeof is!="undefined"?is.exports=P():typeof define=="function"&&define.amd?define(P):(ee=ee||self,ee.CodeMirror=P())})(rs,function(){"use strict";var ee=navigator.userAgent,P=navigator.platform,z=/gecko\/\d/i.test(ee),te=/MSIE \d/.test(ee),X=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ee),h=/Edge\/(\d+)/.exec(ee),L=te||X||h,p=L&&(te?document.documentMode||6:+(h||X)[1]),g=!h&&/WebKit\//.test(ee),C=g&&/Qt\/\d+\.\d+/.test(ee),y=!h&&/Chrome\//.test(ee),b=/Opera\//.test(ee),S=/Apple Computer/.test(navigator.vendor),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ee),f=/PhantomJS/.test(ee),v=S&&(/Mobile\/\w+/.test(ee)||navigator.maxTouchPoints>2),l=/Android/.test(ee),s=v||l||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ee),o=v||/Mac/.test(P),a=/\bCrOS\b/.test(ee),d=/win/i.test(P),m=b&&ee.match(/Version\/(\d*\.\d*)/);m&&(m=Number(m[1])),m&&m>=15&&(b=!1,g=!0);var k=o&&(C||b&&(m==null||m<12.11)),T=z||L&&p>=9;function H(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var I=function(e,t){var i=e.className,r=H(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function A(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function x(e,t){return A(e).appendChild(t)}function O(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)n.appendChild(t[c]);return n}function E(e,t,i,r){var n=O(e,t,i,r);return n.setAttribute("role","presentation"),n}var V;document.createRange?V=function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:V=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function U(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function F(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function W(e,t){var i=e.className;H(t).test(i)||(e.className+=(i?" ":"")+t)}function Y(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!H(i[r]).test(t)&&(t+=" "+i[r]);return t}var J=function(e){e.select()};v?J=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:L&&(J=function(e){try{e.select()}catch{}});function fe(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function le(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function Ce(e,t,i,r,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=r||0,_=n||0;;){var w=e.indexOf("	",c);if(w<0||w>=t)return _+(t-c);_+=w-c,_+=i-_%i,c=w+1}}var we=function(){this.id=null,this.f=null,this.time=0,this.handler=fe(this.onTimeout,this)};we.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},we.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function he(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var B=50,j={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},ae={origin:"*mouse"},Z={origin:"+move"};function _e(e,t,i){for(var r=0,n=0;;){var c=e.indexOf("	",r);c==-1&&(c=e.length);var _=c-r;if(c==e.length||n+_>=t)return r+Math.min(_,t-n);if(n+=c-r,n+=i-n%i,r=c+1,n>=t)return r}}var Le=[""];function Be(e){for(;Le.length<=e;)Le.push(Ee(Le)+" ");return Le[e]}function Ee(e){return e[e.length-1]}function He(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function be(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}function ze(){}function vt(e,t){var i;return Object.create?i=Object.create(e):(ze.prototype=e,i=new ze),t&&le(t,i),i}var At=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Yt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||At.test(e))}function _r(e,t){return t?t.source.indexOf("\\w")>-1&&Yt(e)?!0:t.test(e):Yt(e)}function $r(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var hi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Br(e){return e.charCodeAt(0)>=768&&hi.test(e)}function Jr(e,t,i){for(;(i<0?t>0:t<e.length)&&Br(e.charAt(t));)t+=i;return t}function Ut(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var n=(t+i)/2,c=r<0?Math.ceil(n):Math.floor(n);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+r}}function di(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var n=!1,c=0;c<e.length;++c){var _=e[c];(_.from<i&&_.to>t||t==i&&_.to==t)&&(r(Math.max(_.from,t),Math.min(_.to,i),_.level==1?"rtl":"ltr",c),n=!0)}n||r(t,i,"ltr")}var _t=null;function Ne(e,t,i){var r;_t=null;for(var n=0;n<e.length;++n){var c=e[n];if(c.from<t&&c.to>t)return n;c.to==t&&(c.from!=c.to&&i=="before"?r=n:_t=n),c.from==t&&(c.from!=c.to&&i!="before"?r=n:_t=n)}return r??_t}var sr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(R){return R<=247?e.charAt(R):1424<=R&&R<=1524?"R":1536<=R&&R<=1785?t.charAt(R-1536):1774<=R&&R<=2220?"r":8192<=R&&R<=8203?"w":R==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,c=/[LRr]/,_=/[Lb1n]/,w=/[1n]/;function M(R,N,K){this.level=R,this.from=N,this.to=K}return function(R,N){var K=N=="ltr"?"L":"R";if(R.length==0||N=="ltr"&&!r.test(R))return!1;for(var Q=R.length,$=[],re=0;re<Q;++re)$.push(i(R.charCodeAt(re)));for(var se=0,de=K;se<Q;++se){var pe=$[se];pe=="m"?$[se]=de:de=pe}for(var ye=0,ve=K;ye<Q;++ye){var me=$[ye];me=="1"&&ve=="r"?$[ye]="n":c.test(me)&&(ve=me,me=="r"&&($[ye]="R"))}for(var Me=1,xe=$[0];Me<Q-1;++Me){var Re=$[Me];Re=="+"&&xe=="1"&&$[Me+1]=="1"?$[Me]="1":Re==","&&xe==$[Me+1]&&(xe=="1"||xe=="n")&&($[Me]=xe),xe=Re}for(var We=0;We<Q;++We){var lt=$[We];if(lt==",")$[We]="N";else if(lt=="%"){var qe=void 0;for(qe=We+1;qe<Q&&$[qe]=="%";++qe);for(var Xt=We&&$[We-1]=="!"||qe<Q&&$[qe]=="1"?"1":"N",Wt=We;Wt<qe;++Wt)$[Wt]=Xt;We=qe-1}}for(var Qe=0,Nt=K;Qe<Q;++Qe){var pt=$[Qe];Nt=="L"&&pt=="1"?$[Qe]="L":c.test(pt)&&(Nt=pt)}for(var it=0;it<Q;++it)if(n.test($[it])){var et=void 0;for(et=it+1;et<Q&&n.test($[et]);++et);for(var Xe=(it?$[it-1]:K)=="L",jt=(et<Q?$[et]:K)=="L",rn=Xe==jt?Xe?"L":"R":K,li=it;li<et;++li)$[li]=rn;it=et-1}for(var Lt=[],Ar,ct=0;ct<Q;)if(_.test($[ct])){var es=ct;for(++ct;ct<Q&&_.test($[ct]);++ct);Lt.push(new M(0,es,ct))}else{var Zr=ct,Mi=Lt.length,Ti=N=="rtl"?1:0;for(++ct;ct<Q&&$[ct]!="L";++ct);for(var Mt=Zr;Mt<ct;)if(w.test($[Mt])){Zr<Mt&&(Lt.splice(Mi,0,new M(1,Zr,Mt)),Mi+=Ti);var nn=Mt;for(++Mt;Mt<ct&&w.test($[Mt]);++Mt);Lt.splice(Mi,0,new M(2,nn,Mt)),Mi+=Ti,Zr=Mt}else++Mt;Zr<ct&&Lt.splice(Mi,0,new M(1,Zr,ct))}return N=="ltr"&&(Lt[0].level==1&&(Ar=R.match(/^\s+/))&&(Lt[0].from=Ar[0].length,Lt.unshift(new M(0,0,Ar[0].length))),Ee(Lt).level==1&&(Ar=R.match(/\s+$/))&&(Ee(Lt).to-=Ar[0].length,Lt.push(new M(0,Q-Ar[0].length,Q)))),N=="rtl"?Lt.reverse():Lt}}();function ut(e,t){var i=e.order;return i==null&&(i=e.order=sr(e.text,t)),i}var Zt=[],ke=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Zt).concat(i)}};function ar(e,t){return e._handlers&&e._handlers[t]||Zt}function tt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var c=he(n,i);c>-1&&(r[t]=n.slice(0,c).concat(n.slice(c+1)))}}}function Te(e,t){var i=ar(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function je(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Te(e,i||t.type,e,t),ft(t)||t.codemirrorIgnore}function lr(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)he(i,t[r])==-1&&i.push(t[r])}function Ge(e,t){return ar(e,t).length>0}function Rt(e){e.prototype.on=function(t,i){ke(this,t,i)},e.prototype.off=function(t,i){tt(this,t,i)}}function Ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function cr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function tr(e){Ye(e),cr(e)}function Vt(e){return e.target||e.srcElement}function Pr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),o&&e.ctrlKey&&t==1&&(t=3),t}var gr=function(){if(L&&p<9)return!1;var e=O("div");return"draggable"in e||"dragDrop"in e}(),rt;function Ir(e){if(rt==null){var t=O("span","\u200B");x(e,O("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(rt=t.offsetWidth<=1&&t.offsetHeight>2&&!(L&&p<8))}var i=rt?O("span","\u200B"):O("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var yr;function Dt(e){if(yr!=null)return yr;var t=x(e,document.createTextNode("A\u062EA")),i=V(t,0,1).getBoundingClientRect(),r=V(t,1,2).getBoundingClientRect();return A(e),!i||i.left==i.right?!1:yr=r.right-i.right<3}var mr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var c=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),_=c.indexOf("\r");_!=-1?(i.push(c.slice(0,_)),t+=_+1):(i.push(c),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Hr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Fr=function(){var e=O("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),br=null;function $t(e){if(br!=null)return br;var t=x(e,O("span","x")),i=t.getBoundingClientRect(),r=V(t,0,1).getBoundingClientRect();return br=Math.abs(i.left-r.left)>1}var gt={},ht={};function Wr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),gt[e]=t}function zt(e,t){ht[e]=t}function ur(e){if(typeof e=="string"&&ht.hasOwnProperty(e))e=ht[e];else if(e&&typeof e.name=="string"&&ht.hasOwnProperty(e.name)){var t=ht[e.name];typeof t=="string"&&(t={name:t}),e=vt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return ur("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return ur("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function fr(e,t){t=ur(t);var i=gt[t.name];if(!i)return fr(e,"text/plain");var r=i(e,t);if(xt.hasOwnProperty(t.name)){var n=xt[t.name];for(var c in n)!n.hasOwnProperty(c)||(r.hasOwnProperty(c)&&(r["_"+c]=r[c]),r[c]=n[c])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var _ in t.modeProps)r[_]=t.modeProps[_];return r}var xt={};function kt(e,t){var i=xt.hasOwnProperty(e)?xt[e]:xt[e]={};le(t,i)}function dt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function Sr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Cr(e,t,i){return e.startState?e.startState(t,i):!0}var Fe=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Fe.prototype.eol=function(){return this.pos>=this.string.length},Fe.prototype.sol=function(){return this.pos==this.lineStart},Fe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Fe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Fe.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},Fe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Fe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Fe.prototype.skipToEnd=function(){this.pos=this.string.length},Fe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Fe.prototype.backUp=function(e){this.pos-=e},Fe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ce(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.indentation=function(){return Ce(this.string,null,this.tabSize)-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(_){return i?_.toLowerCase():_},n=this.string.substr(this.pos,e.length);if(r(n)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},Fe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Fe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Fe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Fe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Se(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],c=n.chunkSize();if(t<c){i=n;break}t-=c}return i.lines[t]}function Ot(e,t,i){var r=[],n=t.line;return e.iter(t.line,i.line+1,function(c){var _=c.text;n==i.line&&(_=_.slice(0,i.ch)),n==t.line&&(_=_.slice(t.ch)),r.push(_),++n}),r}function wr(e,t,i){var r=[];return e.iter(t,i,function(n){r.push(n.text)}),r}function nt(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function Oe(e){if(e.parent==null)return null;for(var t=e.parent,i=he(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function Bt(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],c=n.height;if(t<c){e=n;continue e}t-=c,i+=n.chunkSize()}return i}while(!e.lines);for(var _=0;_<e.lines.length;++_){var w=e.lines[_],M=w.height;if(t<M)break;t-=M}return i+_}function rr(e,t){return t>=e.first&&t<e.first+e.size}function Lr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ce(e,t,i){if(i===void 0&&(i=null),!(this instanceof ce))return new ce(e,t,i);this.line=e,this.ch=t,this.sticky=i}function D(e,t){return e.line-t.line||e.ch-t.ch}function G(e,t){return e.sticky==t.sticky&&D(e,t)==0}function oe(e){return ce(e.line,e.ch)}function ue(e,t){return D(e,t)<0?t:e}function Ae(e,t){return D(e,t)<0?e:t}function De(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return ce(e.first,0);var i=e.first+e.size-1;return t.line>i?ce(i,Se(e,i).text.length):$e(t,Se(e,t.line).text.length)}function $e(e,t){var i=e.ch;return i==null||i>t?ce(e.line,t):i<0?ce(e.line,0):e}function yt(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=ge(e,t[r]);return i}var xr=function(e,t){this.state=e,this.lookAhead=t},qt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};qt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},qt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},qt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},qt.fromSaved=function(e,t,i){return t instanceof xr?new qt(e,dt(e.mode,t.state),i,t.lookAhead):new qt(e,dt(e.mode,t),i)},qt.prototype.save=function(e){var t=e!==!1?dt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new xr(t,this.maxLookAhead):t};function Di(e,t,i,r){var n=[e.state.modeGen],c={};Fi(e,t.text,e.doc.mode,i,function(R,N){return n.push(R,N)},c,r);for(var _=i.state,w=function(R){i.baseTokens=n;var N=e.state.overlays[R],K=1,Q=0;i.state=!0,Fi(e,t.text,N.mode,i,function($,re){for(var se=K;Q<$;){var de=n[K];de>$&&n.splice(K,1,$,n[K+1],de),K+=2,Q=Math.min($,de)}if(!!re)if(N.opaque)n.splice(se,K-se,$,"overlay "+re),K=se+2;else for(;se<K;se+=2){var pe=n[se+1];n[se+1]=(pe?pe+" ":"")+"overlay "+re}},c),i.state=_,i.baseTokens=null,i.baseTokenPos=1},M=0;M<e.state.overlays.length;++M)w(M);return{styles:n,classes:c.bgClass||c.textClass?c:null}}function Oi(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Nr(e,Oe(t)),n=t.text.length>e.options.maxHighlightLength&&dt(e.doc.mode,r.state),c=Di(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Nr(e,t,i){var r=e.doc,n=e.display;if(!r.mode.startState)return new qt(r,!0,t);var c=an(e,t,i),_=c>r.first&&Se(r,c-1).stateAfter,w=_?qt.fromSaved(r,_,c):new qt(r,Cr(r.mode),c);return r.iter(c,t,function(M){pi(e,M.text,w);var R=w.line;M.stateAfter=R==t-1||R%5==0||R>=n.viewFrom&&R<n.viewTo?w.save():null,w.nextLine()}),i&&(r.modeFrontier=w.line),w}function pi(e,t,i,r){var n=e.doc.mode,c=new Fe(t,e.options.tabSize,i);for(c.start=c.pos=r||0,t==""&&Bi(n,i.state);!c.eol();)vi(n,c,i.state),c.start=c.pos}function Bi(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=Sr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function vi(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=Sr(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var Pi=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Ii(e,t,i,r){var n=e.doc,c=n.mode,_;t=ge(n,t);var w=Se(n,t.line),M=Nr(e,t.line,i),R=new Fe(w.text,e.options.tabSize,M),N;for(r&&(N=[]);(r||R.pos<t.ch)&&!R.eol();)R.start=R.pos,_=vi(c,R,M.state),r&&N.push(new Pi(R,_,dt(n.mode,M.state)));return r?N:new Pi(R,_,M.state)}function Hi(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Fi(e,t,i,r,n,c,_){var w=i.flattenSpans;w==null&&(w=e.options.flattenSpans);var M=0,R=null,N=new Fe(t,e.options.tabSize,r),K,Q=e.options.addModeClass&&[null];for(t==""&&Hi(Bi(i,r.state),c);!N.eol();){if(N.pos>e.options.maxHighlightLength?(w=!1,_&&pi(e,t,r,N.pos),N.pos=t.length,K=null):K=Hi(vi(i,N,r.state,Q),c),Q){var $=Q[0].name;$&&(K="m-"+(K?$+" "+K:$))}if(!w||R!=K){for(;M<N.start;)M=Math.min(N.start,M+5e3),n(M,R);R=K}N.start=N.pos}for(;M<N.pos;){var re=Math.min(N.pos,M+5e3);n(re,R),M=re}}function an(e,t,i){for(var r,n,c=e.doc,_=i?-1:t-(e.doc.mode.innerMode?1e3:100),w=t;w>_;--w){if(w<=c.first)return c.first;var M=Se(c,w-1),R=M.stateAfter;if(R&&(!i||w+(R instanceof xr?R.lookAhead:0)<=c.modeFrontier))return w;var N=Ce(M.text,null,e.options.tabSize);(n==null||r>N)&&(n=w-1,r=N)}return n}function Pn(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var n=Se(e,r).stateAfter;if(n&&(!(n instanceof xr)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var In=!1,ir=!1;function Hn(){In=!0}function vo(){ir=!0}function Wi(e,t,i){this.marker=e,this.from=t,this.to=i}function ne(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function ie(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function nr(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function _i(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],_=c.marker,w=c.from==null||(_.inclusiveLeft?c.from<=t:c.from<t);if(w||c.from==t&&_.type=="bookmark"&&(!i||!c.marker.insertLeft)){var M=c.to==null||(_.inclusiveRight?c.to>=t:c.to>t);(r||(r=[])).push(new Wi(_,c.from,M?null:c.to))}}return r}function gi(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],_=c.marker,w=c.to==null||(_.inclusiveRight?c.to>=t:c.to>t);if(w||c.from==t&&_.type=="bookmark"&&(!i||c.marker.insertLeft)){var M=c.from==null||(_.inclusiveLeft?c.from<=t:c.from<t);(r||(r=[])).push(new Wi(_,M?null:c.from-t,c.to==null?null:c.to-t))}}return r}function Ze(e,t){if(t.full)return null;var i=rr(e,t.from.line)&&Se(e,t.from.line).markedSpans,r=rr(e,t.to.line)&&Se(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,c=t.to.ch,_=D(t.from,t.to)==0,w=_i(i,n,_),M=gi(r,c,_),R=t.text.length==1,N=Ee(t.text).length+(R?n:0);if(w)for(var K=0;K<w.length;++K){var Q=w[K];if(Q.to==null){var $=ne(M,Q.marker);$?R&&(Q.to=$.to==null?null:$.to+N):Q.to=n}}if(M)for(var re=0;re<M.length;++re){var se=M[re];if(se.to!=null&&(se.to+=N),se.from==null){var de=ne(w,se.marker);de||(se.from=N,R&&(w||(w=[])).push(se))}else se.from+=N,R&&(w||(w=[])).push(se)}w&&(w=Jt(w)),M&&M!=w&&(M=Jt(M));var pe=[w];if(!R){var ye=t.text.length-2,ve;if(ye>0&&w)for(var me=0;me<w.length;++me)w[me].to==null&&(ve||(ve=[])).push(new Wi(w[me].marker,null,null));for(var Me=0;Me<ye;++Me)pe.push(ve);pe.push(M)}return pe}function Jt(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function or(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function($){if($.markedSpans)for(var re=0;re<$.markedSpans.length;++re){var se=$.markedSpans[re].marker;se.readOnly&&(!r||he(r,se)==-1)&&(r||(r=[])).push(se)}}),!r)return null;for(var n=[{from:t,to:i}],c=0;c<r.length;++c)for(var _=r[c],w=_.find(0),M=0;M<n.length;++M){var R=n[M];if(!(D(R.to,w.from)<0||D(R.from,w.to)>0)){var N=[M,1],K=D(R.from,w.from),Q=D(R.to,w.to);(K<0||!_.inclusiveLeft&&!K)&&N.push({from:R.from,to:w.from}),(Q>0||!_.inclusiveRight&&!Q)&&N.push({from:w.to,to:R.to}),n.splice.apply(n,N),M+=N.length-3}}return n}function Qr(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function mt(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function kr(e){return e.inclusiveRight?1:0}function jr(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),n=t.find(),c=D(r.from,n.from)||Pt(e)-Pt(t);if(c)return-c;var _=D(r.to,n.to)||kr(e)-kr(t);return _||t.id-e.id}function Ur(e,t){var i=ir&&e.markedSpans,r;if(i)for(var n=void 0,c=0;c<i.length;++c)n=i[c],n.marker.collapsed&&(t?n.from:n.to)==null&&(!r||jr(r,n.marker)<0)&&(r=n.marker);return r}function zr(e){return Ur(e,!0)}function bt(e){return Ur(e,!1)}function It(e,t){var i=ir&&e.markedSpans,r;if(i)for(var n=0;n<i.length;++n){var c=i[n];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!r||jr(r,c.marker)<0)&&(r=c.marker)}return r}function Ke(e,t,i,r,n){var c=Se(e,t),_=ir&&c.markedSpans;if(_)for(var w=0;w<_.length;++w){var M=_[w];if(!!M.marker.collapsed){var R=M.marker.find(0),N=D(R.from,i)||Pt(M.marker)-Pt(n),K=D(R.to,r)||kr(M.marker)-kr(n);if(!(N>=0&&K<=0||N<=0&&K>=0)&&(N<=0&&(M.marker.inclusiveRight&&n.inclusiveLeft?D(R.to,i)>=0:D(R.to,i)>0)||N>=0&&(M.marker.inclusiveRight&&n.inclusiveLeft?D(R.from,r)<=0:D(R.from,r)<0)))return!0}}}function Je(e){for(var t;t=zr(e);)e=t.find(-1,!0).line;return e}function Qt(e){for(var t;t=bt(e);)e=t.find(1,!0).line;return e}function qr(e){for(var t,i;t=bt(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function hr(e,t){var i=Se(e,t),r=Je(i);return i==r?t:Oe(r)}function yi(e,t){if(t>e.lastLine())return t;var i=Se(e,t),r;if(!St(e,i))return t;for(;r=bt(i);)i=r.find(1,!0).line;return Oe(i)+1}function St(e,t){var i=ir&&t.markedSpans;if(i){for(var r=void 0,n=0;n<i.length;++n)if(r=i[n],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Er(e,t,r))return!0}}}function Er(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Er(e,r.line,ne(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,c=0;c<t.markedSpans.length;++c)if(n=t.markedSpans[c],n.marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(n.to==null||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Er(e,t,n))return!0}function Ct(e){e=Je(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var c=i.parent;c;i=c,c=i.parent)for(var _=0;_<c.children.length;++_){var w=c.children[_];if(w==i)break;t+=w.height}return t}function ei(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=zr(r);){var n=i.find(0,!0);r=n.from.line,t+=n.from.ch-n.to.ch}for(r=e;i=bt(r);){var c=i.find(0,!0);t-=r.text.length-c.from.ch,r=c.to.line,t+=r.text.length-c.to.ch}return t}function mi(e){var t=e.display,i=e.doc;t.maxLine=Se(i,i.first),t.maxLineLength=ei(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var n=ei(r);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=r)})}var Gt=function(e,t,i){this.text=e,mt(this,t),this.height=i?i(this):1};Gt.prototype.lineNo=function(){return Oe(this)},Rt(Gt);function Gr(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Qr(e),mt(e,i);var n=r?r(e):1;n!=e.height&&nt(e,n)}function _o(e){e.parent=null,Qr(e)}var jl={},Ul={};function fs(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Ul:jl;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function hs(e,t){var i=E("span",null,null,g?"padding-right: .1px":null),r={pre:E("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var c=n?t.rest[n-1]:t.line,_=void 0;r.pos=0,r.addToken=ql,Dt(e.display.measure)&&(_=ut(c,e.doc.direction))&&(r.addToken=Kl(r.addToken,_)),r.map=[];var w=t!=e.display.externalMeasured&&Oe(c);Xl(c,r,Oi(e,c,w)),c.styleClasses&&(c.styleClasses.bgClass&&(r.bgClass=Y(c.styleClasses.bgClass,r.bgClass||"")),c.styleClasses.textClass&&(r.textClass=Y(c.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Ir(e.display.measure))),n==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(g){var M=r.content.lastChild;(/\bcm-tab\b/.test(M.className)||M.querySelector&&M.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Te(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Y(r.pre.className,r.textClass||"")),r}function zl(e){var t=O("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ql(e,t,i,r,n,c,_){if(!!t){var w=e.splitSpaces?Gl(t,e.trailingSpace):t,M=e.cm.state.specialChars,R=!1,N;if(!M.test(t))e.col+=t.length,N=document.createTextNode(w),e.map.push(e.pos,e.pos+t.length,N),L&&p<9&&(R=!0),e.pos+=t.length;else{N=document.createDocumentFragment();for(var K=0;;){M.lastIndex=K;var Q=M.exec(t),$=Q?Q.index-K:t.length-K;if($){var re=document.createTextNode(w.slice(K,K+$));L&&p<9?N.appendChild(O("span",[re])):N.appendChild(re),e.map.push(e.pos,e.pos+$,re),e.col+=$,e.pos+=$}if(!Q)break;K+=$+1;var se=void 0;if(Q[0]=="	"){var de=e.cm.options.tabSize,pe=de-e.col%de;se=N.appendChild(O("span",Be(pe),"cm-tab")),se.setAttribute("role","presentation"),se.setAttribute("cm-text","	"),e.col+=pe}else Q[0]=="\r"||Q[0]==`
`?(se=N.appendChild(O("span",Q[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),se.setAttribute("cm-text",Q[0]),e.col+=1):(se=e.cm.options.specialCharPlaceholder(Q[0]),se.setAttribute("cm-text",Q[0]),L&&p<9?N.appendChild(O("span",[se])):N.appendChild(se),e.col+=1);e.map.push(e.pos,e.pos+1,se),e.pos++}}if(e.trailingSpace=w.charCodeAt(t.length-1)==32,i||r||n||R||c||_){var ye=i||"";r&&(ye+=r),n&&(ye+=n);var ve=O("span",[N],ye,c);if(_)for(var me in _)_.hasOwnProperty(me)&&me!="style"&&me!="class"&&ve.setAttribute(me,_[me]);return e.content.appendChild(ve)}e.content.appendChild(N)}}function Gl(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var c=e.charAt(n);c==" "&&i&&(n==e.length-1||e.charCodeAt(n+1)==32)&&(c="\xA0"),r+=c,i=c==" "}return r}function Kl(e,t){return function(i,r,n,c,_,w,M){n=n?n+" cm-force-border":"cm-force-border";for(var R=i.pos,N=R+r.length;;){for(var K=void 0,Q=0;Q<t.length&&(K=t[Q],!(K.to>R&&K.from<=R));Q++);if(K.to>=N)return e(i,r,n,c,_,w,M);e(i,r.slice(0,K.to-R),n,c,null,w,M),c=null,r=r.slice(K.to-R),R=K.to}}}function ds(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function Xl(e,t,i){var r=e.markedSpans,n=e.text,c=0;if(!r){for(var _=1;_<i.length;_+=2)t.addToken(t,n.slice(c,c=i[_]),fs(i[_+1],t.cm.options));return}for(var w=n.length,M=0,R=1,N="",K,Q,$=0,re,se,de,pe,ye;;){if($==M){re=se=de=Q="",ye=null,pe=null,$=1/0;for(var ve=[],me=void 0,Me=0;Me<r.length;++Me){var xe=r[Me],Re=xe.marker;if(Re.type=="bookmark"&&xe.from==M&&Re.widgetNode)ve.push(Re);else if(xe.from<=M&&(xe.to==null||xe.to>M||Re.collapsed&&xe.to==M&&xe.from==M)){if(xe.to!=null&&xe.to!=M&&$>xe.to&&($=xe.to,se=""),Re.className&&(re+=" "+Re.className),Re.css&&(Q=(Q?Q+";":"")+Re.css),Re.startStyle&&xe.from==M&&(de+=" "+Re.startStyle),Re.endStyle&&xe.to==$&&(me||(me=[])).push(Re.endStyle,xe.to),Re.title&&((ye||(ye={})).title=Re.title),Re.attributes)for(var We in Re.attributes)(ye||(ye={}))[We]=Re.attributes[We];Re.collapsed&&(!pe||jr(pe.marker,Re)<0)&&(pe=xe)}else xe.from>M&&$>xe.from&&($=xe.from)}if(me)for(var lt=0;lt<me.length;lt+=2)me[lt+1]==$&&(se+=" "+me[lt]);if(!pe||pe.from==M)for(var qe=0;qe<ve.length;++qe)ds(t,0,ve[qe]);if(pe&&(pe.from||0)==M){if(ds(t,(pe.to==null?w+1:pe.to)-M,pe.marker,pe.from==null),pe.to==null)return;pe.to==M&&(pe=!1)}}if(M>=w)break;for(var Xt=Math.min(w,$);;){if(N){var Wt=M+N.length;if(!pe){var Qe=Wt>Xt?N.slice(0,Xt-M):N;t.addToken(t,Qe,K?K+re:re,de,M+Qe.length==$?se:"",Q,ye)}if(Wt>=Xt){N=N.slice(Xt-M),M=Xt;break}M=Wt,de=""}N=n.slice(c,c=i[R++]),K=fs(i[R++],t.cm.options)}}}function ps(e,t,i){this.line=t,this.rest=qr(t),this.size=this.rest?Oe(Ee(this.rest))-i+1:1,this.node=this.text=null,this.hidden=St(e,t)}function Fn(e,t,i){for(var r=[],n,c=t;c<i;c=n){var _=new ps(e.doc,Se(e.doc,c),c);n=c+_.size,r.push(_)}return r}var Ni=null;function Yl(e){Ni?Ni.ops.push(e):e.ownsGroup=Ni={ops:[e],delayedCallbacks:[]}}function Zl(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}function Vl(e,t){var i=e.ownsGroup;if(!!i)try{Zl(i)}finally{Ni=null,t(i)}}var ln=null;function ot(e,t){var i=ar(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),n;Ni?n=Ni.delayedCallbacks:ln?n=ln:(n=ln=[],setTimeout($l,0));for(var c=function(w){n.push(function(){return i[w].apply(null,r)})},_=0;_<i.length;++_)c(_)}}function $l(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function vs(e,t,i,r){for(var n=0;n<t.changes.length;n++){var c=t.changes[n];c=="text"?Ql(e,t):c=="gutter"?gs(e,t,i,r):c=="class"?go(e,t):c=="widget"&&ec(e,t,r)}t.changes=null}function cn(e){return e.node==e.text&&(e.node=O("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),L&&p<8&&(e.node.style.zIndex=2)),e.node}function Jl(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=cn(t);t.background=r.insertBefore(O("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function _s(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):hs(e,t)}function Ql(e,t){var i=t.text.className,r=_s(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,go(e,t)):i&&(t.text.className=i)}function go(e,t){Jl(e,t),t.line.wrapClass?cn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function gs(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=cn(t);t.gutterBackground=O("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var _=cn(t),w=t.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(w.setAttribute("aria-hidden","true"),e.display.input.setUneditable(w),_.insertBefore(w,t.text),t.line.gutterClass&&(w.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=w.appendChild(O("div",Lr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var M=0;M<e.display.gutterSpecs.length;++M){var R=e.display.gutterSpecs[M].className,N=c.hasOwnProperty(R)&&c[R];N&&w.appendChild(O("div",[N],"CodeMirror-gutter-elt","left: "+r.gutterLeft[R]+"px; width: "+r.gutterWidth[R]+"px"))}}}function ec(e,t,i){t.alignable&&(t.alignable=null);for(var r=H("CodeMirror-linewidget"),n=t.node.firstChild,c=void 0;n;n=c)c=n.nextSibling,r.test(n.className)&&t.node.removeChild(n);ys(e,t,i)}function tc(e,t,i,r){var n=_s(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),go(e,t),gs(e,t,i,r),ys(e,t,r),t.node}function ys(e,t,i){if(ms(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)ms(e,t.rest[r],t,i,!1)}function ms(e,t,i,r,n){if(!!t.widgets)for(var c=cn(i),_=0,w=t.widgets;_<w.length;++_){var M=w[_],R=O("div",[M.node],"CodeMirror-linewidget"+(M.className?" "+M.className:""));M.handleMouseEvents||R.setAttribute("cm-ignore-events","true"),rc(M,R,i,r),e.display.input.setUneditable(R),n&&M.above?c.insertBefore(R,i.gutter||i.text):c.appendChild(R),ot(M,"redraw")}}function rc(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function un(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!U(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),x(t.display.measure,O("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Kr(e,t){for(var i=Vt(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Wn(e){return e.lineSpace.offsetTop}function yo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function bs(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=x(e.measure,O("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Mr(e){return B-e.display.nativeBarWidth}function bi(e){return e.display.scroller.clientWidth-Mr(e)-e.display.barWidth}function mo(e){return e.display.scroller.clientHeight-Mr(e)-e.display.barHeight}function ic(e,t,i){var r=e.options.lineWrapping,n=r&&bi(e);if(!t.measure.heights||r&&t.measure.width!=n){var c=t.measure.heights=[];if(r){t.measure.width=n;for(var _=t.text.firstChild.getClientRects(),w=0;w<_.length-1;w++){var M=_[w],R=_[w+1];Math.abs(M.bottom-R.bottom)>2&&c.push((M.bottom+R.top)/2-i.top)}}c.push(i.bottom-i.top)}}function Ss(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(Oe(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}}function nc(e,t){t=Je(t);var i=Oe(t),r=e.display.externalMeasured=new ps(e.doc,t,i);r.lineN=i;var n=r.built=hs(e,r);return r.text=n.pre,x(e.display.lineMeasure,n.pre),r}function Cs(e,t,i,r){return Tr(e,ji(e,t),i,r)}function bo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[wi(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function ji(e,t){var i=Oe(t),r=bo(e,i);r&&!r.text?r=null:r&&r.changes&&(vs(e,r,i,xo(e)),e.curOp.forceUpdate=!0),r||(r=nc(e,t));var n=Ss(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Tr(e,t,i,r,n){t.before&&(i=-1);var c=i+(r||""),_;return t.cache.hasOwnProperty(c)?_=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(ic(e,t.view,t.rect),t.hasHeights=!0),_=sc(e,t,i,r),_.bogus||(t.cache[c]=_)),{left:_.left,right:_.right,top:n?_.rtop:_.top,bottom:n?_.rbottom:_.bottom}}var ws={left:0,right:0,top:0,bottom:0};function Ls(e,t,i){for(var r,n,c,_,w,M,R=0;R<e.length;R+=3)if(w=e[R],M=e[R+1],t<w?(n=0,c=1,_="left"):t<M?(n=t-w,c=n+1):(R==e.length-3||t==M&&e[R+3]>t)&&(c=M-w,n=c-1,t>=M&&(_="right")),n!=null){if(r=e[R+2],w==M&&i==(r.insertLeft?"left":"right")&&(_=i),i=="left"&&n==0)for(;R&&e[R-2]==e[R-3]&&e[R-1].insertLeft;)r=e[(R-=3)+2],_="left";if(i=="right"&&n==M-w)for(;R<e.length-3&&e[R+3]==e[R+4]&&!e[R+5].insertLeft;)r=e[(R+=3)+2],_="right";break}return{node:r,start:n,end:c,collapse:_,coverStart:w,coverEnd:M}}function oc(e,t){var i=ws;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function sc(e,t,i,r){var n=Ls(t.map,i,r),c=n.node,_=n.start,w=n.end,M=n.collapse,R;if(c.nodeType==3){for(var N=0;N<4;N++){for(;_&&Br(t.line.text.charAt(n.coverStart+_));)--_;for(;n.coverStart+w<n.coverEnd&&Br(t.line.text.charAt(n.coverStart+w));)++w;if(L&&p<9&&_==0&&w==n.coverEnd-n.coverStart?R=c.parentNode.getBoundingClientRect():R=oc(V(c,_,w).getClientRects(),r),R.left||R.right||_==0)break;w=_,_=_-1,M="right"}L&&p<11&&(R=ac(e.display.measure,R))}else{_>0&&(M=r="right");var K;e.options.lineWrapping&&(K=c.getClientRects()).length>1?R=K[r=="right"?K.length-1:0]:R=c.getBoundingClientRect()}if(L&&p<9&&!_&&(!R||!R.left&&!R.right)){var Q=c.parentNode.getClientRects()[0];Q?R={left:Q.left,right:Q.left+zi(e.display),top:Q.top,bottom:Q.bottom}:R=ws}for(var $=R.top-t.rect.top,re=R.bottom-t.rect.top,se=($+re)/2,de=t.view.measure.heights,pe=0;pe<de.length-1&&!(se<de[pe]);pe++);var ye=pe?de[pe-1]:0,ve=de[pe],me={left:(M=="right"?R.right:R.left)-t.rect.left,right:(M=="left"?R.left:R.right)-t.rect.left,top:ye,bottom:ve};return!R.left&&!R.right&&(me.bogus=!0),e.options.singleCursorHeightPerLine||(me.rtop=$,me.rbottom=re),me}function ac(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!$t(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function xs(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ks(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)xs(e.display.view[t])}function fn(e){ks(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Es(){return y&&l?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ms(){return y&&l?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function So(e){var t=Je(e),i=t.widgets,r=0;if(i)for(var n=0;n<i.length;++n)i[n].above&&(r+=un(i[n]));return r}function Nn(e,t,i,r,n){if(!n){var c=So(t);i.top+=c,i.bottom+=c}if(r=="line")return i;r||(r="local");var _=Ct(t);if(r=="local"?_+=Wn(e.display):_-=e.display.viewOffset,r=="page"||r=="window"){var w=e.display.lineSpace.getBoundingClientRect();_+=w.top+(r=="window"?0:Ms());var M=w.left+(r=="window"?0:Es());i.left+=M,i.right+=M}return i.top+=_,i.bottom+=_,i}function Ts(e,t,i){if(i=="div")return t;var r=t.left,n=t.top;if(i=="page")r-=Es(),n-=Ms();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();r+=c.left,n+=c.top}var _=e.display.lineSpace.getBoundingClientRect();return{left:r-_.left,top:n-_.top}}function jn(e,t,i,r,n){return r||(r=Se(e.doc,t.line)),Nn(e,r,Cs(e,r,t.ch,n),i)}function dr(e,t,i,r,n,c){r=r||Se(e.doc,t.line),n||(n=ji(e,r));function _(re,se){var de=Tr(e,n,re,se?"right":"left",c);return se?de.left=de.right:de.right=de.left,Nn(e,r,de,i)}var w=ut(r,e.doc.direction),M=t.ch,R=t.sticky;if(M>=r.text.length?(M=r.text.length,R="before"):M<=0&&(M=0,R="after"),!w)return _(R=="before"?M-1:M,R=="before");function N(re,se,de){var pe=w[se],ye=pe.level==1;return _(de?re-1:re,ye!=de)}var K=Ne(w,M,R),Q=_t,$=N(M,K,R=="before");return Q!=null&&($.other=N(M,Q,R!="before")),$}function As(e,t){var i=0;t=ge(e.doc,t),e.options.lineWrapping||(i=zi(e.display)*t.ch);var r=Se(e.doc,t.line),n=Ct(r)+Wn(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function Co(e,t,i,r,n){var c=ce(e,t,i);return c.xRel=n,r&&(c.outside=r),c}function wo(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return Co(r.first,0,null,-1,-1);var n=Bt(r,i),c=r.first+r.size-1;if(n>c)return Co(r.first+r.size-1,Se(r,c).text.length,null,1,1);t<0&&(t=0);for(var _=Se(r,n);;){var w=lc(e,_,n,t,i),M=It(_,w.ch+(w.xRel>0||w.outside>0?1:0));if(!M)return w;var R=M.find(1);if(R.line==n)return R;_=Se(r,n=R.line)}}function Rs(e,t,i,r){r-=So(t);var n=t.text.length,c=Ut(function(_){return Tr(e,i,_-1).bottom<=r},n,0);return n=Ut(function(_){return Tr(e,i,_).top>r},c,n),{begin:c,end:n}}function Ds(e,t,i,r){i||(i=ji(e,t));var n=Nn(e,t,Tr(e,i,r),"line").top;return Rs(e,t,i,n)}function Lo(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function lc(e,t,i,r,n){n-=Ct(t);var c=ji(e,t),_=So(t),w=0,M=t.text.length,R=!0,N=ut(t,e.doc.direction);if(N){var K=(e.options.lineWrapping?uc:cc)(e,t,i,c,N,r,n);R=K.level!=1,w=R?K.from:K.to-1,M=R?K.to:K.from-1}var Q=null,$=null,re=Ut(function(Me){var xe=Tr(e,c,Me);return xe.top+=_,xe.bottom+=_,Lo(xe,r,n,!1)?(xe.top<=n&&xe.left<=r&&(Q=Me,$=xe),!0):!1},w,M),se,de,pe=!1;if($){var ye=r-$.left<$.right-r,ve=ye==R;re=Q+(ve?0:1),de=ve?"after":"before",se=ye?$.left:$.right}else{!R&&(re==M||re==w)&&re++,de=re==0?"after":re==t.text.length?"before":Tr(e,c,re-(R?1:0)).bottom+_<=n==R?"after":"before";var me=dr(e,ce(i,re,de),"line",t,c);se=me.left,pe=n<me.top?-1:n>=me.bottom?1:0}return re=Jr(t.text,re,1),Co(i,re,de,pe,r-se)}function cc(e,t,i,r,n,c,_){var w=Ut(function(K){var Q=n[K],$=Q.level!=1;return Lo(dr(e,ce(i,$?Q.to:Q.from,$?"before":"after"),"line",t,r),c,_,!0)},0,n.length-1),M=n[w];if(w>0){var R=M.level!=1,N=dr(e,ce(i,R?M.from:M.to,R?"after":"before"),"line",t,r);Lo(N,c,_,!0)&&N.top>_&&(M=n[w-1])}return M}function uc(e,t,i,r,n,c,_){var w=Rs(e,t,r,_),M=w.begin,R=w.end;/\s/.test(t.text.charAt(R-1))&&R--;for(var N=null,K=null,Q=0;Q<n.length;Q++){var $=n[Q];if(!($.from>=R||$.to<=M)){var re=$.level!=1,se=Tr(e,r,re?Math.min(R,$.to)-1:Math.max(M,$.from)).right,de=se<c?c-se+1e9:se-c;(!N||K>de)&&(N=$,K=de)}}return N||(N=n[n.length-1]),N.from<M&&(N={from:M,to:N.to,level:N.level}),N.to>R&&(N={from:N.from,to:R,level:N.level}),N}var Si;function Ui(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Si==null){Si=O("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Si.appendChild(document.createTextNode("x")),Si.appendChild(O("br"));Si.appendChild(document.createTextNode("x"))}x(e.measure,Si);var i=Si.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),A(e.measure),i||1}function zi(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=O("span","xxxxxxxxxx"),i=O("pre",[t],"CodeMirror-line-like");x(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function xo(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,c=t.gutters.firstChild,_=0;c;c=c.nextSibling,++_){var w=e.display.gutterSpecs[_].className;i[w]=c.offsetLeft+c.clientLeft+n,r[w]=c.clientWidth}return{fixedPos:ko(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ko(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Os(e){var t=Ui(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/zi(e.display)-3);return function(n){if(St(e.doc,n))return 0;var c=0;if(n.widgets)for(var _=0;_<n.widgets.length;_++)n.widgets[_].height&&(c+=n.widgets[_].height);return i?c+(Math.ceil(n.text.length/r)||1)*t:c+t}}function Eo(e){var t=e.doc,i=Os(e);t.iter(function(r){var n=i(r);n!=r.height&&nt(r,n)})}function Ci(e,t,i,r){var n=e.display;if(!i&&Vt(t).getAttribute("cm-not-content")=="true")return null;var c,_,w=n.lineSpace.getBoundingClientRect();try{c=t.clientX-w.left,_=t.clientY-w.top}catch{return null}var M=wo(e,c,_),R;if(r&&M.xRel>0&&(R=Se(e.doc,M.line).text).length==M.ch){var N=Ce(R,R.length,e.options.tabSize)-R.length;M=ce(M.line,Math.max(0,Math.round((c-bs(e.display).left)/zi(e.display))-N))}return M}function wi(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function Ht(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)ir&&hr(e.doc,t)<n.viewTo&&ri(e);else if(i<=n.viewFrom)ir&&yi(e.doc,i+r)>n.viewFrom?ri(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)ri(e);else if(t<=n.viewFrom){var c=Un(e,i,i+r,1);c?(n.view=n.view.slice(c.index),n.viewFrom=c.lineN,n.viewTo+=r):ri(e)}else if(i>=n.viewTo){var _=Un(e,t,t,-1);_?(n.view=n.view.slice(0,_.index),n.viewTo=_.lineN):ri(e)}else{var w=Un(e,t,t,-1),M=Un(e,i,i+r,1);w&&M?(n.view=n.view.slice(0,w.index).concat(Fn(e,w.lineN,M.lineN)).concat(n.view.slice(M.index)),n.viewTo+=r):ri(e)}var R=n.externalMeasured;R&&(i<R.lineN?R.lineN+=r:t<R.lineN+R.size&&(n.externalMeasured=null))}function ti(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var c=r.view[wi(e,t)];if(c.node!=null){var _=c.changes||(c.changes=[]);he(_,i)==-1&&_.push(i)}}}function ri(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Un(e,t,i,r){var n=wi(e,t),c,_=e.display.view;if(!ir||i==e.doc.first+e.doc.size)return{index:n,lineN:i};for(var w=e.display.viewFrom,M=0;M<n;M++)w+=_[M].size;if(w!=t){if(r>0){if(n==_.length-1)return null;c=w+_[n].size-t,n++}else c=w-t;t+=c,i+=c}for(;hr(e.doc,i)!=i;){if(n==(r<0?0:_.length-1))return null;i+=r*_[n-(r<0?1:0)].size,n+=r}return{index:n,lineN:i}}function fc(e,t,i){var r=e.display,n=r.view;n.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Fn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Fn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(wi(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Fn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,wi(e,i)))),r.viewTo=i}function Bs(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];!n.hidden&&(!n.node||n.changes)&&++i}return i}function hn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ps(e,t){t===void 0&&(t=!0);var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),c=r.selection=document.createDocumentFragment(),_=e.options.$customCursor;_&&(t=!0);for(var w=0;w<i.sel.ranges.length;w++)if(!(!t&&w==i.sel.primIndex)){var M=i.sel.ranges[w];if(!(M.from().line>=e.display.viewTo||M.to().line<e.display.viewFrom)){var R=M.empty();if(_){var N=_(e,M);N&&Mo(e,N,n)}else(R||e.options.showCursorWhenSelecting)&&Mo(e,M.head,n);R||hc(e,M,c)}}return r}function Mo(e,t,i){var r=dr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(O("div","\xA0","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=jn(e,t,"div",null,null),_=c.right-c.left;n.style.width=(_>0?_:e.defaultCharWidth())+"px"}if(r.other){var w=i.appendChild(O("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));w.style.display="",w.style.left=r.other.left+"px",w.style.top=r.other.top+"px",w.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function zn(e,t){return e.top-t.top||e.left-t.left}function hc(e,t,i){var r=e.display,n=e.doc,c=document.createDocumentFragment(),_=bs(e.display),w=_.left,M=Math.max(r.sizerWidth,bi(e)-r.sizer.offsetLeft)-_.right,R=n.direction=="ltr";function N(ve,me,Me,xe){me<0&&(me=0),me=Math.round(me),xe=Math.round(xe),c.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+ve+`px;
                             top: `+me+"px; width: "+(Me??M-ve)+`px;
                             height: `+(xe-me)+"px"))}function K(ve,me,Me){var xe=Se(n,ve),Re=xe.text.length,We,lt;function qe(Qe,Nt){return jn(e,ce(ve,Qe),"div",xe,Nt)}function Xt(Qe,Nt,pt){var it=Ds(e,xe,null,Qe),et=Nt=="ltr"==(pt=="after")?"left":"right",Xe=pt=="after"?it.begin:it.end-(/\s/.test(xe.text.charAt(it.end-1))?2:1);return qe(Xe,et)[et]}var Wt=ut(xe,n.direction);return di(Wt,me||0,Me??Re,function(Qe,Nt,pt,it){var et=pt=="ltr",Xe=qe(Qe,et?"left":"right"),jt=qe(Nt-1,et?"right":"left"),rn=me==null&&Qe==0,li=Me==null&&Nt==Re,Lt=it==0,Ar=!Wt||it==Wt.length-1;if(jt.top-Xe.top<=3){var ct=(R?rn:li)&&Lt,es=(R?li:rn)&&Ar,Zr=ct?w:(et?Xe:jt).left,Mi=es?M:(et?jt:Xe).right;N(Zr,Xe.top,Mi-Zr,Xe.bottom)}else{var Ti,Mt,nn,ts;et?(Ti=R&&rn&&Lt?w:Xe.left,Mt=R?M:Xt(Qe,pt,"before"),nn=R?w:Xt(Nt,pt,"after"),ts=R&&li&&Ar?M:jt.right):(Ti=R?Xt(Qe,pt,"before"):w,Mt=!R&&rn&&Lt?M:Xe.right,nn=!R&&li&&Ar?w:jt.left,ts=R?Xt(Nt,pt,"after"):M),N(Ti,Xe.top,Mt-Ti,Xe.bottom),Xe.bottom<jt.top&&N(w,Xe.bottom,null,jt.top),N(nn,jt.top,ts-nn,jt.bottom)}(!We||zn(Xe,We)<0)&&(We=Xe),zn(jt,We)<0&&(We=jt),(!lt||zn(Xe,lt)<0)&&(lt=Xe),zn(jt,lt)<0&&(lt=jt)}),{start:We,end:lt}}var Q=t.from(),$=t.to();if(Q.line==$.line)K(Q.line,Q.ch,$.ch);else{var re=Se(n,Q.line),se=Se(n,$.line),de=Je(re)==Je(se),pe=K(Q.line,Q.ch,de?re.text.length+1:null).end,ye=K($.line,de?0:null,$.ch).start;de&&(pe.top<ye.top-2?(N(pe.right,pe.top,null,pe.bottom),N(w,ye.top,ye.left,ye.bottom)):N(pe.right,pe.top,ye.left-pe.right,pe.bottom)),pe.bottom<ye.top&&N(w,pe.bottom,null,ye.top)}i.appendChild(c)}function To(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||qi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Is(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ro(e))}function Ao(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&qi(e))},100)}function Ro(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Te(e,"focus",e,t),e.state.focused=!0,W(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),g&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),To(e))}function qi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Te(e,"blur",e,t),e.state.focused=!1,I(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function qn(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),n=t.lineDiv.getBoundingClientRect().top,c=0,_=0;_<t.view.length;_++){var w=t.view[_],M=e.options.lineWrapping,R=void 0,N=0;if(!w.hidden){if(n+=w.line.height,L&&p<8){var K=w.node.offsetTop+w.node.offsetHeight;R=K-i,i=K}else{var Q=w.node.getBoundingClientRect();R=Q.bottom-Q.top,!M&&w.text.firstChild&&(N=w.text.firstChild.getBoundingClientRect().right-Q.left-1)}var $=w.line.height-R;if(($>.005||$<-.005)&&(n<r&&(c-=$),nt(w.line,R),Hs(w.line),w.rest))for(var re=0;re<w.rest.length;re++)Hs(w.rest[re]);if(N>e.display.sizerWidth){var se=Math.ceil(N/zi(e.display));se>e.display.maxLineLength&&(e.display.maxLineLength=se,e.display.maxLine=w.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function Hs(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Gn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Wn(e));var n=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,c=Bt(t,r),_=Bt(t,n);if(i&&i.ensure){var w=i.ensure.from.line,M=i.ensure.to.line;w<c?(c=w,_=Bt(t,Ct(Se(t,w))+e.wrapper.clientHeight)):Math.min(M,t.lastLine())>=_&&(c=Bt(t,Ct(Se(t,M))-e.wrapper.clientHeight),_=M)}return{from:c,to:Math.max(_,c+1)}}function dc(e,t){if(!je(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!f){var c=O("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Wn(e.display))+`px;
                         height: `+(t.bottom-t.top+Mr(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(n),e.display.lineSpace.removeChild(c)}}}function pc(e,t,i,r){r==null&&(r=0);var n;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?ce(t.line,t.ch+1,"before"):t,t=t.ch?ce(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var _=!1,w=dr(e,t),M=!i||i==t?w:dr(e,i);n={left:Math.min(w.left,M.left),top:Math.min(w.top,M.top)-r,right:Math.max(w.left,M.left),bottom:Math.max(w.bottom,M.bottom)+r};var R=Do(e,n),N=e.doc.scrollTop,K=e.doc.scrollLeft;if(R.scrollTop!=null&&(pn(e,R.scrollTop),Math.abs(e.doc.scrollTop-N)>1&&(_=!0)),R.scrollLeft!=null&&(Li(e,R.scrollLeft),Math.abs(e.doc.scrollLeft-K)>1&&(_=!0)),!_)break}return n}function vc(e,t){var i=Do(e,t);i.scrollTop!=null&&pn(e,i.scrollTop),i.scrollLeft!=null&&Li(e,i.scrollLeft)}function Do(e,t){var i=e.display,r=Ui(e.display);t.top<0&&(t.top=0);var n=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=mo(e),_={};t.bottom-t.top>c&&(t.bottom=t.top+c);var w=e.doc.height+yo(i),M=t.top<r,R=t.bottom>w-r;if(t.top<n)_.scrollTop=M?0:t.top;else if(t.bottom>n+c){var N=Math.min(t.top,(R?w:t.bottom)-c);N!=n&&(_.scrollTop=N)}var K=e.options.fixedGutter?0:i.gutters.offsetWidth,Q=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-K,$=bi(e)-i.gutters.offsetWidth,re=t.right-t.left>$;return re&&(t.right=t.left+$),t.left<10?_.scrollLeft=0:t.left<Q?_.scrollLeft=Math.max(0,t.left+K-(re?0:10)):t.right>$+Q-3&&(_.scrollLeft=t.right+(re?0:10)-$),_}function Oo(e,t){t!=null&&(Kn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Gi(e){Kn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function dn(e,t,i){(t!=null||i!=null)&&Kn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function _c(e,t){Kn(e),e.curOp.scrollToPos=t}function Kn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=As(e,t.from),r=As(e,t.to);Fs(e,i,r,t.margin)}}function Fs(e,t,i,r){var n=Do(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});dn(e,n.scrollLeft,n.scrollTop)}function pn(e,t){Math.abs(e.doc.scrollTop-t)<2||(z||Po(e,{top:t}),Ws(e,t,!0),z&&Po(e),gn(e,100))}function Ws(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Li(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,qs(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function vn(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+yo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Mr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var xi=function(e,t,i){this.cm=i;var r=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,e(r),e(n),ke(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ke(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,L&&p<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};xi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},xi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},xi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},xi.prototype.zeroWidthHack=function(){var e=o&&!u?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new we,this.disableVert=new we},xi.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var n=e.getBoundingClientRect(),c=i=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},xi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var _n=function(){};_n.prototype.update=function(){return{bottom:0,right:0}},_n.prototype.setScrollLeft=function(){},_n.prototype.setScrollTop=function(){},_n.prototype.clear=function(){};function Ki(e,t){t||(t=vn(e));var i=e.display.barWidth,r=e.display.barHeight;Ns(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&qn(e),Ns(e,vn(e)),i=e.display.barWidth,r=e.display.barHeight}function Ns(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var js={native:xi,null:_n};function Us(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new js[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ke(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?Li(e,t):pn(e,t)},e),e.display.scrollbars.addClass&&W(e.display.wrapper,e.display.scrollbars.addClass)}var gc=0;function ki(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++gc,markArrays:null},Yl(e.curOp)}function Ei(e){var t=e.curOp;t&&Vl(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;yc(i)})}function yc(e){for(var t=e.ops,i=0;i<t.length;i++)mc(t[i]);for(var r=0;r<t.length;r++)bc(t[r]);for(var n=0;n<t.length;n++)Sc(t[n]);for(var c=0;c<t.length;c++)Cc(t[c]);for(var _=0;_<t.length;_++)wc(t[_])}function mc(e){var t=e.cm,i=t.display;xc(t),e.updateMaxLine&&mi(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Xn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function bc(e){e.updatedDisplay=e.mustUpdate&&Bo(e.cm,e.update)}function Sc(e){var t=e.cm,i=t.display;e.updatedDisplay&&qn(t),e.barMeasure=vn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Cs(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Mr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-bi(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Cc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Li(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==F();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ki(t,e.barMeasure),e.updatedDisplay&&Ho(t,e.barMeasure),e.selectionChanged&&To(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Is(e.cm)}function wc(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&zs(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&Ws(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Li(t,e.scrollLeft,!0,!0),e.scrollToPos){var n=pc(t,ge(r,e.scrollToPos.from),ge(r,e.scrollToPos.to),e.scrollToPos.margin);dc(t,n)}var c=e.maybeHiddenMarkers,_=e.maybeUnhiddenMarkers;if(c)for(var w=0;w<c.length;++w)c[w].lines.length||Te(c[w],"hide");if(_)for(var M=0;M<_.length;++M)_[M].lines.length&&Te(_[M],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Te(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kt(e,t){if(e.curOp)return t();ki(e);try{return t()}finally{Ei(e)}}function st(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ki(e);try{return t.apply(e,arguments)}finally{Ei(e)}}}function Et(e){return function(){if(this.curOp)return e.apply(this,arguments);ki(this);try{return e.apply(this,arguments)}finally{Ei(this)}}}function at(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ki(t);try{return e.apply(this,arguments)}finally{Ei(t)}}}function gn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,fe(Lc,e))}function Lc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=Nr(e,t.highlightFrontier),n=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(r.line>=e.display.viewFrom){var _=c.styles,w=c.text.length>e.options.maxHighlightLength?dt(t.mode,r.state):null,M=Di(e,c,r,!0);w&&(r.state=w),c.styles=M.styles;var R=c.styleClasses,N=M.classes;N?c.styleClasses=N:R&&(c.styleClasses=null);for(var K=!_||_.length!=c.styles.length||R!=N&&(!R||!N||R.bgClass!=N.bgClass||R.textClass!=N.textClass),Q=0;!K&&Q<_.length;++Q)K=_[Q]!=c.styles[Q];K&&n.push(r.line),c.stateAfter=r.save(),r.nextLine()}else c.text.length<=e.options.maxHighlightLength&&pi(e,c.text,r),c.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return gn(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),n.length&&Kt(e,function(){for(var c=0;c<n.length;c++)ti(e,n[c],"text")})}}var Xn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Gn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=bi(e),this.force=i,this.dims=xo(e),this.events=[]};Xn.prototype.signal=function(e,t){Ge(e,t)&&this.events.push(arguments)},Xn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Te.apply(null,this.events[e])};function xc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Mr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Mr(e)+"px",t.scrollbarsClipped=!0)}function kc(e){if(e.hasFocus())return null;var t=F();if(!t||!U(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&U(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function Ec(e){if(!(!e||!e.activeElt||e.activeElt==F())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&U(document.body,e.anchorNode)&&U(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function Bo(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return ri(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Bs(e)==0)return!1;Gs(e)&&(ri(e),t.dims=xo(e));var n=r.first+r.size,c=Math.max(t.visible.from-e.options.viewportMargin,r.first),_=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(r.first,i.viewFrom)),i.viewTo>_&&i.viewTo-_<20&&(_=Math.min(n,i.viewTo)),ir&&(c=hr(e.doc,c),_=yi(e.doc,_));var w=c!=i.viewFrom||_!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;fc(e,c,_),i.viewOffset=Ct(Se(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var M=Bs(e);if(!w&&M==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var R=kc(e);return M>4&&(i.lineDiv.style.display="none"),Mc(e,i.updateLineNumbers,t.dims),M>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,Ec(R),A(i.cursorDiv),A(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,w&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,gn(e,400)),i.updateLineNumbers=null,!0}function zs(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==bi(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+yo(e.display)-mo(e),i.top)}),t.visible=Gn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Gn(e.display,e.doc,i));if(!Bo(e,t))break;qn(e);var n=vn(e);hn(e),Ki(e,n),Ho(e,n),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Po(e,t){var i=new Xn(e,t);if(Bo(e,i)){qn(e),zs(e,i);var r=vn(e);hn(e),Ki(e,r),Ho(e,r),i.finish()}}function Mc(e,t,i){var r=e.display,n=e.options.lineNumbers,c=r.lineDiv,_=c.firstChild;function w(re){var se=re.nextSibling;return g&&o&&e.display.currentWheelTarget==re?re.style.display="none":re.parentNode.removeChild(re),se}for(var M=r.view,R=r.viewFrom,N=0;N<M.length;N++){var K=M[N];if(!K.hidden)if(!K.node||K.node.parentNode!=c){var Q=tc(e,K,R,i);c.insertBefore(Q,_)}else{for(;_!=K.node;)_=w(_);var $=n&&t!=null&&t<=R&&K.lineNumber;K.changes&&(he(K.changes,"gutter")>-1&&($=!1),vs(e,K,R,i)),$&&(A(K.lineNumber),K.lineNumber.appendChild(document.createTextNode(Lr(e.options,R)))),_=K.node.nextSibling}R+=K.size}for(;_;)_=w(_)}function Io(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",ot(e,"gutterChanged",e)}function Ho(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Mr(e)+"px"}function qs(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=ko(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,c=r+"px",_=0;_<i.length;_++)if(!i[_].hidden){e.options.fixedGutter&&(i[_].gutter&&(i[_].gutter.style.left=c),i[_].gutterBackground&&(i[_].gutterBackground.style.left=c));var w=i[_].alignable;if(w)for(var M=0;M<w.length;M++)w[M].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function Gs(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=Lr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var n=r.measure.appendChild(O("div",[O("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=n.firstChild.offsetWidth,_=n.offsetWidth-c;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(c,r.lineGutter.offsetWidth-_)+1,r.lineNumWidth=r.lineNumInnerWidth+_,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Io(e.display),!0}return!1}function Fo(e,t){for(var i=[],r=!1,n=0;n<e.length;n++){var c=e[n],_=null;if(typeof c!="string"&&(_=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:c,style:_})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Ks(e){var t=e.gutters,i=e.gutterSpecs;A(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var n=i[r],c=n.className,_=n.style,w=t.appendChild(O("div",null,"CodeMirror-gutter "+c));_&&(w.style.cssText=_),c=="CodeMirror-linenumbers"&&(e.lineGutter=w,w.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",Io(e)}function yn(e){Ks(e.display),Ht(e),qs(e)}function Tc(e,t,i,r){var n=this;this.input=i,n.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=E("div",null,"CodeMirror-code"),n.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=O("div",null,"CodeMirror-cursors"),n.measure=O("div",null,"CodeMirror-measure"),n.lineMeasure=O("div",null,"CodeMirror-measure"),n.lineSpace=E("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var c=E("div",[n.lineSpace],"CodeMirror-lines");n.mover=O("div",[c],null,"position: relative"),n.sizer=O("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=O("div",null,null,"position: absolute; height: "+B+"px; width: 1px;"),n.gutters=O("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=O("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=O("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),n.wrapper.setAttribute("translate","no"),L&&p<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!g&&!(z&&s)&&(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=Fo(r.gutters,r.lineNumbers),Ks(n),i.init(n)}var Yn=0,Xr=null;L?Xr=-.53:z?Xr=15:y?Xr=-.7:S&&(Xr=-1/3);function Xs(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function Ac(e){var t=Xs(e);return t.x*=Xr,t.y*=Xr,t}function Ys(e,t){var i=Xs(t),r=i.x,n=i.y,c=Xr;t.deltaMode===0&&(r=t.deltaX,n=t.deltaY,c=1);var _=e.display,w=_.scroller,M=w.scrollWidth>w.clientWidth,R=w.scrollHeight>w.clientHeight;if(!!(r&&M||n&&R)){if(n&&o&&g){e:for(var N=t.target,K=_.view;N!=w;N=N.parentNode)for(var Q=0;Q<K.length;Q++)if(K[Q].node==N){e.display.currentWheelTarget=N;break e}}if(r&&!z&&!b&&c!=null){n&&R&&pn(e,Math.max(0,w.scrollTop+n*c)),Li(e,Math.max(0,w.scrollLeft+r*c)),(!n||n&&R)&&Ye(t),_.wheelStartX=null;return}if(n&&c!=null){var $=n*c,re=e.doc.scrollTop,se=re+_.wrapper.clientHeight;$<0?re=Math.max(0,re+$-50):se=Math.min(e.doc.height,se+$+50),Po(e,{top:re,bottom:se})}Yn<20&&t.deltaMode!==0&&(_.wheelStartX==null?(_.wheelStartX=w.scrollLeft,_.wheelStartY=w.scrollTop,_.wheelDX=r,_.wheelDY=n,setTimeout(function(){if(_.wheelStartX!=null){var de=w.scrollLeft-_.wheelStartX,pe=w.scrollTop-_.wheelStartY,ye=pe&&_.wheelDY&&pe/_.wheelDY||de&&_.wheelDX&&de/_.wheelDX;_.wheelStartX=_.wheelStartY=null,!!ye&&(Xr=(Xr*Yn+ye)/(Yn+1),++Yn)}},200)):(_.wheelDX+=r,_.wheelDY+=n))}}var er=function(e,t){this.ranges=e,this.primIndex=t};er.prototype.primary=function(){return this.ranges[this.primIndex]},er.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!G(i.anchor,r.anchor)||!G(i.head,r.head))return!1}return!0},er.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Pe(oe(this.ranges[t].anchor),oe(this.ranges[t].head));return new er(e,this.primIndex)},er.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},er.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(D(t,r.from())>=0&&D(e,r.to())<=0)return i}return-1};var Pe=function(e,t){this.anchor=e,this.head=t};Pe.prototype.from=function(){return Ae(this.anchor,this.head)},Pe.prototype.to=function(){return ue(this.anchor,this.head)},Pe.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function pr(e,t,i){var r=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(Q,$){return D(Q.from(),$.from())}),i=he(t,n);for(var c=1;c<t.length;c++){var _=t[c],w=t[c-1],M=D(w.to(),_.from());if(r&&!_.empty()?M>0:M>=0){var R=Ae(w.from(),_.from()),N=ue(w.to(),_.to()),K=w.empty()?_.from()==_.head:w.from()==w.head;c<=i&&--i,t.splice(--c,2,new Pe(K?N:R,K?R:N))}}return new er(t,i)}function ii(e,t){return new er([new Pe(e,t||e)],0)}function ni(e){return e.text?ce(e.from.line+e.text.length-1,Ee(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Zs(e,t){if(D(e,t.from)<0)return e;if(D(e,t.to)<=0)return ni(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ni(t).ch-t.to.ch),ce(i,r)}function Wo(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new Pe(Zs(n.anchor,t),Zs(n.head,t)))}return pr(e.cm,i,e.sel.primIndex)}function Vs(e,t,i){return e.line==t.line?ce(i.line,e.ch-t.ch+i.ch):ce(i.line+(e.line-t.line),e.ch)}function Rc(e,t,i){for(var r=[],n=ce(e.first,0),c=n,_=0;_<t.length;_++){var w=t[_],M=Vs(w.from,n,c),R=Vs(ni(w),n,c);if(n=w.to,c=R,i=="around"){var N=e.sel.ranges[_],K=D(N.head,N.anchor)<0;r[_]=new Pe(K?R:M,K?M:R)}else r[_]=new Pe(M,M)}return new er(r,e.sel.primIndex)}function No(e){e.doc.mode=fr(e.options,e.doc.modeOption),mn(e)}function mn(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,gn(e,100),e.state.modeGen++,e.curOp&&Ht(e)}function $s(e,t){return t.from.ch==0&&t.to.ch==0&&Ee(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function jo(e,t,i,r){function n(ye){return i?i[ye]:null}function c(ye,ve,me){Gr(ye,ve,me,r),ot(ye,"change",ye,t)}function _(ye,ve){for(var me=[],Me=ye;Me<ve;++Me)me.push(new Gt(R[Me],n(Me),r));return me}var w=t.from,M=t.to,R=t.text,N=Se(e,w.line),K=Se(e,M.line),Q=Ee(R),$=n(R.length-1),re=M.line-w.line;if(t.full)e.insert(0,_(0,R.length)),e.remove(R.length,e.size-R.length);else if($s(e,t)){var se=_(0,R.length-1);c(K,K.text,$),re&&e.remove(w.line,re),se.length&&e.insert(w.line,se)}else if(N==K)if(R.length==1)c(N,N.text.slice(0,w.ch)+Q+N.text.slice(M.ch),$);else{var de=_(1,R.length-1);de.push(new Gt(Q+N.text.slice(M.ch),$,r)),c(N,N.text.slice(0,w.ch)+R[0],n(0)),e.insert(w.line+1,de)}else if(R.length==1)c(N,N.text.slice(0,w.ch)+R[0]+K.text.slice(M.ch),n(0)),e.remove(w.line+1,re);else{c(N,N.text.slice(0,w.ch)+R[0],n(0)),c(K,Q+K.text.slice(M.ch),$);var pe=_(1,R.length-1);re>1&&e.remove(w.line+1,re-1),e.insert(w.line+1,pe)}ot(e,"change",e,t)}function oi(e,t,i){function r(n,c,_){if(n.linked)for(var w=0;w<n.linked.length;++w){var M=n.linked[w];if(M.doc!=c){var R=_&&M.sharedHist;i&&!R||(t(M.doc,R),r(M.doc,n,R))}}}r(e,null,!0)}function Js(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Eo(e),No(e),Qs(e),e.options.direction=t.direction,e.options.lineWrapping||mi(e),e.options.mode=t.modeOption,Ht(e)}function Qs(e){(e.doc.direction=="rtl"?W:I)(e.display.lineDiv,"CodeMirror-rtl")}function Dc(e){Kt(e,function(){Qs(e),Ht(e)})}function Zn(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Uo(e,t){var i={from:oe(t.from),to:ni(t),text:Ot(e,t.from,t.to)};return ra(e,i,t.from.line,t.to.line+1),oi(e,function(r){return ra(r,i,t.from.line,t.to.line+1)},!0),i}function ea(e){for(;e.length;){var t=Ee(e);if(t.ranges)e.pop();else break}}function Oc(e,t){if(t)return ea(e.done),Ee(e.done);if(e.done.length&&!Ee(e.done).ranges)return Ee(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ee(e.done)}function ta(e,t,i,r){var n=e.history;n.undone.length=0;var c=+new Date,_,w;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&n.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(_=Oc(n,n.lastOp==r)))w=Ee(_.changes),D(t.from,t.to)==0&&D(t.from,w.to)==0?w.to=ni(t):_.changes.push(Uo(e,t));else{var M=Ee(n.done);for((!M||!M.ranges)&&Vn(e.sel,n.done),_={changes:[Uo(e,t)],generation:n.generation},n.done.push(_);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=c,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,w||Te(e,"historyAdded")}function Bc(e,t,i,r){var n=t.charAt(0);return n=="*"||n=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Pc(e,t,i,r){var n=e.history,c=r&&r.origin;i==n.lastSelOp||c&&n.lastSelOrigin==c&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==c||Bc(e,c,Ee(n.done),t))?n.done[n.done.length-1]=t:Vn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=c,n.lastSelOp=i,r&&r.clearRedo!==!1&&ea(n.undone)}function Vn(e,t){var i=Ee(t);i&&i.ranges&&i.equals(e)||t.push(e)}function ra(e,t,i,r){var n=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(_){_.markedSpans&&((n||(n=t["spans_"+e.id]={}))[c]=_.markedSpans),++c})}function Ic(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Hc(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(Ic(i[n]));return r}function ia(e,t){var i=Hc(e,t),r=Ze(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var c=i[n],_=r[n];if(c&&_){e:for(var w=0;w<_.length;++w){for(var M=_[w],R=0;R<c.length;++R)if(c[R].marker==M.marker)continue e;c.push(M)}}else _&&(i[n]=_)}return i}function Xi(e,t,i){for(var r=[],n=0;n<e.length;++n){var c=e[n];if(c.ranges){r.push(i?er.prototype.deepCopy.call(c):c);continue}var _=c.changes,w=[];r.push({changes:w});for(var M=0;M<_.length;++M){var R=_[M],N=void 0;if(w.push({from:R.from,to:R.to,text:R.text}),t)for(var K in R)(N=K.match(/^spans_(\d+)$/))&&he(t,Number(N[1]))>-1&&(Ee(w)[K]=R[K],delete R[K])}}return r}function zo(e,t,i,r){if(r){var n=e.anchor;if(i){var c=D(t,n)<0;c!=D(i,n)<0?(n=t,t=i):c!=D(t,i)<0&&(t=i)}return new Pe(n,t)}else return new Pe(i||t,t)}function $n(e,t,i,r,n){n==null&&(n=e.cm&&(e.cm.display.shift||e.extend)),wt(e,new er([zo(e.sel.primary(),t,i,n)],0),r)}function na(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)r[c]=zo(e.sel.ranges[c],t[c],null,n);var _=pr(e.cm,r,e.sel.primIndex);wt(e,_,i)}function qo(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,wt(e,pr(e.cm,n,e.sel.primIndex),r)}function oa(e,t,i,r){wt(e,ii(t,i),r)}function Fc(e,t,i){var r={ranges:t.ranges,update:function(n){this.ranges=[];for(var c=0;c<n.length;c++)this.ranges[c]=new Pe(ge(e,n[c].anchor),ge(e,n[c].head))},origin:i&&i.origin};return Te(e,"beforeSelectionChange",e,r),e.cm&&Te(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?pr(e.cm,r.ranges,r.ranges.length-1):t}function sa(e,t,i){var r=e.history.done,n=Ee(r);n&&n.ranges?(r[r.length-1]=t,Jn(e,t,i)):wt(e,t,i)}function wt(e,t,i){Jn(e,t,i),Pc(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Jn(e,t,i){(Ge(e,"beforeSelectionChange")||e.cm&&Ge(e.cm,"beforeSelectionChange"))&&(t=Fc(e,t,i));var r=i&&i.bias||(D(t.primary().head,e.sel.primary().head)<0?-1:1);aa(e,ca(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Gi(e.cm)}function aa(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,lr(e.cm)),ot(e,"cursorActivity",e))}function la(e){aa(e,ca(e,e.sel,null,!1))}function ca(e,t,i,r){for(var n,c=0;c<t.ranges.length;c++){var _=t.ranges[c],w=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],M=Qn(e,_.anchor,w&&w.anchor,i,r),R=Qn(e,_.head,w&&w.head,i,r);(n||M!=_.anchor||R!=_.head)&&(n||(n=t.ranges.slice(0,c)),n[c]=new Pe(M,R))}return n?pr(e.cm,n,t.primIndex):t}function Yi(e,t,i,r,n){var c=Se(e,t.line);if(c.markedSpans)for(var _=0;_<c.markedSpans.length;++_){var w=c.markedSpans[_],M=w.marker,R="selectLeft"in M?!M.selectLeft:M.inclusiveLeft,N="selectRight"in M?!M.selectRight:M.inclusiveRight;if((w.from==null||(R?w.from<=t.ch:w.from<t.ch))&&(w.to==null||(N?w.to>=t.ch:w.to>t.ch))){if(n&&(Te(M,"beforeCursorEnter"),M.explicitlyCleared))if(c.markedSpans){--_;continue}else break;if(!M.atomic)continue;if(i){var K=M.find(r<0?1:-1),Q=void 0;if((r<0?N:R)&&(K=ua(e,K,-r,K&&K.line==t.line?c:null)),K&&K.line==t.line&&(Q=D(K,i))&&(r<0?Q<0:Q>0))return Yi(e,K,t,r,n)}var $=M.find(r<0?-1:1);return(r<0?R:N)&&($=ua(e,$,r,$.line==t.line?c:null)),$?Yi(e,$,t,r,n):null}}return t}function Qn(e,t,i,r,n){var c=r||1,_=Yi(e,t,i,c,n)||!n&&Yi(e,t,i,c,!0)||Yi(e,t,i,-c,n)||!n&&Yi(e,t,i,-c,!0);return _||(e.cantEdit=!0,ce(e.first,0))}function ua(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?ge(e,ce(t.line-1)):null:i>0&&t.ch==(r||Se(e,t.line)).text.length?t.line<e.first+e.size-1?ce(t.line+1,0):null:new ce(t.line,t.ch+i)}function fa(e){e.setSelection(ce(e.firstLine(),0),ce(e.lastLine()),q)}function ha(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(n,c,_,w){n&&(r.from=ge(e,n)),c&&(r.to=ge(e,c)),_&&(r.text=_),w!==void 0&&(r.origin=w)}),Te(e,"beforeChange",e,r),e.cm&&Te(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Zi(e,t,i){if(e.cm){if(!e.cm.curOp)return st(e.cm,Zi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((Ge(e,"beforeChange")||e.cm&&Ge(e.cm,"beforeChange"))&&(t=ha(e,t,!0),!t))){var r=In&&!i&&or(e,t.from,t.to);if(r)for(var n=r.length-1;n>=0;--n)da(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else da(e,t)}}function da(e,t){if(!(t.text.length==1&&t.text[0]==""&&D(t.from,t.to)==0)){var i=Wo(e,t);ta(e,t,i,e.cm?e.cm.curOp.id:NaN),bn(e,t,i,Ze(e,t));var r=[];oi(e,function(n,c){!c&&he(r,n.history)==-1&&(ga(n.history,t),r.push(n.history)),bn(n,t,null,Ze(n,t))})}}function eo(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var n=e.history,c,_=e.sel,w=t=="undo"?n.done:n.undone,M=t=="undo"?n.undone:n.done,R=0;R<w.length&&(c=w[R],!(i?c.ranges&&!c.equals(e.sel):!c.ranges));R++);if(R!=w.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(c=w.pop(),c.ranges){if(Vn(c,M),i&&!c.equals(e.sel)){wt(e,c,{clearRedo:!1});return}_=c}else if(r){w.push(c);return}else break;var N=[];Vn(_,M),M.push({changes:N,generation:n.generation}),n.generation=c.generation||++n.maxGeneration;for(var K=Ge(e,"beforeChange")||e.cm&&Ge(e.cm,"beforeChange"),Q=function(se){var de=c.changes[se];if(de.origin=t,K&&!ha(e,de,!1))return w.length=0,{};N.push(Uo(e,de));var pe=se?Wo(e,de):Ee(w);bn(e,de,pe,ia(e,de)),!se&&e.cm&&e.cm.scrollIntoView({from:de.from,to:ni(de)});var ye=[];oi(e,function(ve,me){!me&&he(ye,ve.history)==-1&&(ga(ve.history,de),ye.push(ve.history)),bn(ve,de,null,ia(ve,de))})},$=c.changes.length-1;$>=0;--$){var re=Q($);if(re)return re.v}}}}function pa(e,t){if(t!=0&&(e.first+=t,e.sel=new er(He(e.sel.ranges,function(n){return new Pe(ce(n.anchor.line+t,n.anchor.ch),ce(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){Ht(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)ti(e.cm,r,"gutter")}}function bn(e,t,i,r){if(e.cm&&!e.cm.curOp)return st(e.cm,bn)(e,t,i,r);if(t.to.line<e.first){pa(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);pa(e,n),t={from:ce(e.first,0),to:ce(t.to.line+n,t.to.ch),text:[Ee(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:ce(c,Se(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ot(e,t.from,t.to),i||(i=Wo(e,t)),e.cm?Wc(e.cm,t,r):jo(e,t,r),Jn(e,i,q),e.cantEdit&&Qn(e,ce(e.firstLine(),0))&&(e.cantEdit=!1)}}function Wc(e,t,i){var r=e.doc,n=e.display,c=t.from,_=t.to,w=!1,M=c.line;e.options.lineWrapping||(M=Oe(Je(Se(r,c.line))),r.iter(M,_.line+1,function($){if($==n.maxLine)return w=!0,!0})),r.sel.contains(t.from,t.to)>-1&&lr(e),jo(r,t,i,Os(e)),e.options.lineWrapping||(r.iter(M,c.line+t.text.length,function($){var re=ei($);re>n.maxLineLength&&(n.maxLine=$,n.maxLineLength=re,n.maxLineChanged=!0,w=!1)}),w&&(e.curOp.updateMaxLine=!0)),Pn(r,c.line),gn(e,400);var R=t.text.length-(_.line-c.line)-1;t.full?Ht(e):c.line==_.line&&t.text.length==1&&!$s(e.doc,t)?ti(e,c.line,"text"):Ht(e,c.line,_.line+1,R);var N=Ge(e,"changes"),K=Ge(e,"change");if(K||N){var Q={from:c,to:_,text:t.text,removed:t.removed,origin:t.origin};K&&ot(e,"change",e,Q),N&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(Q)}e.display.selForContextMenu=null}function Vi(e,t,i,r,n){var c;r||(r=i),D(r,i)<0&&(c=[r,i],i=c[0],r=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Zi(e,{from:i,to:r,text:t,origin:n})}function va(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function _a(e,t,i,r){for(var n=0;n<e.length;++n){var c=e[n],_=!0;if(c.ranges){c.copied||(c=e[n]=c.deepCopy(),c.copied=!0);for(var w=0;w<c.ranges.length;w++)va(c.ranges[w].anchor,t,i,r),va(c.ranges[w].head,t,i,r);continue}for(var M=0;M<c.changes.length;++M){var R=c.changes[M];if(i<R.from.line)R.from=ce(R.from.line+r,R.from.ch),R.to=ce(R.to.line+r,R.to.ch);else if(t<=R.to.line){_=!1;break}}_||(e.splice(0,n+1),n=0)}}function ga(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;_a(e.done,i,r,n),_a(e.undone,i,r,n)}function Sn(e,t,i,r){var n=t,c=t;return typeof t=="number"?c=Se(e,De(e,t)):n=Oe(t),n==null?null:(r(c,n)&&e.cm&&ti(e.cm,n,i),c)}function Cn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}Cn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var n=this.lines[i];this.height-=n.height,_o(n),ot(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function wn(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}wn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var c=Math.min(t,n-e),_=r.height;if(r.removeInner(e,c),this.height-=_-r.height,n==c&&(this.children.splice(i--,1),r.parent=null),(t-=c)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Cn))){var w=[];this.collapse(w),this.children=[new Cn(w)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<=c){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(var _=n.lines.length%25+25,w=_;w<n.lines.length;){var M=new Cn(n.lines.slice(w,w+=25));n.height-=M.height,this.children.splice(++r,0,M),M.parent=this}n.lines=n.lines.slice(0,_),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new wn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=he(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new wn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<c){var _=Math.min(t,c-e);if(n.iterN(e,_,i))return!0;if((t-=_)==0)break;e=0}else e-=c}}};var Ln=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};Ln.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=Oe(i);if(!(r==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var c=un(this);nt(i,Math.max(0,i.height-c)),e&&(Kt(e,function(){ya(e,i,-c),ti(e,r,"widget")}),ot(e,"lineWidgetCleared",e,this,r))}},Ln.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=un(this)-t;!n||(St(this.doc,r)||nt(r,r.height+n),i&&Kt(i,function(){i.curOp.forceUpdate=!0,ya(i,r,n),ot(i,"lineWidgetChanged",i,e,Oe(r))}))},Rt(Ln);function ya(e,t,i){Ct(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Oo(e,i)}function Nc(e,t,i,r){var n=new Ln(e,i,r),c=e.cm;return c&&n.noHScroll&&(c.display.alignWidgets=!0),Sn(e,t,"widget",function(_){var w=_.widgets||(_.widgets=[]);if(n.insertAt==null?w.push(n):w.splice(Math.min(w.length,Math.max(0,n.insertAt)),0,n),n.line=_,c&&!St(e,_)){var M=Ct(_)<e.scrollTop;nt(_,_.height+un(n)),M&&Oo(c,n.height),c.curOp.forceUpdate=!0}return!0}),c&&ot(c,"lineWidgetAdded",c,n,typeof t=="number"?t:Oe(t)),n}var ma=0,si=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ma};si.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ki(e),Ge(this,"clear")){var i=this.find();i&&ot(this,"clear",i.from,i.to)}for(var r=null,n=null,c=0;c<this.lines.length;++c){var _=this.lines[c],w=ne(_.markedSpans,this);e&&!this.collapsed?ti(e,Oe(_),"text"):e&&(w.to!=null&&(n=Oe(_)),w.from!=null&&(r=Oe(_))),_.markedSpans=ie(_.markedSpans,w),w.from==null&&this.collapsed&&!St(this.doc,_)&&e&&nt(_,Ui(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var M=0;M<this.lines.length;++M){var R=Je(this.lines[M]),N=ei(R);N>e.display.maxLineLength&&(e.display.maxLine=R,e.display.maxLineLength=N,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Ht(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&la(e.doc)),e&&ot(e,"markerCleared",e,this,r,n),t&&Ei(e),this.parent&&this.parent.clear()}},si.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,n=0;n<this.lines.length;++n){var c=this.lines[n],_=ne(c.markedSpans,this);if(_.from!=null&&(i=ce(t?c:Oe(c),_.from),e==-1))return i;if(_.to!=null&&(r=ce(t?c:Oe(c),_.to),e==1))return r}return i&&{from:i,to:r}},si.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||Kt(r,function(){var n=t.line,c=Oe(t.line),_=bo(r,c);if(_&&(xs(_),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!St(i.doc,n)&&i.height!=null){var w=i.height;i.height=null;var M=un(i)-w;M&&nt(n,n.height+M)}ot(r,"markerChanged",r,e)})},si.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||he(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},si.prototype.detachLine=function(e){if(this.lines.splice(he(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Rt(si);function $i(e,t,i,r,n){if(r&&r.shared)return jc(e,t,i,r,n);if(e.cm&&!e.cm.curOp)return st(e.cm,$i)(e,t,i,r,n);var c=new si(e,n),_=D(t,i);if(r&&le(r,c,!1),_>0||_==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=E("span",[c.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(Ke(e,t.line,t,i,c)||t.line!=i.line&&Ke(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");vo()}c.addToHistory&&ta(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var w=t.line,M=e.cm,R;if(e.iter(w,i.line+1,function(K){M&&c.collapsed&&!M.options.lineWrapping&&Je(K)==M.display.maxLine&&(R=!0),c.collapsed&&w!=t.line&&nt(K,0),nr(K,new Wi(c,w==t.line?t.ch:null,w==i.line?i.ch:null),e.cm&&e.cm.curOp),++w}),c.collapsed&&e.iter(t.line,i.line+1,function(K){St(e,K)&&nt(K,0)}),c.clearOnEnter&&ke(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(Hn(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++ma,c.atomic=!0),M){if(R&&(M.curOp.updateMaxLine=!0),c.collapsed)Ht(M,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var N=t.line;N<=i.line;N++)ti(M,N,"text");c.atomic&&la(M.doc),ot(M,"markerAdded",M,c)}return c}var xn=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};xn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ot(this,"clear")}},xn.prototype.find=function(e,t){return this.primary.find(e,t)},Rt(xn);function jc(e,t,i,r,n){r=le(r),r.shared=!1;var c=[$i(e,t,i,r,n)],_=c[0],w=r.widgetNode;return oi(e,function(M){w&&(r.widgetNode=w.cloneNode(!0)),c.push($i(M,ge(M,t),ge(M,i),r,n));for(var R=0;R<M.linked.length;++R)if(M.linked[R].isParent)return;_=Ee(c)}),new xn(c,_)}function ba(e){return e.findMarks(ce(e.first,0),e.clipPos(ce(e.lastLine())),function(t){return t.parent})}function Uc(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),c=e.clipPos(n.from),_=e.clipPos(n.to);if(D(c,_)){var w=$i(e,c,_,r.primary,r.primary.type);r.markers.push(w),w.parent=r}}}function zc(e){for(var t=function(r){var n=e[r],c=[n.primary.doc];oi(n.primary.doc,function(M){return c.push(M)});for(var _=0;_<n.markers.length;_++){var w=n.markers[_];he(c,w.doc)==-1&&(w.parent=null,n.markers.splice(_--,1))}},i=0;i<e.length;i++)t(i)}var qc=0,Ft=function(e,t,i,r,n){if(!(this instanceof Ft))return new Ft(e,t,i,r,n);i==null&&(i=0),wn.call(this,[new Cn([new Gt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=ce(i,0);this.sel=ii(c),this.history=new Zn(null),this.id=++qc,this.modeOption=t,this.lineSep=r,this.direction=n=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),jo(this,{from:c,to:c,text:e}),wt(this,ii(c),q)};Ft.prototype=vt(wn.prototype,{constructor:Ft,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=wr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:at(function(e){var t=ce(this.first,0),i=this.first+this.size-1;Zi(this,{from:t,to:ce(i,Se(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&dn(this.cm,0,0),wt(this,ii(t),q)}),replaceRange:function(e,t,i,r){t=ge(this,t),i=i?ge(this,i):t,Vi(this,e,t,i,r)},getRange:function(e,t,i){var r=Ot(this,ge(this,e),ge(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(rr(this,e))return Se(this,e)},getLineNumber:function(e){return Oe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Se(this,e)),Je(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:at(function(e,t,i){oa(this,ge(this,typeof e=="number"?ce(e,t||0):e),null,i)}),setSelection:at(function(e,t,i){oa(this,ge(this,e),ge(this,t||e),i)}),extendSelection:at(function(e,t,i){$n(this,ge(this,e),t&&ge(this,t),i)}),extendSelections:at(function(e,t){na(this,yt(this,e),t)}),extendSelectionsBy:at(function(e,t){var i=He(this.sel.ranges,e);na(this,yt(this,i),t)}),setSelections:at(function(e,t,i){if(!!e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new Pe(ge(this,e[n].anchor),ge(this,e[n].head||e[n].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),wt(this,pr(this.cm,r,t),i)}}),addSelection:at(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Pe(ge(this,e),ge(this,t||e))),wt(this,pr(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var n=Ot(this,t[r].from(),t[r].to());i=i?i.concat(n):n}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=Ot(this,i[r].from(),i[r].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:at(function(e,t,i){for(var r=[],n=this.sel,c=0;c<n.ranges.length;c++){var _=n.ranges[c];r[c]={from:_.from(),to:_.to(),text:this.splitLines(e[c]),origin:i}}for(var w=t&&t!="end"&&Rc(this,r,t),M=r.length-1;M>=0;M--)Zi(this,r[M]);w?sa(this,w):this.cm&&Gi(this.cm)}),undo:at(function(){eo(this,"undo")}),redo:at(function(){eo(this,"redo")}),undoSelection:at(function(){eo(this,"undo",!0)}),redoSelection:at(function(){eo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new Zn(this.history),oi(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Xi(this.history.done),undone:Xi(this.history.undone)}},setHistory:function(e){var t=this.history=new Zn(this.history);t.done=Xi(e.done.slice(0),null,!0),t.undone=Xi(e.undone.slice(0),null,!0)},setGutterMarker:at(function(e,t,i){return Sn(this,e,"gutter",function(r){var n=r.gutterMarkers||(r.gutterMarkers={});return n[t]=i,!i&&$r(n)&&(r.gutterMarkers=null),!0})}),clearGutter:at(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&Sn(t,i,"gutter",function(){return i.gutterMarkers[e]=null,$r(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!rr(this,e)||(t=e,e=Se(this,e),!e))return null}else if(t=Oe(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:at(function(e,t,i){return Sn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[n])r[n]=i;else{if(H(i).test(r[n]))return!1;r[n]+=" "+i}return!0})}),removeLineClass:at(function(e,t,i){return Sn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=r[n];if(c)if(i==null)r[n]=null;else{var _=c.match(H(i));if(!_)return!1;var w=_.index+_[0].length;r[n]=c.slice(0,_.index)+(!_.index||w==c.length?"":" ")+c.slice(w)||null}else return!1;return!0})}),addLineWidget:at(function(e,t,i){return Nc(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return $i(this,ge(this,e),ge(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),$i(this,e,e,i,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],i=Se(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=ge(this,e),t=ge(this,t);var r=[],n=e.line;return this.iter(e.line,t.line+1,function(c){var _=c.markedSpans;if(_)for(var w=0;w<_.length;w++){var M=_[w];!(M.to!=null&&n==e.line&&e.ch>=M.to||M.from==null&&n!=e.line||M.from!=null&&n==t.line&&M.from>=t.ch)&&(!i||i(M.marker))&&r.push(M.marker.parent||M.marker)}++n}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(n){var c=n.text.length+r;if(c>e)return t=e,!0;e-=c,++i}),ge(this,ce(i,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new Ft(wr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new Ft(wr(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Uc(r,ba(this)),r},unlinkDoc:function(e){if(e instanceof Ue&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),zc(ba(this));break}}if(e.history==this.history){var r=[e.id];oi(e,function(n){return r.push(n.id)},!0),e.history=new Zn(null),e.history.done=Xi(this.history.done,r),e.history.undone=Xi(this.history.undone,r)}},iterLinkedDocs:function(e){oi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):mr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:at(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Dc(this.cm))})}),Ft.prototype.eachLine=Ft.prototype.iter;var Sa=0;function Gc(e){var t=this;if(Ca(t),!(je(t,e)||Kr(t.display,e))){Ye(e),L&&(Sa=+new Date);var i=Ci(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var n=r.length,c=Array(n),_=0,w=function(){++_==n&&st(t,function(){i=ge(t.doc,i);var $={from:i,to:i,text:t.doc.splitLines(c.filter(function(re){return re!=null}).join(t.doc.lineSeparator())),origin:"paste"};Zi(t.doc,$),sa(t.doc,ii(ge(t.doc,i),ge(t.doc,ni($))))})()},M=function($,re){if(t.options.allowDropFileTypes&&he(t.options.allowDropFileTypes,$.type)==-1){w();return}var se=new FileReader;se.onerror=function(){return w()},se.onload=function(){var de=se.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(de)){w();return}c[re]=de,w()},se.readAsText($)},R=0;R<r.length;R++)M(r[R],R);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var N=e.dataTransfer.getData("Text");if(N){var K;if(t.state.draggingText&&!t.state.draggingText.copy&&(K=t.listSelections()),Jn(t.doc,ii(i,i)),K)for(var Q=0;Q<K.length;++Q)Vi(t.doc,"",K[Q].anchor,K[Q].head,"drag");t.replaceSelection(N,"around","paste"),t.display.input.focus()}}catch{}}}}function Kc(e,t){if(L&&(!e.state.draggingText||+new Date-Sa<100)){tr(t);return}if(!(je(e,t)||Kr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!S)){var i=O("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),b&&i.parentNode.removeChild(i)}}function Xc(e,t){var i=Ci(e,t);if(!!i){var r=document.createDocumentFragment();Mo(e,i,r),e.display.dragCursor||(e.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),x(e.display.dragCursor,r)}}function Ca(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function wa(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&i.push(n)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var La=!1;function Yc(){La||(Zc(),La=!0)}function Zc(){var e;ke(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,wa(Vc)},100))}),ke(window,"blur",function(){return wa(qi)})}function Vc(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var ai={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},kn=0;kn<10;kn++)ai[kn+48]=ai[kn+96]=String(kn);for(var to=65;to<=90;to++)ai[to]=String.fromCharCode(to);for(var En=1;En<=12;En++)ai[En+111]=ai[En+63235]="F"+En;var Yr={};Yr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Yr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Yr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Yr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Yr.default=o?Yr.macDefault:Yr.pcDefault;function $c(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,n,c,_=0;_<t.length-1;_++){var w=t[_];if(/^(cmd|meta|m)$/i.test(w))c=!0;else if(/^a(lt)?$/i.test(w))i=!0;else if(/^(c|ctrl|control)$/i.test(w))r=!0;else if(/^s(hift)?$/i.test(w))n=!0;else throw new Error("Unrecognized modifier name: "+w)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Jc(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var n=He(i.split(" "),$c),c=0;c<n.length;c++){var _=void 0,w=void 0;c==n.length-1?(w=n.join(" "),_=r):(w=n.slice(0,c+1).join(" "),_="...");var M=t[w];if(!M)t[w]=_;else if(M!=_)throw new Error("Inconsistent bindings for "+w)}delete e[i]}for(var R in t)e[R]=t[R];return e}function Ji(e,t,i,r){t=ro(t);var n=t.call?t.call(e,r):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&i(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Ji(e,t.fallthrough,i,r);for(var c=0;c<t.fallthrough.length;c++){var _=Ji(e,t.fallthrough[c],i,r);if(_)return _}}}function xa(e){var t=typeof e=="string"?e:ai[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function ka(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function Ea(e,t){if(b&&e.keyCode==34&&e.char)return!1;var i=ai[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),ka(i,e,t))}function ro(e){return typeof e=="string"?Yr[e]:e}function Qi(e,t){for(var i=e.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var c=t(i[n]);r.length&&D(c.from,Ee(r).to)<=0;){var _=r.pop();if(D(_.from,c.from)<0){c.from=_.from;break}}r.push(c)}Kt(e,function(){for(var w=r.length-1;w>=0;w--)Vi(e.doc,"",r[w].from,r[w].to,"+delete");Gi(e)})}function Go(e,t,i){var r=Jr(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Ko(e,t,i){var r=Go(e,t.ch,i);return r==null?null:new ce(t.line,r,i<0?"after":"before")}function Xo(e,t,i,r,n){if(e){t.doc.direction=="rtl"&&(n=-n);var c=ut(i,t.doc.direction);if(c){var _=n<0?Ee(c):c[0],w=n<0==(_.level==1),M=w?"after":"before",R;if(_.level>0||t.doc.direction=="rtl"){var N=ji(t,i);R=n<0?i.text.length-1:0;var K=Tr(t,N,R).top;R=Ut(function(Q){return Tr(t,N,Q).top==K},n<0==(_.level==1)?_.from:_.to-1,R),M=="before"&&(R=Go(i,R,1))}else R=n<0?_.to:_.from;return new ce(r,R,M)}}return new ce(r,n<0?i.text.length:0,n<0?"before":"after")}function Qc(e,t,i,r){var n=ut(t,e.doc.direction);if(!n)return Ko(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Ne(n,i.ch,i.sticky),_=n[c];if(e.doc.direction=="ltr"&&_.level%2==0&&(r>0?_.to>i.ch:_.from<i.ch))return Ko(t,i,r);var w=function(pe,ye){return Go(t,pe instanceof ce?pe.ch:pe,ye)},M,R=function(pe){return e.options.lineWrapping?(M=M||ji(e,t),Ds(e,t,M,pe)):{begin:0,end:t.text.length}},N=R(i.sticky=="before"?w(i,-1):i.ch);if(e.doc.direction=="rtl"||_.level==1){var K=_.level==1==r<0,Q=w(i,K?1:-1);if(Q!=null&&(K?Q<=_.to&&Q<=N.end:Q>=_.from&&Q>=N.begin)){var $=K?"before":"after";return new ce(i.line,Q,$)}}var re=function(pe,ye,ve){for(var me=function(We,lt){return lt?new ce(i.line,w(We,1),"before"):new ce(i.line,We,"after")};pe>=0&&pe<n.length;pe+=ye){var Me=n[pe],xe=ye>0==(Me.level!=1),Re=xe?ve.begin:w(ve.end,-1);if(Me.from<=Re&&Re<Me.to||(Re=xe?Me.from:w(Me.to,-1),ve.begin<=Re&&Re<ve.end))return me(Re,xe)}},se=re(c+r,r,N);if(se)return se;var de=r>0?N.end:w(N.begin,-1);return de!=null&&!(r>0&&de==t.text.length)&&(se=re(r>0?0:n.length-1,r,R(de)),se)?se:null}var Mn={selectAll:fa,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(e){return Qi(e,function(t){if(t.empty()){var i=Se(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:ce(t.head.line+1,0)}:{from:t.head,to:ce(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Qi(e,function(t){return{from:ce(t.from().line,0),to:ge(e.doc,ce(t.to().line+1,0))}})},delLineLeft:function(e){return Qi(e,function(t){return{from:ce(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ce(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ce(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Ma(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ta(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return eu(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Z)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Z)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?Ta(e,t.head):r},Z)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var c=i[n].from(),_=Ce(e.getLine(c.line),c.ch,r);t.push(Be(r-_%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kt(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var n=t[r].head,c=Se(e.doc,n.line).text;if(c){if(n.ch==c.length&&(n=new ce(n.line,n.ch-1)),n.ch>0)n=new ce(n.line,n.ch+1),e.replaceRange(c.charAt(n.ch-1)+c.charAt(n.ch-2),ce(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var _=Se(e.doc,n.line-1).text;_&&(n=new ce(n.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+_.charAt(_.length-1),ce(n.line-1,_.length-1),n,"+transpose"))}}i.push(new Pe(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return Kt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Gi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ma(e,t){var i=Se(e.doc,t),r=Je(i);return r!=i&&(t=Oe(r)),Xo(!0,e,r,t,1)}function eu(e,t){var i=Se(e.doc,t),r=Qt(i);return r!=i&&(t=Oe(r)),Xo(!0,e,i,t,-1)}function Ta(e,t){var i=Ma(e,t.line),r=Se(e.doc,i.line),n=ut(r,e.doc.direction);if(!n||n[0].level==0){var c=Math.max(i.ch,r.text.search(/\S/)),_=t.line==i.line&&t.ch<=c&&t.ch;return ce(i.line,_?0:c,i.sticky)}return i}function io(e,t,i){if(typeof t=="string"&&(t=Mn[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=j}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}function tu(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=Ji(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&Ji(t,e.options.extraKeys,i,e)||Ji(t,e.options.keyMap,i,e)}var ru=new we;function Tn(e,t,i,r){var n=e.state.keySeq;if(n){if(xa(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ru.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),Aa(e,n+" "+t,i,r))return!0}return Aa(e,t,i,r)}function Aa(e,t,i,r){var n=tu(e,t,r);return n=="multi"&&(e.state.keySeq=t),n=="handled"&&ot(e,"keyHandled",e,t,i),(n=="handled"||n=="multi")&&(Ye(i),To(e)),!!n}function Ra(e,t){var i=Ea(t,!0);return i?t.shiftKey&&!e.state.keySeq?Tn(e,"Shift-"+i,t,function(r){return io(e,r,!0)})||Tn(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return io(e,r)}):Tn(e,i,t,function(r){return io(e,r)}):!1}function iu(e,t,i){return Tn(e,"'"+i+"'",t,function(r){return io(e,r,!0)})}var Yo=null;function Da(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=F(),!je(t,e))){L&&p<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=Ra(t,e);b&&(Yo=r?i:null,!r&&i==88&&!Fr&&(o?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),z&&!o&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&nu(t)}}function nu(e){var t=e.display.lineDiv;W(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(I(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i))}ke(document,"keyup",i),ke(document,"mouseover",i)}function Oa(e){e.keyCode==16&&(this.doc.sel.shift=!1),je(this,e)}function Ba(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Kr(t.display,e)||je(t,e)||e.ctrlKey&&!e.altKey||o&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(b&&i==Yo){Yo=null,Ye(e);return}if(!(b&&(!e.which||e.which<10)&&Ra(t,e))){var n=String.fromCharCode(r??i);n!="\b"&&(iu(t,e,n)||t.display.input.onKeyPress(e))}}}var ou=400,Zo=function(e,t,i){this.time=e,this.pos=t,this.button=i};Zo.prototype.compare=function(e,t,i){return this.time+ou>e&&D(t,this.pos)==0&&i==this.button};var An,Rn;function su(e,t){var i=+new Date;return Rn&&Rn.compare(i,e,t)?(An=Rn=null,"triple"):An&&An.compare(i,e,t)?(Rn=new Zo(i,e,t),An=null,"double"):(An=new Zo(i,e,t),Rn=null,"single")}function Pa(e){var t=this,i=t.display;if(!(je(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Kr(i,e)){g||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!Vo(t,e)){var r=Ci(t,e),n=Pr(e),c=r?su(r,n):"single";window.focus(),n==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&au(t,n,r,c,e))&&(n==1?r?cu(t,r,c,e):Vt(e)==i.scroller&&Ye(e):n==2?(r&&$n(t.doc,r),setTimeout(function(){return i.input.focus()},20)):n==3&&(T?t.display.input.onContextMenu(e):Ao(t)))}}}function au(e,t,i,r,n){var c="Click";return r=="double"?c="Double"+c:r=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,Tn(e,ka(c,n),n,function(_){if(typeof _=="string"&&(_=Mn[_]),!_)return!1;var w=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),w=_(e,i)!=j}finally{e.state.suppressEdits=!1}return w})}function lu(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(n.unit==null){var c=a?i.shiftKey&&i.metaKey:i.altKey;n.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(n.extend==null||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),n.addNew==null&&(n.addNew=o?i.metaKey:i.ctrlKey),n.moveOnDrag==null&&(n.moveOnDrag=!(o?i.altKey:i.ctrlKey)),n}function cu(e,t,i,r){L?setTimeout(fe(Is,e),0):e.curOp.focus=F();var n=lu(e,i,r),c=e.doc.sel,_;e.options.dragDrop&&gr&&!e.isReadOnly()&&i=="single"&&(_=c.contains(t))>-1&&(D((_=c.ranges[_]).from(),t)<0||t.xRel>0)&&(D(_.to(),t)>0||t.xRel<0)?uu(e,r,t,n):fu(e,r,t,n)}function uu(e,t,i,r){var n=e.display,c=!1,_=st(e,function(R){g&&(n.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ao(e)),tt(n.wrapper.ownerDocument,"mouseup",_),tt(n.wrapper.ownerDocument,"mousemove",w),tt(n.scroller,"dragstart",M),tt(n.scroller,"drop",_),c||(Ye(R),r.addNew||$n(e.doc,i,null,null,r.extend),g&&!S||L&&p==9?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),w=function(R){c=c||Math.abs(t.clientX-R.clientX)+Math.abs(t.clientY-R.clientY)>=10},M=function(){return c=!0};g&&(n.scroller.draggable=!0),e.state.draggingText=_,_.copy=!r.moveOnDrag,ke(n.wrapper.ownerDocument,"mouseup",_),ke(n.wrapper.ownerDocument,"mousemove",w),ke(n.scroller,"dragstart",M),ke(n.scroller,"drop",_),e.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}function Ia(e,t,i){if(i=="char")return new Pe(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Pe(ce(t.line,0),ge(e.doc,ce(t.line+1,0)));var r=i(e,t);return new Pe(r.from,r.to)}function fu(e,t,i,r){L&&Ao(e);var n=e.display,c=e.doc;Ye(t);var _,w,M=c.sel,R=M.ranges;if(r.addNew&&!r.extend?(w=c.sel.contains(i),w>-1?_=R[w]:_=new Pe(i,i)):(_=c.sel.primary(),w=c.sel.primIndex),r.unit=="rectangle")r.addNew||(_=new Pe(i,i)),i=Ci(e,t,!0,!0),w=-1;else{var N=Ia(e,i,r.unit);r.extend?_=zo(_,N.anchor,N.head,r.extend):_=N}r.addNew?w==-1?(w=R.length,wt(c,pr(e,R.concat([_]),w),{scroll:!1,origin:"*mouse"})):R.length>1&&R[w].empty()&&r.unit=="char"&&!r.extend?(wt(c,pr(e,R.slice(0,w).concat(R.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),M=c.sel):qo(c,w,_,ae):(w=0,wt(c,new er([_],0),ae),M=c.sel);var K=i;function Q(ve){if(D(K,ve)!=0)if(K=ve,r.unit=="rectangle"){for(var me=[],Me=e.options.tabSize,xe=Ce(Se(c,i.line).text,i.ch,Me),Re=Ce(Se(c,ve.line).text,ve.ch,Me),We=Math.min(xe,Re),lt=Math.max(xe,Re),qe=Math.min(i.line,ve.line),Xt=Math.min(e.lastLine(),Math.max(i.line,ve.line));qe<=Xt;qe++){var Wt=Se(c,qe).text,Qe=_e(Wt,We,Me);We==lt?me.push(new Pe(ce(qe,Qe),ce(qe,Qe))):Wt.length>Qe&&me.push(new Pe(ce(qe,Qe),ce(qe,_e(Wt,lt,Me))))}me.length||me.push(new Pe(i,i)),wt(c,pr(e,M.ranges.slice(0,w).concat(me),w),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ve)}else{var Nt=_,pt=Ia(e,ve,r.unit),it=Nt.anchor,et;D(pt.anchor,it)>0?(et=pt.head,it=Ae(Nt.from(),pt.anchor)):(et=pt.anchor,it=ue(Nt.to(),pt.head));var Xe=M.ranges.slice(0);Xe[w]=hu(e,new Pe(ge(c,it),et)),wt(c,pr(e,Xe,w),ae)}}var $=n.wrapper.getBoundingClientRect(),re=0;function se(ve){var me=++re,Me=Ci(e,ve,!0,r.unit=="rectangle");if(!!Me)if(D(Me,K)!=0){e.curOp.focus=F(),Q(Me);var xe=Gn(n,c);(Me.line>=xe.to||Me.line<xe.from)&&setTimeout(st(e,function(){re==me&&se(ve)}),150)}else{var Re=ve.clientY<$.top?-20:ve.clientY>$.bottom?20:0;Re&&setTimeout(st(e,function(){re==me&&(n.scroller.scrollTop+=Re,se(ve))}),50)}}function de(ve){e.state.selectingText=!1,re=1/0,ve&&(Ye(ve),n.input.focus()),tt(n.wrapper.ownerDocument,"mousemove",pe),tt(n.wrapper.ownerDocument,"mouseup",ye),c.history.lastSelOrigin=null}var pe=st(e,function(ve){ve.buttons===0||!Pr(ve)?de(ve):se(ve)}),ye=st(e,de);e.state.selectingText=ye,ke(n.wrapper.ownerDocument,"mousemove",pe),ke(n.wrapper.ownerDocument,"mouseup",ye)}function hu(e,t){var i=t.anchor,r=t.head,n=Se(e.doc,i.line);if(D(i,r)==0&&i.sticky==r.sticky)return t;var c=ut(n);if(!c)return t;var _=Ne(c,i.ch,i.sticky),w=c[_];if(w.from!=i.ch&&w.to!=i.ch)return t;var M=_+(w.from==i.ch==(w.level!=1)?0:1);if(M==0||M==c.length)return t;var R;if(r.line!=i.line)R=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var N=Ne(c,r.ch,r.sticky),K=N-_||(r.ch-i.ch)*(w.level==1?-1:1);N==M-1||N==M?R=K<0:R=K>0}var Q=c[M+(R?-1:0)],$=R==(Q.level==1),re=$?Q.from:Q.to,se=$?"after":"before";return i.ch==re&&i.sticky==se?t:new Pe(new ce(i.line,re,se),r)}function Ha(e,t,i,r){var n,c;if(t.touches)n=t.touches[0].clientX,c=t.touches[0].clientY;else try{n=t.clientX,c=t.clientY}catch{return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ye(t);var _=e.display,w=_.lineDiv.getBoundingClientRect();if(c>w.bottom||!Ge(e,i))return ft(t);c-=w.top-_.viewOffset;for(var M=0;M<e.display.gutterSpecs.length;++M){var R=_.gutters.childNodes[M];if(R&&R.getBoundingClientRect().right>=n){var N=Bt(e.doc,c),K=e.display.gutterSpecs[M];return Te(e,i,e,N,K.className,t),ft(t)}}}function Vo(e,t){return Ha(e,t,"gutterClick",!0)}function Fa(e,t){Kr(e.display,t)||du(e,t)||je(e,t,"contextmenu")||T||e.display.input.onContextMenu(t)}function du(e,t){return Ge(e,"gutterContextMenu")?Ha(e,t,"gutterContextMenu",!1):!1}function Wa(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fn(e)}var en={toString:function(){return"CodeMirror.Init"}},Na={},no={};function pu(e){var t=e.optionHandlers;function i(r,n,c,_){e.defaults[r]=n,c&&(t[r]=_?function(w,M,R){R!=en&&c(w,M,R)}:c)}e.defineOption=i,e.Init=en,i("value","",function(r,n){return r.setValue(n)},!0),i("mode",null,function(r,n){r.doc.modeOption=n,No(r)},!0),i("indentUnit",2,No,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){mn(r),fn(r),Ht(r)},!0),i("lineSeparator",null,function(r,n){if(r.doc.lineSep=n,!!n){var c=[],_=r.doc.first;r.doc.iter(function(M){for(var R=0;;){var N=M.text.indexOf(n,R);if(N==-1)break;R=N+n.length,c.push(ce(_,N))}_++});for(var w=c.length-1;w>=0;w--)Vi(r.doc,n,c[w],ce(c[w].line,c[w].ch+n.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,n,c){r.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),c!=en&&r.refresh()}),i("specialCharPlaceholder",zl,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",s?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,n){return r.getInputField().spellcheck=n},!0),i("autocorrect",!1,function(r,n){return r.getInputField().autocorrect=n},!0),i("autocapitalize",!1,function(r,n){return r.getInputField().autocapitalize=n},!0),i("rtlMoveVisually",!d),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){Wa(r),yn(r)},!0),i("keyMap","default",function(r,n,c){var _=ro(n),w=c!=en&&ro(c);w&&w.detach&&w.detach(r,_),_.attach&&_.attach(r,w||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,_u,!0),i("gutters",[],function(r,n){r.display.gutterSpecs=Fo(n,r.options.lineNumbers),yn(r)},!0),i("fixedGutter",!0,function(r,n){r.display.gutters.style.left=n?ko(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Ki(r)},!0),i("scrollbarStyle","native",function(r){Us(r),Ki(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,n){r.display.gutterSpecs=Fo(r.options.gutters,n),yn(r)},!0),i("firstLineNumber",1,yn,!0),i("lineNumberFormatter",function(r){return r},yn,!0),i("showCursorWhenSelecting",!1,hn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,n){n=="nocursor"&&(qi(r),r.display.input.blur()),r.display.input.readOnlyChanged(n)}),i("screenReaderLabel",null,function(r,n){n=n===""?null:n,r.display.input.screenReaderLabelChanged(n)}),i("disableInput",!1,function(r,n){n||r.display.input.reset()},!0),i("dragDrop",!0,vu),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,hn,!0),i("singleCursorHeightPerLine",!0,hn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,mn,!0),i("addModeClass",!1,mn,!0),i("pollInterval",100),i("undoDepth",200,function(r,n){return r.doc.history.undoDepth=n}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,mn,!0),i("moveInputWithCursor",!0,function(r,n){n||r.display.input.resetPosition()}),i("tabindex",null,function(r,n){return r.display.input.getField().tabIndex=n||""}),i("autofocus",null),i("direction","ltr",function(r,n){return r.doc.setDirection(n)},!0),i("phrases",null)}function vu(e,t,i){var r=i&&i!=en;if(!t!=!r){var n=e.display.dragFunctions,c=t?ke:tt;c(e.display.scroller,"dragstart",n.start),c(e.display.scroller,"dragenter",n.enter),c(e.display.scroller,"dragover",n.over),c(e.display.scroller,"dragleave",n.leave),c(e.display.scroller,"drop",n.drop)}}function _u(e){e.options.lineWrapping?(W(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(I(e.display.wrapper,"CodeMirror-wrap"),mi(e)),Eo(e),Ht(e),fn(e),setTimeout(function(){return Ki(e)},100)}function Ue(e,t){var i=this;if(!(this instanceof Ue))return new Ue(e,t);this.options=t=t?le(t):{},le(Na,t,!1);var r=t.value;typeof r=="string"?r=new Ft(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var n=new Ue.inputStyles[t.inputStyle](this),c=this.display=new Tc(e,r,n,t);c.wrapper.CodeMirror=this,Wa(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Us(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new we,keySeq:null,specialChars:null},t.autofocus&&!s&&c.input.focus(),L&&p<11&&setTimeout(function(){return i.display.input.reset(!0)},20),gu(this),Yc(),ki(this),this.curOp.forceUpdate=!0,Js(this,r),t.autofocus&&!s||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&Ro(i)},20):qi(this);for(var _ in no)no.hasOwnProperty(_)&&no[_](this,t[_],en);Gs(this),t.finishInit&&t.finishInit(this);for(var w=0;w<$o.length;++w)$o[w](this);Ei(this),g&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}Ue.defaults=Na,Ue.optionHandlers=no;function gu(e){var t=e.display;ke(t.scroller,"mousedown",st(e,Pa)),L&&p<11?ke(t.scroller,"dblclick",st(e,function(M){if(!je(e,M)){var R=Ci(e,M);if(!(!R||Vo(e,M)||Kr(e.display,M))){Ye(M);var N=e.findWordAt(R);$n(e.doc,N.anchor,N.head)}}})):ke(t.scroller,"dblclick",function(M){return je(e,M)||Ye(M)}),ke(t.scroller,"contextmenu",function(M){return Fa(e,M)}),ke(t.input.getField(),"contextmenu",function(M){t.scroller.contains(M.target)||Fa(e,M)});var i,r={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function c(M){if(M.touches.length!=1)return!1;var R=M.touches[0];return R.radiusX<=1&&R.radiusY<=1}function _(M,R){if(R.left==null)return!0;var N=R.left-M.left,K=R.top-M.top;return N*N+K*K>20*20}ke(t.scroller,"touchstart",function(M){if(!je(e,M)&&!c(M)&&!Vo(e,M)){t.input.ensurePolled(),clearTimeout(i);var R=+new Date;t.activeTouch={start:R,moved:!1,prev:R-r.end<=300?r:null},M.touches.length==1&&(t.activeTouch.left=M.touches[0].pageX,t.activeTouch.top=M.touches[0].pageY)}}),ke(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ke(t.scroller,"touchend",function(M){var R=t.activeTouch;if(R&&!Kr(t,M)&&R.left!=null&&!R.moved&&new Date-R.start<300){var N=e.coordsChar(t.activeTouch,"page"),K;!R.prev||_(R,R.prev)?K=new Pe(N,N):!R.prev.prev||_(R,R.prev.prev)?K=e.findWordAt(N):K=new Pe(ce(N.line,0),ge(e.doc,ce(N.line+1,0))),e.setSelection(K.anchor,K.head),e.focus(),Ye(M)}n()}),ke(t.scroller,"touchcancel",n),ke(t.scroller,"scroll",function(){t.scroller.clientHeight&&(pn(e,t.scroller.scrollTop),Li(e,t.scroller.scrollLeft,!0),Te(e,"scroll",e))}),ke(t.scroller,"mousewheel",function(M){return Ys(e,M)}),ke(t.scroller,"DOMMouseScroll",function(M){return Ys(e,M)}),ke(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(M){je(e,M)||tr(M)},over:function(M){je(e,M)||(Xc(e,M),tr(M))},start:function(M){return Kc(e,M)},drop:st(e,Gc),leave:function(M){je(e,M)||Ca(e)}};var w=t.input.getField();ke(w,"keyup",function(M){return Oa.call(e,M)}),ke(w,"keydown",st(e,Da)),ke(w,"keypress",st(e,Ba)),ke(w,"focus",function(M){return Ro(e,M)}),ke(w,"blur",function(M){return qi(e,M)})}var $o=[];Ue.defineInitHook=function(e){return $o.push(e)};function Dn(e,t,i,r){var n=e.doc,c;i==null&&(i="add"),i=="smart"&&(n.mode.indent?c=Nr(e,t).state:i="prev");var _=e.options.tabSize,w=Se(n,t),M=Ce(w.text,null,_);w.stateAfter&&(w.stateAfter=null);var R=w.text.match(/^\s*/)[0],N;if(!r&&!/\S/.test(w.text))N=0,i="not";else if(i=="smart"&&(N=n.mode.indent(c,w.text.slice(R.length),w.text),N==j||N>150)){if(!r)return;i="prev"}i=="prev"?t>n.first?N=Ce(Se(n,t-1).text,null,_):N=0:i=="add"?N=M+e.options.indentUnit:i=="subtract"?N=M-e.options.indentUnit:typeof i=="number"&&(N=M+i),N=Math.max(0,N);var K="",Q=0;if(e.options.indentWithTabs)for(var $=Math.floor(N/_);$;--$)Q+=_,K+="	";if(Q<N&&(K+=Be(N-Q)),K!=R)return Vi(n,K,ce(t,0),ce(t,R.length),"+input"),w.stateAfter=null,!0;for(var re=0;re<n.sel.ranges.length;re++){var se=n.sel.ranges[re];if(se.head.line==t&&se.head.ch<R.length){var de=ce(t,R.length);qo(n,re,new Pe(de,de));break}}}var vr=null;function oo(e){vr=e}function Jo(e,t,i,r,n){var c=e.doc;e.display.shift=!1,r||(r=c.sel);var _=+new Date-200,w=n=="paste"||e.state.pasteIncoming>_,M=mr(t),R=null;if(w&&r.ranges.length>1)if(vr&&vr.text.join(`
`)==t){if(r.ranges.length%vr.text.length==0){R=[];for(var N=0;N<vr.text.length;N++)R.push(c.splitLines(vr.text[N]))}}else M.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(R=He(M,function(pe){return[pe]}));for(var K=e.curOp.updateInput,Q=r.ranges.length-1;Q>=0;Q--){var $=r.ranges[Q],re=$.from(),se=$.to();$.empty()&&(i&&i>0?re=ce(re.line,re.ch-i):e.state.overwrite&&!w?se=ce(se.line,Math.min(Se(c,se.line).text.length,se.ch+Ee(M).length)):w&&vr&&vr.lineWise&&vr.text.join(`
`)==M.join(`
`)&&(re=se=ce(re.line,0)));var de={from:re,to:se,text:R?R[Q%R.length]:M,origin:n||(w?"paste":e.state.cutIncoming>_?"cut":"+input")};Zi(e.doc,de),ot(e,"inputRead",e,de)}t&&!w&&Ua(e,t),Gi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=K),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function ja(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Kt(t,function(){return Jo(t,i,0,null,"paste")}),!0}function Ua(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var n=i.ranges[r];if(!(n.head.ch>100||r&&i.ranges[r-1].head.line==n.head.line)){var c=e.getModeAt(n.head),_=!1;if(c.electricChars){for(var w=0;w<c.electricChars.length;w++)if(t.indexOf(c.electricChars.charAt(w))>-1){_=Dn(e,n.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(Se(e.doc,n.head.line).text.slice(0,n.head.ch))&&(_=Dn(e,n.head.line,"smart"));_&&ot(e,"electricInput",e,n.head.line)}}}function za(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,c={anchor:ce(n,0),head:ce(n+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function qa(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ga(){var e=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=O("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?e.style.width="1000px":e.setAttribute("wrap","off"),v&&(e.style.border="1px solid black"),qa(e),t}function yu(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,n){var c=this.options,_=c[r];c[r]==n&&r!="mode"||(c[r]=n,t.hasOwnProperty(r)&&st(this,t[r])(this,n,_),Te(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,n){this.state.keyMaps[n?"push":"unshift"](ro(r))},removeKeyMap:function(r){for(var n=this.state.keyMaps,c=0;c<n.length;++c)if(n[c]==r||n[c].name==r)return n.splice(c,1),!0},addOverlay:Et(function(r,n){var c=r.token?r:e.getMode(this.options,r);if(c.startState)throw new Error("Overlays may not be stateful.");be(this.state.overlays,{mode:c,modeSpec:r,opaque:n&&n.opaque,priority:n&&n.priority||0},function(_){return _.priority}),this.state.modeGen++,Ht(this)}),removeOverlay:Et(function(r){for(var n=this.state.overlays,c=0;c<n.length;++c){var _=n[c].modeSpec;if(_==r||typeof r=="string"&&_.name==r){n.splice(c,1),this.state.modeGen++,Ht(this);return}}}),indentLine:Et(function(r,n,c){typeof n!="string"&&typeof n!="number"&&(n==null?n=this.options.smartIndent?"smart":"prev":n=n?"add":"subtract"),rr(this.doc,r)&&Dn(this,r,n,c)}),indentSelection:Et(function(r){for(var n=this.doc.sel.ranges,c=-1,_=0;_<n.length;_++){var w=n[_];if(w.empty())w.head.line>c&&(Dn(this,w.head.line,r,!0),c=w.head.line,_==this.doc.sel.primIndex&&Gi(this));else{var M=w.from(),R=w.to(),N=Math.max(c,M.line);c=Math.min(this.lastLine(),R.line-(R.ch?0:1))+1;for(var K=N;K<c;++K)Dn(this,K,r);var Q=this.doc.sel.ranges;M.ch==0&&n.length==Q.length&&Q[_].from().ch>0&&qo(this.doc,_,new Pe(M,Q[_].to()),q)}}}),getTokenAt:function(r,n){return Ii(this,r,n)},getLineTokens:function(r,n){return Ii(this,ce(r),n,!0)},getTokenTypeAt:function(r){r=ge(this.doc,r);var n=Oi(this,Se(this.doc,r.line)),c=0,_=(n.length-1)/2,w=r.ch,M;if(w==0)M=n[2];else for(;;){var R=c+_>>1;if((R?n[R*2-1]:0)>=w)_=R;else if(n[R*2+1]<w)c=R+1;else{M=n[R*2+2];break}}var N=M?M.indexOf("overlay "):-1;return N<0?M:N==0?null:M.slice(0,N-1)},getModeAt:function(r){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(r).state).mode:n},getHelper:function(r,n){return this.getHelpers(r,n)[0]},getHelpers:function(r,n){var c=[];if(!i.hasOwnProperty(n))return c;var _=i[n],w=this.getModeAt(r);if(typeof w[n]=="string")_[w[n]]&&c.push(_[w[n]]);else if(w[n])for(var M=0;M<w[n].length;M++){var R=_[w[n][M]];R&&c.push(R)}else w.helperType&&_[w.helperType]?c.push(_[w.helperType]):_[w.name]&&c.push(_[w.name]);for(var N=0;N<_._global.length;N++){var K=_._global[N];K.pred(w,this)&&he(c,K.val)==-1&&c.push(K.val)}return c},getStateAfter:function(r,n){var c=this.doc;return r=De(c,r??c.first+c.size-1),Nr(this,r+1,n).state},cursorCoords:function(r,n){var c,_=this.doc.sel.primary();return r==null?c=_.head:typeof r=="object"?c=ge(this.doc,r):c=r?_.from():_.to(),dr(this,c,n||"page")},charCoords:function(r,n){return jn(this,ge(this.doc,r),n||"page")},coordsChar:function(r,n){return r=Ts(this,r,n||"page"),wo(this,r.left,r.top)},lineAtHeight:function(r,n){return r=Ts(this,{top:r,left:0},n||"page").top,Bt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,n,c){var _=!1,w;if(typeof r=="number"){var M=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>M&&(r=M,_=!0),w=Se(this.doc,r)}else w=r;return Nn(this,w,{top:0,left:0},n||"page",c||_).top+(_?this.doc.height-Ct(w):0)},defaultTextHeight:function(){return Ui(this.display)},defaultCharWidth:function(){return zi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,n,c,_,w){var M=this.display;r=dr(this,ge(this.doc,r));var R=r.bottom,N=r.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),M.sizer.appendChild(n),_=="over")R=r.top;else if(_=="above"||_=="near"){var K=Math.max(M.wrapper.clientHeight,this.doc.height),Q=Math.max(M.sizer.clientWidth,M.lineSpace.clientWidth);(_=="above"||r.bottom+n.offsetHeight>K)&&r.top>n.offsetHeight?R=r.top-n.offsetHeight:r.bottom+n.offsetHeight<=K&&(R=r.bottom),N+n.offsetWidth>Q&&(N=Q-n.offsetWidth)}n.style.top=R+"px",n.style.left=n.style.right="",w=="right"?(N=M.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):(w=="left"?N=0:w=="middle"&&(N=(M.sizer.clientWidth-n.offsetWidth)/2),n.style.left=N+"px"),c&&vc(this,{left:N,top:R,right:N+n.offsetWidth,bottom:R+n.offsetHeight})},triggerOnKeyDown:Et(Da),triggerOnKeyPress:Et(Ba),triggerOnKeyUp:Oa,triggerOnMouseDown:Et(Pa),execCommand:function(r){if(Mn.hasOwnProperty(r))return Mn[r].call(null,this)},triggerElectric:Et(function(r){Ua(this,r)}),findPosH:function(r,n,c,_){var w=1;n<0&&(w=-1,n=-n);for(var M=ge(this.doc,r),R=0;R<n&&(M=Qo(this.doc,M,w,c,_),!M.hitSide);++R);return M},moveH:Et(function(r,n){var c=this;this.extendSelectionsBy(function(_){return c.display.shift||c.doc.extend||_.empty()?Qo(c.doc,_.head,r,n,c.options.rtlMoveVisually):r<0?_.from():_.to()},Z)}),deleteH:Et(function(r,n){var c=this.doc.sel,_=this.doc;c.somethingSelected()?_.replaceSelection("",null,"+delete"):Qi(this,function(w){var M=Qo(_,w.head,r,n,!1);return r<0?{from:M,to:w.head}:{from:w.head,to:M}})}),findPosV:function(r,n,c,_){var w=1,M=_;n<0&&(w=-1,n=-n);for(var R=ge(this.doc,r),N=0;N<n;++N){var K=dr(this,R,"div");if(M==null?M=K.left:K.left=M,R=Ka(this,K,w,c),R.hitSide)break}return R},moveV:Et(function(r,n){var c=this,_=this.doc,w=[],M=!this.display.shift&&!_.extend&&_.sel.somethingSelected();if(_.extendSelectionsBy(function(N){if(M)return r<0?N.from():N.to();var K=dr(c,N.head,"div");N.goalColumn!=null&&(K.left=N.goalColumn),w.push(K.left);var Q=Ka(c,K,r,n);return n=="page"&&N==_.sel.primary()&&Oo(c,jn(c,Q,"div").top-K.top),Q},Z),w.length)for(var R=0;R<_.sel.ranges.length;R++)_.sel.ranges[R].goalColumn=w[R]}),findWordAt:function(r){var n=this.doc,c=Se(n,r.line).text,_=r.ch,w=r.ch;if(c){var M=this.getHelper(r,"wordChars");(r.sticky=="before"||w==c.length)&&_?--_:++w;for(var R=c.charAt(_),N=_r(R,M)?function(K){return _r(K,M)}:/\s/.test(R)?function(K){return/\s/.test(K)}:function(K){return!/\s/.test(K)&&!_r(K)};_>0&&N(c.charAt(_-1));)--_;for(;w<c.length&&N(c.charAt(w));)++w}return new Pe(ce(r.line,_),ce(r.line,w))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?W(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),Te(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==F()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Et(function(r,n){dn(this,r,n)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Mr(this)-this.display.barHeight,width:r.scrollWidth-Mr(this)-this.display.barWidth,clientHeight:mo(this),clientWidth:bi(this)}},scrollIntoView:Et(function(r,n){r==null?(r={from:this.doc.sel.primary().head,to:null},n==null&&(n=this.options.cursorScrollMargin)):typeof r=="number"?r={from:ce(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=n||0,r.from.line!=null?_c(this,r):Fs(this,r.from,r.to,r.margin)}),setSize:Et(function(r,n){var c=this,_=function(M){return typeof M=="number"||/^\d+$/.test(String(M))?M+"px":M};r!=null&&(this.display.wrapper.style.width=_(r)),n!=null&&(this.display.wrapper.style.height=_(n)),this.options.lineWrapping&&ks(this);var w=this.display.viewFrom;this.doc.iter(w,this.display.viewTo,function(M){if(M.widgets){for(var R=0;R<M.widgets.length;R++)if(M.widgets[R].noHScroll){ti(c,w,"widget");break}}++w}),this.curOp.forceUpdate=!0,Te(this,"refresh",this)}),operation:function(r){return Kt(this,r)},startOperation:function(){return ki(this)},endOperation:function(){return Ei(this)},refresh:Et(function(){var r=this.display.cachedTextHeight;Ht(this),this.curOp.forceUpdate=!0,fn(this),dn(this,this.doc.scrollLeft,this.doc.scrollTop),Io(this.display),(r==null||Math.abs(r-Ui(this.display))>.5||this.options.lineWrapping)&&Eo(this),Te(this,"refresh",this)}),swapDoc:Et(function(r){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),Js(this,r),fn(this),this.display.input.reset(),dn(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,ot(this,"swapDoc",this,n),n}),phrase:function(r){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,r)?n[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Rt(e),e.registerHelper=function(r,n,c){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][n]=c},e.registerGlobalHelper=function(r,n,c,_){e.registerHelper(r,n,_),i[r]._global.push({pred:c,val:_})}}function Qo(e,t,i,r,n){var c=t,_=i,w=Se(e,t.line),M=n&&e.direction=="rtl"?-i:i;function R(){var ye=t.line+M;return ye<e.first||ye>=e.first+e.size?!1:(t=new ce(ye,t.ch,t.sticky),w=Se(e,ye))}function N(ye){var ve;if(r=="codepoint"){var me=w.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(me))ve=null;else{var Me=i>0?me>=55296&&me<56320:me>=56320&&me<57343;ve=new ce(t.line,Math.max(0,Math.min(w.text.length,t.ch+i*(Me?2:1))),-i)}}else n?ve=Qc(e.cm,w,t,i):ve=Ko(w,t,i);if(ve==null)if(!ye&&R())t=Xo(n,e.cm,w,t.line,M);else return!1;else t=ve;return!0}if(r=="char"||r=="codepoint")N();else if(r=="column")N(!0);else if(r=="word"||r=="group")for(var K=null,Q=r=="group",$=e.cm&&e.cm.getHelper(t,"wordChars"),re=!0;!(i<0&&!N(!re));re=!1){var se=w.text.charAt(t.ch)||`
`,de=_r(se,$)?"w":Q&&se==`
`?"n":!Q||/\s/.test(se)?null:"p";if(Q&&!re&&!de&&(de="s"),K&&K!=de){i<0&&(i=1,N(),t.sticky="after");break}if(de&&(K=de),i>0&&!N(!re))break}var pe=Qn(e,t,c,_,!0);return G(c,pe)&&(pe.hitSide=!0),pe}function Ka(e,t,i,r){var n=e.doc,c=t.left,_;if(r=="page"){var w=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),M=Math.max(w-.5*Ui(e.display),3);_=(i>0?t.bottom:t.top)+i*M}else r=="line"&&(_=i>0?t.bottom+3:t.top-3);for(var R;R=wo(e,c,_),!!R.outside;){if(i<0?_<=0:_>=n.height){R.hitSide=!0;break}_+=i*5}return R}var Ie=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new we,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ie.prototype.init=function(e){var t=this,i=this,r=i.cm,n=i.div=e.lineDiv;n.contentEditable=!0,qa(n,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function c(w){for(var M=w.target;M;M=M.parentNode){if(M==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(M.className))break}return!1}ke(n,"paste",function(w){!c(w)||je(r,w)||ja(w,r)||p<=11&&setTimeout(st(r,function(){return t.updateFromDOM()}),20)}),ke(n,"compositionstart",function(w){t.composing={data:w.data,done:!1}}),ke(n,"compositionupdate",function(w){t.composing||(t.composing={data:w.data,done:!1})}),ke(n,"compositionend",function(w){t.composing&&(w.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ke(n,"touchstart",function(){return i.forceCompositionEnd()}),ke(n,"input",function(){t.composing||t.readFromDOMSoon()});function _(w){if(!(!c(w)||je(r,w))){if(r.somethingSelected())oo({lineWise:!1,text:r.getSelections()}),w.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var M=za(r);oo({lineWise:!0,text:M.text}),w.type=="cut"&&r.operation(function(){r.setSelections(M.ranges,0,q),r.replaceSelection("",null,"cut")})}else return;if(w.clipboardData){w.clipboardData.clearData();var R=vr.text.join(`
`);if(w.clipboardData.setData("Text",R),w.clipboardData.getData("Text")==R){w.preventDefault();return}}var N=Ga(),K=N.firstChild;r.display.lineSpace.insertBefore(N,r.display.lineSpace.firstChild),K.value=vr.text.join(`
`);var Q=F();J(K),setTimeout(function(){r.display.lineSpace.removeChild(N),Q.focus(),Q==n&&i.showPrimarySelection()},50)}}ke(n,"copy",_),ke(n,"cut",_)},Ie.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ie.prototype.prepareSelection=function(){var e=Ps(this.cm,!1);return e.focus=F()==this.div,e},Ie.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ie.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ie.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),n=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||n.line<t.display.viewFrom){e.removeAllRanges();return}var c=so(t,e.anchorNode,e.anchorOffset),_=so(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&_&&!_.bad&&D(Ae(c,_),r)==0&&D(ue(c,_),n)==0)){var w=t.display.view,M=r.line>=t.display.viewFrom&&Xa(t,r)||{node:w[0].measure.map[2],offset:0},R=n.line<t.display.viewTo&&Xa(t,n);if(!R){var N=w[w.length-1].measure,K=N.maps?N.maps[N.maps.length-1]:N.map;R={node:K[K.length-1],offset:K[K.length-2]-K[K.length-3]}}if(!M||!R){e.removeAllRanges();return}var Q=e.rangeCount&&e.getRangeAt(0),$;try{$=V(M.node,M.offset,R.offset,R.node)}catch{}$&&(!z&&t.state.focused?(e.collapse(M.node,M.offset),$.collapsed||(e.removeAllRanges(),e.addRange($))):(e.removeAllRanges(),e.addRange($)),Q&&e.anchorNode==null?e.addRange(Q):z&&this.startGracePeriod()),this.rememberSelection()}},Ie.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ie.prototype.showMultipleSelections=function(e){x(this.cm.display.cursorDiv,e.cursors),x(this.cm.display.selectionDiv,e.selection)},Ie.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ie.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return U(this.div,t)},Ie.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||F()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ie.prototype.blur=function(){this.div.blur()},Ie.prototype.getField=function(){return this.div},Ie.prototype.supportsTouch=function(){return!0},Ie.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Kt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Ie.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ie.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(l&&y&&this.cm.display.gutterSpecs.length&&mu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=so(t,e.anchorNode,e.anchorOffset),r=so(t,e.focusNode,e.focusOffset);i&&r&&Kt(t,function(){wt(t.doc,ii(i,r),q),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ie.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),n=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=ce(r.line-1,Se(e.doc,r.line-1).length)),n.ch==Se(e.doc,n.line).text.length&&n.line<e.lastLine()&&(n=ce(n.line+1,0)),r.line<t.viewFrom||n.line>t.viewTo-1)return!1;var c,_,w;r.line==t.viewFrom||(c=wi(e,r.line))==0?(_=Oe(t.view[0].line),w=t.view[0].node):(_=Oe(t.view[c].line),w=t.view[c-1].node.nextSibling);var M=wi(e,n.line),R,N;if(M==t.view.length-1?(R=t.viewTo-1,N=t.lineDiv.lastChild):(R=Oe(t.view[M+1].line)-1,N=t.view[M+1].node.previousSibling),!w)return!1;for(var K=e.doc.splitLines(bu(e,w,N,_,R)),Q=Ot(e.doc,ce(_,0),ce(R,Se(e.doc,R).text.length));K.length>1&&Q.length>1;)if(Ee(K)==Ee(Q))K.pop(),Q.pop(),R--;else if(K[0]==Q[0])K.shift(),Q.shift(),_++;else break;for(var $=0,re=0,se=K[0],de=Q[0],pe=Math.min(se.length,de.length);$<pe&&se.charCodeAt($)==de.charCodeAt($);)++$;for(var ye=Ee(K),ve=Ee(Q),me=Math.min(ye.length-(K.length==1?$:0),ve.length-(Q.length==1?$:0));re<me&&ye.charCodeAt(ye.length-re-1)==ve.charCodeAt(ve.length-re-1);)++re;if(K.length==1&&Q.length==1&&_==r.line)for(;$&&$>r.ch&&ye.charCodeAt(ye.length-re-1)==ve.charCodeAt(ve.length-re-1);)$--,re++;K[K.length-1]=ye.slice(0,ye.length-re).replace(/^\u200b+/,""),K[0]=K[0].slice($).replace(/\u200b+$/,"");var Me=ce(_,$),xe=ce(R,Q.length?Ee(Q).length-re:0);if(K.length>1||K[0]||D(Me,xe))return Vi(e.doc,K,Me,xe,"+input"),!0},Ie.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ie.prototype.reset=function(){this.forceCompositionEnd()},Ie.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ie.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ie.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Kt(this.cm,function(){return Ht(e.cm)})},Ie.prototype.setUneditable=function(e){e.contentEditable="false"},Ie.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||st(this.cm,Jo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ie.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ie.prototype.onContextMenu=function(){},Ie.prototype.resetPosition=function(){},Ie.prototype.needsContentAttribute=!0;function Xa(e,t){var i=bo(e,t.line);if(!i||i.hidden)return null;var r=Se(e.doc,t.line),n=Ss(i,r,t.line),c=ut(r,e.doc.direction),_="left";if(c){var w=Ne(c,t.ch);_=w%2?"right":"left"}var M=Ls(n.map,t.ch,_);return M.offset=M.collapse=="right"?M.end:M.start,M}function mu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tn(e,t){return t&&(e.bad=!0),e}function bu(e,t,i,r,n){var c="",_=!1,w=e.doc.lineSeparator(),M=!1;function R($){return function(re){return re.id==$}}function N(){_&&(c+=w,M&&(c+=w),_=M=!1)}function K($){$&&(N(),c+=$)}function Q($){if($.nodeType==1){var re=$.getAttribute("cm-text");if(re){K(re);return}var se=$.getAttribute("cm-marker"),de;if(se){var pe=e.findMarks(ce(r,0),ce(n+1,0),R(+se));pe.length&&(de=pe[0].find(0))&&K(Ot(e.doc,de.from,de.to).join(w));return}if($.getAttribute("contenteditable")=="false")return;var ye=/^(pre|div|p|li|table|br)$/i.test($.nodeName);if(!/^br$/i.test($.nodeName)&&$.textContent.length==0)return;ye&&N();for(var ve=0;ve<$.childNodes.length;ve++)Q($.childNodes[ve]);/^(pre|p)$/i.test($.nodeName)&&(M=!0),ye&&(_=!0)}else $.nodeType==3&&K($.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Q(t),t!=i;)t=t.nextSibling,M=!1;return c}function so(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return tn(e.clipPos(ce(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var c=e.display.view[n];if(c.node==r)return Su(c,t,i)}}function Su(e,t,i){var r=e.text.firstChild,n=!1;if(!t||!U(r,t))return tn(ce(Oe(e.line),0),!0);if(t==r&&(n=!0,t=r.childNodes[i],i=0,!t)){var c=e.rest?Ee(e.rest):e.line;return tn(ce(Oe(c),c.text.length),n)}var _=t.nodeType==3?t:null,w=t;for(!_&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(_=t.firstChild,i&&(i=_.nodeValue.length));w.parentNode!=r;)w=w.parentNode;var M=e.measure,R=M.maps;function N(de,pe,ye){for(var ve=-1;ve<(R?R.length:0);ve++)for(var me=ve<0?M.map:R[ve],Me=0;Me<me.length;Me+=3){var xe=me[Me+2];if(xe==de||xe==pe){var Re=Oe(ve<0?e.line:e.rest[ve]),We=me[Me]+ye;return(ye<0||xe!=de)&&(We=me[Me+(ye?1:0)]),ce(Re,We)}}}var K=N(_,w,i);if(K)return tn(K,n);for(var Q=w.nextSibling,$=_?_.nodeValue.length-i:0;Q;Q=Q.nextSibling){if(K=N(Q,Q.firstChild,0),K)return tn(ce(K.line,K.ch-$),n);$+=Q.textContent.length}for(var re=w.previousSibling,se=i;re;re=re.previousSibling){if(K=N(re,re.firstChild,-1),K)return tn(ce(K.line,K.ch+se),n);se+=re.textContent.length}}var Ve=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new we,this.hasSelection=!1,this.composing=null};Ve.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var n=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),v&&(n.style.width="0px"),ke(n,"input",function(){L&&p>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),ke(n,"paste",function(_){je(r,_)||ja(_,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function c(_){if(!je(r,_)){if(r.somethingSelected())oo({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var w=za(r);oo({lineWise:!0,text:w.text}),_.type=="cut"?r.setSelections(w.ranges,null,q):(i.prevInput="",n.value=w.text.join(`
`),J(n))}else return;_.type=="cut"&&(r.state.cutIncoming=+new Date)}}ke(n,"cut",c),ke(n,"copy",c),ke(e.scroller,"paste",function(_){if(!(Kr(e,_)||je(r,_))){if(!n.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var w=new Event("paste");w.clipboardData=_.clipboardData,n.dispatchEvent(w)}}),ke(e.lineSpace,"selectstart",function(_){Kr(e,_)||Ye(_)}),ke(n,"compositionstart",function(){var _=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:_,range:r.markText(_,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ke(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ve.prototype.createField=function(e){this.wrapper=Ga(),this.textarea=this.wrapper.firstChild},Ve.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ve.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=Ps(e);if(e.options.moveInputWithCursor){var n=dr(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),_=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+_.top-c.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+_.left-c.left))}return r},Ve.prototype.showSelection=function(e){var t=this.cm,i=t.display;x(i.cursorDiv,e.cursors),x(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ve.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&J(this.textarea),L&&p>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",L&&p>=9&&(this.hasSelection=null))}},Ve.prototype.getField=function(){return this.textarea},Ve.prototype.supportsTouch=function(){return!1},Ve.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!s||F()!=this.textarea))try{this.textarea.focus()}catch{}},Ve.prototype.blur=function(){this.textarea.blur()},Ve.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ve.prototype.receivedFocus=function(){this.slowPoll()},Ve.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ve.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},Ve.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Hr(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(L&&p>=9&&this.hasSelection===n||o&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=n.charCodeAt(0);if(c==8203&&!r&&(r="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var _=0,w=Math.min(r.length,n.length);_<w&&r.charCodeAt(_)==n.charCodeAt(_);)++_;return Kt(t,function(){Jo(t,n.slice(_),r.length-_,null,e.composing?"*compose":null),n.length>1e3||n.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ve.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ve.prototype.onKeyPress=function(){L&&p>=9&&(this.hasSelection=null),this.fastPoll()},Ve.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,n=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=Ci(i,e),_=r.scroller.scrollTop;if(!c||b)return;var w=i.options.resetSelectionOnContextMenu;w&&i.doc.sel.contains(c)==-1&&st(i,wt)(i.doc,ii(c),q);var M=n.style.cssText,R=t.wrapper.style.cssText,N=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",n.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-N.top-5)+"px; left: "+(e.clientX-N.left-5)+`px;
      z-index: 1000; background: `+(L?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var K;g&&(K=window.scrollY),r.input.focus(),g&&window.scrollTo(null,K),r.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=$,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function Q(){if(n.selectionStart!=null){var se=i.somethingSelected(),de="\u200B"+(se?n.value:"");n.value="\u21DA",n.value=de,t.prevInput=se?"":"\u200B",n.selectionStart=1,n.selectionEnd=de.length,r.selForContextMenu=i.doc.sel}}function $(){if(t.contextMenuPending==$&&(t.contextMenuPending=!1,t.wrapper.style.cssText=R,n.style.cssText=M,L&&p<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=_),n.selectionStart!=null)){(!L||L&&p<9)&&Q();var se=0,de=function(){r.selForContextMenu==i.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="\u200B"?st(i,fa)(i):se++<10?r.detectingSelectAll=setTimeout(de,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(de,200)}}if(L&&p>=9&&Q(),T){tr(e);var re=function(){tt(window,"mouseup",re),setTimeout($,20)};ke(window,"mouseup",re)}else setTimeout($,50)},Ve.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ve.prototype.setUneditable=function(){},Ve.prototype.needsContentAttribute=!1;function Cu(e,t){if(t=t?le(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=F();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=w.getValue()}var n;if(e.form&&(ke(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var c=e.form;n=c.submit;try{var _=c.submit=function(){r(),c.submit=n,c.submit(),c.submit=_}}catch{}}t.finishInit=function(M){M.save=r,M.getTextArea=function(){return e},M.toTextArea=function(){M.toTextArea=isNaN,r(),e.parentNode.removeChild(M.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=n))}},e.style.display="none";var w=Ue(function(M){return e.parentNode.insertBefore(M,e.nextSibling)},t);return w}function wu(e){e.off=tt,e.on=ke,e.wheelEventPixels=Ac,e.Doc=Ft,e.splitLines=mr,e.countColumn=Ce,e.findColumn=_e,e.isWordChar=Yt,e.Pass=j,e.signal=Te,e.Line=Gt,e.changeEnd=ni,e.scrollbarModel=js,e.Pos=ce,e.cmpPos=D,e.modes=gt,e.mimeModes=ht,e.resolveMode=ur,e.getMode=fr,e.modeExtensions=xt,e.extendMode=kt,e.copyState=dt,e.startState=Cr,e.innerMode=Sr,e.commands=Mn,e.keyMap=Yr,e.keyName=Ea,e.isModifierKey=xa,e.lookupKey=Ji,e.normalizeKeyMap=Jc,e.StringStream=Fe,e.SharedTextMarker=xn,e.TextMarker=si,e.LineWidget=Ln,e.e_preventDefault=Ye,e.e_stopPropagation=cr,e.e_stop=tr,e.addClass=W,e.contains=U,e.rmClass=I,e.keyNames=ai}pu(Ue),yu(Ue);var Lu="iter insert remove copy getEditor constructor".split(" ");for(var ao in Ft.prototype)Ft.prototype.hasOwnProperty(ao)&&he(Lu,ao)<0&&(Ue.prototype[ao]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ft.prototype[ao]));return Rt(Ft),Ue.inputStyles={textarea:Ve,contenteditable:Ie},Ue.defineMode=function(e){!Ue.defaults.mode&&e!="null"&&(Ue.defaults.mode=e),Wr.apply(this,arguments)},Ue.defineMIME=zt,Ue.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ue.defineMIME("text/plain","null"),Ue.defineExtension=function(e,t){Ue.prototype[e]=t},Ue.defineDocExtension=function(e,t){Ft.prototype[e]=t},Ue.fromTextArea=Cu,wu(Ue),Ue.version="5.65.1",Ue})});var ns=ui((il,nl)=>{(function(ee){typeof il=="object"&&typeof nl=="object"?ee(Ai()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";ee.defineMode("javascript",function(P,z){var te=P.indentUnit,X=z.statementIndent,h=z.jsonld,L=z.json||h,p=z.trackScope!==!1,g=z.typescript,C=z.wordCharacters||/[\w$\xa1-\uffff]/,y=function(){function D($e){return{type:$e,style:"keyword"}}var G=D("keyword a"),oe=D("keyword b"),ue=D("keyword c"),Ae=D("keyword d"),De=D("operator"),ge={type:"atom",style:"atom"};return{if:D("if"),while:G,with:G,else:oe,do:oe,try:oe,finally:oe,return:Ae,break:Ae,continue:Ae,new:D("new"),delete:ue,void:ue,throw:ue,debugger:D("debugger"),var:D("var"),const:D("var"),let:D("var"),function:D("function"),catch:D("catch"),for:D("for"),switch:D("switch"),case:D("case"),default:D("default"),in:De,typeof:De,instanceof:De,true:ge,false:ge,null:ge,undefined:ge,NaN:ge,Infinity:ge,this:D("this"),class:D("class"),super:D("atom"),yield:ue,export:D("export"),import:D("import"),extends:ue,await:ue}}(),b=/[+\-*&%=<>!?|~^@]/,S=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function u(D){for(var G=!1,oe,ue=!1;(oe=D.next())!=null;){if(!G){if(oe=="/"&&!ue)return;oe=="["?ue=!0:ue&&oe=="]"&&(ue=!1)}G=!G&&oe=="\\"}}var f,v;function l(D,G,oe){return f=D,v=oe,G}function s(D,G){var oe=D.next();if(oe=='"'||oe=="'")return G.tokenize=o(oe),G.tokenize(D,G);if(oe=="."&&D.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return l("number","number");if(oe=="."&&D.match(".."))return l("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(oe))return l(oe);if(oe=="="&&D.eat(">"))return l("=>","operator");if(oe=="0"&&D.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return l("number","number");if(/\d/.test(oe))return D.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),l("number","number");if(oe=="/")return D.eat("*")?(G.tokenize=a,a(D,G)):D.eat("/")?(D.skipToEnd(),l("comment","comment")):ce(D,G,1)?(u(D),D.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),l("regexp","string-2")):(D.eat("="),l("operator","operator",D.current()));if(oe=="`")return G.tokenize=d,d(D,G);if(oe=="#"&&D.peek()=="!")return D.skipToEnd(),l("meta","meta");if(oe=="#"&&D.eatWhile(C))return l("variable","property");if(oe=="<"&&D.match("!--")||oe=="-"&&D.match("->")&&!/\S/.test(D.string.slice(0,D.start)))return D.skipToEnd(),l("comment","comment");if(b.test(oe))return(oe!=">"||!G.lexical||G.lexical.type!=">")&&(D.eat("=")?(oe=="!"||oe=="=")&&D.eat("="):/[<>*+\-|&?]/.test(oe)&&(D.eat(oe),oe==">"&&D.eat(oe))),oe=="?"&&D.eat(".")?l("."):l("operator","operator",D.current());if(C.test(oe)){D.eatWhile(C);var ue=D.current();if(G.lastType!="."){if(y.propertyIsEnumerable(ue)){var Ae=y[ue];return l(Ae.type,Ae.style,ue)}if(ue=="async"&&D.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return l("async","keyword",ue)}return l("variable","variable",ue)}}function o(D){return function(G,oe){var ue=!1,Ae;if(h&&G.peek()=="@"&&G.match(S))return oe.tokenize=s,l("jsonld-keyword","meta");for(;(Ae=G.next())!=null&&!(Ae==D&&!ue);)ue=!ue&&Ae=="\\";return ue||(oe.tokenize=s),l("string","string")}}function a(D,G){for(var oe=!1,ue;ue=D.next();){if(ue=="/"&&oe){G.tokenize=s;break}oe=ue=="*"}return l("comment","comment")}function d(D,G){for(var oe=!1,ue;(ue=D.next())!=null;){if(!oe&&(ue=="`"||ue=="$"&&D.eat("{"))){G.tokenize=s;break}oe=!oe&&ue=="\\"}return l("quasi","string-2",D.current())}var m="([{}])";function k(D,G){G.fatArrowAt&&(G.fatArrowAt=null);var oe=D.string.indexOf("=>",D.start);if(!(oe<0)){if(g){var ue=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(D.string.slice(D.start,oe));ue&&(oe=ue.index)}for(var Ae=0,De=!1,ge=oe-1;ge>=0;--ge){var $e=D.string.charAt(ge),yt=m.indexOf($e);if(yt>=0&&yt<3){if(!Ae){++ge;break}if(--Ae==0){$e=="("&&(De=!0);break}}else if(yt>=3&&yt<6)++Ae;else if(C.test($e))De=!0;else if(/["'\/`]/.test($e))for(;;--ge){if(ge==0)return;var xr=D.string.charAt(ge-1);if(xr==$e&&D.string.charAt(ge-2)!="\\"){ge--;break}}else if(De&&!Ae){++ge;break}}De&&!Ae&&(G.fatArrowAt=ge)}}var T={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function H(D,G,oe,ue,Ae,De){this.indented=D,this.column=G,this.type=oe,this.prev=Ae,this.info=De,ue!=null&&(this.align=ue)}function I(D,G){if(!p)return!1;for(var oe=D.localVars;oe;oe=oe.next)if(oe.name==G)return!0;for(var ue=D.context;ue;ue=ue.prev)for(var oe=ue.vars;oe;oe=oe.next)if(oe.name==G)return!0}function A(D,G,oe,ue,Ae){var De=D.cc;for(x.state=D,x.stream=Ae,x.marked=null,x.cc=De,x.style=G,D.lexical.hasOwnProperty("align")||(D.lexical.align=!0);;){var ge=De.length?De.pop():L?Z:q;if(ge(oe,ue)){for(;De.length&&De[De.length-1].lex;)De.pop()();return x.marked?x.marked:oe=="variable"&&I(D,ue)?"variable-2":G}}}var x={state:null,column:null,marked:null,cc:null};function O(){for(var D=arguments.length-1;D>=0;D--)x.cc.push(arguments[D])}function E(){return O.apply(null,arguments),!0}function V(D,G){for(var oe=G;oe;oe=oe.next)if(oe.name==D)return!0;return!1}function U(D){var G=x.state;if(x.marked="def",!!p){if(G.context){if(G.lexical.info=="var"&&G.context&&G.context.block){var oe=F(D,G.context);if(oe!=null){G.context=oe;return}}else if(!V(D,G.localVars)){G.localVars=new J(D,G.localVars);return}}z.globalVars&&!V(D,G.globalVars)&&(G.globalVars=new J(D,G.globalVars))}}function F(D,G){if(G)if(G.block){var oe=F(D,G.prev);return oe?oe==G.prev?G:new Y(oe,G.vars,!0):null}else return V(D,G.vars)?G:new Y(G.prev,new J(D,G.vars),!1);else return null}function W(D){return D=="public"||D=="private"||D=="protected"||D=="abstract"||D=="readonly"}function Y(D,G,oe){this.prev=D,this.vars=G,this.block=oe}function J(D,G){this.name=D,this.next=G}var fe=new J("this",new J("arguments",null));function le(){x.state.context=new Y(x.state.context,x.state.localVars,!1),x.state.localVars=fe}function Ce(){x.state.context=new Y(x.state.context,x.state.localVars,!0),x.state.localVars=null}le.lex=Ce.lex=!0;function we(){x.state.localVars=x.state.context.vars,x.state.context=x.state.context.prev}we.lex=!0;function he(D,G){var oe=function(){var ue=x.state,Ae=ue.indented;if(ue.lexical.type=="stat")Ae=ue.lexical.indented;else for(var De=ue.lexical;De&&De.type==")"&&De.align;De=De.prev)Ae=De.indented;ue.lexical=new H(Ae,x.stream.column(),D,null,ue.lexical,G)};return oe.lex=!0,oe}function B(){var D=x.state;D.lexical.prev&&(D.lexical.type==")"&&(D.indented=D.lexical.indented),D.lexical=D.lexical.prev)}B.lex=!0;function j(D){function G(oe){return oe==D?E():D==";"||oe=="}"||oe==")"||oe=="]"?O():E(G)}return G}function q(D,G){return D=="var"?E(he("vardef",G),gr,j(";"),B):D=="keyword a"?E(he("form"),Le,q,B):D=="keyword b"?E(he("form"),q,B):D=="keyword d"?x.stream.match(/^\s*$/,!1)?E():E(he("stat"),Ee,j(";"),B):D=="debugger"?E(j(";")):D=="{"?E(he("}"),Ce,ut,B,we):D==";"?E():D=="if"?(x.state.lexical.info=="else"&&x.state.cc[x.state.cc.length-1]==B&&x.state.cc.pop()(),E(he("form"),Le,q,B,Hr)):D=="function"?E(gt):D=="for"?E(he("form"),Ce,Fr,q,we,B):D=="class"||g&&G=="interface"?(x.marked="keyword",E(he("form",D=="class"?D:G),fr,B)):D=="variable"?g&&G=="declare"?(x.marked="keyword",E(q)):g&&(G=="module"||G=="enum"||G=="type")&&x.stream.match(/^\s*\w/,!1)?(x.marked="keyword",G=="enum"?E(Bt):G=="type"?E(Wr,j("operator"),Te,j(";")):E(he("form"),rt,j("{"),he("}"),ut,B,B)):g&&G=="namespace"?(x.marked="keyword",E(he("form"),Z,q,B)):g&&G=="abstract"?(x.marked="keyword",E(q)):E(he("stat"),Br):D=="switch"?E(he("form"),Le,j("{"),he("}","switch"),Ce,ut,B,B,we):D=="case"?E(Z,j(":")):D=="default"?E(j(":")):D=="catch"?E(he("form"),le,ae,q,B,we):D=="export"?E(he("stat"),Sr,B):D=="import"?E(he("stat"),Fe,B):D=="async"?E(q):G=="@"?E(Z,q):O(he("stat"),Z,j(";"),B)}function ae(D){if(D=="(")return E(zt,j(")"))}function Z(D,G){return Be(D,G,!1)}function _e(D,G){return Be(D,G,!0)}function Le(D){return D!="("?O():E(he(")"),Ee,j(")"),B)}function Be(D,G,oe){if(x.state.fatArrowAt==x.stream.start){var ue=oe?Yt:At;if(D=="(")return E(le,he(")"),Ne(zt,")"),B,j("=>"),ue,we);if(D=="variable")return O(le,rt,j("=>"),ue,we)}var Ae=oe?be:He;return T.hasOwnProperty(D)?E(Ae):D=="function"?E(gt,Ae):D=="class"||g&&G=="interface"?(x.marked="keyword",E(he("form"),ur,B)):D=="keyword c"||D=="async"?E(oe?_e:Z):D=="("?E(he(")"),Ee,j(")"),B,Ae):D=="operator"||D=="spread"?E(oe?_e:Z):D=="["?E(he("]"),Oe,B,Ae):D=="{"?sr(Ut,"}",null,Ae):D=="quasi"?O(ze,Ae):D=="new"?E(_r(oe)):E()}function Ee(D){return D.match(/[;\}\)\],]/)?O():O(Z)}function He(D,G){return D==","?E(Ee):be(D,G,!1)}function be(D,G,oe){var ue=oe==!1?He:be,Ae=oe==!1?Z:_e;if(D=="=>")return E(le,oe?Yt:At,we);if(D=="operator")return/\+\+|--/.test(G)||g&&G=="!"?E(ue):g&&G=="<"&&x.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(he(">"),Ne(Te,">"),B,ue):G=="?"?E(Z,j(":"),Ae):E(Ae);if(D=="quasi")return O(ze,ue);if(D!=";"){if(D=="(")return sr(_e,")","call",ue);if(D==".")return E(Jr,ue);if(D=="[")return E(he("]"),Ee,j("]"),B,ue);if(g&&G=="as")return x.marked="keyword",E(Te,ue);if(D=="regexp")return x.state.lastType=x.marked="operator",x.stream.backUp(x.stream.pos-x.stream.start-1),E(Ae)}}function ze(D,G){return D!="quasi"?O():G.slice(G.length-2)!="${"?E(ze):E(Ee,vt)}function vt(D){if(D=="}")return x.marked="string-2",x.state.tokenize=d,E(ze)}function At(D){return k(x.stream,x.state),O(D=="{"?q:Z)}function Yt(D){return k(x.stream,x.state),O(D=="{"?q:_e)}function _r(D){return function(G){return G=="."?E(D?hi:$r):G=="variable"&&g?E(tr,D?be:He):O(D?_e:Z)}}function $r(D,G){if(G=="target")return x.marked="keyword",E(He)}function hi(D,G){if(G=="target")return x.marked="keyword",E(be)}function Br(D){return D==":"?E(B,q):O(He,j(";"),B)}function Jr(D){if(D=="variable")return x.marked="property",E()}function Ut(D,G){if(D=="async")return x.marked="property",E(Ut);if(D=="variable"||x.style=="keyword"){if(x.marked="property",G=="get"||G=="set")return E(di);var oe;return g&&x.state.fatArrowAt==x.stream.start&&(oe=x.stream.match(/^\s*:\s*/,!1))&&(x.state.fatArrowAt=x.stream.pos+oe[0].length),E(_t)}else{if(D=="number"||D=="string")return x.marked=h?"property":x.style+" property",E(_t);if(D=="jsonld-keyword")return E(_t);if(g&&W(G))return x.marked="keyword",E(Ut);if(D=="[")return E(Z,Zt,j("]"),_t);if(D=="spread")return E(_e,_t);if(G=="*")return x.marked="keyword",E(Ut);if(D==":")return O(_t)}}function di(D){return D!="variable"?O(_t):(x.marked="property",E(gt))}function _t(D){if(D==":")return E(_e);if(D=="(")return O(gt)}function Ne(D,G,oe){function ue(Ae,De){if(oe?oe.indexOf(Ae)>-1:Ae==","){var ge=x.state.lexical;return ge.info=="call"&&(ge.pos=(ge.pos||0)+1),E(function($e,yt){return $e==G||yt==G?O():O(D)},ue)}return Ae==G||De==G?E():oe&&oe.indexOf(";")>-1?O(D):E(j(G))}return function(Ae,De){return Ae==G||De==G?E():O(D,ue)}}function sr(D,G,oe){for(var ue=3;ue<arguments.length;ue++)x.cc.push(arguments[ue]);return E(he(G,oe),Ne(D,G),B)}function ut(D){return D=="}"?E():O(q,ut)}function Zt(D,G){if(g){if(D==":")return E(Te);if(G=="?")return E(Zt)}}function ke(D,G){if(g&&(D==":"||G=="in"))return E(Te)}function ar(D){if(g&&D==":")return x.stream.match(/^\s*\w+\s+is\b/,!1)?E(Z,tt,Te):E(Te)}function tt(D,G){if(G=="is")return x.marked="keyword",E()}function Te(D,G){if(G=="keyof"||G=="typeof"||G=="infer"||G=="readonly")return x.marked="keyword",E(G=="typeof"?_e:Te);if(D=="variable"||G=="void")return x.marked="type",E(ft);if(G=="|"||G=="&")return E(Te);if(D=="string"||D=="number"||D=="atom")return E(ft);if(D=="[")return E(he("]"),Ne(Te,"]",","),B,ft);if(D=="{")return E(he("}"),lr,B,ft);if(D=="(")return E(Ne(cr,")"),je,ft);if(D=="<")return E(Ne(Te,">"),Te);if(D=="quasi")return O(Rt,ft)}function je(D){if(D=="=>")return E(Te)}function lr(D){return D.match(/[\}\)\]]/)?E():D==","||D==";"?E(lr):O(Ge,lr)}function Ge(D,G){if(D=="variable"||x.style=="keyword")return x.marked="property",E(Ge);if(G=="?"||D=="number"||D=="string")return E(Ge);if(D==":")return E(Te);if(D=="[")return E(j("variable"),ke,j("]"),Ge);if(D=="(")return O(ht,Ge);if(!D.match(/[;\}\)\],]/))return E()}function Rt(D,G){return D!="quasi"?O():G.slice(G.length-2)!="${"?E(Rt):E(Te,Ye)}function Ye(D){if(D=="}")return x.marked="string-2",x.state.tokenize=d,E(Rt)}function cr(D,G){return D=="variable"&&x.stream.match(/^\s*[?:]/,!1)||G=="?"?E(cr):D==":"?E(Te):D=="spread"?E(cr):O(Te)}function ft(D,G){if(G=="<")return E(he(">"),Ne(Te,">"),B,ft);if(G=="|"||D=="."||G=="&")return E(Te);if(D=="[")return E(Te,j("]"),ft);if(G=="extends"||G=="implements")return x.marked="keyword",E(Te);if(G=="?")return E(Te,j(":"),Te)}function tr(D,G){if(G=="<")return E(he(">"),Ne(Te,">"),B,ft)}function Vt(){return O(Te,Pr)}function Pr(D,G){if(G=="=")return E(Te)}function gr(D,G){return G=="enum"?(x.marked="keyword",E(Bt)):O(rt,Zt,Dt,mr)}function rt(D,G){if(g&&W(G))return x.marked="keyword",E(rt);if(D=="variable")return U(G),E();if(D=="spread")return E(rt);if(D=="[")return sr(yr,"]");if(D=="{")return sr(Ir,"}")}function Ir(D,G){return D=="variable"&&!x.stream.match(/^\s*:/,!1)?(U(G),E(Dt)):(D=="variable"&&(x.marked="property"),D=="spread"?E(rt):D=="}"?O():D=="["?E(Z,j("]"),j(":"),Ir):E(j(":"),rt,Dt))}function yr(){return O(rt,Dt)}function Dt(D,G){if(G=="=")return E(_e)}function mr(D){if(D==",")return E(gr)}function Hr(D,G){if(D=="keyword b"&&G=="else")return E(he("form","else"),q,B)}function Fr(D,G){if(G=="await")return E(Fr);if(D=="(")return E(he(")"),br,B)}function br(D){return D=="var"?E(gr,$t):D=="variable"?E($t):O($t)}function $t(D,G){return D==")"?E():D==";"?E($t):G=="in"||G=="of"?(x.marked="keyword",E(Z,$t)):O(Z,$t)}function gt(D,G){if(G=="*")return x.marked="keyword",E(gt);if(D=="variable")return U(G),E(gt);if(D=="(")return E(le,he(")"),Ne(zt,")"),B,ar,q,we);if(g&&G=="<")return E(he(">"),Ne(Vt,">"),B,gt)}function ht(D,G){if(G=="*")return x.marked="keyword",E(ht);if(D=="variable")return U(G),E(ht);if(D=="(")return E(le,he(")"),Ne(zt,")"),B,ar,we);if(g&&G=="<")return E(he(">"),Ne(Vt,">"),B,ht)}function Wr(D,G){if(D=="keyword"||D=="variable")return x.marked="type",E(Wr);if(G=="<")return E(he(">"),Ne(Vt,">"),B)}function zt(D,G){return G=="@"&&E(Z,zt),D=="spread"?E(zt):g&&W(G)?(x.marked="keyword",E(zt)):g&&D=="this"?E(Zt,Dt):O(rt,Zt,Dt)}function ur(D,G){return D=="variable"?fr(D,G):xt(D,G)}function fr(D,G){if(D=="variable")return U(G),E(xt)}function xt(D,G){if(G=="<")return E(he(">"),Ne(Vt,">"),B,xt);if(G=="extends"||G=="implements"||g&&D==",")return G=="implements"&&(x.marked="keyword"),E(g?Te:Z,xt);if(D=="{")return E(he("}"),kt,B)}function kt(D,G){if(D=="async"||D=="variable"&&(G=="static"||G=="get"||G=="set"||g&&W(G))&&x.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return x.marked="keyword",E(kt);if(D=="variable"||x.style=="keyword")return x.marked="property",E(dt,kt);if(D=="number"||D=="string")return E(dt,kt);if(D=="[")return E(Z,Zt,j("]"),dt,kt);if(G=="*")return x.marked="keyword",E(kt);if(g&&D=="(")return O(ht,kt);if(D==";"||D==",")return E(kt);if(D=="}")return E();if(G=="@")return E(Z,kt)}function dt(D,G){if(G=="!"||G=="?")return E(dt);if(D==":")return E(Te,Dt);if(G=="=")return E(_e);var oe=x.state.lexical.prev,ue=oe&&oe.info=="interface";return O(ue?ht:gt)}function Sr(D,G){return G=="*"?(x.marked="keyword",E(nt,j(";"))):G=="default"?(x.marked="keyword",E(Z,j(";"))):D=="{"?E(Ne(Cr,"}"),nt,j(";")):O(q)}function Cr(D,G){if(G=="as")return x.marked="keyword",E(j("variable"));if(D=="variable")return O(_e,Cr)}function Fe(D){return D=="string"?E():D=="("?O(Z):D=="."?O(He):O(Se,Ot,nt)}function Se(D,G){return D=="{"?sr(Se,"}"):(D=="variable"&&U(G),G=="*"&&(x.marked="keyword"),E(wr))}function Ot(D){if(D==",")return E(Se,Ot)}function wr(D,G){if(G=="as")return x.marked="keyword",E(Se)}function nt(D,G){if(G=="from")return x.marked="keyword",E(Z)}function Oe(D){return D=="]"?E():O(Ne(_e,"]"))}function Bt(){return O(he("form"),rt,j("{"),he("}"),Ne(rr,"}"),B,B)}function rr(){return O(rt,Dt)}function Lr(D,G){return D.lastType=="operator"||D.lastType==","||b.test(G.charAt(0))||/[,.]/.test(G.charAt(0))}function ce(D,G,oe){return G.tokenize==s&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(G.lastType)||G.lastType=="quasi"&&/\{\s*$/.test(D.string.slice(0,D.pos-(oe||0)))}return{startState:function(D){var G={tokenize:s,lastType:"sof",cc:[],lexical:new H((D||0)-te,0,"block",!1),localVars:z.localVars,context:z.localVars&&new Y(null,null,!1),indented:D||0};return z.globalVars&&typeof z.globalVars=="object"&&(G.globalVars=z.globalVars),G},token:function(D,G){if(D.sol()&&(G.lexical.hasOwnProperty("align")||(G.lexical.align=!1),G.indented=D.indentation(),k(D,G)),G.tokenize!=a&&D.eatSpace())return null;var oe=G.tokenize(D,G);return f=="comment"?oe:(G.lastType=f=="operator"&&(v=="++"||v=="--")?"incdec":f,A(G,oe,f,v,D))},indent:function(D,G){if(D.tokenize==a||D.tokenize==d)return ee.Pass;if(D.tokenize!=s)return 0;var oe=G&&G.charAt(0),ue=D.lexical,Ae;if(!/^\s*else\b/.test(G))for(var De=D.cc.length-1;De>=0;--De){var ge=D.cc[De];if(ge==B)ue=ue.prev;else if(ge!=Hr&&ge!=we)break}for(;(ue.type=="stat"||ue.type=="form")&&(oe=="}"||(Ae=D.cc[D.cc.length-1])&&(Ae==He||Ae==be)&&!/^[,\.=+\-*:?[\(]/.test(G));)ue=ue.prev;X&&ue.type==")"&&ue.prev.type=="stat"&&(ue=ue.prev);var $e=ue.type,yt=oe==$e;return $e=="vardef"?ue.indented+(D.lastType=="operator"||D.lastType==","?ue.info.length+1:0):$e=="form"&&oe=="{"?ue.indented:$e=="form"?ue.indented+te:$e=="stat"?ue.indented+(Lr(D,G)?X||te:0):ue.info=="switch"&&!yt&&z.doubleIndentSwitch!=!1?ue.indented+(/^(?:case|default)\b/.test(G)?te:2*te):ue.align?ue.column+(yt?0:1):ue.indented+(yt?0:te)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:L?null:"/*",blockCommentEnd:L?null:"*/",blockCommentContinue:L?null:" * ",lineComment:L?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:L?"json":"javascript",jsonldMode:h,jsonMode:L,expressionAllowed:ce,skipExpression:function(D){A(D,"atom","atom","true",new ee.StringStream("",2,null))}}}),ee.registerHelper("wordChars","javascript",/[\w$]/),ee.defineMIME("text/javascript","javascript"),ee.defineMIME("text/ecmascript","javascript"),ee.defineMIME("application/javascript","javascript"),ee.defineMIME("application/x-javascript","javascript"),ee.defineMIME("application/ecmascript","javascript"),ee.defineMIME("application/json",{name:"javascript",json:!0}),ee.defineMIME("application/x-json",{name:"javascript",json:!0}),ee.defineMIME("application/manifest+json",{name:"javascript",json:!0}),ee.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),ee.defineMIME("text/typescript",{name:"javascript",typescript:!0}),ee.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var os=ui((al,ll)=>{(function(ee){typeof al=="object"&&typeof ll=="object"?ee(Ai()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";ee.defineMode("perl",function(){var h={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},L="string-2",p=/[goseximacplud]/;function g(b,S,u,f,v){return S.chain=null,S.style=null,S.tail=null,S.tokenize=function(l,s){for(var o=!1,a,d=0;a=l.next();){if(a===u[d]&&!o)return u[++d]!==void 0?(s.chain=u[d],s.style=f,s.tail=v):v&&l.eatWhile(v),s.tokenize=y,f;o=!o&&a=="\\"}return f},S.tokenize(b,S)}function C(b,S,u){return S.tokenize=function(f,v){return f.string==u&&(v.tokenize=y),f.skipToEnd(),"string"},S.tokenize(b,S)}function y(b,S){if(b.eatSpace())return null;if(S.chain)return g(b,S,S.chain,S.style,S.tail);if(b.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(b.match(/^<<(?=[_a-zA-Z])/))return b.eatWhile(/\w/),C(b,S,b.current().substr(2));if(b.sol()&&b.match(/^\=item(?!\w)/))return C(b,S,"=cut");var u=b.next();if(u=='"'||u=="'"){if(z(b,3)=="<<"+u){var f=b.pos;b.eatWhile(/\w/);var v=b.current().substr(1);if(v&&b.eat(u))return C(b,S,v);b.pos=f}return g(b,S,[u],"string")}if(u=="q"){var l=P(b,-2);if(!(l&&/\w/.test(l))){if(l=P(b,0),l=="x"){if(l=P(b,1),l=="(")return X(b,2),g(b,S,[")"],L,p);if(l=="[")return X(b,2),g(b,S,["]"],L,p);if(l=="{")return X(b,2),g(b,S,["}"],L,p);if(l=="<")return X(b,2),g(b,S,[">"],L,p);if(/[\^'"!~\/]/.test(l))return X(b,1),g(b,S,[b.eat(l)],L,p)}else if(l=="q"){if(l=P(b,1),l=="(")return X(b,2),g(b,S,[")"],"string");if(l=="[")return X(b,2),g(b,S,["]"],"string");if(l=="{")return X(b,2),g(b,S,["}"],"string");if(l=="<")return X(b,2),g(b,S,[">"],"string");if(/[\^'"!~\/]/.test(l))return X(b,1),g(b,S,[b.eat(l)],"string")}else if(l=="w"){if(l=P(b,1),l=="(")return X(b,2),g(b,S,[")"],"bracket");if(l=="[")return X(b,2),g(b,S,["]"],"bracket");if(l=="{")return X(b,2),g(b,S,["}"],"bracket");if(l=="<")return X(b,2),g(b,S,[">"],"bracket");if(/[\^'"!~\/]/.test(l))return X(b,1),g(b,S,[b.eat(l)],"bracket")}else if(l=="r"){if(l=P(b,1),l=="(")return X(b,2),g(b,S,[")"],L,p);if(l=="[")return X(b,2),g(b,S,["]"],L,p);if(l=="{")return X(b,2),g(b,S,["}"],L,p);if(l=="<")return X(b,2),g(b,S,[">"],L,p);if(/[\^'"!~\/]/.test(l))return X(b,1),g(b,S,[b.eat(l)],L,p)}else if(/[\^'"!~\/(\[{<]/.test(l)){if(l=="(")return X(b,1),g(b,S,[")"],"string");if(l=="[")return X(b,1),g(b,S,["]"],"string");if(l=="{")return X(b,1),g(b,S,["}"],"string");if(l=="<")return X(b,1),g(b,S,[">"],"string");if(/[\^'"!~\/]/.test(l))return g(b,S,[b.eat(l)],"string")}}}if(u=="m"){var l=P(b,-2);if(!(l&&/\w/.test(l))&&(l=b.eat(/[(\[{<\^'"!~\/]/),l)){if(/[\^'"!~\/]/.test(l))return g(b,S,[l],L,p);if(l=="(")return g(b,S,[")"],L,p);if(l=="[")return g(b,S,["]"],L,p);if(l=="{")return g(b,S,["}"],L,p);if(l=="<")return g(b,S,[">"],L,p)}}if(u=="s"){var l=/[\/>\]})\w]/.test(P(b,-2));if(!l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?g(b,S,["]","]"],L,p):l=="{"?g(b,S,["}","}"],L,p):l=="<"?g(b,S,[">",">"],L,p):l=="("?g(b,S,[")",")"],L,p):g(b,S,[l,l],L,p)}if(u=="y"){var l=/[\/>\]})\w]/.test(P(b,-2));if(!l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?g(b,S,["]","]"],L,p):l=="{"?g(b,S,["}","}"],L,p):l=="<"?g(b,S,[">",">"],L,p):l=="("?g(b,S,[")",")"],L,p):g(b,S,[l,l],L,p)}if(u=="t"){var l=/[\/>\]})\w]/.test(P(b,-2));if(!l&&(l=b.eat("r"),l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l)))return l=="["?g(b,S,["]","]"],L,p):l=="{"?g(b,S,["}","}"],L,p):l=="<"?g(b,S,[">",">"],L,p):l=="("?g(b,S,[")",")"],L,p):g(b,S,[l,l],L,p)}if(u=="`")return g(b,S,[u],"variable-2");if(u=="/")return/~\s*$/.test(z(b))?g(b,S,[u],L,p):"operator";if(u=="$"){var f=b.pos;if(b.eatWhile(/\d/)||b.eat("{")&&b.eatWhile(/\d/)&&b.eat("}"))return"variable-2";b.pos=f}if(/[$@%]/.test(u)){var f=b.pos;if(b.eat("^")&&b.eat(/[A-Z]/)||!/[@$%&]/.test(P(b,-2))&&b.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var l=b.current();if(h[l])return"variable-2"}b.pos=f}if(/[$@%&]/.test(u)&&(b.eatWhile(/[\w$]/)||b.eat("{")&&b.eatWhile(/[\w$]/)&&b.eat("}"))){var l=b.current();return h[l]?"variable-2":"variable"}if(u=="#"&&P(b,-2)!="$")return b.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(u)){var f=b.pos;if(b.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),h[b.current()])return"operator";b.pos=f}if(u=="_"&&b.pos==1){if(te(b,6)=="_END__")return g(b,S,["\0"],"comment");if(te(b,7)=="_DATA__")return g(b,S,["\0"],"variable-2");if(te(b,7)=="_C__")return g(b,S,["\0"],"string")}if(/\w/.test(u)){var f=b.pos;if(P(b,-2)=="{"&&(P(b,0)=="}"||b.eatWhile(/\w/)&&P(b,0)=="}"))return"string";b.pos=f}if(/[A-Z]/.test(u)){var s=P(b,-2),f=b.pos;if(b.eatWhile(/[A-Z_]/),/[\da-z]/.test(P(b,0)))b.pos=f;else{var l=h[b.current()];return l?(l[1]&&(l=l[0]),s!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(u)){var s=P(b,-2);b.eatWhile(/\w/);var l=h[b.current()];return l?(l[1]&&(l=l[0]),s!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:y,chain:null,style:null,tail:null}},token:function(b,S){return(S.tokenize||y)(b,S)},lineComment:"#"}}),ee.registerHelper("wordChars","perl",/[\w$]/),ee.defineMIME("text/x-perl","perl");function P(h,L){return h.string.charAt(h.pos+(L||0))}function z(h,L){if(L){var p=h.pos-L;return h.string.substr(p>=0?p:0,L)}else return h.string.substr(0,h.pos-1)}function te(h,L){var p=h.string.length,g=p-h.pos+1;return h.string.substr(h.pos,L&&L<p?L:g)}function X(h,L){var p=h.pos+L,g;p<=0?h.pos=0:p>=(g=h.string.length-1)?h.pos=g:h.pos=p}})});var pl=ui(Vr=>{"use strict";var co=Vr&&Vr.__assign||function(){return co=Object.assign||function(ee){for(var P,z=1,te=arguments.length;z<te;z++){P=arguments[z];for(var X in P)Object.prototype.hasOwnProperty.call(P,X)&&(ee[X]=P[X])}return ee},co.apply(this,arguments)},fl=Vr&&Vr.__spreadArray||function(ee,P,z){if(z||arguments.length===2)for(var te=0,X=P.length,h;te<X;te++)(h||!(te in P))&&(h||(h=Array.prototype.slice.call(P,0,te)),h[te]=P[te]);return ee.concat(h||Array.prototype.slice.call(P))};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.Melba=void 0;var hl=function(){var ee=document.createElement("a");return["matches","msMatchesSelector","webkitMatchesSelector"].filter(function(P){return P in ee})}()[0],Bu=function(){var ee=document.createElement("a");try{return ee[hl](":focus-within"),":focus-within, :focus, :hover"}catch{return":focus, :hover"}}(),dl=function(){function ee(P){var z=this,te=P.animation,X=te===void 0?ee.defaults.animation:te,h=P.animationDuration,L=h===void 0?ee.defaults.animationDuration:h,p=P.closeLabel,g=p===void 0?ee.defaults.closeLabel:p,C=P.container,y=C===void 0?null:C,b=P.containerClass,S=b===void 0?ee.defaults.containerClass:b,u=P.containerElement,f=u===void 0?ee.defaults.containerElement:u,v=P.content,l=P.events,s=l===void 0?{}:l,o=P.hide,a=o===void 0?ee.defaults.hide:o,d=P.root,m=d===void 0?ee.defaults.root:d,k=P.toastClass,T=k===void 0?ee.defaults.toastClass:k,H=P.toastElement,I=H===void 0?ee.defaults.toastElement:H,A=P.toastEvents,x=A===void 0?fl([],ee.defaults.toastEvents,!0):A,O=P.toastHideClass,E=O===void 0?ee.defaults.toastHideClass:O,V=P.toastShowClass,U=V===void 0?ee.defaults.toastShowClass:V,F=P.type,W=F===void 0?ee.defaults.toastType:F;if(!v)throw new TypeError("'content' cannot be empty.");if(this.animation=X,this.events=s,this.toastHideClass=E,this.toastShowClass=U,y||(y=this.getContainer({containerClass:S,containerElement:f,root:m})),this.container=y,a===!0&&(a=ee.defaults.hideDelay),a!==!1&&a<100&&(a*=1e3),this.hideDelay=a,L<100&&(L*=1e3),this.build({closeLabel:g,content:v,toastClass:T,toastElement:I,toastEvents:x,type:W}),this.hideDelay!==!1&&this.autohide({animationDuration:L}),this.animation){window.requestAnimationFrame(function(){return z.show()});return}this.show()}return ee.prototype.autohide=function(P){var z=this,te=P.animationDuration;if(!!this.hideDelay)return window.setTimeout(function(){return z.hide()},this.hideDelay+(this.animation?te:0))},ee.prototype.build=function(P){var z=this,te=P.closeLabel,X=P.content,h=P.toastClass,L=P.toastElement,p=P.toastEvents,g=P.type;this.element=document.createElement(L),this.element.setAttribute("title",X),this.element.setAttribute("role","status"),this.element.setAttribute("tabindex","0"),this.element.classList.add(h),this.element.classList.add("toast--".concat(g)),this.element.appendChild(this.buildClose(te)),this.element.appendChild(document.createTextNode(X)),this.element.addEventListener("keydown",function(C){C.key==="Escape"&&(C.preventDefault(),z.hide())}),p.forEach(function(C){z.element.addEventListener(C,function(y){z.trigger(C,y)})}),this.container.appendChild(this.element),this.trigger("build")},ee.prototype.show=function(){this.element.classList.remove(this.toastHideClass),this.element.classList.add(this.toastShowClass),this.trigger("show")},ee.prototype.hide=function(P){var z=this;if(P===void 0&&(P=!1),!(!P&&this.hasFocus)){if(!P&&this.element[hl](Bu)&&this.element.addEventListener("mouseout",function(){z.hasFocus=!1,z.hideDelay>0&&z.hide()}),this.element.classList.remove(this.toastShowClass),this.element.classList.add(this.toastHideClass),this.trigger("hide"),this.animation){var te=function(){return z.remove()},X=function(){L||(z.element.addEventListener("transitionend",function(){return te()}),L=!0)},h=function(){z.show(),z.element.removeEventListener("transitionstart",function(){return X()}),z.element.removeEventListener("transitionend",function(){return te()}),z.element.removeEventListener("mouseover",function(){return h()}),z.element.addEventListener("mouseout",function(){return z.hide()})},L=!1;this.element.addEventListener("mouseover",function(){return h()}),this.element.addEventListener("transitionstart",function(){return X()});return}this.remove()}},ee.prototype.remove=function(){this.element.parentNode===this.container&&(this.container.removeChild(this.element),this.trigger("remove"))},ee.prototype.buildClose=function(P){var z=this,te=document.createElement("button");return te.setAttribute("title",P),te.appendChild(document.createTextNode(P)),te.addEventListener("click",function(){return z.hide()}),te},ee.prototype.getContainer=function(P){var z=P.containerClass,te=P.containerElement,X=P.root,h=X.querySelector("".concat(te,".").concat(z));if(h)return h;var L=document.createElement(te);return L.classList.add(z),X.appendChild(L),L},ee.prototype.on=function(P,z){this.events[P]||(this.events[P]=[]),this.events[P].push(z)},ee.prototype.off=function(P,z){if(z===void 0&&(z=null),!z){this.events[P]=[];return}var te=this.events[P].indexOf(z);te===-1&&this.events[P].splice(te,1)},ee.prototype.trigger=function(P){for(var z=this,te=[],X=1;X<arguments.length;X++)te[X-1]=arguments[X];(this.events[P]||[]).forEach(function(h){return h.apply(void 0,fl([z,z.element],te,!1))})},ee.settings=function(P){ee.defaults=co(co({},ee.defaults),P)},ee.defaults={animation:!0,animationDuration:400,closeLabel:"Close",containerClass:"toast__container",containerElement:"div",hide:!1,hideDelay:5,root:document.body,toastClass:"toast",toastElement:"div",toastEvents:["click","focus","keydown"],toastHideClass:"toast--hide",toastShowClass:"toast--show",toastType:"info"},ee}();Vr.Melba=dl;Vr.default=dl});var Cl=ui((po,ls)=>{(function(ee,P){if(typeof po=="object"&&typeof ls=="object")ls.exports=P();else if(typeof define=="function"&&define.amd)define([],P);else{var z=P();for(var te in z)(typeof po=="object"?po:ee)[te]=z[te]}})(self,function(){return(()=>{"use strict";var ee={4567:function(X,h,L){var p,g=this&&this.__extends||(p=function(s,o){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])},p(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=s}p(s,o),s.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.AccessibilityManager=void 0;var C=L(9042),y=L(6114),b=L(9924),S=L(3656),u=L(844),f=L(5596),v=L(9631),l=function(s){function o(a,d){var m=s.call(this)||this;m._terminal=a,m._renderService=d,m._liveRegionLineCount=0,m._charsToConsume=[],m._charsToAnnounce="",m._accessibilityTreeRoot=document.createElement("div"),m._accessibilityTreeRoot.setAttribute("role","document"),m._accessibilityTreeRoot.classList.add("xterm-accessibility"),m._accessibilityTreeRoot.tabIndex=0,m._rowContainer=document.createElement("div"),m._rowContainer.setAttribute("role","list"),m._rowContainer.classList.add("xterm-accessibility-tree"),m._rowElements=[];for(var k=0;k<m._terminal.rows;k++)m._rowElements[k]=m._createAccessibilityTreeNode(),m._rowContainer.appendChild(m._rowElements[k]);if(m._topBoundaryFocusListener=function(T){return m._onBoundaryFocus(T,0)},m._bottomBoundaryFocusListener=function(T){return m._onBoundaryFocus(T,1)},m._rowElements[0].addEventListener("focus",m._topBoundaryFocusListener),m._rowElements[m._rowElements.length-1].addEventListener("focus",m._bottomBoundaryFocusListener),m._refreshRowsDimensions(),m._accessibilityTreeRoot.appendChild(m._rowContainer),m._renderRowsDebouncer=new b.TimeBasedDebouncer(m._renderRows.bind(m)),m._refreshRows(),m._liveRegion=document.createElement("div"),m._liveRegion.classList.add("live-region"),m._liveRegion.setAttribute("aria-live","assertive"),m._accessibilityTreeRoot.appendChild(m._liveRegion),!m._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return m._terminal.element.insertAdjacentElement("afterbegin",m._accessibilityTreeRoot),m.register(m._renderRowsDebouncer),m.register(m._terminal.onResize(function(T){return m._onResize(T.rows)})),m.register(m._terminal.onRender(function(T){return m._refreshRows(T.start,T.end)})),m.register(m._terminal.onScroll(function(){return m._refreshRows()})),m.register(m._terminal.onA11yChar(function(T){return m._onChar(T)})),m.register(m._terminal.onLineFeed(function(){return m._onChar(`
`)})),m.register(m._terminal.onA11yTab(function(T){return m._onTab(T)})),m.register(m._terminal.onKey(function(T){return m._onKey(T.key)})),m.register(m._terminal.onBlur(function(){return m._clearLiveRegion()})),m.register(m._renderService.onDimensionsChange(function(){return m._refreshRowsDimensions()})),m._screenDprMonitor=new f.ScreenDprMonitor,m.register(m._screenDprMonitor),m._screenDprMonitor.setListener(function(){return m._refreshRowsDimensions()}),m.register((0,S.addDisposableDomListener)(window,"resize",function(){return m._refreshRowsDimensions()})),m}return g(o,s),o.prototype.dispose=function(){s.prototype.dispose.call(this),(0,v.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},o.prototype._onBoundaryFocus=function(a,d){var m=a.target,k=this._rowElements[d===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")!==(d===0?"1":""+this._terminal.buffer.lines.length)&&a.relatedTarget===k){var T,H;if(d===0?(T=m,H=this._rowElements.pop(),this._rowContainer.removeChild(H)):(T=this._rowElements.shift(),H=m,this._rowContainer.removeChild(T)),T.removeEventListener("focus",this._topBoundaryFocusListener),H.removeEventListener("focus",this._bottomBoundaryFocusListener),d===0){var I=this._createAccessibilityTreeNode();this._rowElements.unshift(I),this._rowContainer.insertAdjacentElement("afterbegin",I)}else I=this._createAccessibilityTreeNode(),this._rowElements.push(I),this._rowContainer.appendChild(I);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(d===0?-1:1),this._rowElements[d===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}},o.prototype._onResize=function(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var d=this._rowContainer.children.length;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},o.prototype._createAccessibilityTreeNode=function(){var a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a},o.prototype._onTab=function(a){for(var d=0;d<a;d++)this._onChar(" ")},o.prototype._onChar=function(a){var d=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=C.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){d._accessibilityTreeRoot.appendChild(d._liveRegion)},0))},o.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&(0,v.removeElementFromParent)(this._liveRegion)},o.prototype._onKey=function(a){this._clearLiveRegion(),this._charsToConsume.push(a)},o.prototype._refreshRows=function(a,d){this._renderRowsDebouncer.refresh(a,d,this._terminal.rows)},o.prototype._renderRows=function(a,d){for(var m=this._terminal.buffer,k=m.lines.length.toString(),T=a;T<=d;T++){var H=m.translateBufferLineToString(m.ydisp+T,!0),I=(m.ydisp+T+1).toString(),A=this._rowElements[T];A&&(H.length===0?A.innerText="\xA0":A.textContent=H,A.setAttribute("aria-posinset",I),A.setAttribute("aria-setsize",k))}this._announceCharacters()},o.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}},o.prototype._refreshRowDimensions=function(a){a.style.height=this._renderService.dimensions.actualCellHeight+"px"},o.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},o}(u.Disposable);h.AccessibilityManager=l},3614:(X,h)=>{function L(y){return y.replace(/\r?\n/g,"\r")}function p(y,b){return b?"\x1B[200~"+y+"\x1B[201~":y}function g(y,b,S){y=p(y=L(y),S.decPrivateModes.bracketedPasteMode),S.triggerDataEvent(y,!0),b.value=""}function C(y,b,S){var u=S.getBoundingClientRect(),f=y.clientX-u.left-10,v=y.clientY-u.top-10;b.style.width="20px",b.style.height="20px",b.style.left=f+"px",b.style.top=v+"px",b.style.zIndex="1000",b.focus()}Object.defineProperty(h,"__esModule",{value:!0}),h.rightClickHandler=h.moveTextAreaUnderMouseCursor=h.paste=h.handlePasteEvent=h.copyHandler=h.bracketTextForPaste=h.prepareTextForTerminal=void 0,h.prepareTextForTerminal=L,h.bracketTextForPaste=p,h.copyHandler=function(y,b){y.clipboardData&&y.clipboardData.setData("text/plain",b.selectionText),y.preventDefault()},h.handlePasteEvent=function(y,b,S){y.stopPropagation(),y.clipboardData&&g(y.clipboardData.getData("text/plain"),b,S)},h.paste=g,h.moveTextAreaUnderMouseCursor=C,h.rightClickHandler=function(y,b,S,u,f){C(y,b,S),f&&u.rightClickSelect(y),b.value=u.selectionText,b.select()}},4774:(X,h)=>{var L,p,g,C;function y(S){var u=S.toString(16);return u.length<2?"0"+u:u}function b(S,u){return S<u?(u+.05)/(S+.05):(S+.05)/(u+.05)}Object.defineProperty(h,"__esModule",{value:!0}),h.contrastRatio=h.toPaddedHex=h.rgba=h.rgb=h.css=h.color=h.channels=void 0,function(S){S.toCss=function(u,f,v,l){return l!==void 0?"#"+y(u)+y(f)+y(v)+y(l):"#"+y(u)+y(f)+y(v)},S.toRgba=function(u,f,v,l){return l===void 0&&(l=255),(u<<24|f<<16|v<<8|l)>>>0}}(L=h.channels||(h.channels={})),(p=h.color||(h.color={})).blend=function(S,u){var f=(255&u.rgba)/255;if(f===1)return{css:u.css,rgba:u.rgba};var v=u.rgba>>24&255,l=u.rgba>>16&255,s=u.rgba>>8&255,o=S.rgba>>24&255,a=S.rgba>>16&255,d=S.rgba>>8&255,m=o+Math.round((v-o)*f),k=a+Math.round((l-a)*f),T=d+Math.round((s-d)*f);return{css:L.toCss(m,k,T),rgba:L.toRgba(m,k,T)}},p.isOpaque=function(S){return(255&S.rgba)==255},p.ensureContrastRatio=function(S,u,f){var v=C.ensureContrastRatio(S.rgba,u.rgba,f);if(v)return C.toColor(v>>24&255,v>>16&255,v>>8&255)},p.opaque=function(S){var u=(255|S.rgba)>>>0,f=C.toChannels(u),v=f[0],l=f[1],s=f[2];return{css:L.toCss(v,l,s),rgba:u}},p.opacity=function(S,u){var f=Math.round(255*u),v=C.toChannels(S.rgba),l=v[0],s=v[1],o=v[2];return{css:L.toCss(l,s,o,f),rgba:L.toRgba(l,s,o,f)}},p.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]},(h.css||(h.css={})).toColor=function(S){switch(S.length){case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(S){function u(f,v,l){var s=f/255,o=v/255,a=l/255;return .2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))}S.relativeLuminance=function(f){return u(f>>16&255,f>>8&255,255&f)},S.relativeLuminance2=u}(g=h.rgb||(h.rgb={})),function(S){function u(v,l,s){for(var o=v>>24&255,a=v>>16&255,d=v>>8&255,m=l>>24&255,k=l>>16&255,T=l>>8&255,H=b(g.relativeLuminance2(m,T,k),g.relativeLuminance2(o,a,d));H<s&&(m>0||k>0||T>0);)m-=Math.max(0,Math.ceil(.1*m)),k-=Math.max(0,Math.ceil(.1*k)),T-=Math.max(0,Math.ceil(.1*T)),H=b(g.relativeLuminance2(m,T,k),g.relativeLuminance2(o,a,d));return(m<<24|k<<16|T<<8|255)>>>0}function f(v,l,s){for(var o=v>>24&255,a=v>>16&255,d=v>>8&255,m=l>>24&255,k=l>>16&255,T=l>>8&255,H=b(g.relativeLuminance2(m,T,k),g.relativeLuminance2(o,a,d));H<s&&(m<255||k<255||T<255);)m=Math.min(255,m+Math.ceil(.1*(255-m))),k=Math.min(255,k+Math.ceil(.1*(255-k))),T=Math.min(255,T+Math.ceil(.1*(255-T))),H=b(g.relativeLuminance2(m,T,k),g.relativeLuminance2(o,a,d));return(m<<24|k<<16|T<<8|255)>>>0}S.ensureContrastRatio=function(v,l,s){var o=g.relativeLuminance(v>>8),a=g.relativeLuminance(l>>8);if(b(o,a)<s)return a<o?u(v,l,s):f(v,l,s)},S.reduceLuminance=u,S.increaseLuminance=f,S.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},S.toColor=function(v,l,s){return{css:L.toCss(v,l,s),rgba:L.toRgba(v,l,s)}}}(C=h.rgba||(h.rgba={})),h.toPaddedHex=y,h.contrastRatio=b},7239:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorContrastCache=void 0;var L=function(){function p(){this._color={},this._rgba={}}return p.prototype.clear=function(){this._color={},this._rgba={}},p.prototype.setCss=function(g,C,y){this._rgba[g]||(this._rgba[g]={}),this._rgba[g][C]=y},p.prototype.getCss=function(g,C){return this._rgba[g]?this._rgba[g][C]:void 0},p.prototype.setColor=function(g,C,y){this._color[g]||(this._color[g]={}),this._color[g][C]=y},p.prototype.getColor=function(g,C){return this._color[g]?this._color[g][C]:void 0},p}();h.ColorContrastCache=L},5680:function(X,h,L){var p=this&&this.__spreadArray||function(l,s,o){if(o||arguments.length===2)for(var a,d=0,m=s.length;d<m;d++)!a&&d in s||(a||(a=Array.prototype.slice.call(s,0,d)),a[d]=s[d]);return l.concat(a||Array.prototype.slice.call(s))};Object.defineProperty(h,"__esModule",{value:!0}),h.ColorManager=h.DEFAULT_ANSI_COLORS=void 0;var g=L(4774),C=L(7239),y=g.css.toColor("#ffffff"),b=g.css.toColor("#000000"),S=g.css.toColor("#ffffff"),u=g.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};h.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var l=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],s=[0,95,135,175,215,255],o=0;o<216;o++){var a=s[o/36%6|0],d=s[o/6%6|0],m=s[o%6];l.push({css:g.channels.toCss(a,d,m),rgba:g.channels.toRgba(a,d,m)})}for(o=0;o<24;o++){var k=8+10*o;l.push({css:g.channels.toCss(k,k,k),rgba:g.channels.toRgba(k,k,k)})}return l}());var v=function(){function l(s,o){this.allowTransparency=o;var a=s.createElement("canvas");a.width=1,a.height=1;var d=a.getContext("2d");if(!d)throw new Error("Could not get rendering context");this._ctx=d,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new C.ColorContrastCache,this.colors={foreground:y,background:b,cursor:S,cursorAccent:u,selectionTransparent:f,selectionOpaque:g.color.blend(b,f),ansi:h.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return l.prototype.onOptionsChange=function(s){s==="minimumContrastRatio"&&this._contrastCache.clear()},l.prototype.setTheme=function(s){s===void 0&&(s={}),this.colors.foreground=this._parseColor(s.foreground,y),this.colors.background=this._parseColor(s.background,b),this.colors.cursor=this._parseColor(s.cursor,S,!0),this.colors.cursorAccent=this._parseColor(s.cursorAccent,u,!0),this.colors.selectionTransparent=this._parseColor(s.selection,f,!0),this.colors.selectionOpaque=g.color.blend(this.colors.background,this.colors.selectionTransparent),g.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=g.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(s.black,h.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(s.red,h.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(s.green,h.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(s.yellow,h.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(s.blue,h.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(s.magenta,h.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(s.cyan,h.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(s.white,h.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(s.brightBlack,h.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(s.brightRed,h.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(s.brightGreen,h.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(s.brightYellow,h.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(s.brightBlue,h.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(s.brightMagenta,h.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(s.brightCyan,h.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(s.brightWhite,h.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},l.prototype.restoreColor=function(s){if(s!==void 0)switch(s){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[s]=this._restoreColors.ansi[s]}else for(var o=0;o<this._restoreColors.ansi.length;++o)this.colors.ansi[o]=this._restoreColors.ansi[o]},l.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:p([],this.colors.ansi,!0)}},l.prototype._parseColor=function(s,o,a){if(a===void 0&&(a=this.allowTransparency),s===void 0)return o;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+s+" is invalid using fallback "+o.css),o;this._ctx.fillRect(0,0,1,1);var d=this._ctx.getImageData(0,0,1,1).data;if(d[3]!==255){if(!a)return console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+o.css+"."),o;var m=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(x){return Number(x)}),k=m[0],T=m[1],H=m[2],I=m[3],A=Math.round(255*I);return{rgba:g.channels.toRgba(k,T,H,A),css:s}}return{css:this._ctx.fillStyle,rgba:g.channels.toRgba(d[0],d[1],d[2],d[3])}},l}();h.ColorManager=v},9631:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeElementFromParent=void 0,h.removeElementFromParent=function(){for(var L,p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];for(var C=0,y=p;C<y.length;C++){var b=y[C];(L=b==null?void 0:b.parentElement)===null||L===void 0||L.removeChild(b)}}},3656:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.addDisposableDomListener=void 0,h.addDisposableDomListener=function(L,p,g,C){L.addEventListener(p,g,C);var y=!1;return{dispose:function(){y||(y=!0,L.removeEventListener(p,g,C))}}}},3551:function(X,h,L){var p=this&&this.__decorate||function(u,f,v,l){var s,o=arguments.length,a=o<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,v):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(u,f,v,l);else for(var d=u.length-1;d>=0;d--)(s=u[d])&&(a=(o<3?s(a):o>3?s(f,v,a):s(f,v))||a);return o>3&&a&&Object.defineProperty(f,v,a),a},g=this&&this.__param||function(u,f){return function(v,l){f(v,l,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZone=h.Linkifier=void 0;var C=L(8460),y=L(2585),b=function(){function u(f,v,l){this._bufferService=f,this._logService=v,this._unicodeService=l,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new C.EventEmitter,this._onHideLinkUnderline=new C.EventEmitter,this._onLinkTooltip=new C.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(u.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),u.prototype.attachToDom=function(f,v){this._element=f,this._mouseZoneManager=v},u.prototype.linkifyRows=function(f,v){var l=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=f,this._rowsToLinkify.end=v):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,f),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,v)),this._mouseZoneManager.clearAll(f,v),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return l._linkifyRows()},u._timeBeforeLatency))},u.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var f=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var v=f.ydisp+this._rowsToLinkify.start;if(!(v>=f.lines.length)){for(var l=f.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,s=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,v,l,s,s);o.hasNext();)for(var a=o.next(),d=0;d<this._linkMatchers.length;d++)this._doLinkifyRow(a.range.first,a.content,this._linkMatchers[d]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},u.prototype.registerLinkMatcher=function(f,v,l){if(l===void 0&&(l={}),!v)throw new Error("handler must be defined");var s={id:this._nextLinkMatcherId++,regex:f,handler:v,matchIndex:l.matchIndex,validationCallback:l.validationCallback,hoverTooltipCallback:l.tooltipCallback,hoverLeaveCallback:l.leaveCallback,willLinkActivate:l.willLinkActivate,priority:l.priority||0};return this._addLinkMatcherToList(s),s.id},u.prototype._addLinkMatcherToList=function(f){if(this._linkMatchers.length!==0){for(var v=this._linkMatchers.length-1;v>=0;v--)if(f.priority<=this._linkMatchers[v].priority)return void this._linkMatchers.splice(v+1,0,f);this._linkMatchers.splice(0,0,f)}else this._linkMatchers.push(f)},u.prototype.deregisterLinkMatcher=function(f){for(var v=0;v<this._linkMatchers.length;v++)if(this._linkMatchers[v].id===f)return this._linkMatchers.splice(v,1),!0;return!1},u.prototype._doLinkifyRow=function(f,v,l){for(var s,o=this,a=new RegExp(l.regex.source,(l.regex.flags||"")+"g"),d=-1,m=function(){var T=s[typeof l.matchIndex!="number"?0:l.matchIndex];if(!T)return k._logService.debug("match found without corresponding matchIndex",s,l),"break";if(d=v.indexOf(T,d+1),a.lastIndex=d+T.length,d<0)return"break";var H=k._bufferService.buffer.stringIndexToBufferIndex(f,d);if(H[0]<0)return"break";var I=k._bufferService.buffer.lines.get(H[0]);if(!I)return"break";var A=I.getFg(H[1]),x=A?A>>9&511:void 0;l.validationCallback?l.validationCallback(T,function(O){o._rowsTimeoutId||O&&o._addLink(H[1],H[0]-o._bufferService.buffer.ydisp,T,l,x)}):k._addLink(H[1],H[0]-k._bufferService.buffer.ydisp,T,l,x)},k=this;(s=a.exec(v))!==null&&m()!=="break";);},u.prototype._addLink=function(f,v,l,s,o){var a=this;if(this._mouseZoneManager&&this._element){var d=this._unicodeService.getStringCellWidth(l),m=f%this._bufferService.cols,k=v+Math.floor(f/this._bufferService.cols),T=(m+d)%this._bufferService.cols,H=k+Math.floor((m+d)/this._bufferService.cols);T===0&&(T=this._bufferService.cols,H--),this._mouseZoneManager.add(new S(m+1,k+1,T+1,H+1,function(I){if(s.handler)return s.handler(I,l);var A=window.open();A?(A.opener=null,A.location.href=l):console.warn("Opening link blocked as opener could not be cleared")},function(){a._onShowLinkUnderline.fire(a._createLinkHoverEvent(m,k,T,H,o)),a._element.classList.add("xterm-cursor-pointer")},function(I){a._onLinkTooltip.fire(a._createLinkHoverEvent(m,k,T,H,o)),s.hoverTooltipCallback&&s.hoverTooltipCallback(I,l,{start:{x:m,y:k},end:{x:T,y:H}})},function(){a._onHideLinkUnderline.fire(a._createLinkHoverEvent(m,k,T,H,o)),a._element.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()},function(I){return!s.willLinkActivate||s.willLinkActivate(I,l)}))}},u.prototype._createLinkHoverEvent=function(f,v,l,s,o){return{x1:f,y1:v,x2:l,y2:s,cols:this._bufferService.cols,fg:o}},u._timeBeforeLatency=200,u=p([g(0,y.IBufferService),g(1,y.ILogService),g(2,y.IUnicodeService)],u)}();h.Linkifier=b;var S=function(u,f,v,l,s,o,a,d,m){this.x1=u,this.y1=f,this.x2=v,this.y2=l,this.clickCallback=s,this.hoverCallback=o,this.tooltipCallback=a,this.leaveCallback=d,this.willLinkActivate=m};h.MouseZone=S},6465:function(X,h,L){var p,g=this&&this.__extends||(p=function(l,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},p(l,s)},function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=l}p(l,s),l.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),C=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},y=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Linkifier2=void 0;var b=L(2585),S=L(8460),u=L(844),f=L(3656),v=function(l){function s(o){var a=l.call(this)||this;return a._bufferService=o,a._linkProviders=[],a._linkCacheDisposables=[],a._isMouseOut=!0,a._activeLine=-1,a._onShowLinkUnderline=a.register(new S.EventEmitter),a._onHideLinkUnderline=a.register(new S.EventEmitter),a.register((0,u.getDisposeArrayDisposable)(a._linkCacheDisposables)),a}return g(s,l),Object.defineProperty(s.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),s.prototype.registerLinkProvider=function(o){var a=this;return this._linkProviders.push(o),{dispose:function(){var d=a._linkProviders.indexOf(o);d!==-1&&a._linkProviders.splice(d,1)}}},s.prototype.attachToDom=function(o,a,d){var m=this;this._element=o,this._mouseService=a,this._renderService=d,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",function(){m._isMouseOut=!0,m._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},s.prototype._onMouseMove=function(o){if(this._lastMouseEvent=o,this._element&&this._mouseService){var a=this._positionFromMouseEvent(o,this._element,this._mouseService);if(a){this._isMouseOut=!1;for(var d=o.composedPath(),m=0;m<d.length;m++){var k=d[m];if(k.classList.contains("xterm"))break;if(k.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._onHover(a),this._lastBufferCell=a)}}},s.prototype._onHover=function(o){if(this._activeLine!==o.y)return this._clearCurrentLink(),void this._askForLink(o,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))},s.prototype._askForLink=function(o,a){var d,m=this;this._activeProviderReplies&&a||((d=this._activeProviderReplies)===null||d===void 0||d.forEach(function(T){T==null||T.forEach(function(H){H.link.dispose&&H.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);var k=!1;this._linkProviders.forEach(function(T,H){var I;a?((I=m._activeProviderReplies)===null||I===void 0?void 0:I.get(H))&&(k=m._checkLinkProviderResult(H,o,k)):T.provideLinks(o.y,function(A){var x,O;if(!m._isMouseOut){var E=A==null?void 0:A.map(function(V){return{link:V}});(x=m._activeProviderReplies)===null||x===void 0||x.set(H,E),k=m._checkLinkProviderResult(H,o,k),((O=m._activeProviderReplies)===null||O===void 0?void 0:O.size)===m._linkProviders.length&&m._removeIntersectingLinks(o.y,m._activeProviderReplies)}})})},s.prototype._removeIntersectingLinks=function(o,a){for(var d=new Set,m=0;m<a.size;m++){var k=a.get(m);if(k)for(var T=0;T<k.length;T++)for(var H=k[T],I=H.link.range.start.y<o?0:H.link.range.start.x,A=H.link.range.end.y>o?this._bufferService.cols:H.link.range.end.x,x=I;x<=A;x++){if(d.has(x)){k.splice(T--,1);break}d.add(x)}}},s.prototype._checkLinkProviderResult=function(o,a,d){var m,k=this;if(!this._activeProviderReplies)return d;for(var T=this._activeProviderReplies.get(o),H=!1,I=0;I<o;I++)this._activeProviderReplies.has(I)&&!this._activeProviderReplies.get(I)||(H=!0);if(!H&&T){var A=T.find(function(O){return k._linkAtPosition(O.link,a)});A&&(d=!0,this._handleNewLink(A))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(I=0;I<this._activeProviderReplies.size;I++){var x=(m=this._activeProviderReplies.get(I))===null||m===void 0?void 0:m.find(function(O){return k._linkAtPosition(O.link,a)});if(x){d=!0,this._handleNewLink(x);break}}return d},s.prototype._onClick=function(o){if(this._element&&this._mouseService&&this._currentLink){var a=this._positionFromMouseEvent(o,this._element,this._mouseService);a&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(o,this._currentLink.link.text)}},s.prototype._clearCurrentLink=function(o,a){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!a||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))},s.prototype._handleNewLink=function(o){var a=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(o.link,d)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:function(){var m,k;return(k=(m=a._currentLink)===null||m===void 0?void 0:m.state)===null||k===void 0?void 0:k.decorations.pointerCursor},set:function(m){var k,T;((k=a._currentLink)===null||k===void 0?void 0:k.state)&&a._currentLink.state.decorations.pointerCursor!==m&&(a._currentLink.state.decorations.pointerCursor=m,a._currentLink.state.isHovered&&((T=a._element)===null||T===void 0||T.classList.toggle("xterm-cursor-pointer",m)))}},underline:{get:function(){var m,k;return(k=(m=a._currentLink)===null||m===void 0?void 0:m.state)===null||k===void 0?void 0:k.decorations.underline},set:function(m){var k,T,H;((k=a._currentLink)===null||k===void 0?void 0:k.state)&&((H=(T=a._currentLink)===null||T===void 0?void 0:T.state)===null||H===void 0?void 0:H.decorations.underline)!==m&&(a._currentLink.state.decorations.underline=m,a._currentLink.state.isHovered&&a._fireUnderlineEvent(o.link,m))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(m){var k=m.start===0?0:m.start+1+a._bufferService.buffer.ydisp;a._clearCurrentLink(k,m.end+1+a._bufferService.buffer.ydisp)})))}},s.prototype._linkHover=function(o,a,d){var m;((m=this._currentLink)===null||m===void 0?void 0:m.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(d,a.text)},s.prototype._fireUnderlineEvent=function(o,a){var d=o.range,m=this._bufferService.buffer.ydisp,k=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-m-1,d.end.x,d.end.y-m-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(k)},s.prototype._linkLeave=function(o,a,d){var m;((m=this._currentLink)===null||m===void 0?void 0:m.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(d,a.text)},s.prototype._linkAtPosition=function(o,a){var d=o.range.start.y===o.range.end.y,m=o.range.start.y<a.y,k=o.range.end.y>a.y;return(d&&o.range.start.x<=a.x&&o.range.end.x>=a.x||m&&o.range.end.x>=a.x||k&&o.range.start.x<=a.x||m&&k)&&o.range.start.y<=a.y&&o.range.end.y>=a.y},s.prototype._positionFromMouseEvent=function(o,a,d){var m=d.getCoords(o,a,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}},s.prototype._createLinkUnderlineEvent=function(o,a,d,m,k){return{x1:o,y1:a,x2:d,y2:m,cols:this._bufferService.cols,fg:k}},C([y(0,b.IBufferService)],s)}(u.Disposable);h.Linkifier2=v},9042:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.tooMuchOutput=h.promptLabel=void 0,h.promptLabel="Terminal input",h.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(X,h,L){var p,g=this&&this.__extends||(p=function(l,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},p(l,s)},function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=l}p(l,s),l.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),C=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},y=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZoneManager=void 0;var b=L(844),S=L(3656),u=L(4725),f=L(2585),v=function(l){function s(o,a,d,m,k,T){var H=l.call(this)||this;return H._element=o,H._screenElement=a,H._bufferService=d,H._mouseService=m,H._selectionService=k,H._optionsService=T,H._zones=[],H._areZonesActive=!1,H._lastHoverCoords=[void 0,void 0],H._initialSelectionLength=0,H.register((0,S.addDisposableDomListener)(H._element,"mousedown",function(I){return H._onMouseDown(I)})),H._mouseMoveListener=function(I){return H._onMouseMove(I)},H._mouseLeaveListener=function(I){return H._onMouseLeave(I)},H._clickListener=function(I){return H._onClick(I)},H}return g(s,l),s.prototype.dispose=function(){l.prototype.dispose.call(this),this._deactivate()},s.prototype.add=function(o){this._zones.push(o),this._zones.length===1&&this._activate()},s.prototype.clearAll=function(o,a){if(this._zones.length!==0){o&&a||(o=0,a=this._bufferService.rows-1);for(var d=0;d<this._zones.length;d++){var m=this._zones[d];(m.y1>o&&m.y1<=a+1||m.y2>o&&m.y2<=a+1||m.y1<o&&m.y2>a+1)&&(this._currentZone&&this._currentZone===m&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(d--,1))}this._zones.length===0&&this._deactivate()}},s.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},s.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},s.prototype._onMouseMove=function(o){this._lastHoverCoords[0]===o.pageX&&this._lastHoverCoords[1]===o.pageY||(this._onHover(o),this._lastHoverCoords=[o.pageX,o.pageY])},s.prototype._onHover=function(o){var a=this,d=this._findZoneEventAt(o);d!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),d&&(this._currentZone=d,d.hoverCallback&&d.hoverCallback(o),this._tooltipTimeout=window.setTimeout(function(){return a._onTooltip(o)},this._optionsService.options.linkTooltipHoverDuration)))},s.prototype._onTooltip=function(o){this._tooltipTimeout=void 0;var a=this._findZoneEventAt(o);a==null||a.tooltipCallback(o)},s.prototype._onMouseDown=function(o){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var a=this._findZoneEventAt(o);(a==null?void 0:a.willLinkActivate(o))&&(o.preventDefault(),o.stopImmediatePropagation())}},s.prototype._onMouseLeave=function(o){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},s.prototype._onClick=function(o){var a=this._findZoneEventAt(o),d=this._getSelectionLength();a&&d===this._initialSelectionLength&&(a.clickCallback(o),o.preventDefault(),o.stopImmediatePropagation())},s.prototype._getSelectionLength=function(){var o=this._selectionService.selectionText;return o?o.length:0},s.prototype._findZoneEventAt=function(o){var a=this._mouseService.getCoords(o,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(a)for(var d=a[0],m=a[1],k=0;k<this._zones.length;k++){var T=this._zones[k];if(T.y1===T.y2){if(m===T.y1&&d>=T.x1&&d<T.x2)return T}else if(m===T.y1&&d>=T.x1||m===T.y2&&d<T.x2||m>T.y1&&m<T.y2)return T}},C([y(2,f.IBufferService),y(3,u.IMouseService),y(4,u.ISelectionService),y(5,f.IOptionsService)],s)}(b.Disposable);h.MouseZoneManager=v},6193:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderDebouncer=void 0;var L=function(){function p(g){this._renderCallback=g}return p.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},p.prototype.refresh=function(g,C,y){var b=this;this._rowCount=y,g=g!==void 0?g:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,g):g,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return b._innerRefresh()}))},p.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var g=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(g,C)}},p}();h.RenderDebouncer=L},5596:function(X,h,L){var p,g=this&&this.__extends||(p=function(y,b){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,u){S.__proto__=u}||function(S,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(S[f]=u[f])},p(y,b)},function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function S(){this.constructor=y}p(y,b),y.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)});Object.defineProperty(h,"__esModule",{value:!0}),h.ScreenDprMonitor=void 0;var C=function(y){function b(){var S=y!==null&&y.apply(this,arguments)||this;return S._currentDevicePixelRatio=window.devicePixelRatio,S}return g(b,y),b.prototype.setListener=function(S){var u=this;this._listener&&this.clearListener(),this._listener=S,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},b.prototype.dispose=function(){y.prototype.dispose.call(this),this.clearListener()},b.prototype._updateDpr=function(){var S;this._outerListener&&((S=this._resolutionMediaMatchList)===null||S===void 0||S.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},b.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},b}(L(844).Disposable);h.ScreenDprMonitor=C},3236:function(X,h,L){var p,g=this&&this.__extends||(p=function(he,B){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,q){j.__proto__=q}||function(j,q){for(var ae in q)Object.prototype.hasOwnProperty.call(q,ae)&&(j[ae]=q[ae])},p(he,B)},function(he,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function j(){this.constructor=he}p(he,B),he.prototype=B===null?Object.create(B):(j.prototype=B.prototype,new j)});Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;var C=L(2950),y=L(1680),b=L(3614),S=L(2584),u=L(5435),f=L(3525),v=L(3551),l=L(9312),s=L(6114),o=L(3656),a=L(9042),d=L(357),m=L(6954),k=L(4567),T=L(1296),H=L(7399),I=L(8460),A=L(8437),x=L(5680),O=L(3230),E=L(4725),V=L(428),U=L(8934),F=L(6465),W=L(5114),Y=L(8969),J=L(4774),fe=L(4269),le=L(5941),Ce=typeof window!="undefined"?window.document:null,we=function(he){function B(j){j===void 0&&(j={});var q=he.call(this,j)||this;return q.browser=s,q._keyDownHandled=!1,q._keyPressHandled=!1,q._unprocessedDeadKey=!1,q._onCursorMove=new I.EventEmitter,q._onKey=new I.EventEmitter,q._onRender=new I.EventEmitter,q._onSelectionChange=new I.EventEmitter,q._onTitleChange=new I.EventEmitter,q._onBell=new I.EventEmitter,q._onFocus=new I.EventEmitter,q._onBlur=new I.EventEmitter,q._onA11yCharEmitter=new I.EventEmitter,q._onA11yTabEmitter=new I.EventEmitter,q._setup(),q.linkifier=q._instantiationService.createInstance(v.Linkifier),q.linkifier2=q.register(q._instantiationService.createInstance(F.Linkifier2)),q.register(q._inputHandler.onRequestBell(function(){return q.bell()})),q.register(q._inputHandler.onRequestRefreshRows(function(ae,Z){return q.refresh(ae,Z)})),q.register(q._inputHandler.onRequestSendFocus(function(){return q._reportFocus()})),q.register(q._inputHandler.onRequestReset(function(){return q.reset()})),q.register(q._inputHandler.onRequestWindowsOptionsReport(function(ae){return q._reportWindowsOptions(ae)})),q.register(q._inputHandler.onColor(function(ae){return q._handleColorEvent(ae)})),q.register((0,I.forwardEvent)(q._inputHandler.onCursorMove,q._onCursorMove)),q.register((0,I.forwardEvent)(q._inputHandler.onTitleChange,q._onTitleChange)),q.register((0,I.forwardEvent)(q._inputHandler.onA11yChar,q._onA11yCharEmitter)),q.register((0,I.forwardEvent)(q._inputHandler.onA11yTab,q._onA11yTabEmitter)),q.register(q._bufferService.onResize(function(ae){return q._afterResize(ae.cols,ae.rows)})),q}return g(B,he),Object.defineProperty(B.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),B.prototype._handleColorEvent=function(j){var q,ae;if(this._colorManager){for(var Z=0,_e=j;Z<_e.length;Z++){var Le=_e[Z],Be=void 0,Ee="";switch(Le.index){case 256:Be="foreground",Ee="10";break;case 257:Be="background",Ee="11";break;case 258:Be="cursor",Ee="12";break;default:Be="ansi",Ee="4;"+Le.index}if(Be)switch(Le.type){case 0:var He=J.color.toColorRGB(Be==="ansi"?this._colorManager.colors.ansi[Le.index]:this._colorManager.colors[Be]);this.coreService.triggerDataEvent(S.C0.ESC+"]"+Ee+";"+(0,le.toRgbString)(He)+S.C0.BEL);break;case 1:Be==="ansi"?this._colorManager.colors.ansi[Le.index]=J.rgba.toColor.apply(J.rgba,Le.color):this._colorManager.colors[Be]=J.rgba.toColor.apply(J.rgba,Le.color);break;case 2:this._colorManager.restoreColor(Le.index)}}(q=this._renderService)===null||q===void 0||q.setColors(this._colorManager.colors),(ae=this.viewport)===null||ae===void 0||ae.onThemeChange(this._colorManager.colors)}},B.prototype.dispose=function(){var j,q,ae;this._isDisposed||(he.prototype.dispose.call(this),(j=this._renderService)===null||j===void 0||j.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(ae=(q=this.element)===null||q===void 0?void 0:q.parentNode)===null||ae===void 0||ae.removeChild(this.element))},B.prototype._setup=function(){he.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(B.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),B.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},B.prototype._updateOptions=function(j){var q,ae,Z,_e;switch(he.prototype._updateOptions.call(this,j),j){case"fontFamily":case"fontSize":(q=this._renderService)===null||q===void 0||q.clear(),(ae=this._charSizeService)===null||ae===void 0||ae.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new k.AccessibilityManager(this,this._renderService)):((_e=this._accessibilityManager)===null||_e===void 0||_e.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},B.prototype._onTextAreaFocus=function(j){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(S.C0.ESC+"[I"),this.updateCursorStyle(j),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},B.prototype.blur=function(){var j;return(j=this.textarea)===null||j===void 0?void 0:j.blur()},B.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(S.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},B.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var j=this.buffer.ybase+this.buffer.y,q=this.buffer.lines.get(j);if(q){var ae=Math.min(this.buffer.x,this.cols-1),Z=this._renderService.dimensions.actualCellHeight,_e=q.getWidth(ae),Le=this._renderService.dimensions.actualCellWidth*_e,Be=this.buffer.y*this._renderService.dimensions.actualCellHeight,Ee=ae*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Ee+"px",this.textarea.style.top=Be+"px",this.textarea.style.width=Le+"px",this.textarea.style.height=Z+"px",this.textarea.style.lineHeight=Z+"px",this.textarea.style.zIndex="-5"}}},B.prototype._initGlobal=function(){var j=this;this._bindKeys(),this.register((0,o.addDisposableDomListener)(this.element,"copy",function(ae){j.hasSelection()&&(0,b.copyHandler)(ae,j._selectionService)}));var q=function(ae){return(0,b.handlePasteEvent)(ae,j.textarea,j.coreService)};this.register((0,o.addDisposableDomListener)(this.textarea,"paste",q)),this.register((0,o.addDisposableDomListener)(this.element,"paste",q)),s.isFirefox?this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(ae){ae.button===2&&(0,b.rightClickHandler)(ae,j.textarea,j.screenElement,j._selectionService,j.options.rightClickSelectsWord)})):this.register((0,o.addDisposableDomListener)(this.element,"contextmenu",function(ae){(0,b.rightClickHandler)(ae,j.textarea,j.screenElement,j._selectionService,j.options.rightClickSelectsWord)})),s.isLinux&&this.register((0,o.addDisposableDomListener)(this.element,"auxclick",function(ae){ae.button===1&&(0,b.moveTextAreaUnderMouseCursor)(ae,j.textarea,j.screenElement)}))},B.prototype._bindKeys=function(){var j=this;this.register((0,o.addDisposableDomListener)(this.textarea,"keyup",function(q){return j._keyUp(q)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keydown",function(q){return j._keyDown(q)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keypress",function(q){return j._keyPress(q)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionstart",function(){return j._compositionHelper.compositionstart()})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionupdate",function(q){return j._compositionHelper.compositionupdate(q)})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionend",function(){return j._compositionHelper.compositionend()})),this.register((0,o.addDisposableDomListener)(this.textarea,"input",function(q){return j._inputEvent(q)},!0)),this.register(this.onRender(function(){return j._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(q){return j._queueLinkification(q.start,q.end)}))},B.prototype.open=function(j){var q=this;if(!j)throw new Error("Terminal requires a parent element.");j.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=j.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),j.appendChild(this.element);var ae=Ce.createDocumentFragment();this._viewportElement=Ce.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ae.appendChild(this._viewportElement),this._viewportScrollArea=Ce.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Ce.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Ce.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ae.appendChild(this.screenElement),this.textarea=Ce.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,o.addDisposableDomListener)(this.textarea,"focus",function(Le){return q._onTextAreaFocus(Le)})),this.register((0,o.addDisposableDomListener)(this.textarea,"blur",function(){return q._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Z=this._instantiationService.createInstance(W.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,Z),this._charSizeService=this._instantiationService.createInstance(V.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new x.ColorManager(Ce,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Le){return q._colorManager.onOptionsChange(Le)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(fe.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var _e=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(O.RenderService,_e,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Le){return q._onRender.fire(Le)})),this.onResize(function(Le){return q._renderService.resize(Le.cols,Le.rows)}),this._compositionView=Ce.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(C.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ae),this._soundService=this._instantiationService.createInstance(d.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(U.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,function(Le){return q.scrollLines(Le,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return q.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){q._renderService.onCursorMove(),q._syncTextArea()})),this.register(this.onResize(function(){return q._renderService.onResize(q.cols,q.rows)})),this.register(this.onBlur(function(){return q._renderService.onBlur()})),this.register(this.onFocus(function(){return q._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return q.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(l.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Le){return q.scrollLines(Le.amount,Le.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return q._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Le){return q._renderService.onSelectionChanged(Le.start,Le.end,Le.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Le){q.textarea.value=Le,q.textarea.focus(),q.textarea.select()})),this.register(this._onScroll.event(function(Le){q.viewport.syncScrollArea(),q._selectionService.refresh()})),this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",function(){return q._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(m.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return q._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(Le){return q._selectionService.onMouseDown(Le)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new k.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},B.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(T.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},B.prototype._setTheme=function(j){var q,ae,Z;this._theme=j,(q=this._colorManager)===null||q===void 0||q.setTheme(j),(ae=this._renderService)===null||ae===void 0||ae.setColors(this._colorManager.colors),(Z=this.viewport)===null||Z===void 0||Z.onThemeChange(this._colorManager.colors)},B.prototype.bindMouse=function(){var j=this,q=this,ae=this.element;function Z(be){var ze,vt,At=q._mouseService.getRawByteCoords(be,q.screenElement,q.cols,q.rows);if(!At)return!1;switch(be.overrideType||be.type){case"mousemove":vt=32,be.buttons===void 0?(ze=3,be.button!==void 0&&(ze=be.button<3?be.button:3)):ze=1&be.buttons?0:4&be.buttons?1:2&be.buttons?2:3;break;case"mouseup":vt=0,ze=be.button<3?be.button:3;break;case"mousedown":vt=1,ze=be.button<3?be.button:3;break;case"wheel":be.deltaY!==0&&(vt=be.deltaY<0?0:1),ze=4;break;default:return!1}return!(vt===void 0||ze===void 0||ze>4)&&q.coreMouseService.triggerMouseEvent({col:At.x-33,row:At.y-33,button:ze,action:vt,ctrl:be.ctrlKey,alt:be.altKey,shift:be.shiftKey})}var _e={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Le=function(be){return Z(be),be.buttons||(j._document.removeEventListener("mouseup",_e.mouseup),_e.mousedrag&&j._document.removeEventListener("mousemove",_e.mousedrag)),j.cancel(be)},Be=function(be){return Z(be),j.cancel(be,!0)},Ee=function(be){be.buttons&&Z(be)},He=function(be){be.buttons||Z(be)};this.register(this.coreMouseService.onProtocolChange(function(be){be?(j.optionsService.options.logLevel==="debug"&&j._logService.debug("Binding to mouse events:",j.coreMouseService.explainEvents(be)),j.element.classList.add("enable-mouse-events"),j._selectionService.disable()):(j._logService.debug("Unbinding from mouse events."),j.element.classList.remove("enable-mouse-events"),j._selectionService.enable()),8&be?_e.mousemove||(ae.addEventListener("mousemove",He),_e.mousemove=He):(ae.removeEventListener("mousemove",_e.mousemove),_e.mousemove=null),16&be?_e.wheel||(ae.addEventListener("wheel",Be,{passive:!1}),_e.wheel=Be):(ae.removeEventListener("wheel",_e.wheel),_e.wheel=null),2&be?_e.mouseup||(_e.mouseup=Le):(j._document.removeEventListener("mouseup",_e.mouseup),_e.mouseup=null),4&be?_e.mousedrag||(_e.mousedrag=Ee):(j._document.removeEventListener("mousemove",_e.mousedrag),_e.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,o.addDisposableDomListener)(ae,"mousedown",function(be){if(be.preventDefault(),j.focus(),j.coreMouseService.areMouseEventsActive&&!j._selectionService.shouldForceSelection(be))return Z(be),_e.mouseup&&j._document.addEventListener("mouseup",_e.mouseup),_e.mousedrag&&j._document.addEventListener("mousemove",_e.mousedrag),j.cancel(be)})),this.register((0,o.addDisposableDomListener)(ae,"wheel",function(be){if(!_e.wheel){if(!j.buffer.hasScrollback){var ze=j.viewport.getLinesScrolled(be);if(ze===0)return;for(var vt=S.C0.ESC+(j.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(be.deltaY<0?"A":"B"),At="",Yt=0;Yt<Math.abs(ze);Yt++)At+=vt;return j.coreService.triggerDataEvent(At,!0),j.cancel(be,!0)}return j.viewport.onWheel(be)?j.cancel(be):void 0}},{passive:!1})),this.register((0,o.addDisposableDomListener)(ae,"touchstart",function(be){if(!j.coreMouseService.areMouseEventsActive)return j.viewport.onTouchStart(be),j.cancel(be)},{passive:!0})),this.register((0,o.addDisposableDomListener)(ae,"touchmove",function(be){if(!j.coreMouseService.areMouseEventsActive)return j.viewport.onTouchMove(be)?void 0:j.cancel(be)},{passive:!1}))},B.prototype.refresh=function(j,q){var ae;(ae=this._renderService)===null||ae===void 0||ae.refreshRows(j,q)},B.prototype._queueLinkification=function(j,q){var ae;(ae=this.linkifier)===null||ae===void 0||ae.linkifyRows(j,q)},B.prototype.updateCursorStyle=function(j){var q;((q=this._selectionService)===null||q===void 0?void 0:q.shouldColumnSelect(j))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},B.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},B.prototype.scrollLines=function(j,q,ae){ae===void 0&&(ae=0),he.prototype.scrollLines.call(this,j,q,ae),this.refresh(0,this.rows-1)},B.prototype.paste=function(j){(0,b.paste)(j,this.textarea,this.coreService)},B.prototype.attachCustomKeyEventHandler=function(j){this._customKeyEventHandler=j},B.prototype.registerLinkMatcher=function(j,q,ae){var Z=this.linkifier.registerLinkMatcher(j,q,ae);return this.refresh(0,this.rows-1),Z},B.prototype.deregisterLinkMatcher=function(j){this.linkifier.deregisterLinkMatcher(j)&&this.refresh(0,this.rows-1)},B.prototype.registerLinkProvider=function(j){return this.linkifier2.registerLinkProvider(j)},B.prototype.registerCharacterJoiner=function(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var q=this._characterJoinerService.register(j);return this.refresh(0,this.rows-1),q},B.prototype.deregisterCharacterJoiner=function(j){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(j)&&this.refresh(0,this.rows-1)},Object.defineProperty(B.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),B.prototype.addMarker=function(j){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+j)},B.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},B.prototype.select=function(j,q,ae){this._selectionService.setSelection(j,q,ae)},B.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},B.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},B.prototype.clearSelection=function(){var j;(j=this._selectionService)===null||j===void 0||j.clearSelection()},B.prototype.selectAll=function(){var j;(j=this._selectionService)===null||j===void 0||j.selectAll()},B.prototype.selectLines=function(j,q){var ae;(ae=this._selectionService)===null||ae===void 0||ae.selectLines(j,q)},B.prototype._keyDown=function(j){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(!this._compositionHelper.keydown(j))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;j.key!=="Dead"&&j.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var q=(0,H.evaluateKeyboardEvent)(j,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(j),q.type===3||q.type===2){var ae=this.rows-1;return this.scrollLines(q.type===2?-ae:ae),this.cancel(j,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,j)||(q.cancel&&this.cancel(j,!0),!q.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==S.C0.ETX&&q.key!==S.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(j,!0))))},B.prototype._isThirdLevelShift=function(j,q){var ae=j.isMac&&!this.options.macOptionIsMeta&&q.altKey&&!q.ctrlKey&&!q.metaKey||j.isWindows&&q.altKey&&q.ctrlKey&&!q.metaKey||j.isWindows&&q.getModifierState("AltGraph");return q.type==="keypress"?ae:ae&&(!q.keyCode||q.keyCode>47)},B.prototype._keyUp=function(j){this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1||(function(q){return q.keyCode===16||q.keyCode===17||q.keyCode===18}(j)||this.focus(),this.updateCursorStyle(j),this._keyPressHandled=!1)},B.prototype._keyPress=function(j){var q;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(j)===!1)return!1;if(this.cancel(j),j.charCode)q=j.charCode;else if(j.which===null||j.which===void 0)q=j.keyCode;else{if(j.which===0||j.charCode===0)return!1;q=j.which}return!(!q||(j.altKey||j.ctrlKey||j.metaKey)&&!this._isThirdLevelShift(this.browser,j)||(q=String.fromCharCode(q),this._onKey.fire({key:q,domEvent:j}),this._showCursor(),this.coreService.triggerDataEvent(q,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},B.prototype._inputEvent=function(j){if(j.data&&j.inputType==="insertText"&&!j.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var q=j.data;return this.coreService.triggerDataEvent(q,!0),this.cancel(j),!0}return!1},B.prototype.bell=function(){var j;this._soundBell()&&((j=this._soundService)===null||j===void 0||j.playBellSound()),this._onBell.fire()},B.prototype.resize=function(j,q){j!==this.cols||q!==this.rows?he.prototype.resize.call(this,j,q):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},B.prototype._afterResize=function(j,q){var ae,Z;(ae=this._charSizeService)===null||ae===void 0||ae.measure(),(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea(!0)},B.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine(A.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},B.prototype.reset=function(){var j,q;this.options.rows=this.rows,this.options.cols=this.cols;var ae=this._customKeyEventHandler;this._setup(),he.prototype.reset.call(this),(j=this._selectionService)===null||j===void 0||j.reset(),this._customKeyEventHandler=ae,this.refresh(0,this.rows-1),(q=this.viewport)===null||q===void 0||q.syncScrollArea()},B.prototype.clearTextureAtlas=function(){var j;(j=this._renderService)===null||j===void 0||j.clearTextureAtlas()},B.prototype._reportFocus=function(){var j;((j=this.element)===null||j===void 0?void 0:j.classList.contains("focus"))?this.coreService.triggerDataEvent(S.C0.ESC+"[I"):this.coreService.triggerDataEvent(S.C0.ESC+"[O")},B.prototype._reportWindowsOptions=function(j){if(this._renderService)switch(j){case u.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var q=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),ae=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(S.C0.ESC+"[4;"+ae+";"+q+"t");break;case u.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Z=this._renderService.dimensions.scaledCellWidth.toFixed(0),_e=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(S.C0.ESC+"[6;"+_e+";"+Z+"t")}},B.prototype.cancel=function(j,q){if(this.options.cancelEvents||q)return j.preventDefault(),j.stopPropagation(),!1},B.prototype._visualBell=function(){return!1},B.prototype._soundBell=function(){return this.options.bellStyle==="sound"},B}(Y.CoreTerminal);h.Terminal=we},9924:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TimeBasedDebouncer=void 0;var L=function(){function p(g,C){C===void 0&&(C=1e3),this._renderCallback=g,this._debounceThresholdMS=C,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return p.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},p.prototype.refresh=function(g,C,y){var b=this;this._rowCount=y,g=g!==void 0?g:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,g):g,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C;var S=Date.now();if(S-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=S,this._innerRefresh();else if(!this._additionalRefreshRequested){var u=S-this._lastRefreshMs,f=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){b._lastRefreshMs=Date.now(),b._innerRefresh(),b._additionalRefreshRequested=!1,b._refreshTimeoutID=void 0},f)}},p.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var g=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(g,C)}},p}();h.TimeBasedDebouncer=L},1680:function(X,h,L){var p,g=this&&this.__extends||(p=function(l,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},p(l,s)},function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=l}p(l,s),l.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),C=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},y=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Viewport=void 0;var b=L(844),S=L(3656),u=L(4725),f=L(2585),v=function(l){function s(o,a,d,m,k,T,H,I){var A=l.call(this)||this;return A._scrollLines=o,A._viewportElement=a,A._scrollArea=d,A._element=m,A._bufferService=k,A._optionsService=T,A._charSizeService=H,A._renderService=I,A.scrollBarWidth=0,A._currentRowHeight=0,A._currentScaledCellHeight=0,A._lastRecordedBufferLength=0,A._lastRecordedViewportHeight=0,A._lastRecordedBufferHeight=0,A._lastTouchY=0,A._lastScrollTop=0,A._lastHadScrollBar=!1,A._wheelPartialScroll=0,A._refreshAnimationFrame=null,A._ignoreNextScrollEvent=!1,A.scrollBarWidth=A._viewportElement.offsetWidth-A._scrollArea.offsetWidth||15,A._lastHadScrollBar=!0,A.register((0,S.addDisposableDomListener)(A._viewportElement,"scroll",A._onScroll.bind(A))),A._activeBuffer=A._bufferService.buffer,A.register(A._bufferService.buffers.onBufferActivate(function(x){return A._activeBuffer=x.activeBuffer})),A._renderDimensions=A._renderService.dimensions,A.register(A._renderService.onDimensionsChange(function(x){return A._renderDimensions=x})),setTimeout(function(){return A.syncScrollArea()},0),A}return g(s,l),s.prototype.onThemeChange=function(o){this._viewportElement.style.backgroundColor=o.background.css},s.prototype._refresh=function(o){var a=this;if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return a._innerRefresh()}))},s.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var d=window.getComputedStyle(this._element),m=parseInt(d.paddingLeft)+parseInt(d.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?m:0)).toString()+"px",this._refreshAnimationFrame=null},s.prototype.syncScrollArea=function(o){if(o===void 0&&(o=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(o):this._refresh(o)},s.prototype._onScroll=function(o){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(a)}},s.prototype._bubbleScroll=function(o,a){var d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&d<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)},s.prototype.onWheel=function(o){var a=this._getPixelsScrolled(o);return a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(o,a))},s.prototype._getPixelsScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var a=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a},s.prototype.getLinesScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var a=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a},s.prototype._applyScrollModifier=function(o,a){var d=this._optionsService.options.fastScrollModifier;return d==="alt"&&a.altKey||d==="ctrl"&&a.ctrlKey||d==="shift"&&a.shiftKey?o*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:o*this._optionsService.options.scrollSensitivity},s.prototype.onTouchStart=function(o){this._lastTouchY=o.touches[0].pageY},s.prototype.onTouchMove=function(o){var a=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(o,a))},C([y(4,f.IBufferService),y(5,f.IOptionsService),y(6,u.ICharSizeService),y(7,u.IRenderService)],s)}(b.Disposable);h.Viewport=v},2950:function(X,h,L){var p=this&&this.__decorate||function(S,u,f,v){var l,s=arguments.length,o=s<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(S,u,f,v);else for(var a=S.length-1;a>=0;a--)(l=S[a])&&(o=(s<3?l(o):s>3?l(u,f,o):l(u,f))||o);return s>3&&o&&Object.defineProperty(u,f,o),o},g=this&&this.__param||function(S,u){return function(f,v){u(f,v,S)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CompositionHelper=void 0;var C=L(4725),y=L(2585),b=function(){function S(u,f,v,l,s,o){this._textarea=u,this._compositionView=f,this._bufferService=v,this._optionsService=l,this._coreService=s,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(S.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),S.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},S.prototype.compositionupdate=function(u){var f=this;this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(function(){f._compositionPosition.end=f._textarea.value.length},0)},S.prototype.compositionend=function(){this._finalizeComposition(!0)},S.prototype.keydown=function(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},S.prototype._finalizeComposition=function(u){var f=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){var v={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(f._isSendingComposition){f._isSendingComposition=!1;var s;v.start+=f._dataAlreadySent.length,(s=f._isComposing?f._textarea.value.substring(v.start,v.end):f._textarea.value.substring(v.start)).length>0&&f._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;var l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}},S.prototype._handleAnyTextareaChanges=function(){var u=this,f=this._textarea.value;setTimeout(function(){if(!u._isComposing){var v=u._textarea.value.replace(f,"");v.length>0&&(u._dataAlreadySent=v,u._coreService.triggerDataEvent(v,!0))}},0)},S.prototype.updateCompositionElements=function(u){var f=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.actualCellHeight,s=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=v*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var a=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}u||setTimeout(function(){return f.updateCompositionElements(!0)},0)}},p([g(2,y.IBufferService),g(3,y.IOptionsService),g(4,y.ICoreService),g(5,C.IRenderService)],S)}();h.CompositionHelper=b},9806:(X,h)=>{function L(p,g){var C=g.getBoundingClientRect();return[p.clientX-C.left,p.clientY-C.top]}Object.defineProperty(h,"__esModule",{value:!0}),h.getRawByteCoords=h.getCoords=h.getCoordsRelativeToElement=void 0,h.getCoordsRelativeToElement=L,h.getCoords=function(p,g,C,y,b,S,u,f){if(b){var v=L(p,g);if(v)return v[0]=Math.ceil((v[0]+(f?S/2:0))/S),v[1]=Math.ceil(v[1]/u),v[0]=Math.min(Math.max(v[0],1),C+(f?1:0)),v[1]=Math.min(Math.max(v[1],1),y),v}},h.getRawByteCoords=function(p){if(p)return{x:p[0]+32,y:p[1]+32}}},9504:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.moveToCellSequence=void 0;var p=L(2584);function g(f,v,l,s){var o=f-C(l,f),a=v-C(l,v),d=Math.abs(o-a)-function(m,k,T){for(var H=0,I=m-C(T,m),A=k-C(T,k),x=0;x<Math.abs(I-A);x++){var O=y(m,k)==="A"?-1:1,E=T.buffer.lines.get(I+O*x);(E==null?void 0:E.isWrapped)&&H++}return H}(f,v,l);return u(d,S(y(f,v),s))}function C(f,v){for(var l=0,s=f.buffer.lines.get(v),o=s==null?void 0:s.isWrapped;o&&v>=0&&v<f.rows;)l++,o=(s=f.buffer.lines.get(--v))==null?void 0:s.isWrapped;return l}function y(f,v){return f>v?"A":"B"}function b(f,v,l,s,o,a){for(var d=f,m=v,k="";d!==l||m!==s;)d+=o?1:-1,o&&d>a.cols-1?(k+=a.buffer.translateBufferLineToString(m,!1,f,d),d=0,f=0,m++):!o&&d<0&&(k+=a.buffer.translateBufferLineToString(m,!1,0,f+1),f=d=a.cols-1,m--);return k+a.buffer.translateBufferLineToString(m,!1,f,d)}function S(f,v){var l=v?"O":"[";return p.C0.ESC+l+f}function u(f,v){f=Math.floor(f);for(var l="",s=0;s<f;s++)l+=v;return l}h.moveToCellSequence=function(f,v,l,s){var o,a=l.buffer.x,d=l.buffer.y;if(!l.buffer.hasScrollback)return function(k,T,H,I,A,x){return g(T,I,A,x).length===0?"":u(b(k,T,k,T-C(A,T),!1,A).length,S("D",x))}(a,d,0,v,l,s)+g(d,v,l,s)+function(k,T,H,I,A,x){var O;O=g(T,I,A,x).length>0?I-C(A,I):T;var E=I,V=function(U,F,W,Y,J,fe){var le;return le=g(W,Y,J,fe).length>0?Y-C(J,Y):F,U<W&&le<=Y||U>=W&&le<Y?"C":"D"}(k,T,H,I,A,x);return u(b(k,O,H,E,V==="C",A).length,S(V,x))}(a,d,f,v,l,s);if(d===v)return o=a>f?"D":"C",u(Math.abs(a-f),S(o,s));o=d>v?"D":"C";var m=Math.abs(d-v);return u(function(k,T){return T.cols-k}(d>v?f:a,l)+(m-1)*l.cols+1+((d>v?a:f)-1),S(o,s))}},1546:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseRenderLayer=void 0;var p=L(643),g=L(8803),C=L(1420),y=L(3734),b=L(1752),S=L(4774),u=L(9631),f=L(8978),v=function(){function l(s,o,a,d,m,k,T,H){this._container=s,this._alpha=d,this._colors=m,this._rendererId=k,this._bufferService=T,this._optionsService=H,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+o+"-layer"),this._canvas.style.zIndex=a.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return l.prototype.dispose=function(){var s;(0,u.removeElementFromParent)(this._canvas),(s=this._charAtlas)===null||s===void 0||s.dispose()},l.prototype._initCanvas=function(){this._ctx=(0,b.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},l.prototype.onOptionsChanged=function(){},l.prototype.onBlur=function(){},l.prototype.onFocus=function(){},l.prototype.onCursorMove=function(){},l.prototype.onGridChanged=function(s,o){},l.prototype.onSelectionChanged=function(s,o,a){a===void 0&&(a=!1)},l.prototype.setColors=function(s){this._refreshCharAtlas(s)},l.prototype._setTransparency=function(s){if(s!==this._alpha){var o=this._canvas;this._alpha=s,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,o),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},l.prototype._refreshCharAtlas=function(s){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,C.acquireCharAtlas)(this._optionsService.options,this._rendererId,s,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},l.prototype.resize=function(s){this._scaledCellWidth=s.scaledCellWidth,this._scaledCellHeight=s.scaledCellHeight,this._scaledCharWidth=s.scaledCharWidth,this._scaledCharHeight=s.scaledCharHeight,this._scaledCharLeft=s.scaledCharLeft,this._scaledCharTop=s.scaledCharTop,this._canvas.width=s.scaledCanvasWidth,this._canvas.height=s.scaledCanvasHeight,this._canvas.style.width=s.canvasWidth+"px",this._canvas.style.height=s.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},l.prototype.clearTextureAtlas=function(){var s;(s=this._charAtlas)===null||s===void 0||s.clear()},l.prototype._fillCells=function(s,o,a,d){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,a*this._scaledCellWidth,d*this._scaledCellHeight)},l.prototype._fillMiddleLineAtCells=function(s,o,a){a===void 0&&(a=1);var d=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-d-window.devicePixelRatio,a*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillBottomLineAtCells=function(s,o,a){a===void 0&&(a=1),this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-window.devicePixelRatio-1,a*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillLeftLineAtCell=function(s,o,a){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,window.devicePixelRatio*a,this._scaledCellHeight)},l.prototype._strokeRectAtCell=function(s,o,a,d){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(s*this._scaledCellWidth+window.devicePixelRatio/2,o*this._scaledCellHeight+window.devicePixelRatio/2,a*this._scaledCellWidth-window.devicePixelRatio,d*this._scaledCellHeight-window.devicePixelRatio)},l.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},l.prototype._clearCells=function(s,o,a,d){this._alpha?this._ctx.clearRect(s*this._scaledCellWidth,o*this._scaledCellHeight,a*this._scaledCellWidth,d*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,a*this._scaledCellWidth,d*this._scaledCellHeight))},l.prototype._fillCharTrueColor=function(s,o,a){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=g.TEXT_BASELINE,this._clipRow(a);var d=!1;this._optionsService.options.customGlyphs!==!1&&(d=(0,f.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,a*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),d||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,a*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},l.prototype._drawChars=function(s,o,a){var d,m,k,T=this._getContrastColor(s);T||s.isFgRGB()||s.isBgRGB()?this._drawUncachedChars(s,o,a,T):(s.isInverse()?(m=s.isBgDefault()?g.INVERTED_DEFAULT_COLOR:s.getBgColor(),k=s.isFgDefault()?g.INVERTED_DEFAULT_COLOR:s.getFgColor()):(k=s.isBgDefault()?p.DEFAULT_COLOR:s.getBgColor(),m=s.isFgDefault()?p.DEFAULT_COLOR:s.getFgColor()),m+=this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&m<8?8:0,this._currentGlyphIdentifier.chars=s.getChars()||p.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=s.getCode()||p.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=k,this._currentGlyphIdentifier.fg=m,this._currentGlyphIdentifier.bold=!!s.isBold(),this._currentGlyphIdentifier.dim=!!s.isDim(),this._currentGlyphIdentifier.italic=!!s.isItalic(),((d=this._charAtlas)===null||d===void 0?void 0:d.draw(this._ctx,this._currentGlyphIdentifier,o*this._scaledCellWidth+this._scaledCharLeft,a*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(s,o,a))},l.prototype._drawUncachedChars=function(s,o,a,d){if(this._ctx.save(),this._ctx.font=this._getFont(!!s.isBold(),!!s.isItalic()),this._ctx.textBaseline=g.TEXT_BASELINE,s.isInverse())if(d)this._ctx.fillStyle=d.css;else if(s.isBgDefault())this._ctx.fillStyle=S.color.opaque(this._colors.background).css;else if(s.isBgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(s.getBgColor()).join(",")+")";else{var m=s.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&m<8&&(m+=8),this._ctx.fillStyle=this._colors.ansi[m].css}else if(d)this._ctx.fillStyle=d.css;else if(s.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(s.isFgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(s.getFgColor()).join(",")+")";else{var k=s.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&k<8&&(k+=8),this._ctx.fillStyle=this._colors.ansi[k].css}this._clipRow(a),s.isDim()&&(this._ctx.globalAlpha=g.DIM_OPACITY);var T=!1;this._optionsService.options.customGlyphs!==!1&&(T=(0,f.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,a*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),T||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,a*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},l.prototype._clipRow=function(s){this._ctx.beginPath(),this._ctx.rect(0,s*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},l.prototype._getFont=function(s,o){return(o?"italic":"")+" "+(s?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},l.prototype._getContrastColor=function(s){if(this._optionsService.options.minimumContrastRatio!==1){var o=this._colors.contrastCache.getColor(s.bg,s.fg);if(o!==void 0)return o||void 0;var a=s.getFgColor(),d=s.getFgColorMode(),m=s.getBgColor(),k=s.getBgColorMode(),T=!!s.isInverse(),H=!!s.isInverse();if(T){var I=a;a=m,m=I;var A=d;d=k,k=A}var x=this._resolveBackgroundRgba(k,m,T),O=this._resolveForegroundRgba(d,a,T,H),E=S.rgba.ensureContrastRatio(x,O,this._optionsService.options.minimumContrastRatio);if(E){var V={css:S.channels.toCss(E>>24&255,E>>16&255,E>>8&255),rgba:E};return this._colors.contrastCache.setColor(s.bg,s.fg,V),V}this._colors.contrastCache.setColor(s.bg,s.fg,null)}},l.prototype._resolveBackgroundRgba=function(s,o,a){switch(s){case 16777216:case 33554432:return this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return a?this._colors.foreground.rgba:this._colors.background.rgba}},l.prototype._resolveForegroundRgba=function(s,o,a,d){switch(s){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&d&&o<8&&(o+=8),this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return a?this._colors.background.rgba:this._colors.foreground.rgba}},l}();h.BaseRenderLayer=v},2512:function(X,h,L){var p,g=this&&this.__extends||(p=function(o,a){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(d[k]=m[k])},p(o,a)},function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function d(){this.constructor=o}p(o,a),o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}),C=this&&this.__decorate||function(o,a,d,m){var k,T=arguments.length,H=T<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(o,a,d,m);else for(var I=o.length-1;I>=0;I--)(k=o[I])&&(H=(T<3?k(H):T>3?k(a,d,H):k(a,d))||H);return T>3&&H&&Object.defineProperty(a,d,H),H},y=this&&this.__param||function(o,a){return function(d,m){a(d,m,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CursorRenderLayer=void 0;var b=L(1546),S=L(511),u=L(2585),f=L(4725),v=600,l=function(o){function a(d,m,k,T,H,I,A,x,O){var E=o.call(this,d,"cursor",m,!0,k,T,I,A)||this;return E._onRequestRedraw=H,E._coreService=x,E._coreBrowserService=O,E._cell=new S.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return g(a,o),a.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),o.prototype.dispose.call(this)},a.prototype.resize=function(d){o.prototype.resize.call(this,d),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},a.prototype.reset=function(){var d;this._clearCursor(),(d=this._cursorBlinkStateManager)===null||d===void 0||d.restartBlinkAnimation(),this.onOptionsChanged()},a.prototype.onBlur=function(){var d;(d=this._cursorBlinkStateManager)===null||d===void 0||d.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onFocus=function(){var d;(d=this._cursorBlinkStateManager)===null||d===void 0||d.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onOptionsChanged=function(){var d,m=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(this._coreBrowserService.isFocused,function(){m._render(!0)})):((d=this._cursorBlinkStateManager)===null||d===void 0||d.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},a.prototype.onCursorMove=function(){var d;(d=this._cursorBlinkStateManager)===null||d===void 0||d.restartBlinkAnimation()},a.prototype.onGridChanged=function(d,m){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},a.prototype._render=function(d){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var m=this._bufferService.buffer.ybase+this._bufferService.buffer.y,k=m-this._bufferService.buffer.ydisp;if(k<0||k>=this._bufferService.rows)this._clearCursor();else{var T=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(m).loadCell(T,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var H=this._optionsService.options.cursorStyle;return H&&H!=="block"?this._cursorRenderers[H](T,k,this._cell):this._renderBlurCursor(T,k,this._cell),this._ctx.restore(),this._state.x=T,this._state.y=k,this._state.isFocused=!1,this._state.style=H,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===T&&this._state.y===k&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](T,k,this._cell),this._ctx.restore(),this._state.x=T,this._state.y=k,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},a.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},a.prototype._renderBarCursor=function(d,m,k){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(d,m,this._optionsService.options.cursorWidth),this._ctx.restore()},a.prototype._renderBlockCursor=function(d,m,k){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(d,m,k.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(k,d,m),this._ctx.restore()},a.prototype._renderUnderlineCursor=function(d,m,k){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(d,m),this._ctx.restore()},a.prototype._renderBlurCursor=function(d,m,k){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(d,m,k.getWidth(),1),this._ctx.restore()},C([y(5,u.IBufferService),y(6,u.IOptionsService),y(7,u.ICoreService),y(8,f.ICoreBrowserService)],a)}(b.BaseRenderLayer);h.CursorRenderLayer=l;var s=function(){function o(a,d){this._renderCallback=d,this.isCursorVisible=!0,a&&this._restartInterval()}return Object.defineProperty(o.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),o.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.restartBlinkAnimation=function(){var a=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0})))},o.prototype._restartInterval=function(a){var d=this;a===void 0&&(a=v),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(d._animationTimeRestarted){var m=v-(Date.now()-d._animationTimeRestarted);if(d._animationTimeRestarted=void 0,m>0)return void d._restartInterval(m)}d.isCursorVisible=!1,d._animationFrame=window.requestAnimationFrame(function(){d._renderCallback(),d._animationFrame=void 0}),d._blinkInterval=window.setInterval(function(){if(d._animationTimeRestarted){var k=v-(Date.now()-d._animationTimeRestarted);return d._animationTimeRestarted=void 0,void d._restartInterval(k)}d.isCursorVisible=!d.isCursorVisible,d._animationFrame=window.requestAnimationFrame(function(){d._renderCallback(),d._animationFrame=void 0})},v)},a)},o.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},o}()},8978:(X,h,L)=>{var p,g,C,y,b,S,u,f,v,l,s,o,a,d,m,k,T,H,I,A,x,O,E,V,U,F,W,Y,J,fe,le,Ce,we,he,B,j,q,ae,Z,_e,Le,Be,Ee,He,be,ze,vt,At,Yt,_r,$r,hi,Br,Jr,Ut,di,_t,Ne,sr,ut,Zt,ke,ar,tt,Te,je,lr,Ge,Rt,Ye,cr,ft,tr,Vt,Pr,gr,rt,Ir,yr,Dt,mr,Hr,Fr,br,$t,gt,ht,Wr,zt,ur,fr,xt,kt,dt,Sr,Cr,Fe,Se,Ot,wr,nt,Oe,Bt,rr,Lr,ce,D,G,oe,ue,Ae,De,ge,$e,yt,xr,qt,Di,Oi,Nr,pi,Bi,vi,Pi,Ii,Hi,Fi,an;Object.defineProperty(h,"__esModule",{value:!0}),h.tryDrawCustomChar=h.boxDrawingDefinitions=h.blockElementDefinitions=void 0;var Pn=L(1752);h.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var In={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};h.boxDrawingDefinitions={"\u2500":(p={},p[1]="M0,.5 L1,.5",p),"\u2501":(g={},g[3]="M0,.5 L1,.5",g),"\u2502":(C={},C[1]="M.5,0 L.5,1",C),"\u2503":(y={},y[3]="M.5,0 L.5,1",y),"\u250C":(b={},b[1]="M0.5,1 L.5,.5 L1,.5",b),"\u250F":(S={},S[3]="M0.5,1 L.5,.5 L1,.5",S),"\u2510":(u={},u[1]="M0,.5 L.5,.5 L.5,1",u),"\u2513":(f={},f[3]="M0,.5 L.5,.5 L.5,1",f),"\u2514":(v={},v[1]="M.5,0 L.5,.5 L1,.5",v),"\u2517":(l={},l[3]="M.5,0 L.5,.5 L1,.5",l),"\u2518":(s={},s[1]="M.5,0 L.5,.5 L0,.5",s),"\u251B":(o={},o[3]="M.5,0 L.5,.5 L0,.5",o),"\u251C":(a={},a[1]="M.5,0 L.5,1 M.5,.5 L1,.5",a),"\u2523":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L1,.5",d),"\u2524":(m={},m[1]="M.5,0 L.5,1 M.5,.5 L0,.5",m),"\u252B":(k={},k[3]="M.5,0 L.5,1 M.5,.5 L0,.5",k),"\u252C":(T={},T[1]="M0,.5 L1,.5 M.5,.5 L.5,1",T),"\u2533":(H={},H[3]="M0,.5 L1,.5 M.5,.5 L.5,1",H),"\u2534":(I={},I[1]="M0,.5 L1,.5 M.5,.5 L.5,0",I),"\u253B":(A={},A[3]="M0,.5 L1,.5 M.5,.5 L.5,0",A),"\u253C":(x={},x[1]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u254B":(O={},O[3]="M0,.5 L1,.5 M.5,0 L.5,1",O),"\u2574":(E={},E[1]="M.5,.5 L0,.5",E),"\u2578":(V={},V[3]="M.5,.5 L0,.5",V),"\u2575":(U={},U[1]="M.5,.5 L.5,0",U),"\u2579":(F={},F[3]="M.5,.5 L.5,0",F),"\u2576":(W={},W[1]="M.5,.5 L1,.5",W),"\u257A":(Y={},Y[3]="M.5,.5 L1,.5",Y),"\u2577":(J={},J[1]="M.5,.5 L.5,1",J),"\u257B":(fe={},fe[3]="M.5,.5 L.5,1",fe),"\u2550":(le={},le[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},le),"\u2551":(Ce={},Ce[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Ce),"\u2552":(we={},we[1]=function(ne,ie){return"M.5,1 L.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},we),"\u2553":(he={},he[1]=function(ne,ie){return"M"+(.5-ne)+",1 L"+(.5-ne)+",.5 L1,.5 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},he),"\u2554":(B={},B[1]=function(ne,ie){return"M1,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1"},B),"\u2555":(j={},j[1]=function(ne,ie){return"M0,"+(.5-ie)+" L.5,"+(.5-ie)+" L.5,1 M0,"+(.5+ie)+" L.5,"+(.5+ie)},j),"\u2556":(q={},q[1]=function(ne,ie){return"M"+(.5+ne)+",1 L"+(.5+ne)+",.5 L0,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1"},q),"\u2557":(ae={},ae[1]=function(ne,ie){return"M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M0,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",1"},ae),"\u2558":(Z={},Z[1]=function(ne,ie){return"M.5,0 L.5,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5-ie)+" L1,"+(.5-ie)},Z),"\u2559":(_e={},_e[1]=function(ne,ie){return"M1,.5 L"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},_e),"\u255A":(Le={},Le[1]=function(ne,ie){return"M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0 M1,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",0"},Le),"\u255B":(Be={},Be[1]=function(ne,ie){return"M0,"+(.5+ie)+" L.5,"+(.5+ie)+" L.5,0 M0,"+(.5-ie)+" L.5,"+(.5-ie)},Be),"\u255C":(Ee={},Ee[1]=function(ne,ie){return"M0,.5 L"+(.5+ne)+",.5 L"+(.5+ne)+",0 M"+(.5-ne)+",.5 L"+(.5-ne)+",0"},Ee),"\u255D":(He={},He[1]=function(ne,ie){return"M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M0,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",0"},He),"\u255E":(be={},be[1]=function(ne,ie){return"M.5,0 L.5,1 M.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},be),"\u255F":(ze={},ze[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1 M"+(.5+ne)+",.5 L1,.5"},ze),"\u2560":(vt={},vt[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},vt),"\u2561":(At={},At[1]=function(ne,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L.5,"+(.5-ie)+" M0,"+(.5+ie)+" L.5,"+(.5+ie)},At),"\u2562":(Yt={},Yt[1]=function(ne,ie){return"M0,.5 L"+(.5-ne)+",.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Yt),"\u2563":(_r={},_r[1]=function(ne,ie){return"M"+(.5+ne)+",0 L"+(.5+ne)+",1 M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0"},_r),"\u2564":($r={},$r[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5+ie)+" L.5,1"},$r),"\u2565":(hi={},hi[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},hi),"\u2566":(Br={},Br[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1"},Br),"\u2567":(Jr={},Jr[1]=function(ne,ie){return"M.5,0 L.5,"+(.5-ie)+" M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},Jr),"\u2568":(Ut={},Ut[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},Ut),"\u2569":(di={},di[1]=function(ne,ie){return"M0,"+(.5+ie)+" L1,"+(.5+ie)+" M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},di),"\u256A":(_t={},_t[1]=function(ne,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},_t),"\u256B":(Ne={},Ne[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Ne),"\u256C":(sr={},sr[1]=function(ne,ie){return"M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1 M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},sr),"\u2571":(ut={},ut[1]="M1,0 L0,1",ut),"\u2572":(Zt={},Zt[1]="M0,0 L1,1",Zt),"\u2573":(ke={},ke[1]="M1,0 L0,1 M0,0 L1,1",ke),"\u257C":(ar={},ar[1]="M.5,.5 L0,.5",ar[3]="M.5,.5 L1,.5",ar),"\u257D":(tt={},tt[1]="M.5,.5 L.5,0",tt[3]="M.5,.5 L.5,1",tt),"\u257E":(Te={},Te[1]="M.5,.5 L1,.5",Te[3]="M.5,.5 L0,.5",Te),"\u257F":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L.5,0",je),"\u250D":(lr={},lr[1]="M.5,.5 L.5,1",lr[3]="M.5,.5 L1,.5",lr),"\u250E":(Ge={},Ge[1]="M.5,.5 L1,.5",Ge[3]="M.5,.5 L.5,1",Ge),"\u2511":(Rt={},Rt[1]="M.5,.5 L.5,1",Rt[3]="M.5,.5 L0,.5",Rt),"\u2512":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2515":(cr={},cr[1]="M.5,.5 L.5,0",cr[3]="M.5,.5 L1,.5",cr),"\u2516":(ft={},ft[1]="M.5,.5 L1,.5",ft[3]="M.5,.5 L.5,0",ft),"\u2519":(tr={},tr[1]="M.5,.5 L.5,0",tr[3]="M.5,.5 L0,.5",tr),"\u251A":(Vt={},Vt[1]="M.5,.5 L0,.5",Vt[3]="M.5,.5 L.5,0",Vt),"\u251D":(Pr={},Pr[1]="M.5,0 L.5,1",Pr[3]="M.5,.5 L1,.5",Pr),"\u251E":(gr={},gr[1]="M0.5,1 L.5,.5 L1,.5",gr[3]="M.5,.5 L.5,0",gr),"\u251F":(rt={},rt[1]="M.5,0 L.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2520":(Ir={},Ir[1]="M.5,.5 L1,.5",Ir[3]="M.5,0 L.5,1",Ir),"\u2521":(yr={},yr[1]="M.5,.5 L.5,1",yr[3]="M.5,0 L.5,.5 L1,.5",yr),"\u2522":(Dt={},Dt[1]="M.5,.5 L.5,0",Dt[3]="M0.5,1 L.5,.5 L1,.5",Dt),"\u2525":(mr={},mr[1]="M.5,0 L.5,1",mr[3]="M.5,.5 L0,.5",mr),"\u2526":(Hr={},Hr[1]="M0,.5 L.5,.5 L.5,1",Hr[3]="M.5,.5 L.5,0",Hr),"\u2527":(Fr={},Fr[1]="M.5,0 L.5,.5 L0,.5",Fr[3]="M.5,.5 L.5,1",Fr),"\u2528":(br={},br[1]="M.5,.5 L0,.5",br[3]="M.5,0 L.5,1",br),"\u2529":($t={},$t[1]="M.5,.5 L.5,1",$t[3]="M.5,0 L.5,.5 L0,.5",$t),"\u252A":(gt={},gt[1]="M.5,.5 L.5,0",gt[3]="M0,.5 L.5,.5 L.5,1",gt),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(Wr={},Wr[1]="M0,.5 L.5,.5 L.5,1",Wr[3]="M.5,.5 L1,.5",Wr),"\u252F":(zt={},zt[1]="M.5,.5 L.5,1",zt[3]="M0,.5 L1,.5",zt),"\u2530":(ur={},ur[1]="M0,.5 L1,.5",ur[3]="M.5,.5 L.5,1",ur),"\u2531":(fr={},fr[1]="M.5,.5 L1,.5",fr[3]="M0,.5 L.5,.5 L.5,1",fr),"\u2532":(xt={},xt[1]="M.5,.5 L0,.5",xt[3]="M0.5,1 L.5,.5 L1,.5",xt),"\u2535":(kt={},kt[1]="M.5,0 L.5,.5 L1,.5",kt[3]="M.5,.5 L0,.5",kt),"\u2536":(dt={},dt[1]="M.5,0 L.5,.5 L0,.5",dt[3]="M.5,.5 L1,.5",dt),"\u2537":(Sr={},Sr[1]="M.5,.5 L.5,0",Sr[3]="M0,.5 L1,.5",Sr),"\u2538":(Cr={},Cr[1]="M0,.5 L1,.5",Cr[3]="M.5,.5 L.5,0",Cr),"\u2539":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,0 L.5,.5 L0,.5",Fe),"\u253A":(Se={},Se[1]="M.5,.5 L0,.5",Se[3]="M.5,0 L.5,.5 L1,.5",Se),"\u253D":(Ot={},Ot[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Ot[3]="M.5,.5 L0,.5",Ot),"\u253E":(wr={},wr[1]="M.5,0 L.5,1 M.5,.5 L0,.5",wr[3]="M.5,.5 L1,.5",wr),"\u253F":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M0,.5 L1,.5",nt),"\u2540":(Oe={},Oe[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Oe[3]="M.5,.5 L.5,0",Oe),"\u2541":(Bt={},Bt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Bt[3]="M.5,.5 L.5,1",Bt),"\u2542":(rr={},rr[1]="M0,.5 L1,.5",rr[3]="M.5,0 L.5,1",rr),"\u2543":(Lr={},Lr[1]="M0.5,1 L.5,.5 L1,.5",Lr[3]="M.5,0 L.5,.5 L0,.5",Lr),"\u2544":(ce={},ce[1]="M0,.5 L.5,.5 L.5,1",ce[3]="M.5,0 L.5,.5 L1,.5",ce),"\u2545":(D={},D[1]="M.5,0 L.5,.5 L1,.5",D[3]="M0,.5 L.5,.5 L.5,1",D),"\u2546":(G={},G[1]="M.5,0 L.5,.5 L0,.5",G[3]="M0.5,1 L.5,.5 L1,.5",G),"\u2547":(oe={},oe[1]="M.5,.5 L.5,1",oe[3]="M.5,.5 L.5,0 M0,.5 L1,.5",oe),"\u2548":(ue={},ue[1]="M.5,.5 L.5,0",ue[3]="M0,.5 L1,.5 M.5,.5 L.5,1",ue),"\u2549":(Ae={},Ae[1]="M.5,.5 L1,.5",Ae[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ae),"\u254A":(De={},De[1]="M.5,.5 L0,.5",De[3]="M.5,0 L.5,1 M.5,.5 L1,.5",De),"\u254C":(ge={},ge[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ge),"\u254D":($e={},$e[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",$e),"\u2504":(yt={},yt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",yt),"\u2505":(xr={},xr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",xr),"\u2508":(qt={},qt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",qt),"\u2509":(Di={},Di[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Di),"\u254E":(Oi={},Oi[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Oi),"\u254F":(Nr={},Nr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Nr),"\u2506":(pi={},pi[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",pi),"\u2507":(Bi={},Bi[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Bi),"\u250A":(vi={},vi[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vi),"\u250B":(Pi={},Pi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Pi),"\u256D":(Ii={},Ii[1]="C.5,1,.5,.5,1,.5",Ii),"\u256E":(Hi={},Hi[1]="C.5,1,.5,.5,0,.5",Hi),"\u256F":(Fi={},Fi[1]="C.5,0,.5,.5,0,.5",Fi),"\u2570":(an={},an[1]="C.5,0,.5,.5,1,.5",an)},h.tryDrawCustomChar=function(ne,ie,nr,_i,gi,Ze){var Jt=h.blockElementDefinitions[ie];if(Jt)return function(mt,Pt,kr,jr,Ur,zr){for(var bt=0;bt<Pt.length;bt++){var It=Pt[bt],Ke=Ur/8,Je=zr/8;mt.fillRect(kr+It.x*Ke,jr+It.y*Je,It.w*Ke,It.h*Je)}}(ne,Jt,nr,_i,gi,Ze),!0;var or=In[ie];if(or)return function(mt,Pt,kr,jr,Ur,zr){var bt,It=ir.get(Pt);It||(It=new Map,ir.set(Pt,It));var Ke=mt.fillStyle;if(typeof Ke!="string")throw new Error('Unexpected fillStyle type "'+Ke+'"');var Je=It.get(Ke);if(!Je){var Qt=Pt[0].length,qr=Pt.length,hr=document.createElement("canvas");hr.width=Qt,hr.height=qr;var yi=(0,Pn.throwIfFalsy)(hr.getContext("2d")),St=new ImageData(Qt,qr),Er=void 0,Ct=void 0,ei=void 0,mi=void 0;if(Ke.startsWith("#"))Er=parseInt(Ke.substr(1,2),16),Ct=parseInt(Ke.substr(3,2),16),ei=parseInt(Ke.substr(5,2),16),mi=Ke.length>7&&parseInt(Ke.substr(7,2),16)||1;else{if(!Ke.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ke+'" when drawing pattern glyph');Er=(bt=Ke.substring(5,Ke.length-1).split(",").map(function(_o){return parseFloat(_o)}))[0],Ct=bt[1],ei=bt[2],mi=bt[3]}for(var Gt=0;Gt<qr;Gt++)for(var Gr=0;Gr<Qt;Gr++)St.data[4*(Gt*Qt+Gr)]=Er,St.data[4*(Gt*Qt+Gr)+1]=Ct,St.data[4*(Gt*Qt+Gr)+2]=ei,St.data[4*(Gt*Qt+Gr)+3]=Pt[Gt][Gr]*(255*mi);yi.putImageData(St,0,0),Je=(0,Pn.throwIfFalsy)(mt.createPattern(hr,null)),It.set(Ke,Je)}mt.fillStyle=Je,mt.fillRect(kr,jr,Ur,zr)}(ne,or,nr,_i,gi,Ze),!0;var Qr=h.boxDrawingDefinitions[ie];return!!Qr&&(function(mt,Pt,kr,jr,Ur,zr){mt.strokeStyle=mt.fillStyle;for(var bt=0,It=Object.entries(Pt);bt<It.length;bt++){var Ke=It[bt],Je=Ke[0],Qt=Ke[1];mt.beginPath(),mt.lineWidth=window.devicePixelRatio*Number.parseInt(Je);for(var qr=0,hr=(typeof Qt=="function"?Qt(.15,.15/zr*Ur):Qt).split(" ");qr<hr.length;qr++){var yi=hr[qr],St=yi[0],Er=vo[St];if(Er){var Ct=yi.substring(1).split(",");Ct[0]&&Ct[1]&&Er(mt,Wi(Ct,Ur,zr,kr,jr))}else console.error('Could not find drawing instructions for "'+St+'"')}mt.stroke(),mt.closePath()}}(ne,Qr,nr,_i,gi,Ze),!0)};var ir=new Map;function Hn(ne,ie,nr){return nr===void 0&&(nr=0),Math.max(Math.min(ne,ie),nr)}var vo={C:function(ne,ie){return ne.bezierCurveTo(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5])},L:function(ne,ie){return ne.lineTo(ie[0],ie[1])},M:function(ne,ie){return ne.moveTo(ie[0],ie[1])}};function Wi(ne,ie,nr,_i,gi){var Ze=ne.map(function(Qr){return parseFloat(Qr)||parseInt(Qr)});if(Ze.length<2)throw new Error("Too few arguments for instruction");for(var Jt=0;Jt<Ze.length;Jt+=2)Ze[Jt]*=ie,Ze[Jt]!==0&&(Ze[Jt]=Hn(Math.round(Ze[Jt]+.5)-.5,ie,0)),Ze[Jt]+=_i;for(var or=1;or<Ze.length;or+=2)Ze[or]*=nr,Ze[or]!==0&&(Ze[or]=Hn(Math.round(Ze[or]+.5)-.5,nr,0)),Ze[or]+=gi;return Ze}},3700:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GridCache=void 0;var L=function(){function p(){this.cache=[]}return p.prototype.resize=function(g,C){for(var y=0;y<g;y++){this.cache.length<=y&&this.cache.push([]);for(var b=this.cache[y].length;b<C;b++)this.cache[y].push(void 0);this.cache[y].length=C}this.cache.length=g},p.prototype.clear=function(){for(var g=0;g<this.cache.length;g++)for(var C=0;C<this.cache[g].length;C++)this.cache[g][C]=void 0},p}();h.GridCache=L},5098:function(X,h,L){var p,g=this&&this.__extends||(p=function(l,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},p(l,s)},function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=l}p(l,s),l.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),C=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},y=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.LinkRenderLayer=void 0;var b=L(1546),S=L(8803),u=L(2040),f=L(2585),v=function(l){function s(o,a,d,m,k,T,H,I){var A=l.call(this,o,"link",a,!0,d,m,H,I)||this;return k.onShowLinkUnderline(function(x){return A._onShowLinkUnderline(x)}),k.onHideLinkUnderline(function(x){return A._onHideLinkUnderline(x)}),T.onShowLinkUnderline(function(x){return A._onShowLinkUnderline(x)}),T.onHideLinkUnderline(function(x){return A._onHideLinkUnderline(x)}),A}return g(s,l),s.prototype.resize=function(o){l.prototype.resize.call(this,o),this._state=void 0},s.prototype.reset=function(){this._clearCurrentLink()},s.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},s.prototype._onShowLinkUnderline=function(o){if(o.fg===S.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&(0,u.is256Color)(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var a=o.y1+1;a<o.y2;a++)this._fillBottomLineAtCells(0,a,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},s.prototype._onHideLinkUnderline=function(o){this._clearCurrentLink()},C([y(6,f.IBufferService),y(7,f.IOptionsService)],s)}(b.BaseRenderLayer);h.LinkRenderLayer=v},3525:function(X,h,L){var p,g=this&&this.__extends||(p=function(k,T){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,I){H.__proto__=I}||function(H,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(H[A]=I[A])},p(k,T)},function(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function H(){this.constructor=k}p(k,T),k.prototype=T===null?Object.create(T):(H.prototype=T.prototype,new H)}),C=this&&this.__decorate||function(k,T,H,I){var A,x=arguments.length,O=x<3?T:I===null?I=Object.getOwnPropertyDescriptor(T,H):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(k,T,H,I);else for(var E=k.length-1;E>=0;E--)(A=k[E])&&(O=(x<3?A(O):x>3?A(T,H,O):A(T,H))||O);return x>3&&O&&Object.defineProperty(T,H,O),O},y=this&&this.__param||function(k,T){return function(H,I){T(H,I,k)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Renderer=void 0;var b=L(9596),S=L(4149),u=L(2512),f=L(5098),v=L(844),l=L(4725),s=L(2585),o=L(1420),a=L(8460),d=1,m=function(k){function T(H,I,A,x,O,E,V,U){var F=k.call(this)||this;F._colors=H,F._screenElement=I,F._bufferService=E,F._charSizeService=V,F._optionsService=U,F._id=d++,F._onRequestRedraw=new a.EventEmitter;var W=F._optionsService.options.allowTransparency;return F._renderLayers=[O.createInstance(b.TextRenderLayer,F._screenElement,0,F._colors,W,F._id),O.createInstance(S.SelectionRenderLayer,F._screenElement,1,F._colors,F._id),O.createInstance(f.LinkRenderLayer,F._screenElement,2,F._colors,F._id,A,x),O.createInstance(u.CursorRenderLayer,F._screenElement,3,F._colors,F._id,F._onRequestRedraw)],F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._devicePixelRatio=window.devicePixelRatio,F._updateDimensions(),F.onOptionsChanged(),F}return g(T,k),Object.defineProperty(T.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),T.prototype.dispose=function(){for(var H=0,I=this._renderLayers;H<I.length;H++)I[H].dispose();k.prototype.dispose.call(this),(0,o.removeTerminalFromCache)(this._id)},T.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},T.prototype.setColors=function(H){this._colors=H;for(var I=0,A=this._renderLayers;I<A.length;I++){var x=A[I];x.setColors(this._colors),x.reset()}},T.prototype.onResize=function(H,I){this._updateDimensions();for(var A=0,x=this._renderLayers;A<x.length;A++)x[A].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},T.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},T.prototype.onBlur=function(){this._runOperation(function(H){return H.onBlur()})},T.prototype.onFocus=function(){this._runOperation(function(H){return H.onFocus()})},T.prototype.onSelectionChanged=function(H,I,A){A===void 0&&(A=!1),this._runOperation(function(x){return x.onSelectionChanged(H,I,A)})},T.prototype.onCursorMove=function(){this._runOperation(function(H){return H.onCursorMove()})},T.prototype.onOptionsChanged=function(){this._runOperation(function(H){return H.onOptionsChanged()})},T.prototype.clear=function(){this._runOperation(function(H){return H.reset()})},T.prototype._runOperation=function(H){for(var I=0,A=this._renderLayers;I<A.length;I++)H(A[I])},T.prototype.renderRows=function(H,I){for(var A=0,x=this._renderLayers;A<x.length;A++)x[A].onGridChanged(H,I)},T.prototype.clearTextureAtlas=function(){for(var H=0,I=this._renderLayers;H<I.length;H++)I[H].clearTextureAtlas()},T.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},C([y(4,s.IInstantiationService),y(5,s.IBufferService),y(6,l.ICharSizeService),y(7,s.IOptionsService)],T)}(v.Disposable);h.Renderer=m},1752:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.throwIfFalsy=void 0,h.throwIfFalsy=function(L){if(!L)throw new Error("value must not be falsy");return L}},4149:function(X,h,L){var p,g=this&&this.__extends||(p=function(f,v){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(l[o]=s[o])},p(f,v)},function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function l(){this.constructor=f}p(f,v),f.prototype=v===null?Object.create(v):(l.prototype=v.prototype,new l)}),C=this&&this.__decorate||function(f,v,l,s){var o,a=arguments.length,d=a<3?v:s===null?s=Object.getOwnPropertyDescriptor(v,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(f,v,l,s);else for(var m=f.length-1;m>=0;m--)(o=f[m])&&(d=(a<3?o(d):a>3?o(v,l,d):o(v,l))||d);return a>3&&d&&Object.defineProperty(v,l,d),d},y=this&&this.__param||function(f,v){return function(l,s){v(l,s,f)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionRenderLayer=void 0;var b=L(1546),S=L(2585),u=function(f){function v(l,s,o,a,d,m){var k=f.call(this,l,"selection",s,!0,o,a,d,m)||this;return k._clearState(),k}return g(v,f),v.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},v.prototype.resize=function(l){f.prototype.resize.call(this,l),this._clearState()},v.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},v.prototype.onSelectionChanged=function(l,s,o){if(this._didStateChange(l,s,o,this._bufferService.buffer.ydisp))if(this._clearAll(),l&&s){var a=l[1]-this._bufferService.buffer.ydisp,d=s[1]-this._bufferService.buffer.ydisp,m=Math.max(a,0),k=Math.min(d,this._bufferService.rows-1);if(m>=this._bufferService.rows||k<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,o){var T=l[0],H=s[0]-T,I=k-m+1;this._fillCells(T,m,H,I)}else{T=a===m?l[0]:0;var A=m===d?s[0]:this._bufferService.cols;this._fillCells(T,m,A-T,1);var x=Math.max(k-m-1,0);if(this._fillCells(0,m+1,this._bufferService.cols,x),m!==k){var O=d===k?s[0]:this._bufferService.cols;this._fillCells(0,k,O,1)}}this._state.start=[l[0],l[1]],this._state.end=[s[0],s[1]],this._state.columnSelectMode=o,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},v.prototype._didStateChange=function(l,s,o,a){return!this._areCoordinatesEqual(l,this._state.start)||!this._areCoordinatesEqual(s,this._state.end)||o!==this._state.columnSelectMode||a!==this._state.ydisp},v.prototype._areCoordinatesEqual=function(l,s){return!(!l||!s)&&l[0]===s[0]&&l[1]===s[1]},C([y(4,S.IBufferService),y(5,S.IOptionsService)],v)}(b.BaseRenderLayer);h.SelectionRenderLayer=u},9596:function(X,h,L){var p,g=this&&this.__extends||(p=function(d,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,T){k.__proto__=T}||function(k,T){for(var H in T)Object.prototype.hasOwnProperty.call(T,H)&&(k[H]=T[H])},p(d,m)},function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function k(){this.constructor=d}p(d,m),d.prototype=m===null?Object.create(m):(k.prototype=m.prototype,new k)}),C=this&&this.__decorate||function(d,m,k,T){var H,I=arguments.length,A=I<3?m:T===null?T=Object.getOwnPropertyDescriptor(m,k):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(d,m,k,T);else for(var x=d.length-1;x>=0;x--)(H=d[x])&&(A=(I<3?H(A):I>3?H(m,k,A):H(m,k))||A);return I>3&&A&&Object.defineProperty(m,k,A),A},y=this&&this.__param||function(d,m){return function(k,T){m(k,T,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.TextRenderLayer=void 0;var b=L(3700),S=L(1546),u=L(3734),f=L(643),v=L(511),l=L(2585),s=L(4725),o=L(4269),a=function(d){function m(k,T,H,I,A,x,O,E){var V=d.call(this,k,"text",T,I,H,A,x,O)||this;return V._characterJoinerService=E,V._characterWidth=0,V._characterFont="",V._characterOverlapCache={},V._workCell=new v.CellData,V._state=new b.GridCache,V}return g(m,d),m.prototype.resize=function(k){d.prototype.resize.call(this,k);var T=this._getFont(!1,!1);this._characterWidth===k.scaledCharWidth&&this._characterFont===T||(this._characterWidth=k.scaledCharWidth,this._characterFont=T,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},m.prototype.reset=function(){this._state.clear(),this._clearAll()},m.prototype._forEachCell=function(k,T,H){for(var I=k;I<=T;I++)for(var A=I+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.lines.get(A),O=this._characterJoinerService.getJoinedCharacters(A),E=0;E<this._bufferService.cols;E++){x.loadCell(E,this._workCell);var V=this._workCell,U=!1,F=E;if(V.getWidth()!==0){if(O.length>0&&E===O[0][0]){U=!0;var W=O.shift();V=new o.JoinedCellData(this._workCell,x.translateToString(!0,W[0],W[1]),W[1]-W[0]),F=W[1]-1}!U&&this._isOverlapping(V)&&F<x.length-1&&x.getCodePoint(F+1)===f.NULL_CELL_CODE&&(V.content&=-12582913,V.content|=2<<22),H(V,E,I),E=F}}},m.prototype._drawBackground=function(k,T){var H=this,I=this._ctx,A=this._bufferService.cols,x=0,O=0,E=null;I.save(),this._forEachCell(k,T,function(V,U,F){var W=null;V.isInverse()?W=V.isFgDefault()?H._colors.foreground.css:V.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(V.getFgColor()).join(",")+")":H._colors.ansi[V.getFgColor()].css:V.isBgRGB()?W="rgb("+u.AttributeData.toColorRGB(V.getBgColor()).join(",")+")":V.isBgPalette()&&(W=H._colors.ansi[V.getBgColor()].css),E===null&&(x=U,O=F),F!==O?(I.fillStyle=E||"",H._fillCells(x,O,A-x,1),x=U,O=F):E!==W&&(I.fillStyle=E||"",H._fillCells(x,O,U-x,1),x=U,O=F),E=W}),E!==null&&(I.fillStyle=E,this._fillCells(x,O,A-x,1)),I.restore()},m.prototype._drawForeground=function(k,T){var H=this;this._forEachCell(k,T,function(I,A,x){if(!I.isInvisible()&&(H._drawChars(I,A,x),I.isUnderline()||I.isStrikethrough())){if(H._ctx.save(),I.isInverse())if(I.isBgDefault())H._ctx.fillStyle=H._colors.background.css;else if(I.isBgRGB())H._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(I.getBgColor()).join(",")+")";else{var O=I.getBgColor();H._optionsService.options.drawBoldTextInBrightColors&&I.isBold()&&O<8&&(O+=8),H._ctx.fillStyle=H._colors.ansi[O].css}else if(I.isFgDefault())H._ctx.fillStyle=H._colors.foreground.css;else if(I.isFgRGB())H._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(I.getFgColor()).join(",")+")";else{var E=I.getFgColor();H._optionsService.options.drawBoldTextInBrightColors&&I.isBold()&&E<8&&(E+=8),H._ctx.fillStyle=H._colors.ansi[E].css}I.isStrikethrough()&&H._fillMiddleLineAtCells(A,x,I.getWidth()),I.isUnderline()&&H._fillBottomLineAtCells(A,x,I.getWidth()),H._ctx.restore()}})},m.prototype.onGridChanged=function(k,T){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,k,this._bufferService.cols,T-k+1),this._drawBackground(k,T),this._drawForeground(k,T))},m.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},m.prototype._isOverlapping=function(k){if(k.getWidth()!==1||k.getCode()<256)return!1;var T=k.getChars();if(this._characterOverlapCache.hasOwnProperty(T))return this._characterOverlapCache[T];this._ctx.save(),this._ctx.font=this._characterFont;var H=Math.floor(this._ctx.measureText(T).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[T]=H,H},C([y(5,l.IBufferService),y(6,l.IOptionsService),y(7,s.ICharacterJoinerService)],m)}(S.BaseRenderLayer);h.TextRenderLayer=a},9616:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseCharAtlas=void 0;var L=function(){function p(){this._didWarmUp=!1}return p.prototype.dispose=function(){},p.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},p.prototype._doWarmUp=function(){},p.prototype.clear=function(){},p.prototype.beginFrame=function(){},p}();h.BaseCharAtlas=L},1420:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeTerminalFromCache=h.acquireCharAtlas=void 0;var p=L(2040),g=L(1906),C=[];h.acquireCharAtlas=function(y,b,S,u,f){for(var v=(0,p.generateConfig)(u,f,y,S),l=0;l<C.length;l++){var s=(o=C[l]).ownedBy.indexOf(b);if(s>=0){if((0,p.configEquals)(o.config,v))return o.atlas;o.ownedBy.length===1?(o.atlas.dispose(),C.splice(l,1)):o.ownedBy.splice(s,1);break}}for(l=0;l<C.length;l++){var o=C[l];if((0,p.configEquals)(o.config,v))return o.ownedBy.push(b),o.atlas}var a={atlas:new g.DynamicCharAtlas(document,v),config:v,ownedBy:[b]};return C.push(a),a.atlas},h.removeTerminalFromCache=function(y){for(var b=0;b<C.length;b++){var S=C[b].ownedBy.indexOf(y);if(S!==-1){C[b].ownedBy.length===1?(C[b].atlas.dispose(),C.splice(b,1)):C[b].ownedBy.splice(S,1);break}}}},2040:function(X,h,L){var p=this&&this.__spreadArray||function(C,y,b){if(b||arguments.length===2)for(var S,u=0,f=y.length;u<f;u++)!S&&u in y||(S||(S=Array.prototype.slice.call(y,0,u)),S[u]=y[u]);return C.concat(S||Array.prototype.slice.call(y))};Object.defineProperty(h,"__esModule",{value:!0}),h.is256Color=h.configEquals=h.generateConfig=void 0;var g=L(643);h.generateConfig=function(C,y,b,S){var u={foreground:S.foreground,background:S.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:p([],S.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:C,scaledCharHeight:y,fontFamily:b.fontFamily,fontSize:b.fontSize,fontWeight:b.fontWeight,fontWeightBold:b.fontWeightBold,allowTransparency:b.allowTransparency,colors:u}},h.configEquals=function(C,y){for(var b=0;b<C.colors.ansi.length;b++)if(C.colors.ansi[b].rgba!==y.colors.ansi[b].rgba)return!1;return C.devicePixelRatio===y.devicePixelRatio&&C.fontFamily===y.fontFamily&&C.fontSize===y.fontSize&&C.fontWeight===y.fontWeight&&C.fontWeightBold===y.fontWeightBold&&C.allowTransparency===y.allowTransparency&&C.scaledCharWidth===y.scaledCharWidth&&C.scaledCharHeight===y.scaledCharHeight&&C.colors.foreground===y.colors.foreground&&C.colors.background===y.colors.background},h.is256Color=function(C){return C<g.DEFAULT_COLOR}},8803:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CHAR_ATLAS_CELL_SPACING=h.TEXT_BASELINE=h.DIM_OPACITY=h.INVERTED_DEFAULT_COLOR=void 0;var p=L(6114);h.INVERTED_DEFAULT_COLOR=257,h.DIM_OPACITY=.5,h.TEXT_BASELINE=p.isFirefox?"bottom":"ideographic",h.CHAR_ATLAS_CELL_SPACING=1},1906:function(X,h,L){var p,g=this&&this.__extends||(p=function(T,H){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(I[x]=A[x])},p(T,H)},function(T,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function I(){this.constructor=T}p(T,H),T.prototype=H===null?Object.create(H):(I.prototype=H.prototype,new I)});Object.defineProperty(h,"__esModule",{value:!0}),h.NoneCharAtlas=h.DynamicCharAtlas=h.getGlyphCacheKey=void 0;var C=L(8803),y=L(9616),b=L(5680),S=L(7001),u=L(6114),f=L(1752),v=L(4774),l=1024,s=1024,o={css:"rgba(0, 0, 0, 0)",rgba:0};function a(T){return T.code<<21|T.bg<<12|T.fg<<3|(T.bold?0:4)+(T.dim?0:2)+(T.italic?0:1)}h.getGlyphCacheKey=a;var d=function(T){function H(I,A){var x=T.call(this)||this;x._config=A,x._drawToCacheCount=0,x._glyphsWaitingOnBitmap=[],x._bitmapCommitTimeout=null,x._bitmap=null,x._cacheCanvas=I.createElement("canvas"),x._cacheCanvas.width=l,x._cacheCanvas.height=s,x._cacheCtx=(0,f.throwIfFalsy)(x._cacheCanvas.getContext("2d",{alpha:!0}));var O=I.createElement("canvas");O.width=x._config.scaledCharWidth,O.height=x._config.scaledCharHeight,x._tmpCtx=(0,f.throwIfFalsy)(O.getContext("2d",{alpha:x._config.allowTransparency})),x._width=Math.floor(l/x._config.scaledCharWidth),x._height=Math.floor(s/x._config.scaledCharHeight);var E=x._width*x._height;return x._cacheMap=new S.LRUMap(E),x._cacheMap.prealloc(E),x}return g(H,T),H.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},H.prototype.beginFrame=function(){this._drawToCacheCount=0},H.prototype.clear=function(){if(this._cacheMap.size>0){var I=this._width*this._height;this._cacheMap=new S.LRUMap(I),this._cacheMap.prealloc(I)}this._cacheCtx.clearRect(0,0,l,s),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},H.prototype.draw=function(I,A,x,O){if(A.code===32)return!0;if(!this._canCache(A))return!1;var E=a(A),V=this._cacheMap.get(E);if(V!=null)return this._drawFromCache(I,V,x,O),!0;if(this._drawToCacheCount<100){var U;U=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var F=this._drawToCache(A,U);return this._cacheMap.set(E,F),this._drawFromCache(I,F,x,O),!0}return!1},H.prototype._canCache=function(I){return I.code<256},H.prototype._toCoordinateX=function(I){return I%this._width*this._config.scaledCharWidth},H.prototype._toCoordinateY=function(I){return Math.floor(I/this._width)*this._config.scaledCharHeight},H.prototype._drawFromCache=function(I,A,x,O){if(!A.isEmpty){var E=this._toCoordinateX(A.index),V=this._toCoordinateY(A.index);I.drawImage(A.inBitmap?this._bitmap:this._cacheCanvas,E,V,this._config.scaledCharWidth,this._config.scaledCharHeight,x,O,this._config.scaledCharWidth,this._config.scaledCharHeight)}},H.prototype._getColorFromAnsiIndex=function(I){return I<this._config.colors.ansi.length?this._config.colors.ansi[I]:b.DEFAULT_ANSI_COLORS[I]},H.prototype._getBackgroundColor=function(I){return this._config.allowTransparency?o:I.bg===C.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:I.bg<256?this._getColorFromAnsiIndex(I.bg):this._config.colors.background},H.prototype._getForegroundColor=function(I){return I.fg===C.INVERTED_DEFAULT_COLOR?v.color.opaque(this._config.colors.background):I.fg<256?this._getColorFromAnsiIndex(I.fg):this._config.colors.foreground},H.prototype._drawToCache=function(I,A){this._drawToCacheCount++,this._tmpCtx.save();var x=this._getBackgroundColor(I);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=x.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var O=I.bold?this._config.fontWeightBold:this._config.fontWeight,E=I.italic?"italic":"";this._tmpCtx.font=E+" "+O+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=C.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(I).css,I.dim&&(this._tmpCtx.globalAlpha=C.DIM_OPACITY),this._tmpCtx.fillText(I.chars,0,this._config.scaledCharHeight);var V=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),U=!1;if(this._config.allowTransparency||(U=k(V,x)),U&&I.chars==="_"&&!this._config.allowTransparency)for(var F=1;F<=5&&(this._tmpCtx.fillText(I.chars,0,this._config.scaledCharHeight-F),U=k(V=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),x));F++);this._tmpCtx.restore();var W=this._toCoordinateX(A),Y=this._toCoordinateY(A);this._cacheCtx.putImageData(V,W,Y);var J={index:A,isEmpty:U,inBitmap:!1};return this._addGlyphToBitmap(J),J},H.prototype._addGlyphToBitmap=function(I){var A=this;!("createImageBitmap"in window)||u.isFirefox||u.isSafari||(this._glyphsWaitingOnBitmap.push(I),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return A._generateBitmap()},100)))},H.prototype._generateBitmap=function(){var I=this,A=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(x){I._bitmap=x;for(var O=0;O<A.length;O++)A[O].inBitmap=!0}),this._bitmapCommitTimeout=null},H}(y.BaseCharAtlas);h.DynamicCharAtlas=d;var m=function(T){function H(I,A){return T.call(this)||this}return g(H,T),H.prototype.draw=function(I,A,x,O){return!1},H}(y.BaseCharAtlas);function k(T,H){for(var I=!0,A=H.rgba>>>24,x=H.rgba>>>16&255,O=H.rgba>>>8&255,E=0;E<T.data.length;E+=4)T.data[E]===A&&T.data[E+1]===x&&T.data[E+2]===O?T.data[E+3]=0:I=!1;return I}h.NoneCharAtlas=m},7001:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LRUMap=void 0;var L=function(){function p(g){this.capacity=g,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return p.prototype._unlinkNode=function(g){var C=g.prev,y=g.next;g===this._head&&(this._head=y),g===this._tail&&(this._tail=C),C!==null&&(C.next=y),y!==null&&(y.prev=C)},p.prototype._appendNode=function(g){var C=this._tail;C!==null&&(C.next=g),g.prev=C,g.next=null,this._tail=g,this._head===null&&(this._head=g)},p.prototype.prealloc=function(g){for(var C=this._nodePool,y=0;y<g;y++)C.push({prev:null,next:null,key:null,value:null})},p.prototype.get=function(g){var C=this._map[g];return C!==void 0?(this._unlinkNode(C),this._appendNode(C),C.value):null},p.prototype.peekValue=function(g){var C=this._map[g];return C!==void 0?C.value:null},p.prototype.peek=function(){var g=this._head;return g===null?null:g.value},p.prototype.set=function(g,C){var y=this._map[g];if(y!==void 0)y=this._map[g],this._unlinkNode(y),y.value=C;else if(this.size>=this.capacity)y=this._head,this._unlinkNode(y),delete this._map[y.key],y.key=g,y.value=C,this._map[g]=y;else{var b=this._nodePool;b.length>0?((y=b.pop()).key=g,y.value=C):y={prev:null,next:null,key:g,value:C},this._map[g]=y,this.size++}this._appendNode(y)},p}();h.LRUMap=L},1296:function(X,h,L){var p,g=this&&this.__extends||(p=function(I,A){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,O){x.__proto__=O}||function(x,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(x[E]=O[E])},p(I,A)},function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function x(){this.constructor=I}p(I,A),I.prototype=A===null?Object.create(A):(x.prototype=A.prototype,new x)}),C=this&&this.__decorate||function(I,A,x,O){var E,V=arguments.length,U=V<3?A:O===null?O=Object.getOwnPropertyDescriptor(A,x):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(I,A,x,O);else for(var F=I.length-1;F>=0;F--)(E=I[F])&&(U=(V<3?E(U):V>3?E(A,x,U):E(A,x))||U);return V>3&&U&&Object.defineProperty(A,x,U),U},y=this&&this.__param||function(I,A){return function(x,O){A(x,O,I)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRenderer=void 0;var b=L(3787),S=L(8803),u=L(844),f=L(4725),v=L(2585),l=L(8460),s=L(4774),o=L(9631),a="xterm-dom-renderer-owner-",d="xterm-fg-",m="xterm-bg-",k="xterm-focus",T=1,H=function(I){function A(x,O,E,V,U,F,W,Y,J,fe){var le=I.call(this)||this;return le._colors=x,le._element=O,le._screenElement=E,le._viewportElement=V,le._linkifier=U,le._linkifier2=F,le._charSizeService=Y,le._optionsService=J,le._bufferService=fe,le._terminalClass=T++,le._rowElements=[],le._rowContainer=document.createElement("div"),le._rowContainer.classList.add("xterm-rows"),le._rowContainer.style.lineHeight="normal",le._rowContainer.setAttribute("aria-hidden","true"),le._refreshRowElements(le._bufferService.cols,le._bufferService.rows),le._selectionContainer=document.createElement("div"),le._selectionContainer.classList.add("xterm-selection"),le._selectionContainer.setAttribute("aria-hidden","true"),le.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},le._updateDimensions(),le._injectCss(),le._rowFactory=W.createInstance(b.DomRendererRowFactory,document,le._colors),le._element.classList.add(a+le._terminalClass),le._screenElement.appendChild(le._rowContainer),le._screenElement.appendChild(le._selectionContainer),le._linkifier.onShowLinkUnderline(function(Ce){return le._onLinkHover(Ce)}),le._linkifier.onHideLinkUnderline(function(Ce){return le._onLinkLeave(Ce)}),le._linkifier2.onShowLinkUnderline(function(Ce){return le._onLinkHover(Ce)}),le._linkifier2.onHideLinkUnderline(function(Ce){return le._onLinkLeave(Ce)}),le}return g(A,I),Object.defineProperty(A.prototype,"onRequestRedraw",{get:function(){return new l.EventEmitter().event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){this._element.classList.remove(a+this._terminalClass),(0,o.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),I.prototype.dispose.call(this)},A.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var x=0,O=this._rowElements;x<O.length;x++){var E=O[x];E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var V=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=V,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},A.prototype.setColors=function(x){this._colors=x,this._injectCss()},A.prototype._injectCss=function(){var x=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var O=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";O+=this._terminalSelector+" span:not(."+b.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+b.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+b.ITALIC_CLASS+" { font-style: italic;}",O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",O+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",O+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+":not(."+b.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",O+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(E,V){O+=x._terminalSelector+" ."+d+V+" { color: "+E.css+"; }"+x._terminalSelector+" ."+m+V+" { background-color: "+E.css+"; }"}),O+=this._terminalSelector+" ."+d+S.INVERTED_DEFAULT_COLOR+" { color: "+s.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+m+S.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=O},A.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},A.prototype._refreshRowElements=function(x,O){for(var E=this._rowElements.length;E<=O;E++){var V=document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())},A.prototype.onResize=function(x,O){this._refreshRowElements(x,O),this._updateDimensions()},A.prototype.onCharSizeChanged=function(){this._updateDimensions()},A.prototype.onBlur=function(){this._rowContainer.classList.remove(k)},A.prototype.onFocus=function(){this._rowContainer.classList.add(k)},A.prototype.onSelectionChanged=function(x,O,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(x&&O){var V=x[1]-this._bufferService.buffer.ydisp,U=O[1]-this._bufferService.buffer.ydisp,F=Math.max(V,0),W=Math.min(U,this._bufferService.rows-1);if(!(F>=this._bufferService.rows||W<0)){var Y=document.createDocumentFragment();if(E)Y.appendChild(this._createSelectionElement(F,x[0],O[0],W-F+1));else{var J=V===F?x[0]:0,fe=F===U?O[0]:this._bufferService.cols;Y.appendChild(this._createSelectionElement(F,J,fe));var le=W-F-1;if(Y.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,le)),F!==W){var Ce=U===W?O[0]:this._bufferService.cols;Y.appendChild(this._createSelectionElement(W,0,Ce))}}this._selectionContainer.appendChild(Y)}}},A.prototype._createSelectionElement=function(x,O,E,V){V===void 0&&(V=1);var U=document.createElement("div");return U.style.height=V*this.dimensions.actualCellHeight+"px",U.style.top=x*this.dimensions.actualCellHeight+"px",U.style.left=O*this.dimensions.actualCellWidth+"px",U.style.width=this.dimensions.actualCellWidth*(E-O)+"px",U},A.prototype.onCursorMove=function(){},A.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},A.prototype.clear=function(){for(var x=0,O=this._rowElements;x<O.length;x++)O[x].innerText=""},A.prototype.renderRows=function(x,O){for(var E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,V=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),U=this._optionsService.options.cursorBlink,F=x;F<=O;F++){var W=this._rowElements[F];W.innerText="";var Y=F+this._bufferService.buffer.ydisp,J=this._bufferService.buffer.lines.get(Y),fe=this._optionsService.options.cursorStyle;W.appendChild(this._rowFactory.createRow(J,Y,Y===E,fe,V,U,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(A.prototype,"_terminalSelector",{get:function(){return"."+a+this._terminalClass},enumerable:!1,configurable:!0}),A.prototype._onLinkHover=function(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!0)},A.prototype._onLinkLeave=function(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!1)},A.prototype._setCellUnderline=function(x,O,E,V,U,F){for(;x!==O||E!==V;){var W=this._rowElements[E];if(!W)return;var Y=W.children[x];Y&&(Y.style.textDecoration=F?"underline":"none"),++x>=U&&(x=0,E++)}},C([y(6,v.IInstantiationService),y(7,f.ICharSizeService),y(8,v.IOptionsService),y(9,v.IBufferService)],A)}(u.Disposable);h.DomRenderer=H},3787:function(X,h,L){var p=this&&this.__decorate||function(o,a,d,m){var k,T=arguments.length,H=T<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(o,a,d,m);else for(var I=o.length-1;I>=0;I--)(k=o[I])&&(H=(T<3?k(H):T>3?k(a,d,H):k(a,d))||H);return T>3&&H&&Object.defineProperty(a,d,H),H},g=this&&this.__param||function(o,a){return function(d,m){a(d,m,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRendererRowFactory=h.CURSOR_STYLE_UNDERLINE_CLASS=h.CURSOR_STYLE_BAR_CLASS=h.CURSOR_STYLE_BLOCK_CLASS=h.CURSOR_BLINK_CLASS=h.CURSOR_CLASS=h.STRIKETHROUGH_CLASS=h.UNDERLINE_CLASS=h.ITALIC_CLASS=h.DIM_CLASS=h.BOLD_CLASS=void 0;var C=L(8803),y=L(643),b=L(511),S=L(2585),u=L(4774),f=L(4725),v=L(4269);h.BOLD_CLASS="xterm-bold",h.DIM_CLASS="xterm-dim",h.ITALIC_CLASS="xterm-italic",h.UNDERLINE_CLASS="xterm-underline",h.STRIKETHROUGH_CLASS="xterm-strikethrough",h.CURSOR_CLASS="xterm-cursor",h.CURSOR_BLINK_CLASS="xterm-cursor-blink",h.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",h.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",h.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var l=function(){function o(a,d,m,k,T){this._document=a,this._colors=d,this._characterJoinerService=m,this._optionsService=k,this._coreService=T,this._workCell=new b.CellData}return o.prototype.setColors=function(a){this._colors=a},o.prototype.createRow=function(a,d,m,k,T,H,I,A){for(var x=this._document.createDocumentFragment(),O=this._characterJoinerService.getJoinedCharacters(d),E=0,V=Math.min(a.length,A)-1;V>=0;V--)if(a.loadCell(V,this._workCell).getCode()!==y.NULL_CELL_CODE||m&&V===T){E=V+1;break}for(V=0;V<E;V++){a.loadCell(V,this._workCell);var U=this._workCell.getWidth();if(U!==0){var F=!1,W=V,Y=this._workCell;if(O.length>0&&V===O[0][0]){F=!0;var J=O.shift();Y=new v.JoinedCellData(this._workCell,a.translateToString(!0,J[0],J[1]),J[1]-J[0]),W=J[1]-1,U=Y.getWidth()}var fe=this._document.createElement("span");if(U>1&&(fe.style.width=I*U+"px"),F&&(fe.style.display="inline",T>=V&&T<=W&&(T=V)),!this._coreService.isCursorHidden&&m&&V===T)switch(fe.classList.add(h.CURSOR_CLASS),H&&fe.classList.add(h.CURSOR_BLINK_CLASS),k){case"bar":fe.classList.add(h.CURSOR_STYLE_BAR_CLASS);break;case"underline":fe.classList.add(h.CURSOR_STYLE_UNDERLINE_CLASS);break;default:fe.classList.add(h.CURSOR_STYLE_BLOCK_CLASS)}Y.isBold()&&fe.classList.add(h.BOLD_CLASS),Y.isItalic()&&fe.classList.add(h.ITALIC_CLASS),Y.isDim()&&fe.classList.add(h.DIM_CLASS),Y.isUnderline()&&fe.classList.add(h.UNDERLINE_CLASS),Y.isInvisible()?fe.textContent=y.WHITESPACE_CELL_CHAR:fe.textContent=Y.getChars()||y.WHITESPACE_CELL_CHAR,Y.isStrikethrough()&&fe.classList.add(h.STRIKETHROUGH_CLASS);var le=Y.getFgColor(),Ce=Y.getFgColorMode(),we=Y.getBgColor(),he=Y.getBgColorMode(),B=!!Y.isInverse();if(B){var j=le;le=we,we=j;var q=Ce;Ce=he,he=q}switch(Ce){case 16777216:case 33554432:Y.isBold()&&le<8&&this._optionsService.options.drawBoldTextInBrightColors&&(le+=8),this._applyMinimumContrast(fe,this._colors.background,this._colors.ansi[le])||fe.classList.add("xterm-fg-"+le);break;case 50331648:var ae=u.rgba.toColor(le>>16&255,le>>8&255,255&le);this._applyMinimumContrast(fe,this._colors.background,ae)||this._addStyle(fe,"color:#"+s(le.toString(16),"0",6));break;default:this._applyMinimumContrast(fe,this._colors.background,this._colors.foreground)||B&&fe.classList.add("xterm-fg-"+C.INVERTED_DEFAULT_COLOR)}switch(he){case 16777216:case 33554432:fe.classList.add("xterm-bg-"+we);break;case 50331648:this._addStyle(fe,"background-color:#"+s(we.toString(16),"0",6));break;default:B&&fe.classList.add("xterm-bg-"+C.INVERTED_DEFAULT_COLOR)}x.appendChild(fe),V=W}}return x},o.prototype._applyMinimumContrast=function(a,d,m){if(this._optionsService.options.minimumContrastRatio===1)return!1;var k=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return k===void 0&&(k=u.color.ensureContrastRatio(d,m,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,k??null)),!!k&&(this._addStyle(a,"color:"+k.css),!0)},o.prototype._addStyle=function(a,d){a.setAttribute("style",""+(a.getAttribute("style")||"")+d+";")},p([g(2,f.ICharacterJoinerService),g(3,S.IOptionsService),g(4,S.ICoreService)],o)}();function s(o,a,d){for(;o.length<d;)o=a+o;return o}h.DomRendererRowFactory=l},456:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionModel=void 0;var L=function(){function p(g){this._bufferService=g,this.isSelectAllActive=!1,this.selectionStartLength=0}return p.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(p.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var g=this.selectionStart[0]+this.selectionStartLength;return g>this._bufferService.cols?g%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)-1]:[g%this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)]:[g,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),p.prototype.areSelectionValuesReversed=function(){var g=this.selectionStart,C=this.selectionEnd;return!(!g||!C)&&(g[1]>C[1]||g[1]===C[1]&&g[0]>C[0])},p.prototype.onTrim=function(g){return this.selectionStart&&(this.selectionStart[1]-=g),this.selectionEnd&&(this.selectionEnd[1]-=g),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},p}();h.SelectionModel=L},428:function(X,h,L){var p=this&&this.__decorate||function(u,f,v,l){var s,o=arguments.length,a=o<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,v):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(u,f,v,l);else for(var d=u.length-1;d>=0;d--)(s=u[d])&&(a=(o<3?s(a):o>3?s(f,v,a):s(f,v))||a);return o>3&&a&&Object.defineProperty(f,v,a),a},g=this&&this.__param||function(u,f){return function(v,l){f(v,l,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharSizeService=void 0;var C=L(2585),y=L(8460),b=function(){function u(f,v,l){this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=new y.EventEmitter,this._measureStrategy=new S(f,v,this._optionsService)}return Object.defineProperty(u.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),u.prototype.measure=function(){var f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())},p([g(2,C.IOptionsService)],u)}();h.CharSizeService=b;var S=function(){function u(f,v,l){this._document=f,this._parentElement=v,this._optionsService=l,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return u.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var f=this._measureElement.getBoundingClientRect();return f.width!==0&&f.height!==0&&(this._result.width=f.width,this._result.height=Math.ceil(f.height)),this._result},u}()},4269:function(X,h,L){var p,g=this&&this.__extends||(p=function(s,o){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])},p(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=s}p(s,o),s.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}),C=this&&this.__decorate||function(s,o,a,d){var m,k=arguments.length,T=k<3?o:d===null?d=Object.getOwnPropertyDescriptor(o,a):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(s,o,a,d);else for(var H=s.length-1;H>=0;H--)(m=s[H])&&(T=(k<3?m(T):k>3?m(o,a,T):m(o,a))||T);return k>3&&T&&Object.defineProperty(o,a,T),T},y=this&&this.__param||function(s,o){return function(a,d){o(a,d,s)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharacterJoinerService=h.JoinedCellData=void 0;var b=L(3734),S=L(643),u=L(511),f=L(2585),v=function(s){function o(a,d,m){var k=s.call(this)||this;return k.content=0,k.combinedData="",k.fg=a.fg,k.bg=a.bg,k.combinedData=d,k._width=m,k}return g(o,s),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(a){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(b.AttributeData);h.JoinedCellData=v;var l=function(){function s(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return s.prototype.register=function(o){var a={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(a),a.id},s.prototype.deregister=function(o){for(var a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===o)return this._characterJoiners.splice(a,1),!0;return!1},s.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var a=this._bufferService.buffer.lines.get(o);if(!a||a.length===0)return[];for(var d=[],m=a.translateToString(!0),k=0,T=0,H=0,I=a.getFg(0),A=a.getBg(0),x=0;x<a.getTrimmedLength();x++)if(a.loadCell(x,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==A){if(x-k>1)for(var O=this._getJoinedRanges(m,H,T,a,k),E=0;E<O.length;E++)d.push(O[E]);k=x,H=T,I=this._workCell.fg,A=this._workCell.bg}T+=this._workCell.getChars().length||S.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-k>1)for(O=this._getJoinedRanges(m,H,T,a,k),E=0;E<O.length;E++)d.push(O[E]);return d},s.prototype._getJoinedRanges=function(o,a,d,m,k){var T=o.substring(a,d),H=[];try{H=this._characterJoiners[0].handler(T)}catch(O){console.error(O)}for(var I=1;I<this._characterJoiners.length;I++)try{for(var A=this._characterJoiners[I].handler(T),x=0;x<A.length;x++)s._mergeRanges(H,A[x])}catch(O){console.error(O)}return this._stringRangesToCellRanges(H,m,k),H},s.prototype._stringRangesToCellRanges=function(o,a,d){var m=0,k=!1,T=0,H=o[m];if(H){for(var I=d;I<this._bufferService.cols;I++){var A=a.getWidth(I),x=a.getString(I).length||S.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!k&&H[0]<=T&&(H[0]=I,k=!0),H[1]<=T){if(H[1]=I,!(H=o[++m]))break;H[0]<=T?(H[0]=I,k=!0):k=!1}T+=x}}H&&(H[1]=this._bufferService.cols)}},s._mergeRanges=function(o,a){for(var d=!1,m=0;m<o.length;m++){var k=o[m];if(d){if(a[1]<=k[0])return o[m-1][1]=a[1],o;if(a[1]<=k[1])return o[m-1][1]=Math.max(a[1],k[1]),o.splice(m,1),o;o.splice(m,1),m--}else{if(a[1]<=k[0])return o.splice(m,0,a),o;if(a[1]<=k[1])return k[0]=Math.min(a[0],k[0]),o;a[0]<k[1]&&(k[0]=Math.min(a[0],k[0]),d=!0)}}return d?o[o.length-1][1]=a[1]:o.push(a),o},s=C([y(0,f.IBufferService)],s)}();h.CharacterJoinerService=l},5114:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CoreBrowserService=void 0;var L=function(){function p(g){this._textarea=g}return Object.defineProperty(p.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),p}();h.CoreBrowserService=L},8934:function(X,h,L){var p=this&&this.__decorate||function(S,u,f,v){var l,s=arguments.length,o=s<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,f):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(S,u,f,v);else for(var a=S.length-1;a>=0;a--)(l=S[a])&&(o=(s<3?l(o):s>3?l(u,f,o):l(u,f))||o);return s>3&&o&&Object.defineProperty(u,f,o),o},g=this&&this.__param||function(S,u){return function(f,v){u(f,v,S)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseService=void 0;var C=L(4725),y=L(9806),b=function(){function S(u,f){this._renderService=u,this._charSizeService=f}return S.prototype.getCoords=function(u,f,v,l,s){return(0,y.getCoords)(u,f,v,l,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,s)},S.prototype.getRawByteCoords=function(u,f,v,l){var s=this.getCoords(u,f,v,l);return(0,y.getRawByteCoords)(s)},p([g(0,C.IRenderService),g(1,C.ICharSizeService)],S)}();h.MouseService=b},3230:function(X,h,L){var p,g=this&&this.__extends||(p=function(a,d){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,k){m.__proto__=k}||function(m,k){for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(m[T]=k[T])},p(a,d)},function(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function m(){this.constructor=a}p(a,d),a.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}),C=this&&this.__decorate||function(a,d,m,k){var T,H=arguments.length,I=H<3?d:k===null?k=Object.getOwnPropertyDescriptor(d,m):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(a,d,m,k);else for(var A=a.length-1;A>=0;A--)(T=a[A])&&(I=(H<3?T(I):H>3?T(d,m,I):T(d,m))||I);return H>3&&I&&Object.defineProperty(d,m,I),I},y=this&&this.__param||function(a,d){return function(m,k){d(m,k,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.RenderService=void 0;var b=L(6193),S=L(8460),u=L(844),f=L(5596),v=L(3656),l=L(2585),s=L(4725),o=function(a){function d(m,k,T,H,I,A){var x=a.call(this)||this;if(x._renderer=m,x._rowCount=k,x._charSizeService=I,x._isPaused=!1,x._needsFullRefresh=!1,x._isNextRenderRedrawOnly=!0,x._needsSelectionRefresh=!1,x._canvasWidth=0,x._canvasHeight=0,x._selectionState={start:void 0,end:void 0,columnSelectMode:!1},x._onDimensionsChange=new S.EventEmitter,x._onRender=new S.EventEmitter,x._onRefreshRequest=new S.EventEmitter,x.register({dispose:function(){return x._renderer.dispose()}}),x._renderDebouncer=new b.RenderDebouncer(function(E,V){return x._renderRows(E,V)}),x.register(x._renderDebouncer),x._screenDprMonitor=new f.ScreenDprMonitor,x._screenDprMonitor.setListener(function(){return x.onDevicePixelRatioChange()}),x.register(x._screenDprMonitor),x.register(A.onResize(function(E){return x._fullRefresh()})),x.register(H.onOptionChange(function(){return x._renderer.onOptionsChanged()})),x.register(x._charSizeService.onCharSizeChange(function(){return x.onCharSizeChanged()})),x._renderer.onRequestRedraw(function(E){return x.refreshRows(E.start,E.end,!0)}),x.register((0,v.addDisposableDomListener)(window,"resize",function(){return x.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var O=new IntersectionObserver(function(E){return x._onIntersectionChange(E[E.length-1])},{threshold:0});O.observe(T),x.register({dispose:function(){return O.disconnect()}})}return x}return g(d,a),Object.defineProperty(d.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),d.prototype._onIntersectionChange=function(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},d.prototype.refreshRows=function(m,k,T){T===void 0&&(T=!1),this._isPaused?this._needsFullRefresh=!0:(T||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,k,this._rowCount))},d.prototype._renderRows=function(m,k){this._renderer.renderRows(m,k),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:m,end:k}),this._isNextRenderRedrawOnly=!0},d.prototype.resize=function(m,k){this._rowCount=k,this._fireOnCanvasResize()},d.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},d.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},d.prototype.dispose=function(){a.prototype.dispose.call(this)},d.prototype.setRenderer=function(m){var k=this;this._renderer.dispose(),this._renderer=m,this._renderer.onRequestRedraw(function(T){return k.refreshRows(T.start,T.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},d.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},d.prototype.clearTextureAtlas=function(){var m,k;(k=(m=this._renderer)===null||m===void 0?void 0:m.clearTextureAtlas)===null||k===void 0||k.call(m),this._fullRefresh()},d.prototype.setColors=function(m){this._renderer.setColors(m),this._fullRefresh()},d.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},d.prototype.onResize=function(m,k){this._renderer.onResize(m,k),this._fullRefresh()},d.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},d.prototype.onBlur=function(){this._renderer.onBlur()},d.prototype.onFocus=function(){this._renderer.onFocus()},d.prototype.onSelectionChanged=function(m,k,T){this._selectionState.start=m,this._selectionState.end=k,this._selectionState.columnSelectMode=T,this._renderer.onSelectionChanged(m,k,T)},d.prototype.onCursorMove=function(){this._renderer.onCursorMove()},d.prototype.clear=function(){this._renderer.clear()},C([y(3,l.IOptionsService),y(4,s.ICharSizeService),y(5,l.IBufferService)],d)}(u.Disposable);h.RenderService=o},9312:function(X,h,L){var p,g=this&&this.__extends||(p=function(H,I){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(A[O]=x[O])},p(H,I)},function(H,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function A(){this.constructor=H}p(H,I),H.prototype=I===null?Object.create(I):(A.prototype=I.prototype,new A)}),C=this&&this.__decorate||function(H,I,A,x){var O,E=arguments.length,V=E<3?I:x===null?x=Object.getOwnPropertyDescriptor(I,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(H,I,A,x);else for(var U=H.length-1;U>=0;U--)(O=H[U])&&(V=(E<3?O(V):E>3?O(I,A,V):O(I,A))||V);return E>3&&V&&Object.defineProperty(I,A,V),V},y=this&&this.__param||function(H,I){return function(A,x){I(A,x,H)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionService=void 0;var b=L(6114),S=L(456),u=L(511),f=L(8460),v=L(4725),l=L(2585),s=L(9806),o=L(9504),a=L(844),d=L(4841),m=String.fromCharCode(160),k=new RegExp(m,"g"),T=function(H){function I(A,x,O,E,V,U,F,W){var Y=H.call(this)||this;return Y._element=A,Y._screenElement=x,Y._linkifier=O,Y._bufferService=E,Y._coreService=V,Y._mouseService=U,Y._optionsService=F,Y._renderService=W,Y._dragScrollAmount=0,Y._enabled=!0,Y._workCell=new u.CellData,Y._mouseDownTimeStamp=0,Y._oldHasSelection=!1,Y._oldSelectionStart=void 0,Y._oldSelectionEnd=void 0,Y._onLinuxMouseSelection=Y.register(new f.EventEmitter),Y._onRedrawRequest=Y.register(new f.EventEmitter),Y._onSelectionChange=Y.register(new f.EventEmitter),Y._onRequestScrollLines=Y.register(new f.EventEmitter),Y._mouseMoveListener=function(J){return Y._onMouseMove(J)},Y._mouseUpListener=function(J){return Y._onMouseUp(J)},Y._coreService.onUserInput(function(){Y.hasSelection&&Y.clearSelection()}),Y._trimListener=Y._bufferService.buffer.lines.onTrim(function(J){return Y._onTrim(J)}),Y.register(Y._bufferService.buffers.onBufferActivate(function(J){return Y._onBufferActivate(J)})),Y.enable(),Y._model=new S.SelectionModel(Y._bufferService),Y._activeSelectionMode=0,Y}return g(I,H),Object.defineProperty(I.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),I.prototype.dispose=function(){this._removeMouseDownListeners()},I.prototype.reset=function(){this.clearSelection()},I.prototype.disable=function(){this.clearSelection(),this._enabled=!1},I.prototype.enable=function(){this._enabled=!0},Object.defineProperty(I.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"hasSelection",{get:function(){var A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!A||!x||A[0]===x[0]&&A[1]===x[1])},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"selectionText",{get:function(){var A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!A||!x)return"";var O=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(A[0]===x[0])return"";for(var V=A[1];V<=x[1];V++){var U=O.translateBufferLineToString(V,!0,A[0],x[0]);E.push(U)}}else{var F=A[1]===x[1]?x[0]:void 0;for(E.push(O.translateBufferLineToString(A[1],!0,A[0],F)),V=A[1]+1;V<=x[1]-1;V++){var W=O.lines.get(V);U=O.translateBufferLineToString(V,!0),(W==null?void 0:W.isWrapped)?E[E.length-1]+=U:E.push(U)}A[1]!==x[1]&&(W=O.lines.get(x[1]),U=O.translateBufferLineToString(x[1],!0,0,x[0]),W&&W.isWrapped?E[E.length-1]+=U:E.push(U))}return E.map(function(Y){return Y.replace(k," ")}).join(b.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),I.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},I.prototype.refresh=function(A){var x=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return x._refresh()})),b.isLinux&&A&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},I.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},I.prototype._isClickInSelection=function(A){var x=this._getMouseBufferCoords(A),O=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(O&&E&&x)&&this._areCoordsInSelection(x,O,E)},I.prototype._areCoordsInSelection=function(A,x,O){return A[1]>x[1]&&A[1]<O[1]||x[1]===O[1]&&A[1]===x[1]&&A[0]>=x[0]&&A[0]<O[0]||x[1]<O[1]&&A[1]===O[1]&&A[0]<O[0]||x[1]<O[1]&&A[1]===x[1]&&A[0]>=x[0]},I.prototype._selectWordAtCursor=function(A,x){var O,E,V=(E=(O=this._linkifier.currentLink)===null||O===void 0?void 0:O.link)===null||E===void 0?void 0:E.range;if(V)return this._model.selectionStart=[V.start.x-1,V.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(V,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var U=this._getMouseBufferCoords(A);return!!U&&(this._selectWordAt(U,x),this._model.selectionEnd=void 0,!0)},I.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},I.prototype.selectLines=function(A,x){this._model.clearSelection(),A=Math.max(A,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,A],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()},I.prototype._onTrim=function(A){this._model.onTrim(A)&&this.refresh()},I.prototype._getMouseBufferCoords=function(A){var x=this._mouseService.getCoords(A,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x},I.prototype._getMouseEventScrollAmount=function(A){var x=(0,s.getCoordsRelativeToElement)(A,this._screenElement)[1],O=this._renderService.dimensions.canvasHeight;return x>=0&&x<=O?0:(x>O&&(x-=O),x=Math.min(Math.max(x,-50),50),(x/=50)/Math.abs(x)+Math.round(14*x))},I.prototype.shouldForceSelection=function(A){return b.isMac?A.altKey&&this._optionsService.options.macOptionClickForcesSelection:A.shiftKey},I.prototype.onMouseDown=function(A){if(this._mouseDownTimeStamp=A.timeStamp,(A.button!==2||!this.hasSelection)&&A.button===0){if(!this._enabled){if(!this.shouldForceSelection(A))return;A.stopPropagation()}A.preventDefault(),this._dragScrollAmount=0,this._enabled&&A.shiftKey?this._onIncrementalClick(A):A.detail===1?this._onSingleClick(A):A.detail===2?this._onDoubleClick(A):A.detail===3&&this._onTripleClick(A),this._addMouseDownListeners(),this.refresh(!0)}},I.prototype._addMouseDownListeners=function(){var A=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return A._dragScroll()},50)},I.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},I.prototype._onIncrementalClick=function(A){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(A))},I.prototype._onSingleClick=function(A){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(A)?3:0,this._model.selectionStart=this._getMouseBufferCoords(A),this._model.selectionStart){this._model.selectionEnd=void 0;var x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},I.prototype._onDoubleClick=function(A){this._selectWordAtCursor(A,!0)&&(this._activeSelectionMode=1)},I.prototype._onTripleClick=function(A){var x=this._getMouseBufferCoords(A);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))},I.prototype.shouldColumnSelect=function(A){return A.altKey&&!(b.isMac&&this._optionsService.options.macOptionClickForcesSelection)},I.prototype._onMouseMove=function(A){if(A.stopImmediatePropagation(),this._model.selectionStart){var x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(A),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(A),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){var E=O.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},I.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var A=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(A.ydisp+this._bufferService.rows,A.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=A.ydisp),this.refresh()}},I.prototype._onMouseUp=function(A){var x=A.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&A.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var O=this._mouseService.getCoords(A,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){var E=(0,o.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()},I.prototype._fireEventIfSelectionChanged=function(){var A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,O=!(!A||!x||A[0]===x[0]&&A[1]===x[1]);O?A&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&A[0]===this._oldSelectionStart[0]&&A[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(A,x,O)):this._oldHasSelection&&this._fireOnSelectionChange(A,x,O)},I.prototype._fireOnSelectionChange=function(A,x,O){this._oldSelectionStart=A,this._oldSelectionEnd=x,this._oldHasSelection=O,this._onSelectionChange.fire()},I.prototype._onBufferActivate=function(A){var x=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=A.activeBuffer.lines.onTrim(function(O){return x._onTrim(O)})},I.prototype._convertViewportColToCharacterIndex=function(A,x){for(var O=x[0],E=0;x[0]>=E;E++){var V=A.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:V>1&&x[0]!==E&&(O+=V-1)}return O},I.prototype.setSelection=function(A,x,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[A,x],this._model.selectionStartLength=O,this.refresh()},I.prototype.rightClickSelect=function(A){this._isClickInSelection(A)||(this._selectWordAtCursor(A,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},I.prototype._getWordAt=function(A,x,O,E){if(O===void 0&&(O=!0),E===void 0&&(E=!0),!(A[0]>=this._bufferService.cols)){var V=this._bufferService.buffer,U=V.lines.get(A[1]);if(U){var F=V.translateBufferLineToString(A[1],!1),W=this._convertViewportColToCharacterIndex(U,A),Y=W,J=A[0]-W,fe=0,le=0,Ce=0,we=0;if(F.charAt(W)===" "){for(;W>0&&F.charAt(W-1)===" ";)W--;for(;Y<F.length&&F.charAt(Y+1)===" ";)Y++}else{var he=A[0],B=A[0];U.getWidth(he)===0&&(fe++,he--),U.getWidth(B)===2&&(le++,B++);var j=U.getString(B).length;for(j>1&&(we+=j-1,Y+=j-1);he>0&&W>0&&!this._isCharWordSeparator(U.loadCell(he-1,this._workCell));){U.loadCell(he-1,this._workCell);var q=this._workCell.getChars().length;this._workCell.getWidth()===0?(fe++,he--):q>1&&(Ce+=q-1,W-=q-1),W--,he--}for(;B<U.length&&Y+1<F.length&&!this._isCharWordSeparator(U.loadCell(B+1,this._workCell));){U.loadCell(B+1,this._workCell);var ae=this._workCell.getChars().length;this._workCell.getWidth()===2?(le++,B++):ae>1&&(we+=ae-1,Y+=ae-1),Y++,B++}}Y++;var Z=W+J-fe+Ce,_e=Math.min(this._bufferService.cols,Y-W+fe+le-Ce-we);if(x||F.slice(W,Y).trim()!==""){if(O&&Z===0&&U.getCodePoint(0)!==32){var Le=V.lines.get(A[1]-1);if(Le&&U.isWrapped&&Le.getCodePoint(this._bufferService.cols-1)!==32){var Be=this._getWordAt([this._bufferService.cols-1,A[1]-1],!1,!0,!1);if(Be){var Ee=this._bufferService.cols-Be.start;Z-=Ee,_e+=Ee}}}if(E&&Z+_e===this._bufferService.cols&&U.getCodePoint(this._bufferService.cols-1)!==32){var He=V.lines.get(A[1]+1);if((He==null?void 0:He.isWrapped)&&He.getCodePoint(0)!==32){var be=this._getWordAt([0,A[1]+1],!1,!1,!0);be&&(_e+=be.length)}}return{start:Z,length:_e}}}}},I.prototype._selectWordAt=function(A,x){var O=this._getWordAt(A,x);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,A[1]--;this._model.selectionStart=[O.start,A[1]],this._model.selectionStartLength=O.length}},I.prototype._selectToWordAt=function(A){var x=this._getWordAt(A,!0);if(x){for(var O=A[1];x.start<0;)x.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,O]}},I.prototype._isCharWordSeparator=function(A){return A.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(A.getChars())>=0},I.prototype._selectLineAt=function(A){var x=this._bufferService.buffer.getWrappedRangeForLine(A);this._model.selectionStart=[0,x.first],this._model.selectionEnd=[this._bufferService.cols,x.last],this._model.selectionStartLength=0},C([y(3,l.IBufferService),y(4,l.ICoreService),y(5,v.IMouseService),y(6,l.IOptionsService),y(7,v.IRenderService)],I)}(a.Disposable);h.SelectionService=T},4725:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ICharacterJoinerService=h.ISoundService=h.ISelectionService=h.IRenderService=h.IMouseService=h.ICoreBrowserService=h.ICharSizeService=void 0;var p=L(8343);h.ICharSizeService=(0,p.createDecorator)("CharSizeService"),h.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),h.IMouseService=(0,p.createDecorator)("MouseService"),h.IRenderService=(0,p.createDecorator)("RenderService"),h.ISelectionService=(0,p.createDecorator)("SelectionService"),h.ISoundService=(0,p.createDecorator)("SoundService"),h.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService")},357:function(X,h,L){var p=this&&this.__decorate||function(b,S,u,f){var v,l=arguments.length,s=l<3?S:f===null?f=Object.getOwnPropertyDescriptor(S,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(b,S,u,f);else for(var o=b.length-1;o>=0;o--)(v=b[o])&&(s=(l<3?v(s):l>3?v(S,u,s):v(S,u))||s);return l>3&&s&&Object.defineProperty(S,u,s),s},g=this&&this.__param||function(b,S){return function(u,f){S(u,f,b)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SoundService=void 0;var C=L(2585),y=function(){function b(S){this._optionsService=S}return Object.defineProperty(b,"audioContext",{get:function(){if(!b._audioContext){var S=window.AudioContext||window.webkitAudioContext;if(!S)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;b._audioContext=new S}return b._audioContext},enumerable:!1,configurable:!0}),b.prototype.playBellSound=function(){var S=b.audioContext;if(S){var u=S.createBufferSource();S.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(f){u.buffer=f,u.connect(S.destination),u.start(0)})}},b.prototype._base64ToArrayBuffer=function(S){for(var u=window.atob(S),f=u.length,v=new Uint8Array(f),l=0;l<f;l++)v[l]=u.charCodeAt(l);return v.buffer},b.prototype._removeMimeType=function(S){return S.split(",")[1]},b=p([g(0,C.IOptionsService)],b)}();h.SoundService=y},6349:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CircularList=void 0;var p=L(8460),g=function(){function C(y){this._maxLength=y,this.onDeleteEmitter=new p.EventEmitter,this.onInsertEmitter=new p.EventEmitter,this.onTrimEmitter=new p.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(C.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"maxLength",{get:function(){return this._maxLength},set:function(y){if(this._maxLength!==y){for(var b=new Array(y),S=0;S<Math.min(y,this.length);S++)b[S]=this._array[this._getCyclicIndex(S)];this._array=b,this._maxLength=y,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"length",{get:function(){return this._length},set:function(y){if(y>this._length)for(var b=this._length;b<y;b++)this._array[b]=void 0;this._length=y},enumerable:!1,configurable:!0}),C.prototype.get=function(y){return this._array[this._getCyclicIndex(y)]},C.prototype.set=function(y,b){this._array[this._getCyclicIndex(y)]=b},C.prototype.push=function(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},C.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(C.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),C.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},C.prototype.splice=function(y,b){for(var S=[],u=2;u<arguments.length;u++)S[u-2]=arguments[u];if(b){for(var f=y;f<this._length-b;f++)this._array[this._getCyclicIndex(f)]=this._array[this._getCyclicIndex(f+b)];this._length-=b,this.onDeleteEmitter.fire({index:y,amount:b})}for(f=this._length-1;f>=y;f--)this._array[this._getCyclicIndex(f+S.length)]=this._array[this._getCyclicIndex(f)];for(f=0;f<S.length;f++)this._array[this._getCyclicIndex(y+f)]=S[f];if(S.length&&this.onInsertEmitter.fire({index:y,amount:S.length}),this._length+S.length>this._maxLength){var v=this._length+S.length-this._maxLength;this._startIndex+=v,this._length=this._maxLength,this.onTrimEmitter.fire(v)}else this._length+=S.length},C.prototype.trimStart=function(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)},C.prototype.shiftElements=function(y,b,S){if(!(b<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(var u=b-1;u>=0;u--)this.set(y+u+S,this.get(y+u));var f=y+b+S-this._length;if(f>0)for(this._length+=f;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(u=0;u<b;u++)this.set(y+u+S,this.get(y+u))}},C.prototype._getCyclicIndex=function(y){return(this._startIndex+y)%this._maxLength},C}();h.CircularList=g},1439:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.clone=void 0,h.clone=function L(p,g){if(g===void 0&&(g=5),typeof p!="object")return p;var C=Array.isArray(p)?[]:{};for(var y in p)C[y]=g<=1?p[y]:p[y]&&L(p[y],g-1);return C}},8969:function(X,h,L){var p,g=this&&this.__extends||(p=function(A,x){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var V in E)Object.prototype.hasOwnProperty.call(E,V)&&(O[V]=E[V])},p(A,x)},function(A,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function O(){this.constructor=A}p(A,x),A.prototype=x===null?Object.create(x):(O.prototype=x.prototype,new O)});Object.defineProperty(h,"__esModule",{value:!0}),h.CoreTerminal=void 0;var C=L(844),y=L(2585),b=L(4348),S=L(7866),u=L(744),f=L(7302),v=L(6975),l=L(8460),s=L(1753),o=L(3730),a=L(1480),d=L(7994),m=L(9282),k=L(5435),T=L(5981),H=!1,I=function(A){function x(O){var E=A.call(this)||this;return E._onBinary=new l.EventEmitter,E._onData=new l.EventEmitter,E._onLineFeed=new l.EventEmitter,E._onResize=new l.EventEmitter,E._onScroll=new l.EventEmitter,E._instantiationService=new b.InstantiationService,E.optionsService=new f.OptionsService(O),E._instantiationService.setService(y.IOptionsService,E.optionsService),E._bufferService=E.register(E._instantiationService.createInstance(u.BufferService)),E._instantiationService.setService(y.IBufferService,E._bufferService),E._logService=E._instantiationService.createInstance(S.LogService),E._instantiationService.setService(y.ILogService,E._logService),E.coreService=E.register(E._instantiationService.createInstance(v.CoreService,function(){return E.scrollToBottom()})),E._instantiationService.setService(y.ICoreService,E.coreService),E.coreMouseService=E._instantiationService.createInstance(s.CoreMouseService),E._instantiationService.setService(y.ICoreMouseService,E.coreMouseService),E._dirtyRowService=E._instantiationService.createInstance(o.DirtyRowService),E._instantiationService.setService(y.IDirtyRowService,E._dirtyRowService),E.unicodeService=E._instantiationService.createInstance(a.UnicodeService),E._instantiationService.setService(y.IUnicodeService,E.unicodeService),E._charsetService=E._instantiationService.createInstance(d.CharsetService),E._instantiationService.setService(y.ICharsetService,E._charsetService),E._inputHandler=new k.InputHandler(E._bufferService,E._charsetService,E.coreService,E._dirtyRowService,E._logService,E.optionsService,E.coreMouseService,E.unicodeService),E.register((0,l.forwardEvent)(E._inputHandler.onLineFeed,E._onLineFeed)),E.register(E._inputHandler),E.register((0,l.forwardEvent)(E._bufferService.onResize,E._onResize)),E.register((0,l.forwardEvent)(E.coreService.onData,E._onData)),E.register((0,l.forwardEvent)(E.coreService.onBinary,E._onBinary)),E.register(E.optionsService.onOptionChange(function(V){return E._updateOptions(V)})),E.register(E._bufferService.onScroll(function(V){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E.register(E._inputHandler.onScroll(function(V){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E._writeBuffer=new T.WriteBuffer(function(V,U){return E._inputHandler.parse(V,U)}),E}return g(x,A),Object.defineProperty(x.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScroll",{get:function(){var O=this;return this._onScrollApi||(this._onScrollApi=new l.EventEmitter,this.register(this._onScroll.event(function(E){var V;(V=O._onScrollApi)===null||V===void 0||V.fire(E.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"options",{get:function(){return this.optionsService.options},set:function(O){for(var E in O)this.optionsService.options[E]=O[E]},enumerable:!1,configurable:!0}),x.prototype.dispose=function(){var O;this._isDisposed||(A.prototype.dispose.call(this),(O=this._windowsMode)===null||O===void 0||O.dispose(),this._windowsMode=void 0)},x.prototype.write=function(O,E){this._writeBuffer.write(O,E)},x.prototype.writeSync=function(O,E){this._logService.logLevel<=y.LogLevelEnum.WARN&&!H&&(this._logService.warn("writeSync is unreliable and will be removed soon."),H=!0),this._writeBuffer.writeSync(O,E)},x.prototype.resize=function(O,E){isNaN(O)||isNaN(E)||(O=Math.max(O,u.MINIMUM_COLS),E=Math.max(E,u.MINIMUM_ROWS),this._bufferService.resize(O,E))},x.prototype.scroll=function(O,E){E===void 0&&(E=!1),this._bufferService.scroll(O,E)},x.prototype.scrollLines=function(O,E,V){this._bufferService.scrollLines(O,E,V)},x.prototype.scrollPages=function(O){this._bufferService.scrollPages(O)},x.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},x.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},x.prototype.scrollToLine=function(O){this._bufferService.scrollToLine(O)},x.prototype.registerEscHandler=function(O,E){return this._inputHandler.registerEscHandler(O,E)},x.prototype.registerDcsHandler=function(O,E){return this._inputHandler.registerDcsHandler(O,E)},x.prototype.registerCsiHandler=function(O,E){return this._inputHandler.registerCsiHandler(O,E)},x.prototype.registerOscHandler=function(O,E){return this._inputHandler.registerOscHandler(O,E)},x.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},x.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},x.prototype._updateOptions=function(O){var E;switch(O){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((E=this._windowsMode)===null||E===void 0||E.dispose(),this._windowsMode=void 0)}},x.prototype._enableWindowsMode=function(){var O=this;if(!this._windowsMode){var E=[];E.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},function(){return(0,m.updateWindowsModeWrappedState)(O._bufferService),!1})),this._windowsMode={dispose:function(){for(var V=0,U=E;V<U.length;V++)U[V].dispose()}}}},x}(C.Disposable);h.CoreTerminal=I},8460:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.forwardEvent=h.EventEmitter=void 0;var L=function(){function p(){this._listeners=[],this._disposed=!1}return Object.defineProperty(p.prototype,"event",{get:function(){var g=this;return this._event||(this._event=function(C){return g._listeners.push(C),{dispose:function(){if(!g._disposed){for(var y=0;y<g._listeners.length;y++)if(g._listeners[y]===C)return void g._listeners.splice(y,1)}}}}),this._event},enumerable:!1,configurable:!0}),p.prototype.fire=function(g,C){for(var y=[],b=0;b<this._listeners.length;b++)y.push(this._listeners[b]);for(b=0;b<y.length;b++)y[b].call(void 0,g,C)},p.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},p}();h.EventEmitter=L,h.forwardEvent=function(p,g){return p(function(C){return g.fire(C)})}},5435:function(X,h,L){var p,g=this&&this.__extends||(p=function(V,U){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,W){F.__proto__=W}||function(F,W){for(var Y in W)Object.prototype.hasOwnProperty.call(W,Y)&&(F[Y]=W[Y])},p(V,U)},function(V,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function F(){this.constructor=V}p(V,U),V.prototype=U===null?Object.create(U):(F.prototype=U.prototype,new F)});Object.defineProperty(h,"__esModule",{value:!0}),h.InputHandler=h.WindowsOptionsReportType=void 0;var C,y=L(2584),b=L(7116),S=L(2015),u=L(844),f=L(8273),v=L(482),l=L(8437),s=L(8460),o=L(643),a=L(511),d=L(3734),m=L(2585),k=L(6242),T=L(6351),H=L(5941),I={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function x(V,U){if(V>24)return U.setWinLines||!1;switch(V){case 1:return!!U.restoreWin;case 2:return!!U.minimizeWin;case 3:return!!U.setWinPosition;case 4:return!!U.setWinSizePixels;case 5:return!!U.raiseWin;case 6:return!!U.lowerWin;case 7:return!!U.refreshWin;case 8:return!!U.setWinSizeChars;case 9:return!!U.maximizeWin;case 10:return!!U.fullscreenWin;case 11:return!!U.getWinState;case 13:return!!U.getWinPosition;case 14:return!!U.getWinSizePixels;case 15:return!!U.getScreenSizePixels;case 16:return!!U.getCellSizePixels;case 18:return!!U.getWinSizeChars;case 19:return!!U.getScreenSizeChars;case 20:return!!U.getIconTitle;case 21:return!!U.getWinTitle;case 22:return!!U.pushTitle;case 23:return!!U.popTitle;case 24:return!!U.setWinLines}return!1}(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(C=h.WindowsOptionsReportType||(h.WindowsOptionsReportType={}));var O=function(){function V(U,F,W,Y){this._bufferService=U,this._coreService=F,this._logService=W,this._optionsService=Y,this._data=new Uint32Array(0)}return V.prototype.hook=function(U){this._data=new Uint32Array(0)},V.prototype.put=function(U,F,W){this._data=(0,f.concat)(this._data,U.subarray(F,W))},V.prototype.unhook=function(U){if(!U)return this._data=new Uint32Array(0),!0;var F=(0,v.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),F){case'"q':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r0"q'+y.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r61;1"p'+y.C0.ESC+"\\");break;case"r":var W=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+W+y.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(y.C0.ESC+"P1$r0m"+y.C0.ESC+"\\");break;case" q":var Y={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];Y-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+Y+" q"+y.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",F),this._coreService.triggerDataEvent(y.C0.ESC+"P0$r"+y.C0.ESC+"\\")}return!0},V}(),E=function(V){function U(F,W,Y,J,fe,le,Ce,we,he){he===void 0&&(he=new S.EscapeSequenceParser);var B=V.call(this)||this;B._bufferService=F,B._charsetService=W,B._coreService=Y,B._dirtyRowService=J,B._logService=fe,B._optionsService=le,B._coreMouseService=Ce,B._unicodeService=we,B._parser=he,B._parseBuffer=new Uint32Array(4096),B._stringDecoder=new v.StringToUtf32,B._utf8Decoder=new v.Utf8ToUtf32,B._workCell=new a.CellData,B._windowTitle="",B._iconName="",B._windowTitleStack=[],B._iconNameStack=[],B._curAttrData=l.DEFAULT_ATTR_DATA.clone(),B._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),B._onRequestBell=new s.EventEmitter,B._onRequestRefreshRows=new s.EventEmitter,B._onRequestReset=new s.EventEmitter,B._onRequestSendFocus=new s.EventEmitter,B._onRequestSyncScrollBar=new s.EventEmitter,B._onRequestWindowsOptionsReport=new s.EventEmitter,B._onA11yChar=new s.EventEmitter,B._onA11yTab=new s.EventEmitter,B._onCursorMove=new s.EventEmitter,B._onLineFeed=new s.EventEmitter,B._onScroll=new s.EventEmitter,B._onTitleChange=new s.EventEmitter,B._onColor=new s.EventEmitter,B._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},B._specialColors=[256,257,258],B.register(B._parser),B._activeBuffer=B._bufferService.buffer,B.register(B._bufferService.buffers.onBufferActivate(function(Z){return B._activeBuffer=Z.activeBuffer})),B._parser.setCsiHandlerFallback(function(Z,_e){B._logService.debug("Unknown CSI code: ",{identifier:B._parser.identToString(Z),params:_e.toArray()})}),B._parser.setEscHandlerFallback(function(Z){B._logService.debug("Unknown ESC code: ",{identifier:B._parser.identToString(Z)})}),B._parser.setExecuteHandlerFallback(function(Z){B._logService.debug("Unknown EXECUTE code: ",{code:Z})}),B._parser.setOscHandlerFallback(function(Z,_e,Le){B._logService.debug("Unknown OSC code: ",{identifier:Z,action:_e,data:Le})}),B._parser.setDcsHandlerFallback(function(Z,_e,Le){_e==="HOOK"&&(Le=Le.toArray()),B._logService.debug("Unknown DCS code: ",{identifier:B._parser.identToString(Z),action:_e,payload:Le})}),B._parser.setPrintHandler(function(Z,_e,Le){return B.print(Z,_e,Le)}),B._parser.registerCsiHandler({final:"@"},function(Z){return B.insertChars(Z)}),B._parser.registerCsiHandler({intermediates:" ",final:"@"},function(Z){return B.scrollLeft(Z)}),B._parser.registerCsiHandler({final:"A"},function(Z){return B.cursorUp(Z)}),B._parser.registerCsiHandler({intermediates:" ",final:"A"},function(Z){return B.scrollRight(Z)}),B._parser.registerCsiHandler({final:"B"},function(Z){return B.cursorDown(Z)}),B._parser.registerCsiHandler({final:"C"},function(Z){return B.cursorForward(Z)}),B._parser.registerCsiHandler({final:"D"},function(Z){return B.cursorBackward(Z)}),B._parser.registerCsiHandler({final:"E"},function(Z){return B.cursorNextLine(Z)}),B._parser.registerCsiHandler({final:"F"},function(Z){return B.cursorPrecedingLine(Z)}),B._parser.registerCsiHandler({final:"G"},function(Z){return B.cursorCharAbsolute(Z)}),B._parser.registerCsiHandler({final:"H"},function(Z){return B.cursorPosition(Z)}),B._parser.registerCsiHandler({final:"I"},function(Z){return B.cursorForwardTab(Z)}),B._parser.registerCsiHandler({final:"J"},function(Z){return B.eraseInDisplay(Z)}),B._parser.registerCsiHandler({prefix:"?",final:"J"},function(Z){return B.eraseInDisplay(Z)}),B._parser.registerCsiHandler({final:"K"},function(Z){return B.eraseInLine(Z)}),B._parser.registerCsiHandler({prefix:"?",final:"K"},function(Z){return B.eraseInLine(Z)}),B._parser.registerCsiHandler({final:"L"},function(Z){return B.insertLines(Z)}),B._parser.registerCsiHandler({final:"M"},function(Z){return B.deleteLines(Z)}),B._parser.registerCsiHandler({final:"P"},function(Z){return B.deleteChars(Z)}),B._parser.registerCsiHandler({final:"S"},function(Z){return B.scrollUp(Z)}),B._parser.registerCsiHandler({final:"T"},function(Z){return B.scrollDown(Z)}),B._parser.registerCsiHandler({final:"X"},function(Z){return B.eraseChars(Z)}),B._parser.registerCsiHandler({final:"Z"},function(Z){return B.cursorBackwardTab(Z)}),B._parser.registerCsiHandler({final:"`"},function(Z){return B.charPosAbsolute(Z)}),B._parser.registerCsiHandler({final:"a"},function(Z){return B.hPositionRelative(Z)}),B._parser.registerCsiHandler({final:"b"},function(Z){return B.repeatPrecedingCharacter(Z)}),B._parser.registerCsiHandler({final:"c"},function(Z){return B.sendDeviceAttributesPrimary(Z)}),B._parser.registerCsiHandler({prefix:">",final:"c"},function(Z){return B.sendDeviceAttributesSecondary(Z)}),B._parser.registerCsiHandler({final:"d"},function(Z){return B.linePosAbsolute(Z)}),B._parser.registerCsiHandler({final:"e"},function(Z){return B.vPositionRelative(Z)}),B._parser.registerCsiHandler({final:"f"},function(Z){return B.hVPosition(Z)}),B._parser.registerCsiHandler({final:"g"},function(Z){return B.tabClear(Z)}),B._parser.registerCsiHandler({final:"h"},function(Z){return B.setMode(Z)}),B._parser.registerCsiHandler({prefix:"?",final:"h"},function(Z){return B.setModePrivate(Z)}),B._parser.registerCsiHandler({final:"l"},function(Z){return B.resetMode(Z)}),B._parser.registerCsiHandler({prefix:"?",final:"l"},function(Z){return B.resetModePrivate(Z)}),B._parser.registerCsiHandler({final:"m"},function(Z){return B.charAttributes(Z)}),B._parser.registerCsiHandler({final:"n"},function(Z){return B.deviceStatus(Z)}),B._parser.registerCsiHandler({prefix:"?",final:"n"},function(Z){return B.deviceStatusPrivate(Z)}),B._parser.registerCsiHandler({intermediates:"!",final:"p"},function(Z){return B.softReset(Z)}),B._parser.registerCsiHandler({intermediates:" ",final:"q"},function(Z){return B.setCursorStyle(Z)}),B._parser.registerCsiHandler({final:"r"},function(Z){return B.setScrollRegion(Z)}),B._parser.registerCsiHandler({final:"s"},function(Z){return B.saveCursor(Z)}),B._parser.registerCsiHandler({final:"t"},function(Z){return B.windowOptions(Z)}),B._parser.registerCsiHandler({final:"u"},function(Z){return B.restoreCursor(Z)}),B._parser.registerCsiHandler({intermediates:"'",final:"}"},function(Z){return B.insertColumns(Z)}),B._parser.registerCsiHandler({intermediates:"'",final:"~"},function(Z){return B.deleteColumns(Z)}),B._parser.setExecuteHandler(y.C0.BEL,function(){return B.bell()}),B._parser.setExecuteHandler(y.C0.LF,function(){return B.lineFeed()}),B._parser.setExecuteHandler(y.C0.VT,function(){return B.lineFeed()}),B._parser.setExecuteHandler(y.C0.FF,function(){return B.lineFeed()}),B._parser.setExecuteHandler(y.C0.CR,function(){return B.carriageReturn()}),B._parser.setExecuteHandler(y.C0.BS,function(){return B.backspace()}),B._parser.setExecuteHandler(y.C0.HT,function(){return B.tab()}),B._parser.setExecuteHandler(y.C0.SO,function(){return B.shiftOut()}),B._parser.setExecuteHandler(y.C0.SI,function(){return B.shiftIn()}),B._parser.setExecuteHandler(y.C1.IND,function(){return B.index()}),B._parser.setExecuteHandler(y.C1.NEL,function(){return B.nextLine()}),B._parser.setExecuteHandler(y.C1.HTS,function(){return B.tabSet()}),B._parser.registerOscHandler(0,new k.OscHandler(function(Z){return B.setTitle(Z),B.setIconName(Z),!0})),B._parser.registerOscHandler(1,new k.OscHandler(function(Z){return B.setIconName(Z)})),B._parser.registerOscHandler(2,new k.OscHandler(function(Z){return B.setTitle(Z)})),B._parser.registerOscHandler(4,new k.OscHandler(function(Z){return B.setOrReportIndexedColor(Z)})),B._parser.registerOscHandler(10,new k.OscHandler(function(Z){return B.setOrReportFgColor(Z)})),B._parser.registerOscHandler(11,new k.OscHandler(function(Z){return B.setOrReportBgColor(Z)})),B._parser.registerOscHandler(12,new k.OscHandler(function(Z){return B.setOrReportCursorColor(Z)})),B._parser.registerOscHandler(104,new k.OscHandler(function(Z){return B.restoreIndexedColor(Z)})),B._parser.registerOscHandler(110,new k.OscHandler(function(Z){return B.restoreFgColor(Z)})),B._parser.registerOscHandler(111,new k.OscHandler(function(Z){return B.restoreBgColor(Z)})),B._parser.registerOscHandler(112,new k.OscHandler(function(Z){return B.restoreCursorColor(Z)})),B._parser.registerEscHandler({final:"7"},function(){return B.saveCursor()}),B._parser.registerEscHandler({final:"8"},function(){return B.restoreCursor()}),B._parser.registerEscHandler({final:"D"},function(){return B.index()}),B._parser.registerEscHandler({final:"E"},function(){return B.nextLine()}),B._parser.registerEscHandler({final:"H"},function(){return B.tabSet()}),B._parser.registerEscHandler({final:"M"},function(){return B.reverseIndex()}),B._parser.registerEscHandler({final:"="},function(){return B.keypadApplicationMode()}),B._parser.registerEscHandler({final:">"},function(){return B.keypadNumericMode()}),B._parser.registerEscHandler({final:"c"},function(){return B.fullReset()}),B._parser.registerEscHandler({final:"n"},function(){return B.setgLevel(2)}),B._parser.registerEscHandler({final:"o"},function(){return B.setgLevel(3)}),B._parser.registerEscHandler({final:"|"},function(){return B.setgLevel(3)}),B._parser.registerEscHandler({final:"}"},function(){return B.setgLevel(2)}),B._parser.registerEscHandler({final:"~"},function(){return B.setgLevel(1)}),B._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return B.selectDefaultCharset()}),B._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return B.selectDefaultCharset()});var j=function(Z){q._parser.registerEscHandler({intermediates:"(",final:Z},function(){return B.selectCharset("("+Z)}),q._parser.registerEscHandler({intermediates:")",final:Z},function(){return B.selectCharset(")"+Z)}),q._parser.registerEscHandler({intermediates:"*",final:Z},function(){return B.selectCharset("*"+Z)}),q._parser.registerEscHandler({intermediates:"+",final:Z},function(){return B.selectCharset("+"+Z)}),q._parser.registerEscHandler({intermediates:"-",final:Z},function(){return B.selectCharset("-"+Z)}),q._parser.registerEscHandler({intermediates:".",final:Z},function(){return B.selectCharset("."+Z)}),q._parser.registerEscHandler({intermediates:"/",final:Z},function(){return B.selectCharset("/"+Z)})},q=this;for(var ae in b.CHARSETS)j(ae);return B._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return B.screenAlignmentPattern()}),B._parser.setErrorHandler(function(Z){return B._logService.error("Parsing error: ",Z),Z}),B._parser.registerDcsHandler({intermediates:"$",final:"q"},new O(B._bufferService,B._coreService,B._logService,B._optionsService)),B}return g(U,V),Object.defineProperty(U.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),U.prototype.dispose=function(){V.prototype.dispose.call(this)},U.prototype._preserveStack=function(F,W,Y,J){this._parseStack.paused=!0,this._parseStack.cursorStartX=F,this._parseStack.cursorStartY=W,this._parseStack.decodedLength=Y,this._parseStack.position=J},U.prototype._logSlowResolvingAsync=function(F){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([F,new Promise(function(W,Y){return setTimeout(function(){return Y("#SLOW_TIMEOUT")},5e3)})]).catch(function(W){if(W!=="#SLOW_TIMEOUT")throw W;console.warn("async parser handler taking longer than 5000 ms")})},U.prototype.parse=function(F,W){var Y,J=this._activeBuffer.x,fe=this._activeBuffer.y,le=0,Ce=this._parseStack.paused;if(Ce){if(Y=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,W))return this._logSlowResolvingAsync(Y),Y;J=this._parseStack.cursorStartX,fe=this._parseStack.cursorStartY,this._parseStack.paused=!1,F.length>A&&(le=this._parseStack.position+A)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof F=="string"?' "'+F+'"':""),typeof F=="string"?F.split("").map(function(j){return j.charCodeAt(0)}):F),this._parseBuffer.length<F.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(F.length,A))),Ce||this._dirtyRowService.clearRange(),F.length>A)for(var we=le;we<F.length;we+=A){var he=we+A<F.length?we+A:F.length,B=typeof F=="string"?this._stringDecoder.decode(F.substring(we,he),this._parseBuffer):this._utf8Decoder.decode(F.subarray(we,he),this._parseBuffer);if(Y=this._parser.parse(this._parseBuffer,B))return this._preserveStack(J,fe,B,we),this._logSlowResolvingAsync(Y),Y}else if(!Ce&&(B=typeof F=="string"?this._stringDecoder.decode(F,this._parseBuffer):this._utf8Decoder.decode(F,this._parseBuffer),Y=this._parser.parse(this._parseBuffer,B)))return this._preserveStack(J,fe,B,0),this._logSlowResolvingAsync(Y),Y;this._activeBuffer.x===J&&this._activeBuffer.y===fe||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},U.prototype.print=function(F,W,Y){var J,fe,le=this._charsetService.charset,Ce=this._optionsService.options.screenReaderMode,we=this._bufferService.cols,he=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,j=this._curAttrData,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Y-W>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,j.fg,j.bg,j.extended);for(var ae=W;ae<Y;++ae){if(J=F[ae],fe=this._unicodeService.wcwidth(J),J<127&&le){var Z=le[String.fromCharCode(J)];Z&&(J=Z.charCodeAt(0))}if(Ce&&this._onA11yChar.fire((0,v.stringFromCodePoint)(J)),fe||!this._activeBuffer.x){if(this._activeBuffer.x+fe-1>=we){if(he){for(;this._activeBuffer.x<we;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,j.fg,j.bg,j.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=we-1,fe===2)continue}if(B&&(q.insertCells(this._activeBuffer.x,fe,this._activeBuffer.getNullCell(j),j),q.getWidth(we-1)===2&&q.setCellFromCodePoint(we-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,j.fg,j.bg,j.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,J,fe,j.fg,j.bg,j.extended),fe>0)for(;--fe;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,j.fg,j.bg,j.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,J):q.addCodepointToCell(this._activeBuffer.x-2,J)}Y-W>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<we&&Y-W>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,j.fg,j.bg,j.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype.registerCsiHandler=function(F,W){var Y=this;return F.final!=="t"||F.prefix||F.intermediates?this._parser.registerCsiHandler(F,W):this._parser.registerCsiHandler(F,function(J){return!x(J.params[0],Y._optionsService.options.windowOptions)||W(J)})},U.prototype.registerDcsHandler=function(F,W){return this._parser.registerDcsHandler(F,new T.DcsHandler(W))},U.prototype.registerEscHandler=function(F,W){return this._parser.registerEscHandler(F,W)},U.prototype.registerOscHandler=function(F,W){return this._parser.registerOscHandler(F,new k.OscHandler(W))},U.prototype.bell=function(){return this._onRequestBell.fire(),!0},U.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},U.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},U.prototype.backspace=function(){var F;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||F===void 0?void 0:F.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);W.hasWidth(this._activeBuffer.x)&&!W.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},U.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var F=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-F),!0},U.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},U.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},U.prototype._restrictCursor=function(F){F===void 0&&(F=this._bufferService.cols-1),this._activeBuffer.x=Math.min(F,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype._setCursor=function(F,W){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=F,this._activeBuffer.y=this._activeBuffer.scrollTop+W):(this._activeBuffer.x=F,this._activeBuffer.y=W),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype._moveCursor=function(F,W){this._restrictCursor(),this._setCursor(this._activeBuffer.x+F,this._activeBuffer.y+W)},U.prototype.cursorUp=function(F){var W=this._activeBuffer.y-this._activeBuffer.scrollTop;return W>=0?this._moveCursor(0,-Math.min(W,F.params[0]||1)):this._moveCursor(0,-(F.params[0]||1)),!0},U.prototype.cursorDown=function(F){var W=this._activeBuffer.scrollBottom-this._activeBuffer.y;return W>=0?this._moveCursor(0,Math.min(W,F.params[0]||1)):this._moveCursor(0,F.params[0]||1),!0},U.prototype.cursorForward=function(F){return this._moveCursor(F.params[0]||1,0),!0},U.prototype.cursorBackward=function(F){return this._moveCursor(-(F.params[0]||1),0),!0},U.prototype.cursorNextLine=function(F){return this.cursorDown(F),this._activeBuffer.x=0,!0},U.prototype.cursorPrecedingLine=function(F){return this.cursorUp(F),this._activeBuffer.x=0,!0},U.prototype.cursorCharAbsolute=function(F){return this._setCursor((F.params[0]||1)-1,this._activeBuffer.y),!0},U.prototype.cursorPosition=function(F){return this._setCursor(F.length>=2?(F.params[1]||1)-1:0,(F.params[0]||1)-1),!0},U.prototype.charPosAbsolute=function(F){return this._setCursor((F.params[0]||1)-1,this._activeBuffer.y),!0},U.prototype.hPositionRelative=function(F){return this._moveCursor(F.params[0]||1,0),!0},U.prototype.linePosAbsolute=function(F){return this._setCursor(this._activeBuffer.x,(F.params[0]||1)-1),!0},U.prototype.vPositionRelative=function(F){return this._moveCursor(0,F.params[0]||1),!0},U.prototype.hVPosition=function(F){return this.cursorPosition(F),!0},U.prototype.tabClear=function(F){var W=F.params[0];return W===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:W===3&&(this._activeBuffer.tabs={}),!0},U.prototype.cursorForwardTab=function(F){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var W=F.params[0]||1;W--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},U.prototype.cursorBackwardTab=function(F){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var W=F.params[0]||1;W--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},U.prototype._eraseInBufferLine=function(F,W,Y,J){J===void 0&&(J=!1);var fe=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);fe.replaceCells(W,Y,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),J&&(fe.isWrapped=!1)},U.prototype._resetBufferLine=function(F){var W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1},U.prototype.eraseInDisplay=function(F){var W;switch(this._restrictCursor(this._bufferService.cols),F.params[0]){case 0:for(W=this._activeBuffer.y,this._dirtyRowService.markDirty(W),this._eraseInBufferLine(W++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);W<this._bufferService.rows;W++)this._resetBufferLine(W);this._dirtyRowService.markDirty(W);break;case 1:for(W=this._activeBuffer.y,this._dirtyRowService.markDirty(W),this._eraseInBufferLine(W,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(W+1).isWrapped=!1);W--;)this._resetBufferLine(W);this._dirtyRowService.markDirty(0);break;case 2:for(W=this._bufferService.rows,this._dirtyRowService.markDirty(W-1);W--;)this._resetBufferLine(W);this._dirtyRowService.markDirty(0);break;case 3:var Y=this._activeBuffer.lines.length-this._bufferService.rows;Y>0&&(this._activeBuffer.lines.trimStart(Y),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-Y,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-Y,0),this._onScroll.fire(0))}return!0},U.prototype.eraseInLine=function(F){switch(this._restrictCursor(this._bufferService.cols),F.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},U.prototype.insertLines=function(F){this._restrictCursor();var W=F.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var Y=this._activeBuffer.ybase+this._activeBuffer.y,J=this._bufferService.rows-1-this._activeBuffer.scrollBottom,fe=this._bufferService.rows-1+this._activeBuffer.ybase-J+1;W--;)this._activeBuffer.lines.splice(fe-1,1),this._activeBuffer.lines.splice(Y,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},U.prototype.deleteLines=function(F){this._restrictCursor();var W=F.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var Y,J=this._activeBuffer.ybase+this._activeBuffer.y;for(Y=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Y=this._bufferService.rows-1+this._activeBuffer.ybase-Y;W--;)this._activeBuffer.lines.splice(J,1),this._activeBuffer.lines.splice(Y,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},U.prototype.insertChars=function(F){this._restrictCursor();var W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return W&&(W.insertCells(this._activeBuffer.x,F.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.deleteChars=function(F){this._restrictCursor();var W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return W&&(W.deleteCells(this._activeBuffer.x,F.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.scrollUp=function(F){for(var W=F.params[0]||1;W--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollDown=function(F){for(var W=F.params[0]||1;W--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollLeft=function(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var W=F.params[0]||1,Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){var J=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);J.deleteCells(0,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),J.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollRight=function(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var W=F.params[0]||1,Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){var J=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);J.insertCells(0,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),J.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.insertColumns=function(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var W=F.params[0]||1,Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){var J=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);J.insertCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),J.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.deleteColumns=function(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var W=F.params[0]||1,Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){var J=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);J.deleteCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),J.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.eraseChars=function(F){this._restrictCursor();var W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return W&&(W.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(F.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.repeatPrecedingCharacter=function(F){if(!this._parser.precedingCodepoint)return!0;for(var W=F.params[0]||1,Y=new Uint32Array(W),J=0;J<W;++J)Y[J]=this._parser.precedingCodepoint;return this.print(Y,0,Y.length),!0},U.prototype.sendDeviceAttributesPrimary=function(F){return F.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(y.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(y.C0.ESC+"[?6c")),!0},U.prototype.sendDeviceAttributesSecondary=function(F){return F.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(y.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(y.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(F.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(y.C0.ESC+"[>83;40003;0c")),!0},U.prototype._is=function(F){return(this._optionsService.options.termName+"").indexOf(F)===0},U.prototype.setMode=function(F){for(var W=0;W<F.length;W++)F.params[W]===4&&(this._coreService.modes.insertMode=!0);return!0},U.prototype.setModePrivate=function(F){for(var W=0;W<F.length;W++)switch(F.params[W]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},U.prototype.resetMode=function(F){for(var W=0;W<F.length;W++)F.params[W]===4&&(this._coreService.modes.insertMode=!1);return!0},U.prototype.resetModePrivate=function(F){for(var W=0;W<F.length;W++)switch(F.params[W]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),F.params[W]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},U.prototype._updateAttrColor=function(F,W,Y,J,fe){return W===2?(F|=50331648,F&=-16777216,F|=d.AttributeData.fromColorRGB([Y,J,fe])):W===5&&(F&=-50331904,F|=33554432|255&Y),F},U.prototype._extractColor=function(F,W,Y){var J=[0,0,-1,0,0,0],fe=0,le=0;do{if(J[le+fe]=F.params[W+le],F.hasSubParams(W+le)){var Ce=F.getSubParams(W+le),we=0;do J[1]===5&&(fe=1),J[le+we+1+fe]=Ce[we];while(++we<Ce.length&&we+le+1+fe<J.length);break}if(J[1]===5&&le+fe>=2||J[1]===2&&le+fe>=5)break;J[1]&&(fe=1)}while(++le+W<F.length&&le+fe<J.length);for(we=2;we<J.length;++we)J[we]===-1&&(J[we]=0);switch(J[0]){case 38:Y.fg=this._updateAttrColor(Y.fg,J[1],J[3],J[4],J[5]);break;case 48:Y.bg=this._updateAttrColor(Y.bg,J[1],J[3],J[4],J[5]);break;case 58:Y.extended=Y.extended.clone(),Y.extended.underlineColor=this._updateAttrColor(Y.extended.underlineColor,J[1],J[3],J[4],J[5])}return le},U.prototype._processUnderline=function(F,W){W.extended=W.extended.clone(),(!~F||F>5)&&(F=1),W.extended.underlineStyle=F,W.fg|=268435456,F===0&&(W.fg&=-268435457),W.updateExtended()},U.prototype.charAttributes=function(F){if(F.length===1&&F.params[0]===0)return this._curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var W,Y=F.length,J=this._curAttrData,fe=0;fe<Y;fe++)(W=F.params[fe])>=30&&W<=37?(J.fg&=-50331904,J.fg|=16777216|W-30):W>=40&&W<=47?(J.bg&=-50331904,J.bg|=16777216|W-40):W>=90&&W<=97?(J.fg&=-50331904,J.fg|=16777224|W-90):W>=100&&W<=107?(J.bg&=-50331904,J.bg|=16777224|W-100):W===0?(J.fg=l.DEFAULT_ATTR_DATA.fg,J.bg=l.DEFAULT_ATTR_DATA.bg):W===1?J.fg|=134217728:W===3?J.bg|=67108864:W===4?(J.fg|=268435456,this._processUnderline(F.hasSubParams(fe)?F.getSubParams(fe)[0]:1,J)):W===5?J.fg|=536870912:W===7?J.fg|=67108864:W===8?J.fg|=1073741824:W===9?J.fg|=2147483648:W===2?J.bg|=134217728:W===21?this._processUnderline(2,J):W===22?(J.fg&=-134217729,J.bg&=-134217729):W===23?J.bg&=-67108865:W===24?J.fg&=-268435457:W===25?J.fg&=-536870913:W===27?J.fg&=-67108865:W===28?J.fg&=-1073741825:W===29?J.fg&=2147483647:W===39?(J.fg&=-67108864,J.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):W===49?(J.bg&=-67108864,J.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):W===38||W===48||W===58?fe+=this._extractColor(F,fe,J):W===59?(J.extended=J.extended.clone(),J.extended.underlineColor=-1,J.updateExtended()):W===100?(J.fg&=-67108864,J.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,J.bg&=-67108864,J.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",W);return!0},U.prototype.deviceStatus=function(F){switch(F.params[0]){case 5:this._coreService.triggerDataEvent(y.C0.ESC+"[0n");break;case 6:var W=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(y.C0.ESC+"["+W+";"+Y+"R")}return!0},U.prototype.deviceStatusPrivate=function(F){if(F.params[0]===6){var W=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(y.C0.ESC+"[?"+W+";"+Y+"R")}return!0},U.prototype.softReset=function(F){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},U.prototype.setCursorStyle=function(F){var W=F.params[0]||1;switch(W){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var Y=W%2==1;return this._optionsService.options.cursorBlink=Y,!0},U.prototype.setScrollRegion=function(F){var W,Y=F.params[0]||1;return(F.length<2||(W=F.params[1])>this._bufferService.rows||W===0)&&(W=this._bufferService.rows),W>Y&&(this._activeBuffer.scrollTop=Y-1,this._activeBuffer.scrollBottom=W-1,this._setCursor(0,0)),!0},U.prototype.windowOptions=function(F){if(!x(F.params[0],this._optionsService.options.windowOptions))return!0;var W=F.length>1?F.params[1]:0;switch(F.params[0]){case 14:W!==2&&this._onRequestWindowsOptionsReport.fire(C.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(C.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(y.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:W!==0&&W!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),W!==0&&W!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:W!==0&&W!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),W!==0&&W!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},U.prototype.saveCursor=function(F){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},U.prototype.restoreCursor=function(F){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},U.prototype.setTitle=function(F){return this._windowTitle=F,this._onTitleChange.fire(F),!0},U.prototype.setIconName=function(F){return this._iconName=F,!0},U.prototype.setOrReportIndexedColor=function(F){for(var W=[],Y=F.split(";");Y.length>1;){var J=Y.shift(),fe=Y.shift();if(/^\d+$/.exec(J)){var le=parseInt(J);if(0<=le&&le<256)if(fe==="?")W.push({type:0,index:le});else{var Ce=(0,H.parseColor)(fe);Ce&&W.push({type:1,index:le,color:Ce})}}}return W.length&&this._onColor.fire(W),!0},U.prototype._setOrReportSpecialColor=function(F,W){for(var Y=F.split(";"),J=0;J<Y.length&&!(W>=this._specialColors.length);++J,++W)if(Y[J]==="?")this._onColor.fire([{type:0,index:this._specialColors[W]}]);else{var fe=(0,H.parseColor)(Y[J]);fe&&this._onColor.fire([{type:1,index:this._specialColors[W],color:fe}])}return!0},U.prototype.setOrReportFgColor=function(F){return this._setOrReportSpecialColor(F,0)},U.prototype.setOrReportBgColor=function(F){return this._setOrReportSpecialColor(F,1)},U.prototype.setOrReportCursorColor=function(F){return this._setOrReportSpecialColor(F,2)},U.prototype.restoreIndexedColor=function(F){if(!F)return this._onColor.fire([{type:2}]),!0;for(var W=[],Y=F.split(";"),J=0;J<Y.length;++J)if(/^\d+$/.exec(Y[J])){var fe=parseInt(Y[J]);0<=fe&&fe<256&&W.push({type:2,index:fe})}return W.length&&this._onColor.fire(W),!0},U.prototype.restoreFgColor=function(F){return this._onColor.fire([{type:2,index:256}]),!0},U.prototype.restoreBgColor=function(F){return this._onColor.fire([{type:2,index:257}]),!0},U.prototype.restoreCursorColor=function(F){return this._onColor.fire([{type:2,index:258}]),!0},U.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},U.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},U.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},U.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0},U.prototype.selectCharset=function(F){return F.length!==2?(this.selectDefaultCharset(),!0):(F[0]==="/"||this._charsetService.setgCharset(I[F[0]],b.CHARSETS[F[1]]||b.DEFAULT_CHARSET),!0)},U.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},U.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},U.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var F=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,F,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},U.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},U.prototype.reset=function(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()},U.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},U.prototype.setgLevel=function(F){return this._charsetService.setgLevel(F),!0},U.prototype.screenAlignmentPattern=function(){var F=new a.CellData;F.content=1<<22|"E".charCodeAt(0),F.fg=this._curAttrData.fg,F.bg=this._curAttrData.bg,this._setCursor(0,0);for(var W=0;W<this._bufferService.rows;++W){var Y=this._activeBuffer.ybase+this._activeBuffer.y+W,J=this._activeBuffer.lines.get(Y);J&&(J.fill(F),J.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},U}(u.Disposable);h.InputHandler=E},844:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getDisposeArrayDisposable=h.disposeArray=h.Disposable=void 0;var L=function(){function g(){this._disposables=[],this._isDisposed=!1}return g.prototype.dispose=function(){this._isDisposed=!0;for(var C=0,y=this._disposables;C<y.length;C++)y[C].dispose();this._disposables.length=0},g.prototype.register=function(C){return this._disposables.push(C),C},g.prototype.unregister=function(C){var y=this._disposables.indexOf(C);y!==-1&&this._disposables.splice(y,1)},g}();function p(g){for(var C=0,y=g;C<y.length;C++)y[C].dispose();g.length=0}h.Disposable=L,h.disposeArray=p,h.getDisposeArrayDisposable=function(g){return{dispose:function(){return p(g)}}}},6114:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isLinux=h.isWindows=h.isIphone=h.isIpad=h.isMac=h.isSafari=h.isFirefox=void 0;var L=typeof navigator=="undefined",p=L?"node":navigator.userAgent,g=L?"node":navigator.platform;h.isFirefox=p.includes("Firefox"),h.isSafari=/^((?!chrome|android).)*safari/i.test(p),h.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(g),h.isIpad=g==="iPad",h.isIphone=g==="iPhone",h.isWindows=["Windows","Win16","Win32","WinCE"].includes(g),h.isLinux=g.indexOf("Linux")>=0},8273:(X,h)=>{function L(p,g,C,y){if(C===void 0&&(C=0),y===void 0&&(y=p.length),C>=p.length)return p;C=(p.length+C)%p.length,y=y>=p.length?p.length:(p.length+y)%p.length;for(var b=C;b<y;++b)p[b]=g;return p}Object.defineProperty(h,"__esModule",{value:!0}),h.concat=h.fillFallback=h.fill=void 0,h.fill=function(p,g,C,y){return p.fill?p.fill(g,C,y):L(p,g,C,y)},h.fillFallback=L,h.concat=function(p,g){var C=new p.constructor(p.length+g.length);return C.set(p),C.set(g,p.length),C}},9282:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.updateWindowsModeWrappedState=void 0;var p=L(643);h.updateWindowsModeWrappedState=function(g){var C=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1),y=C==null?void 0:C.get(g.cols-1),b=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);b&&y&&(b.isWrapped=y[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&y[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ExtendedAttrs=h.AttributeData=void 0;var L=function(){function g(){this.fg=0,this.bg=0,this.extended=new p}return g.toColorRGB=function(C){return[C>>>16&255,C>>>8&255,255&C]},g.fromColorRGB=function(C){return(255&C[0])<<16|(255&C[1])<<8|255&C[2]},g.prototype.clone=function(){var C=new g;return C.fg=this.fg,C.bg=this.bg,C.extended=this.extended.clone(),C},g.prototype.isInverse=function(){return 67108864&this.fg},g.prototype.isBold=function(){return 134217728&this.fg},g.prototype.isUnderline=function(){return 268435456&this.fg},g.prototype.isBlink=function(){return 536870912&this.fg},g.prototype.isInvisible=function(){return 1073741824&this.fg},g.prototype.isItalic=function(){return 67108864&this.bg},g.prototype.isDim=function(){return 134217728&this.bg},g.prototype.isStrikethrough=function(){return 2147483648&this.fg},g.prototype.getFgColorMode=function(){return 50331648&this.fg},g.prototype.getBgColorMode=function(){return 50331648&this.bg},g.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},g.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},g.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},g.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},g.prototype.isFgDefault=function(){return(50331648&this.fg)==0},g.prototype.isBgDefault=function(){return(50331648&this.bg)==0},g.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},g.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},g.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},g.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},g.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},g.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},g.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},g.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},g.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},g.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},g.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},g}();h.AttributeData=L;var p=function(){function g(C,y){C===void 0&&(C=0),y===void 0&&(y=-1),this.underlineStyle=C,this.underlineColor=y}return g.prototype.clone=function(){return new g(this.underlineStyle,this.underlineColor)},g.prototype.isEmpty=function(){return this.underlineStyle===0},g}();h.ExtendedAttrs=p},9092:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferStringIterator=h.Buffer=h.MAX_BUFFER_SIZE=void 0;var p=L(6349),g=L(8437),C=L(511),y=L(643),b=L(4634),S=L(4863),u=L(7116),f=L(3734);h.MAX_BUFFER_SIZE=4294967295;var v=function(){function s(o,a,d){this._hasScrollback=o,this._optionsService=a,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return s.prototype.getNullCell=function(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell},s.prototype.getWhitespaceCell=function(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell},s.prototype.getBlankLine=function(o,a){return new g.BufferLine(this._bufferService.cols,this.getNullCell(o),a)},Object.defineProperty(s.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isCursorInViewport",{get:function(){var o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows},enumerable:!1,configurable:!0}),s.prototype._getCorrectBufferLength=function(o){if(!this._hasScrollback)return o;var a=o+this._optionsService.options.scrollback;return a>h.MAX_BUFFER_SIZE?h.MAX_BUFFER_SIZE:a},s.prototype.fillViewportRows=function(o){if(this.lines.length===0){o===void 0&&(o=g.DEFAULT_ATTR_DATA);for(var a=this._rows;a--;)this.lines.push(this.getBlankLine(o))}},s.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},s.prototype.resize=function(o,a){var d=this.getNullCell(g.DEFAULT_ATTR_DATA),m=this._getCorrectBufferLength(a);if(m>this.lines.maxLength&&(this.lines.maxLength=m),this.lines.length>0){if(this._cols<o)for(var k=0;k<this.lines.length;k++)this.lines.get(k).resize(o,d);var T=0;if(this._rows<a)for(var H=this._rows;H<a;H++)this.lines.length<a+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new g.BufferLine(o,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+T+1?(this.ybase--,T++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(o,d)));else for(H=this._rows;H>a;H--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(m<this.lines.maxLength){var I=this.lines.length-m;I>0&&(this.lines.trimStart(I),this.ybase=Math.max(this.ybase-I,0),this.ydisp=Math.max(this.ydisp-I,0),this.savedY=Math.max(this.savedY-I,0)),this.lines.maxLength=m}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,a-1),T&&(this.y+=T),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(o,a),this._cols>o))for(k=0;k<this.lines.length;k++)this.lines.get(k).resize(o,d);this._cols=o,this._rows=a},Object.defineProperty(s.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),s.prototype._reflow=function(o,a){this._cols!==o&&(o>this._cols?this._reflowLarger(o,a):this._reflowSmaller(o,a))},s.prototype._reflowLarger=function(o,a){var d=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(d.length>0){var m=(0,b.reflowLargerCreateNewLayout)(this.lines,d);(0,b.reflowLargerApplyNewLayout)(this.lines,m.layout),this._reflowLargerAdjustViewport(o,a,m.countRemoved)}},s.prototype._reflowLargerAdjustViewport=function(o,a,d){for(var m=this.getNullCell(g.DEFAULT_ATTR_DATA),k=d;k-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new g.BufferLine(o,m))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)},s.prototype._reflowSmaller=function(o,a){for(var d=this.getNullCell(g.DEFAULT_ATTR_DATA),m=[],k=0,T=this.lines.length-1;T>=0;T--){var H=this.lines.get(T);if(!(!H||!H.isWrapped&&H.getTrimmedLength()<=o)){for(var I=[H];H.isWrapped&&T>0;)H=this.lines.get(--T),I.unshift(H);var A=this.ybase+this.y;if(!(A>=T&&A<T+I.length)){var x,O=I[I.length-1].getTrimmedLength(),E=(0,b.reflowSmallerGetNewLineLengths)(I,this._cols,o),V=E.length-I.length;x=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+V):Math.max(0,this.lines.length-this.lines.maxLength+V);for(var U=[],F=0;F<V;F++){var W=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);U.push(W)}U.length>0&&(m.push({start:T+I.length+k,newLines:U}),k+=U.length),I.push.apply(I,U);var Y=E.length-1,J=E[Y];J===0&&(J=E[--Y]);for(var fe=I.length-V-1,le=O;fe>=0;){var Ce=Math.min(le,J);if(I[Y].copyCellsFrom(I[fe],le-Ce,J-Ce,Ce,!0),(J-=Ce)==0&&(J=E[--Y]),(le-=Ce)==0){fe--;var we=Math.max(fe,0);le=(0,b.getWrappedLineTrimmedLength)(I,we,this._cols)}}for(F=0;F<I.length;F++)E[F]<o&&I[F].setCell(E[F],d);for(var he=V-x;he-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+k)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+V,this.ybase+a-1)}}}if(m.length>0){var B=[],j=[];for(F=0;F<this.lines.length;F++)j.push(this.lines.get(F));var q=this.lines.length,ae=q-1,Z=0,_e=m[Z];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+k);var Le=0;for(F=Math.min(this.lines.maxLength-1,q+k-1);F>=0;F--)if(_e&&_e.start>ae+Le){for(var Be=_e.newLines.length-1;Be>=0;Be--)this.lines.set(F--,_e.newLines[Be]);F++,B.push({index:ae+1,amount:_e.newLines.length}),Le+=_e.newLines.length,_e=m[++Z]}else this.lines.set(F,j[ae--]);var Ee=0;for(F=B.length-1;F>=0;F--)B[F].index+=Ee,this.lines.onInsertEmitter.fire(B[F]),Ee+=B[F].amount;var He=Math.max(0,q+k-this.lines.maxLength);He>0&&this.lines.onTrimEmitter.fire(He)}},s.prototype.stringIndexToBufferIndex=function(o,a,d){for(d===void 0&&(d=!1);a;){var m=this.lines.get(o);if(!m)return[-1,-1];for(var k=d?m.getTrimmedLength():m.length,T=0;T<k;++T)if(m.get(T)[y.CHAR_DATA_WIDTH_INDEX]&&(a-=m.get(T)[y.CHAR_DATA_CHAR_INDEX].length||1),a<0)return[o,T];o++}return[o,0]},s.prototype.translateBufferLineToString=function(o,a,d,m){d===void 0&&(d=0);var k=this.lines.get(o);return k?k.translateToString(a,d,m):""},s.prototype.getWrappedRangeForLine=function(o){for(var a=o,d=o;a>0&&this.lines.get(a).isWrapped;)a--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:a,last:d}},s.prototype.setupTabStops=function(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.options.tabStopWidth)this.tabs[o]=!0},s.prototype.prevStop=function(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.nextStop=function(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.addMarker=function(o){var a=this,d=new S.Marker(o);return this.markers.push(d),d.register(this.lines.onTrim(function(m){d.line-=m,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(function(m){d.line>=m.index&&(d.line+=m.amount)})),d.register(this.lines.onDelete(function(m){d.line>=m.index&&d.line<m.index+m.amount&&d.dispose(),d.line>m.index&&(d.line-=m.amount)})),d.register(d.onDispose(function(){return a._removeMarker(d)})),d},s.prototype._removeMarker=function(o){this.markers.splice(this.markers.indexOf(o),1)},s.prototype.iterator=function(o,a,d,m,k){return new l(this,o,a,d,m,k)},s}();h.Buffer=v;var l=function(){function s(o,a,d,m,k,T){d===void 0&&(d=0),m===void 0&&(m=o.lines.length),k===void 0&&(k=0),T===void 0&&(T=0),this._buffer=o,this._trimRight=a,this._startIndex=d,this._endIndex=m,this._startOverscan=k,this._endOverscan=T,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return s.prototype.hasNext=function(){return this._current<this._endIndex},s.prototype.next=function(){var o=this._buffer.getWrappedRangeForLine(this._current);o.first<this._startIndex-this._startOverscan&&(o.first=this._startIndex-this._startOverscan),o.last>this._endIndex+this._endOverscan&&(o.last=this._endIndex+this._endOverscan),o.first=Math.max(o.first,0),o.last=Math.min(o.last,this._buffer.lines.length);for(var a="",d=o.first;d<=o.last;++d)a+=this._buffer.translateBufferLineToString(d,this._trimRight);return this._current=o.last+1,{range:o,content:a}},s}();h.BufferStringIterator=l},8437:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLine=h.DEFAULT_ATTR_DATA=void 0;var p=L(482),g=L(643),C=L(511),y=L(3734);h.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);var b=function(){function S(u,f,v){v===void 0&&(v=!1),this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);for(var l=f||C.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),s=0;s<u;++s)this.setCell(s,l);this.length=u}return S.prototype.get=function(u){var f=this._data[3*u+0],v=2097151&f;return[this._data[3*u+1],2097152&f?this._combined[u]:v?(0,p.stringFromCodePoint)(v):"",f>>22,2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):v]},S.prototype.set=function(u,f){this._data[3*u+1]=f[g.CHAR_DATA_ATTR_INDEX],f[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[3*u+0]=2097152|u|f[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=f[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[g.CHAR_DATA_WIDTH_INDEX]<<22},S.prototype.getWidth=function(u){return this._data[3*u+0]>>22},S.prototype.hasWidth=function(u){return 12582912&this._data[3*u+0]},S.prototype.getFg=function(u){return this._data[3*u+1]},S.prototype.getBg=function(u){return this._data[3*u+2]},S.prototype.hasContent=function(u){return 4194303&this._data[3*u+0]},S.prototype.getCodePoint=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&f},S.prototype.isCombined=function(u){return 2097152&this._data[3*u+0]},S.prototype.getString=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u]:2097151&f?(0,p.stringFromCodePoint)(2097151&f):""},S.prototype.loadCell=function(u,f){var v=3*u;return f.content=this._data[v+0],f.fg=this._data[v+1],f.bg=this._data[v+2],2097152&f.content&&(f.combinedData=this._combined[u]),268435456&f.bg&&(f.extended=this._extendedAttrs[u]),f},S.prototype.setCell=function(u,f){2097152&f.content&&(this._combined[u]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=f.content,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg},S.prototype.setCellFromCodePoint=function(u,f,v,l,s,o){268435456&s&&(this._extendedAttrs[u]=o),this._data[3*u+0]=f|v<<22,this._data[3*u+1]=l,this._data[3*u+2]=s},S.prototype.addCodepointToCell=function(u,f){var v=this._data[3*u+0];2097152&v?this._combined[u]+=(0,p.stringFromCodePoint)(f):(2097151&v?(this._combined[u]=(0,p.stringFromCodePoint)(2097151&v)+(0,p.stringFromCodePoint)(f),v&=-2097152,v|=2097152):v=f|1<<22,this._data[3*u+0]=v)},S.prototype.insertCells=function(u,f,v,l){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),f<this.length-u){for(var s=new C.CellData,o=this.length-u-f-1;o>=0;--o)this.setCell(u+f+o,this.loadCell(u+o,s));for(o=0;o<f;++o)this.setCell(u+o,v)}else for(o=u;o<this.length;++o)this.setCell(o,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs)},S.prototype.deleteCells=function(u,f,v,l){if(u%=this.length,f<this.length-u){for(var s=new C.CellData,o=0;o<this.length-u-f;++o)this.setCell(u+o,this.loadCell(u+f+o,s));for(o=this.length-f;o<this.length;++o)this.setCell(o,v)}else for(o=u;o<this.length;++o)this.setCell(o,v);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs)},S.prototype.replaceCells=function(u,f,v,l){for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs);u<f&&u<this.length;)this.setCell(u++,v)},S.prototype.resize=function(u,f){if(u!==this.length){if(u>this.length){var v=new Uint32Array(3*u);this.length&&(3*u<this._data.length?v.set(this._data.subarray(0,3*u)):v.set(this._data)),this._data=v;for(var l=this.length;l<u;++l)this.setCell(l,f)}else if(u){(v=new Uint32Array(3*u)).set(this._data.subarray(0,3*u)),this._data=v;var s=Object.keys(this._combined);for(l=0;l<s.length;l++){var o=parseInt(s[l],10);o>=u&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},S.prototype.fill=function(u){this._combined={},this._extendedAttrs={};for(var f=0;f<this.length;++f)this.setCell(f,u)},S.prototype.copyFrom=function(u){for(var f in this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={},u._combined)this._combined[f]=u._combined[f];for(var f in this._extendedAttrs={},u._extendedAttrs)this._extendedAttrs[f]=u._extendedAttrs[f];this.isWrapped=u.isWrapped},S.prototype.clone=function(){var u=new S(0);for(var f in u._data=new Uint32Array(this._data),u.length=this.length,this._combined)u._combined[f]=this._combined[f];for(var f in this._extendedAttrs)u._extendedAttrs[f]=this._extendedAttrs[f];return u.isWrapped=this.isWrapped,u},S.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0},S.prototype.copyCellsFrom=function(u,f,v,l,s){var o=u._data;if(s)for(var a=l-1;a>=0;a--)for(var d=0;d<3;d++)this._data[3*(v+a)+d]=o[3*(f+a)+d];else for(a=0;a<l;a++)for(d=0;d<3;d++)this._data[3*(v+a)+d]=o[3*(f+a)+d];var m=Object.keys(u._combined);for(d=0;d<m.length;d++){var k=parseInt(m[d],10);k>=f&&(this._combined[k-f+v]=u._combined[k])}},S.prototype.translateToString=function(u,f,v){u===void 0&&(u=!1),f===void 0&&(f=0),v===void 0&&(v=this.length),u&&(v=Math.min(v,this.getTrimmedLength()));for(var l="";f<v;){var s=this._data[3*f+0],o=2097151&s;l+=2097152&s?this._combined[f]:o?(0,p.stringFromCodePoint)(o):g.WHITESPACE_CELL_CHAR,f+=s>>22||1}return l},S}();h.BufferLine=b},4841:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getRangeLength=void 0,h.getRangeLength=function(L,p){if(L.start.y>L.end.y)throw new Error("Buffer range end ("+L.end.x+", "+L.end.y+") cannot be before start ("+L.start.x+", "+L.start.y+")");return p*(L.end.y-L.start.y)+(L.end.x-L.start.x+1)}},4634:(X,h)=>{function L(p,g,C){if(g===p.length-1)return p[g].getTrimmedLength();var y=!p[g].hasContent(C-1)&&p[g].getWidth(C-1)===1,b=p[g+1].getWidth(0)===2;return y&&b?C-1:C}Object.defineProperty(h,"__esModule",{value:!0}),h.getWrappedLineTrimmedLength=h.reflowSmallerGetNewLineLengths=h.reflowLargerApplyNewLayout=h.reflowLargerCreateNewLayout=h.reflowLargerGetLinesToRemove=void 0,h.reflowLargerGetLinesToRemove=function(p,g,C,y,b){for(var S=[],u=0;u<p.length-1;u++){var f=u,v=p.get(++f);if(v.isWrapped){for(var l=[p.get(u)];f<p.length&&v.isWrapped;)l.push(v),v=p.get(++f);if(y>=u&&y<f)u+=l.length-1;else{for(var s=0,o=L(l,s,g),a=1,d=0;a<l.length;){var m=L(l,a,g),k=m-d,T=C-o,H=Math.min(k,T);l[s].copyCellsFrom(l[a],d,o,H,!1),(o+=H)===C&&(s++,o=0),(d+=H)===m&&(a++,d=0),o===0&&s!==0&&l[s-1].getWidth(C-1)===2&&(l[s].copyCellsFrom(l[s-1],C-1,o++,1,!1),l[s-1].setCell(C-1,b))}l[s].replaceCells(o,C,b);for(var I=0,A=l.length-1;A>0&&(A>s||l[A].getTrimmedLength()===0);A--)I++;I>0&&(S.push(u+l.length-I),S.push(I)),u+=l.length-1}}}return S},h.reflowLargerCreateNewLayout=function(p,g){for(var C=[],y=0,b=g[y],S=0,u=0;u<p.length;u++)if(b===u){var f=g[++y];p.onDeleteEmitter.fire({index:u-S,amount:f}),u+=f-1,S+=f,b=g[++y]}else C.push(u);return{layout:C,countRemoved:S}},h.reflowLargerApplyNewLayout=function(p,g){for(var C=[],y=0;y<g.length;y++)C.push(p.get(g[y]));for(y=0;y<C.length;y++)p.set(y,C[y]);p.length=g.length},h.reflowSmallerGetNewLineLengths=function(p,g,C){for(var y=[],b=p.map(function(o,a){return L(p,a,g)}).reduce(function(o,a){return o+a}),S=0,u=0,f=0;f<b;){if(b-f<C){y.push(b-f);break}S+=C;var v=L(p,u,g);S>v&&(S-=v,u++);var l=p[u].getWidth(S-1)===2;l&&S--;var s=l?C-1:C;y.push(s),f+=s}return y},h.getWrappedLineTrimmedLength=L},5295:function(X,h,L){var p,g=this&&this.__extends||(p=function(S,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var l in v)Object.prototype.hasOwnProperty.call(v,l)&&(f[l]=v[l])},p(S,u)},function(S,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=S}p(S,u),S.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.BufferSet=void 0;var C=L(9092),y=L(8460),b=function(S){function u(f,v){var l=S.call(this)||this;return l._optionsService=f,l._bufferService=v,l._onBufferActivate=l.register(new y.EventEmitter),l.reset(),l}return g(u,S),Object.defineProperty(u.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),u.prototype.reset=function(){this._normal=new C.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new C.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(u.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),u.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},u.prototype.activateAltBuffer=function(f){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(f),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},u.prototype.resize=function(f,v){this._normal.resize(f,v),this._alt.resize(f,v)},u.prototype.setupTabStops=function(f){this._normal.setupTabStops(f),this._alt.setupTabStops(f)},u}(L(844).Disposable);h.BufferSet=b},511:function(X,h,L){var p,g=this&&this.__extends||(p=function(u,f){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,l){v.__proto__=l}||function(v,l){for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(v[s]=l[s])},p(u,f)},function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=u}p(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(h,"__esModule",{value:!0}),h.CellData=void 0;var C=L(482),y=L(643),b=L(3734),S=function(u){function f(){var v=u!==null&&u.apply(this,arguments)||this;return v.content=0,v.fg=0,v.bg=0,v.extended=new b.ExtendedAttrs,v.combinedData="",v}return g(f,u),f.fromCharData=function(v){var l=new f;return l.setFromCharData(v),l},f.prototype.isCombined=function(){return 2097152&this.content},f.prototype.getWidth=function(){return this.content>>22},f.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,C.stringFromCodePoint)(2097151&this.content):""},f.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},f.prototype.setFromCharData=function(v){this.fg=v[y.CHAR_DATA_ATTR_INDEX],this.bg=0;var l=!1;if(v[y.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(v[y.CHAR_DATA_CHAR_INDEX].length===2){var s=v[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){var o=v[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(s-55296)+o-56320+65536|v[y.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=v[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[y.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=v[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[y.CHAR_DATA_WIDTH_INDEX]<<22)},f.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},f}(b.AttributeData);h.CellData=S},643:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WHITESPACE_CELL_CODE=h.WHITESPACE_CELL_WIDTH=h.WHITESPACE_CELL_CHAR=h.NULL_CELL_CODE=h.NULL_CELL_WIDTH=h.NULL_CELL_CHAR=h.CHAR_DATA_CODE_INDEX=h.CHAR_DATA_WIDTH_INDEX=h.CHAR_DATA_CHAR_INDEX=h.CHAR_DATA_ATTR_INDEX=h.DEFAULT_ATTR=h.DEFAULT_COLOR=void 0,h.DEFAULT_COLOR=256,h.DEFAULT_ATTR=256|h.DEFAULT_COLOR<<9,h.CHAR_DATA_ATTR_INDEX=0,h.CHAR_DATA_CHAR_INDEX=1,h.CHAR_DATA_WIDTH_INDEX=2,h.CHAR_DATA_CODE_INDEX=3,h.NULL_CELL_CHAR="",h.NULL_CELL_WIDTH=1,h.NULL_CELL_CODE=0,h.WHITESPACE_CELL_CHAR=" ",h.WHITESPACE_CELL_WIDTH=1,h.WHITESPACE_CELL_CODE=32},4863:function(X,h,L){var p,g=this&&this.__extends||(p=function(b,S){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(u[v]=f[v])},p(b,S)},function(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function u(){this.constructor=b}p(b,S),b.prototype=S===null?Object.create(S):(u.prototype=S.prototype,new u)});Object.defineProperty(h,"__esModule",{value:!0}),h.Marker=void 0;var C=L(8460),y=function(b){function S(u){var f=b.call(this)||this;return f.line=u,f._id=S._nextId++,f.isDisposed=!1,f._onDispose=new C.EventEmitter,f}return g(S,b),Object.defineProperty(S.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),b.prototype.dispose.call(this))},S._nextId=1,S}(L(844).Disposable);h.Marker=y},7116:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DEFAULT_CHARSET=h.CHARSETS=void 0,h.CHARSETS={},h.DEFAULT_CHARSET=h.CHARSETS.B,h.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},h.CHARSETS.A={"#":"\xA3"},h.CHARSETS.B=void 0,h.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},h.CHARSETS.C=h.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},h.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},h.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},h.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},h.CHARSETS.E=h.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},h.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},h.CHARSETS.H=h.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(X,h)=>{var L,p;Object.defineProperty(h,"__esModule",{value:!0}),h.C1=h.C0=void 0,(p=h.C0||(h.C0={})).NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL="\x7F",(L=h.C1||(h.C1={})).PAD="\x80",L.HOP="\x81",L.BPH="\x82",L.NBH="\x83",L.IND="\x84",L.NEL="\x85",L.SSA="\x86",L.ESA="\x87",L.HTS="\x88",L.HTJ="\x89",L.VTS="\x8A",L.PLD="\x8B",L.PLU="\x8C",L.RI="\x8D",L.SS2="\x8E",L.SS3="\x8F",L.DCS="\x90",L.PU1="\x91",L.PU2="\x92",L.STS="\x93",L.CCH="\x94",L.MW="\x95",L.SPA="\x96",L.EPA="\x97",L.SOS="\x98",L.SGCI="\x99",L.SCI="\x9A",L.CSI="\x9B",L.ST="\x9C",L.OSC="\x9D",L.PM="\x9E",L.APC="\x9F"},7399:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.evaluateKeyboardEvent=void 0;var p=L(2584),g={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};h.evaluateKeyboardEvent=function(C,y,b,S){var u={type:0,cancel:!1,key:void 0},f=(C.shiftKey?1:0)|(C.altKey?2:0)|(C.ctrlKey?4:0)|(C.metaKey?8:0);switch(C.keyCode){case 0:C.key==="UIKeyInputUpArrow"?u.key=y?p.C0.ESC+"OA":p.C0.ESC+"[A":C.key==="UIKeyInputLeftArrow"?u.key=y?p.C0.ESC+"OD":p.C0.ESC+"[D":C.key==="UIKeyInputRightArrow"?u.key=y?p.C0.ESC+"OC":p.C0.ESC+"[C":C.key==="UIKeyInputDownArrow"&&(u.key=y?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(C.shiftKey){u.key=p.C0.BS;break}if(C.altKey){u.key=p.C0.ESC+p.C0.DEL;break}u.key=p.C0.DEL;break;case 9:if(C.shiftKey){u.key=p.C0.ESC+"[Z";break}u.key=p.C0.HT,u.cancel=!0;break;case 13:u.key=C.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,u.cancel=!0;break;case 27:u.key=p.C0.ESC,C.altKey&&(u.key=p.C0.ESC+p.C0.ESC),u.cancel=!0;break;case 37:if(C.metaKey)break;f?(u.key=p.C0.ESC+"[1;"+(f+1)+"D",u.key===p.C0.ESC+"[1;3D"&&(u.key=p.C0.ESC+(b?"b":"[1;5D"))):u.key=y?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(C.metaKey)break;f?(u.key=p.C0.ESC+"[1;"+(f+1)+"C",u.key===p.C0.ESC+"[1;3C"&&(u.key=p.C0.ESC+(b?"f":"[1;5C"))):u.key=y?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(C.metaKey)break;f?(u.key=p.C0.ESC+"[1;"+(f+1)+"A",b||u.key!==p.C0.ESC+"[1;3A"||(u.key=p.C0.ESC+"[1;5A")):u.key=y?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(C.metaKey)break;f?(u.key=p.C0.ESC+"[1;"+(f+1)+"B",b||u.key!==p.C0.ESC+"[1;3B"||(u.key=p.C0.ESC+"[1;5B")):u.key=y?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:C.shiftKey||C.ctrlKey||(u.key=p.C0.ESC+"[2~");break;case 46:u.key=f?p.C0.ESC+"[3;"+(f+1)+"~":p.C0.ESC+"[3~";break;case 36:u.key=f?p.C0.ESC+"[1;"+(f+1)+"H":y?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:u.key=f?p.C0.ESC+"[1;"+(f+1)+"F":y?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:C.shiftKey?u.type=2:u.key=p.C0.ESC+"[5~";break;case 34:C.shiftKey?u.type=3:u.key=p.C0.ESC+"[6~";break;case 112:u.key=f?p.C0.ESC+"[1;"+(f+1)+"P":p.C0.ESC+"OP";break;case 113:u.key=f?p.C0.ESC+"[1;"+(f+1)+"Q":p.C0.ESC+"OQ";break;case 114:u.key=f?p.C0.ESC+"[1;"+(f+1)+"R":p.C0.ESC+"OR";break;case 115:u.key=f?p.C0.ESC+"[1;"+(f+1)+"S":p.C0.ESC+"OS";break;case 116:u.key=f?p.C0.ESC+"[15;"+(f+1)+"~":p.C0.ESC+"[15~";break;case 117:u.key=f?p.C0.ESC+"[17;"+(f+1)+"~":p.C0.ESC+"[17~";break;case 118:u.key=f?p.C0.ESC+"[18;"+(f+1)+"~":p.C0.ESC+"[18~";break;case 119:u.key=f?p.C0.ESC+"[19;"+(f+1)+"~":p.C0.ESC+"[19~";break;case 120:u.key=f?p.C0.ESC+"[20;"+(f+1)+"~":p.C0.ESC+"[20~";break;case 121:u.key=f?p.C0.ESC+"[21;"+(f+1)+"~":p.C0.ESC+"[21~";break;case 122:u.key=f?p.C0.ESC+"[23;"+(f+1)+"~":p.C0.ESC+"[23~";break;case 123:u.key=f?p.C0.ESC+"[24;"+(f+1)+"~":p.C0.ESC+"[24~";break;default:if(!C.ctrlKey||C.shiftKey||C.altKey||C.metaKey)if(b&&!S||!C.altKey||C.metaKey)!b||C.altKey||C.ctrlKey||C.shiftKey||!C.metaKey?C.key&&!C.ctrlKey&&!C.altKey&&!C.metaKey&&C.keyCode>=48&&C.key.length===1?u.key=C.key:C.key&&C.ctrlKey&&C.key==="_"&&(u.key=p.C0.US):C.keyCode===65&&(u.type=1);else{var v=g[C.keyCode],l=v==null?void 0:v[C.shiftKey?1:0];if(l)u.key=p.C0.ESC+l;else if(C.keyCode>=65&&C.keyCode<=90){var s=C.ctrlKey?C.keyCode-64:C.keyCode+32;u.key=p.C0.ESC+String.fromCharCode(s)}}else C.keyCode>=65&&C.keyCode<=90?u.key=String.fromCharCode(C.keyCode-64):C.keyCode===32?u.key=p.C0.NUL:C.keyCode>=51&&C.keyCode<=55?u.key=String.fromCharCode(C.keyCode-51+27):C.keyCode===56?u.key=p.C0.DEL:C.keyCode===219?u.key=p.C0.ESC:C.keyCode===220?u.key=p.C0.FS:C.keyCode===221&&(u.key=p.C0.GS)}return u}},482:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Utf8ToUtf32=h.StringToUtf32=h.utf32ToString=h.stringFromCodePoint=void 0,h.stringFromCodePoint=function(g){return g>65535?(g-=65536,String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):String.fromCharCode(g)},h.utf32ToString=function(g,C,y){C===void 0&&(C=0),y===void 0&&(y=g.length);for(var b="",S=C;S<y;++S){var u=g[S];u>65535?(u-=65536,b+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):b+=String.fromCharCode(u)}return b};var L=function(){function g(){this._interim=0}return g.prototype.clear=function(){this._interim=0},g.prototype.decode=function(C,y){var b=C.length;if(!b)return 0;var S=0,u=0;this._interim&&(56320<=(l=C.charCodeAt(u++))&&l<=57343?y[S++]=1024*(this._interim-55296)+l-56320+65536:(y[S++]=this._interim,y[S++]=l),this._interim=0);for(var f=u;f<b;++f){var v=C.charCodeAt(f);if(55296<=v&&v<=56319){if(++f>=b)return this._interim=v,S;var l;56320<=(l=C.charCodeAt(f))&&l<=57343?y[S++]=1024*(v-55296)+l-56320+65536:(y[S++]=v,y[S++]=l)}else v!==65279&&(y[S++]=v)}return S},g}();h.StringToUtf32=L;var p=function(){function g(){this.interim=new Uint8Array(3)}return g.prototype.clear=function(){this.interim.fill(0)},g.prototype.decode=function(C,y){var b=C.length;if(!b)return 0;var S,u,f,v,l=0,s=0,o=0;if(this.interim[0]){var a=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;for(var m=0,k=void 0;(k=63&this.interim[++m])&&m<4;)d<<=6,d|=k;for(var T=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,H=T-m;o<H;){if(o>=b)return 0;if((192&(k=C[o++]))!=128){o--,a=!0;break}this.interim[m++]=k,d<<=6,d|=63&k}a||(T===2?d<128?o--:y[l++]=d:T===3?d<2048||d>=55296&&d<=57343||d===65279||(y[l++]=d):d<65536||d>1114111||(y[l++]=d)),this.interim.fill(0)}for(var I=b-4,A=o;A<b;){for(;!(!(A<I)||128&(S=C[A])||128&(u=C[A+1])||128&(f=C[A+2])||128&(v=C[A+3]));)y[l++]=S,y[l++]=u,y[l++]=f,y[l++]=v,A+=4;if((S=C[A++])<128)y[l++]=S;else if((224&S)==192){if(A>=b)return this.interim[0]=S,l;if((192&(u=C[A++]))!=128){A--;continue}if((s=(31&S)<<6|63&u)<128){A--;continue}y[l++]=s}else if((240&S)==224){if(A>=b)return this.interim[0]=S,l;if((192&(u=C[A++]))!=128){A--;continue}if(A>=b)return this.interim[0]=S,this.interim[1]=u,l;if((192&(f=C[A++]))!=128){A--;continue}if((s=(15&S)<<12|(63&u)<<6|63&f)<2048||s>=55296&&s<=57343||s===65279)continue;y[l++]=s}else if((248&S)==240){if(A>=b)return this.interim[0]=S,l;if((192&(u=C[A++]))!=128){A--;continue}if(A>=b)return this.interim[0]=S,this.interim[1]=u,l;if((192&(f=C[A++]))!=128){A--;continue}if(A>=b)return this.interim[0]=S,this.interim[1]=u,this.interim[2]=f,l;if((192&(v=C[A++]))!=128){A--;continue}if((s=(7&S)<<18|(63&u)<<12|(63&f)<<6|63&v)<65536||s>1114111)continue;y[l++]=s}}return l},g}();h.Utf8ToUtf32=p},225:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeV6=void 0;var p,g=L(8273),C=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],b=function(){function S(){if(this.version="6",!p){p=new Uint8Array(65536),(0,g.fill)(p,1),p[0]=0,(0,g.fill)(p,0,1,32),(0,g.fill)(p,0,127,160),(0,g.fill)(p,2,4352,4448),p[9001]=2,p[9002]=2,(0,g.fill)(p,2,11904,42192),p[12351]=1,(0,g.fill)(p,2,44032,55204),(0,g.fill)(p,2,63744,64256),(0,g.fill)(p,2,65040,65050),(0,g.fill)(p,2,65072,65136),(0,g.fill)(p,2,65280,65377),(0,g.fill)(p,2,65504,65511);for(var u=0;u<C.length;++u)(0,g.fill)(p,0,C[u][0],C[u][1]+1)}}return S.prototype.wcwidth=function(u){return u<32?0:u<127?1:u<65536?p[u]:function(f,v){var l,s=0,o=v.length-1;if(f<v[0][0]||f>v[o][1])return!1;for(;o>=s;)if(f>v[l=s+o>>1][1])s=l+1;else{if(!(f<v[l][0]))return!0;o=l-1}return!1}(u,y)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1},S}();h.UnicodeV6=b},5981:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WriteBuffer=void 0;var L=typeof queueMicrotask=="undefined"?function(g){Promise.resolve().then(g)}:queueMicrotask,p=function(){function g(C){this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return g.prototype.writeSync=function(C,y){if(y!==void 0&&this._syncCalls>y)this._syncCalls=0;else if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);var S=this._callbacks.shift();S&&S()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},g.prototype.write=function(C,y){var b=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return b._innerWrite()})),this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(y)},g.prototype._innerWrite=function(C,y){var b=this;C===void 0&&(C=0),y===void 0&&(y=!0);for(var S=C||Date.now();this._writeBuffer.length>this._bufferOffset;){var u=this._writeBuffer[this._bufferOffset],f=this._action(u,y);if(f)return void f.catch(function(l){return L(function(){throw l}),Promise.resolve(!1)}).then(function(l){return Date.now()-S>=12?setTimeout(function(){return b._innerWrite(0,l)}):b._innerWrite(S,l)});var v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return b._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},g}();h.WriteBuffer=p},5941:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.toRgbString=h.parseColor=void 0;var L=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function g(C,y){var b=C.toString(16),S=b.length<2?"0"+b:b;switch(y){case 4:return b[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}h.parseColor=function(C){if(C){var y=C.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);var b=L.exec(y);if(b){var S=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/S*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/S*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/S*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),p.exec(y)&&[3,6,9,12].includes(y.length))){for(var u=y.length/3,f=[0,0,0],v=0;v<3;++v){var l=parseInt(y.slice(u*v,u*v+u),16);f[v]=u===1?l<<4:u===2?l:u===3?l>>4:l>>8}return f}}},h.toRgbString=function(C,y){y===void 0&&(y=16);var b=C[0],S=C[1],u=C[2];return"rgb:"+g(b,y)+"/"+g(S,y)+"/"+g(u,y)}},5770:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PAYLOAD_LIMIT=void 0,h.PAYLOAD_LIMIT=1e7},6351:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DcsHandler=h.DcsParser=void 0;var p=L(482),g=L(8742),C=L(5770),y=[],b=function(){function f(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return f.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=y},f.prototype.registerHandler=function(v,l){this._handlers[v]===void 0&&(this._handlers[v]=[]);var s=this._handlers[v];return s.push(l),{dispose:function(){var o=s.indexOf(l);o!==-1&&s.splice(o,1)}}},f.prototype.clearHandler=function(v){this._handlers[v]&&delete this._handlers[v]},f.prototype.setHandlerFallback=function(v){this._handlerFb=v},f.prototype.reset=function(){if(this._active.length)for(var v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0},f.prototype.hook=function(v,l){if(this.reset(),this._ident=v,this._active=this._handlers[v]||y,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].hook(l);else this._handlerFb(this._ident,"HOOK",l)},f.prototype.put=function(v,l,s){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(v,l,s);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(v,l,s))},f.prototype.unhook=function(v,l){if(l===void 0&&(l=!0),this._active.length){var s=!1,o=this._active.length-1,a=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=l,a=this._stack.fallThrough,this._stack.paused=!1),!a&&s===!1){for(;o>=0&&(s=this._active[o].unhook(v))!==!0;o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if((s=this._active[o].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",v);this._active=y,this._ident=0},f}();h.DcsParser=b;var S=new g.Params;S.addParam(0);var u=function(){function f(v){this._handler=v,this._data="",this._params=S,this._hitLimit=!1}return f.prototype.hook=function(v){this._params=v.length>1||v.params[0]?v.clone():S,this._data="",this._hitLimit=!1},f.prototype.put=function(v,l,s){this._hitLimit||(this._data+=(0,p.utf32ToString)(v,l,s),this._data.length>C.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},f.prototype.unhook=function(v){var l=this,s=!1;if(this._hitLimit)s=!1;else if(v&&(s=this._handler(this._data,this._params))instanceof Promise)return s.then(function(o){return l._params=S,l._data="",l._hitLimit=!1,o});return this._params=S,this._data="",this._hitLimit=!1,s},f}();h.DcsHandler=u},2015:function(X,h,L){var p,g=this&&this.__extends||(p=function(s,o){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])},p(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=s}p(s,o),s.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.EscapeSequenceParser=h.VT500_TRANSITION_TABLE=h.TransitionTable=void 0;var C=L(844),y=L(8273),b=L(8742),S=L(6242),u=L(6351),f=function(){function s(o){this.table=new Uint8Array(o)}return s.prototype.setDefault=function(o,a){(0,y.fill)(this.table,o<<4|a)},s.prototype.add=function(o,a,d,m){this.table[a<<8|o]=d<<4|m},s.prototype.addMany=function(o,a,d,m){for(var k=0;k<o.length;k++)this.table[a<<8|o[k]]=d<<4|m},s}();h.TransitionTable=f;var v=160;h.VT500_TRANSITION_TABLE=function(){var s=new f(4095),o=Array.apply(null,Array(256)).map(function(H,I){return I}),a=function(H,I){return o.slice(H,I)},d=a(32,127),m=a(0,24);m.push(25),m.push.apply(m,a(28,32));var k,T=a(0,14);for(k in s.setDefault(1,0),s.addMany(d,0,2,0),T)s.addMany([24,26,153,154],k,3,0),s.addMany(a(128,144),k,3,0),s.addMany(a(144,152),k,3,0),s.add(156,k,0,0),s.add(27,k,11,1),s.add(157,k,4,8),s.addMany([152,158,159],k,0,7),s.add(155,k,11,3),s.add(144,k,11,9);return s.addMany(m,0,3,0),s.addMany(m,1,3,1),s.add(127,1,0,1),s.addMany(m,8,0,8),s.addMany(m,3,3,3),s.add(127,3,0,3),s.addMany(m,4,3,4),s.add(127,4,0,4),s.addMany(m,6,3,6),s.addMany(m,5,3,5),s.add(127,5,0,5),s.addMany(m,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(d,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(a(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(d,7,0,7),s.addMany(m,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(a(64,127),3,7,0),s.addMany(a(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(a(48,60),4,8,4),s.addMany(a(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(a(32,64),6,0,6),s.add(127,6,0,6),s.addMany(a(64,127),6,0,0),s.addMany(a(32,48),3,9,5),s.addMany(a(32,48),5,9,5),s.addMany(a(48,64),5,0,6),s.addMany(a(64,127),5,7,0),s.addMany(a(32,48),4,9,5),s.addMany(a(32,48),1,9,2),s.addMany(a(32,48),2,9,2),s.addMany(a(48,127),2,10,0),s.addMany(a(48,80),1,10,0),s.addMany(a(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(a(96,127),1,10,0),s.add(80,1,11,9),s.addMany(m,9,0,9),s.add(127,9,0,9),s.addMany(a(28,32),9,0,9),s.addMany(a(32,48),9,9,12),s.addMany(a(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(m,11,0,11),s.addMany(a(32,128),11,0,11),s.addMany(a(28,32),11,0,11),s.addMany(m,10,0,10),s.add(127,10,0,10),s.addMany(a(28,32),10,0,10),s.addMany(a(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(a(32,48),10,9,12),s.addMany(m,12,0,12),s.add(127,12,0,12),s.addMany(a(28,32),12,0,12),s.addMany(a(32,48),12,9,12),s.addMany(a(48,64),12,0,11),s.addMany(a(64,127),12,12,13),s.addMany(a(64,127),10,12,13),s.addMany(a(64,127),9,12,13),s.addMany(m,13,13,13),s.addMany(d,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(v,0,2,0),s.add(v,8,5,8),s.add(v,6,0,6),s.add(v,11,0,11),s.add(v,13,13,13),s}();var l=function(s){function o(a){a===void 0&&(a=h.VT500_TRANSITION_TABLE);var d=s.call(this)||this;return d._transitions=a,d._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},d.initialState=0,d.currentState=d.initialState,d._params=new b.Params,d._params.addParam(0),d._collect=0,d.precedingCodepoint=0,d._printHandlerFb=function(m,k,T){},d._executeHandlerFb=function(m){},d._csiHandlerFb=function(m,k){},d._escHandlerFb=function(m){},d._errorHandlerFb=function(m){return m},d._printHandler=d._printHandlerFb,d._executeHandlers=Object.create(null),d._csiHandlers=Object.create(null),d._escHandlers=Object.create(null),d._oscParser=new S.OscParser,d._dcsParser=new u.DcsParser,d._errorHandler=d._errorHandlerFb,d.registerEscHandler({final:"\\"},function(){return!0}),d}return g(o,s),o.prototype._identifier=function(a,d){d===void 0&&(d=[64,126]);var m=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if((m=a.prefix.charCodeAt(0))&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var k=0;k<a.intermediates.length;++k){var T=a.intermediates.charCodeAt(k);if(32>T||T>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=T}}if(a.final.length!==1)throw new Error("final must be a single byte");var H=a.final.charCodeAt(0);if(d[0]>H||H>d[1])throw new Error("final must be in range "+d[0]+" .. "+d[1]);return(m<<=8)|H},o.prototype.identToString=function(a){for(var d=[];a;)d.push(String.fromCharCode(255&a)),a>>=8;return d.reverse().join("")},o.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},o.prototype.setPrintHandler=function(a){this._printHandler=a},o.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},o.prototype.registerEscHandler=function(a,d){var m=this._identifier(a,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);var k=this._escHandlers[m];return k.push(d),{dispose:function(){var T=k.indexOf(d);T!==-1&&k.splice(T,1)}}},o.prototype.clearEscHandler=function(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]},o.prototype.setEscHandlerFallback=function(a){this._escHandlerFb=a},o.prototype.setExecuteHandler=function(a,d){this._executeHandlers[a.charCodeAt(0)]=d},o.prototype.clearExecuteHandler=function(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]},o.prototype.setExecuteHandlerFallback=function(a){this._executeHandlerFb=a},o.prototype.registerCsiHandler=function(a,d){var m=this._identifier(a);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);var k=this._csiHandlers[m];return k.push(d),{dispose:function(){var T=k.indexOf(d);T!==-1&&k.splice(T,1)}}},o.prototype.clearCsiHandler=function(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]},o.prototype.setCsiHandlerFallback=function(a){this._csiHandlerFb=a},o.prototype.registerDcsHandler=function(a,d){return this._dcsParser.registerHandler(this._identifier(a),d)},o.prototype.clearDcsHandler=function(a){this._dcsParser.clearHandler(this._identifier(a))},o.prototype.setDcsHandlerFallback=function(a){this._dcsParser.setHandlerFallback(a)},o.prototype.registerOscHandler=function(a,d){return this._oscParser.registerHandler(a,d)},o.prototype.clearOscHandler=function(a){this._oscParser.clearHandler(a)},o.prototype.setOscHandlerFallback=function(a){this._oscParser.setHandlerFallback(a)},o.prototype.setErrorHandler=function(a){this._errorHandler=a},o.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},o.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},o.prototype._preserveStack=function(a,d,m,k,T){this._parseStack.state=a,this._parseStack.handlers=d,this._parseStack.handlerPos=m,this._parseStack.transition=k,this._parseStack.chunkPos=T},o.prototype.parse=function(a,d,m){var k,T=0,H=0,I=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,I=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var A=this._parseStack.handlers,x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&x>-1){for(;x>=0&&(k=A[x](this._params))!==!0;x--)if(k instanceof Promise)return this._parseStack.handlerPos=x,k}this._parseStack.handlers=[];break;case 4:if(m===!1&&x>-1){for(;x>=0&&(k=A[x]())!==!0;x--)if(k instanceof Promise)return this._parseStack.handlerPos=x,k}this._parseStack.handlers=[];break;case 6:if(T=a[this._parseStack.chunkPos],k=this._dcsParser.unhook(T!==24&&T!==26,m))return k;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(T=a[this._parseStack.chunkPos],k=this._oscParser.end(T!==24&&T!==26,m))return k;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,I=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var O=I;O<d;++O){switch(T=a[O],(H=this._transitions.table[this.currentState<<8|(T<160?T:v)])>>4){case 2:for(var E=O+1;;++E){if(E>=d||(T=a[E])<32||T>126&&T<v){this._printHandler(a,O,E),O=E-1;break}if(++E>=d||(T=a[E])<32||T>126&&T<v){this._printHandler(a,O,E),O=E-1;break}if(++E>=d||(T=a[E])<32||T>126&&T<v){this._printHandler(a,O,E),O=E-1;break}if(++E>=d||(T=a[E])<32||T>126&&T<v){this._printHandler(a,O,E),O=E-1;break}}break;case 3:this._executeHandlers[T]?this._executeHandlers[T]():this._executeHandlerFb(T),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:O,code:T,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var V=(A=this._csiHandlers[this._collect<<8|T])?A.length-1:-1;V>=0&&(k=A[V](this._params))!==!0;V--)if(k instanceof Promise)return this._preserveStack(3,A,V,H,O),k;V<0&&this._csiHandlerFb(this._collect<<8|T,this._params),this.precedingCodepoint=0;break;case 8:do switch(T){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(T-48)}while(++O<d&&(T=a[O])>47&&T<60);O--;break;case 9:this._collect<<=8,this._collect|=T;break;case 10:for(var U=this._escHandlers[this._collect<<8|T],F=U?U.length-1:-1;F>=0&&(k=U[F]())!==!0;F--)if(k instanceof Promise)return this._preserveStack(4,U,F,H,O),k;F<0&&this._escHandlerFb(this._collect<<8|T),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|T,this._params);break;case 13:for(var W=O+1;;++W)if(W>=d||(T=a[W])===24||T===26||T===27||T>127&&T<v){this._dcsParser.put(a,O,W),O=W-1;break}break;case 14:if(k=this._dcsParser.unhook(T!==24&&T!==26))return this._preserveStack(6,[],0,H,O),k;T===27&&(H|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var Y=O+1;;Y++)if(Y>=d||(T=a[Y])<32||T>127&&T<v){this._oscParser.put(a,O,Y),O=Y-1;break}break;case 6:if(k=this._oscParser.end(T!==24&&T!==26))return this._preserveStack(5,[],0,H,O),k;T===27&&(H|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&H}},o}(C.Disposable);h.EscapeSequenceParser=l},6242:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OscHandler=h.OscParser=void 0;var p=L(5770),g=L(482),C=[],y=function(){function S(){this._state=0,this._active=C,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return S.prototype.registerHandler=function(u,f){this._handlers[u]===void 0&&(this._handlers[u]=[]);var v=this._handlers[u];return v.push(f),{dispose:function(){var l=v.indexOf(f);l!==-1&&v.splice(l,1)}}},S.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},S.prototype.setHandlerFallback=function(u){this._handlerFb=u},S.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=C},S.prototype.reset=function(){if(this._state===2)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=C,this._id=-1,this._state=0},S.prototype._start=function(){if(this._active=this._handlers[this._id]||C,this._active.length)for(var u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")},S.prototype._put=function(u,f,v){if(this._active.length)for(var l=this._active.length-1;l>=0;l--)this._active[l].put(u,f,v);else this._handlerFb(this._id,"PUT",(0,g.utf32ToString)(u,f,v))},S.prototype.start=function(){this.reset(),this._state=1},S.prototype.put=function(u,f,v){if(this._state!==3){if(this._state===1)for(;f<v;){var l=u[f++];if(l===59){this._state=2,this._start();break}if(l<48||57<l)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+l-48}this._state===2&&v-f>0&&this._put(u,f,v)}},S.prototype.end=function(u,f){if(f===void 0&&(f=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var v=!1,l=this._active.length-1,s=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,v=f,s=this._stack.fallThrough,this._stack.paused=!1),!s&&v===!1){for(;l>=0&&(v=this._active[l].end(u))!==!0;l--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,v;l--}for(;l>=0;l--)if((v=this._active[l].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",u);this._active=C,this._id=-1,this._state=0}},S}();h.OscParser=y;var b=function(){function S(u){this._handler=u,this._data="",this._hitLimit=!1}return S.prototype.start=function(){this._data="",this._hitLimit=!1},S.prototype.put=function(u,f,v){this._hitLimit||(this._data+=(0,g.utf32ToString)(u,f,v),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},S.prototype.end=function(u){var f=this,v=!1;if(this._hitLimit)v=!1;else if(u&&(v=this._handler(this._data))instanceof Promise)return v.then(function(l){return f._data="",f._hitLimit=!1,l});return this._data="",this._hitLimit=!1,v},S}();h.OscHandler=b},8742:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Params=void 0;var L=2147483647,p=function(){function g(C,y){if(C===void 0&&(C=32),y===void 0&&(y=32),this.maxLength=C,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(C),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(C),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return g.fromArray=function(C){var y=new g;if(!C.length)return y;for(var b=Array.isArray(C[0])?1:0;b<C.length;++b){var S=C[b];if(Array.isArray(S))for(var u=0;u<S.length;++u)y.addSubParam(S[u]);else y.addParam(S)}return y},g.prototype.clone=function(){var C=new g(this.maxLength,this.maxSubParamsLength);return C.params.set(this.params),C.length=this.length,C._subParams.set(this._subParams),C._subParamsLength=this._subParamsLength,C._subParamsIdx.set(this._subParamsIdx),C._rejectDigits=this._rejectDigits,C._rejectSubDigits=this._rejectSubDigits,C._digitIsSub=this._digitIsSub,C},g.prototype.toArray=function(){for(var C=[],y=0;y<this.length;++y){C.push(this.params[y]);var b=this._subParamsIdx[y]>>8,S=255&this._subParamsIdx[y];S-b>0&&C.push(Array.prototype.slice.call(this._subParams,b,S))}return C},g.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},g.prototype.addParam=function(C){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(C<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=C>L?L:C}},g.prototype.addSubParam=function(C){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(C<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=C>L?L:C,this._subParamsIdx[this.length-1]++}},g.prototype.hasSubParams=function(C){return(255&this._subParamsIdx[C])-(this._subParamsIdx[C]>>8)>0},g.prototype.getSubParams=function(C){var y=this._subParamsIdx[C]>>8,b=255&this._subParamsIdx[C];return b-y>0?this._subParams.subarray(y,b):null},g.prototype.getSubParamsAll=function(){for(var C={},y=0;y<this.length;++y){var b=this._subParamsIdx[y]>>8,S=255&this._subParamsIdx[y];S-b>0&&(C[y]=this._subParams.slice(b,S))}return C},g.prototype.addDigit=function(C){var y;if(!(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var b=this._digitIsSub?this._subParams:this.params,S=b[y-1];b[y-1]=~S?Math.min(10*S+C,L):C}},g}();h.Params=p},5741:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AddonManager=void 0;var L=function(){function p(){this._addons=[]}return p.prototype.dispose=function(){for(var g=this._addons.length-1;g>=0;g--)this._addons[g].instance.dispose()},p.prototype.loadAddon=function(g,C){var y=this,b={instance:C,dispose:C.dispose,isDisposed:!1};this._addons.push(b),C.dispose=function(){return y._wrappedAddonDispose(b)},C.activate(g)},p.prototype._wrappedAddonDispose=function(g){if(!g.isDisposed){for(var C=-1,y=0;y<this._addons.length;y++)if(this._addons[y]===g){C=y;break}if(C===-1)throw new Error("Could not dispose an addon that has not been loaded");g.isDisposed=!0,g.dispose.apply(g.instance),this._addons.splice(C,1)}},p}();h.AddonManager=L},8771:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferApiView=void 0;var p=L(3785),g=L(511),C=function(){function y(b,S){this._buffer=b,this.type=S}return y.prototype.init=function(b){return this._buffer=b,this},Object.defineProperty(y.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),y.prototype.getLine=function(b){var S=this._buffer.lines.get(b);if(S)return new p.BufferLineApiView(S)},y.prototype.getNullCell=function(){return new g.CellData},y}();h.BufferApiView=C},3785:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLineApiView=void 0;var p=L(511),g=function(){function C(y){this._line=y}return Object.defineProperty(C.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),C.prototype.getCell=function(y,b){if(!(y<0||y>=this._line.length))return b?(this._line.loadCell(y,b),b):this._line.loadCell(y,new p.CellData)},C.prototype.translateToString=function(y,b,S){return this._line.translateToString(y,b,S)},C}();h.BufferLineApiView=g},8285:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferNamespaceApi=void 0;var p=L(8771),g=L(8460),C=function(){function y(b){var S=this;this._core=b,this._onBufferChange=new g.EventEmitter,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return S._onBufferChange.fire(S.active)})}return Object.defineProperty(y.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),y}();h.BufferNamespaceApi=C},7975:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ParserApi=void 0;var L=function(){function p(g){this._core=g}return p.prototype.registerCsiHandler=function(g,C){return this._core.registerCsiHandler(g,function(y){return C(y.toArray())})},p.prototype.addCsiHandler=function(g,C){return this.registerCsiHandler(g,C)},p.prototype.registerDcsHandler=function(g,C){return this._core.registerDcsHandler(g,function(y,b){return C(y,b.toArray())})},p.prototype.addDcsHandler=function(g,C){return this.registerDcsHandler(g,C)},p.prototype.registerEscHandler=function(g,C){return this._core.registerEscHandler(g,C)},p.prototype.addEscHandler=function(g,C){return this.registerEscHandler(g,C)},p.prototype.registerOscHandler=function(g,C){return this._core.registerOscHandler(g,C)},p.prototype.addOscHandler=function(g,C){return this.registerOscHandler(g,C)},p}();h.ParserApi=L},7090:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeApi=void 0;var L=function(){function p(g){this._core=g}return p.prototype.register=function(g){this._core.unicodeService.register(g)},Object.defineProperty(p.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(g){this._core.unicodeService.activeVersion=g},enumerable:!1,configurable:!0}),p}();h.UnicodeApi=L},744:function(X,h,L){var p,g=this&&this.__extends||(p=function(l,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},p(l,s)},function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=l}p(l,s),l.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),C=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},y=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.BufferService=h.MINIMUM_ROWS=h.MINIMUM_COLS=void 0;var b=L(2585),S=L(5295),u=L(8460),f=L(844);h.MINIMUM_COLS=2,h.MINIMUM_ROWS=1;var v=function(l){function s(o){var a=l.call(this)||this;return a._optionsService=o,a.isUserScrolling=!1,a._onResize=new u.EventEmitter,a._onScroll=new u.EventEmitter,a.cols=Math.max(o.options.cols||0,h.MINIMUM_COLS),a.rows=Math.max(o.options.rows||0,h.MINIMUM_ROWS),a.buffers=new S.BufferSet(o,a),a}return g(s,l),Object.defineProperty(s.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),s.prototype.dispose=function(){l.prototype.dispose.call(this),this.buffers.dispose()},s.prototype.resize=function(o,a){this.cols=o,this.rows=a,this.buffers.resize(o,a),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:o,rows:a})},s.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},s.prototype.scroll=function(o,a){a===void 0&&(a=!1);var d,m=this.buffer;(d=this._cachedBlankLine)&&d.length===this.cols&&d.getFg(0)===o.fg&&d.getBg(0)===o.bg||(d=m.getBlankLine(o,a),this._cachedBlankLine=d),d.isWrapped=a;var k=m.ybase+m.scrollTop,T=m.ybase+m.scrollBottom;if(m.scrollTop===0){var H=m.lines.isFull;T===m.lines.length-1?H?m.lines.recycle().copyFrom(d):m.lines.push(d.clone()):m.lines.splice(T+1,0,d.clone()),H?this.isUserScrolling&&(m.ydisp=Math.max(m.ydisp-1,0)):(m.ybase++,this.isUserScrolling||m.ydisp++)}else{var I=T-k+1;m.lines.shiftElements(k+1,I-1,-1),m.lines.set(T,d.clone())}this.isUserScrolling||(m.ydisp=m.ybase),this._onScroll.fire(m.ydisp)},s.prototype.scrollLines=function(o,a,d){var m=this.buffer;if(o<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else o+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);var k=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+o,m.ybase),0),k!==m.ydisp&&(a||this._onScroll.fire(m.ydisp))},s.prototype.scrollPages=function(o){this.scrollLines(o*(this.rows-1))},s.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},s.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},s.prototype.scrollToLine=function(o){var a=o-this.buffer.ydisp;a!==0&&this.scrollLines(a)},C([y(0,b.IOptionsService)],s)}(f.Disposable);h.BufferService=v},7994:(X,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CharsetService=void 0;var L=function(){function p(){this.glevel=0,this._charsets=[]}return p.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},p.prototype.setgLevel=function(g){this.glevel=g,this.charset=this._charsets[g]},p.prototype.setgCharset=function(g,C){this._charsets[g]=C,this.glevel===g&&(this.charset=C)},p}();h.CharsetService=L},1753:function(X,h,L){var p=this&&this.__decorate||function(l,s,o,a){var d,m=arguments.length,k=m<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,a);else for(var T=l.length-1;T>=0;T--)(d=l[T])&&(k=(m<3?d(k):m>3?d(s,o,k):d(s,o))||k);return m>3&&k&&Object.defineProperty(s,o,k),k},g=this&&this.__param||function(l,s){return function(o,a){s(o,a,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreMouseService=void 0;var C=L(2585),y=L(8460),b={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(l){return l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)}},VT200:{events:19,restrict:function(l){return l.action!==32}},DRAG:{events:23,restrict:function(l){return l.action!==32||l.button!==3}},ANY:{events:31,restrict:function(l){return!0}}};function S(l,s){var o=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(o|=64,o|=l.action):(o|=3&l.button,4&l.button&&(o|=64),8&l.button&&(o|=128),l.action===32?o|=32:l.action!==0||s||(o|=3)),o}var u=String.fromCharCode,f={DEFAULT:function(l){var s=[S(l,!1)+32,l.col+32,l.row+32];return s[0]>255||s[1]>255||s[2]>255?"":"\x1B[M"+u(s[0])+u(s[1])+u(s[2])},SGR:function(l){var s=l.action===0&&l.button!==4?"m":"M";return"\x1B[<"+S(l,!0)+";"+l.col+";"+l.row+s}},v=function(){function l(s,o){this._bufferService=s,this._coreService=o,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new y.EventEmitter,this._lastEvent=null;for(var a=0,d=Object.keys(b);a<d.length;a++){var m=d[a];this.addProtocol(m,b[m])}for(var k=0,T=Object.keys(f);k<T.length;k++){var H=T[k];this.addEncoding(H,f[H])}this.reset()}return l.prototype.addProtocol=function(s,o){this._protocols[s]=o},l.prototype.addEncoding=function(s,o){this._encodings[s]=o},Object.defineProperty(l.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(s){if(!this._protocols[s])throw new Error('unknown protocol "'+s+'"');this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(s){if(!this._encodings[s])throw new Error('unknown encoding "'+s+'"');this._activeEncoding=s},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(l.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),l.prototype.triggerMouseEvent=function(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,s))||!this._protocols[this._activeProtocol].restrict(s))return!1;var o=this._encodings[this._activeEncoding](s);return o&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(o):this._coreService.triggerDataEvent(o,!0)),this._lastEvent=s,!0},l.prototype.explainEvents=function(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}},l.prototype._compareEvents=function(s,o){return s.col===o.col&&s.row===o.row&&s.button===o.button&&s.action===o.action&&s.ctrl===o.ctrl&&s.alt===o.alt&&s.shift===o.shift},p([g(0,C.IBufferService),g(1,C.ICoreService)],l)}();h.CoreMouseService=v},6975:function(X,h,L){var p,g=this&&this.__extends||(p=function(o,a){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(d[k]=m[k])},p(o,a)},function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function d(){this.constructor=o}p(o,a),o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}),C=this&&this.__decorate||function(o,a,d,m){var k,T=arguments.length,H=T<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(o,a,d,m);else for(var I=o.length-1;I>=0;I--)(k=o[I])&&(H=(T<3?k(H):T>3?k(a,d,H):k(a,d))||H);return T>3&&H&&Object.defineProperty(a,d,H),H},y=this&&this.__param||function(o,a){return function(d,m){a(d,m,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreService=void 0;var b=L(2585),S=L(8460),u=L(1439),f=L(844),v=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),s=function(o){function a(d,m,k,T){var H=o.call(this)||this;return H._bufferService=m,H._logService=k,H._optionsService=T,H.isCursorInitialized=!1,H.isCursorHidden=!1,H._onData=H.register(new S.EventEmitter),H._onUserInput=H.register(new S.EventEmitter),H._onBinary=H.register(new S.EventEmitter),H._scrollToBottom=d,H.register({dispose:function(){return H._scrollToBottom=void 0}}),H.modes=(0,u.clone)(v),H.decPrivateModes=(0,u.clone)(l),H}return g(a,o),Object.defineProperty(a.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.modes=(0,u.clone)(v),this.decPrivateModes=(0,u.clone)(l)},a.prototype.triggerDataEvent=function(d,m){if(m===void 0&&(m=!1),!this._optionsService.options.disableStdin){var k=this._bufferService.buffer;k.ybase!==k.ydisp&&this._scrollToBottom(),m&&this._onUserInput.fire(),this._logService.debug('sending data "'+d+'"',function(){return d.split("").map(function(T){return T.charCodeAt(0)})}),this._onData.fire(d)}},a.prototype.triggerBinaryEvent=function(d){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+d+'"',function(){return d.split("").map(function(m){return m.charCodeAt(0)})}),this._onBinary.fire(d))},C([y(1,b.IBufferService),y(2,b.ILogService),y(3,b.IOptionsService)],a)}(f.Disposable);h.CoreService=s},3730:function(X,h,L){var p=this&&this.__decorate||function(b,S,u,f){var v,l=arguments.length,s=l<3?S:f===null?f=Object.getOwnPropertyDescriptor(S,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(b,S,u,f);else for(var o=b.length-1;o>=0;o--)(v=b[o])&&(s=(l<3?v(s):l>3?v(S,u,s):v(S,u))||s);return l>3&&s&&Object.defineProperty(S,u,s),s},g=this&&this.__param||function(b,S){return function(u,f){S(u,f,b)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DirtyRowService=void 0;var C=L(2585),y=function(){function b(S){this._bufferService=S,this.clearRange()}return Object.defineProperty(b.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),b.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},b.prototype.markDirty=function(S){S<this._start?this._start=S:S>this._end&&(this._end=S)},b.prototype.markRangeDirty=function(S,u){if(S>u){var f=S;S=u,u=f}S<this._start&&(this._start=S),u>this._end&&(this._end=u)},b.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},p([g(0,C.IBufferService)],b)}();h.DirtyRowService=y},4348:function(X,h,L){var p=this&&this.__spreadArray||function(S,u,f){if(f||arguments.length===2)for(var v,l=0,s=u.length;l<s;l++)!v&&l in u||(v||(v=Array.prototype.slice.call(u,0,l)),v[l]=u[l]);return S.concat(v||Array.prototype.slice.call(u))};Object.defineProperty(h,"__esModule",{value:!0}),h.InstantiationService=h.ServiceCollection=void 0;var g=L(2585),C=L(8343),y=function(){function S(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];this._entries=new Map;for(var v=0,l=u;v<l.length;v++){var s=l[v],o=s[0],a=s[1];this.set(o,a)}}return S.prototype.set=function(u,f){var v=this._entries.get(u);return this._entries.set(u,f),v},S.prototype.forEach=function(u){this._entries.forEach(function(f,v){return u(v,f)})},S.prototype.has=function(u){return this._entries.has(u)},S.prototype.get=function(u){return this._entries.get(u)},S}();h.ServiceCollection=y;var b=function(){function S(){this._services=new y,this._services.set(g.IInstantiationService,this)}return S.prototype.setService=function(u,f){this._services.set(u,f)},S.prototype.getService=function(u){return this._services.get(u)},S.prototype.createInstance=function(u){for(var f=[],v=1;v<arguments.length;v++)f[v-1]=arguments[v];for(var l=(0,C.getServiceDependencies)(u).sort(function(T,H){return T.index-H.index}),s=[],o=0,a=l;o<a.length;o++){var d=a[o],m=this._services.get(d.id);if(!m)throw new Error("[createInstance] "+u.name+" depends on UNKNOWN service "+d.id+".");s.push(m)}var k=l.length>0?l[0].index:f.length;if(f.length!==k)throw new Error("[createInstance] First service dependency of "+u.name+" at position "+(k+1)+" conflicts with "+f.length+" static arguments");return new(u.bind.apply(u,p([void 0],p(p([],f,!0),s,!0),!1)))},S}();h.InstantiationService=b},7866:function(X,h,L){var p=this&&this.__decorate||function(u,f,v,l){var s,o=arguments.length,a=o<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,v):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(u,f,v,l);else for(var d=u.length-1;d>=0;d--)(s=u[d])&&(a=(o<3?s(a):o>3?s(f,v,a):s(f,v))||a);return o>3&&a&&Object.defineProperty(f,v,a),a},g=this&&this.__param||function(u,f){return function(v,l){f(v,l,u)}},C=this&&this.__spreadArray||function(u,f,v){if(v||arguments.length===2)for(var l,s=0,o=f.length;s<o;s++)!l&&s in f||(l||(l=Array.prototype.slice.call(f,0,s)),l[s]=f[s]);return u.concat(l||Array.prototype.slice.call(f))};Object.defineProperty(h,"__esModule",{value:!0}),h.LogService=void 0;var y=L(2585),b={debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF},S=function(){function u(f){var v=this;this._optionsService=f,this.logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(l){l==="logLevel"&&v._updateLogLevel()})}return u.prototype._updateLogLevel=function(){this.logLevel=b[this._optionsService.options.logLevel]},u.prototype._evalLazyOptionalParams=function(f){for(var v=0;v<f.length;v++)typeof f[v]=="function"&&(f[v]=f[v]())},u.prototype._log=function(f,v,l){this._evalLazyOptionalParams(l),f.call.apply(f,C([console,"xterm.js: "+v],l,!1))},u.prototype.debug=function(f){for(var v=[],l=1;l<arguments.length;l++)v[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.DEBUG&&this._log(console.log,f,v)},u.prototype.info=function(f){for(var v=[],l=1;l<arguments.length;l++)v[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.INFO&&this._log(console.info,f,v)},u.prototype.warn=function(f){for(var v=[],l=1;l<arguments.length;l++)v[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.WARN&&this._log(console.warn,f,v)},u.prototype.error=function(f){for(var v=[],l=1;l<arguments.length;l++)v[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.ERROR&&this._log(console.error,f,v)},p([g(0,y.IOptionsService)],u)}();h.LogService=S},7302:function(X,h,L){var p=this&&this.__assign||function(){return p=Object.assign||function(S){for(var u,f=1,v=arguments.length;f<v;f++)for(var l in u=arguments[f])Object.prototype.hasOwnProperty.call(u,l)&&(S[l]=u[l]);return S},p.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0}),h.OptionsService=h.DEFAULT_OPTIONS=h.DEFAULT_BELL_SOUND=void 0;var g=L(8460),C=L(6114);h.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",h.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:h.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:C.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var y=["normal","bold","100","200","300","400","500","600","700","800","900"],b=function(){function S(u){for(var f in this._onOptionChange=new g.EventEmitter,this._options=p({},h.DEFAULT_OPTIONS),u)if(f in this._options)try{var v=u[f];this._options[f]=this._sanitizeAndValidateOption(f,v)}catch(l){console.error(l)}this.options=this._setupOptions(this._options)}return Object.defineProperty(S.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),S.prototype._setupOptions=function(u){var f=this,v=p({},u),l=function(o){Object.defineProperty(v,o,{get:function(){if(!(o in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return f._options[o]},set:function(a){if(!(o in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');a=f._sanitizeAndValidateOption(o,a),f._options[o]!==a&&(f._options[o]=a,f._onOptionChange.fire(o))}})};for(var s in v)l(s);return v},S.prototype.setOption=function(u,f){this.options[u]=f},S.prototype._sanitizeAndValidateOption=function(u,f){switch(u){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":f||(f=h.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof f=="number"&&1<=f&&f<=1e3)break;f=y.includes(f)?f:h.DEFAULT_OPTIONS[u];break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(u+" cannot be less than 1, value: "+f);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(u+" cannot be less than 0, value: "+f);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(u+" cannot be less than or equal to 0, value: "+f);case"rows":case"cols":if(!f&&f!==0)throw new Error(u+" must be numeric, value: "+f)}return f},S.prototype.getOption=function(u){return this.options[u]},S}();h.OptionsService=b},8343:(X,h)=>{function L(p,g,C){g.di$target===g?g.di$dependencies.push({id:p,index:C}):(g.di$dependencies=[{id:p,index:C}],g.di$target=g)}Object.defineProperty(h,"__esModule",{value:!0}),h.createDecorator=h.getServiceDependencies=h.serviceRegistry=void 0,h.serviceRegistry=new Map,h.getServiceDependencies=function(p){return p.di$dependencies||[]},h.createDecorator=function(p){if(h.serviceRegistry.has(p))return h.serviceRegistry.get(p);var g=function(C,y,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");L(g,C,b)};return g.toString=function(){return p},h.serviceRegistry.set(p,g),g}},2585:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IUnicodeService=h.IOptionsService=h.ILogService=h.LogLevelEnum=h.IInstantiationService=h.IDirtyRowService=h.ICharsetService=h.ICoreService=h.ICoreMouseService=h.IBufferService=void 0;var p,g=L(8343);h.IBufferService=(0,g.createDecorator)("BufferService"),h.ICoreMouseService=(0,g.createDecorator)("CoreMouseService"),h.ICoreService=(0,g.createDecorator)("CoreService"),h.ICharsetService=(0,g.createDecorator)("CharsetService"),h.IDirtyRowService=(0,g.createDecorator)("DirtyRowService"),h.IInstantiationService=(0,g.createDecorator)("InstantiationService"),(p=h.LogLevelEnum||(h.LogLevelEnum={}))[p.DEBUG=0]="DEBUG",p[p.INFO=1]="INFO",p[p.WARN=2]="WARN",p[p.ERROR=3]="ERROR",p[p.OFF=4]="OFF",h.ILogService=(0,g.createDecorator)("LogService"),h.IOptionsService=(0,g.createDecorator)("OptionsService"),h.IUnicodeService=(0,g.createDecorator)("UnicodeService")},1480:(X,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeService=void 0;var p=L(8460),g=L(225),C=function(){function y(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter;var b=new g.UnicodeV6;this.register(b),this._active=b.version,this._activeProvider=b}return Object.defineProperty(y.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"activeVersion",{get:function(){return this._active},set:function(b){if(!this._providers[b])throw new Error('unknown Unicode version "'+b+'"');this._active=b,this._activeProvider=this._providers[b],this._onChange.fire(b)},enumerable:!1,configurable:!0}),y.prototype.register=function(b){this._providers[b.version]=b},y.prototype.wcwidth=function(b){return this._activeProvider.wcwidth(b)},y.prototype.getStringCellWidth=function(b){for(var S=0,u=b.length,f=0;f<u;++f){var v=b.charCodeAt(f);if(55296<=v&&v<=56319){if(++f>=u)return S+this.wcwidth(v);var l=b.charCodeAt(f);56320<=l&&l<=57343?v=1024*(v-55296)+l-56320+65536:S+=this.wcwidth(l)}S+=this.wcwidth(v)}return S},y}();h.UnicodeService=C}},P={};function z(X){var h=P[X];if(h!==void 0)return h.exports;var L=P[X]={exports:{}};return ee[X].call(L.exports,L,L.exports,z),L.exports}var te={};return(()=>{var X=te;Object.defineProperty(X,"__esModule",{value:!0}),X.Terminal=void 0;var h=z(3236),L=z(9042),p=z(7975),g=z(7090),C=z(5741),y=z(8285),b=["cols","rows"],S=function(){function u(f){var v=this;this._core=new h.Terminal(f),this._addonManager=new C.AddonManager,this._publicOptions={};var l=function(a){Object.defineProperty(s._publicOptions,a,{get:function(){return v._core.options[a]},set:function(d){v._checkReadonlyOptions(a),v._core.options[a]=d}})},s=this;for(var o in this._core.options)l(o)}return u.prototype._checkReadonlyOptions=function(f){if(b.includes(f))throw new Error('Option "'+f+'" can only be set in the constructor')},u.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(u.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new p.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"unicode",{get:function(){return this._checkProposedApi(),new g.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new y.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"modes",{get:function(){var f=this._core.coreService.decPrivateModes,v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"options",{get:function(){return this._publicOptions},set:function(f){for(var v in f)this._publicOptions[v]=f[v]},enumerable:!1,configurable:!0}),u.prototype.blur=function(){this._core.blur()},u.prototype.focus=function(){this._core.focus()},u.prototype.resize=function(f,v){this._verifyIntegers(f,v),this._core.resize(f,v)},u.prototype.open=function(f){this._core.open(f)},u.prototype.attachCustomKeyEventHandler=function(f){this._core.attachCustomKeyEventHandler(f)},u.prototype.registerLinkMatcher=function(f,v,l){return this._checkProposedApi(),this._core.registerLinkMatcher(f,v,l)},u.prototype.deregisterLinkMatcher=function(f){this._checkProposedApi(),this._core.deregisterLinkMatcher(f)},u.prototype.registerLinkProvider=function(f){return this._checkProposedApi(),this._core.registerLinkProvider(f)},u.prototype.registerCharacterJoiner=function(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)},u.prototype.deregisterCharacterJoiner=function(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)},u.prototype.registerMarker=function(f){return this._checkProposedApi(),this._verifyIntegers(f),this._core.addMarker(f)},u.prototype.addMarker=function(f){return this.registerMarker(f)},u.prototype.hasSelection=function(){return this._core.hasSelection()},u.prototype.select=function(f,v,l){this._verifyIntegers(f,v,l),this._core.select(f,v,l)},u.prototype.getSelection=function(){return this._core.getSelection()},u.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},u.prototype.clearSelection=function(){this._core.clearSelection()},u.prototype.selectAll=function(){this._core.selectAll()},u.prototype.selectLines=function(f,v){this._verifyIntegers(f,v),this._core.selectLines(f,v)},u.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},u.prototype.scrollLines=function(f){this._verifyIntegers(f),this._core.scrollLines(f)},u.prototype.scrollPages=function(f){this._verifyIntegers(f),this._core.scrollPages(f)},u.prototype.scrollToTop=function(){this._core.scrollToTop()},u.prototype.scrollToBottom=function(){this._core.scrollToBottom()},u.prototype.scrollToLine=function(f){this._verifyIntegers(f),this._core.scrollToLine(f)},u.prototype.clear=function(){this._core.clear()},u.prototype.write=function(f,v){this._core.write(f,v)},u.prototype.writeUtf8=function(f,v){this._core.write(f,v)},u.prototype.writeln=function(f,v){this._core.write(f),this._core.write(`\r
`,v)},u.prototype.paste=function(f){this._core.paste(f)},u.prototype.getOption=function(f){return this._core.optionsService.getOption(f)},u.prototype.setOption=function(f,v){this._checkReadonlyOptions(f),this._core.optionsService.setOption(f,v)},u.prototype.refresh=function(f,v){this._verifyIntegers(f,v),this._core.refresh(f,v)},u.prototype.reset=function(){this._core.reset()},u.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},u.prototype.loadAddon=function(f){return this._addonManager.loadAddon(this,f)},Object.defineProperty(u,"strings",{get:function(){return L},enumerable:!1,configurable:!0}),u.prototype._verifyIntegers=function(){for(var f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];for(var l=0,s=f;l<s.length;l++){var o=s[l];if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}},u}();X.Terminal=S})(),te})()})});var El=ui((xl,kl)=>{(function(ee){typeof xl=="object"&&typeof kl=="object"?ee(Ai()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){ee.defineOption("placeholder","",function(p,g,C){var y=C&&C!=ee.Init;if(g&&!y)p.on("blur",X),p.on("change",h),p.on("swapDoc",h),ee.on(p.getInputField(),"compositionupdate",p.state.placeholderCompose=function(){te(p)}),h(p);else if(!g&&y){p.off("blur",X),p.off("change",h),p.off("swapDoc",h),ee.off(p.getInputField(),"compositionupdate",p.state.placeholderCompose),P(p);var b=p.getWrapperElement();b.className=b.className.replace(" CodeMirror-empty","")}g&&!p.hasFocus()&&X(p)});function P(p){p.state.placeholder&&(p.state.placeholder.parentNode.removeChild(p.state.placeholder),p.state.placeholder=null)}function z(p){P(p);var g=p.state.placeholder=document.createElement("pre");g.style.cssText="height: 0; overflow: visible",g.style.direction=p.getOption("direction"),g.className="CodeMirror-placeholder CodeMirror-line-like";var C=p.getOption("placeholder");typeof C=="string"&&(C=document.createTextNode(C)),g.appendChild(C),p.display.lineSpace.insertBefore(g,p.display.lineSpace.firstChild)}function te(p){setTimeout(function(){var g=!1;if(p.lineCount()==1){var C=p.getInputField();g=C.nodeName=="TEXTAREA"?!p.getLine(0).length:!/[^\u200b]/.test(C.querySelector(".CodeMirror-line").textContent)}g?z(p):P(p)},20)}function X(p){L(p)&&z(p)}function h(p){var g=p.getWrapperElement(),C=L(p);g.className=g.className.replace(" CodeMirror-empty","")+(C?" CodeMirror-empty":""),C?z(p):P(p)}function L(p){return p.lineCount()===1&&p.getLine(0)===""}})});var Al=ui((Ml,Tl)=>{(function(ee){typeof Ml=="object"&&typeof Tl=="object"?ee(Ai()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){var P={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},z=ee.Pos;ee.defineOption("autoCloseBrackets",!1,function(v,l,s){s&&s!=ee.Init&&(v.removeKeyMap(X),v.state.closeBrackets=null),l&&(h(te(l,"pairs")),v.state.closeBrackets=l,v.addKeyMap(X))});function te(v,l){return l=="pairs"&&typeof v=="string"?v:typeof v=="object"&&v[l]!=null?v[l]:P[l]}var X={Backspace:g,Enter:C};function h(v){for(var l=0;l<v.length;l++){var s=v.charAt(l),o="'"+s+"'";X[o]||(X[o]=L(s))}}h(P.pairs+"`");function L(v){return function(l){return S(l,v)}}function p(v){var l=v.state.closeBrackets;if(!l||l.override)return l;var s=v.getModeAt(v.getCursor());return s.closeBrackets||l}function g(v){var l=p(v);if(!l||v.getOption("disableInput"))return ee.Pass;for(var s=te(l,"pairs"),o=v.listSelections(),a=0;a<o.length;a++){if(!o[a].empty())return ee.Pass;var d=u(v,o[a].head);if(!d||s.indexOf(d)%2!=0)return ee.Pass}for(var a=o.length-1;a>=0;a--){var m=o[a].head;v.replaceRange("",z(m.line,m.ch-1),z(m.line,m.ch+1),"+delete")}}function C(v){var l=p(v),s=l&&te(l,"explode");if(!s||v.getOption("disableInput"))return ee.Pass;for(var o=v.listSelections(),a=0;a<o.length;a++){if(!o[a].empty())return ee.Pass;var d=u(v,o[a].head);if(!d||s.indexOf(d)%2!=0)return ee.Pass}v.operation(function(){var m=v.lineSeparator()||`
`;v.replaceSelection(m+m,null),y(v,-1),o=v.listSelections();for(var k=0;k<o.length;k++){var T=o[k].head.line;v.indentLine(T,null,!0),v.indentLine(T+1,null,!0)}})}function y(v,l){for(var s=[],o=v.listSelections(),a=0,d=0;d<o.length;d++){var m=o[d];m.head==v.getCursor()&&(a=d);var k=m.head.ch||l>0?{line:m.head.line,ch:m.head.ch+l}:{line:m.head.line-1};s.push({anchor:k,head:k})}v.setSelections(s,a)}function b(v){var l=ee.cmpPos(v.anchor,v.head)>0;return{anchor:new z(v.anchor.line,v.anchor.ch+(l?-1:1)),head:new z(v.head.line,v.head.ch+(l?1:-1))}}function S(v,l){var s=p(v);if(!s||v.getOption("disableInput"))return ee.Pass;var o=te(s,"pairs"),a=o.indexOf(l);if(a==-1)return ee.Pass;for(var d=te(s,"closeBefore"),m=te(s,"triples"),k=o.charAt(a+1)==l,T=v.listSelections(),H=a%2==0,I,A=0;A<T.length;A++){var x=T[A],O=x.head,E,V=v.getRange(O,z(O.line,O.ch+1));if(H&&!x.empty())E="surround";else if((k||!H)&&V==l)k&&f(v,O)?E="both":m.indexOf(l)>=0&&v.getRange(O,z(O.line,O.ch+3))==l+l+l?E="skipThree":E="skip";else if(k&&O.ch>1&&m.indexOf(l)>=0&&v.getRange(z(O.line,O.ch-2),O)==l+l){if(O.ch>2&&/\bstring/.test(v.getTokenTypeAt(z(O.line,O.ch-2))))return ee.Pass;E="addFour"}else if(k){var U=O.ch==0?" ":v.getRange(z(O.line,O.ch-1),O);if(!ee.isWordChar(V)&&U!=l&&!ee.isWordChar(U))E="both";else return ee.Pass}else if(H&&(V.length===0||/\s/.test(V)||d.indexOf(V)>-1))E="both";else return ee.Pass;if(!I)I=E;else if(I!=E)return ee.Pass}var F=a%2?o.charAt(a-1):l,W=a%2?l:o.charAt(a+1);v.operation(function(){if(I=="skip")y(v,1);else if(I=="skipThree")y(v,3);else if(I=="surround"){for(var Y=v.getSelections(),J=0;J<Y.length;J++)Y[J]=F+Y[J]+W;v.replaceSelections(Y,"around"),Y=v.listSelections().slice();for(var J=0;J<Y.length;J++)Y[J]=b(Y[J]);v.setSelections(Y)}else I=="both"?(v.replaceSelection(F+W,null),v.triggerElectric(F+W),y(v,-1)):I=="addFour"&&(v.replaceSelection(F+F+F+F,"before"),y(v,1))})}function u(v,l){var s=v.getRange(z(l.line,l.ch-1),z(l.line,l.ch+1));return s.length==2?s:null}function f(v,l){var s=v.getTokenAt(z(l.line,l.ch+1));return/\bstring/.test(s.type)&&s.start==l.ch&&(l.ch==0||!/\bstring/.test(v.getTokenTypeAt(l)))}})});var Ol=ui((Rl,Dl)=>{(function(ee){typeof Rl=="object"&&typeof Dl=="object"?ee(Ai()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){var P=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),z=ee.Pos,te={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function X(y){return y&&y.bracketRegex||/[(){}[\]]/}function h(y,b,S){var u=y.getLineHandle(b.line),f=b.ch-1,v=S&&S.afterCursor;v==null&&(v=/(^| )cm-fat-cursor($| )/.test(y.getWrapperElement().className));var l=X(S),s=!v&&f>=0&&l.test(u.text.charAt(f))&&te[u.text.charAt(f)]||l.test(u.text.charAt(f+1))&&te[u.text.charAt(++f)];if(!s)return null;var o=s.charAt(1)==">"?1:-1;if(S&&S.strict&&o>0!=(f==b.ch))return null;var a=y.getTokenTypeAt(z(b.line,f+1)),d=L(y,z(b.line,f+(o>0?1:0)),o,a,S);return d==null?null:{from:z(b.line,f),to:d&&d.pos,match:d&&d.ch==s.charAt(0),forward:o>0}}function L(y,b,S,u,f){for(var v=f&&f.maxScanLineLength||1e4,l=f&&f.maxScanLines||1e3,s=[],o=X(f),a=S>0?Math.min(b.line+l,y.lastLine()+1):Math.max(y.firstLine()-1,b.line-l),d=b.line;d!=a;d+=S){var m=y.getLine(d);if(!!m){var k=S>0?0:m.length-1,T=S>0?m.length:-1;if(!(m.length>v))for(d==b.line&&(k=b.ch-(S<0?1:0));k!=T;k+=S){var H=m.charAt(k);if(o.test(H)&&(u===void 0||(y.getTokenTypeAt(z(d,k+1))||"")==(u||""))){var I=te[H];if(I&&I.charAt(1)==">"==S>0)s.push(H);else if(s.length)s.pop();else return{pos:z(d,k),ch:H}}}}}return d-S==(S>0?y.lastLine():y.firstLine())?!1:null}function p(y,b,S){for(var u=y.state.matchBrackets.maxHighlightLineLength||1e3,f=S&&S.highlightNonMatching,v=[],l=y.listSelections(),s=0;s<l.length;s++){var o=l[s].empty()&&h(y,l[s].head,S);if(o&&(o.match||f!==!1)&&y.getLine(o.from.line).length<=u){var a=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";v.push(y.markText(o.from,z(o.from.line,o.from.ch+1),{className:a})),o.to&&y.getLine(o.to.line).length<=u&&v.push(y.markText(o.to,z(o.to.line,o.to.ch+1),{className:a}))}}if(v.length){P&&y.state.focused&&y.focus();var d=function(){y.operation(function(){for(var m=0;m<v.length;m++)v[m].clear()})};if(b)setTimeout(d,800);else return d}}function g(y){y.operation(function(){y.state.matchBrackets.currentlyHighlighted&&(y.state.matchBrackets.currentlyHighlighted(),y.state.matchBrackets.currentlyHighlighted=null),y.state.matchBrackets.currentlyHighlighted=p(y,!1,y.state.matchBrackets)})}function C(y){y.state.matchBrackets&&y.state.matchBrackets.currentlyHighlighted&&(y.state.matchBrackets.currentlyHighlighted(),y.state.matchBrackets.currentlyHighlighted=null)}ee.defineOption("matchBrackets",!1,function(y,b,S){S&&S!=ee.Init&&(y.off("cursorActivity",g),y.off("focus",g),y.off("blur",C),C(y)),b&&(y.state.matchBrackets=typeof b=="object"?b:{},y.on("cursorActivity",g),y.on("focus",g),y.on("blur",C))}),ee.defineExtension("matchBrackets",function(){p(this,!0)}),ee.defineExtension("findMatchingBracket",function(y,b,S){return(S||typeof b=="boolean")&&(S?(S.strict=b,b=S):b=b?{strict:!0}:null),h(this,y,b)}),ee.defineExtension("scanForBracket",function(y,b,S,u){return L(this,y,b,S,u)})})});var $a=class{name(){return"base64"}matches(P){if(P.length<4)return!1;try{return atob(P),!0}catch(z){return!1}}decode(P){return Array.from(atob(P)).map(z=>z.charCodeAt(0))}},Ja=$a;var Qa=class{name(){return"default"}matches(){return!0}decode(P){return Array.from(P).map(z=>z.charCodeAt(0))}},el=Qa;var tl=class{name(){return"hexdump"}matches(P){return/^(\d{7} (((.{2}){1,2} ){1,8})(\n|$))+$/.test(P)}decode(P){return P.trim().replace(/(?<=^|\n)\d{7} (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").replace(/(..)(..)/g,"$2$1").replace(/00$/,"").match(/../g).map(z=>parseInt(z,16))}},rl=tl;var On=class{constructor(P,z,te,X=null,h=null,L=P){this.id=P;this.name=z;this.runner=te;this.url=X;this.args=h;this.highlighterRef=L}getId(){return this.id}getName(){return this.name}getURL(){return this.url}getArgs(){return this.args}getHighlighterRef(){return this.highlighterRef}run(P,z,te){return this.runner(P,te,z)}};var zu=Rr(ns()),ol=class extends On{constructor(){super("javascript-browser","JavaScript (Browser)",(P,z,te)=>{let X=new Worker("dist/js/langs/javascript-browser/worker.js");return X.postMessage({type:"run",code:P,args:te,input:z}),X},"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/",null,"javascript")}},sl=ol;var Ku=Rr(os()),cl=class extends On{constructor(){super("webperl-5.28.1","Perl 5.28.1 (webperl)",(P,z,te)=>{let X=new Worker("dist/js/langs/webperl-5.28.1/worker.js");return X.postMessage({type:"run",code:P,args:te,input:z}),X},"https://www.perl.org/",["-M5.10.0","-F","-l","-p"],"perl")}},ul=cl;var Hl=Rr(Ai()),Fl=Rr(pl());var vl=class{constructor(...P){this.buffer="";this.registered=[];this.register(...P)}activate(P){this.registered.reduce((z,te)=>te.matches(P)&&!z?(te.activate(P),te.reset(),te.write(this.buffer),!0):(te.deactivate(),te.reset(),z),!1),this.resize()}register(...P){this.registered.push(...P)}reset(){this.buffer="",this.registered.forEach(P=>P.reset())}resize(){this.registered.forEach(P=>{P.isActive()&&P.resize()})}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.buffer+=P,this.registered.filter(z=>z.isActive()).forEach(z=>z.write(P))}};var ss=(...ee)=>new vl(...ee);var _l=class{constructor(){this.active=!1;this.mimeType="text/plain"}activate(P){this.container.removeAttribute("hidden"),this.active=!0,this.mimeType=P,this.resize()}createElement(P="div"){let z=document.createElement(P);return z.setAttribute("hidden",""),z}deactivate(){this.container.setAttribute("hidden",""),this.active=!1}isActive(){return this.active}matches(P){return!0}resize(){}},sn=_l;var Qu=Rr(ns()),ef=Rr(os()),gl=class extends sn{constructor(P,z={}){super();let te=document.createElement("textarea");this.container=this.createElement("div"),this.container.append(te),P.append(this.container),this.editor=uo.createEditor(te,on(ci({},z),{readOnly:!0})),P.append(this.container)}activate(P){super.activate(P),this.editor.setOption("mode",P)}deactivate(){super.deactivate()}matches(P){return["application/ecmascript","application/javascript","application/json","application/x-perl","text/ecmascript","text/javascript","text/json","text/x-perl"].includes(P)}reset(){this.editor.setValue("")}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.editor.setValue(this.editor.getValue()+P)}},yl=gl;var ml=class extends sn{constructor(P){super();this.buffer="";this.mimeType="text/html";this.container=this.createElement("iframe"),P.append(this.container),this.update()}activate(P){super.activate(P),this.update()}matches(P){return["text/html"].includes(P)}reset(){this.buffer="",this.update()}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.buffer+=P,this.update()}update(){this.container.src=`data:${this.mimeType};base64,${btoa(this.buffer)}`}},fo=ml;var bl=class{constructor(){this.registered=[]}register(...P){this.registered.push(...P)}decode(P){return this.decoder(P).decode(P)}decoder(P){let[z]=this.registered.filter(te=>te.matches(P));return z}};var fi=new bl;var Dr=class{constructor(P,z,te,X,h,L,p,g){this.languageSelector=P;this.header=z;this.code=te;this.footer=X;this.stdin=h;this.stdout=L;this.stderr=p;this.args=g;this.htmlOutMimeType="text/html"}writeStdout(P){this.stdout.write(P)}writeStderr(P){this.stderr.write(P)}clearStdout(){this.stdout.reset()}clearStderr(){this.stderr.reset()}static getRaw(P){return P.getValue()}static getAsArray(P){return fi.decode(Dr.getRaw(P))}getRawCodeHeader(){return Dr.getRaw(this.header)}getCodeHeaderAsArray(){return Dr.getAsArray(this.header)}setCodeHeader(P){this.header.setValue(P)}getRawCode(){return Dr.getRaw(this.code)}getCodeAsArray(){return Dr.getAsArray(this.code)}getCodeAsString(P="."){let z=this.getRawCode(),te=fi.decoder(z);return te.name()!=="default"&&(z=String.fromCharCode(...te.decode(z))),P!==null&&(z=z.replace(/[\x00-\x1f\x7f-\xff]/g,P)),z}getFullCodeAsArray(){return[...this.getCodeHeaderAsArray(),...this.getCodeAsArray(),...this.getCodeFooterAsArray()]}setCode(P){this.code.setValue(P)}onCodeChange(P){this.code.on("change",()=>P())}getRawCodeFooter(){return Dr.getRaw(this.footer)}getCodeFooterAsArray(){return Dr.getAsArray(this.footer)}setCodeFooter(P){this.footer.setValue(P)}getArgs(){return this.args.getValue()}setArgs(P){this.args.setValue(P)}argsRefresh(){this.args.refresh()}getStdin(){return this.stdin.getValue()}setStdin(P){this.stdin.setValue(P)}},as=Dr;var Sl=class extends fo{constructor(){super(...arguments);this.imageBuffer="";this.imageMimeType="image/png"}activate(P){super.activate("text/html"),this.imageMimeType=P}css(){return`
html, body {
  margin: 0;
  padding: 0;
}
=======
(()=>{var vu=Object.create;var Xo=Object.defineProperty;var _u=Object.getOwnPropertyDescriptor;var gu=Object.getOwnPropertyNames;var yu=Object.getPrototypeOf,mu=Object.prototype.hasOwnProperty;var bu=ee=>Xo(ee,"__esModule",{value:!0});var Rr=(ee,j)=>()=>(j||ee((j={exports:{}}).exports,j),j.exports);var Su=(ee,j,$,oe)=>{if(j&&typeof j=="object"||typeof j=="function")for(let J of gu(j))!mu.call(ee,J)&&($||J!=="default")&&Xo(ee,J,{get:()=>j[J],enumerable:!(oe=_u(j,J))||oe.enumerable});return ee},Or=(ee,j)=>Su(bu(Xo(ee!=null?vu(yu(ee)):{},"default",!j&&ee&&ee.__esModule?{get:()=>ee.default,enumerable:!0}:{value:ee,enumerable:!0})),ee);var Vr=Rr((Yo,Zo)=>{(function(ee,j){typeof Yo=="object"&&typeof Zo!="undefined"?Zo.exports=j():typeof define=="function"&&define.amd?define(j):(ee=ee||self,ee.CodeMirror=j())})(Yo,function(){"use strict";var ee=navigator.userAgent,j=navigator.platform,$=/gecko\/\d/i.test(ee),oe=/MSIE \d/.test(ee),J=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ee),d=/Edge\/(\d+)/.exec(ee),x=oe||J||d,v=x&&(oe?document.documentMode||6:+(d||J)[1]),y=!d&&/WebKit\//.test(ee),S=y&&/Qt\/\d+\.\d+/.test(ee),m=!d&&/Chrome\//.test(ee),b=/Opera\//.test(ee),C=/Apple Computer/.test(navigator.vendor),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ee),h=/PhantomJS/.test(ee),p=C&&(/Mobile\/\w+/.test(ee)||navigator.maxTouchPoints>2),l=/Android/.test(ee),a=p||l||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ee),o=p||/Mac/.test(j),s=/\bCrOS\b/.test(ee),f=/win/i.test(j),_=b&&ee.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(b=!1,y=!0);var L=o&&(S||b&&(_==null||_<12.11)),A=$||x&&v>=9;function I(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var P=function(e,t){var i=e.className,r=I(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function k(e,t){return M(e).appendChild(t)}function D(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)n.appendChild(t[c]);return n}function E(e,t,i,r){var n=D(e,t,i,r);return n.setAttribute("role","presentation"),n}var U;document.createRange?U=function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:U=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function W(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function B(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function F(e,t){var i=e.className;I(t).test(i)||(e.className+=(i?" ":"")+t)}function X(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!I(i[r]).test(t)&&(t+=" "+i[r]);return t}var Z=function(e){e.select()};p?Z=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(Z=function(e){try{e.select()}catch{}});function se(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ae(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function me(e,t,i,r,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=r||0,g=n||0;;){var w=e.indexOf("	",c);if(w<0||w>=t)return g+(t-c);g+=w-c,g+=i-g%i,c=w+1}}var we=function(){this.id=null,this.f=null,this.time=0,this.handler=se(this.onTimeout,this)};we.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},we.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function he(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var H=50,q={toString:function(){return"CodeMirror.Pass"}},z={scroll:!1},ce={origin:"*mouse"},Y={origin:"+move"};function _e(e,t,i){for(var r=0,n=0;;){var c=e.indexOf("	",r);c==-1&&(c=e.length);var g=c-r;if(c==e.length||n+g>=t)return r+Math.min(g,t-n);if(n+=c-r,n+=i-n%i,r=c+1,n>=t)return r}}var Le=[""];function Be(e){for(;Le.length<=e;)Le.push(Ee(Le)+" ");return Le[e]}function Ee(e){return e[e.length-1]}function Ie(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function Se(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}function qe(){}function _t(e,t){var i;return Object.create?i=Object.create(e):(qe.prototype=e,i=new qe),t&&ae(t,i),i}var Mt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Yt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Mt.test(e))}function _r(e,t){return t?t.source.indexOf("\\w")>-1&&Yt(e)?!0:t.test(e):Yt(e)}function ei(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var di=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Pr(e){return e.charCodeAt(0)>=768&&di.test(e)}function ti(e,t,i){for(;(i<0?t>0:t<e.length)&&Pr(e.charAt(t));)t+=i;return t}function Ut(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var n=(t+i)/2,c=r<0?Math.ceil(n):Math.floor(n);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+r}}function pi(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var n=!1,c=0;c<e.length;++c){var g=e[c];(g.from<i&&g.to>t||t==i&&g.to==t)&&(r(Math.max(g.from,t),Math.min(g.to,i),g.level==1?"rtl":"ltr",c),n=!0)}n||r(t,i,"ltr")}var gt=null;function Ne(e,t,i){var r;gt=null;for(var n=0;n<e.length;++n){var c=e[n];if(c.from<t&&c.to>t)return n;c.to==t&&(c.from!=c.to&&i=="before"?r=n:gt=n),c.from==t&&(c.from!=c.to&&i!="before"?r=n:gt=n)}return r??gt}var sr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(R){return R<=247?e.charAt(R):1424<=R&&R<=1524?"R":1536<=R&&R<=1785?t.charAt(R-1536):1774<=R&&R<=2220?"r":8192<=R&&R<=8203?"w":R==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,c=/[LRr]/,g=/[Lb1n]/,w=/[1n]/;function T(R,N,G){this.level=R,this.from=N,this.to=G}return function(R,N){var G=N=="ltr"?"L":"R";if(R.length==0||N=="ltr"&&!r.test(R))return!1;for(var Q=R.length,V=[],te=0;te<Q;++te)V.push(i(R.charCodeAt(te)));for(var le=0,de=G;le<Q;++le){var pe=V[le];pe=="m"?V[le]=de:de=pe}for(var ye=0,ve=G;ye<Q;++ye){var be=V[ye];be=="1"&&ve=="r"?V[ye]="n":c.test(be)&&(ve=be,be=="r"&&(V[ye]="R"))}for(var Te=1,xe=V[0];Te<Q-1;++Te){var Re=V[Te];Re=="+"&&xe=="1"&&V[Te+1]=="1"?V[Te]="1":Re==","&&xe==V[Te+1]&&(xe=="1"||xe=="n")&&(V[Te]=xe),xe=Re}for(var We=0;We<Q;++We){var lt=V[We];if(lt==",")V[We]="N";else if(lt=="%"){var ze=void 0;for(ze=We+1;ze<Q&&V[ze]=="%";++ze);for(var Xt=We&&V[We-1]=="!"||ze<Q&&V[ze]=="1"?"1":"N",Wt=We;Wt<ze;++Wt)V[Wt]=Xt;We=ze-1}}for(var Qe=0,Nt=G;Qe<Q;++Qe){var pt=V[Qe];Nt=="L"&&pt=="1"?V[Qe]="L":c.test(pt)&&(Nt=pt)}for(var it=0;it<Q;++it)if(n.test(V[it])){var et=void 0;for(et=it+1;et<Q&&n.test(V[et]);++et);for(var Xe=(it?V[it-1]:G)=="L",jt=(et<Q?V[et]:G)=="L",tn=Xe==jt?Xe?"L":"R":G,fi=it;fi<et;++fi)V[fi]=tn;it=et-1}for(var xt=[],Mr,ct=0;ct<Q;)if(g.test(V[ct])){var Ko=ct;for(++ct;ct<Q&&g.test(V[ct]);++ct);xt.push(new T(0,Ko,ct))}else{var $r=ct,Ai=xt.length,Mi=N=="rtl"?1:0;for(++ct;ct<Q&&V[ct]!="L";++ct);for(var At=$r;At<ct;)if(w.test(V[At])){$r<At&&(xt.splice(Ai,0,new T(1,$r,At)),Ai+=Mi);var rn=At;for(++At;At<ct&&w.test(V[At]);++At);xt.splice(Ai,0,new T(2,rn,At)),Ai+=Mi,$r=At}else++At;$r<ct&&xt.splice(Ai,0,new T(1,$r,ct))}return N=="ltr"&&(xt[0].level==1&&(Mr=R.match(/^\s+/))&&(xt[0].from=Mr[0].length,xt.unshift(new T(0,0,Mr[0].length))),Ee(xt).level==1&&(Mr=R.match(/\s+$/))&&(Ee(xt).to-=Mr[0].length,xt.push(new T(0,Q-Mr[0].length,Q)))),N=="rtl"?xt.reverse():xt}}();function ut(e,t){var i=e.order;return i==null&&(i=e.order=sr(e.text,t)),i}var Zt=[],ke=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Zt).concat(i)}};function ar(e,t){return e._handlers&&e._handlers[t]||Zt}function tt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var c=he(n,i);c>-1&&(r[t]=n.slice(0,c).concat(n.slice(c+1)))}}}function Ae(e,t){var i=ar(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function je(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ae(e,i||t.type,e,t),ft(t)||t.codemirrorIgnore}function lr(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)he(i,t[r])==-1&&i.push(t[r])}function Ke(e,t){return ar(e,t).length>0}function Rt(e){e.prototype.on=function(t,i){ke(this,t,i)},e.prototype.off=function(t,i){tt(this,t,i)}}function Ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function cr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function tr(e){Ye(e),cr(e)}function $t(e){return e.target||e.srcElement}function Hr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),o&&e.ctrlKey&&t==1&&(t=3),t}var gr=function(){if(x&&v<9)return!1;var e=D("div");return"draggable"in e||"dragDrop"in e}(),rt;function Ir(e){if(rt==null){var t=D("span","\u200B");k(e,D("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(rt=t.offsetWidth<=1&&t.offsetHeight>2&&!(x&&v<8))}var i=rt?D("span","\u200B"):D("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var yr;function Ot(e){if(yr!=null)return yr;var t=k(e,document.createTextNode("A\u062EA")),i=U(t,0,1).getBoundingClientRect(),r=U(t,1,2).getBoundingClientRect();return M(e),!i||i.left==i.right?!1:yr=r.right-i.right<3}var mr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var c=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),g=c.indexOf("\r");g!=-1?(i.push(c.slice(0,g)),t+=g+1):(i.push(c),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Fr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Wr=function(){var e=D("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),br=null;function Jt(e){if(br!=null)return br;var t=k(e,D("span","x")),i=t.getBoundingClientRect(),r=U(t,0,1).getBoundingClientRect();return br=Math.abs(i.left-r.left)>1}var yt={},ht={};function Nr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),yt[e]=t}function qt(e,t){ht[e]=t}function ur(e){if(typeof e=="string"&&ht.hasOwnProperty(e))e=ht[e];else if(e&&typeof e.name=="string"&&ht.hasOwnProperty(e.name)){var t=ht[e.name];typeof t=="string"&&(t={name:t}),e=_t(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return ur("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return ur("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function fr(e,t){t=ur(t);var i=yt[t.name];if(!i)return fr(e,"text/plain");var r=i(e,t);if(kt.hasOwnProperty(t.name)){var n=kt[t.name];for(var c in n)!n.hasOwnProperty(c)||(r.hasOwnProperty(c)&&(r["_"+c]=r[c]),r[c]=n[c])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var g in t.modeProps)r[g]=t.modeProps[g];return r}var kt={};function Et(e,t){var i=kt.hasOwnProperty(e)?kt[e]:kt[e]={};ae(t,i)}function dt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function Sr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Cr(e,t,i){return e.startState?e.startState(t,i):!0}var Fe=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Fe.prototype.eol=function(){return this.pos>=this.string.length},Fe.prototype.sol=function(){return this.pos==this.lineStart},Fe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Fe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Fe.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},Fe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Fe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Fe.prototype.skipToEnd=function(){this.pos=this.string.length},Fe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Fe.prototype.backUp=function(e){this.pos-=e},Fe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=me(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.indentation=function(){return me(this.string,null,this.tabSize)-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(g){return i?g.toLowerCase():g},n=this.string.substr(this.pos,e.length);if(r(n)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},Fe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Fe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Fe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Fe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Ce(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],c=n.chunkSize();if(t<c){i=n;break}t-=c}return i.lines[t]}function Dt(e,t,i){var r=[],n=t.line;return e.iter(t.line,i.line+1,function(c){var g=c.text;n==i.line&&(g=g.slice(0,i.ch)),n==t.line&&(g=g.slice(t.ch)),r.push(g),++n}),r}function wr(e,t,i){var r=[];return e.iter(t,i,function(n){r.push(n.text)}),r}function nt(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function De(e){if(e.parent==null)return null;for(var t=e.parent,i=he(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function Bt(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],c=n.height;if(t<c){e=n;continue e}t-=c,i+=n.chunkSize()}return i}while(!e.lines);for(var g=0;g<e.lines.length;++g){var w=e.lines[g],T=w.height;if(t<T)break;t-=T}return i+g}function rr(e,t){return t>=e.first&&t<e.first+e.size}function Lr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ue(e,t,i){if(i===void 0&&(i=null),!(this instanceof ue))return new ue(e,t,i);this.line=e,this.ch=t,this.sticky=i}function O(e,t){return e.line-t.line||e.ch-t.ch}function K(e,t){return e.sticky==t.sticky&&O(e,t)==0}function ne(e){return ue(e.line,e.ch)}function fe(e,t){return O(e,t)<0?t:e}function Me(e,t){return O(e,t)<0?e:t}function Oe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return ue(e.first,0);var i=e.first+e.size-1;return t.line>i?ue(i,Ce(e,i).text.length):Je(t,Ce(e,t.line).text.length)}function Je(e,t){var i=e.ch;return i==null||i>t?ue(e.line,t):i<0?ue(e.line,0):e}function mt(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=ge(e,t[r]);return i}var xr=function(e,t){this.state=e,this.lookAhead=t},zt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};zt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},zt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(e,t,i){return t instanceof xr?new zt(e,dt(e.mode,t.state),i,t.lookAhead):new zt(e,dt(e.mode,t),i)},zt.prototype.save=function(e){var t=e!==!1?dt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new xr(t,this.maxLookAhead):t};function Ri(e,t,i,r){var n=[e.state.modeGen],c={};Ii(e,t.text,e.doc.mode,i,function(R,N){return n.push(R,N)},c,r);for(var g=i.state,w=function(R){i.baseTokens=n;var N=e.state.overlays[R],G=1,Q=0;i.state=!0,Ii(e,t.text,N.mode,i,function(V,te){for(var le=G;Q<V;){var de=n[G];de>V&&n.splice(G,1,V,n[G+1],de),G+=2,Q=Math.min(V,de)}if(!!te)if(N.opaque)n.splice(le,G-le,V,"overlay "+te),G=le+2;else for(;le<G;le+=2){var pe=n[le+1];n[le+1]=(pe?pe+" ":"")+"overlay "+te}},c),i.state=g,i.baseTokens=null,i.baseTokenPos=1},T=0;T<e.state.overlays.length;++T)w(T);return{styles:n,classes:c.bgClass||c.textClass?c:null}}function Oi(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=jr(e,De(t)),n=t.text.length>e.options.maxHighlightLength&&dt(e.doc.mode,r.state),c=Ri(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function jr(e,t,i){var r=e.doc,n=e.display;if(!r.mode.startState)return new zt(r,!0,t);var c=nn(e,t,i),g=c>r.first&&Ce(r,c-1).stateAfter,w=g?zt.fromSaved(r,g,c):new zt(r,Cr(r.mode),c);return r.iter(c,t,function(T){vi(e,T.text,w);var R=w.line;T.stateAfter=R==t-1||R%5==0||R>=n.viewFrom&&R<n.viewTo?w.save():null,w.nextLine()}),i&&(r.modeFrontier=w.line),w}function vi(e,t,i,r){var n=e.doc.mode,c=new Fe(t,e.options.tabSize,i);for(c.start=c.pos=r||0,t==""&&Di(n,i.state);!c.eol();)_i(n,c,i.state),c.start=c.pos}function Di(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=Sr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function _i(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=Sr(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var Bi=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Pi(e,t,i,r){var n=e.doc,c=n.mode,g;t=ge(n,t);var w=Ce(n,t.line),T=jr(e,t.line,i),R=new Fe(w.text,e.options.tabSize,T),N;for(r&&(N=[]);(r||R.pos<t.ch)&&!R.eol();)R.start=R.pos,g=_i(c,R,T.state),r&&N.push(new Bi(R,g,dt(n.mode,T.state)));return r?N:new Bi(R,g,T.state)}function Hi(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Ii(e,t,i,r,n,c,g){var w=i.flattenSpans;w==null&&(w=e.options.flattenSpans);var T=0,R=null,N=new Fe(t,e.options.tabSize,r),G,Q=e.options.addModeClass&&[null];for(t==""&&Hi(Di(i,r.state),c);!N.eol();){if(N.pos>e.options.maxHighlightLength?(w=!1,g&&vi(e,t,r,N.pos),N.pos=t.length,G=null):G=Hi(_i(i,N,r.state,Q),c),Q){var V=Q[0].name;V&&(G="m-"+(G?V+" "+G:V))}if(!w||R!=G){for(;T<N.start;)T=Math.min(N.start,T+5e3),n(T,R);R=G}N.start=N.pos}for(;T<N.pos;){var te=Math.min(N.pos,T+5e3);n(te,R),T=te}}function nn(e,t,i){for(var r,n,c=e.doc,g=i?-1:t-(e.doc.mode.innerMode?1e3:100),w=t;w>g;--w){if(w<=c.first)return c.first;var T=Ce(c,w-1),R=T.stateAfter;if(R&&(!i||w+(R instanceof xr?R.lookAhead:0)<=c.modeFrontier))return w;var N=me(T.text,null,e.options.tabSize);(n==null||r>N)&&(n=w-1,r=N)}return n}function Mn(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var n=Ce(e,r).stateAfter;if(n&&(!(n instanceof xr)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var Rn=!1,ir=!1;function On(){Rn=!0}function oo(){ir=!0}function Fi(e,t,i){this.marker=e,this.from=t,this.to=i}function ie(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function re(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function nr(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function gi(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],g=c.marker,w=c.from==null||(g.inclusiveLeft?c.from<=t:c.from<t);if(w||c.from==t&&g.type=="bookmark"&&(!i||!c.marker.insertLeft)){var T=c.to==null||(g.inclusiveRight?c.to>=t:c.to>t);(r||(r=[])).push(new Fi(g,c.from,T?null:c.to))}}return r}function yi(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],g=c.marker,w=c.to==null||(g.inclusiveRight?c.to>=t:c.to>t);if(w||c.from==t&&g.type=="bookmark"&&(!i||c.marker.insertLeft)){var T=c.from==null||(g.inclusiveLeft?c.from<=t:c.from<t);(r||(r=[])).push(new Fi(g,T?null:c.from-t,c.to==null?null:c.to-t))}}return r}function Ze(e,t){if(t.full)return null;var i=rr(e,t.from.line)&&Ce(e,t.from.line).markedSpans,r=rr(e,t.to.line)&&Ce(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,c=t.to.ch,g=O(t.from,t.to)==0,w=gi(i,n,g),T=yi(r,c,g),R=t.text.length==1,N=Ee(t.text).length+(R?n:0);if(w)for(var G=0;G<w.length;++G){var Q=w[G];if(Q.to==null){var V=ie(T,Q.marker);V?R&&(Q.to=V.to==null?null:V.to+N):Q.to=n}}if(T)for(var te=0;te<T.length;++te){var le=T[te];if(le.to!=null&&(le.to+=N),le.from==null){var de=ie(w,le.marker);de||(le.from=N,R&&(w||(w=[])).push(le))}else le.from+=N,R&&(w||(w=[])).push(le)}w&&(w=Vt(w)),T&&T!=w&&(T=Vt(T));var pe=[w];if(!R){var ye=t.text.length-2,ve;if(ye>0&&w)for(var be=0;be<w.length;++be)w[be].to==null&&(ve||(ve=[])).push(new Fi(w[be].marker,null,null));for(var Te=0;Te<ye;++Te)pe.push(ve);pe.push(T)}return pe}function Vt(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function or(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(V){if(V.markedSpans)for(var te=0;te<V.markedSpans.length;++te){var le=V.markedSpans[te].marker;le.readOnly&&(!r||he(r,le)==-1)&&(r||(r=[])).push(le)}}),!r)return null;for(var n=[{from:t,to:i}],c=0;c<r.length;++c)for(var g=r[c],w=g.find(0),T=0;T<n.length;++T){var R=n[T];if(!(O(R.to,w.from)<0||O(R.from,w.to)>0)){var N=[T,1],G=O(R.from,w.from),Q=O(R.to,w.to);(G<0||!g.inclusiveLeft&&!G)&&N.push({from:R.from,to:w.from}),(Q>0||!g.inclusiveRight&&!Q)&&N.push({from:w.to,to:R.to}),n.splice.apply(n,N),T+=N.length-3}}return n}function ri(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function bt(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function kr(e){return e.inclusiveRight?1:0}function Ur(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),n=t.find(),c=O(r.from,n.from)||Pt(e)-Pt(t);if(c)return-c;var g=O(r.to,n.to)||kr(e)-kr(t);return g||t.id-e.id}function qr(e,t){var i=ir&&e.markedSpans,r;if(i)for(var n=void 0,c=0;c<i.length;++c)n=i[c],n.marker.collapsed&&(t?n.from:n.to)==null&&(!r||Ur(r,n.marker)<0)&&(r=n.marker);return r}function zr(e){return qr(e,!0)}function St(e){return qr(e,!1)}function Ht(e,t){var i=ir&&e.markedSpans,r;if(i)for(var n=0;n<i.length;++n){var c=i[n];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!r||Ur(r,c.marker)<0)&&(r=c.marker)}return r}function Ge(e,t,i,r,n){var c=Ce(e,t),g=ir&&c.markedSpans;if(g)for(var w=0;w<g.length;++w){var T=g[w];if(!!T.marker.collapsed){var R=T.marker.find(0),N=O(R.from,i)||Pt(T.marker)-Pt(n),G=O(R.to,r)||kr(T.marker)-kr(n);if(!(N>=0&&G<=0||N<=0&&G>=0)&&(N<=0&&(T.marker.inclusiveRight&&n.inclusiveLeft?O(R.to,i)>=0:O(R.to,i)>0)||N>=0&&(T.marker.inclusiveRight&&n.inclusiveLeft?O(R.from,r)<=0:O(R.from,r)<0)))return!0}}}function Ve(e){for(var t;t=zr(e);)e=t.find(-1,!0).line;return e}function Qt(e){for(var t;t=St(e);)e=t.find(1,!0).line;return e}function Kr(e){for(var t,i;t=St(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function hr(e,t){var i=Ce(e,t),r=Ve(i);return i==r?t:De(r)}function mi(e,t){if(t>e.lastLine())return t;var i=Ce(e,t),r;if(!Ct(e,i))return t;for(;r=St(i);)i=r.find(1,!0).line;return De(i)+1}function Ct(e,t){var i=ir&&t.markedSpans;if(i){for(var r=void 0,n=0;n<i.length;++n)if(r=i[n],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Er(e,t,r))return!0}}}function Er(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Er(e,r.line,ie(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,c=0;c<t.markedSpans.length;++c)if(n=t.markedSpans[c],n.marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(n.to==null||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Er(e,t,n))return!0}function wt(e){e=Ve(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var c=i.parent;c;i=c,c=i.parent)for(var g=0;g<c.children.length;++g){var w=c.children[g];if(w==i)break;t+=w.height}return t}function ii(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=zr(r);){var n=i.find(0,!0);r=n.from.line,t+=n.from.ch-n.to.ch}for(r=e;i=St(r);){var c=i.find(0,!0);t-=r.text.length-c.from.ch,r=c.to.line,t+=r.text.length-c.to.ch}return t}function bi(e){var t=e.display,i=e.doc;t.maxLine=Ce(i,i.first),t.maxLineLength=ii(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var n=ii(r);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=r)})}var Kt=function(e,t,i){this.text=e,bt(this,t),this.height=i?i(this):1};Kt.prototype.lineNo=function(){return De(this)},Rt(Kt);function Gr(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),ri(e),bt(e,i);var n=r?r(e):1;n!=e.height&&nt(e,n)}function so(e){e.parent=null,ri(e)}var Rl={},Ol={};function Qo(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Ol:Rl;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function es(e,t){var i=E("span",null,null,y?"padding-right: .1px":null),r={pre:E("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var c=n?t.rest[n-1]:t.line,g=void 0;r.pos=0,r.addToken=Bl,Ot(e.display.measure)&&(g=ut(c,e.doc.direction))&&(r.addToken=Hl(r.addToken,g)),r.map=[];var w=t!=e.display.externalMeasured&&De(c);Il(c,r,Oi(e,c,w)),c.styleClasses&&(c.styleClasses.bgClass&&(r.bgClass=X(c.styleClasses.bgClass,r.bgClass||"")),c.styleClasses.textClass&&(r.textClass=X(c.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Ir(e.display.measure))),n==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(y){var T=r.content.lastChild;(/\bcm-tab\b/.test(T.className)||T.querySelector&&T.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ae(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=X(r.pre.className,r.textClass||"")),r}function Dl(e){var t=D("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Bl(e,t,i,r,n,c,g){if(!!t){var w=e.splitSpaces?Pl(t,e.trailingSpace):t,T=e.cm.state.specialChars,R=!1,N;if(!T.test(t))e.col+=t.length,N=document.createTextNode(w),e.map.push(e.pos,e.pos+t.length,N),x&&v<9&&(R=!0),e.pos+=t.length;else{N=document.createDocumentFragment();for(var G=0;;){T.lastIndex=G;var Q=T.exec(t),V=Q?Q.index-G:t.length-G;if(V){var te=document.createTextNode(w.slice(G,G+V));x&&v<9?N.appendChild(D("span",[te])):N.appendChild(te),e.map.push(e.pos,e.pos+V,te),e.col+=V,e.pos+=V}if(!Q)break;G+=V+1;var le=void 0;if(Q[0]=="	"){var de=e.cm.options.tabSize,pe=de-e.col%de;le=N.appendChild(D("span",Be(pe),"cm-tab")),le.setAttribute("role","presentation"),le.setAttribute("cm-text","	"),e.col+=pe}else Q[0]=="\r"||Q[0]==`
`?(le=N.appendChild(D("span",Q[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),le.setAttribute("cm-text",Q[0]),e.col+=1):(le=e.cm.options.specialCharPlaceholder(Q[0]),le.setAttribute("cm-text",Q[0]),x&&v<9?N.appendChild(D("span",[le])):N.appendChild(le),e.col+=1);e.map.push(e.pos,e.pos+1,le),e.pos++}}if(e.trailingSpace=w.charCodeAt(t.length-1)==32,i||r||n||R||c||g){var ye=i||"";r&&(ye+=r),n&&(ye+=n);var ve=D("span",[N],ye,c);if(g)for(var be in g)g.hasOwnProperty(be)&&be!="style"&&be!="class"&&ve.setAttribute(be,g[be]);return e.content.appendChild(ve)}e.content.appendChild(N)}}function Pl(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var c=e.charAt(n);c==" "&&i&&(n==e.length-1||e.charCodeAt(n+1)==32)&&(c="\xA0"),r+=c,i=c==" "}return r}function Hl(e,t){return function(i,r,n,c,g,w,T){n=n?n+" cm-force-border":"cm-force-border";for(var R=i.pos,N=R+r.length;;){for(var G=void 0,Q=0;Q<t.length&&(G=t[Q],!(G.to>R&&G.from<=R));Q++);if(G.to>=N)return e(i,r,n,c,g,w,T);e(i,r.slice(0,G.to-R),n,c,null,w,T),c=null,r=r.slice(G.to-R),R=G.to}}}function ts(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function Il(e,t,i){var r=e.markedSpans,n=e.text,c=0;if(!r){for(var g=1;g<i.length;g+=2)t.addToken(t,n.slice(c,c=i[g]),Qo(i[g+1],t.cm.options));return}for(var w=n.length,T=0,R=1,N="",G,Q,V=0,te,le,de,pe,ye;;){if(V==T){te=le=de=Q="",ye=null,pe=null,V=1/0;for(var ve=[],be=void 0,Te=0;Te<r.length;++Te){var xe=r[Te],Re=xe.marker;if(Re.type=="bookmark"&&xe.from==T&&Re.widgetNode)ve.push(Re);else if(xe.from<=T&&(xe.to==null||xe.to>T||Re.collapsed&&xe.to==T&&xe.from==T)){if(xe.to!=null&&xe.to!=T&&V>xe.to&&(V=xe.to,le=""),Re.className&&(te+=" "+Re.className),Re.css&&(Q=(Q?Q+";":"")+Re.css),Re.startStyle&&xe.from==T&&(de+=" "+Re.startStyle),Re.endStyle&&xe.to==V&&(be||(be=[])).push(Re.endStyle,xe.to),Re.title&&((ye||(ye={})).title=Re.title),Re.attributes)for(var We in Re.attributes)(ye||(ye={}))[We]=Re.attributes[We];Re.collapsed&&(!pe||Ur(pe.marker,Re)<0)&&(pe=xe)}else xe.from>T&&V>xe.from&&(V=xe.from)}if(be)for(var lt=0;lt<be.length;lt+=2)be[lt+1]==V&&(le+=" "+be[lt]);if(!pe||pe.from==T)for(var ze=0;ze<ve.length;++ze)ts(t,0,ve[ze]);if(pe&&(pe.from||0)==T){if(ts(t,(pe.to==null?w+1:pe.to)-T,pe.marker,pe.from==null),pe.to==null)return;pe.to==T&&(pe=!1)}}if(T>=w)break;for(var Xt=Math.min(w,V);;){if(N){var Wt=T+N.length;if(!pe){var Qe=Wt>Xt?N.slice(0,Xt-T):N;t.addToken(t,Qe,G?G+te:te,de,T+Qe.length==V?le:"",Q,ye)}if(Wt>=Xt){N=N.slice(Xt-T),T=Xt;break}T=Wt,de=""}N=n.slice(c,c=i[R++]),G=Qo(i[R++],t.cm.options)}}}function rs(e,t,i){this.line=t,this.rest=Kr(t),this.size=this.rest?De(Ee(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Ct(e,t)}function Dn(e,t,i){for(var r=[],n,c=t;c<i;c=n){var g=new rs(e.doc,Ce(e.doc,c),c);n=c+g.size,r.push(g)}return r}var Wi=null;function Fl(e){Wi?Wi.ops.push(e):e.ownsGroup=Wi={ops:[e],delayedCallbacks:[]}}function Wl(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}function Nl(e,t){var i=e.ownsGroup;if(!!i)try{Wl(i)}finally{Wi=null,t(i)}}var on=null;function ot(e,t){var i=ar(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),n;Wi?n=Wi.delayedCallbacks:on?n=on:(n=on=[],setTimeout(jl,0));for(var c=function(w){n.push(function(){return i[w].apply(null,r)})},g=0;g<i.length;++g)c(g)}}function jl(){var e=on;on=null;for(var t=0;t<e.length;++t)e[t]()}function is(e,t,i,r){for(var n=0;n<t.changes.length;n++){var c=t.changes[n];c=="text"?ql(e,t):c=="gutter"?os(e,t,i,r):c=="class"?ao(e,t):c=="widget"&&zl(e,t,r)}t.changes=null}function sn(e){return e.node==e.text&&(e.node=D("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&v<8&&(e.node.style.zIndex=2)),e.node}function Ul(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=sn(t);t.background=r.insertBefore(D("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function ns(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):es(e,t)}function ql(e,t){var i=t.text.className,r=ns(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ao(e,t)):i&&(t.text.className=i)}function ao(e,t){Ul(e,t),t.line.wrapClass?sn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function os(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=sn(t);t.gutterBackground=D("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var g=sn(t),w=t.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(w.setAttribute("aria-hidden","true"),e.display.input.setUneditable(w),g.insertBefore(w,t.text),t.line.gutterClass&&(w.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=w.appendChild(D("div",Lr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var T=0;T<e.display.gutterSpecs.length;++T){var R=e.display.gutterSpecs[T].className,N=c.hasOwnProperty(R)&&c[R];N&&w.appendChild(D("div",[N],"CodeMirror-gutter-elt","left: "+r.gutterLeft[R]+"px; width: "+r.gutterWidth[R]+"px"))}}}function zl(e,t,i){t.alignable&&(t.alignable=null);for(var r=I("CodeMirror-linewidget"),n=t.node.firstChild,c=void 0;n;n=c)c=n.nextSibling,r.test(n.className)&&t.node.removeChild(n);ss(e,t,i)}function Kl(e,t,i,r){var n=ns(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),ao(e,t),os(e,t,i,r),ss(e,t,r),t.node}function ss(e,t,i){if(as(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)as(e,t.rest[r],t,i,!1)}function as(e,t,i,r,n){if(!!t.widgets)for(var c=sn(i),g=0,w=t.widgets;g<w.length;++g){var T=w[g],R=D("div",[T.node],"CodeMirror-linewidget"+(T.className?" "+T.className:""));T.handleMouseEvents||R.setAttribute("cm-ignore-events","true"),Gl(T,R,i,r),e.display.input.setUneditable(R),n&&T.above?c.insertBefore(R,i.gutter||i.text):c.appendChild(R),ot(T,"redraw")}}function Gl(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function an(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!W(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),k(t.display.measure,D("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Xr(e,t){for(var i=$t(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Bn(e){return e.lineSpace.offsetTop}function lo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ls(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=k(e.measure,D("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Tr(e){return H-e.display.nativeBarWidth}function Si(e){return e.display.scroller.clientWidth-Tr(e)-e.display.barWidth}function co(e){return e.display.scroller.clientHeight-Tr(e)-e.display.barHeight}function Xl(e,t,i){var r=e.options.lineWrapping,n=r&&Si(e);if(!t.measure.heights||r&&t.measure.width!=n){var c=t.measure.heights=[];if(r){t.measure.width=n;for(var g=t.text.firstChild.getClientRects(),w=0;w<g.length-1;w++){var T=g[w],R=g[w+1];Math.abs(T.bottom-R.bottom)>2&&c.push((T.bottom+R.top)/2-i.top)}}c.push(i.bottom-i.top)}}function cs(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(De(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}}function Yl(e,t){t=Ve(t);var i=De(t),r=e.display.externalMeasured=new rs(e.doc,t,i);r.lineN=i;var n=r.built=es(e,r);return r.text=n.pre,k(e.display.lineMeasure,n.pre),r}function us(e,t,i,r){return Ar(e,Ni(e,t),i,r)}function uo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Li(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function Ni(e,t){var i=De(t),r=uo(e,i);r&&!r.text?r=null:r&&r.changes&&(is(e,r,i,_o(e)),e.curOp.forceUpdate=!0),r||(r=Yl(e,t));var n=cs(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Ar(e,t,i,r,n){t.before&&(i=-1);var c=i+(r||""),g;return t.cache.hasOwnProperty(c)?g=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xl(e,t.view,t.rect),t.hasHeights=!0),g=$l(e,t,i,r),g.bogus||(t.cache[c]=g)),{left:g.left,right:g.right,top:n?g.rtop:g.top,bottom:n?g.rbottom:g.bottom}}var fs={left:0,right:0,top:0,bottom:0};function hs(e,t,i){for(var r,n,c,g,w,T,R=0;R<e.length;R+=3)if(w=e[R],T=e[R+1],t<w?(n=0,c=1,g="left"):t<T?(n=t-w,c=n+1):(R==e.length-3||t==T&&e[R+3]>t)&&(c=T-w,n=c-1,t>=T&&(g="right")),n!=null){if(r=e[R+2],w==T&&i==(r.insertLeft?"left":"right")&&(g=i),i=="left"&&n==0)for(;R&&e[R-2]==e[R-3]&&e[R-1].insertLeft;)r=e[(R-=3)+2],g="left";if(i=="right"&&n==T-w)for(;R<e.length-3&&e[R+3]==e[R+4]&&!e[R+5].insertLeft;)r=e[(R+=3)+2],g="right";break}return{node:r,start:n,end:c,collapse:g,coverStart:w,coverEnd:T}}function Zl(e,t){var i=fs;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function $l(e,t,i,r){var n=hs(t.map,i,r),c=n.node,g=n.start,w=n.end,T=n.collapse,R;if(c.nodeType==3){for(var N=0;N<4;N++){for(;g&&Pr(t.line.text.charAt(n.coverStart+g));)--g;for(;n.coverStart+w<n.coverEnd&&Pr(t.line.text.charAt(n.coverStart+w));)++w;if(x&&v<9&&g==0&&w==n.coverEnd-n.coverStart?R=c.parentNode.getBoundingClientRect():R=Zl(U(c,g,w).getClientRects(),r),R.left||R.right||g==0)break;w=g,g=g-1,T="right"}x&&v<11&&(R=Jl(e.display.measure,R))}else{g>0&&(T=r="right");var G;e.options.lineWrapping&&(G=c.getClientRects()).length>1?R=G[r=="right"?G.length-1:0]:R=c.getBoundingClientRect()}if(x&&v<9&&!g&&(!R||!R.left&&!R.right)){var Q=c.parentNode.getClientRects()[0];Q?R={left:Q.left,right:Q.left+Ui(e.display),top:Q.top,bottom:Q.bottom}:R=fs}for(var V=R.top-t.rect.top,te=R.bottom-t.rect.top,le=(V+te)/2,de=t.view.measure.heights,pe=0;pe<de.length-1&&!(le<de[pe]);pe++);var ye=pe?de[pe-1]:0,ve=de[pe],be={left:(T=="right"?R.right:R.left)-t.rect.left,right:(T=="left"?R.left:R.right)-t.rect.left,top:ye,bottom:ve};return!R.left&&!R.right&&(be.bogus=!0),e.options.singleCursorHeightPerLine||(be.rtop=V,be.rbottom=te),be}function Jl(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Jt(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function ds(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ps(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ds(e.display.view[t])}function ln(e){ps(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function vs(){return m&&l?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function _s(){return m&&l?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function fo(e){var t=Ve(e),i=t.widgets,r=0;if(i)for(var n=0;n<i.length;++n)i[n].above&&(r+=an(i[n]));return r}function Pn(e,t,i,r,n){if(!n){var c=fo(t);i.top+=c,i.bottom+=c}if(r=="line")return i;r||(r="local");var g=wt(t);if(r=="local"?g+=Bn(e.display):g-=e.display.viewOffset,r=="page"||r=="window"){var w=e.display.lineSpace.getBoundingClientRect();g+=w.top+(r=="window"?0:_s());var T=w.left+(r=="window"?0:vs());i.left+=T,i.right+=T}return i.top+=g,i.bottom+=g,i}function gs(e,t,i){if(i=="div")return t;var r=t.left,n=t.top;if(i=="page")r-=vs(),n-=_s();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();r+=c.left,n+=c.top}var g=e.display.lineSpace.getBoundingClientRect();return{left:r-g.left,top:n-g.top}}function Hn(e,t,i,r,n){return r||(r=Ce(e.doc,t.line)),Pn(e,r,us(e,r,t.ch,n),i)}function dr(e,t,i,r,n,c){r=r||Ce(e.doc,t.line),n||(n=Ni(e,r));function g(te,le){var de=Ar(e,n,te,le?"right":"left",c);return le?de.left=de.right:de.right=de.left,Pn(e,r,de,i)}var w=ut(r,e.doc.direction),T=t.ch,R=t.sticky;if(T>=r.text.length?(T=r.text.length,R="before"):T<=0&&(T=0,R="after"),!w)return g(R=="before"?T-1:T,R=="before");function N(te,le,de){var pe=w[le],ye=pe.level==1;return g(de?te-1:te,ye!=de)}var G=Ne(w,T,R),Q=gt,V=N(T,G,R=="before");return Q!=null&&(V.other=N(T,Q,R!="before")),V}function ys(e,t){var i=0;t=ge(e.doc,t),e.options.lineWrapping||(i=Ui(e.display)*t.ch);var r=Ce(e.doc,t.line),n=wt(r)+Bn(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function ho(e,t,i,r,n){var c=ue(e,t,i);return c.xRel=n,r&&(c.outside=r),c}function po(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return ho(r.first,0,null,-1,-1);var n=Bt(r,i),c=r.first+r.size-1;if(n>c)return ho(r.first+r.size-1,Ce(r,c).text.length,null,1,1);t<0&&(t=0);for(var g=Ce(r,n);;){var w=Vl(e,g,n,t,i),T=Ht(g,w.ch+(w.xRel>0||w.outside>0?1:0));if(!T)return w;var R=T.find(1);if(R.line==n)return R;g=Ce(r,n=R.line)}}function ms(e,t,i,r){r-=fo(t);var n=t.text.length,c=Ut(function(g){return Ar(e,i,g-1).bottom<=r},n,0);return n=Ut(function(g){return Ar(e,i,g).top>r},c,n),{begin:c,end:n}}function bs(e,t,i,r){i||(i=Ni(e,t));var n=Pn(e,t,Ar(e,i,r),"line").top;return ms(e,t,i,n)}function vo(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function Vl(e,t,i,r,n){n-=wt(t);var c=Ni(e,t),g=fo(t),w=0,T=t.text.length,R=!0,N=ut(t,e.doc.direction);if(N){var G=(e.options.lineWrapping?ec:Ql)(e,t,i,c,N,r,n);R=G.level!=1,w=R?G.from:G.to-1,T=R?G.to:G.from-1}var Q=null,V=null,te=Ut(function(Te){var xe=Ar(e,c,Te);return xe.top+=g,xe.bottom+=g,vo(xe,r,n,!1)?(xe.top<=n&&xe.left<=r&&(Q=Te,V=xe),!0):!1},w,T),le,de,pe=!1;if(V){var ye=r-V.left<V.right-r,ve=ye==R;te=Q+(ve?0:1),de=ve?"after":"before",le=ye?V.left:V.right}else{!R&&(te==T||te==w)&&te++,de=te==0?"after":te==t.text.length?"before":Ar(e,c,te-(R?1:0)).bottom+g<=n==R?"after":"before";var be=dr(e,ue(i,te,de),"line",t,c);le=be.left,pe=n<be.top?-1:n>=be.bottom?1:0}return te=ti(t.text,te,1),ho(i,te,de,pe,r-le)}function Ql(e,t,i,r,n,c,g){var w=Ut(function(G){var Q=n[G],V=Q.level!=1;return vo(dr(e,ue(i,V?Q.to:Q.from,V?"before":"after"),"line",t,r),c,g,!0)},0,n.length-1),T=n[w];if(w>0){var R=T.level!=1,N=dr(e,ue(i,R?T.from:T.to,R?"after":"before"),"line",t,r);vo(N,c,g,!0)&&N.top>g&&(T=n[w-1])}return T}function ec(e,t,i,r,n,c,g){var w=ms(e,t,r,g),T=w.begin,R=w.end;/\s/.test(t.text.charAt(R-1))&&R--;for(var N=null,G=null,Q=0;Q<n.length;Q++){var V=n[Q];if(!(V.from>=R||V.to<=T)){var te=V.level!=1,le=Ar(e,r,te?Math.min(R,V.to)-1:Math.max(T,V.from)).right,de=le<c?c-le+1e9:le-c;(!N||G>de)&&(N=V,G=de)}}return N||(N=n[n.length-1]),N.from<T&&(N={from:T,to:N.to,level:N.level}),N.to>R&&(N={from:N.from,to:R,level:N.level}),N}var Ci;function ji(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Ci==null){Ci=D("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Ci.appendChild(document.createTextNode("x")),Ci.appendChild(D("br"));Ci.appendChild(document.createTextNode("x"))}k(e.measure,Ci);var i=Ci.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),M(e.measure),i||1}function Ui(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=D("span","xxxxxxxxxx"),i=D("pre",[t],"CodeMirror-line-like");k(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function _o(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,c=t.gutters.firstChild,g=0;c;c=c.nextSibling,++g){var w=e.display.gutterSpecs[g].className;i[w]=c.offsetLeft+c.clientLeft+n,r[w]=c.clientWidth}return{fixedPos:go(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function go(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ss(e){var t=ji(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/Ui(e.display)-3);return function(n){if(Ct(e.doc,n))return 0;var c=0;if(n.widgets)for(var g=0;g<n.widgets.length;g++)n.widgets[g].height&&(c+=n.widgets[g].height);return i?c+(Math.ceil(n.text.length/r)||1)*t:c+t}}function yo(e){var t=e.doc,i=Ss(e);t.iter(function(r){var n=i(r);n!=r.height&&nt(r,n)})}function wi(e,t,i,r){var n=e.display;if(!i&&$t(t).getAttribute("cm-not-content")=="true")return null;var c,g,w=n.lineSpace.getBoundingClientRect();try{c=t.clientX-w.left,g=t.clientY-w.top}catch{return null}var T=po(e,c,g),R;if(r&&T.xRel>0&&(R=Ce(e.doc,T.line).text).length==T.ch){var N=me(R,R.length,e.options.tabSize)-R.length;T=ue(T.line,Math.max(0,Math.round((c-ls(e.display).left)/Ui(e.display))-N))}return T}function Li(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function It(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)ir&&hr(e.doc,t)<n.viewTo&&oi(e);else if(i<=n.viewFrom)ir&&mi(e.doc,i+r)>n.viewFrom?oi(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)oi(e);else if(t<=n.viewFrom){var c=In(e,i,i+r,1);c?(n.view=n.view.slice(c.index),n.viewFrom=c.lineN,n.viewTo+=r):oi(e)}else if(i>=n.viewTo){var g=In(e,t,t,-1);g?(n.view=n.view.slice(0,g.index),n.viewTo=g.lineN):oi(e)}else{var w=In(e,t,t,-1),T=In(e,i,i+r,1);w&&T?(n.view=n.view.slice(0,w.index).concat(Dn(e,w.lineN,T.lineN)).concat(n.view.slice(T.index)),n.viewTo+=r):oi(e)}var R=n.externalMeasured;R&&(i<R.lineN?R.lineN+=r:t<R.lineN+R.size&&(n.externalMeasured=null))}function ni(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var c=r.view[Li(e,t)];if(c.node!=null){var g=c.changes||(c.changes=[]);he(g,i)==-1&&g.push(i)}}}function oi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function In(e,t,i,r){var n=Li(e,t),c,g=e.display.view;if(!ir||i==e.doc.first+e.doc.size)return{index:n,lineN:i};for(var w=e.display.viewFrom,T=0;T<n;T++)w+=g[T].size;if(w!=t){if(r>0){if(n==g.length-1)return null;c=w+g[n].size-t,n++}else c=w-t;t+=c,i+=c}for(;hr(e.doc,i)!=i;){if(n==(r<0?0:g.length-1))return null;i+=r*g[n-(r<0?1:0)].size,n+=r}return{index:n,lineN:i}}function tc(e,t,i){var r=e.display,n=r.view;n.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Dn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Dn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Li(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Dn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,Li(e,i)))),r.viewTo=i}function Cs(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];!n.hidden&&(!n.node||n.changes)&&++i}return i}function cn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ws(e,t){t===void 0&&(t=!0);var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),c=r.selection=document.createDocumentFragment(),g=e.options.$customCursor;g&&(t=!0);for(var w=0;w<i.sel.ranges.length;w++)if(!(!t&&w==i.sel.primIndex)){var T=i.sel.ranges[w];if(!(T.from().line>=e.display.viewTo||T.to().line<e.display.viewFrom)){var R=T.empty();if(g){var N=g(e,T);N&&mo(e,N,n)}else(R||e.options.showCursorWhenSelecting)&&mo(e,T.head,n);R||rc(e,T,c)}}return r}function mo(e,t,i){var r=dr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(D("div","\xA0","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=Hn(e,t,"div",null,null),g=c.right-c.left;n.style.width=(g>0?g:e.defaultCharWidth())+"px"}if(r.other){var w=i.appendChild(D("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));w.style.display="",w.style.left=r.other.left+"px",w.style.top=r.other.top+"px",w.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Fn(e,t){return e.top-t.top||e.left-t.left}function rc(e,t,i){var r=e.display,n=e.doc,c=document.createDocumentFragment(),g=ls(e.display),w=g.left,T=Math.max(r.sizerWidth,Si(e)-r.sizer.offsetLeft)-g.right,R=n.direction=="ltr";function N(ve,be,Te,xe){be<0&&(be=0),be=Math.round(be),xe=Math.round(xe),c.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+ve+`px;
                             top: `+be+"px; width: "+(Te??T-ve)+`px;
                             height: `+(xe-be)+"px"))}function G(ve,be,Te){var xe=Ce(n,ve),Re=xe.text.length,We,lt;function ze(Qe,Nt){return Hn(e,ue(ve,Qe),"div",xe,Nt)}function Xt(Qe,Nt,pt){var it=bs(e,xe,null,Qe),et=Nt=="ltr"==(pt=="after")?"left":"right",Xe=pt=="after"?it.begin:it.end-(/\s/.test(xe.text.charAt(it.end-1))?2:1);return ze(Xe,et)[et]}var Wt=ut(xe,n.direction);return pi(Wt,be||0,Te??Re,function(Qe,Nt,pt,it){var et=pt=="ltr",Xe=ze(Qe,et?"left":"right"),jt=ze(Nt-1,et?"right":"left"),tn=be==null&&Qe==0,fi=Te==null&&Nt==Re,xt=it==0,Mr=!Wt||it==Wt.length-1;if(jt.top-Xe.top<=3){var ct=(R?tn:fi)&&xt,Ko=(R?fi:tn)&&Mr,$r=ct?w:(et?Xe:jt).left,Ai=Ko?T:(et?jt:Xe).right;N($r,Xe.top,Ai-$r,Xe.bottom)}else{var Mi,At,rn,Go;et?(Mi=R&&tn&&xt?w:Xe.left,At=R?T:Xt(Qe,pt,"before"),rn=R?w:Xt(Nt,pt,"after"),Go=R&&fi&&Mr?T:jt.right):(Mi=R?Xt(Qe,pt,"before"):w,At=!R&&tn&&xt?T:Xe.right,rn=!R&&fi&&Mr?w:jt.left,Go=R?Xt(Nt,pt,"after"):T),N(Mi,Xe.top,At-Mi,Xe.bottom),Xe.bottom<jt.top&&N(w,Xe.bottom,null,jt.top),N(rn,jt.top,Go-rn,jt.bottom)}(!We||Fn(Xe,We)<0)&&(We=Xe),Fn(jt,We)<0&&(We=jt),(!lt||Fn(Xe,lt)<0)&&(lt=Xe),Fn(jt,lt)<0&&(lt=jt)}),{start:We,end:lt}}var Q=t.from(),V=t.to();if(Q.line==V.line)G(Q.line,Q.ch,V.ch);else{var te=Ce(n,Q.line),le=Ce(n,V.line),de=Ve(te)==Ve(le),pe=G(Q.line,Q.ch,de?te.text.length+1:null).end,ye=G(V.line,de?0:null,V.ch).start;de&&(pe.top<ye.top-2?(N(pe.right,pe.top,null,pe.bottom),N(w,ye.top,ye.left,ye.bottom)):N(pe.right,pe.top,ye.left-pe.right,pe.bottom)),pe.bottom<ye.top&&N(w,pe.bottom,null,ye.top)}i.appendChild(c)}function bo(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||qi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ls(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Co(e))}function So(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&qi(e))},100)}function Co(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Ae(e,"focus",e,t),e.state.focused=!0,F(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),y&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),bo(e))}function qi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ae(e,"blur",e,t),e.state.focused=!1,P(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Wn(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),n=t.lineDiv.getBoundingClientRect().top,c=0,g=0;g<t.view.length;g++){var w=t.view[g],T=e.options.lineWrapping,R=void 0,N=0;if(!w.hidden){if(n+=w.line.height,x&&v<8){var G=w.node.offsetTop+w.node.offsetHeight;R=G-i,i=G}else{var Q=w.node.getBoundingClientRect();R=Q.bottom-Q.top,!T&&w.text.firstChild&&(N=w.text.firstChild.getBoundingClientRect().right-Q.left-1)}var V=w.line.height-R;if((V>.005||V<-.005)&&(n<r&&(c-=V),nt(w.line,R),xs(w.line),w.rest))for(var te=0;te<w.rest.length;te++)xs(w.rest[te]);if(N>e.display.sizerWidth){var le=Math.ceil(N/Ui(e.display));le>e.display.maxLineLength&&(e.display.maxLineLength=le,e.display.maxLine=w.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function xs(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Nn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Bn(e));var n=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,c=Bt(t,r),g=Bt(t,n);if(i&&i.ensure){var w=i.ensure.from.line,T=i.ensure.to.line;w<c?(c=w,g=Bt(t,wt(Ce(t,w))+e.wrapper.clientHeight)):Math.min(T,t.lastLine())>=g&&(c=Bt(t,wt(Ce(t,T))-e.wrapper.clientHeight),g=T)}return{from:c,to:Math.max(g,c+1)}}function ic(e,t){if(!je(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!h){var c=D("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Bn(e.display))+`px;
                         height: `+(t.bottom-t.top+Tr(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(n),e.display.lineSpace.removeChild(c)}}}function nc(e,t,i,r){r==null&&(r=0);var n;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?ue(t.line,t.ch+1,"before"):t,t=t.ch?ue(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var g=!1,w=dr(e,t),T=!i||i==t?w:dr(e,i);n={left:Math.min(w.left,T.left),top:Math.min(w.top,T.top)-r,right:Math.max(w.left,T.left),bottom:Math.max(w.bottom,T.bottom)+r};var R=wo(e,n),N=e.doc.scrollTop,G=e.doc.scrollLeft;if(R.scrollTop!=null&&(fn(e,R.scrollTop),Math.abs(e.doc.scrollTop-N)>1&&(g=!0)),R.scrollLeft!=null&&(xi(e,R.scrollLeft),Math.abs(e.doc.scrollLeft-G)>1&&(g=!0)),!g)break}return n}function oc(e,t){var i=wo(e,t);i.scrollTop!=null&&fn(e,i.scrollTop),i.scrollLeft!=null&&xi(e,i.scrollLeft)}function wo(e,t){var i=e.display,r=ji(e.display);t.top<0&&(t.top=0);var n=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=co(e),g={};t.bottom-t.top>c&&(t.bottom=t.top+c);var w=e.doc.height+lo(i),T=t.top<r,R=t.bottom>w-r;if(t.top<n)g.scrollTop=T?0:t.top;else if(t.bottom>n+c){var N=Math.min(t.top,(R?w:t.bottom)-c);N!=n&&(g.scrollTop=N)}var G=e.options.fixedGutter?0:i.gutters.offsetWidth,Q=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-G,V=Si(e)-i.gutters.offsetWidth,te=t.right-t.left>V;return te&&(t.right=t.left+V),t.left<10?g.scrollLeft=0:t.left<Q?g.scrollLeft=Math.max(0,t.left+G-(te?0:10)):t.right>V+Q-3&&(g.scrollLeft=t.right+(te?0:10)-V),g}function Lo(e,t){t!=null&&(jn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function zi(e){jn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function un(e,t,i){(t!=null||i!=null)&&jn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function sc(e,t){jn(e),e.curOp.scrollToPos=t}function jn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ys(e,t.from),r=ys(e,t.to);ks(e,i,r,t.margin)}}function ks(e,t,i,r){var n=wo(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});un(e,n.scrollLeft,n.scrollTop)}function fn(e,t){Math.abs(e.doc.scrollTop-t)<2||($||ko(e,{top:t}),Es(e,t,!0),$&&ko(e),pn(e,100))}function Es(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function xi(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Os(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function hn(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+lo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Tr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var ki=function(e,t,i){this.cm=i;var r=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,e(r),e(n),ke(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ke(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,x&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ki.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},ki.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ki.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ki.prototype.zeroWidthHack=function(){var e=o&&!u?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new we,this.disableVert=new we},ki.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var n=e.getBoundingClientRect(),c=i=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},ki.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var dn=function(){};dn.prototype.update=function(){return{bottom:0,right:0}},dn.prototype.setScrollLeft=function(){},dn.prototype.setScrollTop=function(){},dn.prototype.clear=function(){};function Ki(e,t){t||(t=hn(e));var i=e.display.barWidth,r=e.display.barHeight;Ts(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&Wn(e),Ts(e,hn(e)),i=e.display.barWidth,r=e.display.barHeight}function Ts(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var As={native:ki,null:dn};function Ms(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new As[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ke(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?xi(e,t):fn(e,t)},e),e.display.scrollbars.addClass&&F(e.display.wrapper,e.display.scrollbars.addClass)}var ac=0;function Ei(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ac,markArrays:null},Fl(e.curOp)}function Ti(e){var t=e.curOp;t&&Nl(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;lc(i)})}function lc(e){for(var t=e.ops,i=0;i<t.length;i++)cc(t[i]);for(var r=0;r<t.length;r++)uc(t[r]);for(var n=0;n<t.length;n++)fc(t[n]);for(var c=0;c<t.length;c++)hc(t[c]);for(var g=0;g<t.length;g++)dc(t[g])}function cc(e){var t=e.cm,i=t.display;vc(t),e.updateMaxLine&&bi(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Un(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function uc(e){e.updatedDisplay=e.mustUpdate&&xo(e.cm,e.update)}function fc(e){var t=e.cm,i=t.display;e.updatedDisplay&&Wn(t),e.barMeasure=hn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=us(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Tr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Si(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function hc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&xi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==B();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ki(t,e.barMeasure),e.updatedDisplay&&To(t,e.barMeasure),e.selectionChanged&&bo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Ls(e.cm)}function dc(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&Rs(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&Es(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&xi(t,e.scrollLeft,!0,!0),e.scrollToPos){var n=nc(t,ge(r,e.scrollToPos.from),ge(r,e.scrollToPos.to),e.scrollToPos.margin);ic(t,n)}var c=e.maybeHiddenMarkers,g=e.maybeUnhiddenMarkers;if(c)for(var w=0;w<c.length;++w)c[w].lines.length||Ae(c[w],"hide");if(g)for(var T=0;T<g.length;++T)g[T].lines.length&&Ae(g[T],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ae(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Gt(e,t){if(e.curOp)return t();Ei(e);try{return t()}finally{Ti(e)}}function st(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ei(e);try{return t.apply(e,arguments)}finally{Ti(e)}}}function Tt(e){return function(){if(this.curOp)return e.apply(this,arguments);Ei(this);try{return e.apply(this,arguments)}finally{Ti(this)}}}function at(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ei(t);try{return e.apply(this,arguments)}finally{Ti(t)}}}function pn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,se(pc,e))}function pc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=jr(e,t.highlightFrontier),n=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(r.line>=e.display.viewFrom){var g=c.styles,w=c.text.length>e.options.maxHighlightLength?dt(t.mode,r.state):null,T=Ri(e,c,r,!0);w&&(r.state=w),c.styles=T.styles;var R=c.styleClasses,N=T.classes;N?c.styleClasses=N:R&&(c.styleClasses=null);for(var G=!g||g.length!=c.styles.length||R!=N&&(!R||!N||R.bgClass!=N.bgClass||R.textClass!=N.textClass),Q=0;!G&&Q<g.length;++Q)G=g[Q]!=c.styles[Q];G&&n.push(r.line),c.stateAfter=r.save(),r.nextLine()}else c.text.length<=e.options.maxHighlightLength&&vi(e,c.text,r),c.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return pn(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),n.length&&Gt(e,function(){for(var c=0;c<n.length;c++)ni(e,n[c],"text")})}}var Un=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Nn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Si(e),this.force=i,this.dims=_o(e),this.events=[]};Un.prototype.signal=function(e,t){Ke(e,t)&&this.events.push(arguments)},Un.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ae.apply(null,this.events[e])};function vc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Tr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Tr(e)+"px",t.scrollbarsClipped=!0)}function _c(e){if(e.hasFocus())return null;var t=B();if(!t||!W(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&W(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function gc(e){if(!(!e||!e.activeElt||e.activeElt==B())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&W(document.body,e.anchorNode)&&W(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function xo(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return oi(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Cs(e)==0)return!1;Ds(e)&&(oi(e),t.dims=_o(e));var n=r.first+r.size,c=Math.max(t.visible.from-e.options.viewportMargin,r.first),g=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(r.first,i.viewFrom)),i.viewTo>g&&i.viewTo-g<20&&(g=Math.min(n,i.viewTo)),ir&&(c=hr(e.doc,c),g=mi(e.doc,g));var w=c!=i.viewFrom||g!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;tc(e,c,g),i.viewOffset=wt(Ce(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var T=Cs(e);if(!w&&T==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var R=_c(e);return T>4&&(i.lineDiv.style.display="none"),yc(e,i.updateLineNumbers,t.dims),T>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,gc(R),M(i.cursorDiv),M(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,w&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,pn(e,400)),i.updateLineNumbers=null,!0}function Rs(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==Si(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+lo(e.display)-co(e),i.top)}),t.visible=Nn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Nn(e.display,e.doc,i));if(!xo(e,t))break;Wn(e);var n=hn(e);cn(e),Ki(e,n),To(e,n),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ko(e,t){var i=new Un(e,t);if(xo(e,i)){Wn(e),Rs(e,i);var r=hn(e);cn(e),Ki(e,r),To(e,r),i.finish()}}function yc(e,t,i){var r=e.display,n=e.options.lineNumbers,c=r.lineDiv,g=c.firstChild;function w(te){var le=te.nextSibling;return y&&o&&e.display.currentWheelTarget==te?te.style.display="none":te.parentNode.removeChild(te),le}for(var T=r.view,R=r.viewFrom,N=0;N<T.length;N++){var G=T[N];if(!G.hidden)if(!G.node||G.node.parentNode!=c){var Q=Kl(e,G,R,i);c.insertBefore(Q,g)}else{for(;g!=G.node;)g=w(g);var V=n&&t!=null&&t<=R&&G.lineNumber;G.changes&&(he(G.changes,"gutter")>-1&&(V=!1),is(e,G,R,i)),V&&(M(G.lineNumber),G.lineNumber.appendChild(document.createTextNode(Lr(e.options,R)))),g=G.node.nextSibling}R+=G.size}for(;g;)g=w(g)}function Eo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",ot(e,"gutterChanged",e)}function To(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Tr(e)+"px"}function Os(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=go(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,c=r+"px",g=0;g<i.length;g++)if(!i[g].hidden){e.options.fixedGutter&&(i[g].gutter&&(i[g].gutter.style.left=c),i[g].gutterBackground&&(i[g].gutterBackground.style.left=c));var w=i[g].alignable;if(w)for(var T=0;T<w.length;T++)w[T].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function Ds(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=Lr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var n=r.measure.appendChild(D("div",[D("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=n.firstChild.offsetWidth,g=n.offsetWidth-c;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(c,r.lineGutter.offsetWidth-g)+1,r.lineNumWidth=r.lineNumInnerWidth+g,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Eo(e.display),!0}return!1}function Ao(e,t){for(var i=[],r=!1,n=0;n<e.length;n++){var c=e[n],g=null;if(typeof c!="string"&&(g=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:c,style:g})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Bs(e){var t=e.gutters,i=e.gutterSpecs;M(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var n=i[r],c=n.className,g=n.style,w=t.appendChild(D("div",null,"CodeMirror-gutter "+c));g&&(w.style.cssText=g),c=="CodeMirror-linenumbers"&&(e.lineGutter=w,w.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",Eo(e)}function vn(e){Bs(e.display),It(e),Os(e)}function mc(e,t,i,r){var n=this;this.input=i,n.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=D("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=E("div",null,"CodeMirror-code"),n.selectionDiv=D("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=D("div",null,"CodeMirror-cursors"),n.measure=D("div",null,"CodeMirror-measure"),n.lineMeasure=D("div",null,"CodeMirror-measure"),n.lineSpace=E("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var c=E("div",[n.lineSpace],"CodeMirror-lines");n.mover=D("div",[c],null,"position: relative"),n.sizer=D("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=D("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),n.gutters=D("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=D("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=D("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),n.wrapper.setAttribute("translate","no"),x&&v<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!y&&!($&&a)&&(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=Ao(r.gutters,r.lineNumbers),Bs(n),i.init(n)}var qn=0,Yr=null;x?Yr=-.53:$?Yr=15:m?Yr=-.7:C&&(Yr=-1/3);function Ps(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function bc(e){var t=Ps(e);return t.x*=Yr,t.y*=Yr,t}function Hs(e,t){var i=Ps(t),r=i.x,n=i.y,c=Yr;t.deltaMode===0&&(r=t.deltaX,n=t.deltaY,c=1);var g=e.display,w=g.scroller,T=w.scrollWidth>w.clientWidth,R=w.scrollHeight>w.clientHeight;if(!!(r&&T||n&&R)){if(n&&o&&y){e:for(var N=t.target,G=g.view;N!=w;N=N.parentNode)for(var Q=0;Q<G.length;Q++)if(G[Q].node==N){e.display.currentWheelTarget=N;break e}}if(r&&!$&&!b&&c!=null){n&&R&&fn(e,Math.max(0,w.scrollTop+n*c)),xi(e,Math.max(0,w.scrollLeft+r*c)),(!n||n&&R)&&Ye(t),g.wheelStartX=null;return}if(n&&c!=null){var V=n*c,te=e.doc.scrollTop,le=te+g.wrapper.clientHeight;V<0?te=Math.max(0,te+V-50):le=Math.min(e.doc.height,le+V+50),ko(e,{top:te,bottom:le})}qn<20&&t.deltaMode!==0&&(g.wheelStartX==null?(g.wheelStartX=w.scrollLeft,g.wheelStartY=w.scrollTop,g.wheelDX=r,g.wheelDY=n,setTimeout(function(){if(g.wheelStartX!=null){var de=w.scrollLeft-g.wheelStartX,pe=w.scrollTop-g.wheelStartY,ye=pe&&g.wheelDY&&pe/g.wheelDY||de&&g.wheelDX&&de/g.wheelDX;g.wheelStartX=g.wheelStartY=null,!!ye&&(Yr=(Yr*qn+ye)/(qn+1),++qn)}},200)):(g.wheelDX+=r,g.wheelDY+=n))}}var er=function(e,t){this.ranges=e,this.primIndex=t};er.prototype.primary=function(){return this.ranges[this.primIndex]},er.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!K(i.anchor,r.anchor)||!K(i.head,r.head))return!1}return!0},er.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Pe(ne(this.ranges[t].anchor),ne(this.ranges[t].head));return new er(e,this.primIndex)},er.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},er.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(O(t,r.from())>=0&&O(e,r.to())<=0)return i}return-1};var Pe=function(e,t){this.anchor=e,this.head=t};Pe.prototype.from=function(){return Me(this.anchor,this.head)},Pe.prototype.to=function(){return fe(this.anchor,this.head)},Pe.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function pr(e,t,i){var r=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(Q,V){return O(Q.from(),V.from())}),i=he(t,n);for(var c=1;c<t.length;c++){var g=t[c],w=t[c-1],T=O(w.to(),g.from());if(r&&!g.empty()?T>0:T>=0){var R=Me(w.from(),g.from()),N=fe(w.to(),g.to()),G=w.empty()?g.from()==g.head:w.from()==w.head;c<=i&&--i,t.splice(--c,2,new Pe(G?N:R,G?R:N))}}return new er(t,i)}function si(e,t){return new er([new Pe(e,t||e)],0)}function ai(e){return e.text?ue(e.from.line+e.text.length-1,Ee(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Is(e,t){if(O(e,t.from)<0)return e;if(O(e,t.to)<=0)return ai(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ai(t).ch-t.to.ch),ue(i,r)}function Mo(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new Pe(Is(n.anchor,t),Is(n.head,t)))}return pr(e.cm,i,e.sel.primIndex)}function Fs(e,t,i){return e.line==t.line?ue(i.line,e.ch-t.ch+i.ch):ue(i.line+(e.line-t.line),e.ch)}function Sc(e,t,i){for(var r=[],n=ue(e.first,0),c=n,g=0;g<t.length;g++){var w=t[g],T=Fs(w.from,n,c),R=Fs(ai(w),n,c);if(n=w.to,c=R,i=="around"){var N=e.sel.ranges[g],G=O(N.head,N.anchor)<0;r[g]=new Pe(G?R:T,G?T:R)}else r[g]=new Pe(T,T)}return new er(r,e.sel.primIndex)}function Ro(e){e.doc.mode=fr(e.options,e.doc.modeOption),_n(e)}function _n(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,pn(e,100),e.state.modeGen++,e.curOp&&It(e)}function Ws(e,t){return t.from.ch==0&&t.to.ch==0&&Ee(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Oo(e,t,i,r){function n(ye){return i?i[ye]:null}function c(ye,ve,be){Gr(ye,ve,be,r),ot(ye,"change",ye,t)}function g(ye,ve){for(var be=[],Te=ye;Te<ve;++Te)be.push(new Kt(R[Te],n(Te),r));return be}var w=t.from,T=t.to,R=t.text,N=Ce(e,w.line),G=Ce(e,T.line),Q=Ee(R),V=n(R.length-1),te=T.line-w.line;if(t.full)e.insert(0,g(0,R.length)),e.remove(R.length,e.size-R.length);else if(Ws(e,t)){var le=g(0,R.length-1);c(G,G.text,V),te&&e.remove(w.line,te),le.length&&e.insert(w.line,le)}else if(N==G)if(R.length==1)c(N,N.text.slice(0,w.ch)+Q+N.text.slice(T.ch),V);else{var de=g(1,R.length-1);de.push(new Kt(Q+N.text.slice(T.ch),V,r)),c(N,N.text.slice(0,w.ch)+R[0],n(0)),e.insert(w.line+1,de)}else if(R.length==1)c(N,N.text.slice(0,w.ch)+R[0]+G.text.slice(T.ch),n(0)),e.remove(w.line+1,te);else{c(N,N.text.slice(0,w.ch)+R[0],n(0)),c(G,Q+G.text.slice(T.ch),V);var pe=g(1,R.length-1);te>1&&e.remove(w.line+1,te-1),e.insert(w.line+1,pe)}ot(e,"change",e,t)}function li(e,t,i){function r(n,c,g){if(n.linked)for(var w=0;w<n.linked.length;++w){var T=n.linked[w];if(T.doc!=c){var R=g&&T.sharedHist;i&&!R||(t(T.doc,R),r(T.doc,n,R))}}}r(e,null,!0)}function Ns(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,yo(e),Ro(e),js(e),e.options.direction=t.direction,e.options.lineWrapping||bi(e),e.options.mode=t.modeOption,It(e)}function js(e){(e.doc.direction=="rtl"?F:P)(e.display.lineDiv,"CodeMirror-rtl")}function Cc(e){Gt(e,function(){js(e),It(e)})}function zn(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Do(e,t){var i={from:ne(t.from),to:ai(t),text:Dt(e,t.from,t.to)};return zs(e,i,t.from.line,t.to.line+1),li(e,function(r){return zs(r,i,t.from.line,t.to.line+1)},!0),i}function Us(e){for(;e.length;){var t=Ee(e);if(t.ranges)e.pop();else break}}function wc(e,t){if(t)return Us(e.done),Ee(e.done);if(e.done.length&&!Ee(e.done).ranges)return Ee(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ee(e.done)}function qs(e,t,i,r){var n=e.history;n.undone.length=0;var c=+new Date,g,w;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&n.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(g=wc(n,n.lastOp==r)))w=Ee(g.changes),O(t.from,t.to)==0&&O(t.from,w.to)==0?w.to=ai(t):g.changes.push(Do(e,t));else{var T=Ee(n.done);for((!T||!T.ranges)&&Kn(e.sel,n.done),g={changes:[Do(e,t)],generation:n.generation},n.done.push(g);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=c,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,w||Ae(e,"historyAdded")}function Lc(e,t,i,r){var n=t.charAt(0);return n=="*"||n=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function xc(e,t,i,r){var n=e.history,c=r&&r.origin;i==n.lastSelOp||c&&n.lastSelOrigin==c&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==c||Lc(e,c,Ee(n.done),t))?n.done[n.done.length-1]=t:Kn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=c,n.lastSelOp=i,r&&r.clearRedo!==!1&&Us(n.undone)}function Kn(e,t){var i=Ee(t);i&&i.ranges&&i.equals(e)||t.push(e)}function zs(e,t,i,r){var n=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(g){g.markedSpans&&((n||(n=t["spans_"+e.id]={}))[c]=g.markedSpans),++c})}function kc(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Ec(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(kc(i[n]));return r}function Ks(e,t){var i=Ec(e,t),r=Ze(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var c=i[n],g=r[n];if(c&&g){e:for(var w=0;w<g.length;++w){for(var T=g[w],R=0;R<c.length;++R)if(c[R].marker==T.marker)continue e;c.push(T)}}else g&&(i[n]=g)}return i}function Gi(e,t,i){for(var r=[],n=0;n<e.length;++n){var c=e[n];if(c.ranges){r.push(i?er.prototype.deepCopy.call(c):c);continue}var g=c.changes,w=[];r.push({changes:w});for(var T=0;T<g.length;++T){var R=g[T],N=void 0;if(w.push({from:R.from,to:R.to,text:R.text}),t)for(var G in R)(N=G.match(/^spans_(\d+)$/))&&he(t,Number(N[1]))>-1&&(Ee(w)[G]=R[G],delete R[G])}}return r}function Bo(e,t,i,r){if(r){var n=e.anchor;if(i){var c=O(t,n)<0;c!=O(i,n)<0?(n=t,t=i):c!=O(t,i)<0&&(t=i)}return new Pe(n,t)}else return new Pe(i||t,t)}function Gn(e,t,i,r,n){n==null&&(n=e.cm&&(e.cm.display.shift||e.extend)),Lt(e,new er([Bo(e.sel.primary(),t,i,n)],0),r)}function Gs(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)r[c]=Bo(e.sel.ranges[c],t[c],null,n);var g=pr(e.cm,r,e.sel.primIndex);Lt(e,g,i)}function Po(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,Lt(e,pr(e.cm,n,e.sel.primIndex),r)}function Xs(e,t,i,r){Lt(e,si(t,i),r)}function Tc(e,t,i){var r={ranges:t.ranges,update:function(n){this.ranges=[];for(var c=0;c<n.length;c++)this.ranges[c]=new Pe(ge(e,n[c].anchor),ge(e,n[c].head))},origin:i&&i.origin};return Ae(e,"beforeSelectionChange",e,r),e.cm&&Ae(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?pr(e.cm,r.ranges,r.ranges.length-1):t}function Ys(e,t,i){var r=e.history.done,n=Ee(r);n&&n.ranges?(r[r.length-1]=t,Xn(e,t,i)):Lt(e,t,i)}function Lt(e,t,i){Xn(e,t,i),xc(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Xn(e,t,i){(Ke(e,"beforeSelectionChange")||e.cm&&Ke(e.cm,"beforeSelectionChange"))&&(t=Tc(e,t,i));var r=i&&i.bias||(O(t.primary().head,e.sel.primary().head)<0?-1:1);Zs(e,Js(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&zi(e.cm)}function Zs(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,lr(e.cm)),ot(e,"cursorActivity",e))}function $s(e){Zs(e,Js(e,e.sel,null,!1))}function Js(e,t,i,r){for(var n,c=0;c<t.ranges.length;c++){var g=t.ranges[c],w=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],T=Yn(e,g.anchor,w&&w.anchor,i,r),R=Yn(e,g.head,w&&w.head,i,r);(n||T!=g.anchor||R!=g.head)&&(n||(n=t.ranges.slice(0,c)),n[c]=new Pe(T,R))}return n?pr(e.cm,n,t.primIndex):t}function Xi(e,t,i,r,n){var c=Ce(e,t.line);if(c.markedSpans)for(var g=0;g<c.markedSpans.length;++g){var w=c.markedSpans[g],T=w.marker,R="selectLeft"in T?!T.selectLeft:T.inclusiveLeft,N="selectRight"in T?!T.selectRight:T.inclusiveRight;if((w.from==null||(R?w.from<=t.ch:w.from<t.ch))&&(w.to==null||(N?w.to>=t.ch:w.to>t.ch))){if(n&&(Ae(T,"beforeCursorEnter"),T.explicitlyCleared))if(c.markedSpans){--g;continue}else break;if(!T.atomic)continue;if(i){var G=T.find(r<0?1:-1),Q=void 0;if((r<0?N:R)&&(G=Vs(e,G,-r,G&&G.line==t.line?c:null)),G&&G.line==t.line&&(Q=O(G,i))&&(r<0?Q<0:Q>0))return Xi(e,G,t,r,n)}var V=T.find(r<0?-1:1);return(r<0?R:N)&&(V=Vs(e,V,r,V.line==t.line?c:null)),V?Xi(e,V,t,r,n):null}}return t}function Yn(e,t,i,r,n){var c=r||1,g=Xi(e,t,i,c,n)||!n&&Xi(e,t,i,c,!0)||Xi(e,t,i,-c,n)||!n&&Xi(e,t,i,-c,!0);return g||(e.cantEdit=!0,ue(e.first,0))}function Vs(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?ge(e,ue(t.line-1)):null:i>0&&t.ch==(r||Ce(e,t.line)).text.length?t.line<e.first+e.size-1?ue(t.line+1,0):null:new ue(t.line,t.ch+i)}function Qs(e){e.setSelection(ue(e.firstLine(),0),ue(e.lastLine()),z)}function ea(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(n,c,g,w){n&&(r.from=ge(e,n)),c&&(r.to=ge(e,c)),g&&(r.text=g),w!==void 0&&(r.origin=w)}),Ae(e,"beforeChange",e,r),e.cm&&Ae(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Yi(e,t,i){if(e.cm){if(!e.cm.curOp)return st(e.cm,Yi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"))&&(t=ea(e,t,!0),!t))){var r=Rn&&!i&&or(e,t.from,t.to);if(r)for(var n=r.length-1;n>=0;--n)ta(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else ta(e,t)}}function ta(e,t){if(!(t.text.length==1&&t.text[0]==""&&O(t.from,t.to)==0)){var i=Mo(e,t);qs(e,t,i,e.cm?e.cm.curOp.id:NaN),gn(e,t,i,Ze(e,t));var r=[];li(e,function(n,c){!c&&he(r,n.history)==-1&&(oa(n.history,t),r.push(n.history)),gn(n,t,null,Ze(n,t))})}}function Zn(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var n=e.history,c,g=e.sel,w=t=="undo"?n.done:n.undone,T=t=="undo"?n.undone:n.done,R=0;R<w.length&&(c=w[R],!(i?c.ranges&&!c.equals(e.sel):!c.ranges));R++);if(R!=w.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(c=w.pop(),c.ranges){if(Kn(c,T),i&&!c.equals(e.sel)){Lt(e,c,{clearRedo:!1});return}g=c}else if(r){w.push(c);return}else break;var N=[];Kn(g,T),T.push({changes:N,generation:n.generation}),n.generation=c.generation||++n.maxGeneration;for(var G=Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"),Q=function(le){var de=c.changes[le];if(de.origin=t,G&&!ea(e,de,!1))return w.length=0,{};N.push(Do(e,de));var pe=le?Mo(e,de):Ee(w);gn(e,de,pe,Ks(e,de)),!le&&e.cm&&e.cm.scrollIntoView({from:de.from,to:ai(de)});var ye=[];li(e,function(ve,be){!be&&he(ye,ve.history)==-1&&(oa(ve.history,de),ye.push(ve.history)),gn(ve,de,null,Ks(ve,de))})},V=c.changes.length-1;V>=0;--V){var te=Q(V);if(te)return te.v}}}}function ra(e,t){if(t!=0&&(e.first+=t,e.sel=new er(Ie(e.sel.ranges,function(n){return new Pe(ue(n.anchor.line+t,n.anchor.ch),ue(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){It(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)ni(e.cm,r,"gutter")}}function gn(e,t,i,r){if(e.cm&&!e.cm.curOp)return st(e.cm,gn)(e,t,i,r);if(t.to.line<e.first){ra(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);ra(e,n),t={from:ue(e.first,0),to:ue(t.to.line+n,t.to.ch),text:[Ee(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:ue(c,Ce(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Dt(e,t.from,t.to),i||(i=Mo(e,t)),e.cm?Ac(e.cm,t,r):Oo(e,t,r),Xn(e,i,z),e.cantEdit&&Yn(e,ue(e.firstLine(),0))&&(e.cantEdit=!1)}}function Ac(e,t,i){var r=e.doc,n=e.display,c=t.from,g=t.to,w=!1,T=c.line;e.options.lineWrapping||(T=De(Ve(Ce(r,c.line))),r.iter(T,g.line+1,function(V){if(V==n.maxLine)return w=!0,!0})),r.sel.contains(t.from,t.to)>-1&&lr(e),Oo(r,t,i,Ss(e)),e.options.lineWrapping||(r.iter(T,c.line+t.text.length,function(V){var te=ii(V);te>n.maxLineLength&&(n.maxLine=V,n.maxLineLength=te,n.maxLineChanged=!0,w=!1)}),w&&(e.curOp.updateMaxLine=!0)),Mn(r,c.line),pn(e,400);var R=t.text.length-(g.line-c.line)-1;t.full?It(e):c.line==g.line&&t.text.length==1&&!Ws(e.doc,t)?ni(e,c.line,"text"):It(e,c.line,g.line+1,R);var N=Ke(e,"changes"),G=Ke(e,"change");if(G||N){var Q={from:c,to:g,text:t.text,removed:t.removed,origin:t.origin};G&&ot(e,"change",e,Q),N&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(Q)}e.display.selForContextMenu=null}function Zi(e,t,i,r,n){var c;r||(r=i),O(r,i)<0&&(c=[r,i],i=c[0],r=c[1]),typeof t=="string"&&(t=e.splitLines(t)),Yi(e,{from:i,to:r,text:t,origin:n})}function ia(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function na(e,t,i,r){for(var n=0;n<e.length;++n){var c=e[n],g=!0;if(c.ranges){c.copied||(c=e[n]=c.deepCopy(),c.copied=!0);for(var w=0;w<c.ranges.length;w++)ia(c.ranges[w].anchor,t,i,r),ia(c.ranges[w].head,t,i,r);continue}for(var T=0;T<c.changes.length;++T){var R=c.changes[T];if(i<R.from.line)R.from=ue(R.from.line+r,R.from.ch),R.to=ue(R.to.line+r,R.to.ch);else if(t<=R.to.line){g=!1;break}}g||(e.splice(0,n+1),n=0)}}function oa(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;na(e.done,i,r,n),na(e.undone,i,r,n)}function yn(e,t,i,r){var n=t,c=t;return typeof t=="number"?c=Ce(e,Oe(e,t)):n=De(t),n==null?null:(r(c,n)&&e.cm&&ni(e.cm,n,i),c)}function mn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}mn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var n=this.lines[i];this.height-=n.height,so(n),ot(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function bn(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}bn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var c=Math.min(t,n-e),g=r.height;if(r.removeInner(e,c),this.height-=g-r.height,n==c&&(this.children.splice(i--,1),r.parent=null),(t-=c)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof mn))){var w=[];this.collapse(w),this.children=[new mn(w)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<=c){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(var g=n.lines.length%25+25,w=g;w<n.lines.length;){var T=new mn(n.lines.slice(w,w+=25));n.height-=T.height,this.children.splice(++r,0,T),T.parent=this}n.lines=n.lines.slice(0,g),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new bn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=he(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new bn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<c){var g=Math.min(t,c-e);if(n.iterN(e,g,i))return!0;if((t-=g)==0)break;e=0}else e-=c}}};var Sn=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};Sn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=De(i);if(!(r==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var c=an(this);nt(i,Math.max(0,i.height-c)),e&&(Gt(e,function(){sa(e,i,-c),ni(e,r,"widget")}),ot(e,"lineWidgetCleared",e,this,r))}},Sn.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=an(this)-t;!n||(Ct(this.doc,r)||nt(r,r.height+n),i&&Gt(i,function(){i.curOp.forceUpdate=!0,sa(i,r,n),ot(i,"lineWidgetChanged",i,e,De(r))}))},Rt(Sn);function sa(e,t,i){wt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Lo(e,i)}function Mc(e,t,i,r){var n=new Sn(e,i,r),c=e.cm;return c&&n.noHScroll&&(c.display.alignWidgets=!0),yn(e,t,"widget",function(g){var w=g.widgets||(g.widgets=[]);if(n.insertAt==null?w.push(n):w.splice(Math.min(w.length,Math.max(0,n.insertAt)),0,n),n.line=g,c&&!Ct(e,g)){var T=wt(g)<e.scrollTop;nt(g,g.height+an(n)),T&&Lo(c,n.height),c.curOp.forceUpdate=!0}return!0}),c&&ot(c,"lineWidgetAdded",c,n,typeof t=="number"?t:De(t)),n}var aa=0,ci=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++aa};ci.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ei(e),Ke(this,"clear")){var i=this.find();i&&ot(this,"clear",i.from,i.to)}for(var r=null,n=null,c=0;c<this.lines.length;++c){var g=this.lines[c],w=ie(g.markedSpans,this);e&&!this.collapsed?ni(e,De(g),"text"):e&&(w.to!=null&&(n=De(g)),w.from!=null&&(r=De(g))),g.markedSpans=re(g.markedSpans,w),w.from==null&&this.collapsed&&!Ct(this.doc,g)&&e&&nt(g,ji(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var T=0;T<this.lines.length;++T){var R=Ve(this.lines[T]),N=ii(R);N>e.display.maxLineLength&&(e.display.maxLine=R,e.display.maxLineLength=N,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&It(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&$s(e.doc)),e&&ot(e,"markerCleared",e,this,r,n),t&&Ti(e),this.parent&&this.parent.clear()}},ci.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,n=0;n<this.lines.length;++n){var c=this.lines[n],g=ie(c.markedSpans,this);if(g.from!=null&&(i=ue(t?c:De(c),g.from),e==-1))return i;if(g.to!=null&&(r=ue(t?c:De(c),g.to),e==1))return r}return i&&{from:i,to:r}},ci.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||Gt(r,function(){var n=t.line,c=De(t.line),g=uo(r,c);if(g&&(ds(g),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Ct(i.doc,n)&&i.height!=null){var w=i.height;i.height=null;var T=an(i)-w;T&&nt(n,n.height+T)}ot(r,"markerChanged",r,e)})},ci.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||he(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ci.prototype.detachLine=function(e){if(this.lines.splice(he(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Rt(ci);function $i(e,t,i,r,n){if(r&&r.shared)return Rc(e,t,i,r,n);if(e.cm&&!e.cm.curOp)return st(e.cm,$i)(e,t,i,r,n);var c=new ci(e,n),g=O(t,i);if(r&&ae(r,c,!1),g>0||g==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=E("span",[c.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(Ge(e,t.line,t,i,c)||t.line!=i.line&&Ge(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");oo()}c.addToHistory&&qs(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var w=t.line,T=e.cm,R;if(e.iter(w,i.line+1,function(G){T&&c.collapsed&&!T.options.lineWrapping&&Ve(G)==T.display.maxLine&&(R=!0),c.collapsed&&w!=t.line&&nt(G,0),nr(G,new Fi(c,w==t.line?t.ch:null,w==i.line?i.ch:null),e.cm&&e.cm.curOp),++w}),c.collapsed&&e.iter(t.line,i.line+1,function(G){Ct(e,G)&&nt(G,0)}),c.clearOnEnter&&ke(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(On(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++aa,c.atomic=!0),T){if(R&&(T.curOp.updateMaxLine=!0),c.collapsed)It(T,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var N=t.line;N<=i.line;N++)ni(T,N,"text");c.atomic&&$s(T.doc),ot(T,"markerAdded",T,c)}return c}var Cn=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Cn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ot(this,"clear")}},Cn.prototype.find=function(e,t){return this.primary.find(e,t)},Rt(Cn);function Rc(e,t,i,r,n){r=ae(r),r.shared=!1;var c=[$i(e,t,i,r,n)],g=c[0],w=r.widgetNode;return li(e,function(T){w&&(r.widgetNode=w.cloneNode(!0)),c.push($i(T,ge(T,t),ge(T,i),r,n));for(var R=0;R<T.linked.length;++R)if(T.linked[R].isParent)return;g=Ee(c)}),new Cn(c,g)}function la(e){return e.findMarks(ue(e.first,0),e.clipPos(ue(e.lastLine())),function(t){return t.parent})}function Oc(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),c=e.clipPos(n.from),g=e.clipPos(n.to);if(O(c,g)){var w=$i(e,c,g,r.primary,r.primary.type);r.markers.push(w),w.parent=r}}}function Dc(e){for(var t=function(r){var n=e[r],c=[n.primary.doc];li(n.primary.doc,function(T){return c.push(T)});for(var g=0;g<n.markers.length;g++){var w=n.markers[g];he(c,w.doc)==-1&&(w.parent=null,n.markers.splice(g--,1))}},i=0;i<e.length;i++)t(i)}var Bc=0,Ft=function(e,t,i,r,n){if(!(this instanceof Ft))return new Ft(e,t,i,r,n);i==null&&(i=0),bn.call(this,[new mn([new Kt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=ue(i,0);this.sel=si(c),this.history=new zn(null),this.id=++Bc,this.modeOption=t,this.lineSep=r,this.direction=n=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Oo(this,{from:c,to:c,text:e}),Lt(this,si(c),z)};Ft.prototype=_t(bn.prototype,{constructor:Ft,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=wr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:at(function(e){var t=ue(this.first,0),i=this.first+this.size-1;Yi(this,{from:t,to:ue(i,Ce(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&un(this.cm,0,0),Lt(this,si(t),z)}),replaceRange:function(e,t,i,r){t=ge(this,t),i=i?ge(this,i):t,Zi(this,e,t,i,r)},getRange:function(e,t,i){var r=Dt(this,ge(this,e),ge(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(rr(this,e))return Ce(this,e)},getLineNumber:function(e){return De(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Ce(this,e)),Ve(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:at(function(e,t,i){Xs(this,ge(this,typeof e=="number"?ue(e,t||0):e),null,i)}),setSelection:at(function(e,t,i){Xs(this,ge(this,e),ge(this,t||e),i)}),extendSelection:at(function(e,t,i){Gn(this,ge(this,e),t&&ge(this,t),i)}),extendSelections:at(function(e,t){Gs(this,mt(this,e),t)}),extendSelectionsBy:at(function(e,t){var i=Ie(this.sel.ranges,e);Gs(this,mt(this,i),t)}),setSelections:at(function(e,t,i){if(!!e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new Pe(ge(this,e[n].anchor),ge(this,e[n].head||e[n].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Lt(this,pr(this.cm,r,t),i)}}),addSelection:at(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Pe(ge(this,e),ge(this,t||e))),Lt(this,pr(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var n=Dt(this,t[r].from(),t[r].to());i=i?i.concat(n):n}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=Dt(this,i[r].from(),i[r].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:at(function(e,t,i){for(var r=[],n=this.sel,c=0;c<n.ranges.length;c++){var g=n.ranges[c];r[c]={from:g.from(),to:g.to(),text:this.splitLines(e[c]),origin:i}}for(var w=t&&t!="end"&&Sc(this,r,t),T=r.length-1;T>=0;T--)Yi(this,r[T]);w?Ys(this,w):this.cm&&zi(this.cm)}),undo:at(function(){Zn(this,"undo")}),redo:at(function(){Zn(this,"redo")}),undoSelection:at(function(){Zn(this,"undo",!0)}),redoSelection:at(function(){Zn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new zn(this.history),li(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(e){var t=this.history=new zn(this.history);t.done=Gi(e.done.slice(0),null,!0),t.undone=Gi(e.undone.slice(0),null,!0)},setGutterMarker:at(function(e,t,i){return yn(this,e,"gutter",function(r){var n=r.gutterMarkers||(r.gutterMarkers={});return n[t]=i,!i&&ei(n)&&(r.gutterMarkers=null),!0})}),clearGutter:at(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&yn(t,i,"gutter",function(){return i.gutterMarkers[e]=null,ei(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!rr(this,e)||(t=e,e=Ce(this,e),!e))return null}else if(t=De(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:at(function(e,t,i){return yn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[n])r[n]=i;else{if(I(i).test(r[n]))return!1;r[n]+=" "+i}return!0})}),removeLineClass:at(function(e,t,i){return yn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=r[n];if(c)if(i==null)r[n]=null;else{var g=c.match(I(i));if(!g)return!1;var w=g.index+g[0].length;r[n]=c.slice(0,g.index)+(!g.index||w==c.length?"":" ")+c.slice(w)||null}else return!1;return!0})}),addLineWidget:at(function(e,t,i){return Mc(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return $i(this,ge(this,e),ge(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),$i(this,e,e,i,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],i=Ce(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=ge(this,e),t=ge(this,t);var r=[],n=e.line;return this.iter(e.line,t.line+1,function(c){var g=c.markedSpans;if(g)for(var w=0;w<g.length;w++){var T=g[w];!(T.to!=null&&n==e.line&&e.ch>=T.to||T.from==null&&n!=e.line||T.from!=null&&n==t.line&&T.from>=t.ch)&&(!i||i(T.marker))&&r.push(T.marker.parent||T.marker)}++n}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(n){var c=n.text.length+r;if(c>e)return t=e,!0;e-=c,++i}),ge(this,ue(i,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new Ft(wr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new Ft(wr(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Oc(r,la(this)),r},unlinkDoc:function(e){if(e instanceof Ue&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Dc(la(this));break}}if(e.history==this.history){var r=[e.id];li(e,function(n){return r.push(n.id)},!0),e.history=new zn(null),e.history.done=Gi(this.history.done,r),e.history.undone=Gi(this.history.undone,r)}},iterLinkedDocs:function(e){li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):mr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:at(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Cc(this.cm))})}),Ft.prototype.eachLine=Ft.prototype.iter;var ca=0;function Pc(e){var t=this;if(ua(t),!(je(t,e)||Xr(t.display,e))){Ye(e),x&&(ca=+new Date);var i=wi(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var n=r.length,c=Array(n),g=0,w=function(){++g==n&&st(t,function(){i=ge(t.doc,i);var V={from:i,to:i,text:t.doc.splitLines(c.filter(function(te){return te!=null}).join(t.doc.lineSeparator())),origin:"paste"};Yi(t.doc,V),Ys(t.doc,si(ge(t.doc,i),ge(t.doc,ai(V))))})()},T=function(V,te){if(t.options.allowDropFileTypes&&he(t.options.allowDropFileTypes,V.type)==-1){w();return}var le=new FileReader;le.onerror=function(){return w()},le.onload=function(){var de=le.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(de)){w();return}c[te]=de,w()},le.readAsText(V)},R=0;R<r.length;R++)T(r[R],R);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var N=e.dataTransfer.getData("Text");if(N){var G;if(t.state.draggingText&&!t.state.draggingText.copy&&(G=t.listSelections()),Xn(t.doc,si(i,i)),G)for(var Q=0;Q<G.length;++Q)Zi(t.doc,"",G[Q].anchor,G[Q].head,"drag");t.replaceSelection(N,"around","paste"),t.display.input.focus()}}catch{}}}}function Hc(e,t){if(x&&(!e.state.draggingText||+new Date-ca<100)){tr(t);return}if(!(je(e,t)||Xr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!C)){var i=D("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",b&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),b&&i.parentNode.removeChild(i)}}function Ic(e,t){var i=wi(e,t);if(!!i){var r=document.createDocumentFragment();mo(e,i,r),e.display.dragCursor||(e.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),k(e.display.dragCursor,r)}}function ua(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function fa(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&i.push(n)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var ha=!1;function Fc(){ha||(Wc(),ha=!0)}function Wc(){var e;ke(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,fa(Nc)},100))}),ke(window,"blur",function(){return fa(qi)})}function Nc(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var ui={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},wn=0;wn<10;wn++)ui[wn+48]=ui[wn+96]=String(wn);for(var $n=65;$n<=90;$n++)ui[$n]=String.fromCharCode($n);for(var Ln=1;Ln<=12;Ln++)ui[Ln+111]=ui[Ln+63235]="F"+Ln;var Zr={};Zr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Zr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Zr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Zr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Zr.default=o?Zr.macDefault:Zr.pcDefault;function jc(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,n,c,g=0;g<t.length-1;g++){var w=t[g];if(/^(cmd|meta|m)$/i.test(w))c=!0;else if(/^a(lt)?$/i.test(w))i=!0;else if(/^(c|ctrl|control)$/i.test(w))r=!0;else if(/^s(hift)?$/i.test(w))n=!0;else throw new Error("Unrecognized modifier name: "+w)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Uc(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var n=Ie(i.split(" "),jc),c=0;c<n.length;c++){var g=void 0,w=void 0;c==n.length-1?(w=n.join(" "),g=r):(w=n.slice(0,c+1).join(" "),g="...");var T=t[w];if(!T)t[w]=g;else if(T!=g)throw new Error("Inconsistent bindings for "+w)}delete e[i]}for(var R in t)e[R]=t[R];return e}function Ji(e,t,i,r){t=Jn(t);var n=t.call?t.call(e,r):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&i(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Ji(e,t.fallthrough,i,r);for(var c=0;c<t.fallthrough.length;c++){var g=Ji(e,t.fallthrough[c],i,r);if(g)return g}}}function da(e){var t=typeof e=="string"?e:ui[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function pa(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(L?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(L?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function va(e,t){if(b&&e.keyCode==34&&e.char)return!1;var i=ui[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),pa(i,e,t))}function Jn(e){return typeof e=="string"?Zr[e]:e}function Vi(e,t){for(var i=e.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var c=t(i[n]);r.length&&O(c.from,Ee(r).to)<=0;){var g=r.pop();if(O(g.from,c.from)<0){c.from=g.from;break}}r.push(c)}Gt(e,function(){for(var w=r.length-1;w>=0;w--)Zi(e.doc,"",r[w].from,r[w].to,"+delete");zi(e)})}function Ho(e,t,i){var r=ti(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Io(e,t,i){var r=Ho(e,t.ch,i);return r==null?null:new ue(t.line,r,i<0?"after":"before")}function Fo(e,t,i,r,n){if(e){t.doc.direction=="rtl"&&(n=-n);var c=ut(i,t.doc.direction);if(c){var g=n<0?Ee(c):c[0],w=n<0==(g.level==1),T=w?"after":"before",R;if(g.level>0||t.doc.direction=="rtl"){var N=Ni(t,i);R=n<0?i.text.length-1:0;var G=Ar(t,N,R).top;R=Ut(function(Q){return Ar(t,N,Q).top==G},n<0==(g.level==1)?g.from:g.to-1,R),T=="before"&&(R=Ho(i,R,1))}else R=n<0?g.to:g.from;return new ue(r,R,T)}}return new ue(r,n<0?i.text.length:0,n<0?"before":"after")}function qc(e,t,i,r){var n=ut(t,e.doc.direction);if(!n)return Io(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Ne(n,i.ch,i.sticky),g=n[c];if(e.doc.direction=="ltr"&&g.level%2==0&&(r>0?g.to>i.ch:g.from<i.ch))return Io(t,i,r);var w=function(pe,ye){return Ho(t,pe instanceof ue?pe.ch:pe,ye)},T,R=function(pe){return e.options.lineWrapping?(T=T||Ni(e,t),bs(e,t,T,pe)):{begin:0,end:t.text.length}},N=R(i.sticky=="before"?w(i,-1):i.ch);if(e.doc.direction=="rtl"||g.level==1){var G=g.level==1==r<0,Q=w(i,G?1:-1);if(Q!=null&&(G?Q<=g.to&&Q<=N.end:Q>=g.from&&Q>=N.begin)){var V=G?"before":"after";return new ue(i.line,Q,V)}}var te=function(pe,ye,ve){for(var be=function(We,lt){return lt?new ue(i.line,w(We,1),"before"):new ue(i.line,We,"after")};pe>=0&&pe<n.length;pe+=ye){var Te=n[pe],xe=ye>0==(Te.level!=1),Re=xe?ve.begin:w(ve.end,-1);if(Te.from<=Re&&Re<Te.to||(Re=xe?Te.from:w(Te.to,-1),ve.begin<=Re&&Re<ve.end))return be(Re,xe)}},le=te(c+r,r,N);if(le)return le;var de=r>0?N.end:w(N.begin,-1);return de!=null&&!(r>0&&de==t.text.length)&&(le=te(r>0?0:n.length-1,r,R(de)),le)?le:null}var xn={selectAll:Qs,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),z)},killLine:function(e){return Vi(e,function(t){if(t.empty()){var i=Ce(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:ue(t.head.line+1,0)}:{from:t.head,to:ue(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Vi(e,function(t){return{from:ue(t.from().line,0),to:ge(e.doc,ue(t.to().line+1,0))}})},delLineLeft:function(e){return Vi(e,function(t){return{from:ue(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Vi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Vi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ue(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ue(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return _a(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ga(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return zc(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Y)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Y)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?ga(e,t.head):r},Y)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var c=i[n].from(),g=me(e.getLine(c.line),c.ch,r);t.push(Be(r-g%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Gt(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var n=t[r].head,c=Ce(e.doc,n.line).text;if(c){if(n.ch==c.length&&(n=new ue(n.line,n.ch-1)),n.ch>0)n=new ue(n.line,n.ch+1),e.replaceRange(c.charAt(n.ch-1)+c.charAt(n.ch-2),ue(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var g=Ce(e.doc,n.line-1).text;g&&(n=new ue(n.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+g.charAt(g.length-1),ue(n.line-1,g.length-1),n,"+transpose"))}}i.push(new Pe(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return Gt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);zi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function _a(e,t){var i=Ce(e.doc,t),r=Ve(i);return r!=i&&(t=De(r)),Fo(!0,e,r,t,1)}function zc(e,t){var i=Ce(e.doc,t),r=Qt(i);return r!=i&&(t=De(r)),Fo(!0,e,i,t,-1)}function ga(e,t){var i=_a(e,t.line),r=Ce(e.doc,i.line),n=ut(r,e.doc.direction);if(!n||n[0].level==0){var c=Math.max(i.ch,r.text.search(/\S/)),g=t.line==i.line&&t.ch<=c&&t.ch;return ue(i.line,g?0:c,i.sticky)}return i}function Vn(e,t,i){if(typeof t=="string"&&(t=xn[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=q}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}function Kc(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=Ji(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&Ji(t,e.options.extraKeys,i,e)||Ji(t,e.options.keyMap,i,e)}var Gc=new we;function kn(e,t,i,r){var n=e.state.keySeq;if(n){if(da(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Gc.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),ya(e,n+" "+t,i,r))return!0}return ya(e,t,i,r)}function ya(e,t,i,r){var n=Kc(e,t,r);return n=="multi"&&(e.state.keySeq=t),n=="handled"&&ot(e,"keyHandled",e,t,i),(n=="handled"||n=="multi")&&(Ye(i),bo(e)),!!n}function ma(e,t){var i=va(t,!0);return i?t.shiftKey&&!e.state.keySeq?kn(e,"Shift-"+i,t,function(r){return Vn(e,r,!0)})||kn(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return Vn(e,r)}):kn(e,i,t,function(r){return Vn(e,r)}):!1}function Xc(e,t,i){return kn(e,"'"+i+"'",t,function(r){return Vn(e,r,!0)})}var Wo=null;function ba(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=B(),!je(t,e))){x&&v<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=ma(t,e);b&&(Wo=r?i:null,!r&&i==88&&!Wr&&(o?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),$&&!o&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Yc(t)}}function Yc(e){var t=e.display.lineDiv;F(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(P(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i))}ke(document,"keyup",i),ke(document,"mouseover",i)}function Sa(e){e.keyCode==16&&(this.doc.sel.shift=!1),je(this,e)}function Ca(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Xr(t.display,e)||je(t,e)||e.ctrlKey&&!e.altKey||o&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(b&&i==Wo){Wo=null,Ye(e);return}if(!(b&&(!e.which||e.which<10)&&ma(t,e))){var n=String.fromCharCode(r??i);n!="\b"&&(Xc(t,e,n)||t.display.input.onKeyPress(e))}}}var Zc=400,No=function(e,t,i){this.time=e,this.pos=t,this.button=i};No.prototype.compare=function(e,t,i){return this.time+Zc>e&&O(t,this.pos)==0&&i==this.button};var En,Tn;function $c(e,t){var i=+new Date;return Tn&&Tn.compare(i,e,t)?(En=Tn=null,"triple"):En&&En.compare(i,e,t)?(Tn=new No(i,e,t),En=null,"double"):(En=new No(i,e,t),Tn=null,"single")}function wa(e){var t=this,i=t.display;if(!(je(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Xr(i,e)){y||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!jo(t,e)){var r=wi(t,e),n=Hr(e),c=r?$c(r,n):"single";window.focus(),n==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&Jc(t,n,r,c,e))&&(n==1?r?Qc(t,r,c,e):$t(e)==i.scroller&&Ye(e):n==2?(r&&Gn(t.doc,r),setTimeout(function(){return i.input.focus()},20)):n==3&&(A?t.display.input.onContextMenu(e):So(t)))}}}function Jc(e,t,i,r,n){var c="Click";return r=="double"?c="Double"+c:r=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,kn(e,pa(c,n),n,function(g){if(typeof g=="string"&&(g=xn[g]),!g)return!1;var w=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),w=g(e,i)!=q}finally{e.state.suppressEdits=!1}return w})}function Vc(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(n.unit==null){var c=s?i.shiftKey&&i.metaKey:i.altKey;n.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(n.extend==null||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),n.addNew==null&&(n.addNew=o?i.metaKey:i.ctrlKey),n.moveOnDrag==null&&(n.moveOnDrag=!(o?i.altKey:i.ctrlKey)),n}function Qc(e,t,i,r){x?setTimeout(se(Ls,e),0):e.curOp.focus=B();var n=Vc(e,i,r),c=e.doc.sel,g;e.options.dragDrop&&gr&&!e.isReadOnly()&&i=="single"&&(g=c.contains(t))>-1&&(O((g=c.ranges[g]).from(),t)<0||t.xRel>0)&&(O(g.to(),t)>0||t.xRel<0)?eu(e,r,t,n):tu(e,r,t,n)}function eu(e,t,i,r){var n=e.display,c=!1,g=st(e,function(R){y&&(n.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:So(e)),tt(n.wrapper.ownerDocument,"mouseup",g),tt(n.wrapper.ownerDocument,"mousemove",w),tt(n.scroller,"dragstart",T),tt(n.scroller,"drop",g),c||(Ye(R),r.addNew||Gn(e.doc,i,null,null,r.extend),y&&!C||x&&v==9?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),w=function(R){c=c||Math.abs(t.clientX-R.clientX)+Math.abs(t.clientY-R.clientY)>=10},T=function(){return c=!0};y&&(n.scroller.draggable=!0),e.state.draggingText=g,g.copy=!r.moveOnDrag,ke(n.wrapper.ownerDocument,"mouseup",g),ke(n.wrapper.ownerDocument,"mousemove",w),ke(n.scroller,"dragstart",T),ke(n.scroller,"drop",g),e.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}function La(e,t,i){if(i=="char")return new Pe(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Pe(ue(t.line,0),ge(e.doc,ue(t.line+1,0)));var r=i(e,t);return new Pe(r.from,r.to)}function tu(e,t,i,r){x&&So(e);var n=e.display,c=e.doc;Ye(t);var g,w,T=c.sel,R=T.ranges;if(r.addNew&&!r.extend?(w=c.sel.contains(i),w>-1?g=R[w]:g=new Pe(i,i)):(g=c.sel.primary(),w=c.sel.primIndex),r.unit=="rectangle")r.addNew||(g=new Pe(i,i)),i=wi(e,t,!0,!0),w=-1;else{var N=La(e,i,r.unit);r.extend?g=Bo(g,N.anchor,N.head,r.extend):g=N}r.addNew?w==-1?(w=R.length,Lt(c,pr(e,R.concat([g]),w),{scroll:!1,origin:"*mouse"})):R.length>1&&R[w].empty()&&r.unit=="char"&&!r.extend?(Lt(c,pr(e,R.slice(0,w).concat(R.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),T=c.sel):Po(c,w,g,ce):(w=0,Lt(c,new er([g],0),ce),T=c.sel);var G=i;function Q(ve){if(O(G,ve)!=0)if(G=ve,r.unit=="rectangle"){for(var be=[],Te=e.options.tabSize,xe=me(Ce(c,i.line).text,i.ch,Te),Re=me(Ce(c,ve.line).text,ve.ch,Te),We=Math.min(xe,Re),lt=Math.max(xe,Re),ze=Math.min(i.line,ve.line),Xt=Math.min(e.lastLine(),Math.max(i.line,ve.line));ze<=Xt;ze++){var Wt=Ce(c,ze).text,Qe=_e(Wt,We,Te);We==lt?be.push(new Pe(ue(ze,Qe),ue(ze,Qe))):Wt.length>Qe&&be.push(new Pe(ue(ze,Qe),ue(ze,_e(Wt,lt,Te))))}be.length||be.push(new Pe(i,i)),Lt(c,pr(e,T.ranges.slice(0,w).concat(be),w),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ve)}else{var Nt=g,pt=La(e,ve,r.unit),it=Nt.anchor,et;O(pt.anchor,it)>0?(et=pt.head,it=Me(Nt.from(),pt.anchor)):(et=pt.anchor,it=fe(Nt.to(),pt.head));var Xe=T.ranges.slice(0);Xe[w]=ru(e,new Pe(ge(c,it),et)),Lt(c,pr(e,Xe,w),ce)}}var V=n.wrapper.getBoundingClientRect(),te=0;function le(ve){var be=++te,Te=wi(e,ve,!0,r.unit=="rectangle");if(!!Te)if(O(Te,G)!=0){e.curOp.focus=B(),Q(Te);var xe=Nn(n,c);(Te.line>=xe.to||Te.line<xe.from)&&setTimeout(st(e,function(){te==be&&le(ve)}),150)}else{var Re=ve.clientY<V.top?-20:ve.clientY>V.bottom?20:0;Re&&setTimeout(st(e,function(){te==be&&(n.scroller.scrollTop+=Re,le(ve))}),50)}}function de(ve){e.state.selectingText=!1,te=1/0,ve&&(Ye(ve),n.input.focus()),tt(n.wrapper.ownerDocument,"mousemove",pe),tt(n.wrapper.ownerDocument,"mouseup",ye),c.history.lastSelOrigin=null}var pe=st(e,function(ve){ve.buttons===0||!Hr(ve)?de(ve):le(ve)}),ye=st(e,de);e.state.selectingText=ye,ke(n.wrapper.ownerDocument,"mousemove",pe),ke(n.wrapper.ownerDocument,"mouseup",ye)}function ru(e,t){var i=t.anchor,r=t.head,n=Ce(e.doc,i.line);if(O(i,r)==0&&i.sticky==r.sticky)return t;var c=ut(n);if(!c)return t;var g=Ne(c,i.ch,i.sticky),w=c[g];if(w.from!=i.ch&&w.to!=i.ch)return t;var T=g+(w.from==i.ch==(w.level!=1)?0:1);if(T==0||T==c.length)return t;var R;if(r.line!=i.line)R=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var N=Ne(c,r.ch,r.sticky),G=N-g||(r.ch-i.ch)*(w.level==1?-1:1);N==T-1||N==T?R=G<0:R=G>0}var Q=c[T+(R?-1:0)],V=R==(Q.level==1),te=V?Q.from:Q.to,le=V?"after":"before";return i.ch==te&&i.sticky==le?t:new Pe(new ue(i.line,te,le),r)}function xa(e,t,i,r){var n,c;if(t.touches)n=t.touches[0].clientX,c=t.touches[0].clientY;else try{n=t.clientX,c=t.clientY}catch{return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ye(t);var g=e.display,w=g.lineDiv.getBoundingClientRect();if(c>w.bottom||!Ke(e,i))return ft(t);c-=w.top-g.viewOffset;for(var T=0;T<e.display.gutterSpecs.length;++T){var R=g.gutters.childNodes[T];if(R&&R.getBoundingClientRect().right>=n){var N=Bt(e.doc,c),G=e.display.gutterSpecs[T];return Ae(e,i,e,N,G.className,t),ft(t)}}}function jo(e,t){return xa(e,t,"gutterClick",!0)}function ka(e,t){Xr(e.display,t)||iu(e,t)||je(e,t,"contextmenu")||A||e.display.input.onContextMenu(t)}function iu(e,t){return Ke(e,"gutterContextMenu")?xa(e,t,"gutterContextMenu",!1):!1}function Ea(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ln(e)}var Qi={toString:function(){return"CodeMirror.Init"}},Ta={},Qn={};function nu(e){var t=e.optionHandlers;function i(r,n,c,g){e.defaults[r]=n,c&&(t[r]=g?function(w,T,R){R!=Qi&&c(w,T,R)}:c)}e.defineOption=i,e.Init=Qi,i("value","",function(r,n){return r.setValue(n)},!0),i("mode",null,function(r,n){r.doc.modeOption=n,Ro(r)},!0),i("indentUnit",2,Ro,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){_n(r),ln(r),It(r)},!0),i("lineSeparator",null,function(r,n){if(r.doc.lineSep=n,!!n){var c=[],g=r.doc.first;r.doc.iter(function(T){for(var R=0;;){var N=T.text.indexOf(n,R);if(N==-1)break;R=N+n.length,c.push(ue(g,N))}g++});for(var w=c.length-1;w>=0;w--)Zi(r.doc,n,c[w],ue(c[w].line,c[w].ch+n.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,n,c){r.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),c!=Qi&&r.refresh()}),i("specialCharPlaceholder",Dl,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",a?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,n){return r.getInputField().spellcheck=n},!0),i("autocorrect",!1,function(r,n){return r.getInputField().autocorrect=n},!0),i("autocapitalize",!1,function(r,n){return r.getInputField().autocapitalize=n},!0),i("rtlMoveVisually",!f),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){Ea(r),vn(r)},!0),i("keyMap","default",function(r,n,c){var g=Jn(n),w=c!=Qi&&Jn(c);w&&w.detach&&w.detach(r,g),g.attach&&g.attach(r,w||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,su,!0),i("gutters",[],function(r,n){r.display.gutterSpecs=Ao(n,r.options.lineNumbers),vn(r)},!0),i("fixedGutter",!0,function(r,n){r.display.gutters.style.left=n?go(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Ki(r)},!0),i("scrollbarStyle","native",function(r){Ms(r),Ki(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,n){r.display.gutterSpecs=Ao(r.options.gutters,n),vn(r)},!0),i("firstLineNumber",1,vn,!0),i("lineNumberFormatter",function(r){return r},vn,!0),i("showCursorWhenSelecting",!1,cn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,n){n=="nocursor"&&(qi(r),r.display.input.blur()),r.display.input.readOnlyChanged(n)}),i("screenReaderLabel",null,function(r,n){n=n===""?null:n,r.display.input.screenReaderLabelChanged(n)}),i("disableInput",!1,function(r,n){n||r.display.input.reset()},!0),i("dragDrop",!0,ou),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,cn,!0),i("singleCursorHeightPerLine",!0,cn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,_n,!0),i("addModeClass",!1,_n,!0),i("pollInterval",100),i("undoDepth",200,function(r,n){return r.doc.history.undoDepth=n}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,_n,!0),i("moveInputWithCursor",!0,function(r,n){n||r.display.input.resetPosition()}),i("tabindex",null,function(r,n){return r.display.input.getField().tabIndex=n||""}),i("autofocus",null),i("direction","ltr",function(r,n){return r.doc.setDirection(n)},!0),i("phrases",null)}function ou(e,t,i){var r=i&&i!=Qi;if(!t!=!r){var n=e.display.dragFunctions,c=t?ke:tt;c(e.display.scroller,"dragstart",n.start),c(e.display.scroller,"dragenter",n.enter),c(e.display.scroller,"dragover",n.over),c(e.display.scroller,"dragleave",n.leave),c(e.display.scroller,"drop",n.drop)}}function su(e){e.options.lineWrapping?(F(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(P(e.display.wrapper,"CodeMirror-wrap"),bi(e)),yo(e),It(e),ln(e),setTimeout(function(){return Ki(e)},100)}function Ue(e,t){var i=this;if(!(this instanceof Ue))return new Ue(e,t);this.options=t=t?ae(t):{},ae(Ta,t,!1);var r=t.value;typeof r=="string"?r=new Ft(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var n=new Ue.inputStyles[t.inputStyle](this),c=this.display=new mc(e,r,n,t);c.wrapper.CodeMirror=this,Ea(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ms(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new we,keySeq:null,specialChars:null},t.autofocus&&!a&&c.input.focus(),x&&v<11&&setTimeout(function(){return i.display.input.reset(!0)},20),au(this),Fc(),Ei(this),this.curOp.forceUpdate=!0,Ns(this,r),t.autofocus&&!a||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&Co(i)},20):qi(this);for(var g in Qn)Qn.hasOwnProperty(g)&&Qn[g](this,t[g],Qi);Ds(this),t.finishInit&&t.finishInit(this);for(var w=0;w<Uo.length;++w)Uo[w](this);Ti(this),y&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}Ue.defaults=Ta,Ue.optionHandlers=Qn;function au(e){var t=e.display;ke(t.scroller,"mousedown",st(e,wa)),x&&v<11?ke(t.scroller,"dblclick",st(e,function(T){if(!je(e,T)){var R=wi(e,T);if(!(!R||jo(e,T)||Xr(e.display,T))){Ye(T);var N=e.findWordAt(R);Gn(e.doc,N.anchor,N.head)}}})):ke(t.scroller,"dblclick",function(T){return je(e,T)||Ye(T)}),ke(t.scroller,"contextmenu",function(T){return ka(e,T)}),ke(t.input.getField(),"contextmenu",function(T){t.scroller.contains(T.target)||ka(e,T)});var i,r={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function c(T){if(T.touches.length!=1)return!1;var R=T.touches[0];return R.radiusX<=1&&R.radiusY<=1}function g(T,R){if(R.left==null)return!0;var N=R.left-T.left,G=R.top-T.top;return N*N+G*G>20*20}ke(t.scroller,"touchstart",function(T){if(!je(e,T)&&!c(T)&&!jo(e,T)){t.input.ensurePolled(),clearTimeout(i);var R=+new Date;t.activeTouch={start:R,moved:!1,prev:R-r.end<=300?r:null},T.touches.length==1&&(t.activeTouch.left=T.touches[0].pageX,t.activeTouch.top=T.touches[0].pageY)}}),ke(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ke(t.scroller,"touchend",function(T){var R=t.activeTouch;if(R&&!Xr(t,T)&&R.left!=null&&!R.moved&&new Date-R.start<300){var N=e.coordsChar(t.activeTouch,"page"),G;!R.prev||g(R,R.prev)?G=new Pe(N,N):!R.prev.prev||g(R,R.prev.prev)?G=e.findWordAt(N):G=new Pe(ue(N.line,0),ge(e.doc,ue(N.line+1,0))),e.setSelection(G.anchor,G.head),e.focus(),Ye(T)}n()}),ke(t.scroller,"touchcancel",n),ke(t.scroller,"scroll",function(){t.scroller.clientHeight&&(fn(e,t.scroller.scrollTop),xi(e,t.scroller.scrollLeft,!0),Ae(e,"scroll",e))}),ke(t.scroller,"mousewheel",function(T){return Hs(e,T)}),ke(t.scroller,"DOMMouseScroll",function(T){return Hs(e,T)}),ke(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(T){je(e,T)||tr(T)},over:function(T){je(e,T)||(Ic(e,T),tr(T))},start:function(T){return Hc(e,T)},drop:st(e,Pc),leave:function(T){je(e,T)||ua(e)}};var w=t.input.getField();ke(w,"keyup",function(T){return Sa.call(e,T)}),ke(w,"keydown",st(e,ba)),ke(w,"keypress",st(e,Ca)),ke(w,"focus",function(T){return Co(e,T)}),ke(w,"blur",function(T){return qi(e,T)})}var Uo=[];Ue.defineInitHook=function(e){return Uo.push(e)};function An(e,t,i,r){var n=e.doc,c;i==null&&(i="add"),i=="smart"&&(n.mode.indent?c=jr(e,t).state:i="prev");var g=e.options.tabSize,w=Ce(n,t),T=me(w.text,null,g);w.stateAfter&&(w.stateAfter=null);var R=w.text.match(/^\s*/)[0],N;if(!r&&!/\S/.test(w.text))N=0,i="not";else if(i=="smart"&&(N=n.mode.indent(c,w.text.slice(R.length),w.text),N==q||N>150)){if(!r)return;i="prev"}i=="prev"?t>n.first?N=me(Ce(n,t-1).text,null,g):N=0:i=="add"?N=T+e.options.indentUnit:i=="subtract"?N=T-e.options.indentUnit:typeof i=="number"&&(N=T+i),N=Math.max(0,N);var G="",Q=0;if(e.options.indentWithTabs)for(var V=Math.floor(N/g);V;--V)Q+=g,G+="	";if(Q<N&&(G+=Be(N-Q)),G!=R)return Zi(n,G,ue(t,0),ue(t,R.length),"+input"),w.stateAfter=null,!0;for(var te=0;te<n.sel.ranges.length;te++){var le=n.sel.ranges[te];if(le.head.line==t&&le.head.ch<R.length){var de=ue(t,R.length);Po(n,te,new Pe(de,de));break}}}var vr=null;function eo(e){vr=e}function qo(e,t,i,r,n){var c=e.doc;e.display.shift=!1,r||(r=c.sel);var g=+new Date-200,w=n=="paste"||e.state.pasteIncoming>g,T=mr(t),R=null;if(w&&r.ranges.length>1)if(vr&&vr.text.join(`
`)==t){if(r.ranges.length%vr.text.length==0){R=[];for(var N=0;N<vr.text.length;N++)R.push(c.splitLines(vr.text[N]))}}else T.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(R=Ie(T,function(pe){return[pe]}));for(var G=e.curOp.updateInput,Q=r.ranges.length-1;Q>=0;Q--){var V=r.ranges[Q],te=V.from(),le=V.to();V.empty()&&(i&&i>0?te=ue(te.line,te.ch-i):e.state.overwrite&&!w?le=ue(le.line,Math.min(Ce(c,le.line).text.length,le.ch+Ee(T).length)):w&&vr&&vr.lineWise&&vr.text.join(`
`)==T.join(`
`)&&(te=le=ue(te.line,0)));var de={from:te,to:le,text:R?R[Q%R.length]:T,origin:n||(w?"paste":e.state.cutIncoming>g?"cut":"+input")};Yi(e.doc,de),ot(e,"inputRead",e,de)}t&&!w&&Ma(e,t),zi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=G),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Aa(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Gt(t,function(){return qo(t,i,0,null,"paste")}),!0}function Ma(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var n=i.ranges[r];if(!(n.head.ch>100||r&&i.ranges[r-1].head.line==n.head.line)){var c=e.getModeAt(n.head),g=!1;if(c.electricChars){for(var w=0;w<c.electricChars.length;w++)if(t.indexOf(c.electricChars.charAt(w))>-1){g=An(e,n.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(Ce(e.doc,n.head.line).text.slice(0,n.head.ch))&&(g=An(e,n.head.line,"smart"));g&&ot(e,"electricInput",e,n.head.line)}}}function Ra(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,c={anchor:ue(n,0),head:ue(n+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function Oa(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Da(){var e=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=D("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return y?e.style.width="1000px":e.setAttribute("wrap","off"),p&&(e.style.border="1px solid black"),Oa(e),t}function lu(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,n){var c=this.options,g=c[r];c[r]==n&&r!="mode"||(c[r]=n,t.hasOwnProperty(r)&&st(this,t[r])(this,n,g),Ae(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,n){this.state.keyMaps[n?"push":"unshift"](Jn(r))},removeKeyMap:function(r){for(var n=this.state.keyMaps,c=0;c<n.length;++c)if(n[c]==r||n[c].name==r)return n.splice(c,1),!0},addOverlay:Tt(function(r,n){var c=r.token?r:e.getMode(this.options,r);if(c.startState)throw new Error("Overlays may not be stateful.");Se(this.state.overlays,{mode:c,modeSpec:r,opaque:n&&n.opaque,priority:n&&n.priority||0},function(g){return g.priority}),this.state.modeGen++,It(this)}),removeOverlay:Tt(function(r){for(var n=this.state.overlays,c=0;c<n.length;++c){var g=n[c].modeSpec;if(g==r||typeof r=="string"&&g.name==r){n.splice(c,1),this.state.modeGen++,It(this);return}}}),indentLine:Tt(function(r,n,c){typeof n!="string"&&typeof n!="number"&&(n==null?n=this.options.smartIndent?"smart":"prev":n=n?"add":"subtract"),rr(this.doc,r)&&An(this,r,n,c)}),indentSelection:Tt(function(r){for(var n=this.doc.sel.ranges,c=-1,g=0;g<n.length;g++){var w=n[g];if(w.empty())w.head.line>c&&(An(this,w.head.line,r,!0),c=w.head.line,g==this.doc.sel.primIndex&&zi(this));else{var T=w.from(),R=w.to(),N=Math.max(c,T.line);c=Math.min(this.lastLine(),R.line-(R.ch?0:1))+1;for(var G=N;G<c;++G)An(this,G,r);var Q=this.doc.sel.ranges;T.ch==0&&n.length==Q.length&&Q[g].from().ch>0&&Po(this.doc,g,new Pe(T,Q[g].to()),z)}}}),getTokenAt:function(r,n){return Pi(this,r,n)},getLineTokens:function(r,n){return Pi(this,ue(r),n,!0)},getTokenTypeAt:function(r){r=ge(this.doc,r);var n=Oi(this,Ce(this.doc,r.line)),c=0,g=(n.length-1)/2,w=r.ch,T;if(w==0)T=n[2];else for(;;){var R=c+g>>1;if((R?n[R*2-1]:0)>=w)g=R;else if(n[R*2+1]<w)c=R+1;else{T=n[R*2+2];break}}var N=T?T.indexOf("overlay "):-1;return N<0?T:N==0?null:T.slice(0,N-1)},getModeAt:function(r){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(r).state).mode:n},getHelper:function(r,n){return this.getHelpers(r,n)[0]},getHelpers:function(r,n){var c=[];if(!i.hasOwnProperty(n))return c;var g=i[n],w=this.getModeAt(r);if(typeof w[n]=="string")g[w[n]]&&c.push(g[w[n]]);else if(w[n])for(var T=0;T<w[n].length;T++){var R=g[w[n][T]];R&&c.push(R)}else w.helperType&&g[w.helperType]?c.push(g[w.helperType]):g[w.name]&&c.push(g[w.name]);for(var N=0;N<g._global.length;N++){var G=g._global[N];G.pred(w,this)&&he(c,G.val)==-1&&c.push(G.val)}return c},getStateAfter:function(r,n){var c=this.doc;return r=Oe(c,r??c.first+c.size-1),jr(this,r+1,n).state},cursorCoords:function(r,n){var c,g=this.doc.sel.primary();return r==null?c=g.head:typeof r=="object"?c=ge(this.doc,r):c=r?g.from():g.to(),dr(this,c,n||"page")},charCoords:function(r,n){return Hn(this,ge(this.doc,r),n||"page")},coordsChar:function(r,n){return r=gs(this,r,n||"page"),po(this,r.left,r.top)},lineAtHeight:function(r,n){return r=gs(this,{top:r,left:0},n||"page").top,Bt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,n,c){var g=!1,w;if(typeof r=="number"){var T=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>T&&(r=T,g=!0),w=Ce(this.doc,r)}else w=r;return Pn(this,w,{top:0,left:0},n||"page",c||g).top+(g?this.doc.height-wt(w):0)},defaultTextHeight:function(){return ji(this.display)},defaultCharWidth:function(){return Ui(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,n,c,g,w){var T=this.display;r=dr(this,ge(this.doc,r));var R=r.bottom,N=r.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),T.sizer.appendChild(n),g=="over")R=r.top;else if(g=="above"||g=="near"){var G=Math.max(T.wrapper.clientHeight,this.doc.height),Q=Math.max(T.sizer.clientWidth,T.lineSpace.clientWidth);(g=="above"||r.bottom+n.offsetHeight>G)&&r.top>n.offsetHeight?R=r.top-n.offsetHeight:r.bottom+n.offsetHeight<=G&&(R=r.bottom),N+n.offsetWidth>Q&&(N=Q-n.offsetWidth)}n.style.top=R+"px",n.style.left=n.style.right="",w=="right"?(N=T.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):(w=="left"?N=0:w=="middle"&&(N=(T.sizer.clientWidth-n.offsetWidth)/2),n.style.left=N+"px"),c&&oc(this,{left:N,top:R,right:N+n.offsetWidth,bottom:R+n.offsetHeight})},triggerOnKeyDown:Tt(ba),triggerOnKeyPress:Tt(Ca),triggerOnKeyUp:Sa,triggerOnMouseDown:Tt(wa),execCommand:function(r){if(xn.hasOwnProperty(r))return xn[r].call(null,this)},triggerElectric:Tt(function(r){Ma(this,r)}),findPosH:function(r,n,c,g){var w=1;n<0&&(w=-1,n=-n);for(var T=ge(this.doc,r),R=0;R<n&&(T=zo(this.doc,T,w,c,g),!T.hitSide);++R);return T},moveH:Tt(function(r,n){var c=this;this.extendSelectionsBy(function(g){return c.display.shift||c.doc.extend||g.empty()?zo(c.doc,g.head,r,n,c.options.rtlMoveVisually):r<0?g.from():g.to()},Y)}),deleteH:Tt(function(r,n){var c=this.doc.sel,g=this.doc;c.somethingSelected()?g.replaceSelection("",null,"+delete"):Vi(this,function(w){var T=zo(g,w.head,r,n,!1);return r<0?{from:T,to:w.head}:{from:w.head,to:T}})}),findPosV:function(r,n,c,g){var w=1,T=g;n<0&&(w=-1,n=-n);for(var R=ge(this.doc,r),N=0;N<n;++N){var G=dr(this,R,"div");if(T==null?T=G.left:G.left=T,R=Ba(this,G,w,c),R.hitSide)break}return R},moveV:Tt(function(r,n){var c=this,g=this.doc,w=[],T=!this.display.shift&&!g.extend&&g.sel.somethingSelected();if(g.extendSelectionsBy(function(N){if(T)return r<0?N.from():N.to();var G=dr(c,N.head,"div");N.goalColumn!=null&&(G.left=N.goalColumn),w.push(G.left);var Q=Ba(c,G,r,n);return n=="page"&&N==g.sel.primary()&&Lo(c,Hn(c,Q,"div").top-G.top),Q},Y),w.length)for(var R=0;R<g.sel.ranges.length;R++)g.sel.ranges[R].goalColumn=w[R]}),findWordAt:function(r){var n=this.doc,c=Ce(n,r.line).text,g=r.ch,w=r.ch;if(c){var T=this.getHelper(r,"wordChars");(r.sticky=="before"||w==c.length)&&g?--g:++w;for(var R=c.charAt(g),N=_r(R,T)?function(G){return _r(G,T)}:/\s/.test(R)?function(G){return/\s/.test(G)}:function(G){return!/\s/.test(G)&&!_r(G)};g>0&&N(c.charAt(g-1));)--g;for(;w<c.length&&N(c.charAt(w));)++w}return new Pe(ue(r.line,g),ue(r.line,w))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?F(this.display.cursorDiv,"CodeMirror-overwrite"):P(this.display.cursorDiv,"CodeMirror-overwrite"),Ae(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==B()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Tt(function(r,n){un(this,r,n)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Tr(this)-this.display.barHeight,width:r.scrollWidth-Tr(this)-this.display.barWidth,clientHeight:co(this),clientWidth:Si(this)}},scrollIntoView:Tt(function(r,n){r==null?(r={from:this.doc.sel.primary().head,to:null},n==null&&(n=this.options.cursorScrollMargin)):typeof r=="number"?r={from:ue(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=n||0,r.from.line!=null?sc(this,r):ks(this,r.from,r.to,r.margin)}),setSize:Tt(function(r,n){var c=this,g=function(T){return typeof T=="number"||/^\d+$/.test(String(T))?T+"px":T};r!=null&&(this.display.wrapper.style.width=g(r)),n!=null&&(this.display.wrapper.style.height=g(n)),this.options.lineWrapping&&ps(this);var w=this.display.viewFrom;this.doc.iter(w,this.display.viewTo,function(T){if(T.widgets){for(var R=0;R<T.widgets.length;R++)if(T.widgets[R].noHScroll){ni(c,w,"widget");break}}++w}),this.curOp.forceUpdate=!0,Ae(this,"refresh",this)}),operation:function(r){return Gt(this,r)},startOperation:function(){return Ei(this)},endOperation:function(){return Ti(this)},refresh:Tt(function(){var r=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,ln(this),un(this,this.doc.scrollLeft,this.doc.scrollTop),Eo(this.display),(r==null||Math.abs(r-ji(this.display))>.5||this.options.lineWrapping)&&yo(this),Ae(this,"refresh",this)}),swapDoc:Tt(function(r){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),Ns(this,r),ln(this),this.display.input.reset(),un(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,ot(this,"swapDoc",this,n),n}),phrase:function(r){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,r)?n[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Rt(e),e.registerHelper=function(r,n,c){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][n]=c},e.registerGlobalHelper=function(r,n,c,g){e.registerHelper(r,n,g),i[r]._global.push({pred:c,val:g})}}function zo(e,t,i,r,n){var c=t,g=i,w=Ce(e,t.line),T=n&&e.direction=="rtl"?-i:i;function R(){var ye=t.line+T;return ye<e.first||ye>=e.first+e.size?!1:(t=new ue(ye,t.ch,t.sticky),w=Ce(e,ye))}function N(ye){var ve;if(r=="codepoint"){var be=w.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(be))ve=null;else{var Te=i>0?be>=55296&&be<56320:be>=56320&&be<57343;ve=new ue(t.line,Math.max(0,Math.min(w.text.length,t.ch+i*(Te?2:1))),-i)}}else n?ve=qc(e.cm,w,t,i):ve=Io(w,t,i);if(ve==null)if(!ye&&R())t=Fo(n,e.cm,w,t.line,T);else return!1;else t=ve;return!0}if(r=="char"||r=="codepoint")N();else if(r=="column")N(!0);else if(r=="word"||r=="group")for(var G=null,Q=r=="group",V=e.cm&&e.cm.getHelper(t,"wordChars"),te=!0;!(i<0&&!N(!te));te=!1){var le=w.text.charAt(t.ch)||`
`,de=_r(le,V)?"w":Q&&le==`
`?"n":!Q||/\s/.test(le)?null:"p";if(Q&&!te&&!de&&(de="s"),G&&G!=de){i<0&&(i=1,N(),t.sticky="after");break}if(de&&(G=de),i>0&&!N(!te))break}var pe=Yn(e,t,c,g,!0);return K(c,pe)&&(pe.hitSide=!0),pe}function Ba(e,t,i,r){var n=e.doc,c=t.left,g;if(r=="page"){var w=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),T=Math.max(w-.5*ji(e.display),3);g=(i>0?t.bottom:t.top)+i*T}else r=="line"&&(g=i>0?t.bottom+3:t.top-3);for(var R;R=po(e,c,g),!!R.outside;){if(i<0?g<=0:g>=n.height){R.hitSide=!0;break}g+=i*5}return R}var He=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new we,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};He.prototype.init=function(e){var t=this,i=this,r=i.cm,n=i.div=e.lineDiv;n.contentEditable=!0,Oa(n,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function c(w){for(var T=w.target;T;T=T.parentNode){if(T==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(T.className))break}return!1}ke(n,"paste",function(w){!c(w)||je(r,w)||Aa(w,r)||v<=11&&setTimeout(st(r,function(){return t.updateFromDOM()}),20)}),ke(n,"compositionstart",function(w){t.composing={data:w.data,done:!1}}),ke(n,"compositionupdate",function(w){t.composing||(t.composing={data:w.data,done:!1})}),ke(n,"compositionend",function(w){t.composing&&(w.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ke(n,"touchstart",function(){return i.forceCompositionEnd()}),ke(n,"input",function(){t.composing||t.readFromDOMSoon()});function g(w){if(!(!c(w)||je(r,w))){if(r.somethingSelected())eo({lineWise:!1,text:r.getSelections()}),w.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var T=Ra(r);eo({lineWise:!0,text:T.text}),w.type=="cut"&&r.operation(function(){r.setSelections(T.ranges,0,z),r.replaceSelection("",null,"cut")})}else return;if(w.clipboardData){w.clipboardData.clearData();var R=vr.text.join(`
`);if(w.clipboardData.setData("Text",R),w.clipboardData.getData("Text")==R){w.preventDefault();return}}var N=Da(),G=N.firstChild;r.display.lineSpace.insertBefore(N,r.display.lineSpace.firstChild),G.value=vr.text.join(`
`);var Q=B();Z(G),setTimeout(function(){r.display.lineSpace.removeChild(N),Q.focus(),Q==n&&i.showPrimarySelection()},50)}}ke(n,"copy",g),ke(n,"cut",g)},He.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},He.prototype.prepareSelection=function(){var e=ws(this.cm,!1);return e.focus=B()==this.div,e},He.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},He.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},He.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),n=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||n.line<t.display.viewFrom){e.removeAllRanges();return}var c=to(t,e.anchorNode,e.anchorOffset),g=to(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&g&&!g.bad&&O(Me(c,g),r)==0&&O(fe(c,g),n)==0)){var w=t.display.view,T=r.line>=t.display.viewFrom&&Pa(t,r)||{node:w[0].measure.map[2],offset:0},R=n.line<t.display.viewTo&&Pa(t,n);if(!R){var N=w[w.length-1].measure,G=N.maps?N.maps[N.maps.length-1]:N.map;R={node:G[G.length-1],offset:G[G.length-2]-G[G.length-3]}}if(!T||!R){e.removeAllRanges();return}var Q=e.rangeCount&&e.getRangeAt(0),V;try{V=U(T.node,T.offset,R.offset,R.node)}catch{}V&&(!$&&t.state.focused?(e.collapse(T.node,T.offset),V.collapsed||(e.removeAllRanges(),e.addRange(V))):(e.removeAllRanges(),e.addRange(V)),Q&&e.anchorNode==null?e.addRange(Q):$&&this.startGracePeriod()),this.rememberSelection()}},He.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},He.prototype.showMultipleSelections=function(e){k(this.cm.display.cursorDiv,e.cursors),k(this.cm.display.selectionDiv,e.selection)},He.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},He.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return W(this.div,t)},He.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||B()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},He.prototype.blur=function(){this.div.blur()},He.prototype.getField=function(){return this.div},He.prototype.supportsTouch=function(){return!0},He.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Gt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},He.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},He.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(l&&m&&this.cm.display.gutterSpecs.length&&cu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=to(t,e.anchorNode,e.anchorOffset),r=to(t,e.focusNode,e.focusOffset);i&&r&&Gt(t,function(){Lt(t.doc,si(i,r),z),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},He.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),n=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=ue(r.line-1,Ce(e.doc,r.line-1).length)),n.ch==Ce(e.doc,n.line).text.length&&n.line<e.lastLine()&&(n=ue(n.line+1,0)),r.line<t.viewFrom||n.line>t.viewTo-1)return!1;var c,g,w;r.line==t.viewFrom||(c=Li(e,r.line))==0?(g=De(t.view[0].line),w=t.view[0].node):(g=De(t.view[c].line),w=t.view[c-1].node.nextSibling);var T=Li(e,n.line),R,N;if(T==t.view.length-1?(R=t.viewTo-1,N=t.lineDiv.lastChild):(R=De(t.view[T+1].line)-1,N=t.view[T+1].node.previousSibling),!w)return!1;for(var G=e.doc.splitLines(uu(e,w,N,g,R)),Q=Dt(e.doc,ue(g,0),ue(R,Ce(e.doc,R).text.length));G.length>1&&Q.length>1;)if(Ee(G)==Ee(Q))G.pop(),Q.pop(),R--;else if(G[0]==Q[0])G.shift(),Q.shift(),g++;else break;for(var V=0,te=0,le=G[0],de=Q[0],pe=Math.min(le.length,de.length);V<pe&&le.charCodeAt(V)==de.charCodeAt(V);)++V;for(var ye=Ee(G),ve=Ee(Q),be=Math.min(ye.length-(G.length==1?V:0),ve.length-(Q.length==1?V:0));te<be&&ye.charCodeAt(ye.length-te-1)==ve.charCodeAt(ve.length-te-1);)++te;if(G.length==1&&Q.length==1&&g==r.line)for(;V&&V>r.ch&&ye.charCodeAt(ye.length-te-1)==ve.charCodeAt(ve.length-te-1);)V--,te++;G[G.length-1]=ye.slice(0,ye.length-te).replace(/^\u200b+/,""),G[0]=G[0].slice(V).replace(/\u200b+$/,"");var Te=ue(g,V),xe=ue(R,Q.length?Ee(Q).length-te:0);if(G.length>1||G[0]||O(Te,xe))return Zi(e.doc,G,Te,xe,"+input"),!0},He.prototype.ensurePolled=function(){this.forceCompositionEnd()},He.prototype.reset=function(){this.forceCompositionEnd()},He.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},He.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},He.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Gt(this.cm,function(){return It(e.cm)})},He.prototype.setUneditable=function(e){e.contentEditable="false"},He.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||st(this.cm,qo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},He.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},He.prototype.onContextMenu=function(){},He.prototype.resetPosition=function(){},He.prototype.needsContentAttribute=!0;function Pa(e,t){var i=uo(e,t.line);if(!i||i.hidden)return null;var r=Ce(e.doc,t.line),n=cs(i,r,t.line),c=ut(r,e.doc.direction),g="left";if(c){var w=Ne(c,t.ch);g=w%2?"right":"left"}var T=hs(n.map,t.ch,g);return T.offset=T.collapse=="right"?T.end:T.start,T}function cu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function en(e,t){return t&&(e.bad=!0),e}function uu(e,t,i,r,n){var c="",g=!1,w=e.doc.lineSeparator(),T=!1;function R(V){return function(te){return te.id==V}}function N(){g&&(c+=w,T&&(c+=w),g=T=!1)}function G(V){V&&(N(),c+=V)}function Q(V){if(V.nodeType==1){var te=V.getAttribute("cm-text");if(te){G(te);return}var le=V.getAttribute("cm-marker"),de;if(le){var pe=e.findMarks(ue(r,0),ue(n+1,0),R(+le));pe.length&&(de=pe[0].find(0))&&G(Dt(e.doc,de.from,de.to).join(w));return}if(V.getAttribute("contenteditable")=="false")return;var ye=/^(pre|div|p|li|table|br)$/i.test(V.nodeName);if(!/^br$/i.test(V.nodeName)&&V.textContent.length==0)return;ye&&N();for(var ve=0;ve<V.childNodes.length;ve++)Q(V.childNodes[ve]);/^(pre|p)$/i.test(V.nodeName)&&(T=!0),ye&&(g=!0)}else V.nodeType==3&&G(V.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Q(t),t!=i;)t=t.nextSibling,T=!1;return c}function to(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return en(e.clipPos(ue(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var c=e.display.view[n];if(c.node==r)return fu(c,t,i)}}function fu(e,t,i){var r=e.text.firstChild,n=!1;if(!t||!W(r,t))return en(ue(De(e.line),0),!0);if(t==r&&(n=!0,t=r.childNodes[i],i=0,!t)){var c=e.rest?Ee(e.rest):e.line;return en(ue(De(c),c.text.length),n)}var g=t.nodeType==3?t:null,w=t;for(!g&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(g=t.firstChild,i&&(i=g.nodeValue.length));w.parentNode!=r;)w=w.parentNode;var T=e.measure,R=T.maps;function N(de,pe,ye){for(var ve=-1;ve<(R?R.length:0);ve++)for(var be=ve<0?T.map:R[ve],Te=0;Te<be.length;Te+=3){var xe=be[Te+2];if(xe==de||xe==pe){var Re=De(ve<0?e.line:e.rest[ve]),We=be[Te]+ye;return(ye<0||xe!=de)&&(We=be[Te+(ye?1:0)]),ue(Re,We)}}}var G=N(g,w,i);if(G)return en(G,n);for(var Q=w.nextSibling,V=g?g.nodeValue.length-i:0;Q;Q=Q.nextSibling){if(G=N(Q,Q.firstChild,0),G)return en(ue(G.line,G.ch-V),n);V+=Q.textContent.length}for(var te=w.previousSibling,le=i;te;te=te.previousSibling){if(G=N(te,te.firstChild,-1),G)return en(ue(G.line,G.ch+le),n);le+=te.textContent.length}}var $e=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new we,this.hasSelection=!1,this.composing=null};$e.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var n=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),p&&(n.style.width="0px"),ke(n,"input",function(){x&&v>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),ke(n,"paste",function(g){je(r,g)||Aa(g,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function c(g){if(!je(r,g)){if(r.somethingSelected())eo({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var w=Ra(r);eo({lineWise:!0,text:w.text}),g.type=="cut"?r.setSelections(w.ranges,null,z):(i.prevInput="",n.value=w.text.join(`
`),Z(n))}else return;g.type=="cut"&&(r.state.cutIncoming=+new Date)}}ke(n,"cut",c),ke(n,"copy",c),ke(e.scroller,"paste",function(g){if(!(Xr(e,g)||je(r,g))){if(!n.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var w=new Event("paste");w.clipboardData=g.clipboardData,n.dispatchEvent(w)}}),ke(e.lineSpace,"selectstart",function(g){Xr(e,g)||Ye(g)}),ke(n,"compositionstart",function(){var g=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:g,range:r.markText(g,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ke(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},$e.prototype.createField=function(e){this.wrapper=Da(),this.textarea=this.wrapper.firstChild},$e.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},$e.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=ws(e);if(e.options.moveInputWithCursor){var n=dr(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),g=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+g.top-c.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+g.left-c.left))}return r},$e.prototype.showSelection=function(e){var t=this.cm,i=t.display;k(i.cursorDiv,e.cursors),k(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},$e.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&Z(this.textarea),x&&v>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",x&&v>=9&&(this.hasSelection=null))}},$e.prototype.getField=function(){return this.textarea},$e.prototype.supportsTouch=function(){return!1},$e.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!a||B()!=this.textarea))try{this.textarea.focus()}catch{}},$e.prototype.blur=function(){this.textarea.blur()},$e.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},$e.prototype.receivedFocus=function(){this.slowPoll()},$e.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},$e.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},$e.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Fr(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(x&&v>=9&&this.hasSelection===n||o&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=n.charCodeAt(0);if(c==8203&&!r&&(r="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var g=0,w=Math.min(r.length,n.length);g<w&&r.charCodeAt(g)==n.charCodeAt(g);)++g;return Gt(t,function(){qo(t,n.slice(g),r.length-g,null,e.composing?"*compose":null),n.length>1e3||n.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},$e.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},$e.prototype.onKeyPress=function(){x&&v>=9&&(this.hasSelection=null),this.fastPoll()},$e.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,n=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=wi(i,e),g=r.scroller.scrollTop;if(!c||b)return;var w=i.options.resetSelectionOnContextMenu;w&&i.doc.sel.contains(c)==-1&&st(i,Lt)(i.doc,si(c),z);var T=n.style.cssText,R=t.wrapper.style.cssText,N=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",n.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-N.top-5)+"px; left: "+(e.clientX-N.left-5)+`px;
      z-index: 1000; background: `+(x?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var G;y&&(G=window.scrollY),r.input.focus(),y&&window.scrollTo(null,G),r.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=V,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function Q(){if(n.selectionStart!=null){var le=i.somethingSelected(),de="\u200B"+(le?n.value:"");n.value="\u21DA",n.value=de,t.prevInput=le?"":"\u200B",n.selectionStart=1,n.selectionEnd=de.length,r.selForContextMenu=i.doc.sel}}function V(){if(t.contextMenuPending==V&&(t.contextMenuPending=!1,t.wrapper.style.cssText=R,n.style.cssText=T,x&&v<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=g),n.selectionStart!=null)){(!x||x&&v<9)&&Q();var le=0,de=function(){r.selForContextMenu==i.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="\u200B"?st(i,Qs)(i):le++<10?r.detectingSelectAll=setTimeout(de,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(de,200)}}if(x&&v>=9&&Q(),A){tr(e);var te=function(){tt(window,"mouseup",te),setTimeout(V,20)};ke(window,"mouseup",te)}else setTimeout(V,50)},$e.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},$e.prototype.setUneditable=function(){},$e.prototype.needsContentAttribute=!1;function hu(e,t){if(t=t?ae(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=B();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=w.getValue()}var n;if(e.form&&(ke(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var c=e.form;n=c.submit;try{var g=c.submit=function(){r(),c.submit=n,c.submit(),c.submit=g}}catch{}}t.finishInit=function(T){T.save=r,T.getTextArea=function(){return e},T.toTextArea=function(){T.toTextArea=isNaN,r(),e.parentNode.removeChild(T.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=n))}},e.style.display="none";var w=Ue(function(T){return e.parentNode.insertBefore(T,e.nextSibling)},t);return w}function du(e){e.off=tt,e.on=ke,e.wheelEventPixels=bc,e.Doc=Ft,e.splitLines=mr,e.countColumn=me,e.findColumn=_e,e.isWordChar=Yt,e.Pass=q,e.signal=Ae,e.Line=Kt,e.changeEnd=ai,e.scrollbarModel=As,e.Pos=ue,e.cmpPos=O,e.modes=yt,e.mimeModes=ht,e.resolveMode=ur,e.getMode=fr,e.modeExtensions=kt,e.extendMode=Et,e.copyState=dt,e.startState=Cr,e.innerMode=Sr,e.commands=xn,e.keyMap=Zr,e.keyName=va,e.isModifierKey=da,e.lookupKey=Ji,e.normalizeKeyMap=Uc,e.StringStream=Fe,e.SharedTextMarker=Cn,e.TextMarker=ci,e.LineWidget=Sn,e.e_preventDefault=Ye,e.e_stopPropagation=cr,e.e_stop=tr,e.addClass=F,e.contains=W,e.rmClass=P,e.keyNames=ui}nu(Ue),lu(Ue);var pu="iter insert remove copy getEditor constructor".split(" ");for(var ro in Ft.prototype)Ft.prototype.hasOwnProperty(ro)&&he(pu,ro)<0&&(Ue.prototype[ro]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ft.prototype[ro]));return Rt(Ft),Ue.inputStyles={textarea:$e,contenteditable:He},Ue.defineMode=function(e){!Ue.defaults.mode&&e!="null"&&(Ue.defaults.mode=e),Nr.apply(this,arguments)},Ue.defineMIME=qt,Ue.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ue.defineMIME("text/plain","null"),Ue.defineExtension=function(e,t){Ue.prototype[e]=t},Ue.defineDocExtension=function(e,t){Ft.prototype[e]=t},Ue.fromTextArea=hu,du(Ue),Ue.version="5.65.1",Ue})});var za=Rr((Ua,qa)=>{(function(ee){typeof Ua=="object"&&typeof qa=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";ee.defineMode("javascript",function(j,$){var oe=j.indentUnit,J=$.statementIndent,d=$.jsonld,x=$.json||d,v=$.trackScope!==!1,y=$.typescript,S=$.wordCharacters||/[\w$\xa1-\uffff]/,m=function(){function O(Je){return{type:Je,style:"keyword"}}var K=O("keyword a"),ne=O("keyword b"),fe=O("keyword c"),Me=O("keyword d"),Oe=O("operator"),ge={type:"atom",style:"atom"};return{if:O("if"),while:K,with:K,else:ne,do:ne,try:ne,finally:ne,return:Me,break:Me,continue:Me,new:O("new"),delete:fe,void:fe,throw:fe,debugger:O("debugger"),var:O("var"),const:O("var"),let:O("var"),function:O("function"),catch:O("catch"),for:O("for"),switch:O("switch"),case:O("case"),default:O("default"),in:Oe,typeof:Oe,instanceof:Oe,true:ge,false:ge,null:ge,undefined:ge,NaN:ge,Infinity:ge,this:O("this"),class:O("class"),super:O("atom"),yield:fe,export:O("export"),import:O("import"),extends:fe,await:fe}}(),b=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function u(O){for(var K=!1,ne,fe=!1;(ne=O.next())!=null;){if(!K){if(ne=="/"&&!fe)return;ne=="["?fe=!0:fe&&ne=="]"&&(fe=!1)}K=!K&&ne=="\\"}}var h,p;function l(O,K,ne){return h=O,p=ne,K}function a(O,K){var ne=O.next();if(ne=='"'||ne=="'")return K.tokenize=o(ne),K.tokenize(O,K);if(ne=="."&&O.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return l("number","number");if(ne=="."&&O.match(".."))return l("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ne))return l(ne);if(ne=="="&&O.eat(">"))return l("=>","operator");if(ne=="0"&&O.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return l("number","number");if(/\d/.test(ne))return O.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),l("number","number");if(ne=="/")return O.eat("*")?(K.tokenize=s,s(O,K)):O.eat("/")?(O.skipToEnd(),l("comment","comment")):ue(O,K,1)?(u(O),O.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),l("regexp","string-2")):(O.eat("="),l("operator","operator",O.current()));if(ne=="`")return K.tokenize=f,f(O,K);if(ne=="#"&&O.peek()=="!")return O.skipToEnd(),l("meta","meta");if(ne=="#"&&O.eatWhile(S))return l("variable","property");if(ne=="<"&&O.match("!--")||ne=="-"&&O.match("->")&&!/\S/.test(O.string.slice(0,O.start)))return O.skipToEnd(),l("comment","comment");if(b.test(ne))return(ne!=">"||!K.lexical||K.lexical.type!=">")&&(O.eat("=")?(ne=="!"||ne=="=")&&O.eat("="):/[<>*+\-|&?]/.test(ne)&&(O.eat(ne),ne==">"&&O.eat(ne))),ne=="?"&&O.eat(".")?l("."):l("operator","operator",O.current());if(S.test(ne)){O.eatWhile(S);var fe=O.current();if(K.lastType!="."){if(m.propertyIsEnumerable(fe)){var Me=m[fe];return l(Me.type,Me.style,fe)}if(fe=="async"&&O.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return l("async","keyword",fe)}return l("variable","variable",fe)}}function o(O){return function(K,ne){var fe=!1,Me;if(d&&K.peek()=="@"&&K.match(C))return ne.tokenize=a,l("jsonld-keyword","meta");for(;(Me=K.next())!=null&&!(Me==O&&!fe);)fe=!fe&&Me=="\\";return fe||(ne.tokenize=a),l("string","string")}}function s(O,K){for(var ne=!1,fe;fe=O.next();){if(fe=="/"&&ne){K.tokenize=a;break}ne=fe=="*"}return l("comment","comment")}function f(O,K){for(var ne=!1,fe;(fe=O.next())!=null;){if(!ne&&(fe=="`"||fe=="$"&&O.eat("{"))){K.tokenize=a;break}ne=!ne&&fe=="\\"}return l("quasi","string-2",O.current())}var _="([{}])";function L(O,K){K.fatArrowAt&&(K.fatArrowAt=null);var ne=O.string.indexOf("=>",O.start);if(!(ne<0)){if(y){var fe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(O.string.slice(O.start,ne));fe&&(ne=fe.index)}for(var Me=0,Oe=!1,ge=ne-1;ge>=0;--ge){var Je=O.string.charAt(ge),mt=_.indexOf(Je);if(mt>=0&&mt<3){if(!Me){++ge;break}if(--Me==0){Je=="("&&(Oe=!0);break}}else if(mt>=3&&mt<6)++Me;else if(S.test(Je))Oe=!0;else if(/["'\/`]/.test(Je))for(;;--ge){if(ge==0)return;var xr=O.string.charAt(ge-1);if(xr==Je&&O.string.charAt(ge-2)!="\\"){ge--;break}}else if(Oe&&!Me){++ge;break}}Oe&&!Me&&(K.fatArrowAt=ge)}}var A={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function I(O,K,ne,fe,Me,Oe){this.indented=O,this.column=K,this.type=ne,this.prev=Me,this.info=Oe,fe!=null&&(this.align=fe)}function P(O,K){if(!v)return!1;for(var ne=O.localVars;ne;ne=ne.next)if(ne.name==K)return!0;for(var fe=O.context;fe;fe=fe.prev)for(var ne=fe.vars;ne;ne=ne.next)if(ne.name==K)return!0}function M(O,K,ne,fe,Me){var Oe=O.cc;for(k.state=O,k.stream=Me,k.marked=null,k.cc=Oe,k.style=K,O.lexical.hasOwnProperty("align")||(O.lexical.align=!0);;){var ge=Oe.length?Oe.pop():x?Y:z;if(ge(ne,fe)){for(;Oe.length&&Oe[Oe.length-1].lex;)Oe.pop()();return k.marked?k.marked:ne=="variable"&&P(O,fe)?"variable-2":K}}}var k={state:null,column:null,marked:null,cc:null};function D(){for(var O=arguments.length-1;O>=0;O--)k.cc.push(arguments[O])}function E(){return D.apply(null,arguments),!0}function U(O,K){for(var ne=K;ne;ne=ne.next)if(ne.name==O)return!0;return!1}function W(O){var K=k.state;if(k.marked="def",!!v){if(K.context){if(K.lexical.info=="var"&&K.context&&K.context.block){var ne=B(O,K.context);if(ne!=null){K.context=ne;return}}else if(!U(O,K.localVars)){K.localVars=new Z(O,K.localVars);return}}$.globalVars&&!U(O,K.globalVars)&&(K.globalVars=new Z(O,K.globalVars))}}function B(O,K){if(K)if(K.block){var ne=B(O,K.prev);return ne?ne==K.prev?K:new X(ne,K.vars,!0):null}else return U(O,K.vars)?K:new X(K.prev,new Z(O,K.vars),!1);else return null}function F(O){return O=="public"||O=="private"||O=="protected"||O=="abstract"||O=="readonly"}function X(O,K,ne){this.prev=O,this.vars=K,this.block=ne}function Z(O,K){this.name=O,this.next=K}var se=new Z("this",new Z("arguments",null));function ae(){k.state.context=new X(k.state.context,k.state.localVars,!1),k.state.localVars=se}function me(){k.state.context=new X(k.state.context,k.state.localVars,!0),k.state.localVars=null}ae.lex=me.lex=!0;function we(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}we.lex=!0;function he(O,K){var ne=function(){var fe=k.state,Me=fe.indented;if(fe.lexical.type=="stat")Me=fe.lexical.indented;else for(var Oe=fe.lexical;Oe&&Oe.type==")"&&Oe.align;Oe=Oe.prev)Me=Oe.indented;fe.lexical=new I(Me,k.stream.column(),O,null,fe.lexical,K)};return ne.lex=!0,ne}function H(){var O=k.state;O.lexical.prev&&(O.lexical.type==")"&&(O.indented=O.lexical.indented),O.lexical=O.lexical.prev)}H.lex=!0;function q(O){function K(ne){return ne==O?E():O==";"||ne=="}"||ne==")"||ne=="]"?D():E(K)}return K}function z(O,K){return O=="var"?E(he("vardef",K),gr,q(";"),H):O=="keyword a"?E(he("form"),Le,z,H):O=="keyword b"?E(he("form"),z,H):O=="keyword d"?k.stream.match(/^\s*$/,!1)?E():E(he("stat"),Ee,q(";"),H):O=="debugger"?E(q(";")):O=="{"?E(he("}"),me,ut,H,we):O==";"?E():O=="if"?(k.state.lexical.info=="else"&&k.state.cc[k.state.cc.length-1]==H&&k.state.cc.pop()(),E(he("form"),Le,z,H,Fr)):O=="function"?E(yt):O=="for"?E(he("form"),me,Wr,z,we,H):O=="class"||y&&K=="interface"?(k.marked="keyword",E(he("form",O=="class"?O:K),fr,H)):O=="variable"?y&&K=="declare"?(k.marked="keyword",E(z)):y&&(K=="module"||K=="enum"||K=="type")&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword",K=="enum"?E(Bt):K=="type"?E(Nr,q("operator"),Ae,q(";")):E(he("form"),rt,q("{"),he("}"),ut,H,H)):y&&K=="namespace"?(k.marked="keyword",E(he("form"),Y,z,H)):y&&K=="abstract"?(k.marked="keyword",E(z)):E(he("stat"),Pr):O=="switch"?E(he("form"),Le,q("{"),he("}","switch"),me,ut,H,H,we):O=="case"?E(Y,q(":")):O=="default"?E(q(":")):O=="catch"?E(he("form"),ae,ce,z,H,we):O=="export"?E(he("stat"),Sr,H):O=="import"?E(he("stat"),Fe,H):O=="async"?E(z):K=="@"?E(Y,z):D(he("stat"),Y,q(";"),H)}function ce(O){if(O=="(")return E(qt,q(")"))}function Y(O,K){return Be(O,K,!1)}function _e(O,K){return Be(O,K,!0)}function Le(O){return O!="("?D():E(he(")"),Ee,q(")"),H)}function Be(O,K,ne){if(k.state.fatArrowAt==k.stream.start){var fe=ne?Yt:Mt;if(O=="(")return E(ae,he(")"),Ne(qt,")"),H,q("=>"),fe,we);if(O=="variable")return D(ae,rt,q("=>"),fe,we)}var Me=ne?Se:Ie;return A.hasOwnProperty(O)?E(Me):O=="function"?E(yt,Me):O=="class"||y&&K=="interface"?(k.marked="keyword",E(he("form"),ur,H)):O=="keyword c"||O=="async"?E(ne?_e:Y):O=="("?E(he(")"),Ee,q(")"),H,Me):O=="operator"||O=="spread"?E(ne?_e:Y):O=="["?E(he("]"),De,H,Me):O=="{"?sr(Ut,"}",null,Me):O=="quasi"?D(qe,Me):O=="new"?E(_r(ne)):E()}function Ee(O){return O.match(/[;\}\)\],]/)?D():D(Y)}function Ie(O,K){return O==","?E(Ee):Se(O,K,!1)}function Se(O,K,ne){var fe=ne==!1?Ie:Se,Me=ne==!1?Y:_e;if(O=="=>")return E(ae,ne?Yt:Mt,we);if(O=="operator")return/\+\+|--/.test(K)||y&&K=="!"?E(fe):y&&K=="<"&&k.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(he(">"),Ne(Ae,">"),H,fe):K=="?"?E(Y,q(":"),Me):E(Me);if(O=="quasi")return D(qe,fe);if(O!=";"){if(O=="(")return sr(_e,")","call",fe);if(O==".")return E(ti,fe);if(O=="[")return E(he("]"),Ee,q("]"),H,fe);if(y&&K=="as")return k.marked="keyword",E(Ae,fe);if(O=="regexp")return k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),E(Me)}}function qe(O,K){return O!="quasi"?D():K.slice(K.length-2)!="${"?E(qe):E(Ee,_t)}function _t(O){if(O=="}")return k.marked="string-2",k.state.tokenize=f,E(qe)}function Mt(O){return L(k.stream,k.state),D(O=="{"?z:Y)}function Yt(O){return L(k.stream,k.state),D(O=="{"?z:_e)}function _r(O){return function(K){return K=="."?E(O?di:ei):K=="variable"&&y?E(tr,O?Se:Ie):D(O?_e:Y)}}function ei(O,K){if(K=="target")return k.marked="keyword",E(Ie)}function di(O,K){if(K=="target")return k.marked="keyword",E(Se)}function Pr(O){return O==":"?E(H,z):D(Ie,q(";"),H)}function ti(O){if(O=="variable")return k.marked="property",E()}function Ut(O,K){if(O=="async")return k.marked="property",E(Ut);if(O=="variable"||k.style=="keyword"){if(k.marked="property",K=="get"||K=="set")return E(pi);var ne;return y&&k.state.fatArrowAt==k.stream.start&&(ne=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+ne[0].length),E(gt)}else{if(O=="number"||O=="string")return k.marked=d?"property":k.style+" property",E(gt);if(O=="jsonld-keyword")return E(gt);if(y&&F(K))return k.marked="keyword",E(Ut);if(O=="[")return E(Y,Zt,q("]"),gt);if(O=="spread")return E(_e,gt);if(K=="*")return k.marked="keyword",E(Ut);if(O==":")return D(gt)}}function pi(O){return O!="variable"?D(gt):(k.marked="property",E(yt))}function gt(O){if(O==":")return E(_e);if(O=="(")return D(yt)}function Ne(O,K,ne){function fe(Me,Oe){if(ne?ne.indexOf(Me)>-1:Me==","){var ge=k.state.lexical;return ge.info=="call"&&(ge.pos=(ge.pos||0)+1),E(function(Je,mt){return Je==K||mt==K?D():D(O)},fe)}return Me==K||Oe==K?E():ne&&ne.indexOf(";")>-1?D(O):E(q(K))}return function(Me,Oe){return Me==K||Oe==K?E():D(O,fe)}}function sr(O,K,ne){for(var fe=3;fe<arguments.length;fe++)k.cc.push(arguments[fe]);return E(he(K,ne),Ne(O,K),H)}function ut(O){return O=="}"?E():D(z,ut)}function Zt(O,K){if(y){if(O==":")return E(Ae);if(K=="?")return E(Zt)}}function ke(O,K){if(y&&(O==":"||K=="in"))return E(Ae)}function ar(O){if(y&&O==":")return k.stream.match(/^\s*\w+\s+is\b/,!1)?E(Y,tt,Ae):E(Ae)}function tt(O,K){if(K=="is")return k.marked="keyword",E()}function Ae(O,K){if(K=="keyof"||K=="typeof"||K=="infer"||K=="readonly")return k.marked="keyword",E(K=="typeof"?_e:Ae);if(O=="variable"||K=="void")return k.marked="type",E(ft);if(K=="|"||K=="&")return E(Ae);if(O=="string"||O=="number"||O=="atom")return E(ft);if(O=="[")return E(he("]"),Ne(Ae,"]",","),H,ft);if(O=="{")return E(he("}"),lr,H,ft);if(O=="(")return E(Ne(cr,")"),je,ft);if(O=="<")return E(Ne(Ae,">"),Ae);if(O=="quasi")return D(Rt,ft)}function je(O){if(O=="=>")return E(Ae)}function lr(O){return O.match(/[\}\)\]]/)?E():O==","||O==";"?E(lr):D(Ke,lr)}function Ke(O,K){if(O=="variable"||k.style=="keyword")return k.marked="property",E(Ke);if(K=="?"||O=="number"||O=="string")return E(Ke);if(O==":")return E(Ae);if(O=="[")return E(q("variable"),ke,q("]"),Ke);if(O=="(")return D(ht,Ke);if(!O.match(/[;\}\)\],]/))return E()}function Rt(O,K){return O!="quasi"?D():K.slice(K.length-2)!="${"?E(Rt):E(Ae,Ye)}function Ye(O){if(O=="}")return k.marked="string-2",k.state.tokenize=f,E(Rt)}function cr(O,K){return O=="variable"&&k.stream.match(/^\s*[?:]/,!1)||K=="?"?E(cr):O==":"?E(Ae):O=="spread"?E(cr):D(Ae)}function ft(O,K){if(K=="<")return E(he(">"),Ne(Ae,">"),H,ft);if(K=="|"||O=="."||K=="&")return E(Ae);if(O=="[")return E(Ae,q("]"),ft);if(K=="extends"||K=="implements")return k.marked="keyword",E(Ae);if(K=="?")return E(Ae,q(":"),Ae)}function tr(O,K){if(K=="<")return E(he(">"),Ne(Ae,">"),H,ft)}function $t(){return D(Ae,Hr)}function Hr(O,K){if(K=="=")return E(Ae)}function gr(O,K){return K=="enum"?(k.marked="keyword",E(Bt)):D(rt,Zt,Ot,mr)}function rt(O,K){if(y&&F(K))return k.marked="keyword",E(rt);if(O=="variable")return W(K),E();if(O=="spread")return E(rt);if(O=="[")return sr(yr,"]");if(O=="{")return sr(Ir,"}")}function Ir(O,K){return O=="variable"&&!k.stream.match(/^\s*:/,!1)?(W(K),E(Ot)):(O=="variable"&&(k.marked="property"),O=="spread"?E(rt):O=="}"?D():O=="["?E(Y,q("]"),q(":"),Ir):E(q(":"),rt,Ot))}function yr(){return D(rt,Ot)}function Ot(O,K){if(K=="=")return E(_e)}function mr(O){if(O==",")return E(gr)}function Fr(O,K){if(O=="keyword b"&&K=="else")return E(he("form","else"),z,H)}function Wr(O,K){if(K=="await")return E(Wr);if(O=="(")return E(he(")"),br,H)}function br(O){return O=="var"?E(gr,Jt):O=="variable"?E(Jt):D(Jt)}function Jt(O,K){return O==")"?E():O==";"?E(Jt):K=="in"||K=="of"?(k.marked="keyword",E(Y,Jt)):D(Y,Jt)}function yt(O,K){if(K=="*")return k.marked="keyword",E(yt);if(O=="variable")return W(K),E(yt);if(O=="(")return E(ae,he(")"),Ne(qt,")"),H,ar,z,we);if(y&&K=="<")return E(he(">"),Ne($t,">"),H,yt)}function ht(O,K){if(K=="*")return k.marked="keyword",E(ht);if(O=="variable")return W(K),E(ht);if(O=="(")return E(ae,he(")"),Ne(qt,")"),H,ar,we);if(y&&K=="<")return E(he(">"),Ne($t,">"),H,ht)}function Nr(O,K){if(O=="keyword"||O=="variable")return k.marked="type",E(Nr);if(K=="<")return E(he(">"),Ne($t,">"),H)}function qt(O,K){return K=="@"&&E(Y,qt),O=="spread"?E(qt):y&&F(K)?(k.marked="keyword",E(qt)):y&&O=="this"?E(Zt,Ot):D(rt,Zt,Ot)}function ur(O,K){return O=="variable"?fr(O,K):kt(O,K)}function fr(O,K){if(O=="variable")return W(K),E(kt)}function kt(O,K){if(K=="<")return E(he(">"),Ne($t,">"),H,kt);if(K=="extends"||K=="implements"||y&&O==",")return K=="implements"&&(k.marked="keyword"),E(y?Ae:Y,kt);if(O=="{")return E(he("}"),Et,H)}function Et(O,K){if(O=="async"||O=="variable"&&(K=="static"||K=="get"||K=="set"||y&&F(K))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return k.marked="keyword",E(Et);if(O=="variable"||k.style=="keyword")return k.marked="property",E(dt,Et);if(O=="number"||O=="string")return E(dt,Et);if(O=="[")return E(Y,Zt,q("]"),dt,Et);if(K=="*")return k.marked="keyword",E(Et);if(y&&O=="(")return D(ht,Et);if(O==";"||O==",")return E(Et);if(O=="}")return E();if(K=="@")return E(Y,Et)}function dt(O,K){if(K=="!"||K=="?")return E(dt);if(O==":")return E(Ae,Ot);if(K=="=")return E(_e);var ne=k.state.lexical.prev,fe=ne&&ne.info=="interface";return D(fe?ht:yt)}function Sr(O,K){return K=="*"?(k.marked="keyword",E(nt,q(";"))):K=="default"?(k.marked="keyword",E(Y,q(";"))):O=="{"?E(Ne(Cr,"}"),nt,q(";")):D(z)}function Cr(O,K){if(K=="as")return k.marked="keyword",E(q("variable"));if(O=="variable")return D(_e,Cr)}function Fe(O){return O=="string"?E():O=="("?D(Y):O=="."?D(Ie):D(Ce,Dt,nt)}function Ce(O,K){return O=="{"?sr(Ce,"}"):(O=="variable"&&W(K),K=="*"&&(k.marked="keyword"),E(wr))}function Dt(O){if(O==",")return E(Ce,Dt)}function wr(O,K){if(K=="as")return k.marked="keyword",E(Ce)}function nt(O,K){if(K=="from")return k.marked="keyword",E(Y)}function De(O){return O=="]"?E():D(Ne(_e,"]"))}function Bt(){return D(he("form"),rt,q("{"),he("}"),Ne(rr,"}"),H,H)}function rr(){return D(rt,Ot)}function Lr(O,K){return O.lastType=="operator"||O.lastType==","||b.test(K.charAt(0))||/[,.]/.test(K.charAt(0))}function ue(O,K,ne){return K.tokenize==a&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(K.lastType)||K.lastType=="quasi"&&/\{\s*$/.test(O.string.slice(0,O.pos-(ne||0)))}return{startState:function(O){var K={tokenize:a,lastType:"sof",cc:[],lexical:new I((O||0)-oe,0,"block",!1),localVars:$.localVars,context:$.localVars&&new X(null,null,!1),indented:O||0};return $.globalVars&&typeof $.globalVars=="object"&&(K.globalVars=$.globalVars),K},token:function(O,K){if(O.sol()&&(K.lexical.hasOwnProperty("align")||(K.lexical.align=!1),K.indented=O.indentation(),L(O,K)),K.tokenize!=s&&O.eatSpace())return null;var ne=K.tokenize(O,K);return h=="comment"?ne:(K.lastType=h=="operator"&&(p=="++"||p=="--")?"incdec":h,M(K,ne,h,p,O))},indent:function(O,K){if(O.tokenize==s||O.tokenize==f)return ee.Pass;if(O.tokenize!=a)return 0;var ne=K&&K.charAt(0),fe=O.lexical,Me;if(!/^\s*else\b/.test(K))for(var Oe=O.cc.length-1;Oe>=0;--Oe){var ge=O.cc[Oe];if(ge==H)fe=fe.prev;else if(ge!=Fr&&ge!=we)break}for(;(fe.type=="stat"||fe.type=="form")&&(ne=="}"||(Me=O.cc[O.cc.length-1])&&(Me==Ie||Me==Se)&&!/^[,\.=+\-*:?[\(]/.test(K));)fe=fe.prev;J&&fe.type==")"&&fe.prev.type=="stat"&&(fe=fe.prev);var Je=fe.type,mt=ne==Je;return Je=="vardef"?fe.indented+(O.lastType=="operator"||O.lastType==","?fe.info.length+1:0):Je=="form"&&ne=="{"?fe.indented:Je=="form"?fe.indented+oe:Je=="stat"?fe.indented+(Lr(O,K)?J||oe:0):fe.info=="switch"&&!mt&&$.doubleIndentSwitch!=!1?fe.indented+(/^(?:case|default)\b/.test(K)?oe:2*oe):fe.align?fe.column+(mt?0:1):fe.indented+(mt?0:oe)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:x?null:"/*",blockCommentEnd:x?null:"*/",blockCommentContinue:x?null:" * ",lineComment:x?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:x?"json":"javascript",jsonldMode:d,jsonMode:x,expressionAllowed:ue,skipExpression:function(O){M(O,"atom","atom","true",new ee.StringStream("",2,null))}}}),ee.registerHelper("wordChars","javascript",/[\w$]/),ee.defineMIME("text/javascript","javascript"),ee.defineMIME("text/ecmascript","javascript"),ee.defineMIME("application/javascript","javascript"),ee.defineMIME("application/x-javascript","javascript"),ee.defineMIME("application/ecmascript","javascript"),ee.defineMIME("application/json",{name:"javascript",json:!0}),ee.defineMIME("application/x-json",{name:"javascript",json:!0}),ee.defineMIME("application/manifest+json",{name:"javascript",json:!0}),ee.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),ee.defineMIME("text/typescript",{name:"javascript",typescript:!0}),ee.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var Za=Rr((Xa,Ya)=>{(function(ee){typeof Xa=="object"&&typeof Ya=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";ee.defineMode("perl",function(){var d={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},x="string-2",v=/[goseximacplud]/;function y(b,C,u,h,p){return C.chain=null,C.style=null,C.tail=null,C.tokenize=function(l,a){for(var o=!1,s,f=0;s=l.next();){if(s===u[f]&&!o)return u[++f]!==void 0?(a.chain=u[f],a.style=h,a.tail=p):p&&l.eatWhile(p),a.tokenize=m,h;o=!o&&s=="\\"}return h},C.tokenize(b,C)}function S(b,C,u){return C.tokenize=function(h,p){return h.string==u&&(p.tokenize=m),h.skipToEnd(),"string"},C.tokenize(b,C)}function m(b,C){if(b.eatSpace())return null;if(C.chain)return y(b,C,C.chain,C.style,C.tail);if(b.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(b.match(/^<<(?=[_a-zA-Z])/))return b.eatWhile(/\w/),S(b,C,b.current().substr(2));if(b.sol()&&b.match(/^\=item(?!\w)/))return S(b,C,"=cut");var u=b.next();if(u=='"'||u=="'"){if($(b,3)=="<<"+u){var h=b.pos;b.eatWhile(/\w/);var p=b.current().substr(1);if(p&&b.eat(u))return S(b,C,p);b.pos=h}return y(b,C,[u],"string")}if(u=="q"){var l=j(b,-2);if(!(l&&/\w/.test(l))){if(l=j(b,0),l=="x"){if(l=j(b,1),l=="(")return J(b,2),y(b,C,[")"],x,v);if(l=="[")return J(b,2),y(b,C,["]"],x,v);if(l=="{")return J(b,2),y(b,C,["}"],x,v);if(l=="<")return J(b,2),y(b,C,[">"],x,v);if(/[\^'"!~\/]/.test(l))return J(b,1),y(b,C,[b.eat(l)],x,v)}else if(l=="q"){if(l=j(b,1),l=="(")return J(b,2),y(b,C,[")"],"string");if(l=="[")return J(b,2),y(b,C,["]"],"string");if(l=="{")return J(b,2),y(b,C,["}"],"string");if(l=="<")return J(b,2),y(b,C,[">"],"string");if(/[\^'"!~\/]/.test(l))return J(b,1),y(b,C,[b.eat(l)],"string")}else if(l=="w"){if(l=j(b,1),l=="(")return J(b,2),y(b,C,[")"],"bracket");if(l=="[")return J(b,2),y(b,C,["]"],"bracket");if(l=="{")return J(b,2),y(b,C,["}"],"bracket");if(l=="<")return J(b,2),y(b,C,[">"],"bracket");if(/[\^'"!~\/]/.test(l))return J(b,1),y(b,C,[b.eat(l)],"bracket")}else if(l=="r"){if(l=j(b,1),l=="(")return J(b,2),y(b,C,[")"],x,v);if(l=="[")return J(b,2),y(b,C,["]"],x,v);if(l=="{")return J(b,2),y(b,C,["}"],x,v);if(l=="<")return J(b,2),y(b,C,[">"],x,v);if(/[\^'"!~\/]/.test(l))return J(b,1),y(b,C,[b.eat(l)],x,v)}else if(/[\^'"!~\/(\[{<]/.test(l)){if(l=="(")return J(b,1),y(b,C,[")"],"string");if(l=="[")return J(b,1),y(b,C,["]"],"string");if(l=="{")return J(b,1),y(b,C,["}"],"string");if(l=="<")return J(b,1),y(b,C,[">"],"string");if(/[\^'"!~\/]/.test(l))return y(b,C,[b.eat(l)],"string")}}}if(u=="m"){var l=j(b,-2);if(!(l&&/\w/.test(l))&&(l=b.eat(/[(\[{<\^'"!~\/]/),l)){if(/[\^'"!~\/]/.test(l))return y(b,C,[l],x,v);if(l=="(")return y(b,C,[")"],x,v);if(l=="[")return y(b,C,["]"],x,v);if(l=="{")return y(b,C,["}"],x,v);if(l=="<")return y(b,C,[">"],x,v)}}if(u=="s"){var l=/[\/>\]})\w]/.test(j(b,-2));if(!l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?y(b,C,["]","]"],x,v):l=="{"?y(b,C,["}","}"],x,v):l=="<"?y(b,C,[">",">"],x,v):l=="("?y(b,C,[")",")"],x,v):y(b,C,[l,l],x,v)}if(u=="y"){var l=/[\/>\]})\w]/.test(j(b,-2));if(!l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?y(b,C,["]","]"],x,v):l=="{"?y(b,C,["}","}"],x,v):l=="<"?y(b,C,[">",">"],x,v):l=="("?y(b,C,[")",")"],x,v):y(b,C,[l,l],x,v)}if(u=="t"){var l=/[\/>\]})\w]/.test(j(b,-2));if(!l&&(l=b.eat("r"),l&&(l=b.eat(/[(\[{<\^'"!~\/]/),l)))return l=="["?y(b,C,["]","]"],x,v):l=="{"?y(b,C,["}","}"],x,v):l=="<"?y(b,C,[">",">"],x,v):l=="("?y(b,C,[")",")"],x,v):y(b,C,[l,l],x,v)}if(u=="`")return y(b,C,[u],"variable-2");if(u=="/")return/~\s*$/.test($(b))?y(b,C,[u],x,v):"operator";if(u=="$"){var h=b.pos;if(b.eatWhile(/\d/)||b.eat("{")&&b.eatWhile(/\d/)&&b.eat("}"))return"variable-2";b.pos=h}if(/[$@%]/.test(u)){var h=b.pos;if(b.eat("^")&&b.eat(/[A-Z]/)||!/[@$%&]/.test(j(b,-2))&&b.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var l=b.current();if(d[l])return"variable-2"}b.pos=h}if(/[$@%&]/.test(u)&&(b.eatWhile(/[\w$]/)||b.eat("{")&&b.eatWhile(/[\w$]/)&&b.eat("}"))){var l=b.current();return d[l]?"variable-2":"variable"}if(u=="#"&&j(b,-2)!="$")return b.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(u)){var h=b.pos;if(b.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),d[b.current()])return"operator";b.pos=h}if(u=="_"&&b.pos==1){if(oe(b,6)=="_END__")return y(b,C,["\0"],"comment");if(oe(b,7)=="_DATA__")return y(b,C,["\0"],"variable-2");if(oe(b,7)=="_C__")return y(b,C,["\0"],"string")}if(/\w/.test(u)){var h=b.pos;if(j(b,-2)=="{"&&(j(b,0)=="}"||b.eatWhile(/\w/)&&j(b,0)=="}"))return"string";b.pos=h}if(/[A-Z]/.test(u)){var a=j(b,-2),h=b.pos;if(b.eatWhile(/[A-Z_]/),/[\da-z]/.test(j(b,0)))b.pos=h;else{var l=d[b.current()];return l?(l[1]&&(l=l[0]),a!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(u)){var a=j(b,-2);b.eatWhile(/\w/);var l=d[b.current()];return l?(l[1]&&(l=l[0]),a!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:m,chain:null,style:null,tail:null}},token:function(b,C){return(C.tokenize||m)(b,C)},lineComment:"#"}}),ee.registerHelper("wordChars","perl",/[\w$]/),ee.defineMIME("text/x-perl","perl");function j(d,x){return d.string.charAt(d.pos+(x||0))}function $(d,x){if(x){var v=d.pos-x;return d.string.substr(v>=0?v:0,x)}else return d.string.substr(0,d.pos-1)}function oe(d,x){var v=d.string.length,y=v-d.pos+1;return d.string.substr(d.pos,x&&x<v?x:y)}function J(d,x){var v=d.pos+x,y;v<=0?d.pos=0:v>=(y=d.string.length-1)?d.pos=y:d.pos=v}})});var el=Rr((Va,Qa)=>{(function(ee){typeof Va=="object"&&typeof Qa=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";function j(v){return new RegExp("^(("+v.join(")|(")+"))\\b")}var $=j(["and","or","not","is"]),oe=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],J=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];ee.registerHelper("hintWords","python",oe.concat(J));function d(v){return v.scopes[v.scopes.length-1]}ee.defineMode("python",function(v,y){for(var S="error",m=y.delimiters||y.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,b=[y.singleOperators,y.doubleOperators,y.doubleDelimiters,y.tripleDelimiters,y.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],C=0;C<b.length;C++)b[C]||b.splice(C--,1);var u=y.hangingIndent||v.indentUnit,h=oe,p=J;y.extra_keywords!=null&&(h=h.concat(y.extra_keywords)),y.extra_builtins!=null&&(p=p.concat(y.extra_builtins));var l=!(y.version&&Number(y.version)<3);if(l){var a=y.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;h=h.concat(["nonlocal","False","True","None","async","await"]),p=p.concat(["ascii","bytes","exec","print"]);var o=new RegExp(`^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|"{3}|['"]))`,"i")}else{var a=y.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;h=h.concat(["exec","print"]),p=p.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var o=new RegExp(`^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))`,"i")}var s=j(h),f=j(p);function _(U,W){var B=U.sol()&&W.lastToken!="\\";if(B&&(W.indent=U.indentation()),B&&d(W).type=="py"){var F=d(W).offset;if(U.eatSpace()){var X=U.indentation();return X>F?P(W):X<F&&k(U,W)&&U.peek()!="#"&&(W.errorToken=!0),null}else{var Z=L(U,W);return F>0&&k(U,W)&&(Z+=" "+S),Z}}return L(U,W)}function L(U,W,B){if(U.eatSpace())return null;if(!B&&U.match(/^#.*/))return"comment";if(U.match(/^[0-9\.]/,!1)){var F=!1;if(U.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(F=!0),U.match(/^[\d_]+\.\d*/)&&(F=!0),U.match(/^\.\d+/)&&(F=!0),F)return U.eat(/J/i),"number";var X=!1;if(U.match(/^0x[0-9a-f_]+/i)&&(X=!0),U.match(/^0b[01_]+/i)&&(X=!0),U.match(/^0o[0-7_]+/i)&&(X=!0),U.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(U.eat(/J/i),X=!0),U.match(/^0(?![\dx])/i)&&(X=!0),X)return U.eat(/L/i),"number"}if(U.match(o)){var Z=U.current().toLowerCase().indexOf("f")!==-1;return Z?(W.tokenize=A(U.current(),W.tokenize),W.tokenize(U,W)):(W.tokenize=I(U.current(),W.tokenize),W.tokenize(U,W))}for(var se=0;se<b.length;se++)if(U.match(b[se]))return"operator";return U.match(m)?"punctuation":W.lastToken=="."&&U.match(a)?"property":U.match(s)||U.match($)?"keyword":U.match(f)?"builtin":U.match(/^(self|cls)\b/)?"variable-2":U.match(a)?W.lastToken=="def"||W.lastToken=="class"?"def":"variable":(U.next(),B?null:S)}function A(U,W){for(;"rubf".indexOf(U.charAt(0).toLowerCase())>=0;)U=U.substr(1);var B=U.length==1,F="string";function X(se){return function(ae,me){var we=L(ae,me,!0);return we=="punctuation"&&(ae.current()=="{"?me.tokenize=X(se+1):ae.current()=="}"&&(se>1?me.tokenize=X(se-1):me.tokenize=Z)),we}}function Z(se,ae){for(;!se.eol();)if(se.eatWhile(/[^'"\{\}\\]/),se.eat("\\")){if(se.next(),B&&se.eol())return F}else{if(se.match(U))return ae.tokenize=W,F;if(se.match("{{"))return F;if(se.match("{",!1))return ae.tokenize=X(0),se.current()?F:ae.tokenize(se,ae);if(se.match("}}"))return F;if(se.match("}"))return S;se.eat(/['"]/)}if(B){if(y.singleLineStringErrors)return S;ae.tokenize=W}return F}return Z.isString=!0,Z}function I(U,W){for(;"rubf".indexOf(U.charAt(0).toLowerCase())>=0;)U=U.substr(1);var B=U.length==1,F="string";function X(Z,se){for(;!Z.eol();)if(Z.eatWhile(/[^'"\\]/),Z.eat("\\")){if(Z.next(),B&&Z.eol())return F}else{if(Z.match(U))return se.tokenize=W,F;Z.eat(/['"]/)}if(B){if(y.singleLineStringErrors)return S;se.tokenize=W}return F}return X.isString=!0,X}function P(U){for(;d(U).type!="py";)U.scopes.pop();U.scopes.push({offset:d(U).offset+v.indentUnit,type:"py",align:null})}function M(U,W,B){var F=U.match(/^[\s\[\{\(]*(?:#|$)/,!1)?null:U.column()+1;W.scopes.push({offset:W.indent+u,type:B,align:F})}function k(U,W){for(var B=U.indentation();W.scopes.length>1&&d(W).offset>B;){if(d(W).type!="py")return!0;W.scopes.pop()}return d(W).offset!=B}function D(U,W){U.sol()&&(W.beginningOfLine=!0,W.dedent=!1);var B=W.tokenize(U,W),F=U.current();if(W.beginningOfLine&&F=="@")return U.match(a,!1)?"meta":l?"operator":S;if(/\S/.test(F)&&(W.beginningOfLine=!1),(B=="variable"||B=="builtin")&&W.lastToken=="meta"&&(B="meta"),(F=="pass"||F=="return")&&(W.dedent=!0),F=="lambda"&&(W.lambda=!0),F==":"&&!W.lambda&&d(W).type=="py"&&U.match(/^\s*(?:#|$)/,!1)&&P(W),F.length==1&&!/string|comment/.test(B)){var X="[({".indexOf(F);if(X!=-1&&M(U,W,"])}".slice(X,X+1)),X="])}".indexOf(F),X!=-1)if(d(W).type==F)W.indent=W.scopes.pop().offset-u;else return S}return W.dedent&&U.eol()&&d(W).type=="py"&&W.scopes.length>1&&W.scopes.pop(),B}var E={startState:function(U){return{tokenize:_,scopes:[{offset:U||0,type:"py",align:null}],indent:U||0,lastToken:null,lambda:!1,dedent:0}},token:function(U,W){var B=W.errorToken;B&&(W.errorToken=!1);var F=D(U,W);return F&&F!="comment"&&(W.lastToken=F=="keyword"||F=="punctuation"?U.current():F),F=="punctuation"&&(F=null),U.eol()&&W.lambda&&(W.lambda=!1),B?F+" "+S:F},indent:function(U,W){if(U.tokenize!=_)return U.tokenize.isString?ee.Pass:0;var B=d(U),F=B.type==W.charAt(0)||B.type=="py"&&!U.dedent&&/^(else:|elif |except |finally:)/.test(W);return B.align!=null?B.align-(F?1:0):B.offset-(F?u:0)},electricInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,closeBrackets:{triples:`'"`},lineComment:"#",fold:"indent"};return E}),ee.defineMIME("text/x-python","python");var x=function(v){return v.split(" ")};ee.defineMIME("text/x-cython",{name:"python",extra_keywords:x("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})})});var ol=Rr((il,nl)=>{(function(ee){typeof il=="object"&&typeof nl=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){"use strict";function j(y){for(var S={},m=0,b=y.length;m<b;++m)S[y[m]]=!0;return S}var $=["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"],oe=j($),J=j(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),d=j(["end","until"]),x={"[":"]","{":"}","(":")"},v={"]":"[","}":"{",")":"("};ee.defineMode("ruby",function(y){var S;function m(o,s,f){return f.tokenize.push(o),o(s,f)}function b(o,s){if(o.sol()&&o.match("=begin")&&o.eol())return s.tokenize.push(a),"comment";if(o.eatSpace())return null;var f=o.next(),_;if(f=="`"||f=="'"||f=='"')return m(p(f,"string",f=='"'||f=="`"),o,s);if(f=="/")return C(o)?m(p(f,"string-2",!0),o,s):"operator";if(f=="%"){var L="string",A=!0;o.eat("s")?L="atom":o.eat(/[WQ]/)?L="string":o.eat(/[r]/)?L="string-2":o.eat(/[wxq]/)&&(L="string",A=!1);var I=o.eat(/[^\w\s=]/);return I?(x.propertyIsEnumerable(I)&&(I=x[I]),m(p(I,L,A,!0),o,s)):"operator"}else{if(f=="#")return o.skipToEnd(),"comment";if(f=="<"&&(_=o.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return m(l(_[2],_[1]),o,s);if(f=="0")return o.eat("x")?o.eatWhile(/[\da-fA-F]/):o.eat("b")?o.eatWhile(/[01]/):o.eatWhile(/[0-7]/),"number";if(/\d/.test(f))return o.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(f=="?"){for(;o.match(/^\\[CM]-/););return o.eat("\\")?o.eatWhile(/\w/):o.next(),"string"}else{if(f==":")return o.eat("'")?m(p("'","atom",!1),o,s):o.eat('"')?m(p('"',"atom",!0),o,s):o.eat(/[\<\>]/)?(o.eat(/[\<\>]/),"atom"):o.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":o.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(o.eatWhile(/[\w$\xa1-\uffff]/),o.eat(/[\?\!\=]/),"atom"):"operator";if(f=="@"&&o.match(/^@?[a-zA-Z_\xa1-\uffff]/))return o.eat("@"),o.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if(f=="$")return o.eat(/[a-zA-Z_]/)?o.eatWhile(/[\w]/):o.eat(/\d/)?o.eat(/\d/):o.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(f))return o.eatWhile(/[\w\xa1-\uffff]/),o.eat(/[\?\!]/),o.eat(":")?"atom":"ident";if(f=="|"&&(s.varList||s.lastTok=="{"||s.lastTok=="do"))return S="|",null;if(/[\(\)\[\]{}\\;]/.test(f))return S=f,null;if(f=="-"&&o.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(f)){var P=o.eatWhile(/[=+\-\/*:\.^%<>~|]/);return f=="."&&!P&&(S="."),"operator"}else return null}}}function C(o){for(var s=o.pos,f=0,_,L=!1,A=!1;(_=o.next())!=null;)if(A)A=!1;else{if("[{(".indexOf(_)>-1)f++;else if("]})".indexOf(_)>-1){if(f--,f<0)break}else if(_=="/"&&f==0){L=!0;break}A=_=="\\"}return o.backUp(o.pos-s),L}function u(o){return o||(o=1),function(s,f){if(s.peek()=="}"){if(o==1)return f.tokenize.pop(),f.tokenize[f.tokenize.length-1](s,f);f.tokenize[f.tokenize.length-1]=u(o-1)}else s.peek()=="{"&&(f.tokenize[f.tokenize.length-1]=u(o+1));return b(s,f)}}function h(){var o=!1;return function(s,f){return o?(f.tokenize.pop(),f.tokenize[f.tokenize.length-1](s,f)):(o=!0,b(s,f))}}function p(o,s,f,_){return function(L,A){var I=!1,P;for(A.context.type==="read-quoted-paused"&&(A.context=A.context.prev,L.eat("}"));(P=L.next())!=null;){if(P==o&&(_||!I)){A.tokenize.pop();break}if(f&&P=="#"&&!I){if(L.eat("{")){o=="}"&&(A.context={prev:A.context,type:"read-quoted-paused"}),A.tokenize.push(u());break}else if(/[@\$]/.test(L.peek())){A.tokenize.push(h());break}}I=!I&&P=="\\"}return s}}function l(o,s){return function(f,_){return s&&f.eatSpace(),f.match(o)?_.tokenize.pop():f.skipToEnd(),"string"}}function a(o,s){return o.sol()&&o.match("=end")&&o.eol()&&s.tokenize.pop(),o.skipToEnd(),"comment"}return{startState:function(){return{tokenize:[b],indented:0,context:{type:"top",indented:-y.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(o,s){S=null,o.sol()&&(s.indented=o.indentation());var f=s.tokenize[s.tokenize.length-1](o,s),_,L=S;if(f=="ident"){var A=o.current();f=s.lastTok=="."?"property":oe.propertyIsEnumerable(o.current())?"keyword":/^[A-Z]/.test(A)?"tag":s.lastTok=="def"||s.lastTok=="class"||s.varList?"def":"variable",f=="keyword"&&(L=A,J.propertyIsEnumerable(A)?_="indent":d.propertyIsEnumerable(A)?_="dedent":((A=="if"||A=="unless")&&o.column()==o.indentation()||A=="do"&&s.context.indented<s.indented)&&(_="indent"))}return(S||f&&f!="comment")&&(s.lastTok=L),S=="|"&&(s.varList=!s.varList),_=="indent"||/[\(\[\{]/.test(S)?s.context={prev:s.context,type:S||f,indented:s.indented}:(_=="dedent"||/[\)\]\}]/.test(S))&&s.context.prev&&(s.context=s.context.prev),o.eol()&&(s.continuedLine=S=="\\"||f=="operator"),f},indent:function(o,s){if(o.tokenize[o.tokenize.length-1]!=b)return ee.Pass;var f=s&&s.charAt(0),_=o.context,L=_.type==v[f]||_.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(s);return _.indented+(L?0:y.indentUnit)+(o.continuedLine?y.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#",fold:"indent"}}),ee.defineMIME("text/x-ruby","ruby"),ee.registerHelper("hintWords","ruby",$)})});var ul=Rr((io,$o)=>{(function(ee,j){if(typeof io=="object"&&typeof $o=="object")$o.exports=j();else if(typeof define=="function"&&define.amd)define([],j);else{var $=j();for(var oe in $)(typeof io=="object"?io:ee)[oe]=$[oe]}})(self,function(){return(()=>{"use strict";var ee={4567:function(J,d,x){var v,y=this&&this.__extends||(v=function(a,o){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,f){s.__proto__=f}||function(s,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(s[_]=f[_])},v(a,o)},function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=a}v(a,o),a.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)});Object.defineProperty(d,"__esModule",{value:!0}),d.AccessibilityManager=void 0;var S=x(9042),m=x(6114),b=x(9924),C=x(3656),u=x(844),h=x(5596),p=x(9631),l=function(a){function o(s,f){var _=a.call(this)||this;_._terminal=s,_._renderService=f,_._liveRegionLineCount=0,_._charsToConsume=[],_._charsToAnnounce="",_._accessibilityTreeRoot=document.createElement("div"),_._accessibilityTreeRoot.setAttribute("role","document"),_._accessibilityTreeRoot.classList.add("xterm-accessibility"),_._accessibilityTreeRoot.tabIndex=0,_._rowContainer=document.createElement("div"),_._rowContainer.setAttribute("role","list"),_._rowContainer.classList.add("xterm-accessibility-tree"),_._rowElements=[];for(var L=0;L<_._terminal.rows;L++)_._rowElements[L]=_._createAccessibilityTreeNode(),_._rowContainer.appendChild(_._rowElements[L]);if(_._topBoundaryFocusListener=function(A){return _._onBoundaryFocus(A,0)},_._bottomBoundaryFocusListener=function(A){return _._onBoundaryFocus(A,1)},_._rowElements[0].addEventListener("focus",_._topBoundaryFocusListener),_._rowElements[_._rowElements.length-1].addEventListener("focus",_._bottomBoundaryFocusListener),_._refreshRowsDimensions(),_._accessibilityTreeRoot.appendChild(_._rowContainer),_._renderRowsDebouncer=new b.TimeBasedDebouncer(_._renderRows.bind(_)),_._refreshRows(),_._liveRegion=document.createElement("div"),_._liveRegion.classList.add("live-region"),_._liveRegion.setAttribute("aria-live","assertive"),_._accessibilityTreeRoot.appendChild(_._liveRegion),!_._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return _._terminal.element.insertAdjacentElement("afterbegin",_._accessibilityTreeRoot),_.register(_._renderRowsDebouncer),_.register(_._terminal.onResize(function(A){return _._onResize(A.rows)})),_.register(_._terminal.onRender(function(A){return _._refreshRows(A.start,A.end)})),_.register(_._terminal.onScroll(function(){return _._refreshRows()})),_.register(_._terminal.onA11yChar(function(A){return _._onChar(A)})),_.register(_._terminal.onLineFeed(function(){return _._onChar(`
`)})),_.register(_._terminal.onA11yTab(function(A){return _._onTab(A)})),_.register(_._terminal.onKey(function(A){return _._onKey(A.key)})),_.register(_._terminal.onBlur(function(){return _._clearLiveRegion()})),_.register(_._renderService.onDimensionsChange(function(){return _._refreshRowsDimensions()})),_._screenDprMonitor=new h.ScreenDprMonitor,_.register(_._screenDprMonitor),_._screenDprMonitor.setListener(function(){return _._refreshRowsDimensions()}),_.register((0,C.addDisposableDomListener)(window,"resize",function(){return _._refreshRowsDimensions()})),_}return y(o,a),o.prototype.dispose=function(){a.prototype.dispose.call(this),(0,p.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},o.prototype._onBoundaryFocus=function(s,f){var _=s.target,L=this._rowElements[f===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")!==(f===0?"1":""+this._terminal.buffer.lines.length)&&s.relatedTarget===L){var A,I;if(f===0?(A=_,I=this._rowElements.pop(),this._rowContainer.removeChild(I)):(A=this._rowElements.shift(),I=_,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),I.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){var P=this._createAccessibilityTreeNode();this._rowElements.unshift(P),this._rowContainer.insertAdjacentElement("afterbegin",P)}else P=this._createAccessibilityTreeNode(),this._rowElements.push(P),this._rowContainer.appendChild(P);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}},o.prototype._onResize=function(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},o.prototype._createAccessibilityTreeNode=function(){var s=document.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s},o.prototype._onTab=function(s){for(var f=0;f<s;f++)this._onChar(" ")},o.prototype._onChar=function(s){var f=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=S.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){f._accessibilityTreeRoot.appendChild(f._liveRegion)},0))},o.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,m.isMac&&(0,p.removeElementFromParent)(this._liveRegion)},o.prototype._onKey=function(s){this._clearLiveRegion(),this._charsToConsume.push(s)},o.prototype._refreshRows=function(s,f){this._renderRowsDebouncer.refresh(s,f,this._terminal.rows)},o.prototype._renderRows=function(s,f){for(var _=this._terminal.buffer,L=_.lines.length.toString(),A=s;A<=f;A++){var I=_.translateBufferLineToString(_.ydisp+A,!0),P=(_.ydisp+A+1).toString(),M=this._rowElements[A];M&&(I.length===0?M.innerText="\xA0":M.textContent=I,M.setAttribute("aria-posinset",P),M.setAttribute("aria-setsize",L))}this._announceCharacters()},o.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}},o.prototype._refreshRowDimensions=function(s){s.style.height=this._renderService.dimensions.actualCellHeight+"px"},o.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},o}(u.Disposable);d.AccessibilityManager=l},3614:(J,d)=>{function x(m){return m.replace(/\r?\n/g,"\r")}function v(m,b){return b?"\x1B[200~"+m+"\x1B[201~":m}function y(m,b,C){m=v(m=x(m),C.decPrivateModes.bracketedPasteMode),C.triggerDataEvent(m,!0),b.value=""}function S(m,b,C){var u=C.getBoundingClientRect(),h=m.clientX-u.left-10,p=m.clientY-u.top-10;b.style.width="20px",b.style.height="20px",b.style.left=h+"px",b.style.top=p+"px",b.style.zIndex="1000",b.focus()}Object.defineProperty(d,"__esModule",{value:!0}),d.rightClickHandler=d.moveTextAreaUnderMouseCursor=d.paste=d.handlePasteEvent=d.copyHandler=d.bracketTextForPaste=d.prepareTextForTerminal=void 0,d.prepareTextForTerminal=x,d.bracketTextForPaste=v,d.copyHandler=function(m,b){m.clipboardData&&m.clipboardData.setData("text/plain",b.selectionText),m.preventDefault()},d.handlePasteEvent=function(m,b,C){m.stopPropagation(),m.clipboardData&&y(m.clipboardData.getData("text/plain"),b,C)},d.paste=y,d.moveTextAreaUnderMouseCursor=S,d.rightClickHandler=function(m,b,C,u,h){S(m,b,C),h&&u.rightClickSelect(m),b.value=u.selectionText,b.select()}},4774:(J,d)=>{var x,v,y,S;function m(C){var u=C.toString(16);return u.length<2?"0"+u:u}function b(C,u){return C<u?(u+.05)/(C+.05):(C+.05)/(u+.05)}Object.defineProperty(d,"__esModule",{value:!0}),d.contrastRatio=d.toPaddedHex=d.rgba=d.rgb=d.css=d.color=d.channels=void 0,function(C){C.toCss=function(u,h,p,l){return l!==void 0?"#"+m(u)+m(h)+m(p)+m(l):"#"+m(u)+m(h)+m(p)},C.toRgba=function(u,h,p,l){return l===void 0&&(l=255),(u<<24|h<<16|p<<8|l)>>>0}}(x=d.channels||(d.channels={})),(v=d.color||(d.color={})).blend=function(C,u){var h=(255&u.rgba)/255;if(h===1)return{css:u.css,rgba:u.rgba};var p=u.rgba>>24&255,l=u.rgba>>16&255,a=u.rgba>>8&255,o=C.rgba>>24&255,s=C.rgba>>16&255,f=C.rgba>>8&255,_=o+Math.round((p-o)*h),L=s+Math.round((l-s)*h),A=f+Math.round((a-f)*h);return{css:x.toCss(_,L,A),rgba:x.toRgba(_,L,A)}},v.isOpaque=function(C){return(255&C.rgba)==255},v.ensureContrastRatio=function(C,u,h){var p=S.ensureContrastRatio(C.rgba,u.rgba,h);if(p)return S.toColor(p>>24&255,p>>16&255,p>>8&255)},v.opaque=function(C){var u=(255|C.rgba)>>>0,h=S.toChannels(u),p=h[0],l=h[1],a=h[2];return{css:x.toCss(p,l,a),rgba:u}},v.opacity=function(C,u){var h=Math.round(255*u),p=S.toChannels(C.rgba),l=p[0],a=p[1],o=p[2];return{css:x.toCss(l,a,o,h),rgba:x.toRgba(l,a,o,h)}},v.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]},(d.css||(d.css={})).toColor=function(C){switch(C.length){case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(C){function u(h,p,l){var a=h/255,o=p/255,s=l/255;return .2126*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}C.relativeLuminance=function(h){return u(h>>16&255,h>>8&255,255&h)},C.relativeLuminance2=u}(y=d.rgb||(d.rgb={})),function(C){function u(p,l,a){for(var o=p>>24&255,s=p>>16&255,f=p>>8&255,_=l>>24&255,L=l>>16&255,A=l>>8&255,I=b(y.relativeLuminance2(_,A,L),y.relativeLuminance2(o,s,f));I<a&&(_>0||L>0||A>0);)_-=Math.max(0,Math.ceil(.1*_)),L-=Math.max(0,Math.ceil(.1*L)),A-=Math.max(0,Math.ceil(.1*A)),I=b(y.relativeLuminance2(_,A,L),y.relativeLuminance2(o,s,f));return(_<<24|L<<16|A<<8|255)>>>0}function h(p,l,a){for(var o=p>>24&255,s=p>>16&255,f=p>>8&255,_=l>>24&255,L=l>>16&255,A=l>>8&255,I=b(y.relativeLuminance2(_,A,L),y.relativeLuminance2(o,s,f));I<a&&(_<255||L<255||A<255);)_=Math.min(255,_+Math.ceil(.1*(255-_))),L=Math.min(255,L+Math.ceil(.1*(255-L))),A=Math.min(255,A+Math.ceil(.1*(255-A))),I=b(y.relativeLuminance2(_,A,L),y.relativeLuminance2(o,s,f));return(_<<24|L<<16|A<<8|255)>>>0}C.ensureContrastRatio=function(p,l,a){var o=y.relativeLuminance(p>>8),s=y.relativeLuminance(l>>8);if(b(o,s)<a)return s<o?u(p,l,a):h(p,l,a)},C.reduceLuminance=u,C.increaseLuminance=h,C.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},C.toColor=function(p,l,a){return{css:x.toCss(p,l,a),rgba:x.toRgba(p,l,a)}}}(S=d.rgba||(d.rgba={})),d.toPaddedHex=m,d.contrastRatio=b},7239:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorContrastCache=void 0;var x=function(){function v(){this._color={},this._rgba={}}return v.prototype.clear=function(){this._color={},this._rgba={}},v.prototype.setCss=function(y,S,m){this._rgba[y]||(this._rgba[y]={}),this._rgba[y][S]=m},v.prototype.getCss=function(y,S){return this._rgba[y]?this._rgba[y][S]:void 0},v.prototype.setColor=function(y,S,m){this._color[y]||(this._color[y]={}),this._color[y][S]=m},v.prototype.getColor=function(y,S){return this._color[y]?this._color[y][S]:void 0},v}();d.ColorContrastCache=x},5680:function(J,d,x){var v=this&&this.__spreadArray||function(l,a,o){if(o||arguments.length===2)for(var s,f=0,_=a.length;f<_;f++)!s&&f in a||(s||(s=Array.prototype.slice.call(a,0,f)),s[f]=a[f]);return l.concat(s||Array.prototype.slice.call(a))};Object.defineProperty(d,"__esModule",{value:!0}),d.ColorManager=d.DEFAULT_ANSI_COLORS=void 0;var y=x(4774),S=x(7239),m=y.css.toColor("#ffffff"),b=y.css.toColor("#000000"),C=y.css.toColor("#ffffff"),u=y.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};d.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var l=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],a=[0,95,135,175,215,255],o=0;o<216;o++){var s=a[o/36%6|0],f=a[o/6%6|0],_=a[o%6];l.push({css:y.channels.toCss(s,f,_),rgba:y.channels.toRgba(s,f,_)})}for(o=0;o<24;o++){var L=8+10*o;l.push({css:y.channels.toCss(L,L,L),rgba:y.channels.toRgba(L,L,L)})}return l}());var p=function(){function l(a,o){this.allowTransparency=o;var s=a.createElement("canvas");s.width=1,s.height=1;var f=s.getContext("2d");if(!f)throw new Error("Could not get rendering context");this._ctx=f,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new S.ColorContrastCache,this.colors={foreground:m,background:b,cursor:C,cursorAccent:u,selectionTransparent:h,selectionOpaque:y.color.blend(b,h),ansi:d.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return l.prototype.onOptionsChange=function(a){a==="minimumContrastRatio"&&this._contrastCache.clear()},l.prototype.setTheme=function(a){a===void 0&&(a={}),this.colors.foreground=this._parseColor(a.foreground,m),this.colors.background=this._parseColor(a.background,b),this.colors.cursor=this._parseColor(a.cursor,C,!0),this.colors.cursorAccent=this._parseColor(a.cursorAccent,u,!0),this.colors.selectionTransparent=this._parseColor(a.selection,h,!0),this.colors.selectionOpaque=y.color.blend(this.colors.background,this.colors.selectionTransparent),y.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=y.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(a.black,d.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(a.red,d.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(a.green,d.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(a.yellow,d.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(a.blue,d.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(a.magenta,d.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(a.cyan,d.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(a.white,d.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(a.brightBlack,d.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(a.brightRed,d.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(a.brightGreen,d.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(a.brightYellow,d.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(a.brightBlue,d.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(a.brightMagenta,d.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(a.brightCyan,d.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(a.brightWhite,d.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},l.prototype.restoreColor=function(a){if(a!==void 0)switch(a){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[a]=this._restoreColors.ansi[a]}else for(var o=0;o<this._restoreColors.ansi.length;++o)this.colors.ansi[o]=this._restoreColors.ansi[o]},l.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:v([],this.colors.ansi,!0)}},l.prototype._parseColor=function(a,o,s){if(s===void 0&&(s=this.allowTransparency),a===void 0)return o;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=a,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+a+" is invalid using fallback "+o.css),o;this._ctx.fillRect(0,0,1,1);var f=this._ctx.getImageData(0,0,1,1).data;if(f[3]!==255){if(!s)return console.warn("Color: "+a+" is using transparency, but allowTransparency is false. Using fallback "+o.css+"."),o;var _=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(k){return Number(k)}),L=_[0],A=_[1],I=_[2],P=_[3],M=Math.round(255*P);return{rgba:y.channels.toRgba(L,A,I,M),css:a}}return{css:this._ctx.fillStyle,rgba:y.channels.toRgba(f[0],f[1],f[2],f[3])}},l}();d.ColorManager=p},9631:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.removeElementFromParent=void 0,d.removeElementFromParent=function(){for(var x,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];for(var S=0,m=v;S<m.length;S++){var b=m[S];(x=b==null?void 0:b.parentElement)===null||x===void 0||x.removeChild(b)}}},3656:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.addDisposableDomListener=void 0,d.addDisposableDomListener=function(x,v,y,S){x.addEventListener(v,y,S);var m=!1;return{dispose:function(){m||(m=!0,x.removeEventListener(v,y,S))}}}},3551:function(J,d,x){var v=this&&this.__decorate||function(u,h,p,l){var a,o=arguments.length,s=o<3?h:l===null?l=Object.getOwnPropertyDescriptor(h,p):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,h,p,l);else for(var f=u.length-1;f>=0;f--)(a=u[f])&&(s=(o<3?a(s):o>3?a(h,p,s):a(h,p))||s);return o>3&&s&&Object.defineProperty(h,p,s),s},y=this&&this.__param||function(u,h){return function(p,l){h(p,l,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseZone=d.Linkifier=void 0;var S=x(8460),m=x(2585),b=function(){function u(h,p,l){this._bufferService=h,this._logService=p,this._unicodeService=l,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new S.EventEmitter,this._onHideLinkUnderline=new S.EventEmitter,this._onLinkTooltip=new S.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(u.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),u.prototype.attachToDom=function(h,p){this._element=h,this._mouseZoneManager=p},u.prototype.linkifyRows=function(h,p){var l=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=p):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,p)),this._mouseZoneManager.clearAll(h,p),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return l._linkifyRows()},u._timeBeforeLatency))},u.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var p=h.ydisp+this._rowsToLinkify.start;if(!(p>=h.lines.length)){for(var l=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,a=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,p,l,a,a);o.hasNext();)for(var s=o.next(),f=0;f<this._linkMatchers.length;f++)this._doLinkifyRow(s.range.first,s.content,this._linkMatchers[f]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},u.prototype.registerLinkMatcher=function(h,p,l){if(l===void 0&&(l={}),!p)throw new Error("handler must be defined");var a={id:this._nextLinkMatcherId++,regex:h,handler:p,matchIndex:l.matchIndex,validationCallback:l.validationCallback,hoverTooltipCallback:l.tooltipCallback,hoverLeaveCallback:l.leaveCallback,willLinkActivate:l.willLinkActivate,priority:l.priority||0};return this._addLinkMatcherToList(a),a.id},u.prototype._addLinkMatcherToList=function(h){if(this._linkMatchers.length!==0){for(var p=this._linkMatchers.length-1;p>=0;p--)if(h.priority<=this._linkMatchers[p].priority)return void this._linkMatchers.splice(p+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},u.prototype.deregisterLinkMatcher=function(h){for(var p=0;p<this._linkMatchers.length;p++)if(this._linkMatchers[p].id===h)return this._linkMatchers.splice(p,1),!0;return!1},u.prototype._doLinkifyRow=function(h,p,l){for(var a,o=this,s=new RegExp(l.regex.source,(l.regex.flags||"")+"g"),f=-1,_=function(){var A=a[typeof l.matchIndex!="number"?0:l.matchIndex];if(!A)return L._logService.debug("match found without corresponding matchIndex",a,l),"break";if(f=p.indexOf(A,f+1),s.lastIndex=f+A.length,f<0)return"break";var I=L._bufferService.buffer.stringIndexToBufferIndex(h,f);if(I[0]<0)return"break";var P=L._bufferService.buffer.lines.get(I[0]);if(!P)return"break";var M=P.getFg(I[1]),k=M?M>>9&511:void 0;l.validationCallback?l.validationCallback(A,function(D){o._rowsTimeoutId||D&&o._addLink(I[1],I[0]-o._bufferService.buffer.ydisp,A,l,k)}):L._addLink(I[1],I[0]-L._bufferService.buffer.ydisp,A,l,k)},L=this;(a=s.exec(p))!==null&&_()!=="break";);},u.prototype._addLink=function(h,p,l,a,o){var s=this;if(this._mouseZoneManager&&this._element){var f=this._unicodeService.getStringCellWidth(l),_=h%this._bufferService.cols,L=p+Math.floor(h/this._bufferService.cols),A=(_+f)%this._bufferService.cols,I=L+Math.floor((_+f)/this._bufferService.cols);A===0&&(A=this._bufferService.cols,I--),this._mouseZoneManager.add(new C(_+1,L+1,A+1,I+1,function(P){if(a.handler)return a.handler(P,l);var M=window.open();M?(M.opener=null,M.location.href=l):console.warn("Opening link blocked as opener could not be cleared")},function(){s._onShowLinkUnderline.fire(s._createLinkHoverEvent(_,L,A,I,o)),s._element.classList.add("xterm-cursor-pointer")},function(P){s._onLinkTooltip.fire(s._createLinkHoverEvent(_,L,A,I,o)),a.hoverTooltipCallback&&a.hoverTooltipCallback(P,l,{start:{x:_,y:L},end:{x:A,y:I}})},function(){s._onHideLinkUnderline.fire(s._createLinkHoverEvent(_,L,A,I,o)),s._element.classList.remove("xterm-cursor-pointer"),a.hoverLeaveCallback&&a.hoverLeaveCallback()},function(P){return!a.willLinkActivate||a.willLinkActivate(P,l)}))}},u.prototype._createLinkHoverEvent=function(h,p,l,a,o){return{x1:h,y1:p,x2:l,y2:a,cols:this._bufferService.cols,fg:o}},u._timeBeforeLatency=200,u=v([y(0,m.IBufferService),y(1,m.ILogService),y(2,m.IUnicodeService)],u)}();d.Linkifier=b;var C=function(u,h,p,l,a,o,s,f,_){this.x1=u,this.y1=h,this.x2=p,this.y2=l,this.clickCallback=a,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=f,this.willLinkActivate=_};d.MouseZone=C},6465:function(J,d,x){var v,y=this&&this.__extends||(v=function(l,a){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},v(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=l}v(l,a),l.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),S=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},m=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Linkifier2=void 0;var b=x(2585),C=x(8460),u=x(844),h=x(3656),p=function(l){function a(o){var s=l.call(this)||this;return s._bufferService=o,s._linkProviders=[],s._linkCacheDisposables=[],s._isMouseOut=!0,s._activeLine=-1,s._onShowLinkUnderline=s.register(new C.EventEmitter),s._onHideLinkUnderline=s.register(new C.EventEmitter),s.register((0,u.getDisposeArrayDisposable)(s._linkCacheDisposables)),s}return y(a,l),Object.defineProperty(a.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),a.prototype.registerLinkProvider=function(o){var s=this;return this._linkProviders.push(o),{dispose:function(){var f=s._linkProviders.indexOf(o);f!==-1&&s._linkProviders.splice(f,1)}}},a.prototype.attachToDom=function(o,s,f){var _=this;this._element=o,this._mouseService=s,this._renderService=f,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",function(){_._isMouseOut=!0,_._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},a.prototype._onMouseMove=function(o){if(this._lastMouseEvent=o,this._element&&this._mouseService){var s=this._positionFromMouseEvent(o,this._element,this._mouseService);if(s){this._isMouseOut=!1;for(var f=o.composedPath(),_=0;_<f.length;_++){var L=f[_];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._onHover(s),this._lastBufferCell=s)}}},a.prototype._onHover=function(o){if(this._activeLine!==o.y)return this._clearCurrentLink(),void this._askForLink(o,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))},a.prototype._askForLink=function(o,s){var f,_=this;this._activeProviderReplies&&s||((f=this._activeProviderReplies)===null||f===void 0||f.forEach(function(A){A==null||A.forEach(function(I){I.link.dispose&&I.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);var L=!1;this._linkProviders.forEach(function(A,I){var P;s?((P=_._activeProviderReplies)===null||P===void 0?void 0:P.get(I))&&(L=_._checkLinkProviderResult(I,o,L)):A.provideLinks(o.y,function(M){var k,D;if(!_._isMouseOut){var E=M==null?void 0:M.map(function(U){return{link:U}});(k=_._activeProviderReplies)===null||k===void 0||k.set(I,E),L=_._checkLinkProviderResult(I,o,L),((D=_._activeProviderReplies)===null||D===void 0?void 0:D.size)===_._linkProviders.length&&_._removeIntersectingLinks(o.y,_._activeProviderReplies)}})})},a.prototype._removeIntersectingLinks=function(o,s){for(var f=new Set,_=0;_<s.size;_++){var L=s.get(_);if(L)for(var A=0;A<L.length;A++)for(var I=L[A],P=I.link.range.start.y<o?0:I.link.range.start.x,M=I.link.range.end.y>o?this._bufferService.cols:I.link.range.end.x,k=P;k<=M;k++){if(f.has(k)){L.splice(A--,1);break}f.add(k)}}},a.prototype._checkLinkProviderResult=function(o,s,f){var _,L=this;if(!this._activeProviderReplies)return f;for(var A=this._activeProviderReplies.get(o),I=!1,P=0;P<o;P++)this._activeProviderReplies.has(P)&&!this._activeProviderReplies.get(P)||(I=!0);if(!I&&A){var M=A.find(function(D){return L._linkAtPosition(D.link,s)});M&&(f=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(P=0;P<this._activeProviderReplies.size;P++){var k=(_=this._activeProviderReplies.get(P))===null||_===void 0?void 0:_.find(function(D){return L._linkAtPosition(D.link,s)});if(k){f=!0,this._handleNewLink(k);break}}return f},a.prototype._onClick=function(o){if(this._element&&this._mouseService&&this._currentLink){var s=this._positionFromMouseEvent(o,this._element,this._mouseService);s&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(o,this._currentLink.link.text)}},a.prototype._clearCurrentLink=function(o,s){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!s||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))},a.prototype._handleNewLink=function(o){var s=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(o.link,f)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:function(){var _,L;return(L=(_=s._currentLink)===null||_===void 0?void 0:_.state)===null||L===void 0?void 0:L.decorations.pointerCursor},set:function(_){var L,A;((L=s._currentLink)===null||L===void 0?void 0:L.state)&&s._currentLink.state.decorations.pointerCursor!==_&&(s._currentLink.state.decorations.pointerCursor=_,s._currentLink.state.isHovered&&((A=s._element)===null||A===void 0||A.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:function(){var _,L;return(L=(_=s._currentLink)===null||_===void 0?void 0:_.state)===null||L===void 0?void 0:L.decorations.underline},set:function(_){var L,A,I;((L=s._currentLink)===null||L===void 0?void 0:L.state)&&((I=(A=s._currentLink)===null||A===void 0?void 0:A.state)===null||I===void 0?void 0:I.decorations.underline)!==_&&(s._currentLink.state.decorations.underline=_,s._currentLink.state.isHovered&&s._fireUnderlineEvent(o.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(_){var L=_.start===0?0:_.start+1+s._bufferService.buffer.ydisp;s._clearCurrentLink(L,_.end+1+s._bufferService.buffer.ydisp)})))}},a.prototype._linkHover=function(o,s,f){var _;((_=this._currentLink)===null||_===void 0?void 0:_.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(f,s.text)},a.prototype._fireUnderlineEvent=function(o,s){var f=o.range,_=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-_-1,f.end.x,f.end.y-_-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)},a.prototype._linkLeave=function(o,s,f){var _;((_=this._currentLink)===null||_===void 0?void 0:_.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(f,s.text)},a.prototype._linkAtPosition=function(o,s){var f=o.range.start.y===o.range.end.y,_=o.range.start.y<s.y,L=o.range.end.y>s.y;return(f&&o.range.start.x<=s.x&&o.range.end.x>=s.x||_&&o.range.end.x>=s.x||L&&o.range.start.x<=s.x||_&&L)&&o.range.start.y<=s.y&&o.range.end.y>=s.y},a.prototype._positionFromMouseEvent=function(o,s,f){var _=f.getCoords(o,s,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}},a.prototype._createLinkUnderlineEvent=function(o,s,f,_,L){return{x1:o,y1:s,x2:f,y2:_,cols:this._bufferService.cols,fg:L}},S([m(0,b.IBufferService)],a)}(u.Disposable);d.Linkifier2=p},9042:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.tooMuchOutput=d.promptLabel=void 0,d.promptLabel="Terminal input",d.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(J,d,x){var v,y=this&&this.__extends||(v=function(l,a){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},v(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=l}v(l,a),l.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),S=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},m=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseZoneManager=void 0;var b=x(844),C=x(3656),u=x(4725),h=x(2585),p=function(l){function a(o,s,f,_,L,A){var I=l.call(this)||this;return I._element=o,I._screenElement=s,I._bufferService=f,I._mouseService=_,I._selectionService=L,I._optionsService=A,I._zones=[],I._areZonesActive=!1,I._lastHoverCoords=[void 0,void 0],I._initialSelectionLength=0,I.register((0,C.addDisposableDomListener)(I._element,"mousedown",function(P){return I._onMouseDown(P)})),I._mouseMoveListener=function(P){return I._onMouseMove(P)},I._mouseLeaveListener=function(P){return I._onMouseLeave(P)},I._clickListener=function(P){return I._onClick(P)},I}return y(a,l),a.prototype.dispose=function(){l.prototype.dispose.call(this),this._deactivate()},a.prototype.add=function(o){this._zones.push(o),this._zones.length===1&&this._activate()},a.prototype.clearAll=function(o,s){if(this._zones.length!==0){o&&s||(o=0,s=this._bufferService.rows-1);for(var f=0;f<this._zones.length;f++){var _=this._zones[f];(_.y1>o&&_.y1<=s+1||_.y2>o&&_.y2<=s+1||_.y1<o&&_.y2>s+1)&&(this._currentZone&&this._currentZone===_&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(f--,1))}this._zones.length===0&&this._deactivate()}},a.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},a.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},a.prototype._onMouseMove=function(o){this._lastHoverCoords[0]===o.pageX&&this._lastHoverCoords[1]===o.pageY||(this._onHover(o),this._lastHoverCoords=[o.pageX,o.pageY])},a.prototype._onHover=function(o){var s=this,f=this._findZoneEventAt(o);f!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),f&&(this._currentZone=f,f.hoverCallback&&f.hoverCallback(o),this._tooltipTimeout=window.setTimeout(function(){return s._onTooltip(o)},this._optionsService.options.linkTooltipHoverDuration)))},a.prototype._onTooltip=function(o){this._tooltipTimeout=void 0;var s=this._findZoneEventAt(o);s==null||s.tooltipCallback(o)},a.prototype._onMouseDown=function(o){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var s=this._findZoneEventAt(o);(s==null?void 0:s.willLinkActivate(o))&&(o.preventDefault(),o.stopImmediatePropagation())}},a.prototype._onMouseLeave=function(o){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},a.prototype._onClick=function(o){var s=this._findZoneEventAt(o),f=this._getSelectionLength();s&&f===this._initialSelectionLength&&(s.clickCallback(o),o.preventDefault(),o.stopImmediatePropagation())},a.prototype._getSelectionLength=function(){var o=this._selectionService.selectionText;return o?o.length:0},a.prototype._findZoneEventAt=function(o){var s=this._mouseService.getCoords(o,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(s)for(var f=s[0],_=s[1],L=0;L<this._zones.length;L++){var A=this._zones[L];if(A.y1===A.y2){if(_===A.y1&&f>=A.x1&&f<A.x2)return A}else if(_===A.y1&&f>=A.x1||_===A.y2&&f<A.x2||_>A.y1&&_<A.y2)return A}},S([m(2,h.IBufferService),m(3,u.IMouseService),m(4,u.ISelectionService),m(5,h.IOptionsService)],a)}(b.Disposable);d.MouseZoneManager=p},6193:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.RenderDebouncer=void 0;var x=function(){function v(y){this._renderCallback=y}return v.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},v.prototype.refresh=function(y,S,m){var b=this;this._rowCount=m,y=y!==void 0?y:0,S=S!==void 0?S:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,y):y,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,S):S,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return b._innerRefresh()}))},v.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var y=Math.max(this._rowStart,0),S=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(y,S)}},v}();d.RenderDebouncer=x},5596:function(J,d,x){var v,y=this&&this.__extends||(v=function(m,b){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,u){C.__proto__=u}||function(C,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(C[h]=u[h])},v(m,b)},function(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=m}v(m,b),m.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)});Object.defineProperty(d,"__esModule",{value:!0}),d.ScreenDprMonitor=void 0;var S=function(m){function b(){var C=m!==null&&m.apply(this,arguments)||this;return C._currentDevicePixelRatio=window.devicePixelRatio,C}return y(b,m),b.prototype.setListener=function(C){var u=this;this._listener&&this.clearListener(),this._listener=C,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},b.prototype.dispose=function(){m.prototype.dispose.call(this),this.clearListener()},b.prototype._updateDpr=function(){var C;this._outerListener&&((C=this._resolutionMediaMatchList)===null||C===void 0||C.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},b.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},b}(x(844).Disposable);d.ScreenDprMonitor=S},3236:function(J,d,x){var v,y=this&&this.__extends||(v=function(he,H){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,z){q.__proto__=z}||function(q,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(q[ce]=z[ce])},v(he,H)},function(he,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function q(){this.constructor=he}v(he,H),he.prototype=H===null?Object.create(H):(q.prototype=H.prototype,new q)});Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;var S=x(2950),m=x(1680),b=x(3614),C=x(2584),u=x(5435),h=x(3525),p=x(3551),l=x(9312),a=x(6114),o=x(3656),s=x(9042),f=x(357),_=x(6954),L=x(4567),A=x(1296),I=x(7399),P=x(8460),M=x(8437),k=x(5680),D=x(3230),E=x(4725),U=x(428),W=x(8934),B=x(6465),F=x(5114),X=x(8969),Z=x(4774),se=x(4269),ae=x(5941),me=typeof window!="undefined"?window.document:null,we=function(he){function H(q){q===void 0&&(q={});var z=he.call(this,q)||this;return z.browser=a,z._keyDownHandled=!1,z._keyPressHandled=!1,z._unprocessedDeadKey=!1,z._onCursorMove=new P.EventEmitter,z._onKey=new P.EventEmitter,z._onRender=new P.EventEmitter,z._onSelectionChange=new P.EventEmitter,z._onTitleChange=new P.EventEmitter,z._onBell=new P.EventEmitter,z._onFocus=new P.EventEmitter,z._onBlur=new P.EventEmitter,z._onA11yCharEmitter=new P.EventEmitter,z._onA11yTabEmitter=new P.EventEmitter,z._setup(),z.linkifier=z._instantiationService.createInstance(p.Linkifier),z.linkifier2=z.register(z._instantiationService.createInstance(B.Linkifier2)),z.register(z._inputHandler.onRequestBell(function(){return z.bell()})),z.register(z._inputHandler.onRequestRefreshRows(function(ce,Y){return z.refresh(ce,Y)})),z.register(z._inputHandler.onRequestSendFocus(function(){return z._reportFocus()})),z.register(z._inputHandler.onRequestReset(function(){return z.reset()})),z.register(z._inputHandler.onRequestWindowsOptionsReport(function(ce){return z._reportWindowsOptions(ce)})),z.register(z._inputHandler.onColor(function(ce){return z._handleColorEvent(ce)})),z.register((0,P.forwardEvent)(z._inputHandler.onCursorMove,z._onCursorMove)),z.register((0,P.forwardEvent)(z._inputHandler.onTitleChange,z._onTitleChange)),z.register((0,P.forwardEvent)(z._inputHandler.onA11yChar,z._onA11yCharEmitter)),z.register((0,P.forwardEvent)(z._inputHandler.onA11yTab,z._onA11yTabEmitter)),z.register(z._bufferService.onResize(function(ce){return z._afterResize(ce.cols,ce.rows)})),z}return y(H,he),Object.defineProperty(H.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),H.prototype._handleColorEvent=function(q){var z,ce;if(this._colorManager){for(var Y=0,_e=q;Y<_e.length;Y++){var Le=_e[Y],Be=void 0,Ee="";switch(Le.index){case 256:Be="foreground",Ee="10";break;case 257:Be="background",Ee="11";break;case 258:Be="cursor",Ee="12";break;default:Be="ansi",Ee="4;"+Le.index}if(Be)switch(Le.type){case 0:var Ie=Z.color.toColorRGB(Be==="ansi"?this._colorManager.colors.ansi[Le.index]:this._colorManager.colors[Be]);this.coreService.triggerDataEvent(C.C0.ESC+"]"+Ee+";"+(0,ae.toRgbString)(Ie)+C.C0.BEL);break;case 1:Be==="ansi"?this._colorManager.colors.ansi[Le.index]=Z.rgba.toColor.apply(Z.rgba,Le.color):this._colorManager.colors[Be]=Z.rgba.toColor.apply(Z.rgba,Le.color);break;case 2:this._colorManager.restoreColor(Le.index)}}(z=this._renderService)===null||z===void 0||z.setColors(this._colorManager.colors),(ce=this.viewport)===null||ce===void 0||ce.onThemeChange(this._colorManager.colors)}},H.prototype.dispose=function(){var q,z,ce;this._isDisposed||(he.prototype.dispose.call(this),(q=this._renderService)===null||q===void 0||q.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(ce=(z=this.element)===null||z===void 0?void 0:z.parentNode)===null||ce===void 0||ce.removeChild(this.element))},H.prototype._setup=function(){he.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(H.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),H.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},H.prototype._updateOptions=function(q){var z,ce,Y,_e;switch(he.prototype._updateOptions.call(this,q),q){case"fontFamily":case"fontSize":(z=this._renderService)===null||z===void 0||z.clear(),(ce=this._charSizeService)===null||ce===void 0||ce.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Y=this.viewport)===null||Y===void 0||Y.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new L.AccessibilityManager(this,this._renderService)):((_e=this._accessibilityManager)===null||_e===void 0||_e.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},H.prototype._onTextAreaFocus=function(q){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(C.C0.ESC+"[I"),this.updateCursorStyle(q),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},H.prototype.blur=function(){var q;return(q=this.textarea)===null||q===void 0?void 0:q.blur()},H.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(C.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},H.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var q=this.buffer.ybase+this.buffer.y,z=this.buffer.lines.get(q);if(z){var ce=Math.min(this.buffer.x,this.cols-1),Y=this._renderService.dimensions.actualCellHeight,_e=z.getWidth(ce),Le=this._renderService.dimensions.actualCellWidth*_e,Be=this.buffer.y*this._renderService.dimensions.actualCellHeight,Ee=ce*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Ee+"px",this.textarea.style.top=Be+"px",this.textarea.style.width=Le+"px",this.textarea.style.height=Y+"px",this.textarea.style.lineHeight=Y+"px",this.textarea.style.zIndex="-5"}}},H.prototype._initGlobal=function(){var q=this;this._bindKeys(),this.register((0,o.addDisposableDomListener)(this.element,"copy",function(ce){q.hasSelection()&&(0,b.copyHandler)(ce,q._selectionService)}));var z=function(ce){return(0,b.handlePasteEvent)(ce,q.textarea,q.coreService)};this.register((0,o.addDisposableDomListener)(this.textarea,"paste",z)),this.register((0,o.addDisposableDomListener)(this.element,"paste",z)),a.isFirefox?this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(ce){ce.button===2&&(0,b.rightClickHandler)(ce,q.textarea,q.screenElement,q._selectionService,q.options.rightClickSelectsWord)})):this.register((0,o.addDisposableDomListener)(this.element,"contextmenu",function(ce){(0,b.rightClickHandler)(ce,q.textarea,q.screenElement,q._selectionService,q.options.rightClickSelectsWord)})),a.isLinux&&this.register((0,o.addDisposableDomListener)(this.element,"auxclick",function(ce){ce.button===1&&(0,b.moveTextAreaUnderMouseCursor)(ce,q.textarea,q.screenElement)}))},H.prototype._bindKeys=function(){var q=this;this.register((0,o.addDisposableDomListener)(this.textarea,"keyup",function(z){return q._keyUp(z)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keydown",function(z){return q._keyDown(z)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keypress",function(z){return q._keyPress(z)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionstart",function(){return q._compositionHelper.compositionstart()})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionupdate",function(z){return q._compositionHelper.compositionupdate(z)})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionend",function(){return q._compositionHelper.compositionend()})),this.register((0,o.addDisposableDomListener)(this.textarea,"input",function(z){return q._inputEvent(z)},!0)),this.register(this.onRender(function(){return q._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(z){return q._queueLinkification(z.start,z.end)}))},H.prototype.open=function(q){var z=this;if(!q)throw new Error("Terminal requires a parent element.");q.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=q.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),q.appendChild(this.element);var ce=me.createDocumentFragment();this._viewportElement=me.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ce.appendChild(this._viewportElement),this._viewportScrollArea=me.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=me.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=me.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ce.appendChild(this.screenElement),this.textarea=me.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,o.addDisposableDomListener)(this.textarea,"focus",function(Le){return z._onTextAreaFocus(Le)})),this.register((0,o.addDisposableDomListener)(this.textarea,"blur",function(){return z._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Y=this._instantiationService.createInstance(F.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,Y),this._charSizeService=this._instantiationService.createInstance(U.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new k.ColorManager(me,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Le){return z._colorManager.onOptionsChange(Le)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(se.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var _e=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,_e,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Le){return z._onRender.fire(Le)})),this.onResize(function(Le){return z._renderService.resize(Le.cols,Le.rows)}),this._compositionView=me.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(S.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ce),this._soundService=this._instantiationService.createInstance(f.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(W.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(m.Viewport,function(Le){return z.scrollLines(Le,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return z.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){z._renderService.onCursorMove(),z._syncTextArea()})),this.register(this.onResize(function(){return z._renderService.onResize(z.cols,z.rows)})),this.register(this.onBlur(function(){return z._renderService.onBlur()})),this.register(this.onFocus(function(){return z._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return z.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(l.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Le){return z.scrollLines(Le.amount,Le.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return z._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Le){return z._renderService.onSelectionChanged(Le.start,Le.end,Le.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Le){z.textarea.value=Le,z.textarea.focus(),z.textarea.select()})),this.register(this._onScroll.event(function(Le){z.viewport.syncScrollArea(),z._selectionService.refresh()})),this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",function(){return z._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(_.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return z._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(Le){return z._selectionService.onMouseDown(Le)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new L.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},H.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(h.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(A.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},H.prototype._setTheme=function(q){var z,ce,Y;this._theme=q,(z=this._colorManager)===null||z===void 0||z.setTheme(q),(ce=this._renderService)===null||ce===void 0||ce.setColors(this._colorManager.colors),(Y=this.viewport)===null||Y===void 0||Y.onThemeChange(this._colorManager.colors)},H.prototype.bindMouse=function(){var q=this,z=this,ce=this.element;function Y(Se){var qe,_t,Mt=z._mouseService.getRawByteCoords(Se,z.screenElement,z.cols,z.rows);if(!Mt)return!1;switch(Se.overrideType||Se.type){case"mousemove":_t=32,Se.buttons===void 0?(qe=3,Se.button!==void 0&&(qe=Se.button<3?Se.button:3)):qe=1&Se.buttons?0:4&Se.buttons?1:2&Se.buttons?2:3;break;case"mouseup":_t=0,qe=Se.button<3?Se.button:3;break;case"mousedown":_t=1,qe=Se.button<3?Se.button:3;break;case"wheel":Se.deltaY!==0&&(_t=Se.deltaY<0?0:1),qe=4;break;default:return!1}return!(_t===void 0||qe===void 0||qe>4)&&z.coreMouseService.triggerMouseEvent({col:Mt.x-33,row:Mt.y-33,button:qe,action:_t,ctrl:Se.ctrlKey,alt:Se.altKey,shift:Se.shiftKey})}var _e={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Le=function(Se){return Y(Se),Se.buttons||(q._document.removeEventListener("mouseup",_e.mouseup),_e.mousedrag&&q._document.removeEventListener("mousemove",_e.mousedrag)),q.cancel(Se)},Be=function(Se){return Y(Se),q.cancel(Se,!0)},Ee=function(Se){Se.buttons&&Y(Se)},Ie=function(Se){Se.buttons||Y(Se)};this.register(this.coreMouseService.onProtocolChange(function(Se){Se?(q.optionsService.options.logLevel==="debug"&&q._logService.debug("Binding to mouse events:",q.coreMouseService.explainEvents(Se)),q.element.classList.add("enable-mouse-events"),q._selectionService.disable()):(q._logService.debug("Unbinding from mouse events."),q.element.classList.remove("enable-mouse-events"),q._selectionService.enable()),8&Se?_e.mousemove||(ce.addEventListener("mousemove",Ie),_e.mousemove=Ie):(ce.removeEventListener("mousemove",_e.mousemove),_e.mousemove=null),16&Se?_e.wheel||(ce.addEventListener("wheel",Be,{passive:!1}),_e.wheel=Be):(ce.removeEventListener("wheel",_e.wheel),_e.wheel=null),2&Se?_e.mouseup||(_e.mouseup=Le):(q._document.removeEventListener("mouseup",_e.mouseup),_e.mouseup=null),4&Se?_e.mousedrag||(_e.mousedrag=Ee):(q._document.removeEventListener("mousemove",_e.mousedrag),_e.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,o.addDisposableDomListener)(ce,"mousedown",function(Se){if(Se.preventDefault(),q.focus(),q.coreMouseService.areMouseEventsActive&&!q._selectionService.shouldForceSelection(Se))return Y(Se),_e.mouseup&&q._document.addEventListener("mouseup",_e.mouseup),_e.mousedrag&&q._document.addEventListener("mousemove",_e.mousedrag),q.cancel(Se)})),this.register((0,o.addDisposableDomListener)(ce,"wheel",function(Se){if(!_e.wheel){if(!q.buffer.hasScrollback){var qe=q.viewport.getLinesScrolled(Se);if(qe===0)return;for(var _t=C.C0.ESC+(q.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Se.deltaY<0?"A":"B"),Mt="",Yt=0;Yt<Math.abs(qe);Yt++)Mt+=_t;return q.coreService.triggerDataEvent(Mt,!0),q.cancel(Se,!0)}return q.viewport.onWheel(Se)?q.cancel(Se):void 0}},{passive:!1})),this.register((0,o.addDisposableDomListener)(ce,"touchstart",function(Se){if(!q.coreMouseService.areMouseEventsActive)return q.viewport.onTouchStart(Se),q.cancel(Se)},{passive:!0})),this.register((0,o.addDisposableDomListener)(ce,"touchmove",function(Se){if(!q.coreMouseService.areMouseEventsActive)return q.viewport.onTouchMove(Se)?void 0:q.cancel(Se)},{passive:!1}))},H.prototype.refresh=function(q,z){var ce;(ce=this._renderService)===null||ce===void 0||ce.refreshRows(q,z)},H.prototype._queueLinkification=function(q,z){var ce;(ce=this.linkifier)===null||ce===void 0||ce.linkifyRows(q,z)},H.prototype.updateCursorStyle=function(q){var z;((z=this._selectionService)===null||z===void 0?void 0:z.shouldColumnSelect(q))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},H.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},H.prototype.scrollLines=function(q,z,ce){ce===void 0&&(ce=0),he.prototype.scrollLines.call(this,q,z,ce),this.refresh(0,this.rows-1)},H.prototype.paste=function(q){(0,b.paste)(q,this.textarea,this.coreService)},H.prototype.attachCustomKeyEventHandler=function(q){this._customKeyEventHandler=q},H.prototype.registerLinkMatcher=function(q,z,ce){var Y=this.linkifier.registerLinkMatcher(q,z,ce);return this.refresh(0,this.rows-1),Y},H.prototype.deregisterLinkMatcher=function(q){this.linkifier.deregisterLinkMatcher(q)&&this.refresh(0,this.rows-1)},H.prototype.registerLinkProvider=function(q){return this.linkifier2.registerLinkProvider(q)},H.prototype.registerCharacterJoiner=function(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var z=this._characterJoinerService.register(q);return this.refresh(0,this.rows-1),z},H.prototype.deregisterCharacterJoiner=function(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(q)&&this.refresh(0,this.rows-1)},Object.defineProperty(H.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),H.prototype.addMarker=function(q){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+q)},H.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},H.prototype.select=function(q,z,ce){this._selectionService.setSelection(q,z,ce)},H.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},H.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},H.prototype.clearSelection=function(){var q;(q=this._selectionService)===null||q===void 0||q.clearSelection()},H.prototype.selectAll=function(){var q;(q=this._selectionService)===null||q===void 0||q.selectAll()},H.prototype.selectLines=function(q,z){var ce;(ce=this._selectionService)===null||ce===void 0||ce.selectLines(q,z)},H.prototype._keyDown=function(q){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(!this._compositionHelper.keydown(q))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;q.key!=="Dead"&&q.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var z=(0,I.evaluateKeyboardEvent)(q,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(q),z.type===3||z.type===2){var ce=this.rows-1;return this.scrollLines(z.type===2?-ce:ce),this.cancel(q,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,q)||(z.cancel&&this.cancel(q,!0),!z.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==C.C0.ETX&&z.key!==C.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(q,!0))))},H.prototype._isThirdLevelShift=function(q,z){var ce=q.isMac&&!this.options.macOptionIsMeta&&z.altKey&&!z.ctrlKey&&!z.metaKey||q.isWindows&&z.altKey&&z.ctrlKey&&!z.metaKey||q.isWindows&&z.getModifierState("AltGraph");return z.type==="keypress"?ce:ce&&(!z.keyCode||z.keyCode>47)},H.prototype._keyUp=function(q){this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1||(function(z){return z.keyCode===16||z.keyCode===17||z.keyCode===18}(q)||this.focus(),this.updateCursorStyle(q),this._keyPressHandled=!1)},H.prototype._keyPress=function(q){var z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(this.cancel(q),q.charCode)z=q.charCode;else if(q.which===null||q.which===void 0)z=q.keyCode;else{if(q.which===0||q.charCode===0)return!1;z=q.which}return!(!z||(q.altKey||q.ctrlKey||q.metaKey)&&!this._isThirdLevelShift(this.browser,q)||(z=String.fromCharCode(z),this._onKey.fire({key:z,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},H.prototype._inputEvent=function(q){if(q.data&&q.inputType==="insertText"&&!q.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var z=q.data;return this.coreService.triggerDataEvent(z,!0),this.cancel(q),!0}return!1},H.prototype.bell=function(){var q;this._soundBell()&&((q=this._soundService)===null||q===void 0||q.playBellSound()),this._onBell.fire()},H.prototype.resize=function(q,z){q!==this.cols||z!==this.rows?he.prototype.resize.call(this,q,z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},H.prototype._afterResize=function(q,z){var ce,Y;(ce=this._charSizeService)===null||ce===void 0||ce.measure(),(Y=this.viewport)===null||Y===void 0||Y.syncScrollArea(!0)},H.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var q=1;q<this.rows;q++)this.buffer.lines.push(this.buffer.getBlankLine(M.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},H.prototype.reset=function(){var q,z;this.options.rows=this.rows,this.options.cols=this.cols;var ce=this._customKeyEventHandler;this._setup(),he.prototype.reset.call(this),(q=this._selectionService)===null||q===void 0||q.reset(),this._customKeyEventHandler=ce,this.refresh(0,this.rows-1),(z=this.viewport)===null||z===void 0||z.syncScrollArea()},H.prototype.clearTextureAtlas=function(){var q;(q=this._renderService)===null||q===void 0||q.clearTextureAtlas()},H.prototype._reportFocus=function(){var q;((q=this.element)===null||q===void 0?void 0:q.classList.contains("focus"))?this.coreService.triggerDataEvent(C.C0.ESC+"[I"):this.coreService.triggerDataEvent(C.C0.ESC+"[O")},H.prototype._reportWindowsOptions=function(q){if(this._renderService)switch(q){case u.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var z=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),ce=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(C.C0.ESC+"[4;"+ce+";"+z+"t");break;case u.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Y=this._renderService.dimensions.scaledCellWidth.toFixed(0),_e=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(C.C0.ESC+"[6;"+_e+";"+Y+"t")}},H.prototype.cancel=function(q,z){if(this.options.cancelEvents||z)return q.preventDefault(),q.stopPropagation(),!1},H.prototype._visualBell=function(){return!1},H.prototype._soundBell=function(){return this.options.bellStyle==="sound"},H}(X.CoreTerminal);d.Terminal=we},9924:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TimeBasedDebouncer=void 0;var x=function(){function v(y,S){S===void 0&&(S=1e3),this._renderCallback=y,this._debounceThresholdMS=S,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return v.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},v.prototype.refresh=function(y,S,m){var b=this;this._rowCount=m,y=y!==void 0?y:0,S=S!==void 0?S:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,y):y,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,S):S;var C=Date.now();if(C-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=C,this._innerRefresh();else if(!this._additionalRefreshRequested){var u=C-this._lastRefreshMs,h=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){b._lastRefreshMs=Date.now(),b._innerRefresh(),b._additionalRefreshRequested=!1,b._refreshTimeoutID=void 0},h)}},v.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var y=Math.max(this._rowStart,0),S=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(y,S)}},v}();d.TimeBasedDebouncer=x},1680:function(J,d,x){var v,y=this&&this.__extends||(v=function(l,a){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},v(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=l}v(l,a),l.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),S=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},m=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Viewport=void 0;var b=x(844),C=x(3656),u=x(4725),h=x(2585),p=function(l){function a(o,s,f,_,L,A,I,P){var M=l.call(this)||this;return M._scrollLines=o,M._viewportElement=s,M._scrollArea=f,M._element=_,M._bufferService=L,M._optionsService=A,M._charSizeService=I,M._renderService=P,M.scrollBarWidth=0,M._currentRowHeight=0,M._currentScaledCellHeight=0,M._lastRecordedBufferLength=0,M._lastRecordedViewportHeight=0,M._lastRecordedBufferHeight=0,M._lastTouchY=0,M._lastScrollTop=0,M._lastHadScrollBar=!1,M._wheelPartialScroll=0,M._refreshAnimationFrame=null,M._ignoreNextScrollEvent=!1,M.scrollBarWidth=M._viewportElement.offsetWidth-M._scrollArea.offsetWidth||15,M._lastHadScrollBar=!0,M.register((0,C.addDisposableDomListener)(M._viewportElement,"scroll",M._onScroll.bind(M))),M._activeBuffer=M._bufferService.buffer,M.register(M._bufferService.buffers.onBufferActivate(function(k){return M._activeBuffer=k.activeBuffer})),M._renderDimensions=M._renderService.dimensions,M.register(M._renderService.onDimensionsChange(function(k){return M._renderDimensions=k})),setTimeout(function(){return M.syncScrollArea()},0),M}return y(a,l),a.prototype.onThemeChange=function(o){this._viewportElement.style.backgroundColor=o.background.css},a.prototype._refresh=function(o){var s=this;if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return s._innerRefresh()}))},a.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var f=window.getComputedStyle(this._element),_=parseInt(f.paddingLeft)+parseInt(f.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?_:0)).toString()+"px",this._refreshAnimationFrame=null},a.prototype.syncScrollArea=function(o){if(o===void 0&&(o=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(o):this._refresh(o)},a.prototype._onScroll=function(o){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(s)}},a.prototype._bubbleScroll=function(o,s){var f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&f<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)},a.prototype.onWheel=function(o){var s=this._getPixelsScrolled(o);return s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(o,s))},a.prototype._getPixelsScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var s=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s},a.prototype.getLinesScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var s=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s},a.prototype._applyScrollModifier=function(o,s){var f=this._optionsService.options.fastScrollModifier;return f==="alt"&&s.altKey||f==="ctrl"&&s.ctrlKey||f==="shift"&&s.shiftKey?o*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:o*this._optionsService.options.scrollSensitivity},a.prototype.onTouchStart=function(o){this._lastTouchY=o.touches[0].pageY},a.prototype.onTouchMove=function(o){var s=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(o,s))},S([m(4,h.IBufferService),m(5,h.IOptionsService),m(6,u.ICharSizeService),m(7,u.IRenderService)],a)}(b.Disposable);d.Viewport=p},2950:function(J,d,x){var v=this&&this.__decorate||function(C,u,h,p){var l,a=arguments.length,o=a<3?u:p===null?p=Object.getOwnPropertyDescriptor(u,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,u,h,p);else for(var s=C.length-1;s>=0;s--)(l=C[s])&&(o=(a<3?l(o):a>3?l(u,h,o):l(u,h))||o);return a>3&&o&&Object.defineProperty(u,h,o),o},y=this&&this.__param||function(C,u){return function(h,p){u(h,p,C)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CompositionHelper=void 0;var S=x(4725),m=x(2585),b=function(){function C(u,h,p,l,a,o){this._textarea=u,this._compositionView=h,this._bufferService=p,this._optionsService=l,this._coreService=a,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(C.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),C.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},C.prototype.compositionupdate=function(u){var h=this;this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(function(){h._compositionPosition.end=h._textarea.value.length},0)},C.prototype.compositionend=function(){this._finalizeComposition(!0)},C.prototype.keydown=function(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},C.prototype._finalizeComposition=function(u){var h=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){var p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(h._isSendingComposition){h._isSendingComposition=!1;var a;p.start+=h._dataAlreadySent.length,(a=h._isComposing?h._textarea.value.substring(p.start,p.end):h._textarea.value.substring(p.start)).length>0&&h._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;var l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}},C.prototype._handleAnyTextareaChanges=function(){var u=this,h=this._textarea.value;setTimeout(function(){if(!u._isComposing){var p=u._textarea.value.replace(h,"");p.length>0&&(u._dataAlreadySent=p,u._coreService.triggerDataEvent(p,!0))}},0)},C.prototype.updateCompositionElements=function(u){var h=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.actualCellHeight,a=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=p*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}u||setTimeout(function(){return h.updateCompositionElements(!0)},0)}},v([y(2,m.IBufferService),y(3,m.IOptionsService),y(4,m.ICoreService),y(5,S.IRenderService)],C)}();d.CompositionHelper=b},9806:(J,d)=>{function x(v,y){var S=y.getBoundingClientRect();return[v.clientX-S.left,v.clientY-S.top]}Object.defineProperty(d,"__esModule",{value:!0}),d.getRawByteCoords=d.getCoords=d.getCoordsRelativeToElement=void 0,d.getCoordsRelativeToElement=x,d.getCoords=function(v,y,S,m,b,C,u,h){if(b){var p=x(v,y);if(p)return p[0]=Math.ceil((p[0]+(h?C/2:0))/C),p[1]=Math.ceil(p[1]/u),p[0]=Math.min(Math.max(p[0],1),S+(h?1:0)),p[1]=Math.min(Math.max(p[1],1),m),p}},d.getRawByteCoords=function(v){if(v)return{x:v[0]+32,y:v[1]+32}}},9504:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.moveToCellSequence=void 0;var v=x(2584);function y(h,p,l,a){var o=h-S(l,h),s=p-S(l,p),f=Math.abs(o-s)-function(_,L,A){for(var I=0,P=_-S(A,_),M=L-S(A,L),k=0;k<Math.abs(P-M);k++){var D=m(_,L)==="A"?-1:1,E=A.buffer.lines.get(P+D*k);(E==null?void 0:E.isWrapped)&&I++}return I}(h,p,l);return u(f,C(m(h,p),a))}function S(h,p){for(var l=0,a=h.buffer.lines.get(p),o=a==null?void 0:a.isWrapped;o&&p>=0&&p<h.rows;)l++,o=(a=h.buffer.lines.get(--p))==null?void 0:a.isWrapped;return l}function m(h,p){return h>p?"A":"B"}function b(h,p,l,a,o,s){for(var f=h,_=p,L="";f!==l||_!==a;)f+=o?1:-1,o&&f>s.cols-1?(L+=s.buffer.translateBufferLineToString(_,!1,h,f),f=0,h=0,_++):!o&&f<0&&(L+=s.buffer.translateBufferLineToString(_,!1,0,h+1),h=f=s.cols-1,_--);return L+s.buffer.translateBufferLineToString(_,!1,h,f)}function C(h,p){var l=p?"O":"[";return v.C0.ESC+l+h}function u(h,p){h=Math.floor(h);for(var l="",a=0;a<h;a++)l+=p;return l}d.moveToCellSequence=function(h,p,l,a){var o,s=l.buffer.x,f=l.buffer.y;if(!l.buffer.hasScrollback)return function(L,A,I,P,M,k){return y(A,P,M,k).length===0?"":u(b(L,A,L,A-S(M,A),!1,M).length,C("D",k))}(s,f,0,p,l,a)+y(f,p,l,a)+function(L,A,I,P,M,k){var D;D=y(A,P,M,k).length>0?P-S(M,P):A;var E=P,U=function(W,B,F,X,Z,se){var ae;return ae=y(F,X,Z,se).length>0?X-S(Z,X):B,W<F&&ae<=X||W>=F&&ae<X?"C":"D"}(L,A,I,P,M,k);return u(b(L,D,I,E,U==="C",M).length,C(U,k))}(s,f,h,p,l,a);if(f===p)return o=s>h?"D":"C",u(Math.abs(s-h),C(o,a));o=f>p?"D":"C";var _=Math.abs(f-p);return u(function(L,A){return A.cols-L}(f>p?h:s,l)+(_-1)*l.cols+1+((f>p?s:h)-1),C(o,a))}},1546:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseRenderLayer=void 0;var v=x(643),y=x(8803),S=x(1420),m=x(3734),b=x(1752),C=x(4774),u=x(9631),h=x(8978),p=function(){function l(a,o,s,f,_,L,A,I){this._container=a,this._alpha=f,this._colors=_,this._rendererId=L,this._bufferService=A,this._optionsService=I,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+o+"-layer"),this._canvas.style.zIndex=s.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return l.prototype.dispose=function(){var a;(0,u.removeElementFromParent)(this._canvas),(a=this._charAtlas)===null||a===void 0||a.dispose()},l.prototype._initCanvas=function(){this._ctx=(0,b.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},l.prototype.onOptionsChanged=function(){},l.prototype.onBlur=function(){},l.prototype.onFocus=function(){},l.prototype.onCursorMove=function(){},l.prototype.onGridChanged=function(a,o){},l.prototype.onSelectionChanged=function(a,o,s){s===void 0&&(s=!1)},l.prototype.setColors=function(a){this._refreshCharAtlas(a)},l.prototype._setTransparency=function(a){if(a!==this._alpha){var o=this._canvas;this._alpha=a,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,o),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},l.prototype._refreshCharAtlas=function(a){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,S.acquireCharAtlas)(this._optionsService.options,this._rendererId,a,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},l.prototype.resize=function(a){this._scaledCellWidth=a.scaledCellWidth,this._scaledCellHeight=a.scaledCellHeight,this._scaledCharWidth=a.scaledCharWidth,this._scaledCharHeight=a.scaledCharHeight,this._scaledCharLeft=a.scaledCharLeft,this._scaledCharTop=a.scaledCharTop,this._canvas.width=a.scaledCanvasWidth,this._canvas.height=a.scaledCanvasHeight,this._canvas.style.width=a.canvasWidth+"px",this._canvas.style.height=a.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},l.prototype.clearTextureAtlas=function(){var a;(a=this._charAtlas)===null||a===void 0||a.clear()},l.prototype._fillCells=function(a,o,s,f){this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,s*this._scaledCellWidth,f*this._scaledCellHeight)},l.prototype._fillMiddleLineAtCells=function(a,o,s){s===void 0&&(s=1);var f=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(a*this._scaledCellWidth,(o+1)*this._scaledCellHeight-f-window.devicePixelRatio,s*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillBottomLineAtCells=function(a,o,s){s===void 0&&(s=1),this._ctx.fillRect(a*this._scaledCellWidth,(o+1)*this._scaledCellHeight-window.devicePixelRatio-1,s*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillLeftLineAtCell=function(a,o,s){this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,window.devicePixelRatio*s,this._scaledCellHeight)},l.prototype._strokeRectAtCell=function(a,o,s,f){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/2,o*this._scaledCellHeight+window.devicePixelRatio/2,s*this._scaledCellWidth-window.devicePixelRatio,f*this._scaledCellHeight-window.devicePixelRatio)},l.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},l.prototype._clearCells=function(a,o,s,f){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,o*this._scaledCellHeight,s*this._scaledCellWidth,f*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(a*this._scaledCellWidth,o*this._scaledCellHeight,s*this._scaledCellWidth,f*this._scaledCellHeight))},l.prototype._fillCharTrueColor=function(a,o,s){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=y.TEXT_BASELINE,this._clipRow(s);var f=!1;this._optionsService.options.customGlyphs!==!1&&(f=(0,h.tryDrawCustomChar)(this._ctx,a.getChars(),o*this._scaledCellWidth,s*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),f||this._ctx.fillText(a.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},l.prototype._drawChars=function(a,o,s){var f,_,L,A=this._getContrastColor(a);A||a.isFgRGB()||a.isBgRGB()?this._drawUncachedChars(a,o,s,A):(a.isInverse()?(_=a.isBgDefault()?y.INVERTED_DEFAULT_COLOR:a.getBgColor(),L=a.isFgDefault()?y.INVERTED_DEFAULT_COLOR:a.getFgColor()):(L=a.isBgDefault()?v.DEFAULT_COLOR:a.getBgColor(),_=a.isFgDefault()?v.DEFAULT_COLOR:a.getFgColor()),_+=this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&_<8?8:0,this._currentGlyphIdentifier.chars=a.getChars()||v.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=a.getCode()||v.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=L,this._currentGlyphIdentifier.fg=_,this._currentGlyphIdentifier.bold=!!a.isBold(),this._currentGlyphIdentifier.dim=!!a.isDim(),this._currentGlyphIdentifier.italic=!!a.isItalic(),((f=this._charAtlas)===null||f===void 0?void 0:f.draw(this._ctx,this._currentGlyphIdentifier,o*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(a,o,s))},l.prototype._drawUncachedChars=function(a,o,s,f){if(this._ctx.save(),this._ctx.font=this._getFont(!!a.isBold(),!!a.isItalic()),this._ctx.textBaseline=y.TEXT_BASELINE,a.isInverse())if(f)this._ctx.fillStyle=f.css;else if(a.isBgDefault())this._ctx.fillStyle=C.color.opaque(this._colors.background).css;else if(a.isBgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(a.getBgColor()).join(",")+")";else{var _=a.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&_<8&&(_+=8),this._ctx.fillStyle=this._colors.ansi[_].css}else if(f)this._ctx.fillStyle=f.css;else if(a.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(a.isFgRGB())this._ctx.fillStyle="rgb("+m.AttributeData.toColorRGB(a.getFgColor()).join(",")+")";else{var L=a.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&L<8&&(L+=8),this._ctx.fillStyle=this._colors.ansi[L].css}this._clipRow(s),a.isDim()&&(this._ctx.globalAlpha=y.DIM_OPACITY);var A=!1;this._optionsService.options.customGlyphs!==!1&&(A=(0,h.tryDrawCustomChar)(this._ctx,a.getChars(),o*this._scaledCellWidth,s*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),A||this._ctx.fillText(a.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},l.prototype._clipRow=function(a){this._ctx.beginPath(),this._ctx.rect(0,a*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},l.prototype._getFont=function(a,o){return(o?"italic":"")+" "+(a?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},l.prototype._getContrastColor=function(a){if(this._optionsService.options.minimumContrastRatio!==1){var o=this._colors.contrastCache.getColor(a.bg,a.fg);if(o!==void 0)return o||void 0;var s=a.getFgColor(),f=a.getFgColorMode(),_=a.getBgColor(),L=a.getBgColorMode(),A=!!a.isInverse(),I=!!a.isInverse();if(A){var P=s;s=_,_=P;var M=f;f=L,L=M}var k=this._resolveBackgroundRgba(L,_,A),D=this._resolveForegroundRgba(f,s,A,I),E=C.rgba.ensureContrastRatio(k,D,this._optionsService.options.minimumContrastRatio);if(E){var U={css:C.channels.toCss(E>>24&255,E>>16&255,E>>8&255),rgba:E};return this._colors.contrastCache.setColor(a.bg,a.fg,U),U}this._colors.contrastCache.setColor(a.bg,a.fg,null)}},l.prototype._resolveBackgroundRgba=function(a,o,s){switch(a){case 16777216:case 33554432:return this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return s?this._colors.foreground.rgba:this._colors.background.rgba}},l.prototype._resolveForegroundRgba=function(a,o,s,f){switch(a){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&f&&o<8&&(o+=8),this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return s?this._colors.background.rgba:this._colors.foreground.rgba}},l}();d.BaseRenderLayer=p},2512:function(J,d,x){var v,y=this&&this.__extends||(v=function(o,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var L in _)Object.prototype.hasOwnProperty.call(_,L)&&(f[L]=_[L])},v(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function f(){this.constructor=o}v(o,s),o.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}),S=this&&this.__decorate||function(o,s,f,_){var L,A=arguments.length,I=A<3?s:_===null?_=Object.getOwnPropertyDescriptor(s,f):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(o,s,f,_);else for(var P=o.length-1;P>=0;P--)(L=o[P])&&(I=(A<3?L(I):A>3?L(s,f,I):L(s,f))||I);return A>3&&I&&Object.defineProperty(s,f,I),I},m=this&&this.__param||function(o,s){return function(f,_){s(f,_,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CursorRenderLayer=void 0;var b=x(1546),C=x(511),u=x(2585),h=x(4725),p=600,l=function(o){function s(f,_,L,A,I,P,M,k,D){var E=o.call(this,f,"cursor",_,!0,L,A,P,M)||this;return E._onRequestRedraw=I,E._coreService=k,E._coreBrowserService=D,E._cell=new C.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return y(s,o),s.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),o.prototype.dispose.call(this)},s.prototype.resize=function(f){o.prototype.resize.call(this,f),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},s.prototype.reset=function(){var f;this._clearCursor(),(f=this._cursorBlinkStateManager)===null||f===void 0||f.restartBlinkAnimation(),this.onOptionsChanged()},s.prototype.onBlur=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onFocus=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onOptionsChanged=function(){var f,_=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new a(this._coreBrowserService.isFocused,function(){_._render(!0)})):((f=this._cursorBlinkStateManager)===null||f===void 0||f.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onCursorMove=function(){var f;(f=this._cursorBlinkStateManager)===null||f===void 0||f.restartBlinkAnimation()},s.prototype.onGridChanged=function(f,_){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},s.prototype._render=function(f){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var _=this._bufferService.buffer.ybase+this._bufferService.buffer.y,L=_-this._bufferService.buffer.ydisp;if(L<0||L>=this._bufferService.rows)this._clearCursor();else{var A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(_).loadCell(A,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var I=this._optionsService.options.cursorStyle;return I&&I!=="block"?this._cursorRenderers[I](A,L,this._cell):this._renderBlurCursor(A,L,this._cell),this._ctx.restore(),this._state.x=A,this._state.y=L,this._state.isFocused=!1,this._state.style=I,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===A&&this._state.y===L&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](A,L,this._cell),this._ctx.restore(),this._state.x=A,this._state.y=L,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},s.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},s.prototype._renderBarCursor=function(f,_,L){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(f,_,this._optionsService.options.cursorWidth),this._ctx.restore()},s.prototype._renderBlockCursor=function(f,_,L){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(f,_,L.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(L,f,_),this._ctx.restore()},s.prototype._renderUnderlineCursor=function(f,_,L){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(f,_),this._ctx.restore()},s.prototype._renderBlurCursor=function(f,_,L){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(f,_,L.getWidth(),1),this._ctx.restore()},S([m(5,u.IBufferService),m(6,u.IOptionsService),m(7,u.ICoreService),m(8,h.ICoreBrowserService)],s)}(b.BaseRenderLayer);d.CursorRenderLayer=l;var a=function(){function o(s,f){this._renderCallback=f,this.isCursorVisible=!0,s&&this._restartInterval()}return Object.defineProperty(o.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),o.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.restartBlinkAnimation=function(){var s=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})))},o.prototype._restartInterval=function(s){var f=this;s===void 0&&(s=p),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(f._animationTimeRestarted){var _=p-(Date.now()-f._animationTimeRestarted);if(f._animationTimeRestarted=void 0,_>0)return void f._restartInterval(_)}f.isCursorVisible=!1,f._animationFrame=window.requestAnimationFrame(function(){f._renderCallback(),f._animationFrame=void 0}),f._blinkInterval=window.setInterval(function(){if(f._animationTimeRestarted){var L=p-(Date.now()-f._animationTimeRestarted);return f._animationTimeRestarted=void 0,void f._restartInterval(L)}f.isCursorVisible=!f.isCursorVisible,f._animationFrame=window.requestAnimationFrame(function(){f._renderCallback(),f._animationFrame=void 0})},p)},s)},o.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},o}()},8978:(J,d,x)=>{var v,y,S,m,b,C,u,h,p,l,a,o,s,f,_,L,A,I,P,M,k,D,E,U,W,B,F,X,Z,se,ae,me,we,he,H,q,z,ce,Y,_e,Le,Be,Ee,Ie,Se,qe,_t,Mt,Yt,_r,ei,di,Pr,ti,Ut,pi,gt,Ne,sr,ut,Zt,ke,ar,tt,Ae,je,lr,Ke,Rt,Ye,cr,ft,tr,$t,Hr,gr,rt,Ir,yr,Ot,mr,Fr,Wr,br,Jt,yt,ht,Nr,qt,ur,fr,kt,Et,dt,Sr,Cr,Fe,Ce,Dt,wr,nt,De,Bt,rr,Lr,ue,O,K,ne,fe,Me,Oe,ge,Je,mt,xr,zt,Ri,Oi,jr,vi,Di,_i,Bi,Pi,Hi,Ii,nn;Object.defineProperty(d,"__esModule",{value:!0}),d.tryDrawCustomChar=d.boxDrawingDefinitions=d.blockElementDefinitions=void 0;var Mn=x(1752);d.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Rn={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};d.boxDrawingDefinitions={"\u2500":(v={},v[1]="M0,.5 L1,.5",v),"\u2501":(y={},y[3]="M0,.5 L1,.5",y),"\u2502":(S={},S[1]="M.5,0 L.5,1",S),"\u2503":(m={},m[3]="M.5,0 L.5,1",m),"\u250C":(b={},b[1]="M0.5,1 L.5,.5 L1,.5",b),"\u250F":(C={},C[3]="M0.5,1 L.5,.5 L1,.5",C),"\u2510":(u={},u[1]="M0,.5 L.5,.5 L.5,1",u),"\u2513":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"\u2514":(p={},p[1]="M.5,0 L.5,.5 L1,.5",p),"\u2517":(l={},l[3]="M.5,0 L.5,.5 L1,.5",l),"\u2518":(a={},a[1]="M.5,0 L.5,.5 L0,.5",a),"\u251B":(o={},o[3]="M.5,0 L.5,.5 L0,.5",o),"\u251C":(s={},s[1]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2523":(f={},f[3]="M.5,0 L.5,1 M.5,.5 L1,.5",f),"\u2524":(_={},_[1]="M.5,0 L.5,1 M.5,.5 L0,.5",_),"\u252B":(L={},L[3]="M.5,0 L.5,1 M.5,.5 L0,.5",L),"\u252C":(A={},A[1]="M0,.5 L1,.5 M.5,.5 L.5,1",A),"\u2533":(I={},I[3]="M0,.5 L1,.5 M.5,.5 L.5,1",I),"\u2534":(P={},P[1]="M0,.5 L1,.5 M.5,.5 L.5,0",P),"\u253B":(M={},M[3]="M0,.5 L1,.5 M.5,.5 L.5,0",M),"\u253C":(k={},k[1]="M0,.5 L1,.5 M.5,0 L.5,1",k),"\u254B":(D={},D[3]="M0,.5 L1,.5 M.5,0 L.5,1",D),"\u2574":(E={},E[1]="M.5,.5 L0,.5",E),"\u2578":(U={},U[3]="M.5,.5 L0,.5",U),"\u2575":(W={},W[1]="M.5,.5 L.5,0",W),"\u2579":(B={},B[3]="M.5,.5 L.5,0",B),"\u2576":(F={},F[1]="M.5,.5 L1,.5",F),"\u257A":(X={},X[3]="M.5,.5 L1,.5",X),"\u2577":(Z={},Z[1]="M.5,.5 L.5,1",Z),"\u257B":(se={},se[3]="M.5,.5 L.5,1",se),"\u2550":(ae={},ae[1]=function(ie,re){return"M0,"+(.5-re)+" L1,"+(.5-re)+" M0,"+(.5+re)+" L1,"+(.5+re)},ae),"\u2551":(me={},me[1]=function(ie,re){return"M"+(.5-ie)+",0 L"+(.5-ie)+",1 M"+(.5+ie)+",0 L"+(.5+ie)+",1"},me),"\u2552":(we={},we[1]=function(ie,re){return"M.5,1 L.5,"+(.5-re)+" L1,"+(.5-re)+" M.5,"+(.5+re)+" L1,"+(.5+re)},we),"\u2553":(he={},he[1]=function(ie,re){return"M"+(.5-ie)+",1 L"+(.5-ie)+",.5 L1,.5 M"+(.5+ie)+",.5 L"+(.5+ie)+",1"},he),"\u2554":(H={},H[1]=function(ie,re){return"M1,"+(.5-re)+" L"+(.5-ie)+","+(.5-re)+" L"+(.5-ie)+",1 M1,"+(.5+re)+" L"+(.5+ie)+","+(.5+re)+" L"+(.5+ie)+",1"},H),"\u2555":(q={},q[1]=function(ie,re){return"M0,"+(.5-re)+" L.5,"+(.5-re)+" L.5,1 M0,"+(.5+re)+" L.5,"+(.5+re)},q),"\u2556":(z={},z[1]=function(ie,re){return"M"+(.5+ie)+",1 L"+(.5+ie)+",.5 L0,.5 M"+(.5-ie)+",.5 L"+(.5-ie)+",1"},z),"\u2557":(ce={},ce[1]=function(ie,re){return"M0,"+(.5+re)+" L"+(.5-ie)+","+(.5+re)+" L"+(.5-ie)+",1 M0,"+(.5-re)+" L"+(.5+ie)+","+(.5-re)+" L"+(.5+ie)+",1"},ce),"\u2558":(Y={},Y[1]=function(ie,re){return"M.5,0 L.5,"+(.5+re)+" L1,"+(.5+re)+" M.5,"+(.5-re)+" L1,"+(.5-re)},Y),"\u2559":(_e={},_e[1]=function(ie,re){return"M1,.5 L"+(.5-ie)+",.5 L"+(.5-ie)+",0 M"+(.5+ie)+",.5 L"+(.5+ie)+",0"},_e),"\u255A":(Le={},Le[1]=function(ie,re){return"M1,"+(.5-re)+" L"+(.5+ie)+","+(.5-re)+" L"+(.5+ie)+",0 M1,"+(.5+re)+" L"+(.5-ie)+","+(.5+re)+" L"+(.5-ie)+",0"},Le),"\u255B":(Be={},Be[1]=function(ie,re){return"M0,"+(.5+re)+" L.5,"+(.5+re)+" L.5,0 M0,"+(.5-re)+" L.5,"+(.5-re)},Be),"\u255C":(Ee={},Ee[1]=function(ie,re){return"M0,.5 L"+(.5+ie)+",.5 L"+(.5+ie)+",0 M"+(.5-ie)+",.5 L"+(.5-ie)+",0"},Ee),"\u255D":(Ie={},Ie[1]=function(ie,re){return"M0,"+(.5-re)+" L"+(.5-ie)+","+(.5-re)+" L"+(.5-ie)+",0 M0,"+(.5+re)+" L"+(.5+ie)+","+(.5+re)+" L"+(.5+ie)+",0"},Ie),"\u255E":(Se={},Se[1]=function(ie,re){return"M.5,0 L.5,1 M.5,"+(.5-re)+" L1,"+(.5-re)+" M.5,"+(.5+re)+" L1,"+(.5+re)},Se),"\u255F":(qe={},qe[1]=function(ie,re){return"M"+(.5-ie)+",0 L"+(.5-ie)+",1 M"+(.5+ie)+",0 L"+(.5+ie)+",1 M"+(.5+ie)+",.5 L1,.5"},qe),"\u2560":(_t={},_t[1]=function(ie,re){return"M"+(.5-ie)+",0 L"+(.5-ie)+",1 M1,"+(.5+re)+" L"+(.5+ie)+","+(.5+re)+" L"+(.5+ie)+",1 M1,"+(.5-re)+" L"+(.5+ie)+","+(.5-re)+" L"+(.5+ie)+",0"},_t),"\u2561":(Mt={},Mt[1]=function(ie,re){return"M.5,0 L.5,1 M0,"+(.5-re)+" L.5,"+(.5-re)+" M0,"+(.5+re)+" L.5,"+(.5+re)},Mt),"\u2562":(Yt={},Yt[1]=function(ie,re){return"M0,.5 L"+(.5-ie)+",.5 M"+(.5-ie)+",0 L"+(.5-ie)+",1 M"+(.5+ie)+",0 L"+(.5+ie)+",1"},Yt),"\u2563":(_r={},_r[1]=function(ie,re){return"M"+(.5+ie)+",0 L"+(.5+ie)+",1 M0,"+(.5+re)+" L"+(.5-ie)+","+(.5+re)+" L"+(.5-ie)+",1 M0,"+(.5-re)+" L"+(.5-ie)+","+(.5-re)+" L"+(.5-ie)+",0"},_r),"\u2564":(ei={},ei[1]=function(ie,re){return"M0,"+(.5-re)+" L1,"+(.5-re)+" M0,"+(.5+re)+" L1,"+(.5+re)+" M.5,"+(.5+re)+" L.5,1"},ei),"\u2565":(di={},di[1]=function(ie,re){return"M0,.5 L1,.5 M"+(.5-ie)+",.5 L"+(.5-ie)+",1 M"+(.5+ie)+",.5 L"+(.5+ie)+",1"},di),"\u2566":(Pr={},Pr[1]=function(ie,re){return"M0,"+(.5-re)+" L1,"+(.5-re)+" M0,"+(.5+re)+" L"+(.5-ie)+","+(.5+re)+" L"+(.5-ie)+",1 M1,"+(.5+re)+" L"+(.5+ie)+","+(.5+re)+" L"+(.5+ie)+",1"},Pr),"\u2567":(ti={},ti[1]=function(ie,re){return"M.5,0 L.5,"+(.5-re)+" M0,"+(.5-re)+" L1,"+(.5-re)+" M0,"+(.5+re)+" L1,"+(.5+re)},ti),"\u2568":(Ut={},Ut[1]=function(ie,re){return"M0,.5 L1,.5 M"+(.5-ie)+",.5 L"+(.5-ie)+",0 M"+(.5+ie)+",.5 L"+(.5+ie)+",0"},Ut),"\u2569":(pi={},pi[1]=function(ie,re){return"M0,"+(.5+re)+" L1,"+(.5+re)+" M0,"+(.5-re)+" L"+(.5-ie)+","+(.5-re)+" L"+(.5-ie)+",0 M1,"+(.5-re)+" L"+(.5+ie)+","+(.5-re)+" L"+(.5+ie)+",0"},pi),"\u256A":(gt={},gt[1]=function(ie,re){return"M.5,0 L.5,1 M0,"+(.5-re)+" L1,"+(.5-re)+" M0,"+(.5+re)+" L1,"+(.5+re)},gt),"\u256B":(Ne={},Ne[1]=function(ie,re){return"M0,.5 L1,.5 M"+(.5-ie)+",0 L"+(.5-ie)+",1 M"+(.5+ie)+",0 L"+(.5+ie)+",1"},Ne),"\u256C":(sr={},sr[1]=function(ie,re){return"M0,"+(.5+re)+" L"+(.5-ie)+","+(.5+re)+" L"+(.5-ie)+",1 M1,"+(.5+re)+" L"+(.5+ie)+","+(.5+re)+" L"+(.5+ie)+",1 M0,"+(.5-re)+" L"+(.5-ie)+","+(.5-re)+" L"+(.5-ie)+",0 M1,"+(.5-re)+" L"+(.5+ie)+","+(.5-re)+" L"+(.5+ie)+",0"},sr),"\u2571":(ut={},ut[1]="M1,0 L0,1",ut),"\u2572":(Zt={},Zt[1]="M0,0 L1,1",Zt),"\u2573":(ke={},ke[1]="M1,0 L0,1 M0,0 L1,1",ke),"\u257C":(ar={},ar[1]="M.5,.5 L0,.5",ar[3]="M.5,.5 L1,.5",ar),"\u257D":(tt={},tt[1]="M.5,.5 L.5,0",tt[3]="M.5,.5 L.5,1",tt),"\u257E":(Ae={},Ae[1]="M.5,.5 L1,.5",Ae[3]="M.5,.5 L0,.5",Ae),"\u257F":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L.5,0",je),"\u250D":(lr={},lr[1]="M.5,.5 L.5,1",lr[3]="M.5,.5 L1,.5",lr),"\u250E":(Ke={},Ke[1]="M.5,.5 L1,.5",Ke[3]="M.5,.5 L.5,1",Ke),"\u2511":(Rt={},Rt[1]="M.5,.5 L.5,1",Rt[3]="M.5,.5 L0,.5",Rt),"\u2512":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2515":(cr={},cr[1]="M.5,.5 L.5,0",cr[3]="M.5,.5 L1,.5",cr),"\u2516":(ft={},ft[1]="M.5,.5 L1,.5",ft[3]="M.5,.5 L.5,0",ft),"\u2519":(tr={},tr[1]="M.5,.5 L.5,0",tr[3]="M.5,.5 L0,.5",tr),"\u251A":($t={},$t[1]="M.5,.5 L0,.5",$t[3]="M.5,.5 L.5,0",$t),"\u251D":(Hr={},Hr[1]="M.5,0 L.5,1",Hr[3]="M.5,.5 L1,.5",Hr),"\u251E":(gr={},gr[1]="M0.5,1 L.5,.5 L1,.5",gr[3]="M.5,.5 L.5,0",gr),"\u251F":(rt={},rt[1]="M.5,0 L.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2520":(Ir={},Ir[1]="M.5,.5 L1,.5",Ir[3]="M.5,0 L.5,1",Ir),"\u2521":(yr={},yr[1]="M.5,.5 L.5,1",yr[3]="M.5,0 L.5,.5 L1,.5",yr),"\u2522":(Ot={},Ot[1]="M.5,.5 L.5,0",Ot[3]="M0.5,1 L.5,.5 L1,.5",Ot),"\u2525":(mr={},mr[1]="M.5,0 L.5,1",mr[3]="M.5,.5 L0,.5",mr),"\u2526":(Fr={},Fr[1]="M0,.5 L.5,.5 L.5,1",Fr[3]="M.5,.5 L.5,0",Fr),"\u2527":(Wr={},Wr[1]="M.5,0 L.5,.5 L0,.5",Wr[3]="M.5,.5 L.5,1",Wr),"\u2528":(br={},br[1]="M.5,.5 L0,.5",br[3]="M.5,0 L.5,1",br),"\u2529":(Jt={},Jt[1]="M.5,.5 L.5,1",Jt[3]="M.5,0 L.5,.5 L0,.5",Jt),"\u252A":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M0,.5 L.5,.5 L.5,1",yt),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(Nr={},Nr[1]="M0,.5 L.5,.5 L.5,1",Nr[3]="M.5,.5 L1,.5",Nr),"\u252F":(qt={},qt[1]="M.5,.5 L.5,1",qt[3]="M0,.5 L1,.5",qt),"\u2530":(ur={},ur[1]="M0,.5 L1,.5",ur[3]="M.5,.5 L.5,1",ur),"\u2531":(fr={},fr[1]="M.5,.5 L1,.5",fr[3]="M0,.5 L.5,.5 L.5,1",fr),"\u2532":(kt={},kt[1]="M.5,.5 L0,.5",kt[3]="M0.5,1 L.5,.5 L1,.5",kt),"\u2535":(Et={},Et[1]="M.5,0 L.5,.5 L1,.5",Et[3]="M.5,.5 L0,.5",Et),"\u2536":(dt={},dt[1]="M.5,0 L.5,.5 L0,.5",dt[3]="M.5,.5 L1,.5",dt),"\u2537":(Sr={},Sr[1]="M.5,.5 L.5,0",Sr[3]="M0,.5 L1,.5",Sr),"\u2538":(Cr={},Cr[1]="M0,.5 L1,.5",Cr[3]="M.5,.5 L.5,0",Cr),"\u2539":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,0 L.5,.5 L0,.5",Fe),"\u253A":(Ce={},Ce[1]="M.5,.5 L0,.5",Ce[3]="M.5,0 L.5,.5 L1,.5",Ce),"\u253D":(Dt={},Dt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u253E":(wr={},wr[1]="M.5,0 L.5,1 M.5,.5 L0,.5",wr[3]="M.5,.5 L1,.5",wr),"\u253F":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M0,.5 L1,.5",nt),"\u2540":(De={},De[1]="M0,.5 L1,.5 M.5,.5 L.5,1",De[3]="M.5,.5 L.5,0",De),"\u2541":(Bt={},Bt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Bt[3]="M.5,.5 L.5,1",Bt),"\u2542":(rr={},rr[1]="M0,.5 L1,.5",rr[3]="M.5,0 L.5,1",rr),"\u2543":(Lr={},Lr[1]="M0.5,1 L.5,.5 L1,.5",Lr[3]="M.5,0 L.5,.5 L0,.5",Lr),"\u2544":(ue={},ue[1]="M0,.5 L.5,.5 L.5,1",ue[3]="M.5,0 L.5,.5 L1,.5",ue),"\u2545":(O={},O[1]="M.5,0 L.5,.5 L1,.5",O[3]="M0,.5 L.5,.5 L.5,1",O),"\u2546":(K={},K[1]="M.5,0 L.5,.5 L0,.5",K[3]="M0.5,1 L.5,.5 L1,.5",K),"\u2547":(ne={},ne[1]="M.5,.5 L.5,1",ne[3]="M.5,.5 L.5,0 M0,.5 L1,.5",ne),"\u2548":(fe={},fe[1]="M.5,.5 L.5,0",fe[3]="M0,.5 L1,.5 M.5,.5 L.5,1",fe),"\u2549":(Me={},Me[1]="M.5,.5 L1,.5",Me[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Me),"\u254A":(Oe={},Oe[1]="M.5,.5 L0,.5",Oe[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Oe),"\u254C":(ge={},ge[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ge),"\u254D":(Je={},Je[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Je),"\u2504":(mt={},mt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",mt),"\u2505":(xr={},xr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",xr),"\u2508":(zt={},zt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",zt),"\u2509":(Ri={},Ri[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ri),"\u254E":(Oi={},Oi[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Oi),"\u254F":(jr={},jr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",jr),"\u2506":(vi={},vi[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",vi),"\u2507":(Di={},Di[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Di),"\u250A":(_i={},_i[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",_i),"\u250B":(Bi={},Bi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Bi),"\u256D":(Pi={},Pi[1]="C.5,1,.5,.5,1,.5",Pi),"\u256E":(Hi={},Hi[1]="C.5,1,.5,.5,0,.5",Hi),"\u256F":(Ii={},Ii[1]="C.5,0,.5,.5,0,.5",Ii),"\u2570":(nn={},nn[1]="C.5,0,.5,.5,1,.5",nn)},d.tryDrawCustomChar=function(ie,re,nr,gi,yi,Ze){var Vt=d.blockElementDefinitions[re];if(Vt)return function(bt,Pt,kr,Ur,qr,zr){for(var St=0;St<Pt.length;St++){var Ht=Pt[St],Ge=qr/8,Ve=zr/8;bt.fillRect(kr+Ht.x*Ge,Ur+Ht.y*Ve,Ht.w*Ge,Ht.h*Ve)}}(ie,Vt,nr,gi,yi,Ze),!0;var or=Rn[re];if(or)return function(bt,Pt,kr,Ur,qr,zr){var St,Ht=ir.get(Pt);Ht||(Ht=new Map,ir.set(Pt,Ht));var Ge=bt.fillStyle;if(typeof Ge!="string")throw new Error('Unexpected fillStyle type "'+Ge+'"');var Ve=Ht.get(Ge);if(!Ve){var Qt=Pt[0].length,Kr=Pt.length,hr=document.createElement("canvas");hr.width=Qt,hr.height=Kr;var mi=(0,Mn.throwIfFalsy)(hr.getContext("2d")),Ct=new ImageData(Qt,Kr),Er=void 0,wt=void 0,ii=void 0,bi=void 0;if(Ge.startsWith("#"))Er=parseInt(Ge.substr(1,2),16),wt=parseInt(Ge.substr(3,2),16),ii=parseInt(Ge.substr(5,2),16),bi=Ge.length>7&&parseInt(Ge.substr(7,2),16)||1;else{if(!Ge.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ge+'" when drawing pattern glyph');Er=(St=Ge.substring(5,Ge.length-1).split(",").map(function(so){return parseFloat(so)}))[0],wt=St[1],ii=St[2],bi=St[3]}for(var Kt=0;Kt<Kr;Kt++)for(var Gr=0;Gr<Qt;Gr++)Ct.data[4*(Kt*Qt+Gr)]=Er,Ct.data[4*(Kt*Qt+Gr)+1]=wt,Ct.data[4*(Kt*Qt+Gr)+2]=ii,Ct.data[4*(Kt*Qt+Gr)+3]=Pt[Kt][Gr]*(255*bi);mi.putImageData(Ct,0,0),Ve=(0,Mn.throwIfFalsy)(bt.createPattern(hr,null)),Ht.set(Ge,Ve)}bt.fillStyle=Ve,bt.fillRect(kr,Ur,qr,zr)}(ie,or,nr,gi,yi,Ze),!0;var ri=d.boxDrawingDefinitions[re];return!!ri&&(function(bt,Pt,kr,Ur,qr,zr){bt.strokeStyle=bt.fillStyle;for(var St=0,Ht=Object.entries(Pt);St<Ht.length;St++){var Ge=Ht[St],Ve=Ge[0],Qt=Ge[1];bt.beginPath(),bt.lineWidth=window.devicePixelRatio*Number.parseInt(Ve);for(var Kr=0,hr=(typeof Qt=="function"?Qt(.15,.15/zr*qr):Qt).split(" ");Kr<hr.length;Kr++){var mi=hr[Kr],Ct=mi[0],Er=oo[Ct];if(Er){var wt=mi.substring(1).split(",");wt[0]&&wt[1]&&Er(bt,Fi(wt,qr,zr,kr,Ur))}else console.error('Could not find drawing instructions for "'+Ct+'"')}bt.stroke(),bt.closePath()}}(ie,ri,nr,gi,yi,Ze),!0)};var ir=new Map;function On(ie,re,nr){return nr===void 0&&(nr=0),Math.max(Math.min(ie,re),nr)}var oo={C:function(ie,re){return ie.bezierCurveTo(re[0],re[1],re[2],re[3],re[4],re[5])},L:function(ie,re){return ie.lineTo(re[0],re[1])},M:function(ie,re){return ie.moveTo(re[0],re[1])}};function Fi(ie,re,nr,gi,yi){var Ze=ie.map(function(ri){return parseFloat(ri)||parseInt(ri)});if(Ze.length<2)throw new Error("Too few arguments for instruction");for(var Vt=0;Vt<Ze.length;Vt+=2)Ze[Vt]*=re,Ze[Vt]!==0&&(Ze[Vt]=On(Math.round(Ze[Vt]+.5)-.5,re,0)),Ze[Vt]+=gi;for(var or=1;or<Ze.length;or+=2)Ze[or]*=nr,Ze[or]!==0&&(Ze[or]=On(Math.round(Ze[or]+.5)-.5,nr,0)),Ze[or]+=yi;return Ze}},3700:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GridCache=void 0;var x=function(){function v(){this.cache=[]}return v.prototype.resize=function(y,S){for(var m=0;m<y;m++){this.cache.length<=m&&this.cache.push([]);for(var b=this.cache[m].length;b<S;b++)this.cache[m].push(void 0);this.cache[m].length=S}this.cache.length=y},v.prototype.clear=function(){for(var y=0;y<this.cache.length;y++)for(var S=0;S<this.cache[y].length;S++)this.cache[y][S]=void 0},v}();d.GridCache=x},5098:function(J,d,x){var v,y=this&&this.__extends||(v=function(l,a){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},v(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=l}v(l,a),l.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),S=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},m=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.LinkRenderLayer=void 0;var b=x(1546),C=x(8803),u=x(2040),h=x(2585),p=function(l){function a(o,s,f,_,L,A,I,P){var M=l.call(this,o,"link",s,!0,f,_,I,P)||this;return L.onShowLinkUnderline(function(k){return M._onShowLinkUnderline(k)}),L.onHideLinkUnderline(function(k){return M._onHideLinkUnderline(k)}),A.onShowLinkUnderline(function(k){return M._onShowLinkUnderline(k)}),A.onHideLinkUnderline(function(k){return M._onHideLinkUnderline(k)}),M}return y(a,l),a.prototype.resize=function(o){l.prototype.resize.call(this,o),this._state=void 0},a.prototype.reset=function(){this._clearCurrentLink()},a.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},a.prototype._onShowLinkUnderline=function(o){if(o.fg===C.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&(0,u.is256Color)(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var s=o.y1+1;s<o.y2;s++)this._fillBottomLineAtCells(0,s,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},a.prototype._onHideLinkUnderline=function(o){this._clearCurrentLink()},S([m(6,h.IBufferService),m(7,h.IOptionsService)],a)}(b.BaseRenderLayer);d.LinkRenderLayer=p},3525:function(J,d,x){var v,y=this&&this.__extends||(v=function(L,A){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,P){I.__proto__=P}||function(I,P){for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&(I[M]=P[M])},v(L,A)},function(L,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function I(){this.constructor=L}v(L,A),L.prototype=A===null?Object.create(A):(I.prototype=A.prototype,new I)}),S=this&&this.__decorate||function(L,A,I,P){var M,k=arguments.length,D=k<3?A:P===null?P=Object.getOwnPropertyDescriptor(A,I):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(L,A,I,P);else for(var E=L.length-1;E>=0;E--)(M=L[E])&&(D=(k<3?M(D):k>3?M(A,I,D):M(A,I))||D);return k>3&&D&&Object.defineProperty(A,I,D),D},m=this&&this.__param||function(L,A){return function(I,P){A(I,P,L)}};Object.defineProperty(d,"__esModule",{value:!0}),d.Renderer=void 0;var b=x(9596),C=x(4149),u=x(2512),h=x(5098),p=x(844),l=x(4725),a=x(2585),o=x(1420),s=x(8460),f=1,_=function(L){function A(I,P,M,k,D,E,U,W){var B=L.call(this)||this;B._colors=I,B._screenElement=P,B._bufferService=E,B._charSizeService=U,B._optionsService=W,B._id=f++,B._onRequestRedraw=new s.EventEmitter;var F=B._optionsService.options.allowTransparency;return B._renderLayers=[D.createInstance(b.TextRenderLayer,B._screenElement,0,B._colors,F,B._id),D.createInstance(C.SelectionRenderLayer,B._screenElement,1,B._colors,B._id),D.createInstance(h.LinkRenderLayer,B._screenElement,2,B._colors,B._id,M,k),D.createInstance(u.CursorRenderLayer,B._screenElement,3,B._colors,B._id,B._onRequestRedraw)],B.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},B._devicePixelRatio=window.devicePixelRatio,B._updateDimensions(),B.onOptionsChanged(),B}return y(A,L),Object.defineProperty(A.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){for(var I=0,P=this._renderLayers;I<P.length;I++)P[I].dispose();L.prototype.dispose.call(this),(0,o.removeTerminalFromCache)(this._id)},A.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},A.prototype.setColors=function(I){this._colors=I;for(var P=0,M=this._renderLayers;P<M.length;P++){var k=M[P];k.setColors(this._colors),k.reset()}},A.prototype.onResize=function(I,P){this._updateDimensions();for(var M=0,k=this._renderLayers;M<k.length;M++)k[M].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},A.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},A.prototype.onBlur=function(){this._runOperation(function(I){return I.onBlur()})},A.prototype.onFocus=function(){this._runOperation(function(I){return I.onFocus()})},A.prototype.onSelectionChanged=function(I,P,M){M===void 0&&(M=!1),this._runOperation(function(k){return k.onSelectionChanged(I,P,M)})},A.prototype.onCursorMove=function(){this._runOperation(function(I){return I.onCursorMove()})},A.prototype.onOptionsChanged=function(){this._runOperation(function(I){return I.onOptionsChanged()})},A.prototype.clear=function(){this._runOperation(function(I){return I.reset()})},A.prototype._runOperation=function(I){for(var P=0,M=this._renderLayers;P<M.length;P++)I(M[P])},A.prototype.renderRows=function(I,P){for(var M=0,k=this._renderLayers;M<k.length;M++)k[M].onGridChanged(I,P)},A.prototype.clearTextureAtlas=function(){for(var I=0,P=this._renderLayers;I<P.length;I++)P[I].clearTextureAtlas()},A.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},S([m(4,a.IInstantiationService),m(5,a.IBufferService),m(6,l.ICharSizeService),m(7,a.IOptionsService)],A)}(p.Disposable);d.Renderer=_},1752:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.throwIfFalsy=void 0,d.throwIfFalsy=function(x){if(!x)throw new Error("value must not be falsy");return x}},4149:function(J,d,x){var v,y=this&&this.__extends||(v=function(h,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(l[o]=a[o])},v(h,p)},function(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function l(){this.constructor=h}v(h,p),h.prototype=p===null?Object.create(p):(l.prototype=p.prototype,new l)}),S=this&&this.__decorate||function(h,p,l,a){var o,s=arguments.length,f=s<3?p:a===null?a=Object.getOwnPropertyDescriptor(p,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(h,p,l,a);else for(var _=h.length-1;_>=0;_--)(o=h[_])&&(f=(s<3?o(f):s>3?o(p,l,f):o(p,l))||f);return s>3&&f&&Object.defineProperty(p,l,f),f},m=this&&this.__param||function(h,p){return function(l,a){p(l,a,h)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionRenderLayer=void 0;var b=x(1546),C=x(2585),u=function(h){function p(l,a,o,s,f,_){var L=h.call(this,l,"selection",a,!0,o,s,f,_)||this;return L._clearState(),L}return y(p,h),p.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},p.prototype.resize=function(l){h.prototype.resize.call(this,l),this._clearState()},p.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},p.prototype.onSelectionChanged=function(l,a,o){if(this._didStateChange(l,a,o,this._bufferService.buffer.ydisp))if(this._clearAll(),l&&a){var s=l[1]-this._bufferService.buffer.ydisp,f=a[1]-this._bufferService.buffer.ydisp,_=Math.max(s,0),L=Math.min(f,this._bufferService.rows-1);if(_>=this._bufferService.rows||L<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,o){var A=l[0],I=a[0]-A,P=L-_+1;this._fillCells(A,_,I,P)}else{A=s===_?l[0]:0;var M=_===f?a[0]:this._bufferService.cols;this._fillCells(A,_,M-A,1);var k=Math.max(L-_-1,0);if(this._fillCells(0,_+1,this._bufferService.cols,k),_!==L){var D=f===L?a[0]:this._bufferService.cols;this._fillCells(0,L,D,1)}}this._state.start=[l[0],l[1]],this._state.end=[a[0],a[1]],this._state.columnSelectMode=o,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},p.prototype._didStateChange=function(l,a,o,s){return!this._areCoordinatesEqual(l,this._state.start)||!this._areCoordinatesEqual(a,this._state.end)||o!==this._state.columnSelectMode||s!==this._state.ydisp},p.prototype._areCoordinatesEqual=function(l,a){return!(!l||!a)&&l[0]===a[0]&&l[1]===a[1]},S([m(4,C.IBufferService),m(5,C.IOptionsService)],p)}(b.BaseRenderLayer);d.SelectionRenderLayer=u},9596:function(J,d,x){var v,y=this&&this.__extends||(v=function(f,_){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,A){L.__proto__=A}||function(L,A){for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(L[I]=A[I])},v(f,_)},function(f,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function L(){this.constructor=f}v(f,_),f.prototype=_===null?Object.create(_):(L.prototype=_.prototype,new L)}),S=this&&this.__decorate||function(f,_,L,A){var I,P=arguments.length,M=P<3?_:A===null?A=Object.getOwnPropertyDescriptor(_,L):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(f,_,L,A);else for(var k=f.length-1;k>=0;k--)(I=f[k])&&(M=(P<3?I(M):P>3?I(_,L,M):I(_,L))||M);return P>3&&M&&Object.defineProperty(_,L,M),M},m=this&&this.__param||function(f,_){return function(L,A){_(L,A,f)}};Object.defineProperty(d,"__esModule",{value:!0}),d.TextRenderLayer=void 0;var b=x(3700),C=x(1546),u=x(3734),h=x(643),p=x(511),l=x(2585),a=x(4725),o=x(4269),s=function(f){function _(L,A,I,P,M,k,D,E){var U=f.call(this,L,"text",A,P,I,M,k,D)||this;return U._characterJoinerService=E,U._characterWidth=0,U._characterFont="",U._characterOverlapCache={},U._workCell=new p.CellData,U._state=new b.GridCache,U}return y(_,f),_.prototype.resize=function(L){f.prototype.resize.call(this,L);var A=this._getFont(!1,!1);this._characterWidth===L.scaledCharWidth&&this._characterFont===A||(this._characterWidth=L.scaledCharWidth,this._characterFont=A,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},_.prototype.reset=function(){this._state.clear(),this._clearAll()},_.prototype._forEachCell=function(L,A,I){for(var P=L;P<=A;P++)for(var M=P+this._bufferService.buffer.ydisp,k=this._bufferService.buffer.lines.get(M),D=this._characterJoinerService.getJoinedCharacters(M),E=0;E<this._bufferService.cols;E++){k.loadCell(E,this._workCell);var U=this._workCell,W=!1,B=E;if(U.getWidth()!==0){if(D.length>0&&E===D[0][0]){W=!0;var F=D.shift();U=new o.JoinedCellData(this._workCell,k.translateToString(!0,F[0],F[1]),F[1]-F[0]),B=F[1]-1}!W&&this._isOverlapping(U)&&B<k.length-1&&k.getCodePoint(B+1)===h.NULL_CELL_CODE&&(U.content&=-12582913,U.content|=2<<22),I(U,E,P),E=B}}},_.prototype._drawBackground=function(L,A){var I=this,P=this._ctx,M=this._bufferService.cols,k=0,D=0,E=null;P.save(),this._forEachCell(L,A,function(U,W,B){var F=null;U.isInverse()?F=U.isFgDefault()?I._colors.foreground.css:U.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(U.getFgColor()).join(",")+")":I._colors.ansi[U.getFgColor()].css:U.isBgRGB()?F="rgb("+u.AttributeData.toColorRGB(U.getBgColor()).join(",")+")":U.isBgPalette()&&(F=I._colors.ansi[U.getBgColor()].css),E===null&&(k=W,D=B),B!==D?(P.fillStyle=E||"",I._fillCells(k,D,M-k,1),k=W,D=B):E!==F&&(P.fillStyle=E||"",I._fillCells(k,D,W-k,1),k=W,D=B),E=F}),E!==null&&(P.fillStyle=E,this._fillCells(k,D,M-k,1)),P.restore()},_.prototype._drawForeground=function(L,A){var I=this;this._forEachCell(L,A,function(P,M,k){if(!P.isInvisible()&&(I._drawChars(P,M,k),P.isUnderline()||P.isStrikethrough())){if(I._ctx.save(),P.isInverse())if(P.isBgDefault())I._ctx.fillStyle=I._colors.background.css;else if(P.isBgRGB())I._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(P.getBgColor()).join(",")+")";else{var D=P.getBgColor();I._optionsService.options.drawBoldTextInBrightColors&&P.isBold()&&D<8&&(D+=8),I._ctx.fillStyle=I._colors.ansi[D].css}else if(P.isFgDefault())I._ctx.fillStyle=I._colors.foreground.css;else if(P.isFgRGB())I._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(P.getFgColor()).join(",")+")";else{var E=P.getFgColor();I._optionsService.options.drawBoldTextInBrightColors&&P.isBold()&&E<8&&(E+=8),I._ctx.fillStyle=I._colors.ansi[E].css}P.isStrikethrough()&&I._fillMiddleLineAtCells(M,k,P.getWidth()),P.isUnderline()&&I._fillBottomLineAtCells(M,k,P.getWidth()),I._ctx.restore()}})},_.prototype.onGridChanged=function(L,A){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,L,this._bufferService.cols,A-L+1),this._drawBackground(L,A),this._drawForeground(L,A))},_.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},_.prototype._isOverlapping=function(L){if(L.getWidth()!==1||L.getCode()<256)return!1;var A=L.getChars();if(this._characterOverlapCache.hasOwnProperty(A))return this._characterOverlapCache[A];this._ctx.save(),this._ctx.font=this._characterFont;var I=Math.floor(this._ctx.measureText(A).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[A]=I,I},S([m(5,l.IBufferService),m(6,l.IOptionsService),m(7,a.ICharacterJoinerService)],_)}(C.BaseRenderLayer);d.TextRenderLayer=s},9616:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseCharAtlas=void 0;var x=function(){function v(){this._didWarmUp=!1}return v.prototype.dispose=function(){},v.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},v.prototype._doWarmUp=function(){},v.prototype.clear=function(){},v.prototype.beginFrame=function(){},v}();d.BaseCharAtlas=x},1420:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.removeTerminalFromCache=d.acquireCharAtlas=void 0;var v=x(2040),y=x(1906),S=[];d.acquireCharAtlas=function(m,b,C,u,h){for(var p=(0,v.generateConfig)(u,h,m,C),l=0;l<S.length;l++){var a=(o=S[l]).ownedBy.indexOf(b);if(a>=0){if((0,v.configEquals)(o.config,p))return o.atlas;o.ownedBy.length===1?(o.atlas.dispose(),S.splice(l,1)):o.ownedBy.splice(a,1);break}}for(l=0;l<S.length;l++){var o=S[l];if((0,v.configEquals)(o.config,p))return o.ownedBy.push(b),o.atlas}var s={atlas:new y.DynamicCharAtlas(document,p),config:p,ownedBy:[b]};return S.push(s),s.atlas},d.removeTerminalFromCache=function(m){for(var b=0;b<S.length;b++){var C=S[b].ownedBy.indexOf(m);if(C!==-1){S[b].ownedBy.length===1?(S[b].atlas.dispose(),S.splice(b,1)):S[b].ownedBy.splice(C,1);break}}}},2040:function(J,d,x){var v=this&&this.__spreadArray||function(S,m,b){if(b||arguments.length===2)for(var C,u=0,h=m.length;u<h;u++)!C&&u in m||(C||(C=Array.prototype.slice.call(m,0,u)),C[u]=m[u]);return S.concat(C||Array.prototype.slice.call(m))};Object.defineProperty(d,"__esModule",{value:!0}),d.is256Color=d.configEquals=d.generateConfig=void 0;var y=x(643);d.generateConfig=function(S,m,b,C){var u={foreground:C.foreground,background:C.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:v([],C.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:S,scaledCharHeight:m,fontFamily:b.fontFamily,fontSize:b.fontSize,fontWeight:b.fontWeight,fontWeightBold:b.fontWeightBold,allowTransparency:b.allowTransparency,colors:u}},d.configEquals=function(S,m){for(var b=0;b<S.colors.ansi.length;b++)if(S.colors.ansi[b].rgba!==m.colors.ansi[b].rgba)return!1;return S.devicePixelRatio===m.devicePixelRatio&&S.fontFamily===m.fontFamily&&S.fontSize===m.fontSize&&S.fontWeight===m.fontWeight&&S.fontWeightBold===m.fontWeightBold&&S.allowTransparency===m.allowTransparency&&S.scaledCharWidth===m.scaledCharWidth&&S.scaledCharHeight===m.scaledCharHeight&&S.colors.foreground===m.colors.foreground&&S.colors.background===m.colors.background},d.is256Color=function(S){return S<y.DEFAULT_COLOR}},8803:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CHAR_ATLAS_CELL_SPACING=d.TEXT_BASELINE=d.DIM_OPACITY=d.INVERTED_DEFAULT_COLOR=void 0;var v=x(6114);d.INVERTED_DEFAULT_COLOR=257,d.DIM_OPACITY=.5,d.TEXT_BASELINE=v.isFirefox?"bottom":"ideographic",d.CHAR_ATLAS_CELL_SPACING=1},1906:function(J,d,x){var v,y=this&&this.__extends||(v=function(A,I){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,M){P.__proto__=M}||function(P,M){for(var k in M)Object.prototype.hasOwnProperty.call(M,k)&&(P[k]=M[k])},v(A,I)},function(A,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function P(){this.constructor=A}v(A,I),A.prototype=I===null?Object.create(I):(P.prototype=I.prototype,new P)});Object.defineProperty(d,"__esModule",{value:!0}),d.NoneCharAtlas=d.DynamicCharAtlas=d.getGlyphCacheKey=void 0;var S=x(8803),m=x(9616),b=x(5680),C=x(7001),u=x(6114),h=x(1752),p=x(4774),l=1024,a=1024,o={css:"rgba(0, 0, 0, 0)",rgba:0};function s(A){return A.code<<21|A.bg<<12|A.fg<<3|(A.bold?0:4)+(A.dim?0:2)+(A.italic?0:1)}d.getGlyphCacheKey=s;var f=function(A){function I(P,M){var k=A.call(this)||this;k._config=M,k._drawToCacheCount=0,k._glyphsWaitingOnBitmap=[],k._bitmapCommitTimeout=null,k._bitmap=null,k._cacheCanvas=P.createElement("canvas"),k._cacheCanvas.width=l,k._cacheCanvas.height=a,k._cacheCtx=(0,h.throwIfFalsy)(k._cacheCanvas.getContext("2d",{alpha:!0}));var D=P.createElement("canvas");D.width=k._config.scaledCharWidth,D.height=k._config.scaledCharHeight,k._tmpCtx=(0,h.throwIfFalsy)(D.getContext("2d",{alpha:k._config.allowTransparency})),k._width=Math.floor(l/k._config.scaledCharWidth),k._height=Math.floor(a/k._config.scaledCharHeight);var E=k._width*k._height;return k._cacheMap=new C.LRUMap(E),k._cacheMap.prealloc(E),k}return y(I,A),I.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},I.prototype.beginFrame=function(){this._drawToCacheCount=0},I.prototype.clear=function(){if(this._cacheMap.size>0){var P=this._width*this._height;this._cacheMap=new C.LRUMap(P),this._cacheMap.prealloc(P)}this._cacheCtx.clearRect(0,0,l,a),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},I.prototype.draw=function(P,M,k,D){if(M.code===32)return!0;if(!this._canCache(M))return!1;var E=s(M),U=this._cacheMap.get(E);if(U!=null)return this._drawFromCache(P,U,k,D),!0;if(this._drawToCacheCount<100){var W;W=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var B=this._drawToCache(M,W);return this._cacheMap.set(E,B),this._drawFromCache(P,B,k,D),!0}return!1},I.prototype._canCache=function(P){return P.code<256},I.prototype._toCoordinateX=function(P){return P%this._width*this._config.scaledCharWidth},I.prototype._toCoordinateY=function(P){return Math.floor(P/this._width)*this._config.scaledCharHeight},I.prototype._drawFromCache=function(P,M,k,D){if(!M.isEmpty){var E=this._toCoordinateX(M.index),U=this._toCoordinateY(M.index);P.drawImage(M.inBitmap?this._bitmap:this._cacheCanvas,E,U,this._config.scaledCharWidth,this._config.scaledCharHeight,k,D,this._config.scaledCharWidth,this._config.scaledCharHeight)}},I.prototype._getColorFromAnsiIndex=function(P){return P<this._config.colors.ansi.length?this._config.colors.ansi[P]:b.DEFAULT_ANSI_COLORS[P]},I.prototype._getBackgroundColor=function(P){return this._config.allowTransparency?o:P.bg===S.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:P.bg<256?this._getColorFromAnsiIndex(P.bg):this._config.colors.background},I.prototype._getForegroundColor=function(P){return P.fg===S.INVERTED_DEFAULT_COLOR?p.color.opaque(this._config.colors.background):P.fg<256?this._getColorFromAnsiIndex(P.fg):this._config.colors.foreground},I.prototype._drawToCache=function(P,M){this._drawToCacheCount++,this._tmpCtx.save();var k=this._getBackgroundColor(P);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var D=P.bold?this._config.fontWeightBold:this._config.fontWeight,E=P.italic?"italic":"";this._tmpCtx.font=E+" "+D+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=S.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(P).css,P.dim&&(this._tmpCtx.globalAlpha=S.DIM_OPACITY),this._tmpCtx.fillText(P.chars,0,this._config.scaledCharHeight);var U=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),W=!1;if(this._config.allowTransparency||(W=L(U,k)),W&&P.chars==="_"&&!this._config.allowTransparency)for(var B=1;B<=5&&(this._tmpCtx.fillText(P.chars,0,this._config.scaledCharHeight-B),W=L(U=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),k));B++);this._tmpCtx.restore();var F=this._toCoordinateX(M),X=this._toCoordinateY(M);this._cacheCtx.putImageData(U,F,X);var Z={index:M,isEmpty:W,inBitmap:!1};return this._addGlyphToBitmap(Z),Z},I.prototype._addGlyphToBitmap=function(P){var M=this;!("createImageBitmap"in window)||u.isFirefox||u.isSafari||(this._glyphsWaitingOnBitmap.push(P),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return M._generateBitmap()},100)))},I.prototype._generateBitmap=function(){var P=this,M=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(k){P._bitmap=k;for(var D=0;D<M.length;D++)M[D].inBitmap=!0}),this._bitmapCommitTimeout=null},I}(m.BaseCharAtlas);d.DynamicCharAtlas=f;var _=function(A){function I(P,M){return A.call(this)||this}return y(I,A),I.prototype.draw=function(P,M,k,D){return!1},I}(m.BaseCharAtlas);function L(A,I){for(var P=!0,M=I.rgba>>>24,k=I.rgba>>>16&255,D=I.rgba>>>8&255,E=0;E<A.data.length;E+=4)A.data[E]===M&&A.data[E+1]===k&&A.data[E+2]===D?A.data[E+3]=0:P=!1;return P}d.NoneCharAtlas=_},7001:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LRUMap=void 0;var x=function(){function v(y){this.capacity=y,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return v.prototype._unlinkNode=function(y){var S=y.prev,m=y.next;y===this._head&&(this._head=m),y===this._tail&&(this._tail=S),S!==null&&(S.next=m),m!==null&&(m.prev=S)},v.prototype._appendNode=function(y){var S=this._tail;S!==null&&(S.next=y),y.prev=S,y.next=null,this._tail=y,this._head===null&&(this._head=y)},v.prototype.prealloc=function(y){for(var S=this._nodePool,m=0;m<y;m++)S.push({prev:null,next:null,key:null,value:null})},v.prototype.get=function(y){var S=this._map[y];return S!==void 0?(this._unlinkNode(S),this._appendNode(S),S.value):null},v.prototype.peekValue=function(y){var S=this._map[y];return S!==void 0?S.value:null},v.prototype.peek=function(){var y=this._head;return y===null?null:y.value},v.prototype.set=function(y,S){var m=this._map[y];if(m!==void 0)m=this._map[y],this._unlinkNode(m),m.value=S;else if(this.size>=this.capacity)m=this._head,this._unlinkNode(m),delete this._map[m.key],m.key=y,m.value=S,this._map[y]=m;else{var b=this._nodePool;b.length>0?((m=b.pop()).key=y,m.value=S):m={prev:null,next:null,key:y,value:S},this._map[y]=m,this.size++}this._appendNode(m)},v}();d.LRUMap=x},1296:function(J,d,x){var v,y=this&&this.__extends||(v=function(P,M){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,D){k.__proto__=D}||function(k,D){for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(k[E]=D[E])},v(P,M)},function(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function k(){this.constructor=P}v(P,M),P.prototype=M===null?Object.create(M):(k.prototype=M.prototype,new k)}),S=this&&this.__decorate||function(P,M,k,D){var E,U=arguments.length,W=U<3?M:D===null?D=Object.getOwnPropertyDescriptor(M,k):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(P,M,k,D);else for(var B=P.length-1;B>=0;B--)(E=P[B])&&(W=(U<3?E(W):U>3?E(M,k,W):E(M,k))||W);return U>3&&W&&Object.defineProperty(M,k,W),W},m=this&&this.__param||function(P,M){return function(k,D){M(k,D,P)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRenderer=void 0;var b=x(3787),C=x(8803),u=x(844),h=x(4725),p=x(2585),l=x(8460),a=x(4774),o=x(9631),s="xterm-dom-renderer-owner-",f="xterm-fg-",_="xterm-bg-",L="xterm-focus",A=1,I=function(P){function M(k,D,E,U,W,B,F,X,Z,se){var ae=P.call(this)||this;return ae._colors=k,ae._element=D,ae._screenElement=E,ae._viewportElement=U,ae._linkifier=W,ae._linkifier2=B,ae._charSizeService=X,ae._optionsService=Z,ae._bufferService=se,ae._terminalClass=A++,ae._rowElements=[],ae._rowContainer=document.createElement("div"),ae._rowContainer.classList.add("xterm-rows"),ae._rowContainer.style.lineHeight="normal",ae._rowContainer.setAttribute("aria-hidden","true"),ae._refreshRowElements(ae._bufferService.cols,ae._bufferService.rows),ae._selectionContainer=document.createElement("div"),ae._selectionContainer.classList.add("xterm-selection"),ae._selectionContainer.setAttribute("aria-hidden","true"),ae.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},ae._updateDimensions(),ae._injectCss(),ae._rowFactory=F.createInstance(b.DomRendererRowFactory,document,ae._colors),ae._element.classList.add(s+ae._terminalClass),ae._screenElement.appendChild(ae._rowContainer),ae._screenElement.appendChild(ae._selectionContainer),ae._linkifier.onShowLinkUnderline(function(me){return ae._onLinkHover(me)}),ae._linkifier.onHideLinkUnderline(function(me){return ae._onLinkLeave(me)}),ae._linkifier2.onShowLinkUnderline(function(me){return ae._onLinkHover(me)}),ae._linkifier2.onHideLinkUnderline(function(me){return ae._onLinkLeave(me)}),ae}return y(M,P),Object.defineProperty(M.prototype,"onRequestRedraw",{get:function(){return new l.EventEmitter().event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){this._element.classList.remove(s+this._terminalClass),(0,o.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),P.prototype.dispose.call(this)},M.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var k=0,D=this._rowElements;k<D.length;k++){var E=D[k];E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var U=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},M.prototype.setColors=function(k){this._colors=k,this._injectCss()},M.prototype._injectCss=function(){var k=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var D=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";D+=this._terminalSelector+" span:not(."+b.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+b.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+b.ITALIC_CLASS+" { font-style: italic;}",D+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",D+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",D+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+":not(."+b.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",D+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(E,U){D+=k._terminalSelector+" ."+f+U+" { color: "+E.css+"; }"+k._terminalSelector+" ."+_+U+" { background-color: "+E.css+"; }"}),D+=this._terminalSelector+" ."+f+C.INVERTED_DEFAULT_COLOR+" { color: "+a.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+_+C.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=D},M.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},M.prototype._refreshRowElements=function(k,D){for(var E=this._rowElements.length;E<=D;E++){var U=document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>D;)this._rowContainer.removeChild(this._rowElements.pop())},M.prototype.onResize=function(k,D){this._refreshRowElements(k,D),this._updateDimensions()},M.prototype.onCharSizeChanged=function(){this._updateDimensions()},M.prototype.onBlur=function(){this._rowContainer.classList.remove(L)},M.prototype.onFocus=function(){this._rowContainer.classList.add(L)},M.prototype.onSelectionChanged=function(k,D,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(k&&D){var U=k[1]-this._bufferService.buffer.ydisp,W=D[1]-this._bufferService.buffer.ydisp,B=Math.max(U,0),F=Math.min(W,this._bufferService.rows-1);if(!(B>=this._bufferService.rows||F<0)){var X=document.createDocumentFragment();if(E)X.appendChild(this._createSelectionElement(B,k[0],D[0],F-B+1));else{var Z=U===B?k[0]:0,se=B===W?D[0]:this._bufferService.cols;X.appendChild(this._createSelectionElement(B,Z,se));var ae=F-B-1;if(X.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,ae)),B!==F){var me=W===F?D[0]:this._bufferService.cols;X.appendChild(this._createSelectionElement(F,0,me))}}this._selectionContainer.appendChild(X)}}},M.prototype._createSelectionElement=function(k,D,E,U){U===void 0&&(U=1);var W=document.createElement("div");return W.style.height=U*this.dimensions.actualCellHeight+"px",W.style.top=k*this.dimensions.actualCellHeight+"px",W.style.left=D*this.dimensions.actualCellWidth+"px",W.style.width=this.dimensions.actualCellWidth*(E-D)+"px",W},M.prototype.onCursorMove=function(){},M.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},M.prototype.clear=function(){for(var k=0,D=this._rowElements;k<D.length;k++)D[k].innerText=""},M.prototype.renderRows=function(k,D){for(var E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,U=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),W=this._optionsService.options.cursorBlink,B=k;B<=D;B++){var F=this._rowElements[B];F.innerText="";var X=B+this._bufferService.buffer.ydisp,Z=this._bufferService.buffer.lines.get(X),se=this._optionsService.options.cursorStyle;F.appendChild(this._rowFactory.createRow(Z,X,X===E,se,U,W,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(M.prototype,"_terminalSelector",{get:function(){return"."+s+this._terminalClass},enumerable:!1,configurable:!0}),M.prototype._onLinkHover=function(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!0)},M.prototype._onLinkLeave=function(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!1)},M.prototype._setCellUnderline=function(k,D,E,U,W,B){for(;k!==D||E!==U;){var F=this._rowElements[E];if(!F)return;var X=F.children[k];X&&(X.style.textDecoration=B?"underline":"none"),++k>=W&&(k=0,E++)}},S([m(6,p.IInstantiationService),m(7,h.ICharSizeService),m(8,p.IOptionsService),m(9,p.IBufferService)],M)}(u.Disposable);d.DomRenderer=I},3787:function(J,d,x){var v=this&&this.__decorate||function(o,s,f,_){var L,A=arguments.length,I=A<3?s:_===null?_=Object.getOwnPropertyDescriptor(s,f):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(o,s,f,_);else for(var P=o.length-1;P>=0;P--)(L=o[P])&&(I=(A<3?L(I):A>3?L(s,f,I):L(s,f))||I);return A>3&&I&&Object.defineProperty(s,f,I),I},y=this&&this.__param||function(o,s){return function(f,_){s(f,_,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DomRendererRowFactory=d.CURSOR_STYLE_UNDERLINE_CLASS=d.CURSOR_STYLE_BAR_CLASS=d.CURSOR_STYLE_BLOCK_CLASS=d.CURSOR_BLINK_CLASS=d.CURSOR_CLASS=d.STRIKETHROUGH_CLASS=d.UNDERLINE_CLASS=d.ITALIC_CLASS=d.DIM_CLASS=d.BOLD_CLASS=void 0;var S=x(8803),m=x(643),b=x(511),C=x(2585),u=x(4774),h=x(4725),p=x(4269);d.BOLD_CLASS="xterm-bold",d.DIM_CLASS="xterm-dim",d.ITALIC_CLASS="xterm-italic",d.UNDERLINE_CLASS="xterm-underline",d.STRIKETHROUGH_CLASS="xterm-strikethrough",d.CURSOR_CLASS="xterm-cursor",d.CURSOR_BLINK_CLASS="xterm-cursor-blink",d.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",d.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",d.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var l=function(){function o(s,f,_,L,A){this._document=s,this._colors=f,this._characterJoinerService=_,this._optionsService=L,this._coreService=A,this._workCell=new b.CellData}return o.prototype.setColors=function(s){this._colors=s},o.prototype.createRow=function(s,f,_,L,A,I,P,M){for(var k=this._document.createDocumentFragment(),D=this._characterJoinerService.getJoinedCharacters(f),E=0,U=Math.min(s.length,M)-1;U>=0;U--)if(s.loadCell(U,this._workCell).getCode()!==m.NULL_CELL_CODE||_&&U===A){E=U+1;break}for(U=0;U<E;U++){s.loadCell(U,this._workCell);var W=this._workCell.getWidth();if(W!==0){var B=!1,F=U,X=this._workCell;if(D.length>0&&U===D[0][0]){B=!0;var Z=D.shift();X=new p.JoinedCellData(this._workCell,s.translateToString(!0,Z[0],Z[1]),Z[1]-Z[0]),F=Z[1]-1,W=X.getWidth()}var se=this._document.createElement("span");if(W>1&&(se.style.width=P*W+"px"),B&&(se.style.display="inline",A>=U&&A<=F&&(A=U)),!this._coreService.isCursorHidden&&_&&U===A)switch(se.classList.add(d.CURSOR_CLASS),I&&se.classList.add(d.CURSOR_BLINK_CLASS),L){case"bar":se.classList.add(d.CURSOR_STYLE_BAR_CLASS);break;case"underline":se.classList.add(d.CURSOR_STYLE_UNDERLINE_CLASS);break;default:se.classList.add(d.CURSOR_STYLE_BLOCK_CLASS)}X.isBold()&&se.classList.add(d.BOLD_CLASS),X.isItalic()&&se.classList.add(d.ITALIC_CLASS),X.isDim()&&se.classList.add(d.DIM_CLASS),X.isUnderline()&&se.classList.add(d.UNDERLINE_CLASS),X.isInvisible()?se.textContent=m.WHITESPACE_CELL_CHAR:se.textContent=X.getChars()||m.WHITESPACE_CELL_CHAR,X.isStrikethrough()&&se.classList.add(d.STRIKETHROUGH_CLASS);var ae=X.getFgColor(),me=X.getFgColorMode(),we=X.getBgColor(),he=X.getBgColorMode(),H=!!X.isInverse();if(H){var q=ae;ae=we,we=q;var z=me;me=he,he=z}switch(me){case 16777216:case 33554432:X.isBold()&&ae<8&&this._optionsService.options.drawBoldTextInBrightColors&&(ae+=8),this._applyMinimumContrast(se,this._colors.background,this._colors.ansi[ae])||se.classList.add("xterm-fg-"+ae);break;case 50331648:var ce=u.rgba.toColor(ae>>16&255,ae>>8&255,255&ae);this._applyMinimumContrast(se,this._colors.background,ce)||this._addStyle(se,"color:#"+a(ae.toString(16),"0",6));break;default:this._applyMinimumContrast(se,this._colors.background,this._colors.foreground)||H&&se.classList.add("xterm-fg-"+S.INVERTED_DEFAULT_COLOR)}switch(he){case 16777216:case 33554432:se.classList.add("xterm-bg-"+we);break;case 50331648:this._addStyle(se,"background-color:#"+a(we.toString(16),"0",6));break;default:H&&se.classList.add("xterm-bg-"+S.INVERTED_DEFAULT_COLOR)}k.appendChild(se),U=F}}return k},o.prototype._applyMinimumContrast=function(s,f,_){if(this._optionsService.options.minimumContrastRatio===1)return!1;var L=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return L===void 0&&(L=u.color.ensureContrastRatio(f,_,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,L??null)),!!L&&(this._addStyle(s,"color:"+L.css),!0)},o.prototype._addStyle=function(s,f){s.setAttribute("style",""+(s.getAttribute("style")||"")+f+";")},v([y(2,h.ICharacterJoinerService),y(3,C.IOptionsService),y(4,C.ICoreService)],o)}();function a(o,s,f){for(;o.length<f;)o=s+o;return o}d.DomRendererRowFactory=l},456:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionModel=void 0;var x=function(){function v(y){this._bufferService=y,this.isSelectAllActive=!1,this.selectionStartLength=0}return v.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(v.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var y=this.selectionStart[0]+this.selectionStartLength;return y>this._bufferService.cols?y%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(y/this._bufferService.cols)-1]:[y%this._bufferService.cols,this.selectionStart[1]+Math.floor(y/this._bufferService.cols)]:[y,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),v.prototype.areSelectionValuesReversed=function(){var y=this.selectionStart,S=this.selectionEnd;return!(!y||!S)&&(y[1]>S[1]||y[1]===S[1]&&y[0]>S[0])},v.prototype.onTrim=function(y){return this.selectionStart&&(this.selectionStart[1]-=y),this.selectionEnd&&(this.selectionEnd[1]-=y),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},v}();d.SelectionModel=x},428:function(J,d,x){var v=this&&this.__decorate||function(u,h,p,l){var a,o=arguments.length,s=o<3?h:l===null?l=Object.getOwnPropertyDescriptor(h,p):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,h,p,l);else for(var f=u.length-1;f>=0;f--)(a=u[f])&&(s=(o<3?a(s):o>3?a(h,p,s):a(h,p))||s);return o>3&&s&&Object.defineProperty(h,p,s),s},y=this&&this.__param||function(u,h){return function(p,l){h(p,l,u)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharSizeService=void 0;var S=x(2585),m=x(8460),b=function(){function u(h,p,l){this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=new m.EventEmitter,this._measureStrategy=new C(h,p,this._optionsService)}return Object.defineProperty(u.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),u.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},v([y(2,S.IOptionsService)],u)}();d.CharSizeService=b;var C=function(){function u(h,p,l){this._document=h,this._parentElement=p,this._optionsService=l,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return u.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return h.width!==0&&h.height!==0&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},u}()},4269:function(J,d,x){var v,y=this&&this.__extends||(v=function(a,o){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,f){s.__proto__=f}||function(s,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(s[_]=f[_])},v(a,o)},function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=a}v(a,o),a.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}),S=this&&this.__decorate||function(a,o,s,f){var _,L=arguments.length,A=L<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,s):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,s,f);else for(var I=a.length-1;I>=0;I--)(_=a[I])&&(A=(L<3?_(A):L>3?_(o,s,A):_(o,s))||A);return L>3&&A&&Object.defineProperty(o,s,A),A},m=this&&this.__param||function(a,o){return function(s,f){o(s,f,a)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CharacterJoinerService=d.JoinedCellData=void 0;var b=x(3734),C=x(643),u=x(511),h=x(2585),p=function(a){function o(s,f,_){var L=a.call(this)||this;return L.content=0,L.combinedData="",L.fg=s.fg,L.bg=s.bg,L.combinedData=f,L._width=_,L}return y(o,a),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(s){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(b.AttributeData);d.JoinedCellData=p;var l=function(){function a(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return a.prototype.register=function(o){var s={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(s),s.id},a.prototype.deregister=function(o){for(var s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===o)return this._characterJoiners.splice(s,1),!0;return!1},a.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var s=this._bufferService.buffer.lines.get(o);if(!s||s.length===0)return[];for(var f=[],_=s.translateToString(!0),L=0,A=0,I=0,P=s.getFg(0),M=s.getBg(0),k=0;k<s.getTrimmedLength();k++)if(s.loadCell(k,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==P||this._workCell.bg!==M){if(k-L>1)for(var D=this._getJoinedRanges(_,I,A,s,L),E=0;E<D.length;E++)f.push(D[E]);L=k,I=A,P=this._workCell.fg,M=this._workCell.bg}A+=this._workCell.getChars().length||C.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-L>1)for(D=this._getJoinedRanges(_,I,A,s,L),E=0;E<D.length;E++)f.push(D[E]);return f},a.prototype._getJoinedRanges=function(o,s,f,_,L){var A=o.substring(s,f),I=[];try{I=this._characterJoiners[0].handler(A)}catch(D){console.error(D)}for(var P=1;P<this._characterJoiners.length;P++)try{for(var M=this._characterJoiners[P].handler(A),k=0;k<M.length;k++)a._mergeRanges(I,M[k])}catch(D){console.error(D)}return this._stringRangesToCellRanges(I,_,L),I},a.prototype._stringRangesToCellRanges=function(o,s,f){var _=0,L=!1,A=0,I=o[_];if(I){for(var P=f;P<this._bufferService.cols;P++){var M=s.getWidth(P),k=s.getString(P).length||C.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!L&&I[0]<=A&&(I[0]=P,L=!0),I[1]<=A){if(I[1]=P,!(I=o[++_]))break;I[0]<=A?(I[0]=P,L=!0):L=!1}A+=k}}I&&(I[1]=this._bufferService.cols)}},a._mergeRanges=function(o,s){for(var f=!1,_=0;_<o.length;_++){var L=o[_];if(f){if(s[1]<=L[0])return o[_-1][1]=s[1],o;if(s[1]<=L[1])return o[_-1][1]=Math.max(s[1],L[1]),o.splice(_,1),o;o.splice(_,1),_--}else{if(s[1]<=L[0])return o.splice(_,0,s),o;if(s[1]<=L[1])return L[0]=Math.min(s[0],L[0]),o;s[0]<L[1]&&(L[0]=Math.min(s[0],L[0]),f=!0)}}return f?o[o.length-1][1]=s[1]:o.push(s),o},a=S([m(0,h.IBufferService)],a)}();d.CharacterJoinerService=l},5114:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CoreBrowserService=void 0;var x=function(){function v(y){this._textarea=y}return Object.defineProperty(v.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),v}();d.CoreBrowserService=x},8934:function(J,d,x){var v=this&&this.__decorate||function(C,u,h,p){var l,a=arguments.length,o=a<3?u:p===null?p=Object.getOwnPropertyDescriptor(u,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,u,h,p);else for(var s=C.length-1;s>=0;s--)(l=C[s])&&(o=(a<3?l(o):a>3?l(u,h,o):l(u,h))||o);return a>3&&o&&Object.defineProperty(u,h,o),o},y=this&&this.__param||function(C,u){return function(h,p){u(h,p,C)}};Object.defineProperty(d,"__esModule",{value:!0}),d.MouseService=void 0;var S=x(4725),m=x(9806),b=function(){function C(u,h){this._renderService=u,this._charSizeService=h}return C.prototype.getCoords=function(u,h,p,l,a){return(0,m.getCoords)(u,h,p,l,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,a)},C.prototype.getRawByteCoords=function(u,h,p,l){var a=this.getCoords(u,h,p,l);return(0,m.getRawByteCoords)(a)},v([y(0,S.IRenderService),y(1,S.ICharSizeService)],C)}();d.MouseService=b},3230:function(J,d,x){var v,y=this&&this.__extends||(v=function(s,f){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,L){_.__proto__=L}||function(_,L){for(var A in L)Object.prototype.hasOwnProperty.call(L,A)&&(_[A]=L[A])},v(s,f)},function(s,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=s}v(s,f),s.prototype=f===null?Object.create(f):(_.prototype=f.prototype,new _)}),S=this&&this.__decorate||function(s,f,_,L){var A,I=arguments.length,P=I<3?f:L===null?L=Object.getOwnPropertyDescriptor(f,_):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(s,f,_,L);else for(var M=s.length-1;M>=0;M--)(A=s[M])&&(P=(I<3?A(P):I>3?A(f,_,P):A(f,_))||P);return I>3&&P&&Object.defineProperty(f,_,P),P},m=this&&this.__param||function(s,f){return function(_,L){f(_,L,s)}};Object.defineProperty(d,"__esModule",{value:!0}),d.RenderService=void 0;var b=x(6193),C=x(8460),u=x(844),h=x(5596),p=x(3656),l=x(2585),a=x(4725),o=function(s){function f(_,L,A,I,P,M){var k=s.call(this)||this;if(k._renderer=_,k._rowCount=L,k._charSizeService=P,k._isPaused=!1,k._needsFullRefresh=!1,k._isNextRenderRedrawOnly=!0,k._needsSelectionRefresh=!1,k._canvasWidth=0,k._canvasHeight=0,k._selectionState={start:void 0,end:void 0,columnSelectMode:!1},k._onDimensionsChange=new C.EventEmitter,k._onRender=new C.EventEmitter,k._onRefreshRequest=new C.EventEmitter,k.register({dispose:function(){return k._renderer.dispose()}}),k._renderDebouncer=new b.RenderDebouncer(function(E,U){return k._renderRows(E,U)}),k.register(k._renderDebouncer),k._screenDprMonitor=new h.ScreenDprMonitor,k._screenDprMonitor.setListener(function(){return k.onDevicePixelRatioChange()}),k.register(k._screenDprMonitor),k.register(M.onResize(function(E){return k._fullRefresh()})),k.register(I.onOptionChange(function(){return k._renderer.onOptionsChanged()})),k.register(k._charSizeService.onCharSizeChange(function(){return k.onCharSizeChanged()})),k._renderer.onRequestRedraw(function(E){return k.refreshRows(E.start,E.end,!0)}),k.register((0,p.addDisposableDomListener)(window,"resize",function(){return k.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var D=new IntersectionObserver(function(E){return k._onIntersectionChange(E[E.length-1])},{threshold:0});D.observe(A),k.register({dispose:function(){return D.disconnect()}})}return k}return y(f,s),Object.defineProperty(f.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),f.prototype._onIntersectionChange=function(_){this._isPaused=_.isIntersecting===void 0?_.intersectionRatio===0:!_.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},f.prototype.refreshRows=function(_,L,A){A===void 0&&(A=!1),this._isPaused?this._needsFullRefresh=!0:(A||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(_,L,this._rowCount))},f.prototype._renderRows=function(_,L){this._renderer.renderRows(_,L),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:_,end:L}),this._isNextRenderRedrawOnly=!0},f.prototype.resize=function(_,L){this._rowCount=L,this._fireOnCanvasResize()},f.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},f.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},f.prototype.dispose=function(){s.prototype.dispose.call(this)},f.prototype.setRenderer=function(_){var L=this;this._renderer.dispose(),this._renderer=_,this._renderer.onRequestRedraw(function(A){return L.refreshRows(A.start,A.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},f.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},f.prototype.clearTextureAtlas=function(){var _,L;(L=(_=this._renderer)===null||_===void 0?void 0:_.clearTextureAtlas)===null||L===void 0||L.call(_),this._fullRefresh()},f.prototype.setColors=function(_){this._renderer.setColors(_),this._fullRefresh()},f.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},f.prototype.onResize=function(_,L){this._renderer.onResize(_,L),this._fullRefresh()},f.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},f.prototype.onBlur=function(){this._renderer.onBlur()},f.prototype.onFocus=function(){this._renderer.onFocus()},f.prototype.onSelectionChanged=function(_,L,A){this._selectionState.start=_,this._selectionState.end=L,this._selectionState.columnSelectMode=A,this._renderer.onSelectionChanged(_,L,A)},f.prototype.onCursorMove=function(){this._renderer.onCursorMove()},f.prototype.clear=function(){this._renderer.clear()},S([m(3,l.IOptionsService),m(4,a.ICharSizeService),m(5,l.IBufferService)],f)}(u.Disposable);d.RenderService=o},9312:function(J,d,x){var v,y=this&&this.__extends||(v=function(I,P){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,k){M.__proto__=k}||function(M,k){for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(M[D]=k[D])},v(I,P)},function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function M(){this.constructor=I}v(I,P),I.prototype=P===null?Object.create(P):(M.prototype=P.prototype,new M)}),S=this&&this.__decorate||function(I,P,M,k){var D,E=arguments.length,U=E<3?P:k===null?k=Object.getOwnPropertyDescriptor(P,M):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(I,P,M,k);else for(var W=I.length-1;W>=0;W--)(D=I[W])&&(U=(E<3?D(U):E>3?D(P,M,U):D(P,M))||U);return E>3&&U&&Object.defineProperty(P,M,U),U},m=this&&this.__param||function(I,P){return function(M,k){P(M,k,I)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SelectionService=void 0;var b=x(6114),C=x(456),u=x(511),h=x(8460),p=x(4725),l=x(2585),a=x(9806),o=x(9504),s=x(844),f=x(4841),_=String.fromCharCode(160),L=new RegExp(_,"g"),A=function(I){function P(M,k,D,E,U,W,B,F){var X=I.call(this)||this;return X._element=M,X._screenElement=k,X._linkifier=D,X._bufferService=E,X._coreService=U,X._mouseService=W,X._optionsService=B,X._renderService=F,X._dragScrollAmount=0,X._enabled=!0,X._workCell=new u.CellData,X._mouseDownTimeStamp=0,X._oldHasSelection=!1,X._oldSelectionStart=void 0,X._oldSelectionEnd=void 0,X._onLinuxMouseSelection=X.register(new h.EventEmitter),X._onRedrawRequest=X.register(new h.EventEmitter),X._onSelectionChange=X.register(new h.EventEmitter),X._onRequestScrollLines=X.register(new h.EventEmitter),X._mouseMoveListener=function(Z){return X._onMouseMove(Z)},X._mouseUpListener=function(Z){return X._onMouseUp(Z)},X._coreService.onUserInput(function(){X.hasSelection&&X.clearSelection()}),X._trimListener=X._bufferService.buffer.lines.onTrim(function(Z){return X._onTrim(Z)}),X.register(X._bufferService.buffers.onBufferActivate(function(Z){return X._onBufferActivate(Z)})),X.enable(),X._model=new C.SelectionModel(X._bufferService),X._activeSelectionMode=0,X}return y(P,I),Object.defineProperty(P.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),P.prototype.dispose=function(){this._removeMouseDownListeners()},P.prototype.reset=function(){this.clearSelection()},P.prototype.disable=function(){this.clearSelection(),this._enabled=!1},P.prototype.enable=function(){this._enabled=!0},Object.defineProperty(P.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"hasSelection",{get:function(){var M=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!M||!k||M[0]===k[0]&&M[1]===k[1])},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"selectionText",{get:function(){var M=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!M||!k)return"";var D=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(M[0]===k[0])return"";for(var U=M[1];U<=k[1];U++){var W=D.translateBufferLineToString(U,!0,M[0],k[0]);E.push(W)}}else{var B=M[1]===k[1]?k[0]:void 0;for(E.push(D.translateBufferLineToString(M[1],!0,M[0],B)),U=M[1]+1;U<=k[1]-1;U++){var F=D.lines.get(U);W=D.translateBufferLineToString(U,!0),(F==null?void 0:F.isWrapped)?E[E.length-1]+=W:E.push(W)}M[1]!==k[1]&&(F=D.lines.get(k[1]),W=D.translateBufferLineToString(k[1],!0,0,k[0]),F&&F.isWrapped?E[E.length-1]+=W:E.push(W))}return E.map(function(X){return X.replace(L," ")}).join(b.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),P.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},P.prototype.refresh=function(M){var k=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return k._refresh()})),b.isLinux&&M&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},P.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},P.prototype._isClickInSelection=function(M){var k=this._getMouseBufferCoords(M),D=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(D&&E&&k)&&this._areCoordsInSelection(k,D,E)},P.prototype._areCoordsInSelection=function(M,k,D){return M[1]>k[1]&&M[1]<D[1]||k[1]===D[1]&&M[1]===k[1]&&M[0]>=k[0]&&M[0]<D[0]||k[1]<D[1]&&M[1]===D[1]&&M[0]<D[0]||k[1]<D[1]&&M[1]===k[1]&&M[0]>=k[0]},P.prototype._selectWordAtCursor=function(M,k){var D,E,U=(E=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||E===void 0?void 0:E.range;if(U)return this._model.selectionStart=[U.start.x-1,U.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(U,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var W=this._getMouseBufferCoords(M);return!!W&&(this._selectWordAt(W,k),this._model.selectionEnd=void 0,!0)},P.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},P.prototype.selectLines=function(M,k){this._model.clearSelection(),M=Math.max(M,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,M],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()},P.prototype._onTrim=function(M){this._model.onTrim(M)&&this.refresh()},P.prototype._getMouseBufferCoords=function(M){var k=this._mouseService.getCoords(M,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k},P.prototype._getMouseEventScrollAmount=function(M){var k=(0,a.getCoordsRelativeToElement)(M,this._screenElement)[1],D=this._renderService.dimensions.canvasHeight;return k>=0&&k<=D?0:(k>D&&(k-=D),k=Math.min(Math.max(k,-50),50),(k/=50)/Math.abs(k)+Math.round(14*k))},P.prototype.shouldForceSelection=function(M){return b.isMac?M.altKey&&this._optionsService.options.macOptionClickForcesSelection:M.shiftKey},P.prototype.onMouseDown=function(M){if(this._mouseDownTimeStamp=M.timeStamp,(M.button!==2||!this.hasSelection)&&M.button===0){if(!this._enabled){if(!this.shouldForceSelection(M))return;M.stopPropagation()}M.preventDefault(),this._dragScrollAmount=0,this._enabled&&M.shiftKey?this._onIncrementalClick(M):M.detail===1?this._onSingleClick(M):M.detail===2?this._onDoubleClick(M):M.detail===3&&this._onTripleClick(M),this._addMouseDownListeners(),this.refresh(!0)}},P.prototype._addMouseDownListeners=function(){var M=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return M._dragScroll()},50)},P.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},P.prototype._onIncrementalClick=function(M){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(M))},P.prototype._onSingleClick=function(M){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(M)?3:0,this._model.selectionStart=this._getMouseBufferCoords(M),this._model.selectionStart){this._model.selectionEnd=void 0;var k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},P.prototype._onDoubleClick=function(M){this._selectWordAtCursor(M,!0)&&(this._activeSelectionMode=1)},P.prototype._onTripleClick=function(M){var k=this._getMouseBufferCoords(M);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))},P.prototype.shouldColumnSelect=function(M){return M.altKey&&!(b.isMac&&this._optionsService.options.macOptionClickForcesSelection)},P.prototype._onMouseMove=function(M){if(M.stopImmediatePropagation(),this._model.selectionStart){var k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(M),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(M),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){var E=D.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},P.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var M=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(M.ydisp+this._bufferService.rows,M.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=M.ydisp),this.refresh()}},P.prototype._onMouseUp=function(M){var k=M.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&M.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var D=this._mouseService.getCoords(M,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){var E=(0,o.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()},P.prototype._fireEventIfSelectionChanged=function(){var M=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,D=!(!M||!k||M[0]===k[0]&&M[1]===k[1]);D?M&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&M[0]===this._oldSelectionStart[0]&&M[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(M,k,D)):this._oldHasSelection&&this._fireOnSelectionChange(M,k,D)},P.prototype._fireOnSelectionChange=function(M,k,D){this._oldSelectionStart=M,this._oldSelectionEnd=k,this._oldHasSelection=D,this._onSelectionChange.fire()},P.prototype._onBufferActivate=function(M){var k=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=M.activeBuffer.lines.onTrim(function(D){return k._onTrim(D)})},P.prototype._convertViewportColToCharacterIndex=function(M,k){for(var D=k[0],E=0;k[0]>=E;E++){var U=M.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:U>1&&k[0]!==E&&(D+=U-1)}return D},P.prototype.setSelection=function(M,k,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[M,k],this._model.selectionStartLength=D,this.refresh()},P.prototype.rightClickSelect=function(M){this._isClickInSelection(M)||(this._selectWordAtCursor(M,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},P.prototype._getWordAt=function(M,k,D,E){if(D===void 0&&(D=!0),E===void 0&&(E=!0),!(M[0]>=this._bufferService.cols)){var U=this._bufferService.buffer,W=U.lines.get(M[1]);if(W){var B=U.translateBufferLineToString(M[1],!1),F=this._convertViewportColToCharacterIndex(W,M),X=F,Z=M[0]-F,se=0,ae=0,me=0,we=0;if(B.charAt(F)===" "){for(;F>0&&B.charAt(F-1)===" ";)F--;for(;X<B.length&&B.charAt(X+1)===" ";)X++}else{var he=M[0],H=M[0];W.getWidth(he)===0&&(se++,he--),W.getWidth(H)===2&&(ae++,H++);var q=W.getString(H).length;for(q>1&&(we+=q-1,X+=q-1);he>0&&F>0&&!this._isCharWordSeparator(W.loadCell(he-1,this._workCell));){W.loadCell(he-1,this._workCell);var z=this._workCell.getChars().length;this._workCell.getWidth()===0?(se++,he--):z>1&&(me+=z-1,F-=z-1),F--,he--}for(;H<W.length&&X+1<B.length&&!this._isCharWordSeparator(W.loadCell(H+1,this._workCell));){W.loadCell(H+1,this._workCell);var ce=this._workCell.getChars().length;this._workCell.getWidth()===2?(ae++,H++):ce>1&&(we+=ce-1,X+=ce-1),X++,H++}}X++;var Y=F+Z-se+me,_e=Math.min(this._bufferService.cols,X-F+se+ae-me-we);if(k||B.slice(F,X).trim()!==""){if(D&&Y===0&&W.getCodePoint(0)!==32){var Le=U.lines.get(M[1]-1);if(Le&&W.isWrapped&&Le.getCodePoint(this._bufferService.cols-1)!==32){var Be=this._getWordAt([this._bufferService.cols-1,M[1]-1],!1,!0,!1);if(Be){var Ee=this._bufferService.cols-Be.start;Y-=Ee,_e+=Ee}}}if(E&&Y+_e===this._bufferService.cols&&W.getCodePoint(this._bufferService.cols-1)!==32){var Ie=U.lines.get(M[1]+1);if((Ie==null?void 0:Ie.isWrapped)&&Ie.getCodePoint(0)!==32){var Se=this._getWordAt([0,M[1]+1],!1,!1,!0);Se&&(_e+=Se.length)}}return{start:Y,length:_e}}}}},P.prototype._selectWordAt=function(M,k){var D=this._getWordAt(M,k);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,M[1]--;this._model.selectionStart=[D.start,M[1]],this._model.selectionStartLength=D.length}},P.prototype._selectToWordAt=function(M){var k=this._getWordAt(M,!0);if(k){for(var D=M[1];k.start<0;)k.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,D]}},P.prototype._isCharWordSeparator=function(M){return M.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(M.getChars())>=0},P.prototype._selectLineAt=function(M){var k=this._bufferService.buffer.getWrappedRangeForLine(M);this._model.selectionStart=[0,k.first],this._model.selectionEnd=[this._bufferService.cols,k.last],this._model.selectionStartLength=0},S([m(3,l.IBufferService),m(4,l.ICoreService),m(5,p.IMouseService),m(6,l.IOptionsService),m(7,p.IRenderService)],P)}(s.Disposable);d.SelectionService=A},4725:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ICharacterJoinerService=d.ISoundService=d.ISelectionService=d.IRenderService=d.IMouseService=d.ICoreBrowserService=d.ICharSizeService=void 0;var v=x(8343);d.ICharSizeService=(0,v.createDecorator)("CharSizeService"),d.ICoreBrowserService=(0,v.createDecorator)("CoreBrowserService"),d.IMouseService=(0,v.createDecorator)("MouseService"),d.IRenderService=(0,v.createDecorator)("RenderService"),d.ISelectionService=(0,v.createDecorator)("SelectionService"),d.ISoundService=(0,v.createDecorator)("SoundService"),d.ICharacterJoinerService=(0,v.createDecorator)("CharacterJoinerService")},357:function(J,d,x){var v=this&&this.__decorate||function(b,C,u,h){var p,l=arguments.length,a=l<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(b,C,u,h);else for(var o=b.length-1;o>=0;o--)(p=b[o])&&(a=(l<3?p(a):l>3?p(C,u,a):p(C,u))||a);return l>3&&a&&Object.defineProperty(C,u,a),a},y=this&&this.__param||function(b,C){return function(u,h){C(u,h,b)}};Object.defineProperty(d,"__esModule",{value:!0}),d.SoundService=void 0;var S=x(2585),m=function(){function b(C){this._optionsService=C}return Object.defineProperty(b,"audioContext",{get:function(){if(!b._audioContext){var C=window.AudioContext||window.webkitAudioContext;if(!C)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;b._audioContext=new C}return b._audioContext},enumerable:!1,configurable:!0}),b.prototype.playBellSound=function(){var C=b.audioContext;if(C){var u=C.createBufferSource();C.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(h){u.buffer=h,u.connect(C.destination),u.start(0)})}},b.prototype._base64ToArrayBuffer=function(C){for(var u=window.atob(C),h=u.length,p=new Uint8Array(h),l=0;l<h;l++)p[l]=u.charCodeAt(l);return p.buffer},b.prototype._removeMimeType=function(C){return C.split(",")[1]},b=v([y(0,S.IOptionsService)],b)}();d.SoundService=m},6349:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CircularList=void 0;var v=x(8460),y=function(){function S(m){this._maxLength=m,this.onDeleteEmitter=new v.EventEmitter,this.onInsertEmitter=new v.EventEmitter,this.onTrimEmitter=new v.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(S.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"maxLength",{get:function(){return this._maxLength},set:function(m){if(this._maxLength!==m){for(var b=new Array(m),C=0;C<Math.min(m,this.length);C++)b[C]=this._array[this._getCyclicIndex(C)];this._array=b,this._maxLength=m,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"length",{get:function(){return this._length},set:function(m){if(m>this._length)for(var b=this._length;b<m;b++)this._array[b]=void 0;this._length=m},enumerable:!1,configurable:!0}),S.prototype.get=function(m){return this._array[this._getCyclicIndex(m)]},S.prototype.set=function(m,b){this._array[this._getCyclicIndex(m)]=b},S.prototype.push=function(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},S.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(S.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),S.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},S.prototype.splice=function(m,b){for(var C=[],u=2;u<arguments.length;u++)C[u-2]=arguments[u];if(b){for(var h=m;h<this._length-b;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+b)];this._length-=b,this.onDeleteEmitter.fire({index:m,amount:b})}for(h=this._length-1;h>=m;h--)this._array[this._getCyclicIndex(h+C.length)]=this._array[this._getCyclicIndex(h)];for(h=0;h<C.length;h++)this._array[this._getCyclicIndex(m+h)]=C[h];if(C.length&&this.onInsertEmitter.fire({index:m,amount:C.length}),this._length+C.length>this._maxLength){var p=this._length+C.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=C.length},S.prototype.trimStart=function(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)},S.prototype.shiftElements=function(m,b,C){if(!(b<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(var u=b-1;u>=0;u--)this.set(m+u+C,this.get(m+u));var h=m+b+C-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(u=0;u<b;u++)this.set(m+u+C,this.get(m+u))}},S.prototype._getCyclicIndex=function(m){return(this._startIndex+m)%this._maxLength},S}();d.CircularList=y},1439:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.clone=void 0,d.clone=function x(v,y){if(y===void 0&&(y=5),typeof v!="object")return v;var S=Array.isArray(v)?[]:{};for(var m in v)S[m]=y<=1?v[m]:v[m]&&x(v[m],y-1);return S}},8969:function(J,d,x){var v,y=this&&this.__extends||(v=function(M,k){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,E){D.__proto__=E}||function(D,E){for(var U in E)Object.prototype.hasOwnProperty.call(E,U)&&(D[U]=E[U])},v(M,k)},function(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function D(){this.constructor=M}v(M,k),M.prototype=k===null?Object.create(k):(D.prototype=k.prototype,new D)});Object.defineProperty(d,"__esModule",{value:!0}),d.CoreTerminal=void 0;var S=x(844),m=x(2585),b=x(4348),C=x(7866),u=x(744),h=x(7302),p=x(6975),l=x(8460),a=x(1753),o=x(3730),s=x(1480),f=x(7994),_=x(9282),L=x(5435),A=x(5981),I=!1,P=function(M){function k(D){var E=M.call(this)||this;return E._onBinary=new l.EventEmitter,E._onData=new l.EventEmitter,E._onLineFeed=new l.EventEmitter,E._onResize=new l.EventEmitter,E._onScroll=new l.EventEmitter,E._instantiationService=new b.InstantiationService,E.optionsService=new h.OptionsService(D),E._instantiationService.setService(m.IOptionsService,E.optionsService),E._bufferService=E.register(E._instantiationService.createInstance(u.BufferService)),E._instantiationService.setService(m.IBufferService,E._bufferService),E._logService=E._instantiationService.createInstance(C.LogService),E._instantiationService.setService(m.ILogService,E._logService),E.coreService=E.register(E._instantiationService.createInstance(p.CoreService,function(){return E.scrollToBottom()})),E._instantiationService.setService(m.ICoreService,E.coreService),E.coreMouseService=E._instantiationService.createInstance(a.CoreMouseService),E._instantiationService.setService(m.ICoreMouseService,E.coreMouseService),E._dirtyRowService=E._instantiationService.createInstance(o.DirtyRowService),E._instantiationService.setService(m.IDirtyRowService,E._dirtyRowService),E.unicodeService=E._instantiationService.createInstance(s.UnicodeService),E._instantiationService.setService(m.IUnicodeService,E.unicodeService),E._charsetService=E._instantiationService.createInstance(f.CharsetService),E._instantiationService.setService(m.ICharsetService,E._charsetService),E._inputHandler=new L.InputHandler(E._bufferService,E._charsetService,E.coreService,E._dirtyRowService,E._logService,E.optionsService,E.coreMouseService,E.unicodeService),E.register((0,l.forwardEvent)(E._inputHandler.onLineFeed,E._onLineFeed)),E.register(E._inputHandler),E.register((0,l.forwardEvent)(E._bufferService.onResize,E._onResize)),E.register((0,l.forwardEvent)(E.coreService.onData,E._onData)),E.register((0,l.forwardEvent)(E.coreService.onBinary,E._onBinary)),E.register(E.optionsService.onOptionChange(function(U){return E._updateOptions(U)})),E.register(E._bufferService.onScroll(function(U){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E.register(E._inputHandler.onScroll(function(U){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E._writeBuffer=new A.WriteBuffer(function(U,W){return E._inputHandler.parse(U,W)}),E}return y(k,M),Object.defineProperty(k.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onScroll",{get:function(){var D=this;return this._onScrollApi||(this._onScrollApi=new l.EventEmitter,this.register(this._onScroll.event(function(E){var U;(U=D._onScrollApi)===null||U===void 0||U.fire(E.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"options",{get:function(){return this.optionsService.options},set:function(D){for(var E in D)this.optionsService.options[E]=D[E]},enumerable:!1,configurable:!0}),k.prototype.dispose=function(){var D;this._isDisposed||(M.prototype.dispose.call(this),(D=this._windowsMode)===null||D===void 0||D.dispose(),this._windowsMode=void 0)},k.prototype.write=function(D,E){this._writeBuffer.write(D,E)},k.prototype.writeSync=function(D,E){this._logService.logLevel<=m.LogLevelEnum.WARN&&!I&&(this._logService.warn("writeSync is unreliable and will be removed soon."),I=!0),this._writeBuffer.writeSync(D,E)},k.prototype.resize=function(D,E){isNaN(D)||isNaN(E)||(D=Math.max(D,u.MINIMUM_COLS),E=Math.max(E,u.MINIMUM_ROWS),this._bufferService.resize(D,E))},k.prototype.scroll=function(D,E){E===void 0&&(E=!1),this._bufferService.scroll(D,E)},k.prototype.scrollLines=function(D,E,U){this._bufferService.scrollLines(D,E,U)},k.prototype.scrollPages=function(D){this._bufferService.scrollPages(D)},k.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},k.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},k.prototype.scrollToLine=function(D){this._bufferService.scrollToLine(D)},k.prototype.registerEscHandler=function(D,E){return this._inputHandler.registerEscHandler(D,E)},k.prototype.registerDcsHandler=function(D,E){return this._inputHandler.registerDcsHandler(D,E)},k.prototype.registerCsiHandler=function(D,E){return this._inputHandler.registerCsiHandler(D,E)},k.prototype.registerOscHandler=function(D,E){return this._inputHandler.registerOscHandler(D,E)},k.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},k.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},k.prototype._updateOptions=function(D){var E;switch(D){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((E=this._windowsMode)===null||E===void 0||E.dispose(),this._windowsMode=void 0)}},k.prototype._enableWindowsMode=function(){var D=this;if(!this._windowsMode){var E=[];E.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},function(){return(0,_.updateWindowsModeWrappedState)(D._bufferService),!1})),this._windowsMode={dispose:function(){for(var U=0,W=E;U<W.length;U++)W[U].dispose()}}}},k}(S.Disposable);d.CoreTerminal=P},8460:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.forwardEvent=d.EventEmitter=void 0;var x=function(){function v(){this._listeners=[],this._disposed=!1}return Object.defineProperty(v.prototype,"event",{get:function(){var y=this;return this._event||(this._event=function(S){return y._listeners.push(S),{dispose:function(){if(!y._disposed){for(var m=0;m<y._listeners.length;m++)if(y._listeners[m]===S)return void y._listeners.splice(m,1)}}}}),this._event},enumerable:!1,configurable:!0}),v.prototype.fire=function(y,S){for(var m=[],b=0;b<this._listeners.length;b++)m.push(this._listeners[b]);for(b=0;b<m.length;b++)m[b].call(void 0,y,S)},v.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},v}();d.EventEmitter=x,d.forwardEvent=function(v,y){return v(function(S){return y.fire(S)})}},5435:function(J,d,x){var v,y=this&&this.__extends||(v=function(U,W){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var X in F)Object.prototype.hasOwnProperty.call(F,X)&&(B[X]=F[X])},v(U,W)},function(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function B(){this.constructor=U}v(U,W),U.prototype=W===null?Object.create(W):(B.prototype=W.prototype,new B)});Object.defineProperty(d,"__esModule",{value:!0}),d.InputHandler=d.WindowsOptionsReportType=void 0;var S,m=x(2584),b=x(7116),C=x(2015),u=x(844),h=x(8273),p=x(482),l=x(8437),a=x(8460),o=x(643),s=x(511),f=x(3734),_=x(2585),L=x(6242),A=x(6351),I=x(5941),P={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function k(U,W){if(U>24)return W.setWinLines||!1;switch(U){case 1:return!!W.restoreWin;case 2:return!!W.minimizeWin;case 3:return!!W.setWinPosition;case 4:return!!W.setWinSizePixels;case 5:return!!W.raiseWin;case 6:return!!W.lowerWin;case 7:return!!W.refreshWin;case 8:return!!W.setWinSizeChars;case 9:return!!W.maximizeWin;case 10:return!!W.fullscreenWin;case 11:return!!W.getWinState;case 13:return!!W.getWinPosition;case 14:return!!W.getWinSizePixels;case 15:return!!W.getScreenSizePixels;case 16:return!!W.getCellSizePixels;case 18:return!!W.getWinSizeChars;case 19:return!!W.getScreenSizeChars;case 20:return!!W.getIconTitle;case 21:return!!W.getWinTitle;case 22:return!!W.pushTitle;case 23:return!!W.popTitle;case 24:return!!W.setWinLines}return!1}(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(S=d.WindowsOptionsReportType||(d.WindowsOptionsReportType={}));var D=function(){function U(W,B,F,X){this._bufferService=W,this._coreService=B,this._logService=F,this._optionsService=X,this._data=new Uint32Array(0)}return U.prototype.hook=function(W){this._data=new Uint32Array(0)},U.prototype.put=function(W,B,F){this._data=(0,h.concat)(this._data,W.subarray(B,F))},U.prototype.unhook=function(W){if(!W)return this._data=new Uint32Array(0),!0;var B=(0,p.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),B){case'"q':this._coreService.triggerDataEvent(m.C0.ESC+'P1$r0"q'+m.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(m.C0.ESC+'P1$r61;1"p'+m.C0.ESC+"\\");break;case"r":var F=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(m.C0.ESC+"P1$r"+F+m.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(m.C0.ESC+"P1$r0m"+m.C0.ESC+"\\");break;case" q":var X={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];X-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(m.C0.ESC+"P1$r"+X+" q"+m.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",B),this._coreService.triggerDataEvent(m.C0.ESC+"P0$r"+m.C0.ESC+"\\")}return!0},U}(),E=function(U){function W(B,F,X,Z,se,ae,me,we,he){he===void 0&&(he=new C.EscapeSequenceParser);var H=U.call(this)||this;H._bufferService=B,H._charsetService=F,H._coreService=X,H._dirtyRowService=Z,H._logService=se,H._optionsService=ae,H._coreMouseService=me,H._unicodeService=we,H._parser=he,H._parseBuffer=new Uint32Array(4096),H._stringDecoder=new p.StringToUtf32,H._utf8Decoder=new p.Utf8ToUtf32,H._workCell=new s.CellData,H._windowTitle="",H._iconName="",H._windowTitleStack=[],H._iconNameStack=[],H._curAttrData=l.DEFAULT_ATTR_DATA.clone(),H._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),H._onRequestBell=new a.EventEmitter,H._onRequestRefreshRows=new a.EventEmitter,H._onRequestReset=new a.EventEmitter,H._onRequestSendFocus=new a.EventEmitter,H._onRequestSyncScrollBar=new a.EventEmitter,H._onRequestWindowsOptionsReport=new a.EventEmitter,H._onA11yChar=new a.EventEmitter,H._onA11yTab=new a.EventEmitter,H._onCursorMove=new a.EventEmitter,H._onLineFeed=new a.EventEmitter,H._onScroll=new a.EventEmitter,H._onTitleChange=new a.EventEmitter,H._onColor=new a.EventEmitter,H._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},H._specialColors=[256,257,258],H.register(H._parser),H._activeBuffer=H._bufferService.buffer,H.register(H._bufferService.buffers.onBufferActivate(function(Y){return H._activeBuffer=Y.activeBuffer})),H._parser.setCsiHandlerFallback(function(Y,_e){H._logService.debug("Unknown CSI code: ",{identifier:H._parser.identToString(Y),params:_e.toArray()})}),H._parser.setEscHandlerFallback(function(Y){H._logService.debug("Unknown ESC code: ",{identifier:H._parser.identToString(Y)})}),H._parser.setExecuteHandlerFallback(function(Y){H._logService.debug("Unknown EXECUTE code: ",{code:Y})}),H._parser.setOscHandlerFallback(function(Y,_e,Le){H._logService.debug("Unknown OSC code: ",{identifier:Y,action:_e,data:Le})}),H._parser.setDcsHandlerFallback(function(Y,_e,Le){_e==="HOOK"&&(Le=Le.toArray()),H._logService.debug("Unknown DCS code: ",{identifier:H._parser.identToString(Y),action:_e,payload:Le})}),H._parser.setPrintHandler(function(Y,_e,Le){return H.print(Y,_e,Le)}),H._parser.registerCsiHandler({final:"@"},function(Y){return H.insertChars(Y)}),H._parser.registerCsiHandler({intermediates:" ",final:"@"},function(Y){return H.scrollLeft(Y)}),H._parser.registerCsiHandler({final:"A"},function(Y){return H.cursorUp(Y)}),H._parser.registerCsiHandler({intermediates:" ",final:"A"},function(Y){return H.scrollRight(Y)}),H._parser.registerCsiHandler({final:"B"},function(Y){return H.cursorDown(Y)}),H._parser.registerCsiHandler({final:"C"},function(Y){return H.cursorForward(Y)}),H._parser.registerCsiHandler({final:"D"},function(Y){return H.cursorBackward(Y)}),H._parser.registerCsiHandler({final:"E"},function(Y){return H.cursorNextLine(Y)}),H._parser.registerCsiHandler({final:"F"},function(Y){return H.cursorPrecedingLine(Y)}),H._parser.registerCsiHandler({final:"G"},function(Y){return H.cursorCharAbsolute(Y)}),H._parser.registerCsiHandler({final:"H"},function(Y){return H.cursorPosition(Y)}),H._parser.registerCsiHandler({final:"I"},function(Y){return H.cursorForwardTab(Y)}),H._parser.registerCsiHandler({final:"J"},function(Y){return H.eraseInDisplay(Y)}),H._parser.registerCsiHandler({prefix:"?",final:"J"},function(Y){return H.eraseInDisplay(Y)}),H._parser.registerCsiHandler({final:"K"},function(Y){return H.eraseInLine(Y)}),H._parser.registerCsiHandler({prefix:"?",final:"K"},function(Y){return H.eraseInLine(Y)}),H._parser.registerCsiHandler({final:"L"},function(Y){return H.insertLines(Y)}),H._parser.registerCsiHandler({final:"M"},function(Y){return H.deleteLines(Y)}),H._parser.registerCsiHandler({final:"P"},function(Y){return H.deleteChars(Y)}),H._parser.registerCsiHandler({final:"S"},function(Y){return H.scrollUp(Y)}),H._parser.registerCsiHandler({final:"T"},function(Y){return H.scrollDown(Y)}),H._parser.registerCsiHandler({final:"X"},function(Y){return H.eraseChars(Y)}),H._parser.registerCsiHandler({final:"Z"},function(Y){return H.cursorBackwardTab(Y)}),H._parser.registerCsiHandler({final:"`"},function(Y){return H.charPosAbsolute(Y)}),H._parser.registerCsiHandler({final:"a"},function(Y){return H.hPositionRelative(Y)}),H._parser.registerCsiHandler({final:"b"},function(Y){return H.repeatPrecedingCharacter(Y)}),H._parser.registerCsiHandler({final:"c"},function(Y){return H.sendDeviceAttributesPrimary(Y)}),H._parser.registerCsiHandler({prefix:">",final:"c"},function(Y){return H.sendDeviceAttributesSecondary(Y)}),H._parser.registerCsiHandler({final:"d"},function(Y){return H.linePosAbsolute(Y)}),H._parser.registerCsiHandler({final:"e"},function(Y){return H.vPositionRelative(Y)}),H._parser.registerCsiHandler({final:"f"},function(Y){return H.hVPosition(Y)}),H._parser.registerCsiHandler({final:"g"},function(Y){return H.tabClear(Y)}),H._parser.registerCsiHandler({final:"h"},function(Y){return H.setMode(Y)}),H._parser.registerCsiHandler({prefix:"?",final:"h"},function(Y){return H.setModePrivate(Y)}),H._parser.registerCsiHandler({final:"l"},function(Y){return H.resetMode(Y)}),H._parser.registerCsiHandler({prefix:"?",final:"l"},function(Y){return H.resetModePrivate(Y)}),H._parser.registerCsiHandler({final:"m"},function(Y){return H.charAttributes(Y)}),H._parser.registerCsiHandler({final:"n"},function(Y){return H.deviceStatus(Y)}),H._parser.registerCsiHandler({prefix:"?",final:"n"},function(Y){return H.deviceStatusPrivate(Y)}),H._parser.registerCsiHandler({intermediates:"!",final:"p"},function(Y){return H.softReset(Y)}),H._parser.registerCsiHandler({intermediates:" ",final:"q"},function(Y){return H.setCursorStyle(Y)}),H._parser.registerCsiHandler({final:"r"},function(Y){return H.setScrollRegion(Y)}),H._parser.registerCsiHandler({final:"s"},function(Y){return H.saveCursor(Y)}),H._parser.registerCsiHandler({final:"t"},function(Y){return H.windowOptions(Y)}),H._parser.registerCsiHandler({final:"u"},function(Y){return H.restoreCursor(Y)}),H._parser.registerCsiHandler({intermediates:"'",final:"}"},function(Y){return H.insertColumns(Y)}),H._parser.registerCsiHandler({intermediates:"'",final:"~"},function(Y){return H.deleteColumns(Y)}),H._parser.setExecuteHandler(m.C0.BEL,function(){return H.bell()}),H._parser.setExecuteHandler(m.C0.LF,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.VT,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.FF,function(){return H.lineFeed()}),H._parser.setExecuteHandler(m.C0.CR,function(){return H.carriageReturn()}),H._parser.setExecuteHandler(m.C0.BS,function(){return H.backspace()}),H._parser.setExecuteHandler(m.C0.HT,function(){return H.tab()}),H._parser.setExecuteHandler(m.C0.SO,function(){return H.shiftOut()}),H._parser.setExecuteHandler(m.C0.SI,function(){return H.shiftIn()}),H._parser.setExecuteHandler(m.C1.IND,function(){return H.index()}),H._parser.setExecuteHandler(m.C1.NEL,function(){return H.nextLine()}),H._parser.setExecuteHandler(m.C1.HTS,function(){return H.tabSet()}),H._parser.registerOscHandler(0,new L.OscHandler(function(Y){return H.setTitle(Y),H.setIconName(Y),!0})),H._parser.registerOscHandler(1,new L.OscHandler(function(Y){return H.setIconName(Y)})),H._parser.registerOscHandler(2,new L.OscHandler(function(Y){return H.setTitle(Y)})),H._parser.registerOscHandler(4,new L.OscHandler(function(Y){return H.setOrReportIndexedColor(Y)})),H._parser.registerOscHandler(10,new L.OscHandler(function(Y){return H.setOrReportFgColor(Y)})),H._parser.registerOscHandler(11,new L.OscHandler(function(Y){return H.setOrReportBgColor(Y)})),H._parser.registerOscHandler(12,new L.OscHandler(function(Y){return H.setOrReportCursorColor(Y)})),H._parser.registerOscHandler(104,new L.OscHandler(function(Y){return H.restoreIndexedColor(Y)})),H._parser.registerOscHandler(110,new L.OscHandler(function(Y){return H.restoreFgColor(Y)})),H._parser.registerOscHandler(111,new L.OscHandler(function(Y){return H.restoreBgColor(Y)})),H._parser.registerOscHandler(112,new L.OscHandler(function(Y){return H.restoreCursorColor(Y)})),H._parser.registerEscHandler({final:"7"},function(){return H.saveCursor()}),H._parser.registerEscHandler({final:"8"},function(){return H.restoreCursor()}),H._parser.registerEscHandler({final:"D"},function(){return H.index()}),H._parser.registerEscHandler({final:"E"},function(){return H.nextLine()}),H._parser.registerEscHandler({final:"H"},function(){return H.tabSet()}),H._parser.registerEscHandler({final:"M"},function(){return H.reverseIndex()}),H._parser.registerEscHandler({final:"="},function(){return H.keypadApplicationMode()}),H._parser.registerEscHandler({final:">"},function(){return H.keypadNumericMode()}),H._parser.registerEscHandler({final:"c"},function(){return H.fullReset()}),H._parser.registerEscHandler({final:"n"},function(){return H.setgLevel(2)}),H._parser.registerEscHandler({final:"o"},function(){return H.setgLevel(3)}),H._parser.registerEscHandler({final:"|"},function(){return H.setgLevel(3)}),H._parser.registerEscHandler({final:"}"},function(){return H.setgLevel(2)}),H._parser.registerEscHandler({final:"~"},function(){return H.setgLevel(1)}),H._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return H.selectDefaultCharset()}),H._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return H.selectDefaultCharset()});var q=function(Y){z._parser.registerEscHandler({intermediates:"(",final:Y},function(){return H.selectCharset("("+Y)}),z._parser.registerEscHandler({intermediates:")",final:Y},function(){return H.selectCharset(")"+Y)}),z._parser.registerEscHandler({intermediates:"*",final:Y},function(){return H.selectCharset("*"+Y)}),z._parser.registerEscHandler({intermediates:"+",final:Y},function(){return H.selectCharset("+"+Y)}),z._parser.registerEscHandler({intermediates:"-",final:Y},function(){return H.selectCharset("-"+Y)}),z._parser.registerEscHandler({intermediates:".",final:Y},function(){return H.selectCharset("."+Y)}),z._parser.registerEscHandler({intermediates:"/",final:Y},function(){return H.selectCharset("/"+Y)})},z=this;for(var ce in b.CHARSETS)q(ce);return H._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return H.screenAlignmentPattern()}),H._parser.setErrorHandler(function(Y){return H._logService.error("Parsing error: ",Y),Y}),H._parser.registerDcsHandler({intermediates:"$",final:"q"},new D(H._bufferService,H._coreService,H._logService,H._optionsService)),H}return y(W,U),Object.defineProperty(W.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),W.prototype.dispose=function(){U.prototype.dispose.call(this)},W.prototype._preserveStack=function(B,F,X,Z){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=X,this._parseStack.position=Z},W.prototype._logSlowResolvingAsync=function(B){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([B,new Promise(function(F,X){return setTimeout(function(){return X("#SLOW_TIMEOUT")},5e3)})]).catch(function(F){if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})},W.prototype.parse=function(B,F){var X,Z=this._activeBuffer.x,se=this._activeBuffer.y,ae=0,me=this._parseStack.paused;if(me){if(X=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(X),X;Z=this._parseStack.cursorStartX,se=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>M&&(ae=this._parseStack.position+M)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?' "'+B+'"':""),typeof B=="string"?B.split("").map(function(q){return q.charCodeAt(0)}):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(B.length,M))),me||this._dirtyRowService.clearRange(),B.length>M)for(var we=ae;we<B.length;we+=M){var he=we+M<B.length?we+M:B.length,H=typeof B=="string"?this._stringDecoder.decode(B.substring(we,he),this._parseBuffer):this._utf8Decoder.decode(B.subarray(we,he),this._parseBuffer);if(X=this._parser.parse(this._parseBuffer,H))return this._preserveStack(Z,se,H,we),this._logSlowResolvingAsync(X),X}else if(!me&&(H=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer),X=this._parser.parse(this._parseBuffer,H)))return this._preserveStack(Z,se,H,0),this._logSlowResolvingAsync(X),X;this._activeBuffer.x===Z&&this._activeBuffer.y===se||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},W.prototype.print=function(B,F,X){var Z,se,ae=this._charsetService.charset,me=this._optionsService.options.screenReaderMode,we=this._bufferService.cols,he=this._coreService.decPrivateModes.wraparound,H=this._coreService.modes.insertMode,q=this._curAttrData,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&X-F>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,q.fg,q.bg,q.extended);for(var ce=F;ce<X;++ce){if(Z=B[ce],se=this._unicodeService.wcwidth(Z),Z<127&&ae){var Y=ae[String.fromCharCode(Z)];Y&&(Z=Y.charCodeAt(0))}if(me&&this._onA11yChar.fire((0,p.stringFromCodePoint)(Z)),se||!this._activeBuffer.x){if(this._activeBuffer.x+se-1>=we){if(he){for(;this._activeBuffer.x<we;)z.setCellFromCodePoint(this._activeBuffer.x++,0,1,q.fg,q.bg,q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=we-1,se===2)continue}if(H&&(z.insertCells(this._activeBuffer.x,se,this._activeBuffer.getNullCell(q),q),z.getWidth(we-1)===2&&z.setCellFromCodePoint(we-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,q.fg,q.bg,q.extended)),z.setCellFromCodePoint(this._activeBuffer.x++,Z,se,q.fg,q.bg,q.extended),se>0)for(;--se;)z.setCellFromCodePoint(this._activeBuffer.x++,0,0,q.fg,q.bg,q.extended)}else z.getWidth(this._activeBuffer.x-1)?z.addCodepointToCell(this._activeBuffer.x-1,Z):z.addCodepointToCell(this._activeBuffer.x-2,Z)}X-F>0&&(z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<we&&X-F>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodePoint(this._activeBuffer.x,0,1,q.fg,q.bg,q.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype.registerCsiHandler=function(B,F){var X=this;return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,F):this._parser.registerCsiHandler(B,function(Z){return!k(Z.params[0],X._optionsService.options.windowOptions)||F(Z)})},W.prototype.registerDcsHandler=function(B,F){return this._parser.registerDcsHandler(B,new A.DcsHandler(F))},W.prototype.registerEscHandler=function(B,F){return this._parser.registerEscHandler(B,F)},W.prototype.registerOscHandler=function(B,F){return this._parser.registerOscHandler(B,new L.OscHandler(F))},W.prototype.bell=function(){return this._onRequestBell.fire(),!0},W.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},W.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},W.prototype.backspace=function(){var B;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||B===void 0?void 0:B.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},W.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0},W.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},W.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},W.prototype._restrictCursor=function(B){B===void 0&&(B=this._bufferService.cols-1),this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype._setCursor=function(B,F){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=B,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},W.prototype._moveCursor=function(B,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+F)},W.prototype.cursorUp=function(B){var F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0},W.prototype.cursorDown=function(B){var F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0},W.prototype.cursorForward=function(B){return this._moveCursor(B.params[0]||1,0),!0},W.prototype.cursorBackward=function(B){return this._moveCursor(-(B.params[0]||1),0),!0},W.prototype.cursorNextLine=function(B){return this.cursorDown(B),this._activeBuffer.x=0,!0},W.prototype.cursorPrecedingLine=function(B){return this.cursorUp(B),this._activeBuffer.x=0,!0},W.prototype.cursorCharAbsolute=function(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0},W.prototype.cursorPosition=function(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0},W.prototype.charPosAbsolute=function(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0},W.prototype.hPositionRelative=function(B){return this._moveCursor(B.params[0]||1,0),!0},W.prototype.linePosAbsolute=function(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0},W.prototype.vPositionRelative=function(B){return this._moveCursor(0,B.params[0]||1),!0},W.prototype.hVPosition=function(B){return this.cursorPosition(B),!0},W.prototype.tabClear=function(B){var F=B.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0},W.prototype.cursorForwardTab=function(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=B.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},W.prototype.cursorBackwardTab=function(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=B.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},W.prototype._eraseInBufferLine=function(B,F,X,Z){Z===void 0&&(Z=!1);var se=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);se.replaceCells(F,X,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Z&&(se.isWrapped=!1)},W.prototype._resetBufferLine=function(B){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);F.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1},W.prototype.eraseInDisplay=function(B){var F;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);F<this._bufferService.rows;F++)this._resetBufferLine(F);this._dirtyRowService.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowService.markDirty(F-1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 3:var X=this._activeBuffer.lines.length-this._bufferService.rows;X>0&&(this._activeBuffer.lines.trimStart(X),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-X,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-X,0),this._onScroll.fire(0))}return!0},W.prototype.eraseInLine=function(B){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},W.prototype.insertLines=function(B){this._restrictCursor();var F=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var X=this._activeBuffer.ybase+this._activeBuffer.y,Z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,se=this._bufferService.rows-1+this._activeBuffer.ybase-Z+1;F--;)this._activeBuffer.lines.splice(se-1,1),this._activeBuffer.lines.splice(X,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},W.prototype.deleteLines=function(B){this._restrictCursor();var F=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var X,Z=this._activeBuffer.ybase+this._activeBuffer.y;for(X=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-X;F--;)this._activeBuffer.lines.splice(Z,1),this._activeBuffer.lines.splice(X,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},W.prototype.insertChars=function(B){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.deleteChars=function(B){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.scrollUp=function(B){for(var F=B.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollDown=function(B){for(var F=B.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollLeft=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=B.params[0]||1,X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Z.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Z.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.scrollRight=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=B.params[0]||1,X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Z.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Z.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.insertColumns=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=B.params[0]||1,X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Z.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Z.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.deleteColumns=function(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=B.params[0]||1,X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Z.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Z.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},W.prototype.eraseChars=function(B){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},W.prototype.repeatPrecedingCharacter=function(B){if(!this._parser.precedingCodepoint)return!0;for(var F=B.params[0]||1,X=new Uint32Array(F),Z=0;Z<F;++Z)X[Z]=this._parser.precedingCodepoint;return this.print(X,0,X.length),!0},W.prototype.sendDeviceAttributesPrimary=function(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0},W.prototype.sendDeviceAttributesSecondary=function(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0},W.prototype._is=function(B){return(this._optionsService.options.termName+"").indexOf(B)===0},W.prototype.setMode=function(B){for(var F=0;F<B.length;F++)B.params[F]===4&&(this._coreService.modes.insertMode=!0);return!0},W.prototype.setModePrivate=function(B){for(var F=0;F<B.length;F++)switch(B.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},W.prototype.resetMode=function(B){for(var F=0;F<B.length;F++)B.params[F]===4&&(this._coreService.modes.insertMode=!1);return!0},W.prototype.resetModePrivate=function(B){for(var F=0;F<B.length;F++)switch(B.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},W.prototype._updateAttrColor=function(B,F,X,Z,se){return F===2?(B|=50331648,B&=-16777216,B|=f.AttributeData.fromColorRGB([X,Z,se])):F===5&&(B&=-50331904,B|=33554432|255&X),B},W.prototype._extractColor=function(B,F,X){var Z=[0,0,-1,0,0,0],se=0,ae=0;do{if(Z[ae+se]=B.params[F+ae],B.hasSubParams(F+ae)){var me=B.getSubParams(F+ae),we=0;do Z[1]===5&&(se=1),Z[ae+we+1+se]=me[we];while(++we<me.length&&we+ae+1+se<Z.length);break}if(Z[1]===5&&ae+se>=2||Z[1]===2&&ae+se>=5)break;Z[1]&&(se=1)}while(++ae+F<B.length&&ae+se<Z.length);for(we=2;we<Z.length;++we)Z[we]===-1&&(Z[we]=0);switch(Z[0]){case 38:X.fg=this._updateAttrColor(X.fg,Z[1],Z[3],Z[4],Z[5]);break;case 48:X.bg=this._updateAttrColor(X.bg,Z[1],Z[3],Z[4],Z[5]);break;case 58:X.extended=X.extended.clone(),X.extended.underlineColor=this._updateAttrColor(X.extended.underlineColor,Z[1],Z[3],Z[4],Z[5])}return ae},W.prototype._processUnderline=function(B,F){F.extended=F.extended.clone(),(!~B||B>5)&&(B=1),F.extended.underlineStyle=B,F.fg|=268435456,B===0&&(F.fg&=-268435457),F.updateExtended()},W.prototype.charAttributes=function(B){if(B.length===1&&B.params[0]===0)return this._curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var F,X=B.length,Z=this._curAttrData,se=0;se<X;se++)(F=B.params[se])>=30&&F<=37?(Z.fg&=-50331904,Z.fg|=16777216|F-30):F>=40&&F<=47?(Z.bg&=-50331904,Z.bg|=16777216|F-40):F>=90&&F<=97?(Z.fg&=-50331904,Z.fg|=16777224|F-90):F>=100&&F<=107?(Z.bg&=-50331904,Z.bg|=16777224|F-100):F===0?(Z.fg=l.DEFAULT_ATTR_DATA.fg,Z.bg=l.DEFAULT_ATTR_DATA.bg):F===1?Z.fg|=134217728:F===3?Z.bg|=67108864:F===4?(Z.fg|=268435456,this._processUnderline(B.hasSubParams(se)?B.getSubParams(se)[0]:1,Z)):F===5?Z.fg|=536870912:F===7?Z.fg|=67108864:F===8?Z.fg|=1073741824:F===9?Z.fg|=2147483648:F===2?Z.bg|=134217728:F===21?this._processUnderline(2,Z):F===22?(Z.fg&=-134217729,Z.bg&=-134217729):F===23?Z.bg&=-67108865:F===24?Z.fg&=-268435457:F===25?Z.fg&=-536870913:F===27?Z.fg&=-67108865:F===28?Z.fg&=-1073741825:F===29?Z.fg&=2147483647:F===39?(Z.fg&=-67108864,Z.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):F===49?(Z.bg&=-67108864,Z.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?se+=this._extractColor(B,se,Z):F===59?(Z.extended=Z.extended.clone(),Z.extended.underlineColor=-1,Z.updateExtended()):F===100?(Z.fg&=-67108864,Z.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,Z.bg&=-67108864,Z.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0},W.prototype.deviceStatus=function(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(m.C0.ESC+"[0n");break;case 6:var F=this._activeBuffer.y+1,X=this._activeBuffer.x+1;this._coreService.triggerDataEvent(m.C0.ESC+"["+F+";"+X+"R")}return!0},W.prototype.deviceStatusPrivate=function(B){if(B.params[0]===6){var F=this._activeBuffer.y+1,X=this._activeBuffer.x+1;this._coreService.triggerDataEvent(m.C0.ESC+"[?"+F+";"+X+"R")}return!0},W.prototype.softReset=function(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},W.prototype.setCursorStyle=function(B){var F=B.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var X=F%2==1;return this._optionsService.options.cursorBlink=X,!0},W.prototype.setScrollRegion=function(B){var F,X=B.params[0]||1;return(B.length<2||(F=B.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>X&&(this._activeBuffer.scrollTop=X-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0},W.prototype.windowOptions=function(B){if(!k(B.params[0],this._optionsService.options.windowOptions))return!0;var F=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(S.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(S.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(m.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},W.prototype.saveCursor=function(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},W.prototype.restoreCursor=function(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},W.prototype.setTitle=function(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0},W.prototype.setIconName=function(B){return this._iconName=B,!0},W.prototype.setOrReportIndexedColor=function(B){for(var F=[],X=B.split(";");X.length>1;){var Z=X.shift(),se=X.shift();if(/^\d+$/.exec(Z)){var ae=parseInt(Z);if(0<=ae&&ae<256)if(se==="?")F.push({type:0,index:ae});else{var me=(0,I.parseColor)(se);me&&F.push({type:1,index:ae,color:me})}}}return F.length&&this._onColor.fire(F),!0},W.prototype._setOrReportSpecialColor=function(B,F){for(var X=B.split(";"),Z=0;Z<X.length&&!(F>=this._specialColors.length);++Z,++F)if(X[Z]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{var se=(0,I.parseColor)(X[Z]);se&&this._onColor.fire([{type:1,index:this._specialColors[F],color:se}])}return!0},W.prototype.setOrReportFgColor=function(B){return this._setOrReportSpecialColor(B,0)},W.prototype.setOrReportBgColor=function(B){return this._setOrReportSpecialColor(B,1)},W.prototype.setOrReportCursorColor=function(B){return this._setOrReportSpecialColor(B,2)},W.prototype.restoreIndexedColor=function(B){if(!B)return this._onColor.fire([{type:2}]),!0;for(var F=[],X=B.split(";"),Z=0;Z<X.length;++Z)if(/^\d+$/.exec(X[Z])){var se=parseInt(X[Z]);0<=se&&se<256&&F.push({type:2,index:se})}return F.length&&this._onColor.fire(F),!0},W.prototype.restoreFgColor=function(B){return this._onColor.fire([{type:2,index:256}]),!0},W.prototype.restoreBgColor=function(B){return this._onColor.fire([{type:2,index:257}]),!0},W.prototype.restoreCursorColor=function(B){return this._onColor.fire([{type:2,index:258}]),!0},W.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},W.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},W.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},W.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0},W.prototype.selectCharset=function(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(P[B[0]],b.CHARSETS[B[1]]||b.DEFAULT_CHARSET),!0)},W.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},W.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},W.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},W.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},W.prototype.reset=function(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()},W.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},W.prototype.setgLevel=function(B){return this._charsetService.setgLevel(B),!0},W.prototype.screenAlignmentPattern=function(){var B=new s.CellData;B.content=1<<22|"E".charCodeAt(0),B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(var F=0;F<this._bufferService.rows;++F){var X=this._activeBuffer.ybase+this._activeBuffer.y+F,Z=this._activeBuffer.lines.get(X);Z&&(Z.fill(B),Z.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},W}(u.Disposable);d.InputHandler=E},844:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getDisposeArrayDisposable=d.disposeArray=d.Disposable=void 0;var x=function(){function y(){this._disposables=[],this._isDisposed=!1}return y.prototype.dispose=function(){this._isDisposed=!0;for(var S=0,m=this._disposables;S<m.length;S++)m[S].dispose();this._disposables.length=0},y.prototype.register=function(S){return this._disposables.push(S),S},y.prototype.unregister=function(S){var m=this._disposables.indexOf(S);m!==-1&&this._disposables.splice(m,1)},y}();function v(y){for(var S=0,m=y;S<m.length;S++)m[S].dispose();y.length=0}d.Disposable=x,d.disposeArray=v,d.getDisposeArrayDisposable=function(y){return{dispose:function(){return v(y)}}}},6114:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.isLinux=d.isWindows=d.isIphone=d.isIpad=d.isMac=d.isSafari=d.isFirefox=void 0;var x=typeof navigator=="undefined",v=x?"node":navigator.userAgent,y=x?"node":navigator.platform;d.isFirefox=v.includes("Firefox"),d.isSafari=/^((?!chrome|android).)*safari/i.test(v),d.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(y),d.isIpad=y==="iPad",d.isIphone=y==="iPhone",d.isWindows=["Windows","Win16","Win32","WinCE"].includes(y),d.isLinux=y.indexOf("Linux")>=0},8273:(J,d)=>{function x(v,y,S,m){if(S===void 0&&(S=0),m===void 0&&(m=v.length),S>=v.length)return v;S=(v.length+S)%v.length,m=m>=v.length?v.length:(v.length+m)%v.length;for(var b=S;b<m;++b)v[b]=y;return v}Object.defineProperty(d,"__esModule",{value:!0}),d.concat=d.fillFallback=d.fill=void 0,d.fill=function(v,y,S,m){return v.fill?v.fill(y,S,m):x(v,y,S,m)},d.fillFallback=x,d.concat=function(v,y){var S=new v.constructor(v.length+y.length);return S.set(v),S.set(y,v.length),S}},9282:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.updateWindowsModeWrappedState=void 0;var v=x(643);d.updateWindowsModeWrappedState=function(y){var S=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),m=S==null?void 0:S.get(y.cols-1),b=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);b&&m&&(b.isWrapped=m[v.CHAR_DATA_CODE_INDEX]!==v.NULL_CELL_CODE&&m[v.CHAR_DATA_CODE_INDEX]!==v.WHITESPACE_CELL_CODE)}},3734:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ExtendedAttrs=d.AttributeData=void 0;var x=function(){function y(){this.fg=0,this.bg=0,this.extended=new v}return y.toColorRGB=function(S){return[S>>>16&255,S>>>8&255,255&S]},y.fromColorRGB=function(S){return(255&S[0])<<16|(255&S[1])<<8|255&S[2]},y.prototype.clone=function(){var S=new y;return S.fg=this.fg,S.bg=this.bg,S.extended=this.extended.clone(),S},y.prototype.isInverse=function(){return 67108864&this.fg},y.prototype.isBold=function(){return 134217728&this.fg},y.prototype.isUnderline=function(){return 268435456&this.fg},y.prototype.isBlink=function(){return 536870912&this.fg},y.prototype.isInvisible=function(){return 1073741824&this.fg},y.prototype.isItalic=function(){return 67108864&this.bg},y.prototype.isDim=function(){return 134217728&this.bg},y.prototype.isStrikethrough=function(){return 2147483648&this.fg},y.prototype.getFgColorMode=function(){return 50331648&this.fg},y.prototype.getBgColorMode=function(){return 50331648&this.bg},y.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},y.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},y.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},y.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},y.prototype.isFgDefault=function(){return(50331648&this.fg)==0},y.prototype.isBgDefault=function(){return(50331648&this.bg)==0},y.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},y.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},y.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},y.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},y.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},y.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},y.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},y.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},y.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},y.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},y.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},y}();d.AttributeData=x;var v=function(){function y(S,m){S===void 0&&(S=0),m===void 0&&(m=-1),this.underlineStyle=S,this.underlineColor=m}return y.prototype.clone=function(){return new y(this.underlineStyle,this.underlineColor)},y.prototype.isEmpty=function(){return this.underlineStyle===0},y}();d.ExtendedAttrs=v},9092:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferStringIterator=d.Buffer=d.MAX_BUFFER_SIZE=void 0;var v=x(6349),y=x(8437),S=x(511),m=x(643),b=x(4634),C=x(4863),u=x(7116),h=x(3734);d.MAX_BUFFER_SIZE=4294967295;var p=function(){function a(o,s,f){this._hasScrollback=o,this._optionsService=s,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return a.prototype.getNullCell=function(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell},a.prototype.getWhitespaceCell=function(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell},a.prototype.getBlankLine=function(o,s){return new y.BufferLine(this._bufferService.cols,this.getNullCell(o),s)},Object.defineProperty(a.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isCursorInViewport",{get:function(){var o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows},enumerable:!1,configurable:!0}),a.prototype._getCorrectBufferLength=function(o){if(!this._hasScrollback)return o;var s=o+this._optionsService.options.scrollback;return s>d.MAX_BUFFER_SIZE?d.MAX_BUFFER_SIZE:s},a.prototype.fillViewportRows=function(o){if(this.lines.length===0){o===void 0&&(o=y.DEFAULT_ATTR_DATA);for(var s=this._rows;s--;)this.lines.push(this.getBlankLine(o))}},a.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},a.prototype.resize=function(o,s){var f=this.getNullCell(y.DEFAULT_ATTR_DATA),_=this._getCorrectBufferLength(s);if(_>this.lines.maxLength&&(this.lines.maxLength=_),this.lines.length>0){if(this._cols<o)for(var L=0;L<this.lines.length;L++)this.lines.get(L).resize(o,f);var A=0;if(this._rows<s)for(var I=this._rows;I<s;I++)this.lines.length<s+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new y.BufferLine(o,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+A+1?(this.ybase--,A++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(o,f)));else for(I=this._rows;I>s;I--)this.lines.length>s+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(_<this.lines.maxLength){var P=this.lines.length-_;P>0&&(this.lines.trimStart(P),this.ybase=Math.max(this.ybase-P,0),this.ydisp=Math.max(this.ydisp-P,0),this.savedY=Math.max(this.savedY-P,0)),this.lines.maxLength=_}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,s-1),A&&(this.y+=A),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=s-1,this._isReflowEnabled&&(this._reflow(o,s),this._cols>o))for(L=0;L<this.lines.length;L++)this.lines.get(L).resize(o,f);this._cols=o,this._rows=s},Object.defineProperty(a.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),a.prototype._reflow=function(o,s){this._cols!==o&&(o>this._cols?this._reflowLarger(o,s):this._reflowSmaller(o,s))},a.prototype._reflowLarger=function(o,s){var f=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(f.length>0){var _=(0,b.reflowLargerCreateNewLayout)(this.lines,f);(0,b.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(o,s,_.countRemoved)}},a.prototype._reflowLargerAdjustViewport=function(o,s,f){for(var _=this.getNullCell(y.DEFAULT_ATTR_DATA),L=f;L-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<s&&this.lines.push(new y.BufferLine(o,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)},a.prototype._reflowSmaller=function(o,s){for(var f=this.getNullCell(y.DEFAULT_ATTR_DATA),_=[],L=0,A=this.lines.length-1;A>=0;A--){var I=this.lines.get(A);if(!(!I||!I.isWrapped&&I.getTrimmedLength()<=o)){for(var P=[I];I.isWrapped&&A>0;)I=this.lines.get(--A),P.unshift(I);var M=this.ybase+this.y;if(!(M>=A&&M<A+P.length)){var k,D=P[P.length-1].getTrimmedLength(),E=(0,b.reflowSmallerGetNewLineLengths)(P,this._cols,o),U=E.length-P.length;k=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);for(var W=[],B=0;B<U;B++){var F=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);W.push(F)}W.length>0&&(_.push({start:A+P.length+L,newLines:W}),L+=W.length),P.push.apply(P,W);var X=E.length-1,Z=E[X];Z===0&&(Z=E[--X]);for(var se=P.length-U-1,ae=D;se>=0;){var me=Math.min(ae,Z);if(P[X].copyCellsFrom(P[se],ae-me,Z-me,me,!0),(Z-=me)==0&&(Z=E[--X]),(ae-=me)==0){se--;var we=Math.max(se,0);ae=(0,b.getWrappedLineTrimmedLength)(P,we,this._cols)}}for(B=0;B<P.length;B++)E[B]<o&&P[B].setCell(E[B],f);for(var he=U-k;he-- >0;)this.ybase===0?this.y<s-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+L)-s&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+s-1)}}}if(_.length>0){var H=[],q=[];for(B=0;B<this.lines.length;B++)q.push(this.lines.get(B));var z=this.lines.length,ce=z-1,Y=0,_e=_[Y];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+L);var Le=0;for(B=Math.min(this.lines.maxLength-1,z+L-1);B>=0;B--)if(_e&&_e.start>ce+Le){for(var Be=_e.newLines.length-1;Be>=0;Be--)this.lines.set(B--,_e.newLines[Be]);B++,H.push({index:ce+1,amount:_e.newLines.length}),Le+=_e.newLines.length,_e=_[++Y]}else this.lines.set(B,q[ce--]);var Ee=0;for(B=H.length-1;B>=0;B--)H[B].index+=Ee,this.lines.onInsertEmitter.fire(H[B]),Ee+=H[B].amount;var Ie=Math.max(0,z+L-this.lines.maxLength);Ie>0&&this.lines.onTrimEmitter.fire(Ie)}},a.prototype.stringIndexToBufferIndex=function(o,s,f){for(f===void 0&&(f=!1);s;){var _=this.lines.get(o);if(!_)return[-1,-1];for(var L=f?_.getTrimmedLength():_.length,A=0;A<L;++A)if(_.get(A)[m.CHAR_DATA_WIDTH_INDEX]&&(s-=_.get(A)[m.CHAR_DATA_CHAR_INDEX].length||1),s<0)return[o,A];o++}return[o,0]},a.prototype.translateBufferLineToString=function(o,s,f,_){f===void 0&&(f=0);var L=this.lines.get(o);return L?L.translateToString(s,f,_):""},a.prototype.getWrappedRangeForLine=function(o){for(var s=o,f=o;s>0&&this.lines.get(s).isWrapped;)s--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:s,last:f}},a.prototype.setupTabStops=function(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.options.tabStopWidth)this.tabs[o]=!0},a.prototype.prevStop=function(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o},a.prototype.nextStop=function(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o},a.prototype.addMarker=function(o){var s=this,f=new C.Marker(o);return this.markers.push(f),f.register(this.lines.onTrim(function(_){f.line-=_,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(function(_){f.line>=_.index&&(f.line+=_.amount)})),f.register(this.lines.onDelete(function(_){f.line>=_.index&&f.line<_.index+_.amount&&f.dispose(),f.line>_.index&&(f.line-=_.amount)})),f.register(f.onDispose(function(){return s._removeMarker(f)})),f},a.prototype._removeMarker=function(o){this.markers.splice(this.markers.indexOf(o),1)},a.prototype.iterator=function(o,s,f,_,L){return new l(this,o,s,f,_,L)},a}();d.Buffer=p;var l=function(){function a(o,s,f,_,L,A){f===void 0&&(f=0),_===void 0&&(_=o.lines.length),L===void 0&&(L=0),A===void 0&&(A=0),this._buffer=o,this._trimRight=s,this._startIndex=f,this._endIndex=_,this._startOverscan=L,this._endOverscan=A,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return a.prototype.hasNext=function(){return this._current<this._endIndex},a.prototype.next=function(){var o=this._buffer.getWrappedRangeForLine(this._current);o.first<this._startIndex-this._startOverscan&&(o.first=this._startIndex-this._startOverscan),o.last>this._endIndex+this._endOverscan&&(o.last=this._endIndex+this._endOverscan),o.first=Math.max(o.first,0),o.last=Math.min(o.last,this._buffer.lines.length);for(var s="",f=o.first;f<=o.last;++f)s+=this._buffer.translateBufferLineToString(f,this._trimRight);return this._current=o.last+1,{range:o,content:s}},a}();d.BufferStringIterator=l},8437:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLine=d.DEFAULT_ATTR_DATA=void 0;var v=x(482),y=x(643),S=x(511),m=x(3734);d.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);var b=function(){function C(u,h,p){p===void 0&&(p=!1),this.isWrapped=p,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);for(var l=h||S.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),a=0;a<u;++a)this.setCell(a,l);this.length=u}return C.prototype.get=function(u){var h=this._data[3*u+0],p=2097151&h;return[this._data[3*u+1],2097152&h?this._combined[u]:p?(0,v.stringFromCodePoint)(p):"",h>>22,2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):p]},C.prototype.set=function(u,h){this._data[3*u+1]=h[y.CHAR_DATA_ATTR_INDEX],h[y.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=h[1],this._data[3*u+0]=2097152|u|h[y.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=h[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[y.CHAR_DATA_WIDTH_INDEX]<<22},C.prototype.getWidth=function(u){return this._data[3*u+0]>>22},C.prototype.hasWidth=function(u){return 12582912&this._data[3*u+0]},C.prototype.getFg=function(u){return this._data[3*u+1]},C.prototype.getBg=function(u){return this._data[3*u+2]},C.prototype.hasContent=function(u){return 4194303&this._data[3*u+0]},C.prototype.getCodePoint=function(u){var h=this._data[3*u+0];return 2097152&h?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&h},C.prototype.isCombined=function(u){return 2097152&this._data[3*u+0]},C.prototype.getString=function(u){var h=this._data[3*u+0];return 2097152&h?this._combined[u]:2097151&h?(0,v.stringFromCodePoint)(2097151&h):""},C.prototype.loadCell=function(u,h){var p=3*u;return h.content=this._data[p+0],h.fg=this._data[p+1],h.bg=this._data[p+2],2097152&h.content&&(h.combinedData=this._combined[u]),268435456&h.bg&&(h.extended=this._extendedAttrs[u]),h},C.prototype.setCell=function(u,h){2097152&h.content&&(this._combined[u]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=h.content,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg},C.prototype.setCellFromCodePoint=function(u,h,p,l,a,o){268435456&a&&(this._extendedAttrs[u]=o),this._data[3*u+0]=h|p<<22,this._data[3*u+1]=l,this._data[3*u+2]=a},C.prototype.addCodepointToCell=function(u,h){var p=this._data[3*u+0];2097152&p?this._combined[u]+=(0,v.stringFromCodePoint)(h):(2097151&p?(this._combined[u]=(0,v.stringFromCodePoint)(2097151&p)+(0,v.stringFromCodePoint)(h),p&=-2097152,p|=2097152):p=h|1<<22,this._data[3*u+0]=p)},C.prototype.insertCells=function(u,h,p,l){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs),h<this.length-u){for(var a=new S.CellData,o=this.length-u-h-1;o>=0;--o)this.setCell(u+h+o,this.loadCell(u+o,a));for(o=0;o<h;++o)this.setCell(u+o,p)}else for(o=u;o<this.length;++o)this.setCell(o,p);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs)},C.prototype.deleteCells=function(u,h,p,l){if(u%=this.length,h<this.length-u){for(var a=new S.CellData,o=0;o<this.length-u-h;++o)this.setCell(u+o,this.loadCell(u+h+o,a));for(o=this.length-h;o<this.length;++o)this.setCell(o,p)}else for(o=u;o<this.length;++o)this.setCell(o,p);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs)},C.prototype.replaceCells=function(u,h,p,l){for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new m.ExtendedAttrs);u<h&&u<this.length;)this.setCell(u++,p)},C.prototype.resize=function(u,h){if(u!==this.length){if(u>this.length){var p=new Uint32Array(3*u);this.length&&(3*u<this._data.length?p.set(this._data.subarray(0,3*u)):p.set(this._data)),this._data=p;for(var l=this.length;l<u;++l)this.setCell(l,h)}else if(u){(p=new Uint32Array(3*u)).set(this._data.subarray(0,3*u)),this._data=p;var a=Object.keys(this._combined);for(l=0;l<a.length;l++){var o=parseInt(a[l],10);o>=u&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},C.prototype.fill=function(u){this._combined={},this._extendedAttrs={};for(var h=0;h<this.length;++h)this.setCell(h,u)},C.prototype.copyFrom=function(u){for(var h in this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={},u._combined)this._combined[h]=u._combined[h];for(var h in this._extendedAttrs={},u._extendedAttrs)this._extendedAttrs[h]=u._extendedAttrs[h];this.isWrapped=u.isWrapped},C.prototype.clone=function(){var u=new C(0);for(var h in u._data=new Uint32Array(this._data),u.length=this.length,this._combined)u._combined[h]=this._combined[h];for(var h in this._extendedAttrs)u._extendedAttrs[h]=this._extendedAttrs[h];return u.isWrapped=this.isWrapped,u},C.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0},C.prototype.copyCellsFrom=function(u,h,p,l,a){var o=u._data;if(a)for(var s=l-1;s>=0;s--)for(var f=0;f<3;f++)this._data[3*(p+s)+f]=o[3*(h+s)+f];else for(s=0;s<l;s++)for(f=0;f<3;f++)this._data[3*(p+s)+f]=o[3*(h+s)+f];var _=Object.keys(u._combined);for(f=0;f<_.length;f++){var L=parseInt(_[f],10);L>=h&&(this._combined[L-h+p]=u._combined[L])}},C.prototype.translateToString=function(u,h,p){u===void 0&&(u=!1),h===void 0&&(h=0),p===void 0&&(p=this.length),u&&(p=Math.min(p,this.getTrimmedLength()));for(var l="";h<p;){var a=this._data[3*h+0],o=2097151&a;l+=2097152&a?this._combined[h]:o?(0,v.stringFromCodePoint)(o):y.WHITESPACE_CELL_CHAR,h+=a>>22||1}return l},C}();d.BufferLine=b},4841:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getRangeLength=void 0,d.getRangeLength=function(x,v){if(x.start.y>x.end.y)throw new Error("Buffer range end ("+x.end.x+", "+x.end.y+") cannot be before start ("+x.start.x+", "+x.start.y+")");return v*(x.end.y-x.start.y)+(x.end.x-x.start.x+1)}},4634:(J,d)=>{function x(v,y,S){if(y===v.length-1)return v[y].getTrimmedLength();var m=!v[y].hasContent(S-1)&&v[y].getWidth(S-1)===1,b=v[y+1].getWidth(0)===2;return m&&b?S-1:S}Object.defineProperty(d,"__esModule",{value:!0}),d.getWrappedLineTrimmedLength=d.reflowSmallerGetNewLineLengths=d.reflowLargerApplyNewLayout=d.reflowLargerCreateNewLayout=d.reflowLargerGetLinesToRemove=void 0,d.reflowLargerGetLinesToRemove=function(v,y,S,m,b){for(var C=[],u=0;u<v.length-1;u++){var h=u,p=v.get(++h);if(p.isWrapped){for(var l=[v.get(u)];h<v.length&&p.isWrapped;)l.push(p),p=v.get(++h);if(m>=u&&m<h)u+=l.length-1;else{for(var a=0,o=x(l,a,y),s=1,f=0;s<l.length;){var _=x(l,s,y),L=_-f,A=S-o,I=Math.min(L,A);l[a].copyCellsFrom(l[s],f,o,I,!1),(o+=I)===S&&(a++,o=0),(f+=I)===_&&(s++,f=0),o===0&&a!==0&&l[a-1].getWidth(S-1)===2&&(l[a].copyCellsFrom(l[a-1],S-1,o++,1,!1),l[a-1].setCell(S-1,b))}l[a].replaceCells(o,S,b);for(var P=0,M=l.length-1;M>0&&(M>a||l[M].getTrimmedLength()===0);M--)P++;P>0&&(C.push(u+l.length-P),C.push(P)),u+=l.length-1}}}return C},d.reflowLargerCreateNewLayout=function(v,y){for(var S=[],m=0,b=y[m],C=0,u=0;u<v.length;u++)if(b===u){var h=y[++m];v.onDeleteEmitter.fire({index:u-C,amount:h}),u+=h-1,C+=h,b=y[++m]}else S.push(u);return{layout:S,countRemoved:C}},d.reflowLargerApplyNewLayout=function(v,y){for(var S=[],m=0;m<y.length;m++)S.push(v.get(y[m]));for(m=0;m<S.length;m++)v.set(m,S[m]);v.length=y.length},d.reflowSmallerGetNewLineLengths=function(v,y,S){for(var m=[],b=v.map(function(o,s){return x(v,s,y)}).reduce(function(o,s){return o+s}),C=0,u=0,h=0;h<b;){if(b-h<S){m.push(b-h);break}C+=S;var p=x(v,u,y);C>p&&(C-=p,u++);var l=v[u].getWidth(C-1)===2;l&&C--;var a=l?S-1:S;m.push(a),h+=a}return m},d.getWrappedLineTrimmedLength=x},5295:function(J,d,x){var v,y=this&&this.__extends||(v=function(C,u){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(h[l]=p[l])},v(C,u)},function(C,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function h(){this.constructor=C}v(C,u),C.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(d,"__esModule",{value:!0}),d.BufferSet=void 0;var S=x(9092),m=x(8460),b=function(C){function u(h,p){var l=C.call(this)||this;return l._optionsService=h,l._bufferService=p,l._onBufferActivate=l.register(new m.EventEmitter),l.reset(),l}return y(u,C),Object.defineProperty(u.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),u.prototype.reset=function(){this._normal=new S.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new S.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(u.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),u.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},u.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},u.prototype.resize=function(h,p){this._normal.resize(h,p),this._alt.resize(h,p)},u.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},u}(x(844).Disposable);d.BufferSet=b},511:function(J,d,x){var v,y=this&&this.__extends||(v=function(u,h){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(p[a]=l[a])},v(u,h)},function(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function p(){this.constructor=u}v(u,h),u.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(d,"__esModule",{value:!0}),d.CellData=void 0;var S=x(482),m=x(643),b=x(3734),C=function(u){function h(){var p=u!==null&&u.apply(this,arguments)||this;return p.content=0,p.fg=0,p.bg=0,p.extended=new b.ExtendedAttrs,p.combinedData="",p}return y(h,u),h.fromCharData=function(p){var l=new h;return l.setFromCharData(p),l},h.prototype.isCombined=function(){return 2097152&this.content},h.prototype.getWidth=function(){return this.content>>22},h.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,S.stringFromCodePoint)(2097151&this.content):""},h.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},h.prototype.setFromCharData=function(p){this.fg=p[m.CHAR_DATA_ATTR_INDEX],this.bg=0;var l=!1;if(p[m.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(p[m.CHAR_DATA_CHAR_INDEX].length===2){var a=p[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){var o=p[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(a-55296)+o-56320+65536|p[m.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=p[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[m.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=p[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[m.CHAR_DATA_WIDTH_INDEX]<<22)},h.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},h}(b.AttributeData);d.CellData=C},643:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WHITESPACE_CELL_CODE=d.WHITESPACE_CELL_WIDTH=d.WHITESPACE_CELL_CHAR=d.NULL_CELL_CODE=d.NULL_CELL_WIDTH=d.NULL_CELL_CHAR=d.CHAR_DATA_CODE_INDEX=d.CHAR_DATA_WIDTH_INDEX=d.CHAR_DATA_CHAR_INDEX=d.CHAR_DATA_ATTR_INDEX=d.DEFAULT_ATTR=d.DEFAULT_COLOR=void 0,d.DEFAULT_COLOR=256,d.DEFAULT_ATTR=256|d.DEFAULT_COLOR<<9,d.CHAR_DATA_ATTR_INDEX=0,d.CHAR_DATA_CHAR_INDEX=1,d.CHAR_DATA_WIDTH_INDEX=2,d.CHAR_DATA_CODE_INDEX=3,d.NULL_CELL_CHAR="",d.NULL_CELL_WIDTH=1,d.NULL_CELL_CODE=0,d.WHITESPACE_CELL_CHAR=" ",d.WHITESPACE_CELL_WIDTH=1,d.WHITESPACE_CELL_CODE=32},4863:function(J,d,x){var v,y=this&&this.__extends||(v=function(b,C){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(u[p]=h[p])},v(b,C)},function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function u(){this.constructor=b}v(b,C),b.prototype=C===null?Object.create(C):(u.prototype=C.prototype,new u)});Object.defineProperty(d,"__esModule",{value:!0}),d.Marker=void 0;var S=x(8460),m=function(b){function C(u){var h=b.call(this)||this;return h.line=u,h._id=C._nextId++,h.isDisposed=!1,h._onDispose=new S.EventEmitter,h}return y(C,b),Object.defineProperty(C.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),b.prototype.dispose.call(this))},C._nextId=1,C}(x(844).Disposable);d.Marker=m},7116:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_CHARSET=d.CHARSETS=void 0,d.CHARSETS={},d.DEFAULT_CHARSET=d.CHARSETS.B,d.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},d.CHARSETS.A={"#":"\xA3"},d.CHARSETS.B=void 0,d.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},d.CHARSETS.C=d.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},d.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},d.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},d.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},d.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},d.CHARSETS.E=d.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},d.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},d.CHARSETS.H=d.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},d.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(J,d)=>{var x,v;Object.defineProperty(d,"__esModule",{value:!0}),d.C1=d.C0=void 0,(v=d.C0||(d.C0={})).NUL="\0",v.SOH="",v.STX="",v.ETX="",v.EOT="",v.ENQ="",v.ACK="",v.BEL="\x07",v.BS="\b",v.HT="	",v.LF=`
`,v.VT="\v",v.FF="\f",v.CR="\r",v.SO="",v.SI="",v.DLE="",v.DC1="",v.DC2="",v.DC3="",v.DC4="",v.NAK="",v.SYN="",v.ETB="",v.CAN="",v.EM="",v.SUB="",v.ESC="\x1B",v.FS="",v.GS="",v.RS="",v.US="",v.SP=" ",v.DEL="\x7F",(x=d.C1||(d.C1={})).PAD="\x80",x.HOP="\x81",x.BPH="\x82",x.NBH="\x83",x.IND="\x84",x.NEL="\x85",x.SSA="\x86",x.ESA="\x87",x.HTS="\x88",x.HTJ="\x89",x.VTS="\x8A",x.PLD="\x8B",x.PLU="\x8C",x.RI="\x8D",x.SS2="\x8E",x.SS3="\x8F",x.DCS="\x90",x.PU1="\x91",x.PU2="\x92",x.STS="\x93",x.CCH="\x94",x.MW="\x95",x.SPA="\x96",x.EPA="\x97",x.SOS="\x98",x.SGCI="\x99",x.SCI="\x9A",x.CSI="\x9B",x.ST="\x9C",x.OSC="\x9D",x.PM="\x9E",x.APC="\x9F"},7399:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.evaluateKeyboardEvent=void 0;var v=x(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};d.evaluateKeyboardEvent=function(S,m,b,C){var u={type:0,cancel:!1,key:void 0},h=(S.shiftKey?1:0)|(S.altKey?2:0)|(S.ctrlKey?4:0)|(S.metaKey?8:0);switch(S.keyCode){case 0:S.key==="UIKeyInputUpArrow"?u.key=m?v.C0.ESC+"OA":v.C0.ESC+"[A":S.key==="UIKeyInputLeftArrow"?u.key=m?v.C0.ESC+"OD":v.C0.ESC+"[D":S.key==="UIKeyInputRightArrow"?u.key=m?v.C0.ESC+"OC":v.C0.ESC+"[C":S.key==="UIKeyInputDownArrow"&&(u.key=m?v.C0.ESC+"OB":v.C0.ESC+"[B");break;case 8:if(S.shiftKey){u.key=v.C0.BS;break}if(S.altKey){u.key=v.C0.ESC+v.C0.DEL;break}u.key=v.C0.DEL;break;case 9:if(S.shiftKey){u.key=v.C0.ESC+"[Z";break}u.key=v.C0.HT,u.cancel=!0;break;case 13:u.key=S.altKey?v.C0.ESC+v.C0.CR:v.C0.CR,u.cancel=!0;break;case 27:u.key=v.C0.ESC,S.altKey&&(u.key=v.C0.ESC+v.C0.ESC),u.cancel=!0;break;case 37:if(S.metaKey)break;h?(u.key=v.C0.ESC+"[1;"+(h+1)+"D",u.key===v.C0.ESC+"[1;3D"&&(u.key=v.C0.ESC+(b?"b":"[1;5D"))):u.key=m?v.C0.ESC+"OD":v.C0.ESC+"[D";break;case 39:if(S.metaKey)break;h?(u.key=v.C0.ESC+"[1;"+(h+1)+"C",u.key===v.C0.ESC+"[1;3C"&&(u.key=v.C0.ESC+(b?"f":"[1;5C"))):u.key=m?v.C0.ESC+"OC":v.C0.ESC+"[C";break;case 38:if(S.metaKey)break;h?(u.key=v.C0.ESC+"[1;"+(h+1)+"A",b||u.key!==v.C0.ESC+"[1;3A"||(u.key=v.C0.ESC+"[1;5A")):u.key=m?v.C0.ESC+"OA":v.C0.ESC+"[A";break;case 40:if(S.metaKey)break;h?(u.key=v.C0.ESC+"[1;"+(h+1)+"B",b||u.key!==v.C0.ESC+"[1;3B"||(u.key=v.C0.ESC+"[1;5B")):u.key=m?v.C0.ESC+"OB":v.C0.ESC+"[B";break;case 45:S.shiftKey||S.ctrlKey||(u.key=v.C0.ESC+"[2~");break;case 46:u.key=h?v.C0.ESC+"[3;"+(h+1)+"~":v.C0.ESC+"[3~";break;case 36:u.key=h?v.C0.ESC+"[1;"+(h+1)+"H":m?v.C0.ESC+"OH":v.C0.ESC+"[H";break;case 35:u.key=h?v.C0.ESC+"[1;"+(h+1)+"F":m?v.C0.ESC+"OF":v.C0.ESC+"[F";break;case 33:S.shiftKey?u.type=2:u.key=v.C0.ESC+"[5~";break;case 34:S.shiftKey?u.type=3:u.key=v.C0.ESC+"[6~";break;case 112:u.key=h?v.C0.ESC+"[1;"+(h+1)+"P":v.C0.ESC+"OP";break;case 113:u.key=h?v.C0.ESC+"[1;"+(h+1)+"Q":v.C0.ESC+"OQ";break;case 114:u.key=h?v.C0.ESC+"[1;"+(h+1)+"R":v.C0.ESC+"OR";break;case 115:u.key=h?v.C0.ESC+"[1;"+(h+1)+"S":v.C0.ESC+"OS";break;case 116:u.key=h?v.C0.ESC+"[15;"+(h+1)+"~":v.C0.ESC+"[15~";break;case 117:u.key=h?v.C0.ESC+"[17;"+(h+1)+"~":v.C0.ESC+"[17~";break;case 118:u.key=h?v.C0.ESC+"[18;"+(h+1)+"~":v.C0.ESC+"[18~";break;case 119:u.key=h?v.C0.ESC+"[19;"+(h+1)+"~":v.C0.ESC+"[19~";break;case 120:u.key=h?v.C0.ESC+"[20;"+(h+1)+"~":v.C0.ESC+"[20~";break;case 121:u.key=h?v.C0.ESC+"[21;"+(h+1)+"~":v.C0.ESC+"[21~";break;case 122:u.key=h?v.C0.ESC+"[23;"+(h+1)+"~":v.C0.ESC+"[23~";break;case 123:u.key=h?v.C0.ESC+"[24;"+(h+1)+"~":v.C0.ESC+"[24~";break;default:if(!S.ctrlKey||S.shiftKey||S.altKey||S.metaKey)if(b&&!C||!S.altKey||S.metaKey)!b||S.altKey||S.ctrlKey||S.shiftKey||!S.metaKey?S.key&&!S.ctrlKey&&!S.altKey&&!S.metaKey&&S.keyCode>=48&&S.key.length===1?u.key=S.key:S.key&&S.ctrlKey&&S.key==="_"&&(u.key=v.C0.US):S.keyCode===65&&(u.type=1);else{var p=y[S.keyCode],l=p==null?void 0:p[S.shiftKey?1:0];if(l)u.key=v.C0.ESC+l;else if(S.keyCode>=65&&S.keyCode<=90){var a=S.ctrlKey?S.keyCode-64:S.keyCode+32;u.key=v.C0.ESC+String.fromCharCode(a)}}else S.keyCode>=65&&S.keyCode<=90?u.key=String.fromCharCode(S.keyCode-64):S.keyCode===32?u.key=v.C0.NUL:S.keyCode>=51&&S.keyCode<=55?u.key=String.fromCharCode(S.keyCode-51+27):S.keyCode===56?u.key=v.C0.DEL:S.keyCode===219?u.key=v.C0.ESC:S.keyCode===220?u.key=v.C0.FS:S.keyCode===221&&(u.key=v.C0.GS)}return u}},482:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Utf8ToUtf32=d.StringToUtf32=d.utf32ToString=d.stringFromCodePoint=void 0,d.stringFromCodePoint=function(y){return y>65535?(y-=65536,String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):String.fromCharCode(y)},d.utf32ToString=function(y,S,m){S===void 0&&(S=0),m===void 0&&(m=y.length);for(var b="",C=S;C<m;++C){var u=y[C];u>65535?(u-=65536,b+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):b+=String.fromCharCode(u)}return b};var x=function(){function y(){this._interim=0}return y.prototype.clear=function(){this._interim=0},y.prototype.decode=function(S,m){var b=S.length;if(!b)return 0;var C=0,u=0;this._interim&&(56320<=(l=S.charCodeAt(u++))&&l<=57343?m[C++]=1024*(this._interim-55296)+l-56320+65536:(m[C++]=this._interim,m[C++]=l),this._interim=0);for(var h=u;h<b;++h){var p=S.charCodeAt(h);if(55296<=p&&p<=56319){if(++h>=b)return this._interim=p,C;var l;56320<=(l=S.charCodeAt(h))&&l<=57343?m[C++]=1024*(p-55296)+l-56320+65536:(m[C++]=p,m[C++]=l)}else p!==65279&&(m[C++]=p)}return C},y}();d.StringToUtf32=x;var v=function(){function y(){this.interim=new Uint8Array(3)}return y.prototype.clear=function(){this.interim.fill(0)},y.prototype.decode=function(S,m){var b=S.length;if(!b)return 0;var C,u,h,p,l=0,a=0,o=0;if(this.interim[0]){var s=!1,f=this.interim[0];f&=(224&f)==192?31:(240&f)==224?15:7;for(var _=0,L=void 0;(L=63&this.interim[++_])&&_<4;)f<<=6,f|=L;for(var A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=A-_;o<I;){if(o>=b)return 0;if((192&(L=S[o++]))!=128){o--,s=!0;break}this.interim[_++]=L,f<<=6,f|=63&L}s||(A===2?f<128?o--:m[l++]=f:A===3?f<2048||f>=55296&&f<=57343||f===65279||(m[l++]=f):f<65536||f>1114111||(m[l++]=f)),this.interim.fill(0)}for(var P=b-4,M=o;M<b;){for(;!(!(M<P)||128&(C=S[M])||128&(u=S[M+1])||128&(h=S[M+2])||128&(p=S[M+3]));)m[l++]=C,m[l++]=u,m[l++]=h,m[l++]=p,M+=4;if((C=S[M++])<128)m[l++]=C;else if((224&C)==192){if(M>=b)return this.interim[0]=C,l;if((192&(u=S[M++]))!=128){M--;continue}if((a=(31&C)<<6|63&u)<128){M--;continue}m[l++]=a}else if((240&C)==224){if(M>=b)return this.interim[0]=C,l;if((192&(u=S[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=C,this.interim[1]=u,l;if((192&(h=S[M++]))!=128){M--;continue}if((a=(15&C)<<12|(63&u)<<6|63&h)<2048||a>=55296&&a<=57343||a===65279)continue;m[l++]=a}else if((248&C)==240){if(M>=b)return this.interim[0]=C,l;if((192&(u=S[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=C,this.interim[1]=u,l;if((192&(h=S[M++]))!=128){M--;continue}if(M>=b)return this.interim[0]=C,this.interim[1]=u,this.interim[2]=h,l;if((192&(p=S[M++]))!=128){M--;continue}if((a=(7&C)<<18|(63&u)<<12|(63&h)<<6|63&p)<65536||a>1114111)continue;m[l++]=a}}return l},y}();d.Utf8ToUtf32=v},225:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeV6=void 0;var v,y=x(8273),S=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],b=function(){function C(){if(this.version="6",!v){v=new Uint8Array(65536),(0,y.fill)(v,1),v[0]=0,(0,y.fill)(v,0,1,32),(0,y.fill)(v,0,127,160),(0,y.fill)(v,2,4352,4448),v[9001]=2,v[9002]=2,(0,y.fill)(v,2,11904,42192),v[12351]=1,(0,y.fill)(v,2,44032,55204),(0,y.fill)(v,2,63744,64256),(0,y.fill)(v,2,65040,65050),(0,y.fill)(v,2,65072,65136),(0,y.fill)(v,2,65280,65377),(0,y.fill)(v,2,65504,65511);for(var u=0;u<S.length;++u)(0,y.fill)(v,0,S[u][0],S[u][1]+1)}}return C.prototype.wcwidth=function(u){return u<32?0:u<127?1:u<65536?v[u]:function(h,p){var l,a=0,o=p.length-1;if(h<p[0][0]||h>p[o][1])return!1;for(;o>=a;)if(h>p[l=a+o>>1][1])a=l+1;else{if(!(h<p[l][0]))return!0;o=l-1}return!1}(u,m)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1},C}();d.UnicodeV6=b},5981:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WriteBuffer=void 0;var x=typeof queueMicrotask=="undefined"?function(y){Promise.resolve().then(y)}:queueMicrotask,v=function(){function y(S){this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return y.prototype.writeSync=function(S,m){if(m!==void 0&&this._syncCalls>m)this._syncCalls=0;else if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);var C=this._callbacks.shift();C&&C()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},y.prototype.write=function(S,m){var b=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return b._innerWrite()})),this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(m)},y.prototype._innerWrite=function(S,m){var b=this;S===void 0&&(S=0),m===void 0&&(m=!0);for(var C=S||Date.now();this._writeBuffer.length>this._bufferOffset;){var u=this._writeBuffer[this._bufferOffset],h=this._action(u,m);if(h)return void h.catch(function(l){return x(function(){throw l}),Promise.resolve(!1)}).then(function(l){return Date.now()-C>=12?setTimeout(function(){return b._innerWrite(0,l)}):b._innerWrite(C,l)});var p=this._callbacks[this._bufferOffset];if(p&&p(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return b._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},y}();d.WriteBuffer=v},5941:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.toRgbString=d.parseColor=void 0;var x=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,v=/^[\da-f]+$/;function y(S,m){var b=S.toString(16),C=b.length<2?"0"+b:b;switch(m){case 4:return b[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}d.parseColor=function(S){if(S){var m=S.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);var b=x.exec(m);if(b){var C=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/C*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/C*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/C*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),v.exec(m)&&[3,6,9,12].includes(m.length))){for(var u=m.length/3,h=[0,0,0],p=0;p<3;++p){var l=parseInt(m.slice(u*p,u*p+u),16);h[p]=u===1?l<<4:u===2?l:u===3?l>>4:l>>8}return h}}},d.toRgbString=function(S,m){m===void 0&&(m=16);var b=S[0],C=S[1],u=S[2];return"rgb:"+y(b,m)+"/"+y(C,m)+"/"+y(u,m)}},5770:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PAYLOAD_LIMIT=void 0,d.PAYLOAD_LIMIT=1e7},6351:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DcsHandler=d.DcsParser=void 0;var v=x(482),y=x(8742),S=x(5770),m=[],b=function(){function h(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return h.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=m},h.prototype.registerHandler=function(p,l){this._handlers[p]===void 0&&(this._handlers[p]=[]);var a=this._handlers[p];return a.push(l),{dispose:function(){var o=a.indexOf(l);o!==-1&&a.splice(o,1)}}},h.prototype.clearHandler=function(p){this._handlers[p]&&delete this._handlers[p]},h.prototype.setHandlerFallback=function(p){this._handlerFb=p},h.prototype.reset=function(){if(this._active.length)for(var p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0},h.prototype.hook=function(p,l){if(this.reset(),this._ident=p,this._active=this._handlers[p]||m,this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].hook(l);else this._handlerFb(this._ident,"HOOK",l)},h.prototype.put=function(p,l,a){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(p,l,a);else this._handlerFb(this._ident,"PUT",(0,v.utf32ToString)(p,l,a))},h.prototype.unhook=function(p,l){if(l===void 0&&(l=!0),this._active.length){var a=!1,o=this._active.length-1,s=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,a=l,s=this._stack.fallThrough,this._stack.paused=!1),!s&&a===!1){for(;o>=0&&(a=this._active[o].unhook(p))!==!0;o--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,a;o--}for(;o>=0;o--)if((a=this._active[o].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",p);this._active=m,this._ident=0},h}();d.DcsParser=b;var C=new y.Params;C.addParam(0);var u=function(){function h(p){this._handler=p,this._data="",this._params=C,this._hitLimit=!1}return h.prototype.hook=function(p){this._params=p.length>1||p.params[0]?p.clone():C,this._data="",this._hitLimit=!1},h.prototype.put=function(p,l,a){this._hitLimit||(this._data+=(0,v.utf32ToString)(p,l,a),this._data.length>S.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},h.prototype.unhook=function(p){var l=this,a=!1;if(this._hitLimit)a=!1;else if(p&&(a=this._handler(this._data,this._params))instanceof Promise)return a.then(function(o){return l._params=C,l._data="",l._hitLimit=!1,o});return this._params=C,this._data="",this._hitLimit=!1,a},h}();d.DcsHandler=u},2015:function(J,d,x){var v,y=this&&this.__extends||(v=function(a,o){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,f){s.__proto__=f}||function(s,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(s[_]=f[_])},v(a,o)},function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=a}v(a,o),a.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)});Object.defineProperty(d,"__esModule",{value:!0}),d.EscapeSequenceParser=d.VT500_TRANSITION_TABLE=d.TransitionTable=void 0;var S=x(844),m=x(8273),b=x(8742),C=x(6242),u=x(6351),h=function(){function a(o){this.table=new Uint8Array(o)}return a.prototype.setDefault=function(o,s){(0,m.fill)(this.table,o<<4|s)},a.prototype.add=function(o,s,f,_){this.table[s<<8|o]=f<<4|_},a.prototype.addMany=function(o,s,f,_){for(var L=0;L<o.length;L++)this.table[s<<8|o[L]]=f<<4|_},a}();d.TransitionTable=h;var p=160;d.VT500_TRANSITION_TABLE=function(){var a=new h(4095),o=Array.apply(null,Array(256)).map(function(I,P){return P}),s=function(I,P){return o.slice(I,P)},f=s(32,127),_=s(0,24);_.push(25),_.push.apply(_,s(28,32));var L,A=s(0,14);for(L in a.setDefault(1,0),a.addMany(f,0,2,0),A)a.addMany([24,26,153,154],L,3,0),a.addMany(s(128,144),L,3,0),a.addMany(s(144,152),L,3,0),a.add(156,L,0,0),a.add(27,L,11,1),a.add(157,L,4,8),a.addMany([152,158,159],L,0,7),a.add(155,L,11,3),a.add(144,L,11,9);return a.addMany(_,0,3,0),a.addMany(_,1,3,1),a.add(127,1,0,1),a.addMany(_,8,0,8),a.addMany(_,3,3,3),a.add(127,3,0,3),a.addMany(_,4,3,4),a.add(127,4,0,4),a.addMany(_,6,3,6),a.addMany(_,5,3,5),a.add(127,5,0,5),a.addMany(_,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(f,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(s(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(f,7,0,7),a.addMany(_,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(s(64,127),3,7,0),a.addMany(s(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(s(48,60),4,8,4),a.addMany(s(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(s(32,64),6,0,6),a.add(127,6,0,6),a.addMany(s(64,127),6,0,0),a.addMany(s(32,48),3,9,5),a.addMany(s(32,48),5,9,5),a.addMany(s(48,64),5,0,6),a.addMany(s(64,127),5,7,0),a.addMany(s(32,48),4,9,5),a.addMany(s(32,48),1,9,2),a.addMany(s(32,48),2,9,2),a.addMany(s(48,127),2,10,0),a.addMany(s(48,80),1,10,0),a.addMany(s(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(s(96,127),1,10,0),a.add(80,1,11,9),a.addMany(_,9,0,9),a.add(127,9,0,9),a.addMany(s(28,32),9,0,9),a.addMany(s(32,48),9,9,12),a.addMany(s(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(_,11,0,11),a.addMany(s(32,128),11,0,11),a.addMany(s(28,32),11,0,11),a.addMany(_,10,0,10),a.add(127,10,0,10),a.addMany(s(28,32),10,0,10),a.addMany(s(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(s(32,48),10,9,12),a.addMany(_,12,0,12),a.add(127,12,0,12),a.addMany(s(28,32),12,0,12),a.addMany(s(32,48),12,9,12),a.addMany(s(48,64),12,0,11),a.addMany(s(64,127),12,12,13),a.addMany(s(64,127),10,12,13),a.addMany(s(64,127),9,12,13),a.addMany(_,13,13,13),a.addMany(f,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(p,0,2,0),a.add(p,8,5,8),a.add(p,6,0,6),a.add(p,11,0,11),a.add(p,13,13,13),a}();var l=function(a){function o(s){s===void 0&&(s=d.VT500_TRANSITION_TABLE);var f=a.call(this)||this;return f._transitions=s,f._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},f.initialState=0,f.currentState=f.initialState,f._params=new b.Params,f._params.addParam(0),f._collect=0,f.precedingCodepoint=0,f._printHandlerFb=function(_,L,A){},f._executeHandlerFb=function(_){},f._csiHandlerFb=function(_,L){},f._escHandlerFb=function(_){},f._errorHandlerFb=function(_){return _},f._printHandler=f._printHandlerFb,f._executeHandlers=Object.create(null),f._csiHandlers=Object.create(null),f._escHandlers=Object.create(null),f._oscParser=new C.OscParser,f._dcsParser=new u.DcsParser,f._errorHandler=f._errorHandlerFb,f.registerEscHandler({final:"\\"},function(){return!0}),f}return y(o,a),o.prototype._identifier=function(s,f){f===void 0&&(f=[64,126]);var _=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if((_=s.prefix.charCodeAt(0))&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var L=0;L<s.intermediates.length;++L){var A=s.intermediates.charCodeAt(L);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=A}}if(s.final.length!==1)throw new Error("final must be a single byte");var I=s.final.charCodeAt(0);if(f[0]>I||I>f[1])throw new Error("final must be in range "+f[0]+" .. "+f[1]);return(_<<=8)|I},o.prototype.identToString=function(s){for(var f=[];s;)f.push(String.fromCharCode(255&s)),s>>=8;return f.reverse().join("")},o.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},o.prototype.setPrintHandler=function(s){this._printHandler=s},o.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},o.prototype.registerEscHandler=function(s,f){var _=this._identifier(s,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);var L=this._escHandlers[_];return L.push(f),{dispose:function(){var A=L.indexOf(f);A!==-1&&L.splice(A,1)}}},o.prototype.clearEscHandler=function(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]},o.prototype.setEscHandlerFallback=function(s){this._escHandlerFb=s},o.prototype.setExecuteHandler=function(s,f){this._executeHandlers[s.charCodeAt(0)]=f},o.prototype.clearExecuteHandler=function(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]},o.prototype.setExecuteHandlerFallback=function(s){this._executeHandlerFb=s},o.prototype.registerCsiHandler=function(s,f){var _=this._identifier(s);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);var L=this._csiHandlers[_];return L.push(f),{dispose:function(){var A=L.indexOf(f);A!==-1&&L.splice(A,1)}}},o.prototype.clearCsiHandler=function(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]},o.prototype.setCsiHandlerFallback=function(s){this._csiHandlerFb=s},o.prototype.registerDcsHandler=function(s,f){return this._dcsParser.registerHandler(this._identifier(s),f)},o.prototype.clearDcsHandler=function(s){this._dcsParser.clearHandler(this._identifier(s))},o.prototype.setDcsHandlerFallback=function(s){this._dcsParser.setHandlerFallback(s)},o.prototype.registerOscHandler=function(s,f){return this._oscParser.registerHandler(s,f)},o.prototype.clearOscHandler=function(s){this._oscParser.clearHandler(s)},o.prototype.setOscHandlerFallback=function(s){this._oscParser.setHandlerFallback(s)},o.prototype.setErrorHandler=function(s){this._errorHandler=s},o.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},o.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},o.prototype._preserveStack=function(s,f,_,L,A){this._parseStack.state=s,this._parseStack.handlers=f,this._parseStack.handlerPos=_,this._parseStack.transition=L,this._parseStack.chunkPos=A},o.prototype.parse=function(s,f,_){var L,A=0,I=0,P=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,P=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var M=this._parseStack.handlers,k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&k>-1){for(;k>=0&&(L=M[k](this._params))!==!0;k--)if(L instanceof Promise)return this._parseStack.handlerPos=k,L}this._parseStack.handlers=[];break;case 4:if(_===!1&&k>-1){for(;k>=0&&(L=M[k]())!==!0;k--)if(L instanceof Promise)return this._parseStack.handlerPos=k,L}this._parseStack.handlers=[];break;case 6:if(A=s[this._parseStack.chunkPos],L=this._dcsParser.unhook(A!==24&&A!==26,_))return L;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(A=s[this._parseStack.chunkPos],L=this._oscParser.end(A!==24&&A!==26,_))return L;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,P=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var D=P;D<f;++D){switch(A=s[D],(I=this._transitions.table[this.currentState<<8|(A<160?A:p)])>>4){case 2:for(var E=D+1;;++E){if(E>=f||(A=s[E])<32||A>126&&A<p){this._printHandler(s,D,E),D=E-1;break}if(++E>=f||(A=s[E])<32||A>126&&A<p){this._printHandler(s,D,E),D=E-1;break}if(++E>=f||(A=s[E])<32||A>126&&A<p){this._printHandler(s,D,E),D=E-1;break}if(++E>=f||(A=s[E])<32||A>126&&A<p){this._printHandler(s,D,E),D=E-1;break}}break;case 3:this._executeHandlers[A]?this._executeHandlers[A]():this._executeHandlerFb(A),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:D,code:A,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var U=(M=this._csiHandlers[this._collect<<8|A])?M.length-1:-1;U>=0&&(L=M[U](this._params))!==!0;U--)if(L instanceof Promise)return this._preserveStack(3,M,U,I,D),L;U<0&&this._csiHandlerFb(this._collect<<8|A,this._params),this.precedingCodepoint=0;break;case 8:do switch(A){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(A-48)}while(++D<f&&(A=s[D])>47&&A<60);D--;break;case 9:this._collect<<=8,this._collect|=A;break;case 10:for(var W=this._escHandlers[this._collect<<8|A],B=W?W.length-1:-1;B>=0&&(L=W[B]())!==!0;B--)if(L instanceof Promise)return this._preserveStack(4,W,B,I,D),L;B<0&&this._escHandlerFb(this._collect<<8|A),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|A,this._params);break;case 13:for(var F=D+1;;++F)if(F>=f||(A=s[F])===24||A===26||A===27||A>127&&A<p){this._dcsParser.put(s,D,F),D=F-1;break}break;case 14:if(L=this._dcsParser.unhook(A!==24&&A!==26))return this._preserveStack(6,[],0,I,D),L;A===27&&(I|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var X=D+1;;X++)if(X>=f||(A=s[X])<32||A>127&&A<p){this._oscParser.put(s,D,X),D=X-1;break}break;case 6:if(L=this._oscParser.end(A!==24&&A!==26))return this._preserveStack(5,[],0,I,D),L;A===27&&(I|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&I}},o}(S.Disposable);d.EscapeSequenceParser=l},6242:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OscHandler=d.OscParser=void 0;var v=x(5770),y=x(482),S=[],m=function(){function C(){this._state=0,this._active=S,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return C.prototype.registerHandler=function(u,h){this._handlers[u]===void 0&&(this._handlers[u]=[]);var p=this._handlers[u];return p.push(h),{dispose:function(){var l=p.indexOf(h);l!==-1&&p.splice(l,1)}}},C.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},C.prototype.setHandlerFallback=function(u){this._handlerFb=u},C.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=S},C.prototype.reset=function(){if(this._state===2)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=S,this._id=-1,this._state=0},C.prototype._start=function(){if(this._active=this._handlers[this._id]||S,this._active.length)for(var u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")},C.prototype._put=function(u,h,p){if(this._active.length)for(var l=this._active.length-1;l>=0;l--)this._active[l].put(u,h,p);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(u,h,p))},C.prototype.start=function(){this.reset(),this._state=1},C.prototype.put=function(u,h,p){if(this._state!==3){if(this._state===1)for(;h<p;){var l=u[h++];if(l===59){this._state=2,this._start();break}if(l<48||57<l)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+l-48}this._state===2&&p-h>0&&this._put(u,h,p)}},C.prototype.end=function(u,h){if(h===void 0&&(h=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var p=!1,l=this._active.length-1,a=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,p=h,a=this._stack.fallThrough,this._stack.paused=!1),!a&&p===!1){for(;l>=0&&(p=this._active[l].end(u))!==!0;l--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,p;l--}for(;l>=0;l--)if((p=this._active[l].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",u);this._active=S,this._id=-1,this._state=0}},C}();d.OscParser=m;var b=function(){function C(u){this._handler=u,this._data="",this._hitLimit=!1}return C.prototype.start=function(){this._data="",this._hitLimit=!1},C.prototype.put=function(u,h,p){this._hitLimit||(this._data+=(0,y.utf32ToString)(u,h,p),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},C.prototype.end=function(u){var h=this,p=!1;if(this._hitLimit)p=!1;else if(u&&(p=this._handler(this._data))instanceof Promise)return p.then(function(l){return h._data="",h._hitLimit=!1,l});return this._data="",this._hitLimit=!1,p},C}();d.OscHandler=b},8742:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Params=void 0;var x=2147483647,v=function(){function y(S,m){if(S===void 0&&(S=32),m===void 0&&(m=32),this.maxLength=S,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(S),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(S),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return y.fromArray=function(S){var m=new y;if(!S.length)return m;for(var b=Array.isArray(S[0])?1:0;b<S.length;++b){var C=S[b];if(Array.isArray(C))for(var u=0;u<C.length;++u)m.addSubParam(C[u]);else m.addParam(C)}return m},y.prototype.clone=function(){var S=new y(this.maxLength,this.maxSubParamsLength);return S.params.set(this.params),S.length=this.length,S._subParams.set(this._subParams),S._subParamsLength=this._subParamsLength,S._subParamsIdx.set(this._subParamsIdx),S._rejectDigits=this._rejectDigits,S._rejectSubDigits=this._rejectSubDigits,S._digitIsSub=this._digitIsSub,S},y.prototype.toArray=function(){for(var S=[],m=0;m<this.length;++m){S.push(this.params[m]);var b=this._subParamsIdx[m]>>8,C=255&this._subParamsIdx[m];C-b>0&&S.push(Array.prototype.slice.call(this._subParams,b,C))}return S},y.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},y.prototype.addParam=function(S){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=S>x?x:S}},y.prototype.addSubParam=function(S){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=S>x?x:S,this._subParamsIdx[this.length-1]++}},y.prototype.hasSubParams=function(S){return(255&this._subParamsIdx[S])-(this._subParamsIdx[S]>>8)>0},y.prototype.getSubParams=function(S){var m=this._subParamsIdx[S]>>8,b=255&this._subParamsIdx[S];return b-m>0?this._subParams.subarray(m,b):null},y.prototype.getSubParamsAll=function(){for(var S={},m=0;m<this.length;++m){var b=this._subParamsIdx[m]>>8,C=255&this._subParamsIdx[m];C-b>0&&(S[m]=this._subParams.slice(b,C))}return S},y.prototype.addDigit=function(S){var m;if(!(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var b=this._digitIsSub?this._subParams:this.params,C=b[m-1];b[m-1]=~C?Math.min(10*C+S,x):S}},y}();d.Params=v},5741:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AddonManager=void 0;var x=function(){function v(){this._addons=[]}return v.prototype.dispose=function(){for(var y=this._addons.length-1;y>=0;y--)this._addons[y].instance.dispose()},v.prototype.loadAddon=function(y,S){var m=this,b={instance:S,dispose:S.dispose,isDisposed:!1};this._addons.push(b),S.dispose=function(){return m._wrappedAddonDispose(b)},S.activate(y)},v.prototype._wrappedAddonDispose=function(y){if(!y.isDisposed){for(var S=-1,m=0;m<this._addons.length;m++)if(this._addons[m]===y){S=m;break}if(S===-1)throw new Error("Could not dispose an addon that has not been loaded");y.isDisposed=!0,y.dispose.apply(y.instance),this._addons.splice(S,1)}},v}();d.AddonManager=x},8771:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferApiView=void 0;var v=x(3785),y=x(511),S=function(){function m(b,C){this._buffer=b,this.type=C}return m.prototype.init=function(b){return this._buffer=b,this},Object.defineProperty(m.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),m.prototype.getLine=function(b){var C=this._buffer.lines.get(b);if(C)return new v.BufferLineApiView(C)},m.prototype.getNullCell=function(){return new y.CellData},m}();d.BufferApiView=S},3785:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferLineApiView=void 0;var v=x(511),y=function(){function S(m){this._line=m}return Object.defineProperty(S.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),S.prototype.getCell=function(m,b){if(!(m<0||m>=this._line.length))return b?(this._line.loadCell(m,b),b):this._line.loadCell(m,new v.CellData)},S.prototype.translateToString=function(m,b,C){return this._line.translateToString(m,b,C)},S}();d.BufferLineApiView=y},8285:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BufferNamespaceApi=void 0;var v=x(8771),y=x(8460),S=function(){function m(b){var C=this;this._core=b,this._onBufferChange=new y.EventEmitter,this._normal=new v.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new v.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return C._onBufferChange.fire(C.active)})}return Object.defineProperty(m.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),m}();d.BufferNamespaceApi=S},7975:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ParserApi=void 0;var x=function(){function v(y){this._core=y}return v.prototype.registerCsiHandler=function(y,S){return this._core.registerCsiHandler(y,function(m){return S(m.toArray())})},v.prototype.addCsiHandler=function(y,S){return this.registerCsiHandler(y,S)},v.prototype.registerDcsHandler=function(y,S){return this._core.registerDcsHandler(y,function(m,b){return S(m,b.toArray())})},v.prototype.addDcsHandler=function(y,S){return this.registerDcsHandler(y,S)},v.prototype.registerEscHandler=function(y,S){return this._core.registerEscHandler(y,S)},v.prototype.addEscHandler=function(y,S){return this.registerEscHandler(y,S)},v.prototype.registerOscHandler=function(y,S){return this._core.registerOscHandler(y,S)},v.prototype.addOscHandler=function(y,S){return this.registerOscHandler(y,S)},v}();d.ParserApi=x},7090:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeApi=void 0;var x=function(){function v(y){this._core=y}return v.prototype.register=function(y){this._core.unicodeService.register(y)},Object.defineProperty(v.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(y){this._core.unicodeService.activeVersion=y},enumerable:!1,configurable:!0}),v}();d.UnicodeApi=x},744:function(J,d,x){var v,y=this&&this.__extends||(v=function(l,a){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},v(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=l}v(l,a),l.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}),S=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},m=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.BufferService=d.MINIMUM_ROWS=d.MINIMUM_COLS=void 0;var b=x(2585),C=x(5295),u=x(8460),h=x(844);d.MINIMUM_COLS=2,d.MINIMUM_ROWS=1;var p=function(l){function a(o){var s=l.call(this)||this;return s._optionsService=o,s.isUserScrolling=!1,s._onResize=new u.EventEmitter,s._onScroll=new u.EventEmitter,s.cols=Math.max(o.options.cols||0,d.MINIMUM_COLS),s.rows=Math.max(o.options.rows||0,d.MINIMUM_ROWS),s.buffers=new C.BufferSet(o,s),s}return y(a,l),Object.defineProperty(a.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){l.prototype.dispose.call(this),this.buffers.dispose()},a.prototype.resize=function(o,s){this.cols=o,this.rows=s,this.buffers.resize(o,s),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:o,rows:s})},a.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},a.prototype.scroll=function(o,s){s===void 0&&(s=!1);var f,_=this.buffer;(f=this._cachedBlankLine)&&f.length===this.cols&&f.getFg(0)===o.fg&&f.getBg(0)===o.bg||(f=_.getBlankLine(o,s),this._cachedBlankLine=f),f.isWrapped=s;var L=_.ybase+_.scrollTop,A=_.ybase+_.scrollBottom;if(_.scrollTop===0){var I=_.lines.isFull;A===_.lines.length-1?I?_.lines.recycle().copyFrom(f):_.lines.push(f.clone()):_.lines.splice(A+1,0,f.clone()),I?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{var P=A-L+1;_.lines.shiftElements(L+1,P-1,-1),_.lines.set(A,f.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)},a.prototype.scrollLines=function(o,s,f){var _=this.buffer;if(o<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else o+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);var L=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+o,_.ybase),0),L!==_.ydisp&&(s||this._onScroll.fire(_.ydisp))},a.prototype.scrollPages=function(o){this.scrollLines(o*(this.rows-1))},a.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},a.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},a.prototype.scrollToLine=function(o){var s=o-this.buffer.ydisp;s!==0&&this.scrollLines(s)},S([m(0,b.IOptionsService)],a)}(h.Disposable);d.BufferService=p},7994:(J,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CharsetService=void 0;var x=function(){function v(){this.glevel=0,this._charsets=[]}return v.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},v.prototype.setgLevel=function(y){this.glevel=y,this.charset=this._charsets[y]},v.prototype.setgCharset=function(y,S){this._charsets[y]=S,this.glevel===y&&(this.charset=S)},v}();d.CharsetService=x},1753:function(J,d,x){var v=this&&this.__decorate||function(l,a,o,s){var f,_=arguments.length,L=_<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,a,o,s);else for(var A=l.length-1;A>=0;A--)(f=l[A])&&(L=(_<3?f(L):_>3?f(a,o,L):f(a,o))||L);return _>3&&L&&Object.defineProperty(a,o,L),L},y=this&&this.__param||function(l,a){return function(o,s){a(o,s,l)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreMouseService=void 0;var S=x(2585),m=x(8460),b={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(l){return l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)}},VT200:{events:19,restrict:function(l){return l.action!==32}},DRAG:{events:23,restrict:function(l){return l.action!==32||l.button!==3}},ANY:{events:31,restrict:function(l){return!0}}};function C(l,a){var o=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(o|=64,o|=l.action):(o|=3&l.button,4&l.button&&(o|=64),8&l.button&&(o|=128),l.action===32?o|=32:l.action!==0||a||(o|=3)),o}var u=String.fromCharCode,h={DEFAULT:function(l){var a=[C(l,!1)+32,l.col+32,l.row+32];return a[0]>255||a[1]>255||a[2]>255?"":"\x1B[M"+u(a[0])+u(a[1])+u(a[2])},SGR:function(l){var a=l.action===0&&l.button!==4?"m":"M";return"\x1B[<"+C(l,!0)+";"+l.col+";"+l.row+a}},p=function(){function l(a,o){this._bufferService=a,this._coreService=o,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new m.EventEmitter,this._lastEvent=null;for(var s=0,f=Object.keys(b);s<f.length;s++){var _=f[s];this.addProtocol(_,b[_])}for(var L=0,A=Object.keys(h);L<A.length;L++){var I=A[L];this.addEncoding(I,h[I])}this.reset()}return l.prototype.addProtocol=function(a,o){this._protocols[a]=o},l.prototype.addEncoding=function(a,o){this._encodings[a]=o},Object.defineProperty(l.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(a){if(!this._protocols[a])throw new Error('unknown protocol "'+a+'"');this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(a){if(!this._encodings[a])throw new Error('unknown encoding "'+a+'"');this._activeEncoding=a},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(l.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),l.prototype.triggerMouseEvent=function(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,a))||!this._protocols[this._activeProtocol].restrict(a))return!1;var o=this._encodings[this._activeEncoding](a);return o&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(o):this._coreService.triggerDataEvent(o,!0)),this._lastEvent=a,!0},l.prototype.explainEvents=function(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}},l.prototype._compareEvents=function(a,o){return a.col===o.col&&a.row===o.row&&a.button===o.button&&a.action===o.action&&a.ctrl===o.ctrl&&a.alt===o.alt&&a.shift===o.shift},v([y(0,S.IBufferService),y(1,S.ICoreService)],l)}();d.CoreMouseService=p},6975:function(J,d,x){var v,y=this&&this.__extends||(v=function(o,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var L in _)Object.prototype.hasOwnProperty.call(_,L)&&(f[L]=_[L])},v(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function f(){this.constructor=o}v(o,s),o.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}),S=this&&this.__decorate||function(o,s,f,_){var L,A=arguments.length,I=A<3?s:_===null?_=Object.getOwnPropertyDescriptor(s,f):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(o,s,f,_);else for(var P=o.length-1;P>=0;P--)(L=o[P])&&(I=(A<3?L(I):A>3?L(s,f,I):L(s,f))||I);return A>3&&I&&Object.defineProperty(s,f,I),I},m=this&&this.__param||function(o,s){return function(f,_){s(f,_,o)}};Object.defineProperty(d,"__esModule",{value:!0}),d.CoreService=void 0;var b=x(2585),C=x(8460),u=x(1439),h=x(844),p=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),a=function(o){function s(f,_,L,A){var I=o.call(this)||this;return I._bufferService=_,I._logService=L,I._optionsService=A,I.isCursorInitialized=!1,I.isCursorHidden=!1,I._onData=I.register(new C.EventEmitter),I._onUserInput=I.register(new C.EventEmitter),I._onBinary=I.register(new C.EventEmitter),I._scrollToBottom=f,I.register({dispose:function(){return I._scrollToBottom=void 0}}),I.modes=(0,u.clone)(p),I.decPrivateModes=(0,u.clone)(l),I}return y(s,o),Object.defineProperty(s.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(l)},s.prototype.triggerDataEvent=function(f,_){if(_===void 0&&(_=!1),!this._optionsService.options.disableStdin){var L=this._bufferService.buffer;L.ybase!==L.ydisp&&this._scrollToBottom(),_&&this._onUserInput.fire(),this._logService.debug('sending data "'+f+'"',function(){return f.split("").map(function(A){return A.charCodeAt(0)})}),this._onData.fire(f)}},s.prototype.triggerBinaryEvent=function(f){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+f+'"',function(){return f.split("").map(function(_){return _.charCodeAt(0)})}),this._onBinary.fire(f))},S([m(1,b.IBufferService),m(2,b.ILogService),m(3,b.IOptionsService)],s)}(h.Disposable);d.CoreService=a},3730:function(J,d,x){var v=this&&this.__decorate||function(b,C,u,h){var p,l=arguments.length,a=l<3?C:h===null?h=Object.getOwnPropertyDescriptor(C,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(b,C,u,h);else for(var o=b.length-1;o>=0;o--)(p=b[o])&&(a=(l<3?p(a):l>3?p(C,u,a):p(C,u))||a);return l>3&&a&&Object.defineProperty(C,u,a),a},y=this&&this.__param||function(b,C){return function(u,h){C(u,h,b)}};Object.defineProperty(d,"__esModule",{value:!0}),d.DirtyRowService=void 0;var S=x(2585),m=function(){function b(C){this._bufferService=C,this.clearRange()}return Object.defineProperty(b.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),b.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},b.prototype.markDirty=function(C){C<this._start?this._start=C:C>this._end&&(this._end=C)},b.prototype.markRangeDirty=function(C,u){if(C>u){var h=C;C=u,u=h}C<this._start&&(this._start=C),u>this._end&&(this._end=u)},b.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},v([y(0,S.IBufferService)],b)}();d.DirtyRowService=m},4348:function(J,d,x){var v=this&&this.__spreadArray||function(C,u,h){if(h||arguments.length===2)for(var p,l=0,a=u.length;l<a;l++)!p&&l in u||(p||(p=Array.prototype.slice.call(u,0,l)),p[l]=u[l]);return C.concat(p||Array.prototype.slice.call(u))};Object.defineProperty(d,"__esModule",{value:!0}),d.InstantiationService=d.ServiceCollection=void 0;var y=x(2585),S=x(8343),m=function(){function C(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];this._entries=new Map;for(var p=0,l=u;p<l.length;p++){var a=l[p],o=a[0],s=a[1];this.set(o,s)}}return C.prototype.set=function(u,h){var p=this._entries.get(u);return this._entries.set(u,h),p},C.prototype.forEach=function(u){this._entries.forEach(function(h,p){return u(p,h)})},C.prototype.has=function(u){return this._entries.has(u)},C.prototype.get=function(u){return this._entries.get(u)},C}();d.ServiceCollection=m;var b=function(){function C(){this._services=new m,this._services.set(y.IInstantiationService,this)}return C.prototype.setService=function(u,h){this._services.set(u,h)},C.prototype.getService=function(u){return this._services.get(u)},C.prototype.createInstance=function(u){for(var h=[],p=1;p<arguments.length;p++)h[p-1]=arguments[p];for(var l=(0,S.getServiceDependencies)(u).sort(function(A,I){return A.index-I.index}),a=[],o=0,s=l;o<s.length;o++){var f=s[o],_=this._services.get(f.id);if(!_)throw new Error("[createInstance] "+u.name+" depends on UNKNOWN service "+f.id+".");a.push(_)}var L=l.length>0?l[0].index:h.length;if(h.length!==L)throw new Error("[createInstance] First service dependency of "+u.name+" at position "+(L+1)+" conflicts with "+h.length+" static arguments");return new(u.bind.apply(u,v([void 0],v(v([],h,!0),a,!0),!1)))},C}();d.InstantiationService=b},7866:function(J,d,x){var v=this&&this.__decorate||function(u,h,p,l){var a,o=arguments.length,s=o<3?h:l===null?l=Object.getOwnPropertyDescriptor(h,p):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(u,h,p,l);else for(var f=u.length-1;f>=0;f--)(a=u[f])&&(s=(o<3?a(s):o>3?a(h,p,s):a(h,p))||s);return o>3&&s&&Object.defineProperty(h,p,s),s},y=this&&this.__param||function(u,h){return function(p,l){h(p,l,u)}},S=this&&this.__spreadArray||function(u,h,p){if(p||arguments.length===2)for(var l,a=0,o=h.length;a<o;a++)!l&&a in h||(l||(l=Array.prototype.slice.call(h,0,a)),l[a]=h[a]);return u.concat(l||Array.prototype.slice.call(h))};Object.defineProperty(d,"__esModule",{value:!0}),d.LogService=void 0;var m=x(2585),b={debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF},C=function(){function u(h){var p=this;this._optionsService=h,this.logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(l){l==="logLevel"&&p._updateLogLevel()})}return u.prototype._updateLogLevel=function(){this.logLevel=b[this._optionsService.options.logLevel]},u.prototype._evalLazyOptionalParams=function(h){for(var p=0;p<h.length;p++)typeof h[p]=="function"&&(h[p]=h[p]())},u.prototype._log=function(h,p,l){this._evalLazyOptionalParams(l),h.call.apply(h,S([console,"xterm.js: "+p],l,!1))},u.prototype.debug=function(h){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];this.logLevel<=m.LogLevelEnum.DEBUG&&this._log(console.log,h,p)},u.prototype.info=function(h){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];this.logLevel<=m.LogLevelEnum.INFO&&this._log(console.info,h,p)},u.prototype.warn=function(h){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];this.logLevel<=m.LogLevelEnum.WARN&&this._log(console.warn,h,p)},u.prototype.error=function(h){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];this.logLevel<=m.LogLevelEnum.ERROR&&this._log(console.error,h,p)},v([y(0,m.IOptionsService)],u)}();d.LogService=C},7302:function(J,d,x){var v=this&&this.__assign||function(){return v=Object.assign||function(C){for(var u,h=1,p=arguments.length;h<p;h++)for(var l in u=arguments[h])Object.prototype.hasOwnProperty.call(u,l)&&(C[l]=u[l]);return C},v.apply(this,arguments)};Object.defineProperty(d,"__esModule",{value:!0}),d.OptionsService=d.DEFAULT_OPTIONS=d.DEFAULT_BELL_SOUND=void 0;var y=x(8460),S=x(6114);d.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",d.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:d.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:S.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var m=["normal","bold","100","200","300","400","500","600","700","800","900"],b=function(){function C(u){for(var h in this._onOptionChange=new y.EventEmitter,this._options=v({},d.DEFAULT_OPTIONS),u)if(h in this._options)try{var p=u[h];this._options[h]=this._sanitizeAndValidateOption(h,p)}catch(l){console.error(l)}this.options=this._setupOptions(this._options)}return Object.defineProperty(C.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),C.prototype._setupOptions=function(u){var h=this,p=v({},u),l=function(o){Object.defineProperty(p,o,{get:function(){if(!(o in d.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return h._options[o]},set:function(s){if(!(o in d.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');s=h._sanitizeAndValidateOption(o,s),h._options[o]!==s&&(h._options[o]=s,h._onOptionChange.fire(o))}})};for(var a in p)l(a);return p},C.prototype.setOption=function(u,h){this.options[u]=h},C.prototype._sanitizeAndValidateOption=function(u,h){switch(u){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":h||(h=d.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=m.includes(h)?h:d.DEFAULT_OPTIONS[u];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(u+" cannot be less than 1, value: "+h);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(u+" cannot be less than 0, value: "+h);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(u+" cannot be less than or equal to 0, value: "+h);case"rows":case"cols":if(!h&&h!==0)throw new Error(u+" must be numeric, value: "+h)}return h},C.prototype.getOption=function(u){return this.options[u]},C}();d.OptionsService=b},8343:(J,d)=>{function x(v,y,S){y.di$target===y?y.di$dependencies.push({id:v,index:S}):(y.di$dependencies=[{id:v,index:S}],y.di$target=y)}Object.defineProperty(d,"__esModule",{value:!0}),d.createDecorator=d.getServiceDependencies=d.serviceRegistry=void 0,d.serviceRegistry=new Map,d.getServiceDependencies=function(v){return v.di$dependencies||[]},d.createDecorator=function(v){if(d.serviceRegistry.has(v))return d.serviceRegistry.get(v);var y=function(S,m,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");x(y,S,b)};return y.toString=function(){return v},d.serviceRegistry.set(v,y),y}},2585:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.IUnicodeService=d.IOptionsService=d.ILogService=d.LogLevelEnum=d.IInstantiationService=d.IDirtyRowService=d.ICharsetService=d.ICoreService=d.ICoreMouseService=d.IBufferService=void 0;var v,y=x(8343);d.IBufferService=(0,y.createDecorator)("BufferService"),d.ICoreMouseService=(0,y.createDecorator)("CoreMouseService"),d.ICoreService=(0,y.createDecorator)("CoreService"),d.ICharsetService=(0,y.createDecorator)("CharsetService"),d.IDirtyRowService=(0,y.createDecorator)("DirtyRowService"),d.IInstantiationService=(0,y.createDecorator)("InstantiationService"),(v=d.LogLevelEnum||(d.LogLevelEnum={}))[v.DEBUG=0]="DEBUG",v[v.INFO=1]="INFO",v[v.WARN=2]="WARN",v[v.ERROR=3]="ERROR",v[v.OFF=4]="OFF",d.ILogService=(0,y.createDecorator)("LogService"),d.IOptionsService=(0,y.createDecorator)("OptionsService"),d.IUnicodeService=(0,y.createDecorator)("UnicodeService")},1480:(J,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.UnicodeService=void 0;var v=x(8460),y=x(225),S=function(){function m(){this._providers=Object.create(null),this._active="",this._onChange=new v.EventEmitter;var b=new y.UnicodeV6;this.register(b),this._active=b.version,this._activeProvider=b}return Object.defineProperty(m.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"activeVersion",{get:function(){return this._active},set:function(b){if(!this._providers[b])throw new Error('unknown Unicode version "'+b+'"');this._active=b,this._activeProvider=this._providers[b],this._onChange.fire(b)},enumerable:!1,configurable:!0}),m.prototype.register=function(b){this._providers[b.version]=b},m.prototype.wcwidth=function(b){return this._activeProvider.wcwidth(b)},m.prototype.getStringCellWidth=function(b){for(var C=0,u=b.length,h=0;h<u;++h){var p=b.charCodeAt(h);if(55296<=p&&p<=56319){if(++h>=u)return C+this.wcwidth(p);var l=b.charCodeAt(h);56320<=l&&l<=57343?p=1024*(p-55296)+l-56320+65536:C+=this.wcwidth(l)}C+=this.wcwidth(p)}return C},m}();d.UnicodeService=S}},j={};function $(J){var d=j[J];if(d!==void 0)return d.exports;var x=j[J]={exports:{}};return ee[J].call(x.exports,x,x.exports,$),x.exports}var oe={};return(()=>{var J=oe;Object.defineProperty(J,"__esModule",{value:!0}),J.Terminal=void 0;var d=$(3236),x=$(9042),v=$(7975),y=$(7090),S=$(5741),m=$(8285),b=["cols","rows"],C=function(){function u(h){var p=this;this._core=new d.Terminal(h),this._addonManager=new S.AddonManager,this._publicOptions={};var l=function(s){Object.defineProperty(a._publicOptions,s,{get:function(){return p._core.options[s]},set:function(f){p._checkReadonlyOptions(s),p._core.options[s]=f}})},a=this;for(var o in this._core.options)l(o)}return u.prototype._checkReadonlyOptions=function(h){if(b.includes(h))throw new Error('Option "'+h+'" can only be set in the constructor')},u.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(u.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new v.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"unicode",{get:function(){return this._checkProposedApi(),new y.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new m.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"modes",{get:function(){var h=this._core.coreService.decPrivateModes,p="none";switch(this._core.coreMouseService.activeProtocol){case"X10":p="x10";break;case"VT200":p="vt200";break;case"DRAG":p="drag";break;case"ANY":p="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:p,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"options",{get:function(){return this._publicOptions},set:function(h){for(var p in h)this._publicOptions[p]=h[p]},enumerable:!1,configurable:!0}),u.prototype.blur=function(){this._core.blur()},u.prototype.focus=function(){this._core.focus()},u.prototype.resize=function(h,p){this._verifyIntegers(h,p),this._core.resize(h,p)},u.prototype.open=function(h){this._core.open(h)},u.prototype.attachCustomKeyEventHandler=function(h){this._core.attachCustomKeyEventHandler(h)},u.prototype.registerLinkMatcher=function(h,p,l){return this._checkProposedApi(),this._core.registerLinkMatcher(h,p,l)},u.prototype.deregisterLinkMatcher=function(h){this._checkProposedApi(),this._core.deregisterLinkMatcher(h)},u.prototype.registerLinkProvider=function(h){return this._checkProposedApi(),this._core.registerLinkProvider(h)},u.prototype.registerCharacterJoiner=function(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)},u.prototype.deregisterCharacterJoiner=function(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)},u.prototype.registerMarker=function(h){return this._checkProposedApi(),this._verifyIntegers(h),this._core.addMarker(h)},u.prototype.addMarker=function(h){return this.registerMarker(h)},u.prototype.hasSelection=function(){return this._core.hasSelection()},u.prototype.select=function(h,p,l){this._verifyIntegers(h,p,l),this._core.select(h,p,l)},u.prototype.getSelection=function(){return this._core.getSelection()},u.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},u.prototype.clearSelection=function(){this._core.clearSelection()},u.prototype.selectAll=function(){this._core.selectAll()},u.prototype.selectLines=function(h,p){this._verifyIntegers(h,p),this._core.selectLines(h,p)},u.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},u.prototype.scrollLines=function(h){this._verifyIntegers(h),this._core.scrollLines(h)},u.prototype.scrollPages=function(h){this._verifyIntegers(h),this._core.scrollPages(h)},u.prototype.scrollToTop=function(){this._core.scrollToTop()},u.prototype.scrollToBottom=function(){this._core.scrollToBottom()},u.prototype.scrollToLine=function(h){this._verifyIntegers(h),this._core.scrollToLine(h)},u.prototype.clear=function(){this._core.clear()},u.prototype.write=function(h,p){this._core.write(h,p)},u.prototype.writeUtf8=function(h,p){this._core.write(h,p)},u.prototype.writeln=function(h,p){this._core.write(h),this._core.write(`\r
`,p)},u.prototype.paste=function(h){this._core.paste(h)},u.prototype.getOption=function(h){return this._core.optionsService.getOption(h)},u.prototype.setOption=function(h,p){this._checkReadonlyOptions(h),this._core.optionsService.setOption(h,p)},u.prototype.refresh=function(h,p){this._verifyIntegers(h,p),this._core.refresh(h,p)},u.prototype.reset=function(){this._core.reset()},u.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},u.prototype.loadAddon=function(h){return this._addonManager.loadAddon(this,h)},Object.defineProperty(u,"strings",{get:function(){return x},enumerable:!1,configurable:!0}),u.prototype._verifyIntegers=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];for(var l=0,a=h;l<a.length;l++){var o=a[l];if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}},u}();J.Terminal=C})(),oe})()})});var vl=Rr(Qr=>{"use strict";var no=Qr&&Qr.__assign||function(){return no=Object.assign||function(ee){for(var j,$=1,oe=arguments.length;$<oe;$++){j=arguments[$];for(var J in j)Object.prototype.hasOwnProperty.call(j,J)&&(ee[J]=j[J])}return ee},no.apply(this,arguments)},hl=Qr&&Qr.__spreadArray||function(ee,j,$){if($||arguments.length===2)for(var oe=0,J=j.length,d;oe<J;oe++)(d||!(oe in j))&&(d||(d=Array.prototype.slice.call(j,0,oe)),d[oe]=j[oe]);return ee.concat(d||Array.prototype.slice.call(j))};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Melba=void 0;var dl=function(){var ee=document.createElement("a");return["matches","msMatchesSelector","webkitMatchesSelector"].filter(function(j){return j in ee})}()[0],Lu=function(){var ee=document.createElement("a");try{return ee[dl](":focus-within"),":focus-within, :focus, :hover"}catch{return":focus, :hover"}}(),pl=function(){function ee(j){var $=this,oe=j.animation,J=oe===void 0?ee.defaults.animation:oe,d=j.animationDuration,x=d===void 0?ee.defaults.animationDuration:d,v=j.closeLabel,y=v===void 0?ee.defaults.closeLabel:v,S=j.container,m=S===void 0?null:S,b=j.containerClass,C=b===void 0?ee.defaults.containerClass:b,u=j.containerElement,h=u===void 0?ee.defaults.containerElement:u,p=j.content,l=j.events,a=l===void 0?{}:l,o=j.hide,s=o===void 0?ee.defaults.hide:o,f=j.root,_=f===void 0?ee.defaults.root:f,L=j.toastClass,A=L===void 0?ee.defaults.toastClass:L,I=j.toastElement,P=I===void 0?ee.defaults.toastElement:I,M=j.toastEvents,k=M===void 0?hl([],ee.defaults.toastEvents,!0):M,D=j.toastHideClass,E=D===void 0?ee.defaults.toastHideClass:D,U=j.toastShowClass,W=U===void 0?ee.defaults.toastShowClass:U,B=j.type,F=B===void 0?ee.defaults.toastType:B;if(!p)throw new TypeError("'content' cannot be empty.");if(this.animation=J,this.events=a,this.toastHideClass=E,this.toastShowClass=W,m||(m=this.getContainer({containerClass:C,containerElement:h,root:_})),this.container=m,s===!0&&(s=ee.defaults.hideDelay),s!==!1&&s<100&&(s*=1e3),this.hideDelay=s,x<100&&(x*=1e3),this.build({closeLabel:y,content:p,toastClass:A,toastElement:P,toastEvents:k,type:F}),this.hideDelay!==!1&&this.autohide({animationDuration:x}),this.animation){window.requestAnimationFrame(function(){return $.show()});return}this.show()}return ee.prototype.autohide=function(j){var $=this,oe=j.animationDuration;if(!!this.hideDelay)return window.setTimeout(function(){return $.hide()},this.hideDelay+(this.animation?oe:0))},ee.prototype.build=function(j){var $=this,oe=j.closeLabel,J=j.content,d=j.toastClass,x=j.toastElement,v=j.toastEvents,y=j.type;this.element=document.createElement(x),this.element.setAttribute("title",J),this.element.setAttribute("role","status"),this.element.setAttribute("tabindex","0"),this.element.classList.add(d),this.element.classList.add("toast--".concat(y)),this.element.appendChild(this.buildClose(oe)),this.element.appendChild(document.createTextNode(J)),this.element.addEventListener("keydown",function(S){S.key==="Escape"&&(S.preventDefault(),$.hide())}),v.forEach(function(S){$.element.addEventListener(S,function(m){$.trigger(S,m)})}),this.container.appendChild(this.element),this.trigger("build")},ee.prototype.show=function(){this.element.classList.remove(this.toastHideClass),this.element.classList.add(this.toastShowClass),this.trigger("show")},ee.prototype.hide=function(j){var $=this;if(j===void 0&&(j=!1),!(!j&&this.hasFocus)){if(!j&&this.element[dl](Lu)&&this.element.addEventListener("mouseout",function(){$.hasFocus=!1,$.hideDelay>0&&$.hide()}),this.element.classList.remove(this.toastShowClass),this.element.classList.add(this.toastHideClass),this.trigger("hide"),this.animation){var oe=function(){return $.remove()},J=function(){x||($.element.addEventListener("transitionend",function(){return oe()}),x=!0)},d=function(){$.show(),$.element.removeEventListener("transitionstart",function(){return J()}),$.element.removeEventListener("transitionend",function(){return oe()}),$.element.removeEventListener("mouseover",function(){return d()}),$.element.addEventListener("mouseout",function(){return $.hide()})},x=!1;this.element.addEventListener("mouseover",function(){return d()}),this.element.addEventListener("transitionstart",function(){return J()});return}this.remove()}},ee.prototype.remove=function(){this.element.parentNode===this.container&&(this.container.removeChild(this.element),this.trigger("remove"))},ee.prototype.buildClose=function(j){var $=this,oe=document.createElement("button");return oe.setAttribute("title",j),oe.appendChild(document.createTextNode(j)),oe.addEventListener("click",function(){return $.hide()}),oe},ee.prototype.getContainer=function(j){var $=j.containerClass,oe=j.containerElement,J=j.root,d=J.querySelector("".concat(oe,".").concat($));if(d)return d;var x=document.createElement(oe);return x.classList.add($),J.appendChild(x),x},ee.prototype.on=function(j,$){this.events[j]||(this.events[j]=[]),this.events[j].push($)},ee.prototype.off=function(j,$){if($===void 0&&($=null),!$){this.events[j]=[];return}var oe=this.events[j].indexOf($);oe===-1&&this.events[j].splice(oe,1)},ee.prototype.trigger=function(j){for(var $=this,oe=[],J=1;J<arguments.length;J++)oe[J-1]=arguments[J];(this.events[j]||[]).forEach(function(d){return d.apply(void 0,hl([$,$.element],oe,!1))})},ee.settings=function(j){ee.defaults=no(no({},ee.defaults),j)},ee.defaults={animation:!0,animationDuration:400,closeLabel:"Close",containerClass:"toast__container",containerElement:"div",hide:!1,hideDelay:5,root:document.body,toastClass:"toast",toastElement:"div",toastEvents:["click","focus","keydown"],toastHideClass:"toast--hide",toastShowClass:"toast--show",toastType:"info"},ee}();Qr.Melba=pl;Qr.default=pl});var yl=Rr((_l,gl)=>{(function(ee){typeof _l=="object"&&typeof gl=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){ee.defineOption("placeholder","",function(v,y,S){var m=S&&S!=ee.Init;if(y&&!m)v.on("blur",J),v.on("change",d),v.on("swapDoc",d),ee.on(v.getInputField(),"compositionupdate",v.state.placeholderCompose=function(){oe(v)}),d(v);else if(!y&&m){v.off("blur",J),v.off("change",d),v.off("swapDoc",d),ee.off(v.getInputField(),"compositionupdate",v.state.placeholderCompose),j(v);var b=v.getWrapperElement();b.className=b.className.replace(" CodeMirror-empty","")}y&&!v.hasFocus()&&J(v)});function j(v){v.state.placeholder&&(v.state.placeholder.parentNode.removeChild(v.state.placeholder),v.state.placeholder=null)}function $(v){j(v);var y=v.state.placeholder=document.createElement("pre");y.style.cssText="height: 0; overflow: visible",y.style.direction=v.getOption("direction"),y.className="CodeMirror-placeholder CodeMirror-line-like";var S=v.getOption("placeholder");typeof S=="string"&&(S=document.createTextNode(S)),y.appendChild(S),v.display.lineSpace.insertBefore(y,v.display.lineSpace.firstChild)}function oe(v){setTimeout(function(){var y=!1;if(v.lineCount()==1){var S=v.getInputField();y=S.nodeName=="TEXTAREA"?!v.getLine(0).length:!/[^\u200b]/.test(S.querySelector(".CodeMirror-line").textContent)}y?$(v):j(v)},20)}function J(v){x(v)&&$(v)}function d(v){var y=v.getWrapperElement(),S=x(v);y.className=y.className.replace(" CodeMirror-empty","")+(S?" CodeMirror-empty":""),S?$(v):j(v)}function x(v){return v.lineCount()===1&&v.getLine(0)===""}})});var Sl=Rr((ml,bl)=>{(function(ee){typeof ml=="object"&&typeof bl=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){var j={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},$=ee.Pos;ee.defineOption("autoCloseBrackets",!1,function(p,l,a){a&&a!=ee.Init&&(p.removeKeyMap(J),p.state.closeBrackets=null),l&&(d(oe(l,"pairs")),p.state.closeBrackets=l,p.addKeyMap(J))});function oe(p,l){return l=="pairs"&&typeof p=="string"?p:typeof p=="object"&&p[l]!=null?p[l]:j[l]}var J={Backspace:y,Enter:S};function d(p){for(var l=0;l<p.length;l++){var a=p.charAt(l),o="'"+a+"'";J[o]||(J[o]=x(a))}}d(j.pairs+"`");function x(p){return function(l){return C(l,p)}}function v(p){var l=p.state.closeBrackets;if(!l||l.override)return l;var a=p.getModeAt(p.getCursor());return a.closeBrackets||l}function y(p){var l=v(p);if(!l||p.getOption("disableInput"))return ee.Pass;for(var a=oe(l,"pairs"),o=p.listSelections(),s=0;s<o.length;s++){if(!o[s].empty())return ee.Pass;var f=u(p,o[s].head);if(!f||a.indexOf(f)%2!=0)return ee.Pass}for(var s=o.length-1;s>=0;s--){var _=o[s].head;p.replaceRange("",$(_.line,_.ch-1),$(_.line,_.ch+1),"+delete")}}function S(p){var l=v(p),a=l&&oe(l,"explode");if(!a||p.getOption("disableInput"))return ee.Pass;for(var o=p.listSelections(),s=0;s<o.length;s++){if(!o[s].empty())return ee.Pass;var f=u(p,o[s].head);if(!f||a.indexOf(f)%2!=0)return ee.Pass}p.operation(function(){var _=p.lineSeparator()||`
`;p.replaceSelection(_+_,null),m(p,-1),o=p.listSelections();for(var L=0;L<o.length;L++){var A=o[L].head.line;p.indentLine(A,null,!0),p.indentLine(A+1,null,!0)}})}function m(p,l){for(var a=[],o=p.listSelections(),s=0,f=0;f<o.length;f++){var _=o[f];_.head==p.getCursor()&&(s=f);var L=_.head.ch||l>0?{line:_.head.line,ch:_.head.ch+l}:{line:_.head.line-1};a.push({anchor:L,head:L})}p.setSelections(a,s)}function b(p){var l=ee.cmpPos(p.anchor,p.head)>0;return{anchor:new $(p.anchor.line,p.anchor.ch+(l?-1:1)),head:new $(p.head.line,p.head.ch+(l?1:-1))}}function C(p,l){var a=v(p);if(!a||p.getOption("disableInput"))return ee.Pass;var o=oe(a,"pairs"),s=o.indexOf(l);if(s==-1)return ee.Pass;for(var f=oe(a,"closeBefore"),_=oe(a,"triples"),L=o.charAt(s+1)==l,A=p.listSelections(),I=s%2==0,P,M=0;M<A.length;M++){var k=A[M],D=k.head,E,U=p.getRange(D,$(D.line,D.ch+1));if(I&&!k.empty())E="surround";else if((L||!I)&&U==l)L&&h(p,D)?E="both":_.indexOf(l)>=0&&p.getRange(D,$(D.line,D.ch+3))==l+l+l?E="skipThree":E="skip";else if(L&&D.ch>1&&_.indexOf(l)>=0&&p.getRange($(D.line,D.ch-2),D)==l+l){if(D.ch>2&&/\bstring/.test(p.getTokenTypeAt($(D.line,D.ch-2))))return ee.Pass;E="addFour"}else if(L){var W=D.ch==0?" ":p.getRange($(D.line,D.ch-1),D);if(!ee.isWordChar(U)&&W!=l&&!ee.isWordChar(W))E="both";else return ee.Pass}else if(I&&(U.length===0||/\s/.test(U)||f.indexOf(U)>-1))E="both";else return ee.Pass;if(!P)P=E;else if(P!=E)return ee.Pass}var B=s%2?o.charAt(s-1):l,F=s%2?l:o.charAt(s+1);p.operation(function(){if(P=="skip")m(p,1);else if(P=="skipThree")m(p,3);else if(P=="surround"){for(var X=p.getSelections(),Z=0;Z<X.length;Z++)X[Z]=B+X[Z]+F;p.replaceSelections(X,"around"),X=p.listSelections().slice();for(var Z=0;Z<X.length;Z++)X[Z]=b(X[Z]);p.setSelections(X)}else P=="both"?(p.replaceSelection(B+F,null),p.triggerElectric(B+F),m(p,-1)):P=="addFour"&&(p.replaceSelection(B+B+B+B,"before"),m(p,1))})}function u(p,l){var a=p.getRange($(l.line,l.ch-1),$(l.line,l.ch+1));return a.length==2?a:null}function h(p,l){var a=p.getTokenAt($(l.line,l.ch+1));return/\bstring/.test(a.type)&&a.start==l.ch&&(l.ch==0||!/\bstring/.test(p.getTokenTypeAt(l)))}})});var Ll=Rr((Cl,wl)=>{(function(ee){typeof Cl=="object"&&typeof wl=="object"?ee(Vr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],ee):ee(CodeMirror)})(function(ee){var j=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),$=ee.Pos,oe={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function J(m){return m&&m.bracketRegex||/[(){}[\]]/}function d(m,b,C){var u=m.getLineHandle(b.line),h=b.ch-1,p=C&&C.afterCursor;p==null&&(p=/(^| )cm-fat-cursor($| )/.test(m.getWrapperElement().className));var l=J(C),a=!p&&h>=0&&l.test(u.text.charAt(h))&&oe[u.text.charAt(h)]||l.test(u.text.charAt(h+1))&&oe[u.text.charAt(++h)];if(!a)return null;var o=a.charAt(1)==">"?1:-1;if(C&&C.strict&&o>0!=(h==b.ch))return null;var s=m.getTokenTypeAt($(b.line,h+1)),f=x(m,$(b.line,h+(o>0?1:0)),o,s,C);return f==null?null:{from:$(b.line,h),to:f&&f.pos,match:f&&f.ch==a.charAt(0),forward:o>0}}function x(m,b,C,u,h){for(var p=h&&h.maxScanLineLength||1e4,l=h&&h.maxScanLines||1e3,a=[],o=J(h),s=C>0?Math.min(b.line+l,m.lastLine()+1):Math.max(m.firstLine()-1,b.line-l),f=b.line;f!=s;f+=C){var _=m.getLine(f);if(!!_){var L=C>0?0:_.length-1,A=C>0?_.length:-1;if(!(_.length>p))for(f==b.line&&(L=b.ch-(C<0?1:0));L!=A;L+=C){var I=_.charAt(L);if(o.test(I)&&(u===void 0||(m.getTokenTypeAt($(f,L+1))||"")==(u||""))){var P=oe[I];if(P&&P.charAt(1)==">"==C>0)a.push(I);else if(a.length)a.pop();else return{pos:$(f,L),ch:I}}}}}return f-C==(C>0?m.lastLine():m.firstLine())?!1:null}function v(m,b,C){for(var u=m.state.matchBrackets.maxHighlightLineLength||1e3,h=C&&C.highlightNonMatching,p=[],l=m.listSelections(),a=0;a<l.length;a++){var o=l[a].empty()&&d(m,l[a].head,C);if(o&&(o.match||h!==!1)&&m.getLine(o.from.line).length<=u){var s=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";p.push(m.markText(o.from,$(o.from.line,o.from.ch+1),{className:s})),o.to&&m.getLine(o.to.line).length<=u&&p.push(m.markText(o.to,$(o.to.line,o.to.ch+1),{className:s}))}}if(p.length){j&&m.state.focused&&m.focus();var f=function(){m.operation(function(){for(var _=0;_<p.length;_++)p[_].clear()})};if(b)setTimeout(f,800);else return f}}function y(m){m.operation(function(){m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null),m.state.matchBrackets.currentlyHighlighted=v(m,!1,m.state.matchBrackets)})}function S(m){m.state.matchBrackets&&m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null)}ee.defineOption("matchBrackets",!1,function(m,b,C){C&&C!=ee.Init&&(m.off("cursorActivity",y),m.off("focus",y),m.off("blur",S),S(m)),b&&(m.state.matchBrackets=typeof b=="object"?b:{},m.on("cursorActivity",y),m.on("focus",y),m.on("blur",S))}),ee.defineExtension("matchBrackets",function(){v(this,!0)}),ee.defineExtension("findMatchingBracket",function(m,b,C){return(C||typeof b=="boolean")&&(C?(C.strict=b,b=C):b=b?{strict:!0}:null),d(this,m,b)}),ee.defineExtension("scanForBracket",function(m,b,C,u){return x(this,m,b,C,u)})})});var Ha=class{name(){return"base64"}matches(j){if(j.length<4)return!1;try{return atob(j),!0}catch{return!1}}decode(j){return Array.from(atob(j)).map($=>$.charCodeAt(0))}},Ia=Ha;var Fa=class{name(){return"default"}matches(){return!0}decode(j){return Array.from(j).map($=>$.charCodeAt(0))}},Wa=Fa;var Na=class{name(){return"hexdump"}matches(j){return/^(\d{7} (((.{2}){1,2} ){1,8})(\n|$))+$/.test(j)}decode(j){return j.trim().replace(/(?<=^|\n)\d{7} (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").replace(/(..)(..)/g,"$2$1").replace(/00$/,"").match(/../g).map($=>parseInt($,16))}},ja=Na;var Jr=class{constructor(j,$,oe,J=null,d=null,x=j){this.id=j;this.name=$;this.runner=oe;this.url=J;this.args=d;this.highlighterRef=x}getId(){return this.id}getName(){return this.name}getURL(){return this.url}getArgs(){return this.args}getHighlighterRef(){return this.highlighterRef}run(j,$,oe){return this.runner(j,oe,$)}};var Ru=Or(za()),Ka=class extends Jr{constructor(){super("javascript-browser","JavaScript (Browser)",(j,$,oe)=>{let J=new Worker("dist/js/langs/javascript-browser/worker.js");return J.postMessage({type:"run",code:j,args:oe,input:$}),J},"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/",null,"javascript")}},Ga=Ka;var Bu=Or(Za()),$a=class extends Jr{constructor(){super("webperl-5.28.1","Perl 5.28.1 (webperl)",(j,$,oe)=>{let J=new Worker("dist/js/langs/webperl-5.28.1/worker.js");return J.postMessage({type:"run",code:j,args:oe,input:$}),J},"https://www.perl.org/",["-M5.10.0","-F","-l","-p"],"perl")}},Ja=$a;var Iu=Or(el()),tl=class extends Jr{constructor(){super("pyodide-0.19.0","Python 3",(j,$,oe)=>{let J=new Worker("dist/js/langs/pyodide-0.19.0/worker.js");return J.postMessage({type:"run",code:j,args:oe,input:$}),J},"https://www.python.org/",["--version"],"python")}},rl=tl;var ju=Or(ol());var sl=class{constructor(){this.data={}}register(...j){j.forEach($=>{this.data[$.getId()]=$})}get(j){return this.data[j]}all(){return Object.keys(this.data)}run(j,$,oe,J){return this.data[j].run($,oe,J)}},al=ee=>(j,$,oe)=>{let J=new Worker(ee);return J.postMessage({type:"run",code:j,args:oe,input:$}),J},Dr=new sl;var ll=class extends Jr{constructor(){super("runrb-ruby-2.6.1","Ruby 2.6.1",al("dist/js/langs/runrb-ruby-2.6.1/worker.js"),"https://www.ruby-lang.org/",["-p","-n","--version"],"ruby")}},cl=ll;var xl=Or(Vr()),kl=Or(ul());var Cu=2,wu=1,Jo=class{constructor(){}activate(j){this._terminal=j}dispose(){}fit(){let j=this.proposeDimensions();if(!j||!this._terminal)return;let $=this._terminal._core;(this._terminal.rows!==j.rows||this._terminal.cols!==j.cols)&&($._renderService.clear(),this._terminal.resize(j.cols,j.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let j=this._terminal._core;if(j._renderService.dimensions.actualCellWidth===0||j._renderService.dimensions.actualCellHeight===0)return;let $=window.getComputedStyle(this._terminal.element.parentElement),oe=parseInt($.getPropertyValue("height")),J=Math.max(0,parseInt($.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),x={top:parseInt(d.getPropertyValue("padding-top")),bottom:parseInt(d.getPropertyValue("padding-bottom")),right:parseInt(d.getPropertyValue("padding-right")),left:parseInt(d.getPropertyValue("padding-left"))},v=x.top+x.bottom,y=x.right+x.left,S=oe-v,m=J-y-j.viewport.scrollBarWidth;return{cols:Math.max(Cu,Math.floor(m/j._renderService.dimensions.actualCellWidth)),rows:Math.max(wu,Math.floor(S/j._renderService.dimensions.actualCellHeight))}}};var fl=class{constructor(){this.registered=[]}register(...j){this.registered.push(...j)}decode(j){return this.decoder(j).decode(j)}decoder(j){let[$]=this.registered.filter(oe=>oe.matches(j));return $}};var hi=new fl;var Br=class{constructor(j,$,oe,J,d,x,v,y,S){this.languageSelector=j;this.header=$;this.code=oe;this.footer=J;this.stdin=d;this.stdout=x;this.stderr=v;this.args=y;this.htmlOut=S;this.stdoutBuffer="";this.htmlOutMimeType="text/html";this.htmlOutTimeout=null}writeStdout(j){this.stdoutBuffer+=j,this.stdout.write(j.replace(/(?<!\r)\n/g,`\r
`)),this.htmlOutTimeout&&clearTimeout(this.htmlOutTimeout),this.htmlOutTimeout=setTimeout(()=>{this.htmlOut.src=`data:${this.htmlOutMimeType};base64,${btoa(this.stdoutBuffer)}`,this.htmlOutTimeout=null},100)}writeStderr(j){this.stderr.write(j.replace(/(?<!\r)\n/g,`\r
`))}clearStdout(){this.stdoutBuffer="",this.stdout.reset(),this.htmlOut.src=`data:${this.htmlOutMimeType};base64,`}clearStderr(){this.stderr.reset()}getHTMLOutMimeType(){return this.htmlOutMimeType}setHTMLOutMimeType(j){this.htmlOutMimeType=j,this.htmlOut.src=`data:${this.htmlOutMimeType};base64,${btoa(this.stdoutBuffer)}`}static getRaw(j){return j.getValue()}static getAsArray(j){return hi.decode(Br.getRaw(j))}getRawCodeHeader(){return Br.getRaw(this.header)}getCodeHeaderAsArray(){return Br.getAsArray(this.header)}setCodeHeader(j){this.header.setValue(j)}getRawCode(){return Br.getRaw(this.code)}getCodeAsArray(){return Br.getAsArray(this.code)}getCodeAsString(j="."){let $=this.getRawCode(),oe=hi.decoder($);return oe.name()!=="default"&&($=String.fromCharCode(...oe.decode($))),j!==null&&($=$.replace(/[\x00-\x1f\x7f-\xff]/g,j)),$}getFullCodeAsArray(){return[...this.getCodeHeaderAsArray(),...this.getCodeAsArray(),...this.getCodeFooterAsArray()]}setCode(j){this.code.setValue(j)}onCodeChange(j){this.code.on("change",()=>j())}getRawCodeFooter(){return Br.getRaw(this.footer)}getCodeFooterAsArray(){return Br.getAsArray(this.footer)}setCodeFooter(j){this.footer.setValue(j)}getArgs(){return this.args.getValue()}setArgs(j){this.args.setValue(j)}argsRefresh(){this.args.refresh()}getStdin(){return this.stdin.getValue()}setStdin(j){this.stdin.setValue(j)}},Vo=Br;var El=Or(vl()),of=Or(yl()),sf=Or(Sl()),af=Or(Ll());var vt=class{constructor(){this.langSelector=document.querySelector('select[name="lang"]'),this.addRegisteredLangs(),this.stdout=vt.createTerminal(),this.stderr=vt.createTerminal({theme:{foreground:"#f92672"}}),this.fit=new Jo,this.stdout.loadAddon(this.fit),this.stdout.open(document.querySelector("div.stdout")),this.stderr.open(document.querySelector("div.stderr")),this.codeHeader=vt.createEditor(document.querySelector('textarea[name="header"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.code=vt.createEditor(document.querySelector('textarea[name="code"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.codeFooter=vt.createEditor(document.querySelector('textarea[name="footer"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.stdin=vt.createEditor(document.querySelector('textarea[name="input"]')),this.args=vt.createEditor(document.querySelector('textarea[name="args"]')),this.io=new Vo(this.langSelector,this.codeHeader,this.code,this.codeFooter,this.stdin,this.stdout,this.stderr,this.args,document.querySelector(".html-out")),this.expanders=document.querySelectorAll('input[name="expand"]'),this.argsWrapper=document.querySelector(".args-wrapper"),this.addArg=document.querySelector(".add-arg"),this.runButton=document.querySelector('input[name="run"]'),this.stopButton=document.querySelector('input[name="stop"]'),this.bytesCount=document.querySelector(".bytes .byte-count"),this.bytesPlural=document.querySelector(".bytes .plural"),this.encoded=document.querySelector(".encoded"),this.format=document.querySelector(".format"),this.copyLinkButton=document.querySelector('input[name="copy"]'),this.markdownButton=document.querySelector('input[name="markdown"]'),this.outputTypes=document.querySelectorAll(".stdout-header button"),this.connectExpanders(),this.parseHashData(window.location.hash);try{this.populateArgs()}catch(j){this.toast(j.message,"error")}this.codeOnChange(),this.io.getCodeAsArray().length&&this.runCode(),this.resize(),this.io.onCodeChange(()=>this.codeOnChange()),this.runButton.addEventListener("click",()=>this.runCode()),this.langSelector.addEventListener("change",()=>this.populateArgs()),this.copyLinkButton.addEventListener("click",()=>{let j=this.buildLink();window.history.pushState(this.buildHashData(),document.title,j),navigator.clipboard.writeText(j),vt.copied(this.copyLinkButton)}),this.markdownButton.addEventListener("click",()=>{navigator.clipboard.writeText(this.buildMarkdown()),vt.copied(this.markdownButton)}),this.outputTypes.forEach(j=>j.addEventListener("click",()=>this.setOutputType(j))),window.addEventListener("hashchange",()=>{this.parseHashData(window.location.hash),this.io.getCodeAsArray().length&&this.runCode()}),window.addEventListener("resize",()=>this.resize())}addRegisteredLangs(){Dr.all().forEach(j=>{let $=Dr.get(j),oe=document.createElement("option");oe.setAttribute("value",$.getId()),oe.append(document.createTextNode($.getName())),this.langSelector.append(oe)})}setLang(j){if(!Dr.all().includes(j))throw new TypeError(`Unknown lang: ${j}.`);this.langSelector.value=j,this.setCodeHighlight()}getLangId(){return this.langSelector.value}setCodeHighlight(){let j=Dr.get(this.getLangId());[this.codeHeader,this.code,this.codeFooter].forEach($=>{if(hi.decoder(Vo.getRaw($)).name()!=="default"){$.getOption("mode")!==null&&$.setOption("mode",null);return}$.getOption("mode")!==j.getHighlighterRef()&&$.setOption("mode",j.getHighlighterRef())})}static createTerminal(j={}){return new kl.Terminal({...j,theme:{background:"#272822",cursor:"transparent",foreground:"#f8f8f2",...j.theme??{}}})}static createEditor(j,$={}){return(0,xl.fromTextArea)(j,{mode:null,theme:"monokai",viewportMargin:1/0,extraKeys:{"Shift-Tab":!1,Tab:!1},...$})}resize(){if(this.stdout.element.parentElement.hasAttribute("hidden")){this.fit.activate(this.stderr),this.fit.fit(),this.stderr.resize(this.stderr.cols,6);return}this.fit.activate(this.stdout),this.fit.fit(),this.stderr.resize(this.stdout.cols,6)}codeOnChange(){let j=this.io.getCodeAsArray();this.encoded.setAttribute("hidden",""),this.setCodeHighlight();let $=hi.decoder(this.io.getRawCode());$.name()!=="default"&&(this.encoded.removeAttribute("hidden"),this.format.innerText=$.name()),this.showBytes(j.length)}runCode(){let j=Date.now(),$=()=>{oe.terminate(),this.io.writeStderr(`Aborted execution after ${Date.now()-j}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",$)};this.io.clearStdout(),this.io.clearStderr(),this.runButton.setAttribute("disabled",""),this.stopButton.removeAttribute("disabled");let oe=Dr.run(this.getLangId(),this.io.getFullCodeAsArray(),this.io.getArgs(),this.io.getStdin());this.stopButton.addEventListener("click",$),oe.onmessage=({data:J})=>{let{type:d,output:x,error:v}=J;x&&this.io.writeStdout(x),v&&this.io.writeStderr(v??""),d==="done"&&(this.io.writeStderr(`Completed execution after ${Date.now()-j}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",$),oe.terminate())},oe.onerror=J=>{this.toast(`Worker error: ${J.message}`,"error"),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled","")}}populateArgs(){for(;this.addArg.firstElementChild;)this.addArg.firstElementChild.remove();let j=Dr.get(this.getLangId());if(!j)throw new TypeError("Unregistered lang: "+this.getLangId());let $=j.getArgs();$!==null?(this.argsWrapper.removeAttribute("hidden"),$.forEach(oe=>{let J=document.createElement("input");J.setAttribute("type","button"),J.setAttribute("value",oe),J.addEventListener("click",()=>{let d=this.io.getArgs()??"";new RegExp("(\\n|^)"+oe+"(\\n|$)").test(d)||this.io.setArgs((d+`
`+oe).trim())}),this.addArg.append(J)})):this.argsWrapper.setAttribute("hidden",""),this.io.argsRefresh()}static expand(j){let $=j.nextElementSibling,oe=document.querySelector(j.dataset.target);if(!oe){console.debug("No collapser or target for expander: ",j);return}j.setAttribute("hidden",""),oe.removeAttribute("hidden"),$.removeAttribute("hidden")}static collapse(j){let $=j.nextElementSibling,oe=document.querySelector(j.dataset.target);if(!oe){console.debug("No collapser or target for expander: ",j);return}j.removeAttribute("hidden"),oe.setAttribute("hidden",""),$.setAttribute("hidden","")}connectExpanders(){this.expanders.forEach(j=>{let $=j.nextElementSibling;if(!$||!$.matches('input[name="collapse"]')){console.debug("No collapser or target for expander: ",j);return}j.addEventListener("click",()=>vt.expand(j)),$.addEventListener("click",()=>vt.collapse(j))})}setOutputType(j){let[$]=Array.from(this.outputTypes).filter(oe=>oe.hasAttribute("disabled"));$!==j&&($.removeAttribute("disabled"),document.querySelector($.dataset.target).setAttribute("hidden",""),j.setAttribute("disabled",""),document.querySelector(j.dataset.target).removeAttribute("hidden"),this.resize())}getOutputType(){let[j]=Array.from(this.outputTypes).filter($=>$.hasAttribute("disabled"));return j.dataset.type}static copied(j){let $=j.value;j.setAttribute("disabled",""),j.style.width=j.offsetWidth+"px",j.value="Copied!",window.setTimeout(()=>{j.removeAttribute("disabled"),j.style.width=null,j.value=$},1e3)}parseHashData(j){if(!j||j.length<2)return;let $;try{let d=atob(j.slice(1));$=JSON.parse(d)}catch(d){if(d instanceof DOMException){this.toast("Unable to decode URL data. Aborting.","error");return}if(d instanceof SyntaxError){this.toast("Unable to decode JSON data. Aborting.","error");return}throw d}let[oe]=Array.from(this.expanders).filter(d=>d.parentElement.matches(".code-header")),[J]=Array.from(this.expanders).filter(d=>d.parentElement.matches(".code-footer"));$.header?vt.expand(oe):vt.collapse(oe),$.footer?vt.expand(J):vt.collapse(J),this.setLang($.lang??this.getLangId()),this.io.setCodeHeader($.header??""),this.io.setCode($.code??""),this.io.setCodeFooter($.footer??""),this.io.setArgs($.args??""),this.io.setStdin($.input??""),$.type&&this.outputTypes.forEach(d=>{d.dataset.type===$.type&&this.setOutputType(d)}),$.mime&&(this.io.setHTMLOutMimeType($.mime),$.type||this.outputTypes.forEach(d=>{d.dataset.type==="resource"&&this.setOutputType(d)}))}buildHashData(){let j={lang:this.getLangId(),code:this.io.getRawCode()},$=this.io.getRawCodeHeader(),oe=this.io.getRawCodeFooter(),J=this.io.getArgs(),d=this.io.getStdin(),x=this.getOutputType(),v=this.io.getHTMLOutMimeType();return Object.entries({header:$,footer:oe,args:J,input:d}).forEach(([y,S])=>{S&&(j[y]=S)}),x==="resource"&&(v==="text/html"?j.type="resource":j.mime=v),btoa(JSON.stringify(j))}buildLink(){let j=this.buildHashData();return window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+j}buildMarkdown(){let j=this.io.getArgs().trim().split(/\n/).join(" "),$=Dr.get(this.getLangId()),oe=Math.random().toString(36).slice(2,10),J=this.io.getCodeAsArray().length;return`# [${$.getName()}]${j?` + \`${j}\``:""}, ${J} byte${J===1?"":"s"}
>>>>>>> Stashed changes

body > img {
  --z: 1;
  image-rendering: pixelated;
  transform: scale(var(--z));
  transform-origin: 0 0;
}

.checked {
  background-image: linear-gradient(to right, rgba(192, 192, 192, 0.75), rgba(192, 192, 192, 0.75)),
    linear-gradient(to right, black 50%, white 50%),
    linear-gradient(to bottom, black 50%, white 50%);
  background-blend-mode: normal, difference, normal;
  background-size: 2em 2em;
}

.controls {
  background: rgba(255, 255, 255, .2);
  border: solid rgba(255, 255, 255, .6);
  border-radius: .3em 0 0 .3em;
  border-width: 1px 0 1px 1px;
  padding: .2em .2em .5em;
  position: fixed;
  right: 0;
  top: 1em;
}

.controls button {
  appearance: none;
  background: transparent;
  border: 0;
}

.controls button.toggle:after {
  content: '\\27f5';
}

.controls.left {
  border-radius: 0 .3em .3em 0;
  border-width: 1px 1px 1px 0;
  left: 0;
  right: auto;
}

.controls.left header {
  text-align: right;
}

.controls.left button.toggle:after {
  content: '\\27f6';
}
`.replace(/\s*,\s*/g,",").replace(/\s*>\s*/g,">").replace(/\s*;\s*}\s*/g,"}").replace(/\s*{\s*/g,"{").replace(/\s*:\s*/g,":").replace(/\s*;\s*/g,";")}data(){return`
<style>${this.css()}</style>
<img src="data:${this.imageMimeType};base64,${btoa(this.imageBuffer)}">
<div class="controls">
  <header>
    <button class="toggle"></button>
  </header>
  <section>
    <button class="zoom-in"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTN2M2gtMnYtM2gtM3YtMmgzdi0zaDJ2M2gzdjJ6bTguMTcyIDE0bC03LjM4Ny03LjM4N2MtMS4zODguODc0LTMuMDI0IDEuMzg3LTQuNzg1IDEuMzg3LTQuOTcxIDAtOS00LjAyOS05LTlzNC4wMjktOSA5LTkgOSA0LjAyOSA5IDljMCAxLjc2MS0uNTE0IDMuMzk4LTEuMzg3IDQuNzg1bDcuMzg3IDcuMzg3LTIuODI4IDIuODI4em0tMTIuMTcyLThjMy44NTkgMCA3LTMuMTQgNy03cy0zLjE0MS03LTctNy03IDMuMTQtNyA3IDMuMTQxIDcgNyA3eiIvPjwvc3ZnPg=="></button>
    <button class="zoom-out"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTh2LTJoOHYyem04LjE3MiAxNGwtNy4zODctNy4zODdjLTEuMzg4Ljg3NC0zLjAyNCAxLjM4Ny00Ljc4NSAxLjM4Ny00Ljk3MSAwLTktNC4wMjktOS05czQuMDI5LTkgOS05IDkgNC4wMjkgOSA5YzAgMS43NjEtLjUxNCAzLjM5OC0xLjM4NyA0Ljc4NWw3LjM4NyA3LjM4Ny0yLjgyOCAyLjgyOHptLTEyLjE3Mi04YzMuODU5IDAgNy0zLjE0IDctN3MtMy4xNDEtNy03LTctNyAzLjE0LTcgNyAzLjE0MSA3IDcgN3oiLz48L3N2Zz4="></button>
  </section>
  <section>
    <button class="checked">&#x2580;&#x2584;</button>
  </section>
</div>
<script>${this.js()}<\/script>
`}js(){return'e=document.querySelector("img"),t=document.querySelector(".controls");document.addEventListener("click",(function(o){var c=o.target,l=getComputedStyle(e).getPropertyValue("--z");c.matches(".zoom-in,.zoom-in *")&&e.style.setProperty("--z",2*l),c.matches(".zoom-out,.zoom-out *")&&e.style.setProperty("--z",l/2),c.matches(".toggle,.toggle *")&&t.classList.toggle("left"),c.matches("button.checked")&&e.classList.toggle("checked")}))'}matches(P){return["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/webp"].includes(P)}reset(){super.reset(),this.imageBuffer=""}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.imageBuffer+=P,this.buffer="",super.write(this.data())}},ho=Sl;var wl=Rr(Cl());var Pu=2,Iu=1,cs=class{constructor(){}activate(P){this._terminal=P}dispose(){}fit(){let P=this.proposeDimensions();if(!P||!this._terminal)return;let z=this._terminal._core;(this._terminal.rows!==P.rows||this._terminal.cols!==P.cols)&&(z._renderService.clear(),this._terminal.resize(P.cols,P.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let P=this._terminal._core;if(P._renderService.dimensions.actualCellWidth===0||P._renderService.dimensions.actualCellHeight===0)return;let z=window.getComputedStyle(this._terminal.element.parentElement),te=parseInt(z.getPropertyValue("height")),X=Math.max(0,parseInt(z.getPropertyValue("width"))),h=window.getComputedStyle(this._terminal.element),L={top:parseInt(h.getPropertyValue("padding-top")),bottom:parseInt(h.getPropertyValue("padding-bottom")),right:parseInt(h.getPropertyValue("padding-right")),left:parseInt(h.getPropertyValue("padding-left"))},p=L.top+L.bottom,g=L.right+L.left,C=te-p,y=X-g-P.viewport.scrollBarWidth;return{cols:Math.max(Pu,Math.floor(y/P._renderService.dimensions.actualCellWidth)),rows:Math.max(Iu,Math.floor(C/P._renderService.dimensions.actualCellHeight))}}};var Bn=class extends sn{constructor(P,z={}){super();this.container=this.createElement("div"),this.container.classList.add("tty"),P.append(this.container),this.fit=new cs,this.terminal=Bn.createTerminal(z),this.terminal.loadAddon(this.fit),this.terminal.open(this.container),this.options=z}matches(){return!0}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.terminal.write(Bn.cleanText(P))}reset(){this.terminal.reset()}resize(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.container.hasAttribute("hidden")||(this.fit.activate(this.terminal),this.fit.fit(),(this.options.rows||this.options.cols)&&this.terminal.resize(this.options.cols||this.terminal.cols,this.options.rows||this.terminal.rows))})})}static createTerminal(P={}){var z;return new wl.Terminal(on(ci({},P),{theme:ci({background:"#272822",cursor:"transparent",foreground:"#f8f8f2"},(z=P.theme)!=null?z:{})}))}static cleanText(P){return P.replace(/(?<!\r)\n/g,`\r
`)}},us=Bn;var Ll=class{constructor(){this.data={}}register(...P){P.forEach(z=>{this.data[z.getId()]=z})}get(P){return this.data[P]}all(){return Object.keys(this.data)}run(P,z,te,X){return this.data[P].run(z,te,X)}},Or=new Ll;var Of=Rr(El()),Bf=Rr(Al()),Pf=Rr(Ol());var Bl=class extends TypeError{},Ri=Bl;var Pl=class extends ho{constructor(){super(...arguments);this.ppmBuffer="";this.superTimeout=null}activate(P){super.activate("image/png")}matches(P){return["image/x-portable-bitmap","image/x-portable-graymap","image/x-portable-pixmap","image/x-portable-anymap"].includes(P)}reset(){super.reset(),this.ppmBuffer=""}write(P){typeof P=="number"&&(P=String.fromCharCode(P)),this.ppmBuffer+=P,!(this.ppmBuffer.length<10)&&(this.superTimeout&&clearTimeout(this.superTimeout),this.superTimeout=setTimeout(()=>{try{super.reset(),super.write(this.convertToPNG())}catch(z){console.error(z)}},50))}convertToPNG(){if(!/^P[1-7]/.test(this.ppmBuffer))throw new Ri;let P=this.extractPBMHeader();if(!P)throw new Ri;let[z]=P;if(!z)throw new Ri;if(z==="P1"){let[,te,X,h]=P;return this.parseP1(te,X,h)}if(z==="P2"){let[,te,X,h,L]=P;return this.parseP2(te,X,h,L)}if(z==="P3"){let[,te,X,h,L]=P;return this.parseP3(te,X,h,L)}if(z==="P4"){let[,te,X,h]=P;return this.parseP4(te,X,h)}if(z==="P5"){let[,te,X,h,L]=P;return this.parseP2(te,X,h,L,!0)}if(z==="P6"){let[,te,X,h,L]=P;return this.parseP3(te,X,h,L,!0)}throw new Ri("Currently unsupported.")}createCanvas(P,z){let te=document.createElement("canvas"),X=te.getContext("2d"),h=new ImageData(P,z);return te.width=P,te.height=z,[te,X,h]}canvasToRawPNG(P){return atob(P.toDataURL("image/png").replace(/^data:image\/png;base64,/,""))}parseP1(P,z,te){let[X,h,L]=this.createCanvas(P,z),p=this.asciiDataGenerator(te,!1);for(let g=0;g<P*z*4;){let C=p.next().value?0:255;L.data[g++]=C,L.data[g++]=C,L.data[g++]=C,L.data[g++]=255}return h.putImageData(L,0,0,0,0,P,z),this.canvasToRawPNG(X)}parseP2(P,z,te,X,h=!1){let[L,p,g]=this.createCanvas(P,z),C=h?this.binaryDataGenerator(X):this.asciiDataGenerator(X);for(let y=0;y<P*z*4;){let b=Math.floor(C.next().value/te*255);g.data[y++]=b,g.data[y++]=b,g.data[y++]=b,g.data[y++]=255}return p.putImageData(g,0,0,0,0,P,z),this.canvasToRawPNG(L)}parseP3(P,z,te,X,h=!1){let[L,p,g]=this.createCanvas(P,z),C=h?this.binaryDataGenerator(X):this.asciiDataGenerator(X);for(let y=0;y<P*z*4;)g.data[y++]=Math.floor((C.next().value||0)/te*255),g.data[y++]=Math.floor((C.next().value||0)/te*255),g.data[y++]=Math.floor((C.next().value||0)/te*255),g.data[y++]=255;return p.putImageData(g,0,0,0,0,P,z),this.canvasToRawPNG(L)}parseP4(P,z,te){let[X,h,L]=this.createCanvas(P,z),p=this.binaryDataGenerator(te);for(let g=0;g<P*z*4;){let C="";for(let y=0;y<Math.ceil(P/8);y++)C+=("00000000"+p.next().value.toString(2)).slice(-8);for(let y=0;y<P;y++){let b=C[y]==="1"?0:255;L.data[g++]=b,L.data[g++]=b,L.data[g++]=b,L.data[g++]=255}}return h.putImageData(L,0,0,0,0,P,z),this.canvasToRawPNG(X)}extractPBMHeader(){let P=this.ppmBuffer.slice(0,2),z=/^(P[14])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/,te=/^(P[2356])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/;if(P==="P1"||P==="P4"){let X=this.ppmBuffer.match(z);if(!X)throw new Ri;return[X[1],parseInt(X[2],10),parseInt(X[3],10),X[0].length]}if(P==="P2"||P==="P3"||P==="P5"||P==="P6"){let X=this.ppmBuffer.match(te);if(!X)throw new Ri;return[X[1],parseInt(X[2],10),parseInt(X[3],10),parseInt(X[4],10),X[0].length]}}*asciiDataGenerator(P,z=!0){let te="";for(let X=P,h=!1;X<this.ppmBuffer.length;X++){let L=this.ppmBuffer[X];/#/.test(L)&&(te&&(yield parseInt(te,10),te=""),h=!0),/\n/.test(L)&&h&&(h=!1),!h&&(/\s/.test(L)&&te.length>0&&(yield parseInt(te,10),te=""),/\d/.test(L)&&(te+=L),z===!1&&te&&(yield parseInt(te,10),te=""))}yield parseInt(te,10)}*binaryDataGenerator(P){let z="";for(let te=P;te<this.ppmBuffer.length;te++)yield this.ppmBuffer[te].charCodeAt(0);yield parseInt(z,10)}},Il=Pl;var Tt=class{constructor(){this.mimeType="text/plain";this.langSelector=document.querySelector('select[name="lang"]'),this.addRegisteredLangs();let P=document.querySelector("div.stdout");this.stdout=ss(new yl(P),new Il(P),new ho(P),new fo(P),new us(P)),this.stdout.activate("text/plain"),this.stderr=ss(new us(document.querySelector("div.stderr"),{rows:8,theme:{foreground:"#f92672"}})),this.stderr.activate("text/plain"),this.codeHeader=Tt.createEditor(document.querySelector('textarea[name="header"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.code=Tt.createEditor(document.querySelector('textarea[name="code"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.codeFooter=Tt.createEditor(document.querySelector('textarea[name="footer"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.stdin=Tt.createEditor(document.querySelector('textarea[name="input"]')),this.args=Tt.createEditor(document.querySelector('textarea[name="args"]')),this.io=new as(this.langSelector,this.codeHeader,this.code,this.codeFooter,this.stdin,this.stdout,this.stderr,this.args),this.expanders=document.querySelectorAll('button[name="expand"]'),this.argsWrapper=document.querySelector(".args-wrapper"),this.addArg=document.querySelector(".args-wrapper .actions"),this.runButton=document.querySelector('button[name="run"]'),this.stopButton=document.querySelector('button[name="stop"]'),this.bytesCount=document.querySelector(".bytes .byte-count"),this.bytesPlural=document.querySelector(".bytes .plural"),this.encoded=document.querySelector(".encoded"),this.format=document.querySelector(".format"),this.copyLinkButton=document.querySelector('button[name="copy"]'),this.markdownButton=document.querySelector('button[name="markdown"]'),this.mimeTypeInput=document.querySelector(".stdout-header input"),this.connectExpanders(),this.io.onCodeChange(()=>this.codeOnChange()),this.runButton.addEventListener("click",()=>this.runCode()),this.langSelector.addEventListener("change",()=>this.populateArgs()),this.copyLinkButton.addEventListener("click",()=>{let z=this.buildLink();window.history.pushState(this.buildHashData(),document.title,z),navigator.clipboard.writeText(z),Tt.copied(this.copyLinkButton)}),this.markdownButton.addEventListener("click",()=>{navigator.clipboard.writeText(this.buildMarkdown()),Tt.copied(this.markdownButton)}),this.mimeTypeInput.addEventListener("input",()=>this.setMimeType(this.mimeTypeInput.value||"text/plain",!1)),window.addEventListener("keydown",z=>{if(z.key==="s"&&(z.ctrlKey||z.metaKey)){let te=this.buildLink();window.history.pushState(this.buildHashData(),document.title,te),navigator.clipboard.writeText(te),this.toast("Saved!","success",{hide:2}),z.preventDefault()}}),window.addEventListener("hashchange",()=>{this.parseHashData(window.location.hash),this.io.getCodeAsArray().length&&this.runCode()}),window.addEventListener("resize",()=>this.resize()),this.parseHashData(window.location.hash);try{this.populateArgs()}catch(z){this.toast(z.message,"error")}this.codeOnChange(),this.io.getCodeAsArray().length&&this.runCode(),this.resize()}addRegisteredLangs(){Or.all().forEach(P=>{let z=Or.get(P),te=document.createElement("option");te.setAttribute("value",z.getId()),te.append(document.createTextNode(z.getName())),this.langSelector.append(te)})}setLang(P){if(!Or.all().includes(P))throw new TypeError(`Unknown lang: ${P}.`);this.langSelector.value=P,this.setCodeHighlight()}getLangId(){return this.langSelector.value}setCodeHighlight(){let P=Or.get(this.getLangId());[this.codeHeader,this.code,this.codeFooter].forEach(z=>{if(fi.decoder(as.getRaw(z)).name()!=="default"){z.getOption("mode")!==null&&z.setOption("mode",null);return}z.getOption("mode")!==P.getHighlighterRef()&&z.setOption("mode",P.getHighlighterRef())})}static createEditor(P,z={}){return(0,Hl.fromTextArea)(P,ci({mode:null,theme:"monokai",viewportMargin:1/0,extraKeys:{"Shift-Tab":!1,Tab:!1}},z))}resize(){this.stdout.resize(),this.stderr.resize()}codeOnChange(){let P=this.io.getCodeAsArray();this.encoded.setAttribute("hidden",""),this.setCodeHighlight();let z=fi.decoder(this.io.getRawCode());z.name()!=="default"&&(this.encoded.removeAttribute("hidden"),this.format.innerText=z.name()),this.showBytes(P.length)}runCode(){let P=Date.now(),z=()=>{te.terminate(),this.io.writeStderr(`Aborted execution after ${Date.now()-P}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",z)};this.io.clearStdout(),this.io.clearStderr(),this.runButton.setAttribute("disabled",""),this.stopButton.removeAttribute("disabled");let te=Or.run(this.getLangId(),this.io.getFullCodeAsArray(),this.io.getArgs(),this.io.getStdin());this.stopButton.addEventListener("click",z),te.onmessage=({data:X})=>{let{type:h,output:L,error:p}=X;L&&this.io.writeStdout(L),p&&this.io.writeStderr(p!=null?p:""),h==="done"&&(this.io.writeStderr(`Completed execution after ${Date.now()-P}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",z),te.terminate())},te.onerror=X=>{this.toast(`Worker error: ${X.message}`,"error"),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled","")}}populateArgs(){for(;this.addArg.firstElementChild;)this.addArg.firstElementChild.remove();let P=Or.get(this.getLangId());if(!P)throw new TypeError("Unregistered lang: "+this.getLangId());let z=P.getArgs();z!==null?(this.argsWrapper.removeAttribute("hidden"),z.forEach(te=>{let X=document.createElement("button");X.append(document.createTextNode(te)),X.addEventListener("click",()=>{var p;let h=(p=this.io.getArgs())!=null?p:"";new RegExp("(\\n|^)"+te+"(\\n|$)").test(h)||this.io.setArgs((h+`
`+te).trim())}),this.addArg.append(X)})):this.argsWrapper.setAttribute("hidden",""),this.io.argsRefresh()}static expand(P){let z=P.nextElementSibling,te=document.querySelector(P.dataset.target);if(!te){console.debug("No collapser or target for expander: ",P);return}P.setAttribute("hidden",""),te.removeAttribute("hidden"),z.removeAttribute("hidden"),z.focus()}static collapse(P){let z=P.nextElementSibling,te=document.querySelector(P.dataset.target);if(!te){console.debug("No collapser or target for expander: ",P);return}P.removeAttribute("hidden"),te.setAttribute("hidden",""),z.setAttribute("hidden",""),P.focus()}connectExpanders(){this.expanders.forEach(P=>{let z=P.nextElementSibling;if(!z||!z.matches('button[name="collapse"]')){console.debug("No collapser or target for expander: ",P);return}P.addEventListener("click",()=>Tt.expand(P)),z.addEventListener("click",()=>Tt.collapse(P))})}setMimeType(P,z=!0){this.mimeType=P,z&&(this.mimeTypeInput.value=P),this.stdout.activate(P),this.stdout.resize()}static copied(P){P.setAttribute("disabled",""),P.style.width=P.offsetWidth+"px",P.classList.toggle("copied"),window.setTimeout(()=>{P.removeAttribute("disabled"),P.style.width=null,P.classList.toggle("copied")},1e3)}parseHashData(P){var h,L,p,g,C,y;if(!P||P.length<2)return;let z;try{let b=atob(P.slice(1));z=JSON.parse(b)}catch(b){if(b instanceof DOMException){this.toast("Unable to decode URL data. Aborting.","error");return}if(b instanceof SyntaxError){this.toast("Unable to decode JSON data. Aborting.","error");return}throw b}let[te]=Array.from(this.expanders).filter(b=>b.parentElement.matches(".code-header")),[X]=Array.from(this.expanders).filter(b=>b.parentElement.matches(".code-footer"));z.header?Tt.expand(te):Tt.collapse(te),z.footer?Tt.expand(X):Tt.collapse(X),this.setLang((h=z.lang)!=null?h:this.getLangId()),this.io.setCodeHeader((L=z.header)!=null?L:""),this.io.setCode((p=z.code)!=null?p:""),this.io.setCodeFooter((g=z.footer)!=null?g:""),this.io.setArgs((C=z.args)!=null?C:""),this.io.setStdin((y=z.input)!=null?y:""),z.mime&&this.setMimeType(z.mime)}buildHashData(){let P={lang:this.getLangId(),code:this.io.getRawCode()},z=this.io.getRawCodeHeader(),te=this.io.getRawCodeFooter(),X=this.io.getArgs(),h=this.io.getStdin(),L=this.mimeType;return Object.entries({header:z,footer:te,args:X,input:h}).forEach(([p,g])=>{g&&(P[p]=g)}),L!=="text/plain"&&(P.mime=L),btoa(JSON.stringify(P))}buildLink(){let P=this.buildHashData();return window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+P}buildMarkdown(){let P=this.io.getArgs().trim().split(/\n/).join(" "),z=Or.get(this.getLangId()),te=Math.random().toString(36).slice(2,10),X=this.io.getCodeAsArray().length;return`# [${z.getName()}]${P?` + \`${P}\``:""}, ${X} byte${X===1?"":"s"}

<!-- language-all: lang-${z.getHighlighterRef()} -->

<pre><code>${this.io.getCodeAsString().replace(/[&<>]/g,d=>d==="<"?"&lt;":d===">"?"&gt;":d==="&"?"&amp;":d)}</code></pre>

<<<<<<< Updated upstream
[Try it online!][TIO-${te}]

[${z.getName()}]: ${z.getURL()}
[TIO-${te}]: ${this.buildLink()}`}showBytes(P){if(this.bytesCount.innerText=P.toString(),P===1){this.bytesPlural.setAttribute("hidden","");return}this.bytesPlural.removeAttribute("hidden")}toast(P,z,te={}){return te.events||(te.events={}),te.events.click||(te.events.click=[]),te.events.click.push(X=>X.hide()),new Fl.Melba(on(ci({},te),{content:P,type:z}))}},uo=Tt;var Wl=class{name(){return"xxd"}matches(P){return/^(\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\n|$))+$/.test(P)}decode(P){return P.trim().replace(/(?<=^|\n)\d{7,8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map(z=>parseInt(z,16))}},Nl=Wl;fi.register(new Nl,new rl,new Ja,new el);Or.register(new sl,new ul);var Yf=new uo;})();
=======
[Try it online!][TIO-${oe}]

[${$.getName()}]: ${$.getURL()}
[TIO-${oe}]: ${this.buildLink()}`}showBytes(j){if(this.bytesCount.innerText=j.toString(),j===1){this.bytesPlural.setAttribute("hidden","");return}this.bytesPlural.removeAttribute("hidden")}toast(j,$,oe={}){return oe.events||(oe.events={}),oe.events.click||(oe.events.click=[]),oe.events.click.push(J=>J.hide()),new El.Melba({...oe,content:j,type:$})}},Tl=vt;var Al=class{name(){return"xxd"}matches(j){return/^(\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\n|$))+$/.test(j)}decode(j){return j.trim().replace(/(?<=^|\n)\d{7,8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map($=>parseInt($,16))}},Ml=Al;hi.register(new Ml,new ja,new Ia,new Wa);Dr.register(new Ga,new Ja,new rl,new cl);var Cf=new Tl;})();
>>>>>>> Stashed changes
/**
 * Copyright (c) 2017 The xterm.js authors. All rights reserved.
 * @license MIT
 */
//# sourceMappingURL=app.js.map
