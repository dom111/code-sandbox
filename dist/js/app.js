(()=>{var Gu=Object.create;var co=Object.defineProperty,Xu=Object.defineProperties,Yu=Object.getOwnPropertyDescriptor,Vu=Object.getOwnPropertyDescriptors,Zu=Object.getOwnPropertyNames,Ja=Object.getOwnPropertySymbols,$u=Object.getPrototypeOf,Qa=Object.prototype.hasOwnProperty,Ju=Object.prototype.propertyIsEnumerable;var el=(V,A,W)=>A in V?co(V,A,{enumerable:!0,configurable:!0,writable:!0,value:W}):V[A]=W,Xt=(V,A)=>{for(var W in A||(A={}))Qa.call(A,W)&&el(V,W,A[W]);if(Ja)for(var W of Ja(A))Ju.call(A,W)&&el(V,W,A[W]);return V},Jr=(V,A)=>Xu(V,Vu(A)),Qu=V=>co(V,"__esModule",{value:!0});var ar=(V,A)=>()=>(A||V((A={exports:{}}).exports,A),A.exports);var ef=(V,A,W,q)=>{if(A&&typeof A=="object"||typeof A=="function")for(let K of Zu(A))!Qa.call(V,K)&&(W||K!=="default")&&co(V,K,{get:()=>A[K],enumerable:!(q=Yu(A,K))||q.enumerable});return V},Yt=(V,A)=>ef(Qu(co(V!=null?Gu($u(V)):{},"default",!A&&V&&V.__esModule?{get:()=>V.default,enumerable:!0}:{value:V,enumerable:!0})),V);var lr=ar((os,ss)=>{(function(V,A){typeof os=="object"&&typeof ss!="undefined"?ss.exports=A():typeof define=="function"&&define.amd?define(A):(V=V||self,V.CodeMirror=A())})(os,function(){"use strict";var V=navigator.userAgent,A=navigator.platform,W=/gecko\/\d/i.test(V),q=/MSIE \d/.test(V),K=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(V),p=/Edge\/(\d+)/.exec(V),L=q||K||p,g=L&&(q?document.documentMode||6:+(p||K)[1]),v=!p&&/WebKit\//.test(V),C=v&&/Qt\/\d+\.\d+/.test(V),y=!p&&/Chrome\//.test(V),m=/Opera\//.test(V),w=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(V),d=/PhantomJS/.test(V),_=w&&(/Mobile\/\w+/.test(V)||navigator.maxTouchPoints>2),l=/Android/.test(V),a=_||l||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(V),n=_||/Mac/.test(A),s=/\bCrOS\b/.test(V),c=/win/i.test(A),f=m&&V.match(/Version\/(\d*\.\d*)/);f&&(f=Number(f[1])),f&&f>=15&&(m=!1,v=!0);var b=n&&(C||m&&(f==null||f<12.11)),k=W||L&&g>=9;function O(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var D=function(e,t){var i=e.className,r=O(t).exec(i);if(r){var o=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(o?r[1]+o:"")}};function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function x(e,t){return M(e).appendChild(t)}function B(e,t,i,r){var o=document.createElement(e);if(i&&(o.className=i),r&&(o.style.cssText=r),typeof t=="string")o.appendChild(document.createTextNode(t));else if(t)for(var u=0;u<t.length;++u)o.appendChild(t[u]);return o}function T(e,t,i,r){var o=B(e,t,i,r);return o.setAttribute("role","presentation"),o}var J;document.createRange?J=function(e,t,i,r){var o=document.createRange();return o.setEnd(r||e,i),o.setStart(e,t),o}:J=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function j(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function H(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function N(e,t){var i=e.className;O(t).test(i)||(e.className+=(i?" ":"")+t)}function Z(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!O(i[r]).test(t)&&(t+=" "+i[r]);return t}var Q=function(e){e.select()};_?Q=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:L&&(Q=function(e){try{e.select()}catch{}});function ae(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function se(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function me(e,t,i,r,o){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var u=r||0,S=o||0;;){var E=e.indexOf("	",u);if(E<0||E>=t)return S+(t-u);S+=E-u,S+=i-S%i,u=E+1}}var we=function(){this.id=null,this.f=null,this.time=0,this.handler=ae(this.onTimeout,this)};we.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},we.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function he(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var F=50,z={toString:function(){return"CodeMirror.Pass"}},G={scroll:!1},ce={origin:"*mouse"},$={origin:"+move"};function ge(e,t,i){for(var r=0,o=0;;){var u=e.indexOf("	",r);u==-1&&(u=e.length);var S=u-r;if(u==e.length||o+S>=t)return r+Math.min(S,t-o);if(o+=u-r,o+=i-o%i,r=u+1,o>=t)return r}}var Le=[""];function Be(e){for(;Le.length<=e;)Le.push(Ee(Le)+" ");return Le[e]}function Ee(e){return e[e.length-1]}function He(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function Se(e,t,i){for(var r=0,o=i(t);r<e.length&&i(e[r])<=o;)r++;e.splice(r,0,t)}function ze(){}function vt(e,t){var i;return Object.create?i=Object.create(e):(ze.prototype=e,i=new ze),t&&se(t,i),i}var At=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Vt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||At.test(e))}function br(e,t){return t?t.source.indexOf("\\w")>-1&&Vt(e)?!0:t.test(e):Vt(e)}function ei(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var hi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ir(e){return e.charCodeAt(0)>=768&&hi.test(e)}function ti(e,t,i){for(;(i<0?t>0:t<e.length)&&Ir(e.charAt(t));)t+=i;return t}function jt(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var o=(t+i)/2,u=r<0?Math.ceil(o):Math.floor(o);if(u==t)return e(u)?t:i;e(u)?i=u:t=u+r}}function di(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var o=!1,u=0;u<e.length;++u){var S=e[u];(S.from<i&&S.to>t||t==i&&S.to==t)&&(r(Math.max(S.from,t),Math.min(S.to,i),S.level==1?"rtl":"ltr",u),o=!0)}o||r(t,i,"ltr")}var gt=null;function Ne(e,t,i){var r;gt=null;for(var o=0;o<e.length;++o){var u=e[o];if(u.from<t&&u.to>t)return o;u.to==t&&(u.from!=u.to&&i=="before"?r=o:gt=o),u.from==t&&(u.from!=u.to&&i!="before"?r=o:gt=o)}return r??gt}var cr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(P){return P<=247?e.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?t.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,u=/[LRr]/,S=/[Lb1n]/,E=/[1n]/;function R(P,U,Y){this.level=P,this.from=U,this.to=Y}return function(P,U){var Y=U=="ltr"?"L":"R";if(P.length==0||U=="ltr"&&!r.test(P))return!1;for(var te=P.length,ee=[],re=0;re<te;++re)ee.push(i(P.charCodeAt(re)));for(var le=0,de=Y;le<te;++le){var pe=ee[le];pe=="m"?ee[le]=de:de=pe}for(var ye=0,ve=Y;ye<te;++ye){var be=ee[ye];be=="1"&&ve=="r"?ee[ye]="n":u.test(be)&&(ve=be,be=="r"&&(ee[ye]="R"))}for(var Te=1,xe=ee[0];Te<te-1;++Te){var Re=ee[Te];Re=="+"&&xe=="1"&&ee[Te+1]=="1"?ee[Te]="1":Re==","&&xe==ee[Te+1]&&(xe=="1"||xe=="n")&&(ee[Te]=xe),xe=Re}for(var We=0;We<te;++We){var lt=ee[We];if(lt==",")ee[We]="N";else if(lt=="%"){var qe=void 0;for(qe=We+1;qe<te&&ee[qe]=="%";++qe);for(var Gt=We&&ee[We-1]=="!"||qe<te&&ee[qe]=="1"?"1":"N",Ft=We;Ft<qe;++Ft)ee[Ft]=Gt;We=qe-1}}for(var Qe=0,Wt=Y;Qe<te;++Qe){var pt=ee[Qe];Wt=="L"&&pt=="1"?ee[Qe]="L":u.test(pt)&&(Wt=pt)}for(var it=0;it<te;++it)if(o.test(ee[it])){var et=void 0;for(et=it+1;et<te&&o.test(ee[et]);++et);for(var Xe=(it?ee[it-1]:Y)=="L",Nt=(et<te?ee[et]:Y)=="L",tn=Xe==Nt?Xe?"L":"R":Y,fi=it;fi<et;++fi)ee[fi]=tn;it=et-1}for(var Lt=[],Br,ct=0;ct<te;)if(S.test(ee[ct])){var is=ct;for(++ct;ct<te&&S.test(ee[ct]);++ct);Lt.push(new R(0,is,ct))}else{var $r=ct,Ti=Lt.length,Ai=U=="rtl"?1:0;for(++ct;ct<te&&ee[ct]!="L";++ct);for(var Tt=$r;Tt<ct;)if(E.test(ee[Tt])){$r<Tt&&(Lt.splice(Ti,0,new R(1,$r,Tt)),Ti+=Ai);var rn=Tt;for(++Tt;Tt<ct&&E.test(ee[Tt]);++Tt);Lt.splice(Ti,0,new R(2,rn,Tt)),Ti+=Ai,$r=Tt}else++Tt;$r<ct&&Lt.splice(Ti,0,new R(1,$r,ct))}return U=="ltr"&&(Lt[0].level==1&&(Br=P.match(/^\s+/))&&(Lt[0].from=Br[0].length,Lt.unshift(new R(0,0,Br[0].length))),Ee(Lt).level==1&&(Br=P.match(/\s+$/))&&(Ee(Lt).to-=Br[0].length,Lt.push(new R(0,te-Br[0].length,te)))),U=="rtl"?Lt.reverse():Lt}}();function ut(e,t){var i=e.order;return i==null&&(i=e.order=cr(e.text,t)),i}var Zt=[],ke=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Zt).concat(i)}};function ur(e,t){return e._handlers&&e._handlers[t]||Zt}function tt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,o=r&&r[t];if(o){var u=he(o,i);u>-1&&(r[t]=o.slice(0,u).concat(o.slice(u+1)))}}}function Ae(e,t){var i=ur(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),o=0;o<i.length;++o)i[o].apply(null,r)}function je(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ae(e,i||t.type,e,t),ft(t)||t.codemirrorIgnore}function fr(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)he(i,t[r])==-1&&i.push(t[r])}function Ke(e,t){return ur(e,t).length>0}function Mt(e){e.prototype.on=function(t,i){ke(this,t,i)},e.prototype.off=function(t,i){tt(this,t,i)}}function Ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function hr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function rr(e){Ye(e),hr(e)}function $t(e){return e.target||e.srcElement}function Hr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),n&&e.ctrlKey&&t==1&&(t=3),t}var Sr=function(){if(L&&g<9)return!1;var e=B("div");return"draggable"in e||"dragDrop"in e}(),rt;function Fr(e){if(rt==null){var t=B("span","\u200B");x(e,B("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(rt=t.offsetWidth<=1&&t.offsetHeight>2&&!(L&&g<8))}var i=rt?B("span","\u200B"):B("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var Cr;function Rt(e){if(Cr!=null)return Cr;var t=x(e,document.createTextNode("A\u062EA")),i=J(t,0,1).getBoundingClientRect(),r=J(t,1,2).getBoundingClientRect();return M(e),!i||i.left==i.right?!1:Cr=r.right-i.right<3}var wr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var o=e.indexOf(`
`,t);o==-1&&(o=e.length);var u=e.slice(t,e.charAt(o-1)=="\r"?o-1:o),S=u.indexOf("\r");S!=-1?(i.push(u.slice(0,S)),t+=S+1):(i.push(u),t=o+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Wr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Nr=function(){var e=B("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Lr=null;function Jt(e){if(Lr!=null)return Lr;var t=x(e,B("span","x")),i=t.getBoundingClientRect(),r=J(t,0,1).getBoundingClientRect();return Lr=Math.abs(i.left-r.left)>1}var _t={},ht={};function jr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),_t[e]=t}function Ut(e,t){ht[e]=t}function dr(e){if(typeof e=="string"&&ht.hasOwnProperty(e))e=ht[e];else if(e&&typeof e.name=="string"&&ht.hasOwnProperty(e.name)){var t=ht[e.name];typeof t=="string"&&(t={name:t}),e=vt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return dr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return dr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function pr(e,t){t=dr(t);var i=_t[t.name];if(!i)return pr(e,"text/plain");var r=i(e,t);if(xt.hasOwnProperty(t.name)){var o=xt[t.name];for(var u in o)!o.hasOwnProperty(u)||(r.hasOwnProperty(u)&&(r["_"+u]=r[u]),r[u]=o[u])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var S in t.modeProps)r[S]=t.modeProps[S];return r}var xt={};function kt(e,t){var i=xt.hasOwnProperty(e)?xt[e]:xt[e]={};se(t,i)}function dt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var o=t[r];o instanceof Array&&(o=o.concat([])),i[r]=o}return i}function xr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function kr(e,t,i){return e.startState?e.startState(t,i):!0}var Fe=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Fe.prototype.eol=function(){return this.pos>=this.string.length},Fe.prototype.sol=function(){return this.pos==this.lineStart},Fe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Fe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Fe.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},Fe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Fe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Fe.prototype.skipToEnd=function(){this.pos=this.string.length},Fe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Fe.prototype.backUp=function(e){this.pos-=e},Fe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=me(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.indentation=function(){return me(this.string,null,this.tabSize)-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},Fe.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(S){return i?S.toLowerCase():S},o=this.string.substr(this.pos,e.length);if(r(o)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var u=this.string.slice(this.pos).match(e);return u&&u.index>0?null:(u&&t!==!1&&(this.pos+=u[0].length),u)}},Fe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Fe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Fe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Fe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Ce(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var o=i.children[r],u=o.chunkSize();if(t<u){i=o;break}t-=u}return i.lines[t]}function Dt(e,t,i){var r=[],o=t.line;return e.iter(t.line,i.line+1,function(u){var S=u.text;o==i.line&&(S=S.slice(0,i.ch)),o==t.line&&(S=S.slice(t.ch)),r.push(S),++o}),r}function Er(e,t,i){var r=[];return e.iter(t,i,function(o){r.push(o.text)}),r}function nt(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function Oe(e){if(e.parent==null)return null;for(var t=e.parent,i=he(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var o=0;r.children[o]!=t;++o)i+=r.children[o].chunkSize();return i+t.first}function Ot(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var o=e.children[r],u=o.height;if(t<u){e=o;continue e}t-=u,i+=o.chunkSize()}return i}while(!e.lines);for(var S=0;S<e.lines.length;++S){var E=e.lines[S],R=E.height;if(t<R)break;t-=R}return i+S}function ir(e,t){return t>=e.first&&t<e.first+e.size}function Tr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ue(e,t,i){if(i===void 0&&(i=null),!(this instanceof ue))return new ue(e,t,i);this.line=e,this.ch=t,this.sticky=i}function I(e,t){return e.line-t.line||e.ch-t.ch}function X(e,t){return e.sticky==t.sticky&&I(e,t)==0}function oe(e){return ue(e.line,e.ch)}function fe(e,t){return I(e,t)<0?t:e}function Me(e,t){return I(e,t)<0?e:t}function De(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function _e(e,t){if(t.line<e.first)return ue(e.first,0);var i=e.first+e.size-1;return t.line>i?ue(i,Ce(e,i).text.length):$e(t,Ce(e,t.line).text.length)}function $e(e,t){var i=e.ch;return i==null||i>t?ue(e.line,t):i<0?ue(e.line,0):e}function yt(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=_e(e,t[r]);return i}var Ar=function(e,t){this.state=e,this.lookAhead=t},zt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};zt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},zt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(e,t,i){return t instanceof Ar?new zt(e,dt(e.mode,t.state),i,t.lookAhead):new zt(e,dt(e.mode,t),i)},zt.prototype.save=function(e){var t=e!==!1?dt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ar(t,this.maxLookAhead):t};function Ri(e,t,i,r){var o=[e.state.modeGen],u={};Hi(e,t.text,e.doc.mode,i,function(P,U){return o.push(P,U)},u,r);for(var S=i.state,E=function(P){i.baseTokens=o;var U=e.state.overlays[P],Y=1,te=0;i.state=!0,Hi(e,t.text,U.mode,i,function(ee,re){for(var le=Y;te<ee;){var de=o[Y];de>ee&&o.splice(Y,1,ee,o[Y+1],de),Y+=2,te=Math.min(ee,de)}if(!!re)if(U.opaque)o.splice(le,Y-le,ee,"overlay "+re),Y=le+2;else for(;le<Y;le+=2){var pe=o[le+1];o[le+1]=(pe?pe+" ":"")+"overlay "+re}},u),i.state=S,i.baseTokens=null,i.baseTokenPos=1},R=0;R<e.state.overlays.length;++R)E(R);return{styles:o,classes:u.bgClass||u.textClass?u:null}}function Di(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ur(e,Oe(t)),o=t.text.length>e.options.maxHighlightLength&&dt(e.doc.mode,r.state),u=Ri(e,t,r);o&&(r.state=o),t.stateAfter=r.save(!o),t.styles=u.styles,u.classes?t.styleClasses=u.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ur(e,t,i){var r=e.doc,o=e.display;if(!r.mode.startState)return new zt(r,!0,t);var u=sn(e,t,i),S=u>r.first&&Ce(r,u-1).stateAfter,E=S?zt.fromSaved(r,S,u):new zt(r,kr(r.mode),u);return r.iter(u,t,function(R){pi(e,R.text,E);var P=E.line;R.stateAfter=P==t-1||P%5==0||P>=o.viewFrom&&P<o.viewTo?E.save():null,E.nextLine()}),i&&(r.modeFrontier=E.line),E}function pi(e,t,i,r){var o=e.doc.mode,u=new Fe(t,e.options.tabSize,i);for(u.start=u.pos=r||0,t==""&&Oi(o,i.state);!u.eol();)vi(o,u,i.state),u.start=u.pos}function Oi(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=xr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function vi(e,t,i,r){for(var o=0;o<10;o++){r&&(r[0]=xr(e,i).mode);var u=e.token(t,i);if(t.pos>t.start)return u}throw new Error("Mode "+e.name+" failed to advance stream.")}var Bi=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Pi(e,t,i,r){var o=e.doc,u=o.mode,S;t=_e(o,t);var E=Ce(o,t.line),R=Ur(e,t.line,i),P=new Fe(E.text,e.options.tabSize,R),U;for(r&&(U=[]);(r||P.pos<t.ch)&&!P.eol();)P.start=P.pos,S=vi(u,P,R.state),r&&U.push(new Bi(P,S,dt(o.mode,R.state)));return r?U:new Bi(P,S,R.state)}function Ii(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Hi(e,t,i,r,o,u,S){var E=i.flattenSpans;E==null&&(E=e.options.flattenSpans);var R=0,P=null,U=new Fe(t,e.options.tabSize,r),Y,te=e.options.addModeClass&&[null];for(t==""&&Ii(Oi(i,r.state),u);!U.eol();){if(U.pos>e.options.maxHighlightLength?(E=!1,S&&pi(e,t,r,U.pos),U.pos=t.length,Y=null):Y=Ii(vi(i,U,r.state,te),u),te){var ee=te[0].name;ee&&(Y="m-"+(Y?ee+" "+Y:ee))}if(!E||P!=Y){for(;R<U.start;)R=Math.min(U.start,R+5e3),o(R,P);P=Y}U.start=U.pos}for(;R<U.pos;){var re=Math.min(U.pos,R+5e3);o(re,P),R=re}}function sn(e,t,i){for(var r,o,u=e.doc,S=i?-1:t-(e.doc.mode.innerMode?1e3:100),E=t;E>S;--E){if(E<=u.first)return u.first;var R=Ce(u,E-1),P=R.stateAfter;if(P&&(!i||E+(P instanceof Ar?P.lookAhead:0)<=u.modeFrontier))return E;var U=me(R.text,null,e.options.tabSize);(o==null||r>U)&&(o=E-1,r=U)}return o}function In(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var o=Ce(e,r).stateAfter;if(o&&(!(o instanceof Ar)||r+o.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var Hn=!1,nr=!1;function Fn(){Hn=!0}function yo(){nr=!0}function Fi(e,t,i){this.marker=e,this.from=t,this.to=i}function ne(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function ie(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function or(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function gi(e,t,i){var r;if(e)for(var o=0;o<e.length;++o){var u=e[o],S=u.marker,E=u.from==null||(S.inclusiveLeft?u.from<=t:u.from<t);if(E||u.from==t&&S.type=="bookmark"&&(!i||!u.marker.insertLeft)){var R=u.to==null||(S.inclusiveRight?u.to>=t:u.to>t);(r||(r=[])).push(new Fi(S,u.from,R?null:u.to))}}return r}function _i(e,t,i){var r;if(e)for(var o=0;o<e.length;++o){var u=e[o],S=u.marker,E=u.to==null||(S.inclusiveRight?u.to>=t:u.to>t);if(E||u.from==t&&S.type=="bookmark"&&(!i||u.marker.insertLeft)){var R=u.from==null||(S.inclusiveLeft?u.from<=t:u.from<t);(r||(r=[])).push(new Fi(S,R?null:u.from-t,u.to==null?null:u.to-t))}}return r}function Ve(e,t){if(t.full)return null;var i=ir(e,t.from.line)&&Ce(e,t.from.line).markedSpans,r=ir(e,t.to.line)&&Ce(e,t.to.line).markedSpans;if(!i&&!r)return null;var o=t.from.ch,u=t.to.ch,S=I(t.from,t.to)==0,E=gi(i,o,S),R=_i(r,u,S),P=t.text.length==1,U=Ee(t.text).length+(P?o:0);if(E)for(var Y=0;Y<E.length;++Y){var te=E[Y];if(te.to==null){var ee=ne(R,te.marker);ee?P&&(te.to=ee.to==null?null:ee.to+U):te.to=o}}if(R)for(var re=0;re<R.length;++re){var le=R[re];if(le.to!=null&&(le.to+=U),le.from==null){var de=ne(E,le.marker);de||(le.from=U,P&&(E||(E=[])).push(le))}else le.from+=U,P&&(E||(E=[])).push(le)}E&&(E=Qt(E)),R&&R!=E&&(R=Qt(R));var pe=[E];if(!P){var ye=t.text.length-2,ve;if(ye>0&&E)for(var be=0;be<E.length;++be)E[be].to==null&&(ve||(ve=[])).push(new Fi(E[be].marker,null,null));for(var Te=0;Te<ye;++Te)pe.push(ve);pe.push(R)}return pe}function Qt(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function sr(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(ee){if(ee.markedSpans)for(var re=0;re<ee.markedSpans.length;++re){var le=ee.markedSpans[re].marker;le.readOnly&&(!r||he(r,le)==-1)&&(r||(r=[])).push(le)}}),!r)return null;for(var o=[{from:t,to:i}],u=0;u<r.length;++u)for(var S=r[u],E=S.find(0),R=0;R<o.length;++R){var P=o[R];if(!(I(P.to,E.from)<0||I(P.from,E.to)>0)){var U=[R,1],Y=I(P.from,E.from),te=I(P.to,E.to);(Y<0||!S.inclusiveLeft&&!Y)&&U.push({from:P.from,to:E.from}),(te>0||!S.inclusiveRight&&!te)&&U.push({from:E.to,to:P.to}),o.splice.apply(o,U),R+=U.length-3}}return o}function ri(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function mt(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Bt(e){return e.inclusiveLeft?-1:0}function Mr(e){return e.inclusiveRight?1:0}function zr(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),o=t.find(),u=I(r.from,o.from)||Bt(e)-Bt(t);if(u)return-u;var S=I(r.to,o.to)||Mr(e)-Mr(t);return S||t.id-e.id}function qr(e,t){var i=nr&&e.markedSpans,r;if(i)for(var o=void 0,u=0;u<i.length;++u)o=i[u],o.marker.collapsed&&(t?o.from:o.to)==null&&(!r||zr(r,o.marker)<0)&&(r=o.marker);return r}function Kr(e){return qr(e,!0)}function bt(e){return qr(e,!1)}function Pt(e,t){var i=nr&&e.markedSpans,r;if(i)for(var o=0;o<i.length;++o){var u=i[o];u.marker.collapsed&&(u.from==null||u.from<t)&&(u.to==null||u.to>t)&&(!r||zr(r,u.marker)<0)&&(r=u.marker)}return r}function Ge(e,t,i,r,o){var u=Ce(e,t),S=nr&&u.markedSpans;if(S)for(var E=0;E<S.length;++E){var R=S[E];if(!!R.marker.collapsed){var P=R.marker.find(0),U=I(P.from,i)||Bt(R.marker)-Bt(o),Y=I(P.to,r)||Mr(R.marker)-Mr(o);if(!(U>=0&&Y<=0||U<=0&&Y>=0)&&(U<=0&&(R.marker.inclusiveRight&&o.inclusiveLeft?I(P.to,i)>=0:I(P.to,i)>0)||U>=0&&(R.marker.inclusiveRight&&o.inclusiveLeft?I(P.from,r)<=0:I(P.from,r)<0)))return!0}}}function Je(e){for(var t;t=Kr(e);)e=t.find(-1,!0).line;return e}function er(e){for(var t;t=bt(e);)e=t.find(1,!0).line;return e}function Gr(e){for(var t,i;t=bt(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function vr(e,t){var i=Ce(e,t),r=Je(i);return i==r?t:Oe(r)}function yi(e,t){if(t>e.lastLine())return t;var i=Ce(e,t),r;if(!St(e,i))return t;for(;r=bt(i);)i=r.find(1,!0).line;return Oe(i)+1}function St(e,t){var i=nr&&t.markedSpans;if(i){for(var r=void 0,o=0;o<i.length;++o)if(r=i[o],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Rr(e,t,r))return!0}}}function Rr(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Rr(e,r.line,ne(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var o=void 0,u=0;u<t.markedSpans.length;++u)if(o=t.markedSpans[u],o.marker.collapsed&&!o.marker.widgetNode&&o.from==i.to&&(o.to==null||o.to!=i.from)&&(o.marker.inclusiveLeft||i.marker.inclusiveRight)&&Rr(e,t,o))return!0}function Ct(e){e=Je(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var o=i.lines[r];if(o==e)break;t+=o.height}for(var u=i.parent;u;i=u,u=i.parent)for(var S=0;S<u.children.length;++S){var E=u.children[S];if(E==i)break;t+=E.height}return t}function ii(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=Kr(r);){var o=i.find(0,!0);r=o.from.line,t+=o.from.ch-o.to.ch}for(r=e;i=bt(r);){var u=i.find(0,!0);t-=r.text.length-u.from.ch,r=u.to.line,t+=r.text.length-u.to.ch}return t}function mi(e){var t=e.display,i=e.doc;t.maxLine=Ce(i,i.first),t.maxLineLength=ii(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var o=ii(r);o>t.maxLineLength&&(t.maxLineLength=o,t.maxLine=r)})}var qt=function(e,t,i){this.text=e,mt(this,t),this.height=i?i(this):1};qt.prototype.lineNo=function(){return Oe(this)},Mt(qt);function Xr(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),ri(e),mt(e,i);var o=r?r(e):1;o!=e.height&&nt(e,o)}function mo(e){e.parent=null,ri(e)}var lc={},cc={};function vs(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?cc:lc;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function gs(e,t){var i=T("span",null,null,v?"padding-right: .1px":null),r={pre:T("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var u=o?t.rest[o-1]:t.line,S=void 0;r.pos=0,r.addToken=fc,Rt(e.display.measure)&&(S=ut(u,e.doc.direction))&&(r.addToken=dc(r.addToken,S)),r.map=[];var E=t!=e.display.externalMeasured&&Oe(u);pc(u,r,Di(e,u,E)),u.styleClasses&&(u.styleClasses.bgClass&&(r.bgClass=Z(u.styleClasses.bgClass,r.bgClass||"")),u.styleClasses.textClass&&(r.textClass=Z(u.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Fr(e.display.measure))),o==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(v){var R=r.content.lastChild;(/\bcm-tab\b/.test(R.className)||R.querySelector&&R.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ae(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Z(r.pre.className,r.textClass||"")),r}function uc(e){var t=B("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function fc(e,t,i,r,o,u,S){if(!!t){var E=e.splitSpaces?hc(t,e.trailingSpace):t,R=e.cm.state.specialChars,P=!1,U;if(!R.test(t))e.col+=t.length,U=document.createTextNode(E),e.map.push(e.pos,e.pos+t.length,U),L&&g<9&&(P=!0),e.pos+=t.length;else{U=document.createDocumentFragment();for(var Y=0;;){R.lastIndex=Y;var te=R.exec(t),ee=te?te.index-Y:t.length-Y;if(ee){var re=document.createTextNode(E.slice(Y,Y+ee));L&&g<9?U.appendChild(B("span",[re])):U.appendChild(re),e.map.push(e.pos,e.pos+ee,re),e.col+=ee,e.pos+=ee}if(!te)break;Y+=ee+1;var le=void 0;if(te[0]=="	"){var de=e.cm.options.tabSize,pe=de-e.col%de;le=U.appendChild(B("span",Be(pe),"cm-tab")),le.setAttribute("role","presentation"),le.setAttribute("cm-text","	"),e.col+=pe}else te[0]=="\r"||te[0]==`
`?(le=U.appendChild(B("span",te[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),le.setAttribute("cm-text",te[0]),e.col+=1):(le=e.cm.options.specialCharPlaceholder(te[0]),le.setAttribute("cm-text",te[0]),L&&g<9?U.appendChild(B("span",[le])):U.appendChild(le),e.col+=1);e.map.push(e.pos,e.pos+1,le),e.pos++}}if(e.trailingSpace=E.charCodeAt(t.length-1)==32,i||r||o||P||u||S){var ye=i||"";r&&(ye+=r),o&&(ye+=o);var ve=B("span",[U],ye,u);if(S)for(var be in S)S.hasOwnProperty(be)&&be!="style"&&be!="class"&&ve.setAttribute(be,S[be]);return e.content.appendChild(ve)}e.content.appendChild(U)}}function hc(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",o=0;o<e.length;o++){var u=e.charAt(o);u==" "&&i&&(o==e.length-1||e.charCodeAt(o+1)==32)&&(u="\xA0"),r+=u,i=u==" "}return r}function dc(e,t){return function(i,r,o,u,S,E,R){o=o?o+" cm-force-border":"cm-force-border";for(var P=i.pos,U=P+r.length;;){for(var Y=void 0,te=0;te<t.length&&(Y=t[te],!(Y.to>P&&Y.from<=P));te++);if(Y.to>=U)return e(i,r,o,u,S,E,R);e(i,r.slice(0,Y.to-P),o,u,null,E,R),u=null,r=r.slice(Y.to-P),P=Y.to}}}function _s(e,t,i,r){var o=!r&&i.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!r&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",i.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function pc(e,t,i){var r=e.markedSpans,o=e.text,u=0;if(!r){for(var S=1;S<i.length;S+=2)t.addToken(t,o.slice(u,u=i[S]),vs(i[S+1],t.cm.options));return}for(var E=o.length,R=0,P=1,U="",Y,te,ee=0,re,le,de,pe,ye;;){if(ee==R){re=le=de=te="",ye=null,pe=null,ee=1/0;for(var ve=[],be=void 0,Te=0;Te<r.length;++Te){var xe=r[Te],Re=xe.marker;if(Re.type=="bookmark"&&xe.from==R&&Re.widgetNode)ve.push(Re);else if(xe.from<=R&&(xe.to==null||xe.to>R||Re.collapsed&&xe.to==R&&xe.from==R)){if(xe.to!=null&&xe.to!=R&&ee>xe.to&&(ee=xe.to,le=""),Re.className&&(re+=" "+Re.className),Re.css&&(te=(te?te+";":"")+Re.css),Re.startStyle&&xe.from==R&&(de+=" "+Re.startStyle),Re.endStyle&&xe.to==ee&&(be||(be=[])).push(Re.endStyle,xe.to),Re.title&&((ye||(ye={})).title=Re.title),Re.attributes)for(var We in Re.attributes)(ye||(ye={}))[We]=Re.attributes[We];Re.collapsed&&(!pe||zr(pe.marker,Re)<0)&&(pe=xe)}else xe.from>R&&ee>xe.from&&(ee=xe.from)}if(be)for(var lt=0;lt<be.length;lt+=2)be[lt+1]==ee&&(le+=" "+be[lt]);if(!pe||pe.from==R)for(var qe=0;qe<ve.length;++qe)_s(t,0,ve[qe]);if(pe&&(pe.from||0)==R){if(_s(t,(pe.to==null?E+1:pe.to)-R,pe.marker,pe.from==null),pe.to==null)return;pe.to==R&&(pe=!1)}}if(R>=E)break;for(var Gt=Math.min(E,ee);;){if(U){var Ft=R+U.length;if(!pe){var Qe=Ft>Gt?U.slice(0,Gt-R):U;t.addToken(t,Qe,Y?Y+re:re,de,R+Qe.length==ee?le:"",te,ye)}if(Ft>=Gt){U=U.slice(Gt-R),R=Gt;break}R=Ft,de=""}U=o.slice(u,u=i[P++]),Y=vs(i[P++],t.cm.options)}}}function ys(e,t,i){this.line=t,this.rest=Gr(t),this.size=this.rest?Oe(Ee(this.rest))-i+1:1,this.node=this.text=null,this.hidden=St(e,t)}function Wn(e,t,i){for(var r=[],o,u=t;u<i;u=o){var S=new ys(e.doc,Ce(e.doc,u),u);o=u+S.size,r.push(S)}return r}var Wi=null;function vc(e){Wi?Wi.ops.push(e):e.ownsGroup=Wi={ops:[e],delayedCallbacks:[]}}function gc(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var o=e.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(i<t.length)}function _c(e,t){var i=e.ownsGroup;if(!!i)try{gc(i)}finally{Wi=null,t(i)}}var an=null;function ot(e,t){var i=ur(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),o;Wi?o=Wi.delayedCallbacks:an?o=an:(o=an=[],setTimeout(yc,0));for(var u=function(E){o.push(function(){return i[E].apply(null,r)})},S=0;S<i.length;++S)u(S)}}function yc(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function ms(e,t,i,r){for(var o=0;o<t.changes.length;o++){var u=t.changes[o];u=="text"?bc(e,t):u=="gutter"?Ss(e,t,i,r):u=="class"?bo(e,t):u=="widget"&&Sc(e,t,r)}t.changes=null}function ln(e){return e.node==e.text&&(e.node=B("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),L&&g<8&&(e.node.style.zIndex=2)),e.node}function mc(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=ln(t);t.background=r.insertBefore(B("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function bs(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):gs(e,t)}function bc(e,t){var i=t.text.className,r=bs(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,bo(e,t)):i&&(t.text.className=i)}function bo(e,t){mc(e,t),t.line.wrapClass?ln(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function Ss(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=ln(t);t.gutterBackground=B("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var u=t.line.gutterMarkers;if(e.options.lineNumbers||u){var S=ln(t),E=t.gutter=B("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(E.setAttribute("aria-hidden","true"),e.display.input.setUneditable(E),S.insertBefore(E,t.text),t.line.gutterClass&&(E.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!u||!u["CodeMirror-linenumbers"])&&(t.lineNumber=E.appendChild(B("div",Tr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),u)for(var R=0;R<e.display.gutterSpecs.length;++R){var P=e.display.gutterSpecs[R].className,U=u.hasOwnProperty(P)&&u[P];U&&E.appendChild(B("div",[U],"CodeMirror-gutter-elt","left: "+r.gutterLeft[P]+"px; width: "+r.gutterWidth[P]+"px"))}}}function Sc(e,t,i){t.alignable&&(t.alignable=null);for(var r=O("CodeMirror-linewidget"),o=t.node.firstChild,u=void 0;o;o=u)u=o.nextSibling,r.test(o.className)&&t.node.removeChild(o);Cs(e,t,i)}function Cc(e,t,i,r){var o=bs(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),bo(e,t),Ss(e,t,i,r),Cs(e,t,r),t.node}function Cs(e,t,i){if(ws(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)ws(e,t.rest[r],t,i,!1)}function ws(e,t,i,r,o){if(!!t.widgets)for(var u=ln(i),S=0,E=t.widgets;S<E.length;++S){var R=E[S],P=B("div",[R.node],"CodeMirror-linewidget"+(R.className?" "+R.className:""));R.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),wc(R,P,i,r),e.display.input.setUneditable(P),o&&R.above?u.insertBefore(P,i.gutter||i.text):u.appendChild(P),ot(R,"redraw")}}function wc(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var o=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(o-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function cn(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!j(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),x(t.display.measure,B("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Yr(e,t){for(var i=$t(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Nn(e){return e.lineSpace.offsetTop}function So(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ls(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=x(e.measure,B("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Dr(e){return F-e.display.nativeBarWidth}function bi(e){return e.display.scroller.clientWidth-Dr(e)-e.display.barWidth}function Co(e){return e.display.scroller.clientHeight-Dr(e)-e.display.barHeight}function Lc(e,t,i){var r=e.options.lineWrapping,o=r&&bi(e);if(!t.measure.heights||r&&t.measure.width!=o){var u=t.measure.heights=[];if(r){t.measure.width=o;for(var S=t.text.firstChild.getClientRects(),E=0;E<S.length-1;E++){var R=S[E],P=S[E+1];Math.abs(R.bottom-P.bottom)>2&&u.push((R.bottom+P.top)/2-i.top)}}u.push(i.bottom-i.top)}}function xs(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var o=0;o<e.rest.length;o++)if(Oe(e.rest[o])>i)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}}function xc(e,t){t=Je(t);var i=Oe(t),r=e.display.externalMeasured=new ys(e.doc,t,i);r.lineN=i;var o=r.built=gs(e,r);return r.text=o.pre,x(e.display.lineMeasure,o.pre),r}function ks(e,t,i,r){return Or(e,Ni(e,t),i,r)}function wo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[wi(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function Ni(e,t){var i=Oe(t),r=wo(e,i);r&&!r.text?r=null:r&&r.changes&&(ms(e,r,i,To(e)),e.curOp.forceUpdate=!0),r||(r=xc(e,t));var o=xs(r,t,i);return{line:t,view:r,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Or(e,t,i,r,o){t.before&&(i=-1);var u=i+(r||""),S;return t.cache.hasOwnProperty(u)?S=t.cache[u]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Lc(e,t.view,t.rect),t.hasHeights=!0),S=Ec(e,t,i,r),S.bogus||(t.cache[u]=S)),{left:S.left,right:S.right,top:o?S.rtop:S.top,bottom:o?S.rbottom:S.bottom}}var Es={left:0,right:0,top:0,bottom:0};function Ts(e,t,i){for(var r,o,u,S,E,R,P=0;P<e.length;P+=3)if(E=e[P],R=e[P+1],t<E?(o=0,u=1,S="left"):t<R?(o=t-E,u=o+1):(P==e.length-3||t==R&&e[P+3]>t)&&(u=R-E,o=u-1,t>=R&&(S="right")),o!=null){if(r=e[P+2],E==R&&i==(r.insertLeft?"left":"right")&&(S=i),i=="left"&&o==0)for(;P&&e[P-2]==e[P-3]&&e[P-1].insertLeft;)r=e[(P-=3)+2],S="left";if(i=="right"&&o==R-E)for(;P<e.length-3&&e[P+3]==e[P+4]&&!e[P+5].insertLeft;)r=e[(P+=3)+2],S="right";break}return{node:r,start:o,end:u,collapse:S,coverStart:E,coverEnd:R}}function kc(e,t){var i=Es;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var o=e.length-1;o>=0&&(i=e[o]).left==i.right;o--);return i}function Ec(e,t,i,r){var o=Ts(t.map,i,r),u=o.node,S=o.start,E=o.end,R=o.collapse,P;if(u.nodeType==3){for(var U=0;U<4;U++){for(;S&&Ir(t.line.text.charAt(o.coverStart+S));)--S;for(;o.coverStart+E<o.coverEnd&&Ir(t.line.text.charAt(o.coverStart+E));)++E;if(L&&g<9&&S==0&&E==o.coverEnd-o.coverStart?P=u.parentNode.getBoundingClientRect():P=kc(J(u,S,E).getClientRects(),r),P.left||P.right||S==0)break;E=S,S=S-1,R="right"}L&&g<11&&(P=Tc(e.display.measure,P))}else{S>0&&(R=r="right");var Y;e.options.lineWrapping&&(Y=u.getClientRects()).length>1?P=Y[r=="right"?Y.length-1:0]:P=u.getBoundingClientRect()}if(L&&g<9&&!S&&(!P||!P.left&&!P.right)){var te=u.parentNode.getClientRects()[0];te?P={left:te.left,right:te.left+Ui(e.display),top:te.top,bottom:te.bottom}:P=Es}for(var ee=P.top-t.rect.top,re=P.bottom-t.rect.top,le=(ee+re)/2,de=t.view.measure.heights,pe=0;pe<de.length-1&&!(le<de[pe]);pe++);var ye=pe?de[pe-1]:0,ve=de[pe],be={left:(R=="right"?P.right:P.left)-t.rect.left,right:(R=="left"?P.left:P.right)-t.rect.left,top:ye,bottom:ve};return!P.left&&!P.right&&(be.bogus=!0),e.options.singleCursorHeightPerLine||(be.rtop=ee,be.rbottom=re),be}function Tc(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Jt(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function As(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ms(e){e.display.externalMeasure=null,M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)As(e.display.view[t])}function un(e){Ms(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Rs(){return y&&l?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ds(){return y&&l?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Lo(e){var t=Je(e),i=t.widgets,r=0;if(i)for(var o=0;o<i.length;++o)i[o].above&&(r+=cn(i[o]));return r}function jn(e,t,i,r,o){if(!o){var u=Lo(t);i.top+=u,i.bottom+=u}if(r=="line")return i;r||(r="local");var S=Ct(t);if(r=="local"?S+=Nn(e.display):S-=e.display.viewOffset,r=="page"||r=="window"){var E=e.display.lineSpace.getBoundingClientRect();S+=E.top+(r=="window"?0:Ds());var R=E.left+(r=="window"?0:Rs());i.left+=R,i.right+=R}return i.top+=S,i.bottom+=S,i}function Os(e,t,i){if(i=="div")return t;var r=t.left,o=t.top;if(i=="page")r-=Rs(),o-=Ds();else if(i=="local"||!i){var u=e.display.sizer.getBoundingClientRect();r+=u.left,o+=u.top}var S=e.display.lineSpace.getBoundingClientRect();return{left:r-S.left,top:o-S.top}}function Un(e,t,i,r,o){return r||(r=Ce(e.doc,t.line)),jn(e,r,ks(e,r,t.ch,o),i)}function gr(e,t,i,r,o,u){r=r||Ce(e.doc,t.line),o||(o=Ni(e,r));function S(re,le){var de=Or(e,o,re,le?"right":"left",u);return le?de.left=de.right:de.right=de.left,jn(e,r,de,i)}var E=ut(r,e.doc.direction),R=t.ch,P=t.sticky;if(R>=r.text.length?(R=r.text.length,P="before"):R<=0&&(R=0,P="after"),!E)return S(P=="before"?R-1:R,P=="before");function U(re,le,de){var pe=E[le],ye=pe.level==1;return S(de?re-1:re,ye!=de)}var Y=Ne(E,R,P),te=gt,ee=U(R,Y,P=="before");return te!=null&&(ee.other=U(R,te,P!="before")),ee}function Bs(e,t){var i=0;t=_e(e.doc,t),e.options.lineWrapping||(i=Ui(e.display)*t.ch);var r=Ce(e.doc,t.line),o=Ct(r)+Nn(e.display);return{left:i,right:i,top:o,bottom:o+r.height}}function xo(e,t,i,r,o){var u=ue(e,t,i);return u.xRel=o,r&&(u.outside=r),u}function ko(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return xo(r.first,0,null,-1,-1);var o=Ot(r,i),u=r.first+r.size-1;if(o>u)return xo(r.first+r.size-1,Ce(r,u).text.length,null,1,1);t<0&&(t=0);for(var S=Ce(r,o);;){var E=Ac(e,S,o,t,i),R=Pt(S,E.ch+(E.xRel>0||E.outside>0?1:0));if(!R)return E;var P=R.find(1);if(P.line==o)return P;S=Ce(r,o=P.line)}}function Ps(e,t,i,r){r-=Lo(t);var o=t.text.length,u=jt(function(S){return Or(e,i,S-1).bottom<=r},o,0);return o=jt(function(S){return Or(e,i,S).top>r},u,o),{begin:u,end:o}}function Is(e,t,i,r){i||(i=Ni(e,t));var o=jn(e,t,Or(e,i,r),"line").top;return Ps(e,t,i,o)}function Eo(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function Ac(e,t,i,r,o){o-=Ct(t);var u=Ni(e,t),S=Lo(t),E=0,R=t.text.length,P=!0,U=ut(t,e.doc.direction);if(U){var Y=(e.options.lineWrapping?Rc:Mc)(e,t,i,u,U,r,o);P=Y.level!=1,E=P?Y.from:Y.to-1,R=P?Y.to:Y.from-1}var te=null,ee=null,re=jt(function(Te){var xe=Or(e,u,Te);return xe.top+=S,xe.bottom+=S,Eo(xe,r,o,!1)?(xe.top<=o&&xe.left<=r&&(te=Te,ee=xe),!0):!1},E,R),le,de,pe=!1;if(ee){var ye=r-ee.left<ee.right-r,ve=ye==P;re=te+(ve?0:1),de=ve?"after":"before",le=ye?ee.left:ee.right}else{!P&&(re==R||re==E)&&re++,de=re==0?"after":re==t.text.length?"before":Or(e,u,re-(P?1:0)).bottom+S<=o==P?"after":"before";var be=gr(e,ue(i,re,de),"line",t,u);le=be.left,pe=o<be.top?-1:o>=be.bottom?1:0}return re=ti(t.text,re,1),xo(i,re,de,pe,r-le)}function Mc(e,t,i,r,o,u,S){var E=jt(function(Y){var te=o[Y],ee=te.level!=1;return Eo(gr(e,ue(i,ee?te.to:te.from,ee?"before":"after"),"line",t,r),u,S,!0)},0,o.length-1),R=o[E];if(E>0){var P=R.level!=1,U=gr(e,ue(i,P?R.from:R.to,P?"after":"before"),"line",t,r);Eo(U,u,S,!0)&&U.top>S&&(R=o[E-1])}return R}function Rc(e,t,i,r,o,u,S){var E=Ps(e,t,r,S),R=E.begin,P=E.end;/\s/.test(t.text.charAt(P-1))&&P--;for(var U=null,Y=null,te=0;te<o.length;te++){var ee=o[te];if(!(ee.from>=P||ee.to<=R)){var re=ee.level!=1,le=Or(e,r,re?Math.min(P,ee.to)-1:Math.max(R,ee.from)).right,de=le<u?u-le+1e9:le-u;(!U||Y>de)&&(U=ee,Y=de)}}return U||(U=o[o.length-1]),U.from<R&&(U={from:R,to:U.to,level:U.level}),U.to>P&&(U={from:U.from,to:P,level:U.level}),U}var Si;function ji(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Si==null){Si=B("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Si.appendChild(document.createTextNode("x")),Si.appendChild(B("br"));Si.appendChild(document.createTextNode("x"))}x(e.measure,Si);var i=Si.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),M(e.measure),i||1}function Ui(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=B("span","xxxxxxxxxx"),i=B("pre",[t],"CodeMirror-line-like");x(e.measure,i);var r=t.getBoundingClientRect(),o=(r.right-r.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function To(e){for(var t=e.display,i={},r={},o=t.gutters.clientLeft,u=t.gutters.firstChild,S=0;u;u=u.nextSibling,++S){var E=e.display.gutterSpecs[S].className;i[E]=u.offsetLeft+u.clientLeft+o,r[E]=u.clientWidth}return{fixedPos:Ao(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Ao(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Hs(e){var t=ji(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/Ui(e.display)-3);return function(o){if(St(e.doc,o))return 0;var u=0;if(o.widgets)for(var S=0;S<o.widgets.length;S++)o.widgets[S].height&&(u+=o.widgets[S].height);return i?u+(Math.ceil(o.text.length/r)||1)*t:u+t}}function Mo(e){var t=e.doc,i=Hs(e);t.iter(function(r){var o=i(r);o!=r.height&&nt(r,o)})}function Ci(e,t,i,r){var o=e.display;if(!i&&$t(t).getAttribute("cm-not-content")=="true")return null;var u,S,E=o.lineSpace.getBoundingClientRect();try{u=t.clientX-E.left,S=t.clientY-E.top}catch{return null}var R=ko(e,u,S),P;if(r&&R.xRel>0&&(P=Ce(e.doc,R.line).text).length==R.ch){var U=me(P,P.length,e.options.tabSize)-P.length;R=ue(R.line,Math.max(0,Math.round((u-Ls(e.display).left)/Ui(e.display))-U))}return R}function wi(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function It(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var o=e.display;if(r&&i<o.viewTo&&(o.updateLineNumbers==null||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)nr&&vr(e.doc,t)<o.viewTo&&oi(e);else if(i<=o.viewFrom)nr&&yi(e.doc,i+r)>o.viewFrom?oi(e):(o.viewFrom+=r,o.viewTo+=r);else if(t<=o.viewFrom&&i>=o.viewTo)oi(e);else if(t<=o.viewFrom){var u=zn(e,i,i+r,1);u?(o.view=o.view.slice(u.index),o.viewFrom=u.lineN,o.viewTo+=r):oi(e)}else if(i>=o.viewTo){var S=zn(e,t,t,-1);S?(o.view=o.view.slice(0,S.index),o.viewTo=S.lineN):oi(e)}else{var E=zn(e,t,t,-1),R=zn(e,i,i+r,1);E&&R?(o.view=o.view.slice(0,E.index).concat(Wn(e,E.lineN,R.lineN)).concat(o.view.slice(R.index)),o.viewTo+=r):oi(e)}var P=o.externalMeasured;P&&(i<P.lineN?P.lineN+=r:t<P.lineN+P.size&&(o.externalMeasured=null))}function ni(e,t,i){e.curOp.viewChanged=!0;var r=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var u=r.view[wi(e,t)];if(u.node!=null){var S=u.changes||(u.changes=[]);he(S,i)==-1&&S.push(i)}}}function oi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function zn(e,t,i,r){var o=wi(e,t),u,S=e.display.view;if(!nr||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var E=e.display.viewFrom,R=0;R<o;R++)E+=S[R].size;if(E!=t){if(r>0){if(o==S.length-1)return null;u=E+S[o].size-t,o++}else u=E-t;t+=u,i+=u}for(;vr(e.doc,i)!=i;){if(o==(r<0?0:S.length-1))return null;i+=r*S[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:i}}function Dc(e,t,i){var r=e.display,o=r.view;o.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Wn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Wn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(wi(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Wn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,wi(e,i)))),r.viewTo=i}function Fs(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var o=t[r];!o.hidden&&(!o.node||o.changes)&&++i}return i}function fn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ws(e,t){t===void 0&&(t=!0);var i=e.doc,r={},o=r.cursors=document.createDocumentFragment(),u=r.selection=document.createDocumentFragment(),S=e.options.$customCursor;S&&(t=!0);for(var E=0;E<i.sel.ranges.length;E++)if(!(!t&&E==i.sel.primIndex)){var R=i.sel.ranges[E];if(!(R.from().line>=e.display.viewTo||R.to().line<e.display.viewFrom)){var P=R.empty();if(S){var U=S(e,R);U&&Ro(e,U,o)}else(P||e.options.showCursorWhenSelecting)&&Ro(e,R.head,o);P||Oc(e,R,u)}}return r}function Ro(e,t,i){var r=gr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=i.appendChild(B("div","\xA0","CodeMirror-cursor"));if(o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var u=Un(e,t,"div",null,null),S=u.right-u.left;o.style.width=(S>0?S:e.defaultCharWidth())+"px"}if(r.other){var E=i.appendChild(B("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));E.style.display="",E.style.left=r.other.left+"px",E.style.top=r.other.top+"px",E.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function qn(e,t){return e.top-t.top||e.left-t.left}function Oc(e,t,i){var r=e.display,o=e.doc,u=document.createDocumentFragment(),S=Ls(e.display),E=S.left,R=Math.max(r.sizerWidth,bi(e)-r.sizer.offsetLeft)-S.right,P=o.direction=="ltr";function U(ve,be,Te,xe){be<0&&(be=0),be=Math.round(be),xe=Math.round(xe),u.appendChild(B("div",null,"CodeMirror-selected","position: absolute; left: "+ve+`px;
                             top: `+be+"px; width: "+(Te??R-ve)+`px;
                             height: `+(xe-be)+"px"))}function Y(ve,be,Te){var xe=Ce(o,ve),Re=xe.text.length,We,lt;function qe(Qe,Wt){return Un(e,ue(ve,Qe),"div",xe,Wt)}function Gt(Qe,Wt,pt){var it=Is(e,xe,null,Qe),et=Wt=="ltr"==(pt=="after")?"left":"right",Xe=pt=="after"?it.begin:it.end-(/\s/.test(xe.text.charAt(it.end-1))?2:1);return qe(Xe,et)[et]}var Ft=ut(xe,o.direction);return di(Ft,be||0,Te??Re,function(Qe,Wt,pt,it){var et=pt=="ltr",Xe=qe(Qe,et?"left":"right"),Nt=qe(Wt-1,et?"right":"left"),tn=be==null&&Qe==0,fi=Te==null&&Wt==Re,Lt=it==0,Br=!Ft||it==Ft.length-1;if(Nt.top-Xe.top<=3){var ct=(P?tn:fi)&&Lt,is=(P?fi:tn)&&Br,$r=ct?E:(et?Xe:Nt).left,Ti=is?R:(et?Nt:Xe).right;U($r,Xe.top,Ti-$r,Xe.bottom)}else{var Ai,Tt,rn,ns;et?(Ai=P&&tn&&Lt?E:Xe.left,Tt=P?R:Gt(Qe,pt,"before"),rn=P?E:Gt(Wt,pt,"after"),ns=P&&fi&&Br?R:Nt.right):(Ai=P?Gt(Qe,pt,"before"):E,Tt=!P&&tn&&Lt?R:Xe.right,rn=!P&&fi&&Br?E:Nt.left,ns=P?Gt(Wt,pt,"after"):R),U(Ai,Xe.top,Tt-Ai,Xe.bottom),Xe.bottom<Nt.top&&U(E,Xe.bottom,null,Nt.top),U(rn,Nt.top,ns-rn,Nt.bottom)}(!We||qn(Xe,We)<0)&&(We=Xe),qn(Nt,We)<0&&(We=Nt),(!lt||qn(Xe,lt)<0)&&(lt=Xe),qn(Nt,lt)<0&&(lt=Nt)}),{start:We,end:lt}}var te=t.from(),ee=t.to();if(te.line==ee.line)Y(te.line,te.ch,ee.ch);else{var re=Ce(o,te.line),le=Ce(o,ee.line),de=Je(re)==Je(le),pe=Y(te.line,te.ch,de?re.text.length+1:null).end,ye=Y(ee.line,de?0:null,ee.ch).start;de&&(pe.top<ye.top-2?(U(pe.right,pe.top,null,pe.bottom),U(E,ye.top,ye.left,ye.bottom)):U(pe.right,pe.top,ye.left-pe.right,pe.bottom)),pe.bottom<ye.top&&U(E,pe.bottom,null,ye.top)}i.appendChild(u)}function Do(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||zi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ns(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Bo(e))}function Oo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&zi(e))},100)}function Bo(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Ae(e,"focus",e,t),e.state.focused=!0,N(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),v&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Do(e))}function zi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ae(e,"blur",e,t),e.state.focused=!1,D(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Kn(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),o=t.lineDiv.getBoundingClientRect().top,u=0,S=0;S<t.view.length;S++){var E=t.view[S],R=e.options.lineWrapping,P=void 0,U=0;if(!E.hidden){if(o+=E.line.height,L&&g<8){var Y=E.node.offsetTop+E.node.offsetHeight;P=Y-i,i=Y}else{var te=E.node.getBoundingClientRect();P=te.bottom-te.top,!R&&E.text.firstChild&&(U=E.text.firstChild.getBoundingClientRect().right-te.left-1)}var ee=E.line.height-P;if((ee>.005||ee<-.005)&&(o<r&&(u-=ee),nt(E.line,P),js(E.line),E.rest))for(var re=0;re<E.rest.length;re++)js(E.rest[re]);if(U>e.display.sizerWidth){var le=Math.ceil(U/Ui(e.display));le>e.display.maxLineLength&&(e.display.maxLineLength=le,e.display.maxLine=E.line,e.display.maxLineChanged=!0)}}}Math.abs(u)>2&&(t.scroller.scrollTop+=u)}function js(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Gn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Nn(e));var o=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,u=Ot(t,r),S=Ot(t,o);if(i&&i.ensure){var E=i.ensure.from.line,R=i.ensure.to.line;E<u?(u=E,S=Ot(t,Ct(Ce(t,E))+e.wrapper.clientHeight)):Math.min(R,t.lastLine())>=S&&(u=Ot(t,Ct(Ce(t,R))-e.wrapper.clientHeight),S=R)}return{from:u,to:Math.max(S,u+1)}}function Bc(e,t){if(!je(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),o=null;if(t.top+r.top<0?o=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),o!=null&&!d){var u=B("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Nn(e.display))+`px;
                         height: `+(t.bottom-t.top+Dr(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(u),u.scrollIntoView(o),e.display.lineSpace.removeChild(u)}}}function Pc(e,t,i,r){r==null&&(r=0);var o;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?ue(t.line,t.ch+1,"before"):t,t=t.ch?ue(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var u=0;u<5;u++){var S=!1,E=gr(e,t),R=!i||i==t?E:gr(e,i);o={left:Math.min(E.left,R.left),top:Math.min(E.top,R.top)-r,right:Math.max(E.left,R.left),bottom:Math.max(E.bottom,R.bottom)+r};var P=Po(e,o),U=e.doc.scrollTop,Y=e.doc.scrollLeft;if(P.scrollTop!=null&&(dn(e,P.scrollTop),Math.abs(e.doc.scrollTop-U)>1&&(S=!0)),P.scrollLeft!=null&&(Li(e,P.scrollLeft),Math.abs(e.doc.scrollLeft-Y)>1&&(S=!0)),!S)break}return o}function Ic(e,t){var i=Po(e,t);i.scrollTop!=null&&dn(e,i.scrollTop),i.scrollLeft!=null&&Li(e,i.scrollLeft)}function Po(e,t){var i=e.display,r=ji(e.display);t.top<0&&(t.top=0);var o=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,u=Co(e),S={};t.bottom-t.top>u&&(t.bottom=t.top+u);var E=e.doc.height+So(i),R=t.top<r,P=t.bottom>E-r;if(t.top<o)S.scrollTop=R?0:t.top;else if(t.bottom>o+u){var U=Math.min(t.top,(P?E:t.bottom)-u);U!=o&&(S.scrollTop=U)}var Y=e.options.fixedGutter?0:i.gutters.offsetWidth,te=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-Y,ee=bi(e)-i.gutters.offsetWidth,re=t.right-t.left>ee;return re&&(t.right=t.left+ee),t.left<10?S.scrollLeft=0:t.left<te?S.scrollLeft=Math.max(0,t.left+Y-(re?0:10)):t.right>ee+te-3&&(S.scrollLeft=t.right+(re?0:10)-ee),S}function Io(e,t){t!=null&&(Xn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function qi(e){Xn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function hn(e,t,i){(t!=null||i!=null)&&Xn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function Hc(e,t){Xn(e),e.curOp.scrollToPos=t}function Xn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=Bs(e,t.from),r=Bs(e,t.to);Us(e,i,r,t.margin)}}function Us(e,t,i,r){var o=Po(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});hn(e,o.scrollLeft,o.scrollTop)}function dn(e,t){Math.abs(e.doc.scrollTop-t)<2||(W||Fo(e,{top:t}),zs(e,t,!0),W&&Fo(e),gn(e,100))}function zs(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Li(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Ys(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function pn(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+So(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Dr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var xi=function(e,t,i){this.cm=i;var r=this.vert=B("div",[B("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=B("div",[B("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=o.tabIndex=-1,e(r),e(o),ke(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ke(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,L&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};xi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var o=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var u=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+u)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},xi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},xi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},xi.prototype.zeroWidthHack=function(){var e=n&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new we,this.disableVert=new we},xi.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var o=e.getBoundingClientRect(),u=i=="vert"?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1);u!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},xi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var vn=function(){};vn.prototype.update=function(){return{bottom:0,right:0}},vn.prototype.setScrollLeft=function(){},vn.prototype.setScrollTop=function(){},vn.prototype.clear=function(){};function Ki(e,t){t||(t=pn(e));var i=e.display.barWidth,r=e.display.barHeight;qs(e,t);for(var o=0;o<4&&i!=e.display.barWidth||r!=e.display.barHeight;o++)i!=e.display.barWidth&&e.options.lineWrapping&&Kn(e),qs(e,pn(e)),i=e.display.barWidth,r=e.display.barHeight}function qs(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var Ks={native:xi,null:vn};function Gs(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ks[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ke(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?Li(e,t):dn(e,t)},e),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)}var Fc=0;function ki(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Fc,markArrays:null},vc(e.curOp)}function Ei(e){var t=e.curOp;t&&_c(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;Wc(i)})}function Wc(e){for(var t=e.ops,i=0;i<t.length;i++)Nc(t[i]);for(var r=0;r<t.length;r++)jc(t[r]);for(var o=0;o<t.length;o++)Uc(t[o]);for(var u=0;u<t.length;u++)zc(t[u]);for(var S=0;S<t.length;S++)qc(t[S])}function Nc(e){var t=e.cm,i=t.display;Gc(t),e.updateMaxLine&&mi(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Yn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function jc(e){e.updatedDisplay=e.mustUpdate&&Ho(e.cm,e.update)}function Uc(e){var t=e.cm,i=t.display;e.updatedDisplay&&Kn(t),e.barMeasure=pn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ks(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Dr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-bi(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function zc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Li(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==H();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ki(t,e.barMeasure),e.updatedDisplay&&No(t,e.barMeasure),e.selectionChanged&&Do(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Ns(e.cm)}function qc(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&Xs(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&zs(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Li(t,e.scrollLeft,!0,!0),e.scrollToPos){var o=Pc(t,_e(r,e.scrollToPos.from),_e(r,e.scrollToPos.to),e.scrollToPos.margin);Bc(t,o)}var u=e.maybeHiddenMarkers,S=e.maybeUnhiddenMarkers;if(u)for(var E=0;E<u.length;++E)u[E].lines.length||Ae(u[E],"hide");if(S)for(var R=0;R<S.length;++R)S[R].lines.length&&Ae(S[R],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ae(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kt(e,t){if(e.curOp)return t();ki(e);try{return t()}finally{Ei(e)}}function st(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ki(e);try{return t.apply(e,arguments)}finally{Ei(e)}}}function Et(e){return function(){if(this.curOp)return e.apply(this,arguments);ki(this);try{return e.apply(this,arguments)}finally{Ei(this)}}}function at(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ki(t);try{return e.apply(this,arguments)}finally{Ei(t)}}}function gn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,ae(Kc,e))}function Kc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=Ur(e,t.highlightFrontier),o=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(u){if(r.line>=e.display.viewFrom){var S=u.styles,E=u.text.length>e.options.maxHighlightLength?dt(t.mode,r.state):null,R=Ri(e,u,r,!0);E&&(r.state=E),u.styles=R.styles;var P=u.styleClasses,U=R.classes;U?u.styleClasses=U:P&&(u.styleClasses=null);for(var Y=!S||S.length!=u.styles.length||P!=U&&(!P||!U||P.bgClass!=U.bgClass||P.textClass!=U.textClass),te=0;!Y&&te<S.length;++te)Y=S[te]!=u.styles[te];Y&&o.push(r.line),u.stateAfter=r.save(),r.nextLine()}else u.text.length<=e.options.maxHighlightLength&&pi(e,u.text,r),u.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return gn(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),o.length&&Kt(e,function(){for(var u=0;u<o.length;u++)ni(e,o[u],"text")})}}var Yn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Gn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=bi(e),this.force=i,this.dims=To(e),this.events=[]};Yn.prototype.signal=function(e,t){Ke(e,t)&&this.events.push(arguments)},Yn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ae.apply(null,this.events[e])};function Gc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Dr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Dr(e)+"px",t.scrollbarsClipped=!0)}function Xc(e){if(e.hasFocus())return null;var t=H();if(!t||!j(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&j(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function Yc(e){if(!(!e||!e.activeElt||e.activeElt==H())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&j(document.body,e.anchorNode)&&j(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function Ho(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return oi(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&Fs(e)==0)return!1;Vs(e)&&(oi(e),t.dims=To(e));var o=r.first+r.size,u=Math.max(t.visible.from-e.options.viewportMargin,r.first),S=Math.min(o,t.visible.to+e.options.viewportMargin);i.viewFrom<u&&u-i.viewFrom<20&&(u=Math.max(r.first,i.viewFrom)),i.viewTo>S&&i.viewTo-S<20&&(S=Math.min(o,i.viewTo)),nr&&(u=vr(e.doc,u),S=yi(e.doc,S));var E=u!=i.viewFrom||S!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Dc(e,u,S),i.viewOffset=Ct(Ce(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var R=Fs(e);if(!E&&R==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var P=Xc(e);return R>4&&(i.lineDiv.style.display="none"),Vc(e,i.updateLineNumbers,t.dims),R>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,Yc(P),M(i.cursorDiv),M(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,E&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,gn(e,400)),i.updateLineNumbers=null,!0}function Xs(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==bi(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+So(e.display)-Co(e),i.top)}),t.visible=Gn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Gn(e.display,e.doc,i));if(!Ho(e,t))break;Kn(e);var o=pn(e);fn(e),Ki(e,o),No(e,o),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Fo(e,t){var i=new Yn(e,t);if(Ho(e,i)){Kn(e),Xs(e,i);var r=pn(e);fn(e),Ki(e,r),No(e,r),i.finish()}}function Vc(e,t,i){var r=e.display,o=e.options.lineNumbers,u=r.lineDiv,S=u.firstChild;function E(re){var le=re.nextSibling;return v&&n&&e.display.currentWheelTarget==re?re.style.display="none":re.parentNode.removeChild(re),le}for(var R=r.view,P=r.viewFrom,U=0;U<R.length;U++){var Y=R[U];if(!Y.hidden)if(!Y.node||Y.node.parentNode!=u){var te=Cc(e,Y,P,i);u.insertBefore(te,S)}else{for(;S!=Y.node;)S=E(S);var ee=o&&t!=null&&t<=P&&Y.lineNumber;Y.changes&&(he(Y.changes,"gutter")>-1&&(ee=!1),ms(e,Y,P,i)),ee&&(M(Y.lineNumber),Y.lineNumber.appendChild(document.createTextNode(Tr(e.options,P)))),S=Y.node.nextSibling}P+=Y.size}for(;S;)S=E(S)}function Wo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",ot(e,"gutterChanged",e)}function No(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Dr(e)+"px"}function Ys(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=Ao(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,u=r+"px",S=0;S<i.length;S++)if(!i[S].hidden){e.options.fixedGutter&&(i[S].gutter&&(i[S].gutter.style.left=u),i[S].gutterBackground&&(i[S].gutterBackground.style.left=u));var E=i[S].alignable;if(E)for(var R=0;R<E.length;R++)E[R].style.left=u}e.options.fixedGutter&&(t.gutters.style.left=r+o+"px")}}function Vs(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=Tr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var o=r.measure.appendChild(B("div",[B("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),u=o.firstChild.offsetWidth,S=o.offsetWidth-u;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(u,r.lineGutter.offsetWidth-S)+1,r.lineNumWidth=r.lineNumInnerWidth+S,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Wo(e.display),!0}return!1}function jo(e,t){for(var i=[],r=!1,o=0;o<e.length;o++){var u=e[o],S=null;if(typeof u!="string"&&(S=u.style,u=u.className),u=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:u,style:S})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Zs(e){var t=e.gutters,i=e.gutterSpecs;M(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var o=i[r],u=o.className,S=o.style,E=t.appendChild(B("div",null,"CodeMirror-gutter "+u));S&&(E.style.cssText=S),u=="CodeMirror-linenumbers"&&(e.lineGutter=E,E.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",Wo(e)}function _n(e){Zs(e.display),It(e),Ys(e)}function Zc(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=B("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=B("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=T("div",null,"CodeMirror-code"),o.selectionDiv=B("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=B("div",null,"CodeMirror-cursors"),o.measure=B("div",null,"CodeMirror-measure"),o.lineMeasure=B("div",null,"CodeMirror-measure"),o.lineSpace=T("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=T("div",[o.lineSpace],"CodeMirror-lines");o.mover=B("div",[u],null,"position: relative"),o.sizer=B("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=B("div",null,null,"position: absolute; height: "+F+"px; width: 1px;"),o.gutters=B("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=B("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=B("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),L&&g<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),!v&&!(W&&a)&&(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=jo(r.gutters,r.lineNumbers),Zs(o),i.init(o)}var Vn=0,Vr=null;L?Vr=-.53:W?Vr=15:y?Vr=-.7:w&&(Vr=-1/3);function $s(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function $c(e){var t=$s(e);return t.x*=Vr,t.y*=Vr,t}function Js(e,t){var i=$s(t),r=i.x,o=i.y,u=Vr;t.deltaMode===0&&(r=t.deltaX,o=t.deltaY,u=1);var S=e.display,E=S.scroller,R=E.scrollWidth>E.clientWidth,P=E.scrollHeight>E.clientHeight;if(!!(r&&R||o&&P)){if(o&&n&&v){e:for(var U=t.target,Y=S.view;U!=E;U=U.parentNode)for(var te=0;te<Y.length;te++)if(Y[te].node==U){e.display.currentWheelTarget=U;break e}}if(r&&!W&&!m&&u!=null){o&&P&&dn(e,Math.max(0,E.scrollTop+o*u)),Li(e,Math.max(0,E.scrollLeft+r*u)),(!o||o&&P)&&Ye(t),S.wheelStartX=null;return}if(o&&u!=null){var ee=o*u,re=e.doc.scrollTop,le=re+S.wrapper.clientHeight;ee<0?re=Math.max(0,re+ee-50):le=Math.min(e.doc.height,le+ee+50),Fo(e,{top:re,bottom:le})}Vn<20&&t.deltaMode!==0&&(S.wheelStartX==null?(S.wheelStartX=E.scrollLeft,S.wheelStartY=E.scrollTop,S.wheelDX=r,S.wheelDY=o,setTimeout(function(){if(S.wheelStartX!=null){var de=E.scrollLeft-S.wheelStartX,pe=E.scrollTop-S.wheelStartY,ye=pe&&S.wheelDY&&pe/S.wheelDY||de&&S.wheelDX&&de/S.wheelDX;S.wheelStartX=S.wheelStartY=null,!!ye&&(Vr=(Vr*Vn+ye)/(Vn+1),++Vn)}},200)):(S.wheelDX+=r,S.wheelDY+=o))}}var tr=function(e,t){this.ranges=e,this.primIndex=t};tr.prototype.primary=function(){return this.ranges[this.primIndex]},tr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!X(i.anchor,r.anchor)||!X(i.head,r.head))return!1}return!0},tr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Pe(oe(this.ranges[t].anchor),oe(this.ranges[t].head));return new tr(e,this.primIndex)},tr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},tr.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(I(t,r.from())>=0&&I(e,r.to())<=0)return i}return-1};var Pe=function(e,t){this.anchor=e,this.head=t};Pe.prototype.from=function(){return Me(this.anchor,this.head)},Pe.prototype.to=function(){return fe(this.anchor,this.head)},Pe.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _r(e,t,i){var r=e&&e.options.selectionsMayTouch,o=t[i];t.sort(function(te,ee){return I(te.from(),ee.from())}),i=he(t,o);for(var u=1;u<t.length;u++){var S=t[u],E=t[u-1],R=I(E.to(),S.from());if(r&&!S.empty()?R>0:R>=0){var P=Me(E.from(),S.from()),U=fe(E.to(),S.to()),Y=E.empty()?S.from()==S.head:E.from()==E.head;u<=i&&--i,t.splice(--u,2,new Pe(Y?U:P,Y?P:U))}}return new tr(t,i)}function si(e,t){return new tr([new Pe(e,t||e)],0)}function ai(e){return e.text?ue(e.from.line+e.text.length-1,Ee(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Qs(e,t){if(I(e,t.from)<0)return e;if(I(e,t.to)<=0)return ai(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ai(t).ch-t.to.ch),ue(i,r)}function Uo(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var o=e.sel.ranges[r];i.push(new Pe(Qs(o.anchor,t),Qs(o.head,t)))}return _r(e.cm,i,e.sel.primIndex)}function ea(e,t,i){return e.line==t.line?ue(i.line,e.ch-t.ch+i.ch):ue(i.line+(e.line-t.line),e.ch)}function Jc(e,t,i){for(var r=[],o=ue(e.first,0),u=o,S=0;S<t.length;S++){var E=t[S],R=ea(E.from,o,u),P=ea(ai(E),o,u);if(o=E.to,u=P,i=="around"){var U=e.sel.ranges[S],Y=I(U.head,U.anchor)<0;r[S]=new Pe(Y?P:R,Y?R:P)}else r[S]=new Pe(R,R)}return new tr(r,e.sel.primIndex)}function zo(e){e.doc.mode=pr(e.options,e.doc.modeOption),yn(e)}function yn(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,gn(e,100),e.state.modeGen++,e.curOp&&It(e)}function ta(e,t){return t.from.ch==0&&t.to.ch==0&&Ee(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function qo(e,t,i,r){function o(ye){return i?i[ye]:null}function u(ye,ve,be){Xr(ye,ve,be,r),ot(ye,"change",ye,t)}function S(ye,ve){for(var be=[],Te=ye;Te<ve;++Te)be.push(new qt(P[Te],o(Te),r));return be}var E=t.from,R=t.to,P=t.text,U=Ce(e,E.line),Y=Ce(e,R.line),te=Ee(P),ee=o(P.length-1),re=R.line-E.line;if(t.full)e.insert(0,S(0,P.length)),e.remove(P.length,e.size-P.length);else if(ta(e,t)){var le=S(0,P.length-1);u(Y,Y.text,ee),re&&e.remove(E.line,re),le.length&&e.insert(E.line,le)}else if(U==Y)if(P.length==1)u(U,U.text.slice(0,E.ch)+te+U.text.slice(R.ch),ee);else{var de=S(1,P.length-1);de.push(new qt(te+U.text.slice(R.ch),ee,r)),u(U,U.text.slice(0,E.ch)+P[0],o(0)),e.insert(E.line+1,de)}else if(P.length==1)u(U,U.text.slice(0,E.ch)+P[0]+Y.text.slice(R.ch),o(0)),e.remove(E.line+1,re);else{u(U,U.text.slice(0,E.ch)+P[0],o(0)),u(Y,te+Y.text.slice(R.ch),ee);var pe=S(1,P.length-1);re>1&&e.remove(E.line+1,re-1),e.insert(E.line+1,pe)}ot(e,"change",e,t)}function li(e,t,i){function r(o,u,S){if(o.linked)for(var E=0;E<o.linked.length;++E){var R=o.linked[E];if(R.doc!=u){var P=S&&R.sharedHist;i&&!P||(t(R.doc,P),r(R.doc,o,P))}}}r(e,null,!0)}function ra(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Mo(e),zo(e),ia(e),e.options.direction=t.direction,e.options.lineWrapping||mi(e),e.options.mode=t.modeOption,It(e)}function ia(e){(e.doc.direction=="rtl"?N:D)(e.display.lineDiv,"CodeMirror-rtl")}function Qc(e){Kt(e,function(){ia(e),It(e)})}function Zn(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ko(e,t){var i={from:oe(t.from),to:ai(t),text:Dt(e,t.from,t.to)};return sa(e,i,t.from.line,t.to.line+1),li(e,function(r){return sa(r,i,t.from.line,t.to.line+1)},!0),i}function na(e){for(;e.length;){var t=Ee(e);if(t.ranges)e.pop();else break}}function eu(e,t){if(t)return na(e.done),Ee(e.done);if(e.done.length&&!Ee(e.done).ranges)return Ee(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ee(e.done)}function oa(e,t,i,r){var o=e.history;o.undone.length=0;var u=+new Date,S,E;if((o.lastOp==r||o.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&o.lastModTime>u-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(S=eu(o,o.lastOp==r)))E=Ee(S.changes),I(t.from,t.to)==0&&I(t.from,E.to)==0?E.to=ai(t):S.changes.push(Ko(e,t));else{var R=Ee(o.done);for((!R||!R.ranges)&&$n(e.sel,o.done),S={changes:[Ko(e,t)],generation:o.generation},o.done.push(S);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(i),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=u,o.lastOp=o.lastSelOp=r,o.lastOrigin=o.lastSelOrigin=t.origin,E||Ae(e,"historyAdded")}function tu(e,t,i,r){var o=t.charAt(0);return o=="*"||o=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ru(e,t,i,r){var o=e.history,u=r&&r.origin;i==o.lastSelOp||u&&o.lastSelOrigin==u&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==u||tu(e,u,Ee(o.done),t))?o.done[o.done.length-1]=t:$n(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=u,o.lastSelOp=i,r&&r.clearRedo!==!1&&na(o.undone)}function $n(e,t){var i=Ee(t);i&&i.ranges&&i.equals(e)||t.push(e)}function sa(e,t,i,r){var o=t["spans_"+e.id],u=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(S){S.markedSpans&&((o||(o=t["spans_"+e.id]={}))[u]=S.markedSpans),++u})}function iu(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function nu(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],o=0;o<t.text.length;++o)r.push(iu(i[o]));return r}function aa(e,t){var i=nu(e,t),r=Ve(e,t);if(!i)return r;if(!r)return i;for(var o=0;o<i.length;++o){var u=i[o],S=r[o];if(u&&S){e:for(var E=0;E<S.length;++E){for(var R=S[E],P=0;P<u.length;++P)if(u[P].marker==R.marker)continue e;u.push(R)}}else S&&(i[o]=S)}return i}function Gi(e,t,i){for(var r=[],o=0;o<e.length;++o){var u=e[o];if(u.ranges){r.push(i?tr.prototype.deepCopy.call(u):u);continue}var S=u.changes,E=[];r.push({changes:E});for(var R=0;R<S.length;++R){var P=S[R],U=void 0;if(E.push({from:P.from,to:P.to,text:P.text}),t)for(var Y in P)(U=Y.match(/^spans_(\d+)$/))&&he(t,Number(U[1]))>-1&&(Ee(E)[Y]=P[Y],delete P[Y])}}return r}function Go(e,t,i,r){if(r){var o=e.anchor;if(i){var u=I(t,o)<0;u!=I(i,o)<0?(o=t,t=i):u!=I(t,i)<0&&(t=i)}return new Pe(o,t)}else return new Pe(i||t,t)}function Jn(e,t,i,r,o){o==null&&(o=e.cm&&(e.cm.display.shift||e.extend)),wt(e,new tr([Go(e.sel.primary(),t,i,o)],0),r)}function la(e,t,i){for(var r=[],o=e.cm&&(e.cm.display.shift||e.extend),u=0;u<e.sel.ranges.length;u++)r[u]=Go(e.sel.ranges[u],t[u],null,o);var S=_r(e.cm,r,e.sel.primIndex);wt(e,S,i)}function Xo(e,t,i,r){var o=e.sel.ranges.slice(0);o[t]=i,wt(e,_r(e.cm,o,e.sel.primIndex),r)}function ca(e,t,i,r){wt(e,si(t,i),r)}function ou(e,t,i){var r={ranges:t.ranges,update:function(o){this.ranges=[];for(var u=0;u<o.length;u++)this.ranges[u]=new Pe(_e(e,o[u].anchor),_e(e,o[u].head))},origin:i&&i.origin};return Ae(e,"beforeSelectionChange",e,r),e.cm&&Ae(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?_r(e.cm,r.ranges,r.ranges.length-1):t}function ua(e,t,i){var r=e.history.done,o=Ee(r);o&&o.ranges?(r[r.length-1]=t,Qn(e,t,i)):wt(e,t,i)}function wt(e,t,i){Qn(e,t,i),ru(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Qn(e,t,i){(Ke(e,"beforeSelectionChange")||e.cm&&Ke(e.cm,"beforeSelectionChange"))&&(t=ou(e,t,i));var r=i&&i.bias||(I(t.primary().head,e.sel.primary().head)<0?-1:1);fa(e,da(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&qi(e.cm)}function fa(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,fr(e.cm)),ot(e,"cursorActivity",e))}function ha(e){fa(e,da(e,e.sel,null,!1))}function da(e,t,i,r){for(var o,u=0;u<t.ranges.length;u++){var S=t.ranges[u],E=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[u],R=eo(e,S.anchor,E&&E.anchor,i,r),P=eo(e,S.head,E&&E.head,i,r);(o||R!=S.anchor||P!=S.head)&&(o||(o=t.ranges.slice(0,u)),o[u]=new Pe(R,P))}return o?_r(e.cm,o,t.primIndex):t}function Xi(e,t,i,r,o){var u=Ce(e,t.line);if(u.markedSpans)for(var S=0;S<u.markedSpans.length;++S){var E=u.markedSpans[S],R=E.marker,P="selectLeft"in R?!R.selectLeft:R.inclusiveLeft,U="selectRight"in R?!R.selectRight:R.inclusiveRight;if((E.from==null||(P?E.from<=t.ch:E.from<t.ch))&&(E.to==null||(U?E.to>=t.ch:E.to>t.ch))){if(o&&(Ae(R,"beforeCursorEnter"),R.explicitlyCleared))if(u.markedSpans){--S;continue}else break;if(!R.atomic)continue;if(i){var Y=R.find(r<0?1:-1),te=void 0;if((r<0?U:P)&&(Y=pa(e,Y,-r,Y&&Y.line==t.line?u:null)),Y&&Y.line==t.line&&(te=I(Y,i))&&(r<0?te<0:te>0))return Xi(e,Y,t,r,o)}var ee=R.find(r<0?-1:1);return(r<0?P:U)&&(ee=pa(e,ee,r,ee.line==t.line?u:null)),ee?Xi(e,ee,t,r,o):null}}return t}function eo(e,t,i,r,o){var u=r||1,S=Xi(e,t,i,u,o)||!o&&Xi(e,t,i,u,!0)||Xi(e,t,i,-u,o)||!o&&Xi(e,t,i,-u,!0);return S||(e.cantEdit=!0,ue(e.first,0))}function pa(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?_e(e,ue(t.line-1)):null:i>0&&t.ch==(r||Ce(e,t.line)).text.length?t.line<e.first+e.size-1?ue(t.line+1,0):null:new ue(t.line,t.ch+i)}function va(e){e.setSelection(ue(e.firstLine(),0),ue(e.lastLine()),G)}function ga(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(o,u,S,E){o&&(r.from=_e(e,o)),u&&(r.to=_e(e,u)),S&&(r.text=S),E!==void 0&&(r.origin=E)}),Ae(e,"beforeChange",e,r),e.cm&&Ae(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Yi(e,t,i){if(e.cm){if(!e.cm.curOp)return st(e.cm,Yi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"))&&(t=ga(e,t,!0),!t))){var r=Hn&&!i&&sr(e,t.from,t.to);if(r)for(var o=r.length-1;o>=0;--o)_a(e,{from:r[o].from,to:r[o].to,text:o?[""]:t.text,origin:t.origin});else _a(e,t)}}function _a(e,t){if(!(t.text.length==1&&t.text[0]==""&&I(t.from,t.to)==0)){var i=Uo(e,t);oa(e,t,i,e.cm?e.cm.curOp.id:NaN),mn(e,t,i,Ve(e,t));var r=[];li(e,function(o,u){!u&&he(r,o.history)==-1&&(Sa(o.history,t),r.push(o.history)),mn(o,t,null,Ve(o,t))})}}function to(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var o=e.history,u,S=e.sel,E=t=="undo"?o.done:o.undone,R=t=="undo"?o.undone:o.done,P=0;P<E.length&&(u=E[P],!(i?u.ranges&&!u.equals(e.sel):!u.ranges));P++);if(P!=E.length){for(o.lastOrigin=o.lastSelOrigin=null;;)if(u=E.pop(),u.ranges){if($n(u,R),i&&!u.equals(e.sel)){wt(e,u,{clearRedo:!1});return}S=u}else if(r){E.push(u);return}else break;var U=[];$n(S,R),R.push({changes:U,generation:o.generation}),o.generation=u.generation||++o.maxGeneration;for(var Y=Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"),te=function(le){var de=u.changes[le];if(de.origin=t,Y&&!ga(e,de,!1))return E.length=0,{};U.push(Ko(e,de));var pe=le?Uo(e,de):Ee(E);mn(e,de,pe,aa(e,de)),!le&&e.cm&&e.cm.scrollIntoView({from:de.from,to:ai(de)});var ye=[];li(e,function(ve,be){!be&&he(ye,ve.history)==-1&&(Sa(ve.history,de),ye.push(ve.history)),mn(ve,de,null,aa(ve,de))})},ee=u.changes.length-1;ee>=0;--ee){var re=te(ee);if(re)return re.v}}}}function ya(e,t){if(t!=0&&(e.first+=t,e.sel=new tr(He(e.sel.ranges,function(o){return new Pe(ue(o.anchor.line+t,o.anchor.ch),ue(o.head.line+t,o.head.ch))}),e.sel.primIndex),e.cm)){It(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)ni(e.cm,r,"gutter")}}function mn(e,t,i,r){if(e.cm&&!e.cm.curOp)return st(e.cm,mn)(e,t,i,r);if(t.to.line<e.first){ya(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);ya(e,o),t={from:ue(e.first,0),to:ue(t.to.line+o,t.to.ch),text:[Ee(t.text)],origin:t.origin}}var u=e.lastLine();t.to.line>u&&(t={from:t.from,to:ue(u,Ce(e,u).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Dt(e,t.from,t.to),i||(i=Uo(e,t)),e.cm?su(e.cm,t,r):qo(e,t,r),Qn(e,i,G),e.cantEdit&&eo(e,ue(e.firstLine(),0))&&(e.cantEdit=!1)}}function su(e,t,i){var r=e.doc,o=e.display,u=t.from,S=t.to,E=!1,R=u.line;e.options.lineWrapping||(R=Oe(Je(Ce(r,u.line))),r.iter(R,S.line+1,function(ee){if(ee==o.maxLine)return E=!0,!0})),r.sel.contains(t.from,t.to)>-1&&fr(e),qo(r,t,i,Hs(e)),e.options.lineWrapping||(r.iter(R,u.line+t.text.length,function(ee){var re=ii(ee);re>o.maxLineLength&&(o.maxLine=ee,o.maxLineLength=re,o.maxLineChanged=!0,E=!1)}),E&&(e.curOp.updateMaxLine=!0)),In(r,u.line),gn(e,400);var P=t.text.length-(S.line-u.line)-1;t.full?It(e):u.line==S.line&&t.text.length==1&&!ta(e.doc,t)?ni(e,u.line,"text"):It(e,u.line,S.line+1,P);var U=Ke(e,"changes"),Y=Ke(e,"change");if(Y||U){var te={from:u,to:S,text:t.text,removed:t.removed,origin:t.origin};Y&&ot(e,"change",e,te),U&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(te)}e.display.selForContextMenu=null}function Vi(e,t,i,r,o){var u;r||(r=i),I(r,i)<0&&(u=[r,i],i=u[0],r=u[1]),typeof t=="string"&&(t=e.splitLines(t)),Yi(e,{from:i,to:r,text:t,origin:o})}function ma(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ba(e,t,i,r){for(var o=0;o<e.length;++o){var u=e[o],S=!0;if(u.ranges){u.copied||(u=e[o]=u.deepCopy(),u.copied=!0);for(var E=0;E<u.ranges.length;E++)ma(u.ranges[E].anchor,t,i,r),ma(u.ranges[E].head,t,i,r);continue}for(var R=0;R<u.changes.length;++R){var P=u.changes[R];if(i<P.from.line)P.from=ue(P.from.line+r,P.from.ch),P.to=ue(P.to.line+r,P.to.ch);else if(t<=P.to.line){S=!1;break}}S||(e.splice(0,o+1),o=0)}}function Sa(e,t){var i=t.from.line,r=t.to.line,o=t.text.length-(r-i)-1;ba(e.done,i,r,o),ba(e.undone,i,r,o)}function bn(e,t,i,r){var o=t,u=t;return typeof t=="number"?u=Ce(e,De(e,t)):o=Oe(t),o==null?null:(r(u,o)&&e.cm&&ni(e.cm,o,i),u)}function Sn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}Sn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var o=this.lines[i];this.height-=o.height,mo(o),ot(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function Cn(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var o=e[r];t+=o.chunkSize(),i+=o.height,o.parent=this}this.size=t,this.height=i,this.parent=null}Cn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var u=Math.min(t,o-e),S=r.height;if(r.removeInner(e,u),this.height-=S-r.height,o==u&&(this.children.splice(i--,1),r.parent=null),(t-=u)==0)break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Sn))){var E=[];this.collapse(E),this.children=[new Sn(E)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var o=this.children[r],u=o.chunkSize();if(e<=u){if(o.insertInner(e,t,i),o.lines&&o.lines.length>50){for(var S=o.lines.length%25+25,E=S;E<o.lines.length;){var R=new Sn(o.lines.slice(E,E+=25));o.height-=R.height,this.children.splice(++r,0,R),R.parent=this}o.lines=o.lines.slice(0,S),this.maybeSpill()}break}e-=u}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Cn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var o=he(e.parent.children,e);e.parent.children.splice(o+1,0,i)}else{var r=new Cn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var o=this.children[r],u=o.chunkSize();if(e<u){var S=Math.min(t,u-e);if(o.iterN(e,S,i))return!0;if((t-=S)==0)break;e=0}else e-=u}}};var wn=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};wn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=Oe(i);if(!(r==null||!t)){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(i.widgets=null);var u=cn(this);nt(i,Math.max(0,i.height-u)),e&&(Kt(e,function(){Ca(e,i,-u),ni(e,r,"widget")}),ot(e,"lineWidgetCleared",e,this,r))}},wn.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var o=cn(this)-t;!o||(St(this.doc,r)||nt(r,r.height+o),i&&Kt(i,function(){i.curOp.forceUpdate=!0,Ca(i,r,o),ot(i,"lineWidgetChanged",i,e,Oe(r))}))},Mt(wn);function Ca(e,t,i){Ct(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Io(e,i)}function au(e,t,i,r){var o=new wn(e,i,r),u=e.cm;return u&&o.noHScroll&&(u.display.alignWidgets=!0),bn(e,t,"widget",function(S){var E=S.widgets||(S.widgets=[]);if(o.insertAt==null?E.push(o):E.splice(Math.min(E.length,Math.max(0,o.insertAt)),0,o),o.line=S,u&&!St(e,S)){var R=Ct(S)<e.scrollTop;nt(S,S.height+cn(o)),R&&Io(u,o.height),u.curOp.forceUpdate=!0}return!0}),u&&ot(u,"lineWidgetAdded",u,o,typeof t=="number"?t:Oe(t)),o}var wa=0,ci=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++wa};ci.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ki(e),Ke(this,"clear")){var i=this.find();i&&ot(this,"clear",i.from,i.to)}for(var r=null,o=null,u=0;u<this.lines.length;++u){var S=this.lines[u],E=ne(S.markedSpans,this);e&&!this.collapsed?ni(e,Oe(S),"text"):e&&(E.to!=null&&(o=Oe(S)),E.from!=null&&(r=Oe(S))),S.markedSpans=ie(S.markedSpans,E),E.from==null&&this.collapsed&&!St(this.doc,S)&&e&&nt(S,ji(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var R=0;R<this.lines.length;++R){var P=Je(this.lines[R]),U=ii(P);U>e.display.maxLineLength&&(e.display.maxLine=P,e.display.maxLineLength=U,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&It(e,r,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ha(e.doc)),e&&ot(e,"markerCleared",e,this,r,o),t&&Ei(e),this.parent&&this.parent.clear()}},ci.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,o=0;o<this.lines.length;++o){var u=this.lines[o],S=ne(u.markedSpans,this);if(S.from!=null&&(i=ue(t?u:Oe(u),S.from),e==-1))return i;if(S.to!=null&&(r=ue(t?u:Oe(u),S.to),e==1))return r}return i&&{from:i,to:r}},ci.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||Kt(r,function(){var o=t.line,u=Oe(t.line),S=wo(r,u);if(S&&(As(S),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!St(i.doc,o)&&i.height!=null){var E=i.height;i.height=null;var R=cn(i)-E;R&&nt(o,o.height+R)}ot(r,"markerChanged",r,e)})},ci.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||he(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ci.prototype.detachLine=function(e){if(this.lines.splice(he(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Mt(ci);function Zi(e,t,i,r,o){if(r&&r.shared)return lu(e,t,i,r,o);if(e.cm&&!e.cm.curOp)return st(e.cm,Zi)(e,t,i,r,o);var u=new ci(e,o),S=I(t,i);if(r&&se(r,u,!1),S>0||S==0&&u.clearWhenEmpty!==!1)return u;if(u.replacedWith&&(u.collapsed=!0,u.widgetNode=T("span",[u.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||u.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(u.widgetNode.insertLeft=!0)),u.collapsed){if(Ge(e,t.line,t,i,u)||t.line!=i.line&&Ge(e,i.line,t,i,u))throw new Error("Inserting collapsed marker partially overlapping an existing one");yo()}u.addToHistory&&oa(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var E=t.line,R=e.cm,P;if(e.iter(E,i.line+1,function(Y){R&&u.collapsed&&!R.options.lineWrapping&&Je(Y)==R.display.maxLine&&(P=!0),u.collapsed&&E!=t.line&&nt(Y,0),or(Y,new Fi(u,E==t.line?t.ch:null,E==i.line?i.ch:null),e.cm&&e.cm.curOp),++E}),u.collapsed&&e.iter(t.line,i.line+1,function(Y){St(e,Y)&&nt(Y,0)}),u.clearOnEnter&&ke(u,"beforeCursorEnter",function(){return u.clear()}),u.readOnly&&(Fn(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),u.collapsed&&(u.id=++wa,u.atomic=!0),R){if(P&&(R.curOp.updateMaxLine=!0),u.collapsed)It(R,t.line,i.line+1);else if(u.className||u.startStyle||u.endStyle||u.css||u.attributes||u.title)for(var U=t.line;U<=i.line;U++)ni(R,U,"text");u.atomic&&ha(R.doc),ot(R,"markerAdded",R,u)}return u}var Ln=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Ln.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ot(this,"clear")}},Ln.prototype.find=function(e,t){return this.primary.find(e,t)},Mt(Ln);function lu(e,t,i,r,o){r=se(r),r.shared=!1;var u=[Zi(e,t,i,r,o)],S=u[0],E=r.widgetNode;return li(e,function(R){E&&(r.widgetNode=E.cloneNode(!0)),u.push(Zi(R,_e(R,t),_e(R,i),r,o));for(var P=0;P<R.linked.length;++P)if(R.linked[P].isParent)return;S=Ee(u)}),new Ln(u,S)}function La(e){return e.findMarks(ue(e.first,0),e.clipPos(ue(e.lastLine())),function(t){return t.parent})}function cu(e,t){for(var i=0;i<t.length;i++){var r=t[i],o=r.find(),u=e.clipPos(o.from),S=e.clipPos(o.to);if(I(u,S)){var E=Zi(e,u,S,r.primary,r.primary.type);r.markers.push(E),E.parent=r}}}function uu(e){for(var t=function(r){var o=e[r],u=[o.primary.doc];li(o.primary.doc,function(R){return u.push(R)});for(var S=0;S<o.markers.length;S++){var E=o.markers[S];he(u,E.doc)==-1&&(E.parent=null,o.markers.splice(S--,1))}},i=0;i<e.length;i++)t(i)}var fu=0,Ht=function(e,t,i,r,o){if(!(this instanceof Ht))return new Ht(e,t,i,r,o);i==null&&(i=0),Cn.call(this,[new Sn([new qt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var u=ue(i,0);this.sel=si(u),this.history=new Zn(null),this.id=++fu,this.modeOption=t,this.lineSep=r,this.direction=o=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),qo(this,{from:u,to:u,text:e}),wt(this,si(u),G)};Ht.prototype=vt(Cn.prototype,{constructor:Ht,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Er(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:at(function(e){var t=ue(this.first,0),i=this.first+this.size-1;Yi(this,{from:t,to:ue(i,Ce(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&hn(this.cm,0,0),wt(this,si(t),G)}),replaceRange:function(e,t,i,r){t=_e(this,t),i=i?_e(this,i):t,Vi(this,e,t,i,r)},getRange:function(e,t,i){var r=Dt(this,_e(this,e),_e(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ir(this,e))return Ce(this,e)},getLineNumber:function(e){return Oe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Ce(this,e)),Je(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return _e(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:at(function(e,t,i){ca(this,_e(this,typeof e=="number"?ue(e,t||0):e),null,i)}),setSelection:at(function(e,t,i){ca(this,_e(this,e),_e(this,t||e),i)}),extendSelection:at(function(e,t,i){Jn(this,_e(this,e),t&&_e(this,t),i)}),extendSelections:at(function(e,t){la(this,yt(this,e),t)}),extendSelectionsBy:at(function(e,t){var i=He(this.sel.ranges,e);la(this,yt(this,i),t)}),setSelections:at(function(e,t,i){if(!!e.length){for(var r=[],o=0;o<e.length;o++)r[o]=new Pe(_e(this,e[o].anchor),_e(this,e[o].head||e[o].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),wt(this,_r(this.cm,r,t),i)}}),addSelection:at(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Pe(_e(this,e),_e(this,t||e))),wt(this,_r(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var o=Dt(this,t[r].from(),t[r].to());i=i?i.concat(o):o}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var o=Dt(this,i[r].from(),i[r].to());e!==!1&&(o=o.join(e||this.lineSeparator())),t[r]=o}return t},replaceSelection:function(e,t,i){for(var r=[],o=0;o<this.sel.ranges.length;o++)r[o]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:at(function(e,t,i){for(var r=[],o=this.sel,u=0;u<o.ranges.length;u++){var S=o.ranges[u];r[u]={from:S.from(),to:S.to(),text:this.splitLines(e[u]),origin:i}}for(var E=t&&t!="end"&&Jc(this,r,t),R=r.length-1;R>=0;R--)Yi(this,r[R]);E?ua(this,E):this.cm&&qi(this.cm)}),undo:at(function(){to(this,"undo")}),redo:at(function(){to(this,"redo")}),undoSelection:at(function(){to(this,"undo",!0)}),redoSelection:at(function(){to(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new Zn(this.history),li(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(e){var t=this.history=new Zn(this.history);t.done=Gi(e.done.slice(0),null,!0),t.undone=Gi(e.undone.slice(0),null,!0)},setGutterMarker:at(function(e,t,i){return bn(this,e,"gutter",function(r){var o=r.gutterMarkers||(r.gutterMarkers={});return o[t]=i,!i&&ei(o)&&(r.gutterMarkers=null),!0})}),clearGutter:at(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&bn(t,i,"gutter",function(){return i.gutterMarkers[e]=null,ei(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!ir(this,e)||(t=e,e=Ce(this,e),!e))return null}else if(t=Oe(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:at(function(e,t,i){return bn(this,e,t=="gutter"?"gutter":"class",function(r){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[o])r[o]=i;else{if(O(i).test(r[o]))return!1;r[o]+=" "+i}return!0})}),removeLineClass:at(function(e,t,i){return bn(this,e,t=="gutter"?"gutter":"class",function(r){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",u=r[o];if(u)if(i==null)r[o]=null;else{var S=u.match(O(i));if(!S)return!1;var E=S.index+S[0].length;r[o]=u.slice(0,S.index)+(!S.index||E==u.length?"":" ")+u.slice(E)||null}else return!1;return!0})}),addLineWidget:at(function(e,t,i){return au(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Zi(this,_e(this,e),_e(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=_e(this,e),Zi(this,e,e,i,"bookmark")},findMarksAt:function(e){e=_e(this,e);var t=[],i=Ce(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];(o.from==null||o.from<=e.ch)&&(o.to==null||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,i){e=_e(this,e),t=_e(this,t);var r=[],o=e.line;return this.iter(e.line,t.line+1,function(u){var S=u.markedSpans;if(S)for(var E=0;E<S.length;E++){var R=S[E];!(R.to!=null&&o==e.line&&e.ch>=R.to||R.from==null&&o!=e.line||R.from!=null&&o==t.line&&R.from>=t.ch)&&(!i||i(R.marker))&&r.push(R.marker.parent||R.marker)}++o}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(o){var u=o.text.length+r;if(u>e)return t=e,!0;e-=u,++i}),_e(this,ue(i,t))},indexFromPos:function(e){e=_e(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new Ht(Er(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new Ht(Er(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],cu(r,La(this)),r},unlinkDoc:function(e){if(e instanceof Ue&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),uu(La(this));break}}if(e.history==this.history){var r=[e.id];li(e,function(o){return r.push(o.id)},!0),e.history=new Zn(null),e.history.done=Gi(this.history.done,r),e.history.undone=Gi(this.history.undone,r)}},iterLinkedDocs:function(e){li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):wr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:at(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Qc(this.cm))})}),Ht.prototype.eachLine=Ht.prototype.iter;var xa=0;function hu(e){var t=this;if(ka(t),!(je(t,e)||Yr(t.display,e))){Ye(e),L&&(xa=+new Date);var i=Ci(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var o=r.length,u=Array(o),S=0,E=function(){++S==o&&st(t,function(){i=_e(t.doc,i);var ee={from:i,to:i,text:t.doc.splitLines(u.filter(function(re){return re!=null}).join(t.doc.lineSeparator())),origin:"paste"};Yi(t.doc,ee),ua(t.doc,si(_e(t.doc,i),_e(t.doc,ai(ee))))})()},R=function(ee,re){if(t.options.allowDropFileTypes&&he(t.options.allowDropFileTypes,ee.type)==-1){E();return}var le=new FileReader;le.onerror=function(){return E()},le.onload=function(){var de=le.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(de)){E();return}u[re]=de,E()},le.readAsText(ee)},P=0;P<r.length;P++)R(r[P],P);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var U=e.dataTransfer.getData("Text");if(U){var Y;if(t.state.draggingText&&!t.state.draggingText.copy&&(Y=t.listSelections()),Qn(t.doc,si(i,i)),Y)for(var te=0;te<Y.length;++te)Vi(t.doc,"",Y[te].anchor,Y[te].head,"drag");t.replaceSelection(U,"around","paste"),t.display.input.focus()}}catch{}}}}function du(e,t){if(L&&(!e.state.draggingText||+new Date-xa<100)){rr(t);return}if(!(je(e,t)||Yr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!w)){var i=B("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),m&&i.parentNode.removeChild(i)}}function pu(e,t){var i=Ci(e,t);if(!!i){var r=document.createDocumentFragment();Ro(e,i,r),e.display.dragCursor||(e.display.dragCursor=B("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),x(e.display.dragCursor,r)}}function ka(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ea(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var o=t[r].CodeMirror;o&&i.push(o)}i.length&&i[0].operation(function(){for(var u=0;u<i.length;u++)e(i[u])})}}var Ta=!1;function vu(){Ta||(gu(),Ta=!0)}function gu(){var e;ke(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,Ea(_u)},100))}),ke(window,"blur",function(){return Ea(zi)})}function _u(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var ui={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},xn=0;xn<10;xn++)ui[xn+48]=ui[xn+96]=String(xn);for(var ro=65;ro<=90;ro++)ui[ro]=String.fromCharCode(ro);for(var kn=1;kn<=12;kn++)ui[kn+111]=ui[kn+63235]="F"+kn;var Zr={};Zr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Zr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Zr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Zr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Zr.default=n?Zr.macDefault:Zr.pcDefault;function yu(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,o,u,S=0;S<t.length-1;S++){var E=t[S];if(/^(cmd|meta|m)$/i.test(E))u=!0;else if(/^a(lt)?$/i.test(E))i=!0;else if(/^(c|ctrl|control)$/i.test(E))r=!0;else if(/^s(hift)?$/i.test(E))o=!0;else throw new Error("Unrecognized modifier name: "+E)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),u&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function mu(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var o=He(i.split(" "),yu),u=0;u<o.length;u++){var S=void 0,E=void 0;u==o.length-1?(E=o.join(" "),S=r):(E=o.slice(0,u+1).join(" "),S="...");var R=t[E];if(!R)t[E]=S;else if(R!=S)throw new Error("Inconsistent bindings for "+E)}delete e[i]}for(var P in t)e[P]=t[P];return e}function $i(e,t,i,r){t=io(t);var o=t.call?t.call(e,r):t[e];if(o===!1)return"nothing";if(o==="...")return"multi";if(o!=null&&i(o))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return $i(e,t.fallthrough,i,r);for(var u=0;u<t.fallthrough.length;u++){var S=$i(e,t.fallthrough[u],i,r);if(S)return S}}}function Aa(e){var t=typeof e=="string"?e:ui[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Ma(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(b?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(b?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function Ra(e,t){if(m&&e.keyCode==34&&e.char)return!1;var i=ui[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),Ma(i,e,t))}function io(e){return typeof e=="string"?Zr[e]:e}function Ji(e,t){for(var i=e.doc.sel.ranges,r=[],o=0;o<i.length;o++){for(var u=t(i[o]);r.length&&I(u.from,Ee(r).to)<=0;){var S=r.pop();if(I(S.from,u.from)<0){u.from=S.from;break}}r.push(u)}Kt(e,function(){for(var E=r.length-1;E>=0;E--)Vi(e.doc,"",r[E].from,r[E].to,"+delete");qi(e)})}function Yo(e,t,i){var r=ti(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Vo(e,t,i){var r=Yo(e,t.ch,i);return r==null?null:new ue(t.line,r,i<0?"after":"before")}function Zo(e,t,i,r,o){if(e){t.doc.direction=="rtl"&&(o=-o);var u=ut(i,t.doc.direction);if(u){var S=o<0?Ee(u):u[0],E=o<0==(S.level==1),R=E?"after":"before",P;if(S.level>0||t.doc.direction=="rtl"){var U=Ni(t,i);P=o<0?i.text.length-1:0;var Y=Or(t,U,P).top;P=jt(function(te){return Or(t,U,te).top==Y},o<0==(S.level==1)?S.from:S.to-1,P),R=="before"&&(P=Yo(i,P,1))}else P=o<0?S.to:S.from;return new ue(r,P,R)}}return new ue(r,o<0?i.text.length:0,o<0?"before":"after")}function bu(e,t,i,r){var o=ut(t,e.doc.direction);if(!o)return Vo(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var u=Ne(o,i.ch,i.sticky),S=o[u];if(e.doc.direction=="ltr"&&S.level%2==0&&(r>0?S.to>i.ch:S.from<i.ch))return Vo(t,i,r);var E=function(pe,ye){return Yo(t,pe instanceof ue?pe.ch:pe,ye)},R,P=function(pe){return e.options.lineWrapping?(R=R||Ni(e,t),Is(e,t,R,pe)):{begin:0,end:t.text.length}},U=P(i.sticky=="before"?E(i,-1):i.ch);if(e.doc.direction=="rtl"||S.level==1){var Y=S.level==1==r<0,te=E(i,Y?1:-1);if(te!=null&&(Y?te<=S.to&&te<=U.end:te>=S.from&&te>=U.begin)){var ee=Y?"before":"after";return new ue(i.line,te,ee)}}var re=function(pe,ye,ve){for(var be=function(We,lt){return lt?new ue(i.line,E(We,1),"before"):new ue(i.line,We,"after")};pe>=0&&pe<o.length;pe+=ye){var Te=o[pe],xe=ye>0==(Te.level!=1),Re=xe?ve.begin:E(ve.end,-1);if(Te.from<=Re&&Re<Te.to||(Re=xe?Te.from:E(Te.to,-1),ve.begin<=Re&&Re<ve.end))return be(Re,xe)}},le=re(u+r,r,U);if(le)return le;var de=r>0?U.end:E(U.begin,-1);return de!=null&&!(r>0&&de==t.text.length)&&(le=re(r>0?0:o.length-1,r,P(de)),le)?le:null}var En={selectAll:va,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),G)},killLine:function(e){return Ji(e,function(t){if(t.empty()){var i=Ce(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:ue(t.head.line+1,0)}:{from:t.head,to:ue(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Ji(e,function(t){return{from:ue(t.from().line,0),to:_e(e.doc,ue(t.to().line+1,0))}})},delLineLeft:function(e){return Ji(e,function(t){return{from:ue(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Ji(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Ji(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ue(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ue(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Da(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Oa(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Su(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},$)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},$)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?Oa(e,t.head):r},$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,o=0;o<i.length;o++){var u=i[o].from(),S=me(e.getLine(u.line),u.ch,r);t.push(Be(r-S%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kt(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var o=t[r].head,u=Ce(e.doc,o.line).text;if(u){if(o.ch==u.length&&(o=new ue(o.line,o.ch-1)),o.ch>0)o=new ue(o.line,o.ch+1),e.replaceRange(u.charAt(o.ch-1)+u.charAt(o.ch-2),ue(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var S=Ce(e.doc,o.line-1).text;S&&(o=new ue(o.line,1),e.replaceRange(u.charAt(0)+e.doc.lineSeparator()+S.charAt(S.length-1),ue(o.line-1,S.length-1),o,"+transpose"))}}i.push(new Pe(o,o))}e.setSelections(i)})},newlineAndIndent:function(e){return Kt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);qi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Da(e,t){var i=Ce(e.doc,t),r=Je(i);return r!=i&&(t=Oe(r)),Zo(!0,e,r,t,1)}function Su(e,t){var i=Ce(e.doc,t),r=er(i);return r!=i&&(t=Oe(r)),Zo(!0,e,i,t,-1)}function Oa(e,t){var i=Da(e,t.line),r=Ce(e.doc,i.line),o=ut(r,e.doc.direction);if(!o||o[0].level==0){var u=Math.max(i.ch,r.text.search(/\S/)),S=t.line==i.line&&t.ch<=u&&t.ch;return ue(i.line,S?0:u,i.sticky)}return i}function no(e,t,i){if(typeof t=="string"&&(t=En[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),o=t(e)!=z}finally{e.display.shift=r,e.state.suppressEdits=!1}return o}function Cu(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var o=$i(t,e.state.keyMaps[r],i,e);if(o)return o}return e.options.extraKeys&&$i(t,e.options.extraKeys,i,e)||$i(t,e.options.keyMap,i,e)}var wu=new we;function Tn(e,t,i,r){var o=e.state.keySeq;if(o){if(Aa(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:wu.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),Ba(e,o+" "+t,i,r))return!0}return Ba(e,t,i,r)}function Ba(e,t,i,r){var o=Cu(e,t,r);return o=="multi"&&(e.state.keySeq=t),o=="handled"&&ot(e,"keyHandled",e,t,i),(o=="handled"||o=="multi")&&(Ye(i),Do(e)),!!o}function Pa(e,t){var i=Ra(t,!0);return i?t.shiftKey&&!e.state.keySeq?Tn(e,"Shift-"+i,t,function(r){return no(e,r,!0)})||Tn(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return no(e,r)}):Tn(e,i,t,function(r){return no(e,r)}):!1}function Lu(e,t,i){return Tn(e,"'"+i+"'",t,function(r){return no(e,r,!0)})}var $o=null;function Ia(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=H(),!je(t,e))){L&&g<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=Pa(t,e);m&&($o=r?i:null,!r&&i==88&&!Nr&&(n?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),W&&!n&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&xu(t)}}function xu(e){var t=e.display.lineDiv;N(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(D(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i))}ke(document,"keyup",i),ke(document,"mouseover",i)}function Ha(e){e.keyCode==16&&(this.doc.sel.shift=!1),je(this,e)}function Fa(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Yr(t.display,e)||je(t,e)||e.ctrlKey&&!e.altKey||n&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(m&&i==$o){$o=null,Ye(e);return}if(!(m&&(!e.which||e.which<10)&&Pa(t,e))){var o=String.fromCharCode(r??i);o!="\b"&&(Lu(t,e,o)||t.display.input.onKeyPress(e))}}}var ku=400,Jo=function(e,t,i){this.time=e,this.pos=t,this.button=i};Jo.prototype.compare=function(e,t,i){return this.time+ku>e&&I(t,this.pos)==0&&i==this.button};var An,Mn;function Eu(e,t){var i=+new Date;return Mn&&Mn.compare(i,e,t)?(An=Mn=null,"triple"):An&&An.compare(i,e,t)?(Mn=new Jo(i,e,t),An=null,"double"):(An=new Jo(i,e,t),Mn=null,"single")}function Wa(e){var t=this,i=t.display;if(!(je(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Yr(i,e)){v||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!Qo(t,e)){var r=Ci(t,e),o=Hr(e),u=r?Eu(r,o):"single";window.focus(),o==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&Tu(t,o,r,u,e))&&(o==1?r?Mu(t,r,u,e):$t(e)==i.scroller&&Ye(e):o==2?(r&&Jn(t.doc,r),setTimeout(function(){return i.input.focus()},20)):o==3&&(k?t.display.input.onContextMenu(e):Oo(t)))}}}function Tu(e,t,i,r,o){var u="Click";return r=="double"?u="Double"+u:r=="triple"&&(u="Triple"+u),u=(t==1?"Left":t==2?"Middle":"Right")+u,Tn(e,Ma(u,o),o,function(S){if(typeof S=="string"&&(S=En[S]),!S)return!1;var E=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),E=S(e,i)!=z}finally{e.state.suppressEdits=!1}return E})}function Au(e,t,i){var r=e.getOption("configureMouse"),o=r?r(e,t,i):{};if(o.unit==null){var u=s?i.shiftKey&&i.metaKey:i.altKey;o.unit=u?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(o.extend==null||e.doc.extend)&&(o.extend=e.doc.extend||i.shiftKey),o.addNew==null&&(o.addNew=n?i.metaKey:i.ctrlKey),o.moveOnDrag==null&&(o.moveOnDrag=!(n?i.altKey:i.ctrlKey)),o}function Mu(e,t,i,r){L?setTimeout(ae(Ns,e),0):e.curOp.focus=H();var o=Au(e,i,r),u=e.doc.sel,S;e.options.dragDrop&&Sr&&!e.isReadOnly()&&i=="single"&&(S=u.contains(t))>-1&&(I((S=u.ranges[S]).from(),t)<0||t.xRel>0)&&(I(S.to(),t)>0||t.xRel<0)?Ru(e,r,t,o):Du(e,r,t,o)}function Ru(e,t,i,r){var o=e.display,u=!1,S=st(e,function(P){v&&(o.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Oo(e)),tt(o.wrapper.ownerDocument,"mouseup",S),tt(o.wrapper.ownerDocument,"mousemove",E),tt(o.scroller,"dragstart",R),tt(o.scroller,"drop",S),u||(Ye(P),r.addNew||Jn(e.doc,i,null,null,r.extend),v&&!w||L&&g==9?setTimeout(function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()},20):o.input.focus())}),E=function(P){u=u||Math.abs(t.clientX-P.clientX)+Math.abs(t.clientY-P.clientY)>=10},R=function(){return u=!0};v&&(o.scroller.draggable=!0),e.state.draggingText=S,S.copy=!r.moveOnDrag,ke(o.wrapper.ownerDocument,"mouseup",S),ke(o.wrapper.ownerDocument,"mousemove",E),ke(o.scroller,"dragstart",R),ke(o.scroller,"drop",S),e.state.delayingBlurEvent=!0,setTimeout(function(){return o.input.focus()},20),o.scroller.dragDrop&&o.scroller.dragDrop()}function Na(e,t,i){if(i=="char")return new Pe(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Pe(ue(t.line,0),_e(e.doc,ue(t.line+1,0)));var r=i(e,t);return new Pe(r.from,r.to)}function Du(e,t,i,r){L&&Oo(e);var o=e.display,u=e.doc;Ye(t);var S,E,R=u.sel,P=R.ranges;if(r.addNew&&!r.extend?(E=u.sel.contains(i),E>-1?S=P[E]:S=new Pe(i,i)):(S=u.sel.primary(),E=u.sel.primIndex),r.unit=="rectangle")r.addNew||(S=new Pe(i,i)),i=Ci(e,t,!0,!0),E=-1;else{var U=Na(e,i,r.unit);r.extend?S=Go(S,U.anchor,U.head,r.extend):S=U}r.addNew?E==-1?(E=P.length,wt(u,_r(e,P.concat([S]),E),{scroll:!1,origin:"*mouse"})):P.length>1&&P[E].empty()&&r.unit=="char"&&!r.extend?(wt(u,_r(e,P.slice(0,E).concat(P.slice(E+1)),0),{scroll:!1,origin:"*mouse"}),R=u.sel):Xo(u,E,S,ce):(E=0,wt(u,new tr([S],0),ce),R=u.sel);var Y=i;function te(ve){if(I(Y,ve)!=0)if(Y=ve,r.unit=="rectangle"){for(var be=[],Te=e.options.tabSize,xe=me(Ce(u,i.line).text,i.ch,Te),Re=me(Ce(u,ve.line).text,ve.ch,Te),We=Math.min(xe,Re),lt=Math.max(xe,Re),qe=Math.min(i.line,ve.line),Gt=Math.min(e.lastLine(),Math.max(i.line,ve.line));qe<=Gt;qe++){var Ft=Ce(u,qe).text,Qe=ge(Ft,We,Te);We==lt?be.push(new Pe(ue(qe,Qe),ue(qe,Qe))):Ft.length>Qe&&be.push(new Pe(ue(qe,Qe),ue(qe,ge(Ft,lt,Te))))}be.length||be.push(new Pe(i,i)),wt(u,_r(e,R.ranges.slice(0,E).concat(be),E),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ve)}else{var Wt=S,pt=Na(e,ve,r.unit),it=Wt.anchor,et;I(pt.anchor,it)>0?(et=pt.head,it=Me(Wt.from(),pt.anchor)):(et=pt.anchor,it=fe(Wt.to(),pt.head));var Xe=R.ranges.slice(0);Xe[E]=Ou(e,new Pe(_e(u,it),et)),wt(u,_r(e,Xe,E),ce)}}var ee=o.wrapper.getBoundingClientRect(),re=0;function le(ve){var be=++re,Te=Ci(e,ve,!0,r.unit=="rectangle");if(!!Te)if(I(Te,Y)!=0){e.curOp.focus=H(),te(Te);var xe=Gn(o,u);(Te.line>=xe.to||Te.line<xe.from)&&setTimeout(st(e,function(){re==be&&le(ve)}),150)}else{var Re=ve.clientY<ee.top?-20:ve.clientY>ee.bottom?20:0;Re&&setTimeout(st(e,function(){re==be&&(o.scroller.scrollTop+=Re,le(ve))}),50)}}function de(ve){e.state.selectingText=!1,re=1/0,ve&&(Ye(ve),o.input.focus()),tt(o.wrapper.ownerDocument,"mousemove",pe),tt(o.wrapper.ownerDocument,"mouseup",ye),u.history.lastSelOrigin=null}var pe=st(e,function(ve){ve.buttons===0||!Hr(ve)?de(ve):le(ve)}),ye=st(e,de);e.state.selectingText=ye,ke(o.wrapper.ownerDocument,"mousemove",pe),ke(o.wrapper.ownerDocument,"mouseup",ye)}function Ou(e,t){var i=t.anchor,r=t.head,o=Ce(e.doc,i.line);if(I(i,r)==0&&i.sticky==r.sticky)return t;var u=ut(o);if(!u)return t;var S=Ne(u,i.ch,i.sticky),E=u[S];if(E.from!=i.ch&&E.to!=i.ch)return t;var R=S+(E.from==i.ch==(E.level!=1)?0:1);if(R==0||R==u.length)return t;var P;if(r.line!=i.line)P=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var U=Ne(u,r.ch,r.sticky),Y=U-S||(r.ch-i.ch)*(E.level==1?-1:1);U==R-1||U==R?P=Y<0:P=Y>0}var te=u[R+(P?-1:0)],ee=P==(te.level==1),re=ee?te.from:te.to,le=ee?"after":"before";return i.ch==re&&i.sticky==le?t:new Pe(new ue(i.line,re,le),r)}function ja(e,t,i,r){var o,u;if(t.touches)o=t.touches[0].clientX,u=t.touches[0].clientY;else try{o=t.clientX,u=t.clientY}catch{return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ye(t);var S=e.display,E=S.lineDiv.getBoundingClientRect();if(u>E.bottom||!Ke(e,i))return ft(t);u-=E.top-S.viewOffset;for(var R=0;R<e.display.gutterSpecs.length;++R){var P=S.gutters.childNodes[R];if(P&&P.getBoundingClientRect().right>=o){var U=Ot(e.doc,u),Y=e.display.gutterSpecs[R];return Ae(e,i,e,U,Y.className,t),ft(t)}}}function Qo(e,t){return ja(e,t,"gutterClick",!0)}function Ua(e,t){Yr(e.display,t)||Bu(e,t)||je(e,t,"contextmenu")||k||e.display.input.onContextMenu(t)}function Bu(e,t){return Ke(e,"gutterContextMenu")?ja(e,t,"gutterContextMenu",!1):!1}function za(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),un(e)}var Qi={toString:function(){return"CodeMirror.Init"}},qa={},oo={};function Pu(e){var t=e.optionHandlers;function i(r,o,u,S){e.defaults[r]=o,u&&(t[r]=S?function(E,R,P){P!=Qi&&u(E,R,P)}:u)}e.defineOption=i,e.Init=Qi,i("value","",function(r,o){return r.setValue(o)},!0),i("mode",null,function(r,o){r.doc.modeOption=o,zo(r)},!0),i("indentUnit",2,zo,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){yn(r),un(r),It(r)},!0),i("lineSeparator",null,function(r,o){if(r.doc.lineSep=o,!!o){var u=[],S=r.doc.first;r.doc.iter(function(R){for(var P=0;;){var U=R.text.indexOf(o,P);if(U==-1)break;P=U+o.length,u.push(ue(S,U))}S++});for(var E=u.length-1;E>=0;E--)Vi(r.doc,o,u[E],ue(u[E].line,u[E].ch+o.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,o,u){r.state.specialChars=new RegExp(o.source+(o.test("	")?"":"|	"),"g"),u!=Qi&&r.refresh()}),i("specialCharPlaceholder",uc,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",a?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,o){return r.getInputField().spellcheck=o},!0),i("autocorrect",!1,function(r,o){return r.getInputField().autocorrect=o},!0),i("autocapitalize",!1,function(r,o){return r.getInputField().autocapitalize=o},!0),i("rtlMoveVisually",!c),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){za(r),_n(r)},!0),i("keyMap","default",function(r,o,u){var S=io(o),E=u!=Qi&&io(u);E&&E.detach&&E.detach(r,S),S.attach&&S.attach(r,E||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,Hu,!0),i("gutters",[],function(r,o){r.display.gutterSpecs=jo(o,r.options.lineNumbers),_n(r)},!0),i("fixedGutter",!0,function(r,o){r.display.gutters.style.left=o?Ao(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Ki(r)},!0),i("scrollbarStyle","native",function(r){Gs(r),Ki(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,o){r.display.gutterSpecs=jo(r.options.gutters,o),_n(r)},!0),i("firstLineNumber",1,_n,!0),i("lineNumberFormatter",function(r){return r},_n,!0),i("showCursorWhenSelecting",!1,fn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,o){o=="nocursor"&&(zi(r),r.display.input.blur()),r.display.input.readOnlyChanged(o)}),i("screenReaderLabel",null,function(r,o){o=o===""?null:o,r.display.input.screenReaderLabelChanged(o)}),i("disableInput",!1,function(r,o){o||r.display.input.reset()},!0),i("dragDrop",!0,Iu),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,fn,!0),i("singleCursorHeightPerLine",!0,fn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,yn,!0),i("addModeClass",!1,yn,!0),i("pollInterval",100),i("undoDepth",200,function(r,o){return r.doc.history.undoDepth=o}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,yn,!0),i("moveInputWithCursor",!0,function(r,o){o||r.display.input.resetPosition()}),i("tabindex",null,function(r,o){return r.display.input.getField().tabIndex=o||""}),i("autofocus",null),i("direction","ltr",function(r,o){return r.doc.setDirection(o)},!0),i("phrases",null)}function Iu(e,t,i){var r=i&&i!=Qi;if(!t!=!r){var o=e.display.dragFunctions,u=t?ke:tt;u(e.display.scroller,"dragstart",o.start),u(e.display.scroller,"dragenter",o.enter),u(e.display.scroller,"dragover",o.over),u(e.display.scroller,"dragleave",o.leave),u(e.display.scroller,"drop",o.drop)}}function Hu(e){e.options.lineWrapping?(N(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(D(e.display.wrapper,"CodeMirror-wrap"),mi(e)),Mo(e),It(e),un(e),setTimeout(function(){return Ki(e)},100)}function Ue(e,t){var i=this;if(!(this instanceof Ue))return new Ue(e,t);this.options=t=t?se(t):{},se(qa,t,!1);var r=t.value;typeof r=="string"?r=new Ht(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var o=new Ue.inputStyles[t.inputStyle](this),u=this.display=new Zc(e,r,o,t);u.wrapper.CodeMirror=this,za(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Gs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new we,keySeq:null,specialChars:null},t.autofocus&&!a&&u.input.focus(),L&&g<11&&setTimeout(function(){return i.display.input.reset(!0)},20),Fu(this),vu(),ki(this),this.curOp.forceUpdate=!0,ra(this,r),t.autofocus&&!a||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&Bo(i)},20):zi(this);for(var S in oo)oo.hasOwnProperty(S)&&oo[S](this,t[S],Qi);Vs(this),t.finishInit&&t.finishInit(this);for(var E=0;E<es.length;++E)es[E](this);Ei(this),v&&t.lineWrapping&&getComputedStyle(u.lineDiv).textRendering=="optimizelegibility"&&(u.lineDiv.style.textRendering="auto")}Ue.defaults=qa,Ue.optionHandlers=oo;function Fu(e){var t=e.display;ke(t.scroller,"mousedown",st(e,Wa)),L&&g<11?ke(t.scroller,"dblclick",st(e,function(R){if(!je(e,R)){var P=Ci(e,R);if(!(!P||Qo(e,R)||Yr(e.display,R))){Ye(R);var U=e.findWordAt(P);Jn(e.doc,U.anchor,U.head)}}})):ke(t.scroller,"dblclick",function(R){return je(e,R)||Ye(R)}),ke(t.scroller,"contextmenu",function(R){return Ua(e,R)}),ke(t.input.getField(),"contextmenu",function(R){t.scroller.contains(R.target)||Ua(e,R)});var i,r={end:0};function o(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function u(R){if(R.touches.length!=1)return!1;var P=R.touches[0];return P.radiusX<=1&&P.radiusY<=1}function S(R,P){if(P.left==null)return!0;var U=P.left-R.left,Y=P.top-R.top;return U*U+Y*Y>20*20}ke(t.scroller,"touchstart",function(R){if(!je(e,R)&&!u(R)&&!Qo(e,R)){t.input.ensurePolled(),clearTimeout(i);var P=+new Date;t.activeTouch={start:P,moved:!1,prev:P-r.end<=300?r:null},R.touches.length==1&&(t.activeTouch.left=R.touches[0].pageX,t.activeTouch.top=R.touches[0].pageY)}}),ke(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ke(t.scroller,"touchend",function(R){var P=t.activeTouch;if(P&&!Yr(t,R)&&P.left!=null&&!P.moved&&new Date-P.start<300){var U=e.coordsChar(t.activeTouch,"page"),Y;!P.prev||S(P,P.prev)?Y=new Pe(U,U):!P.prev.prev||S(P,P.prev.prev)?Y=e.findWordAt(U):Y=new Pe(ue(U.line,0),_e(e.doc,ue(U.line+1,0))),e.setSelection(Y.anchor,Y.head),e.focus(),Ye(R)}o()}),ke(t.scroller,"touchcancel",o),ke(t.scroller,"scroll",function(){t.scroller.clientHeight&&(dn(e,t.scroller.scrollTop),Li(e,t.scroller.scrollLeft,!0),Ae(e,"scroll",e))}),ke(t.scroller,"mousewheel",function(R){return Js(e,R)}),ke(t.scroller,"DOMMouseScroll",function(R){return Js(e,R)}),ke(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(R){je(e,R)||rr(R)},over:function(R){je(e,R)||(pu(e,R),rr(R))},start:function(R){return du(e,R)},drop:st(e,hu),leave:function(R){je(e,R)||ka(e)}};var E=t.input.getField();ke(E,"keyup",function(R){return Ha.call(e,R)}),ke(E,"keydown",st(e,Ia)),ke(E,"keypress",st(e,Fa)),ke(E,"focus",function(R){return Bo(e,R)}),ke(E,"blur",function(R){return zi(e,R)})}var es=[];Ue.defineInitHook=function(e){return es.push(e)};function Rn(e,t,i,r){var o=e.doc,u;i==null&&(i="add"),i=="smart"&&(o.mode.indent?u=Ur(e,t).state:i="prev");var S=e.options.tabSize,E=Ce(o,t),R=me(E.text,null,S);E.stateAfter&&(E.stateAfter=null);var P=E.text.match(/^\s*/)[0],U;if(!r&&!/\S/.test(E.text))U=0,i="not";else if(i=="smart"&&(U=o.mode.indent(u,E.text.slice(P.length),E.text),U==z||U>150)){if(!r)return;i="prev"}i=="prev"?t>o.first?U=me(Ce(o,t-1).text,null,S):U=0:i=="add"?U=R+e.options.indentUnit:i=="subtract"?U=R-e.options.indentUnit:typeof i=="number"&&(U=R+i),U=Math.max(0,U);var Y="",te=0;if(e.options.indentWithTabs)for(var ee=Math.floor(U/S);ee;--ee)te+=S,Y+="	";if(te<U&&(Y+=Be(U-te)),Y!=P)return Vi(o,Y,ue(t,0),ue(t,P.length),"+input"),E.stateAfter=null,!0;for(var re=0;re<o.sel.ranges.length;re++){var le=o.sel.ranges[re];if(le.head.line==t&&le.head.ch<P.length){var de=ue(t,P.length);Xo(o,re,new Pe(de,de));break}}}var yr=null;function so(e){yr=e}function ts(e,t,i,r,o){var u=e.doc;e.display.shift=!1,r||(r=u.sel);var S=+new Date-200,E=o=="paste"||e.state.pasteIncoming>S,R=wr(t),P=null;if(E&&r.ranges.length>1)if(yr&&yr.text.join(`
`)==t){if(r.ranges.length%yr.text.length==0){P=[];for(var U=0;U<yr.text.length;U++)P.push(u.splitLines(yr.text[U]))}}else R.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(P=He(R,function(pe){return[pe]}));for(var Y=e.curOp.updateInput,te=r.ranges.length-1;te>=0;te--){var ee=r.ranges[te],re=ee.from(),le=ee.to();ee.empty()&&(i&&i>0?re=ue(re.line,re.ch-i):e.state.overwrite&&!E?le=ue(le.line,Math.min(Ce(u,le.line).text.length,le.ch+Ee(R).length)):E&&yr&&yr.lineWise&&yr.text.join(`
`)==R.join(`
`)&&(re=le=ue(re.line,0)));var de={from:re,to:le,text:P?P[te%P.length]:R,origin:o||(E?"paste":e.state.cutIncoming>S?"cut":"+input")};Yi(e.doc,de),ot(e,"inputRead",e,de)}t&&!E&&Ga(e,t),qi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=Y),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ka(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Kt(t,function(){return ts(t,i,0,null,"paste")}),!0}function Ga(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var o=i.ranges[r];if(!(o.head.ch>100||r&&i.ranges[r-1].head.line==o.head.line)){var u=e.getModeAt(o.head),S=!1;if(u.electricChars){for(var E=0;E<u.electricChars.length;E++)if(t.indexOf(u.electricChars.charAt(E))>-1){S=Rn(e,o.head.line,"smart");break}}else u.electricInput&&u.electricInput.test(Ce(e.doc,o.head.line).text.slice(0,o.head.ch))&&(S=Rn(e,o.head.line,"smart"));S&&ot(e,"electricInput",e,o.head.line)}}}function Xa(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var o=e.doc.sel.ranges[r].head.line,u={anchor:ue(o,0),head:ue(o+1,0)};i.push(u),t.push(e.getRange(u.anchor,u.head))}return{text:t,ranges:i}}function Ya(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Va(){var e=B("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=B("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return v?e.style.width="1000px":e.setAttribute("wrap","off"),_&&(e.style.border="1px solid black"),Ya(e),t}function Wu(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,o){var u=this.options,S=u[r];u[r]==o&&r!="mode"||(u[r]=o,t.hasOwnProperty(r)&&st(this,t[r])(this,o,S),Ae(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,o){this.state.keyMaps[o?"push":"unshift"](io(r))},removeKeyMap:function(r){for(var o=this.state.keyMaps,u=0;u<o.length;++u)if(o[u]==r||o[u].name==r)return o.splice(u,1),!0},addOverlay:Et(function(r,o){var u=r.token?r:e.getMode(this.options,r);if(u.startState)throw new Error("Overlays may not be stateful.");Se(this.state.overlays,{mode:u,modeSpec:r,opaque:o&&o.opaque,priority:o&&o.priority||0},function(S){return S.priority}),this.state.modeGen++,It(this)}),removeOverlay:Et(function(r){for(var o=this.state.overlays,u=0;u<o.length;++u){var S=o[u].modeSpec;if(S==r||typeof r=="string"&&S.name==r){o.splice(u,1),this.state.modeGen++,It(this);return}}}),indentLine:Et(function(r,o,u){typeof o!="string"&&typeof o!="number"&&(o==null?o=this.options.smartIndent?"smart":"prev":o=o?"add":"subtract"),ir(this.doc,r)&&Rn(this,r,o,u)}),indentSelection:Et(function(r){for(var o=this.doc.sel.ranges,u=-1,S=0;S<o.length;S++){var E=o[S];if(E.empty())E.head.line>u&&(Rn(this,E.head.line,r,!0),u=E.head.line,S==this.doc.sel.primIndex&&qi(this));else{var R=E.from(),P=E.to(),U=Math.max(u,R.line);u=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var Y=U;Y<u;++Y)Rn(this,Y,r);var te=this.doc.sel.ranges;R.ch==0&&o.length==te.length&&te[S].from().ch>0&&Xo(this.doc,S,new Pe(R,te[S].to()),G)}}}),getTokenAt:function(r,o){return Pi(this,r,o)},getLineTokens:function(r,o){return Pi(this,ue(r),o,!0)},getTokenTypeAt:function(r){r=_e(this.doc,r);var o=Di(this,Ce(this.doc,r.line)),u=0,S=(o.length-1)/2,E=r.ch,R;if(E==0)R=o[2];else for(;;){var P=u+S>>1;if((P?o[P*2-1]:0)>=E)S=P;else if(o[P*2+1]<E)u=P+1;else{R=o[P*2+2];break}}var U=R?R.indexOf("overlay "):-1;return U<0?R:U==0?null:R.slice(0,U-1)},getModeAt:function(r){var o=this.doc.mode;return o.innerMode?e.innerMode(o,this.getTokenAt(r).state).mode:o},getHelper:function(r,o){return this.getHelpers(r,o)[0]},getHelpers:function(r,o){var u=[];if(!i.hasOwnProperty(o))return u;var S=i[o],E=this.getModeAt(r);if(typeof E[o]=="string")S[E[o]]&&u.push(S[E[o]]);else if(E[o])for(var R=0;R<E[o].length;R++){var P=S[E[o][R]];P&&u.push(P)}else E.helperType&&S[E.helperType]?u.push(S[E.helperType]):S[E.name]&&u.push(S[E.name]);for(var U=0;U<S._global.length;U++){var Y=S._global[U];Y.pred(E,this)&&he(u,Y.val)==-1&&u.push(Y.val)}return u},getStateAfter:function(r,o){var u=this.doc;return r=De(u,r??u.first+u.size-1),Ur(this,r+1,o).state},cursorCoords:function(r,o){var u,S=this.doc.sel.primary();return r==null?u=S.head:typeof r=="object"?u=_e(this.doc,r):u=r?S.from():S.to(),gr(this,u,o||"page")},charCoords:function(r,o){return Un(this,_e(this.doc,r),o||"page")},coordsChar:function(r,o){return r=Os(this,r,o||"page"),ko(this,r.left,r.top)},lineAtHeight:function(r,o){return r=Os(this,{top:r,left:0},o||"page").top,Ot(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,o,u){var S=!1,E;if(typeof r=="number"){var R=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>R&&(r=R,S=!0),E=Ce(this.doc,r)}else E=r;return jn(this,E,{top:0,left:0},o||"page",u||S).top+(S?this.doc.height-Ct(E):0)},defaultTextHeight:function(){return ji(this.display)},defaultCharWidth:function(){return Ui(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,o,u,S,E){var R=this.display;r=gr(this,_e(this.doc,r));var P=r.bottom,U=r.left;if(o.style.position="absolute",o.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(o),R.sizer.appendChild(o),S=="over")P=r.top;else if(S=="above"||S=="near"){var Y=Math.max(R.wrapper.clientHeight,this.doc.height),te=Math.max(R.sizer.clientWidth,R.lineSpace.clientWidth);(S=="above"||r.bottom+o.offsetHeight>Y)&&r.top>o.offsetHeight?P=r.top-o.offsetHeight:r.bottom+o.offsetHeight<=Y&&(P=r.bottom),U+o.offsetWidth>te&&(U=te-o.offsetWidth)}o.style.top=P+"px",o.style.left=o.style.right="",E=="right"?(U=R.sizer.clientWidth-o.offsetWidth,o.style.right="0px"):(E=="left"?U=0:E=="middle"&&(U=(R.sizer.clientWidth-o.offsetWidth)/2),o.style.left=U+"px"),u&&Ic(this,{left:U,top:P,right:U+o.offsetWidth,bottom:P+o.offsetHeight})},triggerOnKeyDown:Et(Ia),triggerOnKeyPress:Et(Fa),triggerOnKeyUp:Ha,triggerOnMouseDown:Et(Wa),execCommand:function(r){if(En.hasOwnProperty(r))return En[r].call(null,this)},triggerElectric:Et(function(r){Ga(this,r)}),findPosH:function(r,o,u,S){var E=1;o<0&&(E=-1,o=-o);for(var R=_e(this.doc,r),P=0;P<o&&(R=rs(this.doc,R,E,u,S),!R.hitSide);++P);return R},moveH:Et(function(r,o){var u=this;this.extendSelectionsBy(function(S){return u.display.shift||u.doc.extend||S.empty()?rs(u.doc,S.head,r,o,u.options.rtlMoveVisually):r<0?S.from():S.to()},$)}),deleteH:Et(function(r,o){var u=this.doc.sel,S=this.doc;u.somethingSelected()?S.replaceSelection("",null,"+delete"):Ji(this,function(E){var R=rs(S,E.head,r,o,!1);return r<0?{from:R,to:E.head}:{from:E.head,to:R}})}),findPosV:function(r,o,u,S){var E=1,R=S;o<0&&(E=-1,o=-o);for(var P=_e(this.doc,r),U=0;U<o;++U){var Y=gr(this,P,"div");if(R==null?R=Y.left:Y.left=R,P=Za(this,Y,E,u),P.hitSide)break}return P},moveV:Et(function(r,o){var u=this,S=this.doc,E=[],R=!this.display.shift&&!S.extend&&S.sel.somethingSelected();if(S.extendSelectionsBy(function(U){if(R)return r<0?U.from():U.to();var Y=gr(u,U.head,"div");U.goalColumn!=null&&(Y.left=U.goalColumn),E.push(Y.left);var te=Za(u,Y,r,o);return o=="page"&&U==S.sel.primary()&&Io(u,Un(u,te,"div").top-Y.top),te},$),E.length)for(var P=0;P<S.sel.ranges.length;P++)S.sel.ranges[P].goalColumn=E[P]}),findWordAt:function(r){var o=this.doc,u=Ce(o,r.line).text,S=r.ch,E=r.ch;if(u){var R=this.getHelper(r,"wordChars");(r.sticky=="before"||E==u.length)&&S?--S:++E;for(var P=u.charAt(S),U=br(P,R)?function(Y){return br(Y,R)}:/\s/.test(P)?function(Y){return/\s/.test(Y)}:function(Y){return!/\s/.test(Y)&&!br(Y)};S>0&&U(u.charAt(S-1));)--S;for(;E<u.length&&U(u.charAt(E));)++E}return new Pe(ue(r.line,S),ue(r.line,E))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):D(this.display.cursorDiv,"CodeMirror-overwrite"),Ae(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Et(function(r,o){hn(this,r,o)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Dr(this)-this.display.barHeight,width:r.scrollWidth-Dr(this)-this.display.barWidth,clientHeight:Co(this),clientWidth:bi(this)}},scrollIntoView:Et(function(r,o){r==null?(r={from:this.doc.sel.primary().head,to:null},o==null&&(o=this.options.cursorScrollMargin)):typeof r=="number"?r={from:ue(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=o||0,r.from.line!=null?Hc(this,r):Us(this,r.from,r.to,r.margin)}),setSize:Et(function(r,o){var u=this,S=function(R){return typeof R=="number"||/^\d+$/.test(String(R))?R+"px":R};r!=null&&(this.display.wrapper.style.width=S(r)),o!=null&&(this.display.wrapper.style.height=S(o)),this.options.lineWrapping&&Ms(this);var E=this.display.viewFrom;this.doc.iter(E,this.display.viewTo,function(R){if(R.widgets){for(var P=0;P<R.widgets.length;P++)if(R.widgets[P].noHScroll){ni(u,E,"widget");break}}++E}),this.curOp.forceUpdate=!0,Ae(this,"refresh",this)}),operation:function(r){return Kt(this,r)},startOperation:function(){return ki(this)},endOperation:function(){return Ei(this)},refresh:Et(function(){var r=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,un(this),hn(this,this.doc.scrollLeft,this.doc.scrollTop),Wo(this.display),(r==null||Math.abs(r-ji(this.display))>.5||this.options.lineWrapping)&&Mo(this),Ae(this,"refresh",this)}),swapDoc:Et(function(r){var o=this.doc;return o.cm=null,this.state.selectingText&&this.state.selectingText(),ra(this,r),un(this),this.display.input.reset(),hn(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,ot(this,"swapDoc",this,o),o}),phrase:function(r){var o=this.options.phrases;return o&&Object.prototype.hasOwnProperty.call(o,r)?o[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Mt(e),e.registerHelper=function(r,o,u){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][o]=u},e.registerGlobalHelper=function(r,o,u,S){e.registerHelper(r,o,S),i[r]._global.push({pred:u,val:S})}}function rs(e,t,i,r,o){var u=t,S=i,E=Ce(e,t.line),R=o&&e.direction=="rtl"?-i:i;function P(){var ye=t.line+R;return ye<e.first||ye>=e.first+e.size?!1:(t=new ue(ye,t.ch,t.sticky),E=Ce(e,ye))}function U(ye){var ve;if(r=="codepoint"){var be=E.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(be))ve=null;else{var Te=i>0?be>=55296&&be<56320:be>=56320&&be<57343;ve=new ue(t.line,Math.max(0,Math.min(E.text.length,t.ch+i*(Te?2:1))),-i)}}else o?ve=bu(e.cm,E,t,i):ve=Vo(E,t,i);if(ve==null)if(!ye&&P())t=Zo(o,e.cm,E,t.line,R);else return!1;else t=ve;return!0}if(r=="char"||r=="codepoint")U();else if(r=="column")U(!0);else if(r=="word"||r=="group")for(var Y=null,te=r=="group",ee=e.cm&&e.cm.getHelper(t,"wordChars"),re=!0;!(i<0&&!U(!re));re=!1){var le=E.text.charAt(t.ch)||`
`,de=br(le,ee)?"w":te&&le==`
`?"n":!te||/\s/.test(le)?null:"p";if(te&&!re&&!de&&(de="s"),Y&&Y!=de){i<0&&(i=1,U(),t.sticky="after");break}if(de&&(Y=de),i>0&&!U(!re))break}var pe=eo(e,t,u,S,!0);return X(u,pe)&&(pe.hitSide=!0),pe}function Za(e,t,i,r){var o=e.doc,u=t.left,S;if(r=="page"){var E=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),R=Math.max(E-.5*ji(e.display),3);S=(i>0?t.bottom:t.top)+i*R}else r=="line"&&(S=i>0?t.bottom+3:t.top-3);for(var P;P=ko(e,u,S),!!P.outside;){if(i<0?S<=0:S>=o.height){P.hitSide=!0;break}S+=i*5}return P}var Ie=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new we,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ie.prototype.init=function(e){var t=this,i=this,r=i.cm,o=i.div=e.lineDiv;o.contentEditable=!0,Ya(o,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function u(E){for(var R=E.target;R;R=R.parentNode){if(R==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(R.className))break}return!1}ke(o,"paste",function(E){!u(E)||je(r,E)||Ka(E,r)||g<=11&&setTimeout(st(r,function(){return t.updateFromDOM()}),20)}),ke(o,"compositionstart",function(E){t.composing={data:E.data,done:!1}}),ke(o,"compositionupdate",function(E){t.composing||(t.composing={data:E.data,done:!1})}),ke(o,"compositionend",function(E){t.composing&&(E.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ke(o,"touchstart",function(){return i.forceCompositionEnd()}),ke(o,"input",function(){t.composing||t.readFromDOMSoon()});function S(E){if(!(!u(E)||je(r,E))){if(r.somethingSelected())so({lineWise:!1,text:r.getSelections()}),E.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var R=Xa(r);so({lineWise:!0,text:R.text}),E.type=="cut"&&r.operation(function(){r.setSelections(R.ranges,0,G),r.replaceSelection("",null,"cut")})}else return;if(E.clipboardData){E.clipboardData.clearData();var P=yr.text.join(`
`);if(E.clipboardData.setData("Text",P),E.clipboardData.getData("Text")==P){E.preventDefault();return}}var U=Va(),Y=U.firstChild;r.display.lineSpace.insertBefore(U,r.display.lineSpace.firstChild),Y.value=yr.text.join(`
`);var te=H();Q(Y),setTimeout(function(){r.display.lineSpace.removeChild(U),te.focus(),te==o&&i.showPrimarySelection()},50)}}ke(o,"copy",S),ke(o,"cut",S)},Ie.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ie.prototype.prepareSelection=function(){var e=Ws(this.cm,!1);return e.focus=H()==this.div,e},Ie.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ie.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ie.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var u=ao(t,e.anchorNode,e.anchorOffset),S=ao(t,e.focusNode,e.focusOffset);if(!(u&&!u.bad&&S&&!S.bad&&I(Me(u,S),r)==0&&I(fe(u,S),o)==0)){var E=t.display.view,R=r.line>=t.display.viewFrom&&$a(t,r)||{node:E[0].measure.map[2],offset:0},P=o.line<t.display.viewTo&&$a(t,o);if(!P){var U=E[E.length-1].measure,Y=U.maps?U.maps[U.maps.length-1]:U.map;P={node:Y[Y.length-1],offset:Y[Y.length-2]-Y[Y.length-3]}}if(!R||!P){e.removeAllRanges();return}var te=e.rangeCount&&e.getRangeAt(0),ee;try{ee=J(R.node,R.offset,P.offset,P.node)}catch{}ee&&(!W&&t.state.focused?(e.collapse(R.node,R.offset),ee.collapsed||(e.removeAllRanges(),e.addRange(ee))):(e.removeAllRanges(),e.addRange(ee)),te&&e.anchorNode==null?e.addRange(te):W&&this.startGracePeriod()),this.rememberSelection()}},Ie.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ie.prototype.showMultipleSelections=function(e){x(this.cm.display.cursorDiv,e.cursors),x(this.cm.display.selectionDiv,e.selection)},Ie.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ie.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return j(this.div,t)},Ie.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||H()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ie.prototype.blur=function(){this.div.blur()},Ie.prototype.getField=function(){return this.div},Ie.prototype.supportsTouch=function(){return!0},Ie.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Kt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Ie.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ie.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(l&&y&&this.cm.display.gutterSpecs.length&&Nu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=ao(t,e.anchorNode,e.anchorOffset),r=ao(t,e.focusNode,e.focusOffset);i&&r&&Kt(t,function(){wt(t.doc,si(i,r),G),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ie.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=ue(r.line-1,Ce(e.doc,r.line-1).length)),o.ch==Ce(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=ue(o.line+1,0)),r.line<t.viewFrom||o.line>t.viewTo-1)return!1;var u,S,E;r.line==t.viewFrom||(u=wi(e,r.line))==0?(S=Oe(t.view[0].line),E=t.view[0].node):(S=Oe(t.view[u].line),E=t.view[u-1].node.nextSibling);var R=wi(e,o.line),P,U;if(R==t.view.length-1?(P=t.viewTo-1,U=t.lineDiv.lastChild):(P=Oe(t.view[R+1].line)-1,U=t.view[R+1].node.previousSibling),!E)return!1;for(var Y=e.doc.splitLines(ju(e,E,U,S,P)),te=Dt(e.doc,ue(S,0),ue(P,Ce(e.doc,P).text.length));Y.length>1&&te.length>1;)if(Ee(Y)==Ee(te))Y.pop(),te.pop(),P--;else if(Y[0]==te[0])Y.shift(),te.shift(),S++;else break;for(var ee=0,re=0,le=Y[0],de=te[0],pe=Math.min(le.length,de.length);ee<pe&&le.charCodeAt(ee)==de.charCodeAt(ee);)++ee;for(var ye=Ee(Y),ve=Ee(te),be=Math.min(ye.length-(Y.length==1?ee:0),ve.length-(te.length==1?ee:0));re<be&&ye.charCodeAt(ye.length-re-1)==ve.charCodeAt(ve.length-re-1);)++re;if(Y.length==1&&te.length==1&&S==r.line)for(;ee&&ee>r.ch&&ye.charCodeAt(ye.length-re-1)==ve.charCodeAt(ve.length-re-1);)ee--,re++;Y[Y.length-1]=ye.slice(0,ye.length-re).replace(/^\u200b+/,""),Y[0]=Y[0].slice(ee).replace(/\u200b+$/,"");var Te=ue(S,ee),xe=ue(P,te.length?Ee(te).length-re:0);if(Y.length>1||Y[0]||I(Te,xe))return Vi(e.doc,Y,Te,xe,"+input"),!0},Ie.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ie.prototype.reset=function(){this.forceCompositionEnd()},Ie.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ie.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ie.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Kt(this.cm,function(){return It(e.cm)})},Ie.prototype.setUneditable=function(e){e.contentEditable="false"},Ie.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||st(this.cm,ts)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ie.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ie.prototype.onContextMenu=function(){},Ie.prototype.resetPosition=function(){},Ie.prototype.needsContentAttribute=!0;function $a(e,t){var i=wo(e,t.line);if(!i||i.hidden)return null;var r=Ce(e.doc,t.line),o=xs(i,r,t.line),u=ut(r,e.doc.direction),S="left";if(u){var E=Ne(u,t.ch);S=E%2?"right":"left"}var R=Ts(o.map,t.ch,S);return R.offset=R.collapse=="right"?R.end:R.start,R}function Nu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function en(e,t){return t&&(e.bad=!0),e}function ju(e,t,i,r,o){var u="",S=!1,E=e.doc.lineSeparator(),R=!1;function P(ee){return function(re){return re.id==ee}}function U(){S&&(u+=E,R&&(u+=E),S=R=!1)}function Y(ee){ee&&(U(),u+=ee)}function te(ee){if(ee.nodeType==1){var re=ee.getAttribute("cm-text");if(re){Y(re);return}var le=ee.getAttribute("cm-marker"),de;if(le){var pe=e.findMarks(ue(r,0),ue(o+1,0),P(+le));pe.length&&(de=pe[0].find(0))&&Y(Dt(e.doc,de.from,de.to).join(E));return}if(ee.getAttribute("contenteditable")=="false")return;var ye=/^(pre|div|p|li|table|br)$/i.test(ee.nodeName);if(!/^br$/i.test(ee.nodeName)&&ee.textContent.length==0)return;ye&&U();for(var ve=0;ve<ee.childNodes.length;ve++)te(ee.childNodes[ve]);/^(pre|p)$/i.test(ee.nodeName)&&(R=!0),ye&&(S=!0)}else ee.nodeType==3&&Y(ee.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;te(t),t!=i;)t=t.nextSibling,R=!1;return u}function ao(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return en(e.clipPos(ue(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var u=e.display.view[o];if(u.node==r)return Uu(u,t,i)}}function Uu(e,t,i){var r=e.text.firstChild,o=!1;if(!t||!j(r,t))return en(ue(Oe(e.line),0),!0);if(t==r&&(o=!0,t=r.childNodes[i],i=0,!t)){var u=e.rest?Ee(e.rest):e.line;return en(ue(Oe(u),u.text.length),o)}var S=t.nodeType==3?t:null,E=t;for(!S&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(S=t.firstChild,i&&(i=S.nodeValue.length));E.parentNode!=r;)E=E.parentNode;var R=e.measure,P=R.maps;function U(de,pe,ye){for(var ve=-1;ve<(P?P.length:0);ve++)for(var be=ve<0?R.map:P[ve],Te=0;Te<be.length;Te+=3){var xe=be[Te+2];if(xe==de||xe==pe){var Re=Oe(ve<0?e.line:e.rest[ve]),We=be[Te]+ye;return(ye<0||xe!=de)&&(We=be[Te+(ye?1:0)]),ue(Re,We)}}}var Y=U(S,E,i);if(Y)return en(Y,o);for(var te=E.nextSibling,ee=S?S.nodeValue.length-i:0;te;te=te.nextSibling){if(Y=U(te,te.firstChild,0),Y)return en(ue(Y.line,Y.ch-ee),o);ee+=te.textContent.length}for(var re=E.previousSibling,le=i;re;re=re.previousSibling){if(Y=U(re,re.firstChild,-1),Y)return en(ue(Y.line,Y.ch+le),o);le+=re.textContent.length}}var Ze=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new we,this.hasSelection=!1,this.composing=null};Ze.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var o=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),_&&(o.style.width="0px"),ke(o,"input",function(){L&&g>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),ke(o,"paste",function(S){je(r,S)||Ka(S,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function u(S){if(!je(r,S)){if(r.somethingSelected())so({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var E=Xa(r);so({lineWise:!0,text:E.text}),S.type=="cut"?r.setSelections(E.ranges,null,G):(i.prevInput="",o.value=E.text.join(`
`),Q(o))}else return;S.type=="cut"&&(r.state.cutIncoming=+new Date)}}ke(o,"cut",u),ke(o,"copy",u),ke(e.scroller,"paste",function(S){if(!(Yr(e,S)||je(r,S))){if(!o.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var E=new Event("paste");E.clipboardData=S.clipboardData,o.dispatchEvent(E)}}),ke(e.lineSpace,"selectstart",function(S){Yr(e,S)||Ye(S)}),ke(o,"compositionstart",function(){var S=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:S,range:r.markText(S,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ke(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ze.prototype.createField=function(e){this.wrapper=Va(),this.textarea=this.wrapper.firstChild},Ze.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ze.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=Ws(e);if(e.options.moveInputWithCursor){var o=gr(e,i.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),S=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+S.top-u.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+S.left-u.left))}return r},Ze.prototype.showSelection=function(e){var t=this.cm,i=t.display;x(i.cursorDiv,e.cursors),x(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ze.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&Q(this.textarea),L&&g>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",L&&g>=9&&(this.hasSelection=null))}},Ze.prototype.getField=function(){return this.textarea},Ze.prototype.supportsTouch=function(){return!1},Ze.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!a||H()!=this.textarea))try{this.textarea.focus()}catch{}},Ze.prototype.blur=function(){this.textarea.blur()},Ze.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ze.prototype.receivedFocus=function(){this.slowPoll()},Ze.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ze.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},Ze.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Wr(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=i.value;if(o==r&&!t.somethingSelected())return!1;if(L&&g>=9&&this.hasSelection===o||n&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var u=o.charCodeAt(0);if(u==8203&&!r&&(r="\u200B"),u==8666)return this.reset(),this.cm.execCommand("undo")}for(var S=0,E=Math.min(r.length,o.length);S<E&&r.charCodeAt(S)==o.charCodeAt(S);)++S;return Kt(t,function(){ts(t,o.slice(S),r.length-S,null,e.composing?"*compose":null),o.length>1e3||o.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ze.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ze.prototype.onKeyPress=function(){L&&g>=9&&(this.hasSelection=null),this.fastPoll()},Ze.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var u=Ci(i,e),S=r.scroller.scrollTop;if(!u||m)return;var E=i.options.resetSelectionOnContextMenu;E&&i.doc.sel.contains(u)==-1&&st(i,wt)(i.doc,si(u),G);var R=o.style.cssText,P=t.wrapper.style.cssText,U=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",o.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-U.top-5)+"px; left: "+(e.clientX-U.left-5)+`px;
      z-index: 1000; background: `+(L?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Y;v&&(Y=window.scrollY),r.input.focus(),v&&window.scrollTo(null,Y),r.input.reset(),i.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=ee,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function te(){if(o.selectionStart!=null){var le=i.somethingSelected(),de="\u200B"+(le?o.value:"");o.value="\u21DA",o.value=de,t.prevInput=le?"":"\u200B",o.selectionStart=1,o.selectionEnd=de.length,r.selForContextMenu=i.doc.sel}}function ee(){if(t.contextMenuPending==ee&&(t.contextMenuPending=!1,t.wrapper.style.cssText=P,o.style.cssText=R,L&&g<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=S),o.selectionStart!=null)){(!L||L&&g<9)&&te();var le=0,de=function(){r.selForContextMenu==i.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&t.prevInput=="\u200B"?st(i,va)(i):le++<10?r.detectingSelectAll=setTimeout(de,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(de,200)}}if(L&&g>=9&&te(),k){rr(e);var re=function(){tt(window,"mouseup",re),setTimeout(ee,20)};ke(window,"mouseup",re)}else setTimeout(ee,50)},Ze.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ze.prototype.setUneditable=function(){},Ze.prototype.needsContentAttribute=!1;function zu(e,t){if(t=t?se(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=H();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=E.getValue()}var o;if(e.form&&(ke(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var u=e.form;o=u.submit;try{var S=u.submit=function(){r(),u.submit=o,u.submit(),u.submit=S}}catch{}}t.finishInit=function(R){R.save=r,R.getTextArea=function(){return e},R.toTextArea=function(){R.toTextArea=isNaN,r(),e.parentNode.removeChild(R.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=o))}},e.style.display="none";var E=Ue(function(R){return e.parentNode.insertBefore(R,e.nextSibling)},t);return E}function qu(e){e.off=tt,e.on=ke,e.wheelEventPixels=$c,e.Doc=Ht,e.splitLines=wr,e.countColumn=me,e.findColumn=ge,e.isWordChar=Vt,e.Pass=z,e.signal=Ae,e.Line=qt,e.changeEnd=ai,e.scrollbarModel=Ks,e.Pos=ue,e.cmpPos=I,e.modes=_t,e.mimeModes=ht,e.resolveMode=dr,e.getMode=pr,e.modeExtensions=xt,e.extendMode=kt,e.copyState=dt,e.startState=kr,e.innerMode=xr,e.commands=En,e.keyMap=Zr,e.keyName=Ra,e.isModifierKey=Aa,e.lookupKey=$i,e.normalizeKeyMap=mu,e.StringStream=Fe,e.SharedTextMarker=Ln,e.TextMarker=ci,e.LineWidget=wn,e.e_preventDefault=Ye,e.e_stopPropagation=hr,e.e_stop=rr,e.addClass=N,e.contains=j,e.rmClass=D,e.keyNames=ui}Pu(Ue),Wu(Ue);var Ku="iter insert remove copy getEditor constructor".split(" ");for(var lo in Ht.prototype)Ht.prototype.hasOwnProperty(lo)&&he(Ku,lo)<0&&(Ue.prototype[lo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ht.prototype[lo]));return Mt(Ht),Ue.inputStyles={textarea:Ze,contenteditable:Ie},Ue.defineMode=function(e){!Ue.defaults.mode&&e!="null"&&(Ue.defaults.mode=e),jr.apply(this,arguments)},Ue.defineMIME=Ut,Ue.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ue.defineMIME("text/plain","null"),Ue.defineExtension=function(e,t){Ue.prototype[e]=t},Ue.defineDocExtension=function(e,t){Ht.prototype[e]=t},Ue.fromTextArea=zu,qu(Ue),Ue.version="5.65.1",Ue})});var as=ar((ll,cl)=>{(function(V){typeof ll=="object"&&typeof cl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";V.defineMode("javascript",function(A,W){var q=A.indentUnit,K=W.statementIndent,p=W.jsonld,L=W.json||p,g=W.trackScope!==!1,v=W.typescript,C=W.wordCharacters||/[\w$\xa1-\uffff]/,y=function(){function I($e){return{type:$e,style:"keyword"}}var X=I("keyword a"),oe=I("keyword b"),fe=I("keyword c"),Me=I("keyword d"),De=I("operator"),_e={type:"atom",style:"atom"};return{if:I("if"),while:X,with:X,else:oe,do:oe,try:oe,finally:oe,return:Me,break:Me,continue:Me,new:I("new"),delete:fe,void:fe,throw:fe,debugger:I("debugger"),var:I("var"),const:I("var"),let:I("var"),function:I("function"),catch:I("catch"),for:I("for"),switch:I("switch"),case:I("case"),default:I("default"),in:De,typeof:De,instanceof:De,true:_e,false:_e,null:_e,undefined:_e,NaN:_e,Infinity:_e,this:I("this"),class:I("class"),super:I("atom"),yield:fe,export:I("export"),import:I("import"),extends:fe,await:fe}}(),m=/[+\-*&%=<>!?|~^@]/,w=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(I){for(var X=!1,oe,fe=!1;(oe=I.next())!=null;){if(!X){if(oe=="/"&&!fe)return;oe=="["?fe=!0:fe&&oe=="]"&&(fe=!1)}X=!X&&oe=="\\"}}var d,_;function l(I,X,oe){return d=I,_=oe,X}function a(I,X){var oe=I.next();if(oe=='"'||oe=="'")return X.tokenize=n(oe),X.tokenize(I,X);if(oe=="."&&I.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return l("number","number");if(oe=="."&&I.match(".."))return l("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(oe))return l(oe);if(oe=="="&&I.eat(">"))return l("=>","operator");if(oe=="0"&&I.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return l("number","number");if(/\d/.test(oe))return I.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),l("number","number");if(oe=="/")return I.eat("*")?(X.tokenize=s,s(I,X)):I.eat("/")?(I.skipToEnd(),l("comment","comment")):ue(I,X,1)?(h(I),I.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),l("regexp","string-2")):(I.eat("="),l("operator","operator",I.current()));if(oe=="`")return X.tokenize=c,c(I,X);if(oe=="#"&&I.peek()=="!")return I.skipToEnd(),l("meta","meta");if(oe=="#"&&I.eatWhile(C))return l("variable","property");if(oe=="<"&&I.match("!--")||oe=="-"&&I.match("->")&&!/\S/.test(I.string.slice(0,I.start)))return I.skipToEnd(),l("comment","comment");if(m.test(oe))return(oe!=">"||!X.lexical||X.lexical.type!=">")&&(I.eat("=")?(oe=="!"||oe=="=")&&I.eat("="):/[<>*+\-|&?]/.test(oe)&&(I.eat(oe),oe==">"&&I.eat(oe))),oe=="?"&&I.eat(".")?l("."):l("operator","operator",I.current());if(C.test(oe)){I.eatWhile(C);var fe=I.current();if(X.lastType!="."){if(y.propertyIsEnumerable(fe)){var Me=y[fe];return l(Me.type,Me.style,fe)}if(fe=="async"&&I.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return l("async","keyword",fe)}return l("variable","variable",fe)}}function n(I){return function(X,oe){var fe=!1,Me;if(p&&X.peek()=="@"&&X.match(w))return oe.tokenize=a,l("jsonld-keyword","meta");for(;(Me=X.next())!=null&&!(Me==I&&!fe);)fe=!fe&&Me=="\\";return fe||(oe.tokenize=a),l("string","string")}}function s(I,X){for(var oe=!1,fe;fe=I.next();){if(fe=="/"&&oe){X.tokenize=a;break}oe=fe=="*"}return l("comment","comment")}function c(I,X){for(var oe=!1,fe;(fe=I.next())!=null;){if(!oe&&(fe=="`"||fe=="$"&&I.eat("{"))){X.tokenize=a;break}oe=!oe&&fe=="\\"}return l("quasi","string-2",I.current())}var f="([{}])";function b(I,X){X.fatArrowAt&&(X.fatArrowAt=null);var oe=I.string.indexOf("=>",I.start);if(!(oe<0)){if(v){var fe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(I.string.slice(I.start,oe));fe&&(oe=fe.index)}for(var Me=0,De=!1,_e=oe-1;_e>=0;--_e){var $e=I.string.charAt(_e),yt=f.indexOf($e);if(yt>=0&&yt<3){if(!Me){++_e;break}if(--Me==0){$e=="("&&(De=!0);break}}else if(yt>=3&&yt<6)++Me;else if(C.test($e))De=!0;else if(/["'\/`]/.test($e))for(;;--_e){if(_e==0)return;var Ar=I.string.charAt(_e-1);if(Ar==$e&&I.string.charAt(_e-2)!="\\"){_e--;break}}else if(De&&!Me){++_e;break}}De&&!Me&&(X.fatArrowAt=_e)}}var k={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function O(I,X,oe,fe,Me,De){this.indented=I,this.column=X,this.type=oe,this.prev=Me,this.info=De,fe!=null&&(this.align=fe)}function D(I,X){if(!g)return!1;for(var oe=I.localVars;oe;oe=oe.next)if(oe.name==X)return!0;for(var fe=I.context;fe;fe=fe.prev)for(var oe=fe.vars;oe;oe=oe.next)if(oe.name==X)return!0}function M(I,X,oe,fe,Me){var De=I.cc;for(x.state=I,x.stream=Me,x.marked=null,x.cc=De,x.style=X,I.lexical.hasOwnProperty("align")||(I.lexical.align=!0);;){var _e=De.length?De.pop():L?$:G;if(_e(oe,fe)){for(;De.length&&De[De.length-1].lex;)De.pop()();return x.marked?x.marked:oe=="variable"&&D(I,fe)?"variable-2":X}}}var x={state:null,column:null,marked:null,cc:null};function B(){for(var I=arguments.length-1;I>=0;I--)x.cc.push(arguments[I])}function T(){return B.apply(null,arguments),!0}function J(I,X){for(var oe=X;oe;oe=oe.next)if(oe.name==I)return!0;return!1}function j(I){var X=x.state;if(x.marked="def",!!g){if(X.context){if(X.lexical.info=="var"&&X.context&&X.context.block){var oe=H(I,X.context);if(oe!=null){X.context=oe;return}}else if(!J(I,X.localVars)){X.localVars=new Q(I,X.localVars);return}}W.globalVars&&!J(I,X.globalVars)&&(X.globalVars=new Q(I,X.globalVars))}}function H(I,X){if(X)if(X.block){var oe=H(I,X.prev);return oe?oe==X.prev?X:new Z(oe,X.vars,!0):null}else return J(I,X.vars)?X:new Z(X.prev,new Q(I,X.vars),!1);else return null}function N(I){return I=="public"||I=="private"||I=="protected"||I=="abstract"||I=="readonly"}function Z(I,X,oe){this.prev=I,this.vars=X,this.block=oe}function Q(I,X){this.name=I,this.next=X}var ae=new Q("this",new Q("arguments",null));function se(){x.state.context=new Z(x.state.context,x.state.localVars,!1),x.state.localVars=ae}function me(){x.state.context=new Z(x.state.context,x.state.localVars,!0),x.state.localVars=null}se.lex=me.lex=!0;function we(){x.state.localVars=x.state.context.vars,x.state.context=x.state.context.prev}we.lex=!0;function he(I,X){var oe=function(){var fe=x.state,Me=fe.indented;if(fe.lexical.type=="stat")Me=fe.lexical.indented;else for(var De=fe.lexical;De&&De.type==")"&&De.align;De=De.prev)Me=De.indented;fe.lexical=new O(Me,x.stream.column(),I,null,fe.lexical,X)};return oe.lex=!0,oe}function F(){var I=x.state;I.lexical.prev&&(I.lexical.type==")"&&(I.indented=I.lexical.indented),I.lexical=I.lexical.prev)}F.lex=!0;function z(I){function X(oe){return oe==I?T():I==";"||oe=="}"||oe==")"||oe=="]"?B():T(X)}return X}function G(I,X){return I=="var"?T(he("vardef",X),Sr,z(";"),F):I=="keyword a"?T(he("form"),Le,G,F):I=="keyword b"?T(he("form"),G,F):I=="keyword d"?x.stream.match(/^\s*$/,!1)?T():T(he("stat"),Ee,z(";"),F):I=="debugger"?T(z(";")):I=="{"?T(he("}"),me,ut,F,we):I==";"?T():I=="if"?(x.state.lexical.info=="else"&&x.state.cc[x.state.cc.length-1]==F&&x.state.cc.pop()(),T(he("form"),Le,G,F,Wr)):I=="function"?T(_t):I=="for"?T(he("form"),me,Nr,G,we,F):I=="class"||v&&X=="interface"?(x.marked="keyword",T(he("form",I=="class"?I:X),pr,F)):I=="variable"?v&&X=="declare"?(x.marked="keyword",T(G)):v&&(X=="module"||X=="enum"||X=="type")&&x.stream.match(/^\s*\w/,!1)?(x.marked="keyword",X=="enum"?T(Ot):X=="type"?T(jr,z("operator"),Ae,z(";")):T(he("form"),rt,z("{"),he("}"),ut,F,F)):v&&X=="namespace"?(x.marked="keyword",T(he("form"),$,G,F)):v&&X=="abstract"?(x.marked="keyword",T(G)):T(he("stat"),Ir):I=="switch"?T(he("form"),Le,z("{"),he("}","switch"),me,ut,F,F,we):I=="case"?T($,z(":")):I=="default"?T(z(":")):I=="catch"?T(he("form"),se,ce,G,F,we):I=="export"?T(he("stat"),xr,F):I=="import"?T(he("stat"),Fe,F):I=="async"?T(G):X=="@"?T($,G):B(he("stat"),$,z(";"),F)}function ce(I){if(I=="(")return T(Ut,z(")"))}function $(I,X){return Be(I,X,!1)}function ge(I,X){return Be(I,X,!0)}function Le(I){return I!="("?B():T(he(")"),Ee,z(")"),F)}function Be(I,X,oe){if(x.state.fatArrowAt==x.stream.start){var fe=oe?Vt:At;if(I=="(")return T(se,he(")"),Ne(Ut,")"),F,z("=>"),fe,we);if(I=="variable")return B(se,rt,z("=>"),fe,we)}var Me=oe?Se:He;return k.hasOwnProperty(I)?T(Me):I=="function"?T(_t,Me):I=="class"||v&&X=="interface"?(x.marked="keyword",T(he("form"),dr,F)):I=="keyword c"||I=="async"?T(oe?ge:$):I=="("?T(he(")"),Ee,z(")"),F,Me):I=="operator"||I=="spread"?T(oe?ge:$):I=="["?T(he("]"),Oe,F,Me):I=="{"?cr(jt,"}",null,Me):I=="quasi"?B(ze,Me):I=="new"?T(br(oe)):T()}function Ee(I){return I.match(/[;\}\)\],]/)?B():B($)}function He(I,X){return I==","?T(Ee):Se(I,X,!1)}function Se(I,X,oe){var fe=oe==!1?He:Se,Me=oe==!1?$:ge;if(I=="=>")return T(se,oe?Vt:At,we);if(I=="operator")return/\+\+|--/.test(X)||v&&X=="!"?T(fe):v&&X=="<"&&x.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?T(he(">"),Ne(Ae,">"),F,fe):X=="?"?T($,z(":"),Me):T(Me);if(I=="quasi")return B(ze,fe);if(I!=";"){if(I=="(")return cr(ge,")","call",fe);if(I==".")return T(ti,fe);if(I=="[")return T(he("]"),Ee,z("]"),F,fe);if(v&&X=="as")return x.marked="keyword",T(Ae,fe);if(I=="regexp")return x.state.lastType=x.marked="operator",x.stream.backUp(x.stream.pos-x.stream.start-1),T(Me)}}function ze(I,X){return I!="quasi"?B():X.slice(X.length-2)!="${"?T(ze):T(Ee,vt)}function vt(I){if(I=="}")return x.marked="string-2",x.state.tokenize=c,T(ze)}function At(I){return b(x.stream,x.state),B(I=="{"?G:$)}function Vt(I){return b(x.stream,x.state),B(I=="{"?G:ge)}function br(I){return function(X){return X=="."?T(I?hi:ei):X=="variable"&&v?T(rr,I?Se:He):B(I?ge:$)}}function ei(I,X){if(X=="target")return x.marked="keyword",T(He)}function hi(I,X){if(X=="target")return x.marked="keyword",T(Se)}function Ir(I){return I==":"?T(F,G):B(He,z(";"),F)}function ti(I){if(I=="variable")return x.marked="property",T()}function jt(I,X){if(I=="async")return x.marked="property",T(jt);if(I=="variable"||x.style=="keyword"){if(x.marked="property",X=="get"||X=="set")return T(di);var oe;return v&&x.state.fatArrowAt==x.stream.start&&(oe=x.stream.match(/^\s*:\s*/,!1))&&(x.state.fatArrowAt=x.stream.pos+oe[0].length),T(gt)}else{if(I=="number"||I=="string")return x.marked=p?"property":x.style+" property",T(gt);if(I=="jsonld-keyword")return T(gt);if(v&&N(X))return x.marked="keyword",T(jt);if(I=="[")return T($,Zt,z("]"),gt);if(I=="spread")return T(ge,gt);if(X=="*")return x.marked="keyword",T(jt);if(I==":")return B(gt)}}function di(I){return I!="variable"?B(gt):(x.marked="property",T(_t))}function gt(I){if(I==":")return T(ge);if(I=="(")return B(_t)}function Ne(I,X,oe){function fe(Me,De){if(oe?oe.indexOf(Me)>-1:Me==","){var _e=x.state.lexical;return _e.info=="call"&&(_e.pos=(_e.pos||0)+1),T(function($e,yt){return $e==X||yt==X?B():B(I)},fe)}return Me==X||De==X?T():oe&&oe.indexOf(";")>-1?B(I):T(z(X))}return function(Me,De){return Me==X||De==X?T():B(I,fe)}}function cr(I,X,oe){for(var fe=3;fe<arguments.length;fe++)x.cc.push(arguments[fe]);return T(he(X,oe),Ne(I,X),F)}function ut(I){return I=="}"?T():B(G,ut)}function Zt(I,X){if(v){if(I==":")return T(Ae);if(X=="?")return T(Zt)}}function ke(I,X){if(v&&(I==":"||X=="in"))return T(Ae)}function ur(I){if(v&&I==":")return x.stream.match(/^\s*\w+\s+is\b/,!1)?T($,tt,Ae):T(Ae)}function tt(I,X){if(X=="is")return x.marked="keyword",T()}function Ae(I,X){if(X=="keyof"||X=="typeof"||X=="infer"||X=="readonly")return x.marked="keyword",T(X=="typeof"?ge:Ae);if(I=="variable"||X=="void")return x.marked="type",T(ft);if(X=="|"||X=="&")return T(Ae);if(I=="string"||I=="number"||I=="atom")return T(ft);if(I=="[")return T(he("]"),Ne(Ae,"]",","),F,ft);if(I=="{")return T(he("}"),fr,F,ft);if(I=="(")return T(Ne(hr,")"),je,ft);if(I=="<")return T(Ne(Ae,">"),Ae);if(I=="quasi")return B(Mt,ft)}function je(I){if(I=="=>")return T(Ae)}function fr(I){return I.match(/[\}\)\]]/)?T():I==","||I==";"?T(fr):B(Ke,fr)}function Ke(I,X){if(I=="variable"||x.style=="keyword")return x.marked="property",T(Ke);if(X=="?"||I=="number"||I=="string")return T(Ke);if(I==":")return T(Ae);if(I=="[")return T(z("variable"),ke,z("]"),Ke);if(I=="(")return B(ht,Ke);if(!I.match(/[;\}\)\],]/))return T()}function Mt(I,X){return I!="quasi"?B():X.slice(X.length-2)!="${"?T(Mt):T(Ae,Ye)}function Ye(I){if(I=="}")return x.marked="string-2",x.state.tokenize=c,T(Mt)}function hr(I,X){return I=="variable"&&x.stream.match(/^\s*[?:]/,!1)||X=="?"?T(hr):I==":"?T(Ae):I=="spread"?T(hr):B(Ae)}function ft(I,X){if(X=="<")return T(he(">"),Ne(Ae,">"),F,ft);if(X=="|"||I=="."||X=="&")return T(Ae);if(I=="[")return T(Ae,z("]"),ft);if(X=="extends"||X=="implements")return x.marked="keyword",T(Ae);if(X=="?")return T(Ae,z(":"),Ae)}function rr(I,X){if(X=="<")return T(he(">"),Ne(Ae,">"),F,ft)}function $t(){return B(Ae,Hr)}function Hr(I,X){if(X=="=")return T(Ae)}function Sr(I,X){return X=="enum"?(x.marked="keyword",T(Ot)):B(rt,Zt,Rt,wr)}function rt(I,X){if(v&&N(X))return x.marked="keyword",T(rt);if(I=="variable")return j(X),T();if(I=="spread")return T(rt);if(I=="[")return cr(Cr,"]");if(I=="{")return cr(Fr,"}")}function Fr(I,X){return I=="variable"&&!x.stream.match(/^\s*:/,!1)?(j(X),T(Rt)):(I=="variable"&&(x.marked="property"),I=="spread"?T(rt):I=="}"?B():I=="["?T($,z("]"),z(":"),Fr):T(z(":"),rt,Rt))}function Cr(){return B(rt,Rt)}function Rt(I,X){if(X=="=")return T(ge)}function wr(I){if(I==",")return T(Sr)}function Wr(I,X){if(I=="keyword b"&&X=="else")return T(he("form","else"),G,F)}function Nr(I,X){if(X=="await")return T(Nr);if(I=="(")return T(he(")"),Lr,F)}function Lr(I){return I=="var"?T(Sr,Jt):I=="variable"?T(Jt):B(Jt)}function Jt(I,X){return I==")"?T():I==";"?T(Jt):X=="in"||X=="of"?(x.marked="keyword",T($,Jt)):B($,Jt)}function _t(I,X){if(X=="*")return x.marked="keyword",T(_t);if(I=="variable")return j(X),T(_t);if(I=="(")return T(se,he(")"),Ne(Ut,")"),F,ur,G,we);if(v&&X=="<")return T(he(">"),Ne($t,">"),F,_t)}function ht(I,X){if(X=="*")return x.marked="keyword",T(ht);if(I=="variable")return j(X),T(ht);if(I=="(")return T(se,he(")"),Ne(Ut,")"),F,ur,we);if(v&&X=="<")return T(he(">"),Ne($t,">"),F,ht)}function jr(I,X){if(I=="keyword"||I=="variable")return x.marked="type",T(jr);if(X=="<")return T(he(">"),Ne($t,">"),F)}function Ut(I,X){return X=="@"&&T($,Ut),I=="spread"?T(Ut):v&&N(X)?(x.marked="keyword",T(Ut)):v&&I=="this"?T(Zt,Rt):B(rt,Zt,Rt)}function dr(I,X){return I=="variable"?pr(I,X):xt(I,X)}function pr(I,X){if(I=="variable")return j(X),T(xt)}function xt(I,X){if(X=="<")return T(he(">"),Ne($t,">"),F,xt);if(X=="extends"||X=="implements"||v&&I==",")return X=="implements"&&(x.marked="keyword"),T(v?Ae:$,xt);if(I=="{")return T(he("}"),kt,F)}function kt(I,X){if(I=="async"||I=="variable"&&(X=="static"||X=="get"||X=="set"||v&&N(X))&&x.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return x.marked="keyword",T(kt);if(I=="variable"||x.style=="keyword")return x.marked="property",T(dt,kt);if(I=="number"||I=="string")return T(dt,kt);if(I=="[")return T($,Zt,z("]"),dt,kt);if(X=="*")return x.marked="keyword",T(kt);if(v&&I=="(")return B(ht,kt);if(I==";"||I==",")return T(kt);if(I=="}")return T();if(X=="@")return T($,kt)}function dt(I,X){if(X=="!"||X=="?")return T(dt);if(I==":")return T(Ae,Rt);if(X=="=")return T(ge);var oe=x.state.lexical.prev,fe=oe&&oe.info=="interface";return B(fe?ht:_t)}function xr(I,X){return X=="*"?(x.marked="keyword",T(nt,z(";"))):X=="default"?(x.marked="keyword",T($,z(";"))):I=="{"?T(Ne(kr,"}"),nt,z(";")):B(G)}function kr(I,X){if(X=="as")return x.marked="keyword",T(z("variable"));if(I=="variable")return B(ge,kr)}function Fe(I){return I=="string"?T():I=="("?B($):I=="."?B(He):B(Ce,Dt,nt)}function Ce(I,X){return I=="{"?cr(Ce,"}"):(I=="variable"&&j(X),X=="*"&&(x.marked="keyword"),T(Er))}function Dt(I){if(I==",")return T(Ce,Dt)}function Er(I,X){if(X=="as")return x.marked="keyword",T(Ce)}function nt(I,X){if(X=="from")return x.marked="keyword",T($)}function Oe(I){return I=="]"?T():B(Ne(ge,"]"))}function Ot(){return B(he("form"),rt,z("{"),he("}"),Ne(ir,"}"),F,F)}function ir(){return B(rt,Rt)}function Tr(I,X){return I.lastType=="operator"||I.lastType==","||m.test(X.charAt(0))||/[,.]/.test(X.charAt(0))}function ue(I,X,oe){return X.tokenize==a&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(X.lastType)||X.lastType=="quasi"&&/\{\s*$/.test(I.string.slice(0,I.pos-(oe||0)))}return{startState:function(I){var X={tokenize:a,lastType:"sof",cc:[],lexical:new O((I||0)-q,0,"block",!1),localVars:W.localVars,context:W.localVars&&new Z(null,null,!1),indented:I||0};return W.globalVars&&typeof W.globalVars=="object"&&(X.globalVars=W.globalVars),X},token:function(I,X){if(I.sol()&&(X.lexical.hasOwnProperty("align")||(X.lexical.align=!1),X.indented=I.indentation(),b(I,X)),X.tokenize!=s&&I.eatSpace())return null;var oe=X.tokenize(I,X);return d=="comment"?oe:(X.lastType=d=="operator"&&(_=="++"||_=="--")?"incdec":d,M(X,oe,d,_,I))},indent:function(I,X){if(I.tokenize==s||I.tokenize==c)return V.Pass;if(I.tokenize!=a)return 0;var oe=X&&X.charAt(0),fe=I.lexical,Me;if(!/^\s*else\b/.test(X))for(var De=I.cc.length-1;De>=0;--De){var _e=I.cc[De];if(_e==F)fe=fe.prev;else if(_e!=Wr&&_e!=we)break}for(;(fe.type=="stat"||fe.type=="form")&&(oe=="}"||(Me=I.cc[I.cc.length-1])&&(Me==He||Me==Se)&&!/^[,\.=+\-*:?[\(]/.test(X));)fe=fe.prev;K&&fe.type==")"&&fe.prev.type=="stat"&&(fe=fe.prev);var $e=fe.type,yt=oe==$e;return $e=="vardef"?fe.indented+(I.lastType=="operator"||I.lastType==","?fe.info.length+1:0):$e=="form"&&oe=="{"?fe.indented:$e=="form"?fe.indented+q:$e=="stat"?fe.indented+(Tr(I,X)?K||q:0):fe.info=="switch"&&!yt&&W.doubleIndentSwitch!=!1?fe.indented+(/^(?:case|default)\b/.test(X)?q:2*q):fe.align?fe.column+(yt?0:1):fe.indented+(yt?0:q)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:L?null:"/*",blockCommentEnd:L?null:"*/",blockCommentContinue:L?null:" * ",lineComment:L?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:L?"json":"javascript",jsonldMode:p,jsonMode:L,expressionAllowed:ue,skipExpression:function(I){M(I,"atom","atom","true",new V.StringStream("",2,null))}}}),V.registerHelper("wordChars","javascript",/[\w$]/),V.defineMIME("text/javascript","javascript"),V.defineMIME("text/ecmascript","javascript"),V.defineMIME("application/javascript","javascript"),V.defineMIME("application/x-javascript","javascript"),V.defineMIME("application/ecmascript","javascript"),V.defineMIME("application/json",{name:"javascript",json:!0}),V.defineMIME("application/x-json",{name:"javascript",json:!0}),V.defineMIME("application/manifest+json",{name:"javascript",json:!0}),V.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),V.defineMIME("text/typescript",{name:"javascript",typescript:!0}),V.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var ls=ar((hl,dl)=>{(function(V){typeof hl=="object"&&typeof dl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";V.defineMode("perl",function(){var p={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},L="string-2",g=/[goseximacplud]/;function v(m,w,h,d,_){return w.chain=null,w.style=null,w.tail=null,w.tokenize=function(l,a){for(var n=!1,s,c=0;s=l.next();){if(s===h[c]&&!n)return h[++c]!==void 0?(a.chain=h[c],a.style=d,a.tail=_):_&&l.eatWhile(_),a.tokenize=y,d;n=!n&&s=="\\"}return d},w.tokenize(m,w)}function C(m,w,h){return w.tokenize=function(d,_){return d.string==h&&(_.tokenize=y),d.skipToEnd(),"string"},w.tokenize(m,w)}function y(m,w){if(m.eatSpace())return null;if(w.chain)return v(m,w,w.chain,w.style,w.tail);if(m.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(m.match(/^<<(?=[_a-zA-Z])/))return m.eatWhile(/\w/),C(m,w,m.current().substr(2));if(m.sol()&&m.match(/^\=item(?!\w)/))return C(m,w,"=cut");var h=m.next();if(h=='"'||h=="'"){if(W(m,3)=="<<"+h){var d=m.pos;m.eatWhile(/\w/);var _=m.current().substr(1);if(_&&m.eat(h))return C(m,w,_);m.pos=d}return v(m,w,[h],"string")}if(h=="q"){var l=A(m,-2);if(!(l&&/\w/.test(l))){if(l=A(m,0),l=="x"){if(l=A(m,1),l=="(")return K(m,2),v(m,w,[")"],L,g);if(l=="[")return K(m,2),v(m,w,["]"],L,g);if(l=="{")return K(m,2),v(m,w,["}"],L,g);if(l=="<")return K(m,2),v(m,w,[">"],L,g);if(/[\^'"!~\/]/.test(l))return K(m,1),v(m,w,[m.eat(l)],L,g)}else if(l=="q"){if(l=A(m,1),l=="(")return K(m,2),v(m,w,[")"],"string");if(l=="[")return K(m,2),v(m,w,["]"],"string");if(l=="{")return K(m,2),v(m,w,["}"],"string");if(l=="<")return K(m,2),v(m,w,[">"],"string");if(/[\^'"!~\/]/.test(l))return K(m,1),v(m,w,[m.eat(l)],"string")}else if(l=="w"){if(l=A(m,1),l=="(")return K(m,2),v(m,w,[")"],"bracket");if(l=="[")return K(m,2),v(m,w,["]"],"bracket");if(l=="{")return K(m,2),v(m,w,["}"],"bracket");if(l=="<")return K(m,2),v(m,w,[">"],"bracket");if(/[\^'"!~\/]/.test(l))return K(m,1),v(m,w,[m.eat(l)],"bracket")}else if(l=="r"){if(l=A(m,1),l=="(")return K(m,2),v(m,w,[")"],L,g);if(l=="[")return K(m,2),v(m,w,["]"],L,g);if(l=="{")return K(m,2),v(m,w,["}"],L,g);if(l=="<")return K(m,2),v(m,w,[">"],L,g);if(/[\^'"!~\/]/.test(l))return K(m,1),v(m,w,[m.eat(l)],L,g)}else if(/[\^'"!~\/(\[{<]/.test(l)){if(l=="(")return K(m,1),v(m,w,[")"],"string");if(l=="[")return K(m,1),v(m,w,["]"],"string");if(l=="{")return K(m,1),v(m,w,["}"],"string");if(l=="<")return K(m,1),v(m,w,[">"],"string");if(/[\^'"!~\/]/.test(l))return v(m,w,[m.eat(l)],"string")}}}if(h=="m"){var l=A(m,-2);if(!(l&&/\w/.test(l))&&(l=m.eat(/[(\[{<\^'"!~\/]/),l)){if(/[\^'"!~\/]/.test(l))return v(m,w,[l],L,g);if(l=="(")return v(m,w,[")"],L,g);if(l=="[")return v(m,w,["]"],L,g);if(l=="{")return v(m,w,["}"],L,g);if(l=="<")return v(m,w,[">"],L,g)}}if(h=="s"){var l=/[\/>\]})\w]/.test(A(m,-2));if(!l&&(l=m.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?v(m,w,["]","]"],L,g):l=="{"?v(m,w,["}","}"],L,g):l=="<"?v(m,w,[">",">"],L,g):l=="("?v(m,w,[")",")"],L,g):v(m,w,[l,l],L,g)}if(h=="y"){var l=/[\/>\]})\w]/.test(A(m,-2));if(!l&&(l=m.eat(/[(\[{<\^'"!~\/]/),l))return l=="["?v(m,w,["]","]"],L,g):l=="{"?v(m,w,["}","}"],L,g):l=="<"?v(m,w,[">",">"],L,g):l=="("?v(m,w,[")",")"],L,g):v(m,w,[l,l],L,g)}if(h=="t"){var l=/[\/>\]})\w]/.test(A(m,-2));if(!l&&(l=m.eat("r"),l&&(l=m.eat(/[(\[{<\^'"!~\/]/),l)))return l=="["?v(m,w,["]","]"],L,g):l=="{"?v(m,w,["}","}"],L,g):l=="<"?v(m,w,[">",">"],L,g):l=="("?v(m,w,[")",")"],L,g):v(m,w,[l,l],L,g)}if(h=="`")return v(m,w,[h],"variable-2");if(h=="/")return/~\s*$/.test(W(m))?v(m,w,[h],L,g):"operator";if(h=="$"){var d=m.pos;if(m.eatWhile(/\d/)||m.eat("{")&&m.eatWhile(/\d/)&&m.eat("}"))return"variable-2";m.pos=d}if(/[$@%]/.test(h)){var d=m.pos;if(m.eat("^")&&m.eat(/[A-Z]/)||!/[@$%&]/.test(A(m,-2))&&m.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var l=m.current();if(p[l])return"variable-2"}m.pos=d}if(/[$@%&]/.test(h)&&(m.eatWhile(/[\w$]/)||m.eat("{")&&m.eatWhile(/[\w$]/)&&m.eat("}"))){var l=m.current();return p[l]?"variable-2":"variable"}if(h=="#"&&A(m,-2)!="$")return m.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(h)){var d=m.pos;if(m.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),p[m.current()])return"operator";m.pos=d}if(h=="_"&&m.pos==1){if(q(m,6)=="_END__")return v(m,w,["\0"],"comment");if(q(m,7)=="_DATA__")return v(m,w,["\0"],"variable-2");if(q(m,7)=="_C__")return v(m,w,["\0"],"string")}if(/\w/.test(h)){var d=m.pos;if(A(m,-2)=="{"&&(A(m,0)=="}"||m.eatWhile(/\w/)&&A(m,0)=="}"))return"string";m.pos=d}if(/[A-Z]/.test(h)){var a=A(m,-2),d=m.pos;if(m.eatWhile(/[A-Z_]/),/[\da-z]/.test(A(m,0)))m.pos=d;else{var l=p[m.current()];return l?(l[1]&&(l=l[0]),a!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(h)){var a=A(m,-2);m.eatWhile(/\w/);var l=p[m.current()];return l?(l[1]&&(l=l[0]),a!=":"?l==1?"keyword":l==2?"def":l==3?"atom":l==4?"operator":l==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:y,chain:null,style:null,tail:null}},token:function(m,w){return(w.tokenize||y)(m,w)},lineComment:"#"}}),V.registerHelper("wordChars","perl",/[\w$]/),V.defineMIME("text/x-perl","perl");function A(p,L){return p.string.charAt(p.pos+(L||0))}function W(p,L){if(L){var g=p.pos-L;return p.string.substr(g>=0?g:0,L)}else return p.string.substr(0,p.pos-1)}function q(p,L){var g=p.string.length,v=g-p.pos+1;return p.string.substr(p.pos,L&&L<g?L:v)}function K(p,L){var g=p.pos+L,v;g<=0?p.pos=0:g>=(v=p.string.length-1)?p.pos=v:p.pos=g}})});var ml=ar(Qr=>{"use strict";var fo=Qr&&Qr.__assign||function(){return fo=Object.assign||function(V){for(var A,W=1,q=arguments.length;W<q;W++){A=arguments[W];for(var K in A)Object.prototype.hasOwnProperty.call(A,K)&&(V[K]=A[K])}return V},fo.apply(this,arguments)},gl=Qr&&Qr.__spreadArray||function(V,A,W){if(W||arguments.length===2)for(var q=0,K=A.length,p;q<K;q++)(p||!(q in A))&&(p||(p=Array.prototype.slice.call(A,0,q)),p[q]=A[q]);return V.concat(p||Array.prototype.slice.call(A))};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Melba=void 0;var _l=function(){var V=document.createElement("a");return["matches","msMatchesSelector","webkitMatchesSelector"].filter(function(A){return A in V})}()[0],tf=function(){var V=document.createElement("a");try{return V[_l](":focus-within"),":focus-within, :focus, :hover"}catch{return":focus, :hover"}}(),yl=function(){function V(A){var W=this,q=A.animation,K=q===void 0?V.defaults.animation:q,p=A.animationDuration,L=p===void 0?V.defaults.animationDuration:p,g=A.closeLabel,v=g===void 0?V.defaults.closeLabel:g,C=A.container,y=C===void 0?null:C,m=A.containerClass,w=m===void 0?V.defaults.containerClass:m,h=A.containerElement,d=h===void 0?V.defaults.containerElement:h,_=A.content,l=A.events,a=l===void 0?{}:l,n=A.hide,s=n===void 0?V.defaults.hide:n,c=A.root,f=c===void 0?V.defaults.root:c,b=A.toastClass,k=b===void 0?V.defaults.toastClass:b,O=A.toastElement,D=O===void 0?V.defaults.toastElement:O,M=A.toastEvents,x=M===void 0?gl([],V.defaults.toastEvents,!0):M,B=A.toastHideClass,T=B===void 0?V.defaults.toastHideClass:B,J=A.toastShowClass,j=J===void 0?V.defaults.toastShowClass:J,H=A.type,N=H===void 0?V.defaults.toastType:H;if(!_)throw new TypeError("'content' cannot be empty.");if(this.animation=K,this.events=a,this.toastHideClass=T,this.toastShowClass=j,y||(y=this.getContainer({containerClass:w,containerElement:d,root:f})),this.container=y,s===!0&&(s=V.defaults.hideDelay),s!==!1&&s<100&&(s*=1e3),this.hideDelay=s,L<100&&(L*=1e3),this.build({closeLabel:v,content:_,toastClass:k,toastElement:D,toastEvents:x,type:N}),this.hideDelay!==!1&&this.autohide({animationDuration:L}),this.animation){window.requestAnimationFrame(function(){return W.show()});return}this.show()}return V.prototype.autohide=function(A){var W=this,q=A.animationDuration;if(!!this.hideDelay)return window.setTimeout(function(){return W.hide()},this.hideDelay+(this.animation?q:0))},V.prototype.build=function(A){var W=this,q=A.closeLabel,K=A.content,p=A.toastClass,L=A.toastElement,g=A.toastEvents,v=A.type;this.element=document.createElement(L),this.element.setAttribute("title",K),this.element.setAttribute("role","status"),this.element.setAttribute("tabindex","0"),this.element.classList.add(p),this.element.classList.add("toast--".concat(v)),this.element.appendChild(this.buildClose(q)),this.element.appendChild(document.createTextNode(K)),this.element.addEventListener("keydown",function(C){C.key==="Escape"&&(C.preventDefault(),W.hide())}),g.forEach(function(C){W.element.addEventListener(C,function(y){W.trigger(C,y)})}),this.container.appendChild(this.element),this.trigger("build")},V.prototype.show=function(){this.element.classList.remove(this.toastHideClass),this.element.classList.add(this.toastShowClass),this.trigger("show")},V.prototype.hide=function(A){var W=this;if(A===void 0&&(A=!1),!(!A&&this.hasFocus)){if(!A&&this.element[_l](tf)&&this.element.addEventListener("mouseout",function(){W.hasFocus=!1,W.hideDelay>0&&W.hide()}),this.element.classList.remove(this.toastShowClass),this.element.classList.add(this.toastHideClass),this.trigger("hide"),this.animation){var q=function(){return W.remove()},K=function(){L||(W.element.addEventListener("transitionend",function(){return q()}),L=!0)},p=function(){W.show(),W.element.removeEventListener("transitionstart",function(){return K()}),W.element.removeEventListener("transitionend",function(){return q()}),W.element.removeEventListener("mouseover",function(){return p()}),W.element.addEventListener("mouseout",function(){return W.hide()})},L=!1;this.element.addEventListener("mouseover",function(){return p()}),this.element.addEventListener("transitionstart",function(){return K()});return}this.remove()}},V.prototype.remove=function(){this.element.parentNode===this.container&&(this.container.removeChild(this.element),this.trigger("remove"))},V.prototype.buildClose=function(A){var W=this,q=document.createElement("button");return q.setAttribute("title",A),q.appendChild(document.createTextNode(A)),q.addEventListener("click",function(){return W.hide()}),q},V.prototype.getContainer=function(A){var W=A.containerClass,q=A.containerElement,K=A.root,p=K.querySelector("".concat(q,".").concat(W));if(p)return p;var L=document.createElement(q);return L.classList.add(W),K.appendChild(L),L},V.prototype.on=function(A,W){this.events[A]||(this.events[A]=[]),this.events[A].push(W)},V.prototype.off=function(A,W){if(W===void 0&&(W=null),!W){this.events[A]=[];return}var q=this.events[A].indexOf(W);q===-1&&this.events[A].splice(q,1)},V.prototype.trigger=function(A){for(var W=this,q=[],K=1;K<arguments.length;K++)q[K-1]=arguments[K];(this.events[A]||[]).forEach(function(p){return p.apply(void 0,gl([W,W.element],q,!1))})},V.settings=function(A){V.defaults=fo(fo({},V.defaults),A)},V.defaults={animation:!0,animationDuration:400,closeLabel:"Close",containerClass:"toast__container",containerElement:"div",hide:!1,hideDelay:5,root:document.body,toastClass:"toast",toastElement:"div",toastEvents:["click","focus","keydown"],toastHideClass:"toast--hide",toastShowClass:"toast--show",toastType:"info"},V}();Qr.Melba=yl;Qr.default=yl});var Bl=ar((_o,us)=>{(function(V,A){if(typeof _o=="object"&&typeof us=="object")us.exports=A();else if(typeof define=="function"&&define.amd)define([],A);else{var W=A();for(var q in W)(typeof _o=="object"?_o:V)[q]=W[q]}})(self,function(){return(()=>{"use strict";var V={4567:function(K,p,L){var g,v=this&&this.__extends||(g=function(a,n){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])},g(a,n)},function(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=a}g(a,n),a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)});Object.defineProperty(p,"__esModule",{value:!0}),p.AccessibilityManager=void 0;var C=L(9042),y=L(6114),m=L(9924),w=L(3656),h=L(844),d=L(5596),_=L(9631),l=function(a){function n(s,c){var f=a.call(this)||this;f._terminal=s,f._renderService=c,f._liveRegionLineCount=0,f._charsToConsume=[],f._charsToAnnounce="",f._accessibilityTreeRoot=document.createElement("div"),f._accessibilityTreeRoot.setAttribute("role","document"),f._accessibilityTreeRoot.classList.add("xterm-accessibility"),f._accessibilityTreeRoot.tabIndex=0,f._rowContainer=document.createElement("div"),f._rowContainer.setAttribute("role","list"),f._rowContainer.classList.add("xterm-accessibility-tree"),f._rowElements=[];for(var b=0;b<f._terminal.rows;b++)f._rowElements[b]=f._createAccessibilityTreeNode(),f._rowContainer.appendChild(f._rowElements[b]);if(f._topBoundaryFocusListener=function(k){return f._onBoundaryFocus(k,0)},f._bottomBoundaryFocusListener=function(k){return f._onBoundaryFocus(k,1)},f._rowElements[0].addEventListener("focus",f._topBoundaryFocusListener),f._rowElements[f._rowElements.length-1].addEventListener("focus",f._bottomBoundaryFocusListener),f._refreshRowsDimensions(),f._accessibilityTreeRoot.appendChild(f._rowContainer),f._renderRowsDebouncer=new m.TimeBasedDebouncer(f._renderRows.bind(f)),f._refreshRows(),f._liveRegion=document.createElement("div"),f._liveRegion.classList.add("live-region"),f._liveRegion.setAttribute("aria-live","assertive"),f._accessibilityTreeRoot.appendChild(f._liveRegion),!f._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return f._terminal.element.insertAdjacentElement("afterbegin",f._accessibilityTreeRoot),f.register(f._renderRowsDebouncer),f.register(f._terminal.onResize(function(k){return f._onResize(k.rows)})),f.register(f._terminal.onRender(function(k){return f._refreshRows(k.start,k.end)})),f.register(f._terminal.onScroll(function(){return f._refreshRows()})),f.register(f._terminal.onA11yChar(function(k){return f._onChar(k)})),f.register(f._terminal.onLineFeed(function(){return f._onChar(`
`)})),f.register(f._terminal.onA11yTab(function(k){return f._onTab(k)})),f.register(f._terminal.onKey(function(k){return f._onKey(k.key)})),f.register(f._terminal.onBlur(function(){return f._clearLiveRegion()})),f.register(f._renderService.onDimensionsChange(function(){return f._refreshRowsDimensions()})),f._screenDprMonitor=new d.ScreenDprMonitor,f.register(f._screenDprMonitor),f._screenDprMonitor.setListener(function(){return f._refreshRowsDimensions()}),f.register((0,w.addDisposableDomListener)(window,"resize",function(){return f._refreshRowsDimensions()})),f}return v(n,a),n.prototype.dispose=function(){a.prototype.dispose.call(this),(0,_.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},n.prototype._onBoundaryFocus=function(s,c){var f=s.target,b=this._rowElements[c===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")!==(c===0?"1":""+this._terminal.buffer.lines.length)&&s.relatedTarget===b){var k,O;if(c===0?(k=f,O=this._rowElements.pop(),this._rowContainer.removeChild(O)):(k=this._rowElements.shift(),O=f,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),O.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){var D=this._createAccessibilityTreeNode();this._rowElements.unshift(D),this._rowContainer.insertAdjacentElement("afterbegin",D)}else D=this._createAccessibilityTreeNode(),this._rowElements.push(D),this._rowContainer.appendChild(D);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}},n.prototype._onResize=function(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},n.prototype._createAccessibilityTreeNode=function(){var s=document.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s},n.prototype._onTab=function(s){for(var c=0;c<s;c++)this._onChar(" ")},n.prototype._onChar=function(s){var c=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=C.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){c._accessibilityTreeRoot.appendChild(c._liveRegion)},0))},n.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&(0,_.removeElementFromParent)(this._liveRegion)},n.prototype._onKey=function(s){this._clearLiveRegion(),this._charsToConsume.push(s)},n.prototype._refreshRows=function(s,c){this._renderRowsDebouncer.refresh(s,c,this._terminal.rows)},n.prototype._renderRows=function(s,c){for(var f=this._terminal.buffer,b=f.lines.length.toString(),k=s;k<=c;k++){var O=f.translateBufferLineToString(f.ydisp+k,!0),D=(f.ydisp+k+1).toString(),M=this._rowElements[k];M&&(O.length===0?M.innerText="\xA0":M.textContent=O,M.setAttribute("aria-posinset",D),M.setAttribute("aria-setsize",b))}this._announceCharacters()},n.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}},n.prototype._refreshRowDimensions=function(s){s.style.height=this._renderService.dimensions.actualCellHeight+"px"},n.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},n}(h.Disposable);p.AccessibilityManager=l},3614:(K,p)=>{function L(y){return y.replace(/\r?\n/g,"\r")}function g(y,m){return m?"\x1B[200~"+y+"\x1B[201~":y}function v(y,m,w){y=g(y=L(y),w.decPrivateModes.bracketedPasteMode),w.triggerDataEvent(y,!0),m.value=""}function C(y,m,w){var h=w.getBoundingClientRect(),d=y.clientX-h.left-10,_=y.clientY-h.top-10;m.style.width="20px",m.style.height="20px",m.style.left=d+"px",m.style.top=_+"px",m.style.zIndex="1000",m.focus()}Object.defineProperty(p,"__esModule",{value:!0}),p.rightClickHandler=p.moveTextAreaUnderMouseCursor=p.paste=p.handlePasteEvent=p.copyHandler=p.bracketTextForPaste=p.prepareTextForTerminal=void 0,p.prepareTextForTerminal=L,p.bracketTextForPaste=g,p.copyHandler=function(y,m){y.clipboardData&&y.clipboardData.setData("text/plain",m.selectionText),y.preventDefault()},p.handlePasteEvent=function(y,m,w){y.stopPropagation(),y.clipboardData&&v(y.clipboardData.getData("text/plain"),m,w)},p.paste=v,p.moveTextAreaUnderMouseCursor=C,p.rightClickHandler=function(y,m,w,h,d){C(y,m,w),d&&h.rightClickSelect(y),m.value=h.selectionText,m.select()}},4774:(K,p)=>{var L,g,v,C;function y(w){var h=w.toString(16);return h.length<2?"0"+h:h}function m(w,h){return w<h?(h+.05)/(w+.05):(w+.05)/(h+.05)}Object.defineProperty(p,"__esModule",{value:!0}),p.contrastRatio=p.toPaddedHex=p.rgba=p.rgb=p.css=p.color=p.channels=void 0,function(w){w.toCss=function(h,d,_,l){return l!==void 0?"#"+y(h)+y(d)+y(_)+y(l):"#"+y(h)+y(d)+y(_)},w.toRgba=function(h,d,_,l){return l===void 0&&(l=255),(h<<24|d<<16|_<<8|l)>>>0}}(L=p.channels||(p.channels={})),(g=p.color||(p.color={})).blend=function(w,h){var d=(255&h.rgba)/255;if(d===1)return{css:h.css,rgba:h.rgba};var _=h.rgba>>24&255,l=h.rgba>>16&255,a=h.rgba>>8&255,n=w.rgba>>24&255,s=w.rgba>>16&255,c=w.rgba>>8&255,f=n+Math.round((_-n)*d),b=s+Math.round((l-s)*d),k=c+Math.round((a-c)*d);return{css:L.toCss(f,b,k),rgba:L.toRgba(f,b,k)}},g.isOpaque=function(w){return(255&w.rgba)==255},g.ensureContrastRatio=function(w,h,d){var _=C.ensureContrastRatio(w.rgba,h.rgba,d);if(_)return C.toColor(_>>24&255,_>>16&255,_>>8&255)},g.opaque=function(w){var h=(255|w.rgba)>>>0,d=C.toChannels(h),_=d[0],l=d[1],a=d[2];return{css:L.toCss(_,l,a),rgba:h}},g.opacity=function(w,h){var d=Math.round(255*h),_=C.toChannels(w.rgba),l=_[0],a=_[1],n=_[2];return{css:L.toCss(l,a,n,d),rgba:L.toRgba(l,a,n,d)}},g.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]},(p.css||(p.css={})).toColor=function(w){switch(w.length){case 7:return{css:w,rgba:(parseInt(w.slice(1),16)<<8|255)>>>0};case 9:return{css:w,rgba:parseInt(w.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(w){function h(d,_,l){var a=d/255,n=_/255,s=l/255;return .2126*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}w.relativeLuminance=function(d){return h(d>>16&255,d>>8&255,255&d)},w.relativeLuminance2=h}(v=p.rgb||(p.rgb={})),function(w){function h(_,l,a){for(var n=_>>24&255,s=_>>16&255,c=_>>8&255,f=l>>24&255,b=l>>16&255,k=l>>8&255,O=m(v.relativeLuminance2(f,k,b),v.relativeLuminance2(n,s,c));O<a&&(f>0||b>0||k>0);)f-=Math.max(0,Math.ceil(.1*f)),b-=Math.max(0,Math.ceil(.1*b)),k-=Math.max(0,Math.ceil(.1*k)),O=m(v.relativeLuminance2(f,k,b),v.relativeLuminance2(n,s,c));return(f<<24|b<<16|k<<8|255)>>>0}function d(_,l,a){for(var n=_>>24&255,s=_>>16&255,c=_>>8&255,f=l>>24&255,b=l>>16&255,k=l>>8&255,O=m(v.relativeLuminance2(f,k,b),v.relativeLuminance2(n,s,c));O<a&&(f<255||b<255||k<255);)f=Math.min(255,f+Math.ceil(.1*(255-f))),b=Math.min(255,b+Math.ceil(.1*(255-b))),k=Math.min(255,k+Math.ceil(.1*(255-k))),O=m(v.relativeLuminance2(f,k,b),v.relativeLuminance2(n,s,c));return(f<<24|b<<16|k<<8|255)>>>0}w.ensureContrastRatio=function(_,l,a){var n=v.relativeLuminance(_>>8),s=v.relativeLuminance(l>>8);if(m(n,s)<a)return s<n?h(_,l,a):d(_,l,a)},w.reduceLuminance=h,w.increaseLuminance=d,w.toChannels=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},w.toColor=function(_,l,a){return{css:L.toCss(_,l,a),rgba:L.toRgba(_,l,a)}}}(C=p.rgba||(p.rgba={})),p.toPaddedHex=y,p.contrastRatio=m},7239:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorContrastCache=void 0;var L=function(){function g(){this._color={},this._rgba={}}return g.prototype.clear=function(){this._color={},this._rgba={}},g.prototype.setCss=function(v,C,y){this._rgba[v]||(this._rgba[v]={}),this._rgba[v][C]=y},g.prototype.getCss=function(v,C){return this._rgba[v]?this._rgba[v][C]:void 0},g.prototype.setColor=function(v,C,y){this._color[v]||(this._color[v]={}),this._color[v][C]=y},g.prototype.getColor=function(v,C){return this._color[v]?this._color[v][C]:void 0},g}();p.ColorContrastCache=L},5680:function(K,p,L){var g=this&&this.__spreadArray||function(l,a,n){if(n||arguments.length===2)for(var s,c=0,f=a.length;c<f;c++)!s&&c in a||(s||(s=Array.prototype.slice.call(a,0,c)),s[c]=a[c]);return l.concat(s||Array.prototype.slice.call(a))};Object.defineProperty(p,"__esModule",{value:!0}),p.ColorManager=p.DEFAULT_ANSI_COLORS=void 0;var v=L(4774),C=L(7239),y=v.css.toColor("#ffffff"),m=v.css.toColor("#000000"),w=v.css.toColor("#ffffff"),h=v.css.toColor("#000000"),d={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};p.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var l=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],a=[0,95,135,175,215,255],n=0;n<216;n++){var s=a[n/36%6|0],c=a[n/6%6|0],f=a[n%6];l.push({css:v.channels.toCss(s,c,f),rgba:v.channels.toRgba(s,c,f)})}for(n=0;n<24;n++){var b=8+10*n;l.push({css:v.channels.toCss(b,b,b),rgba:v.channels.toRgba(b,b,b)})}return l}());var _=function(){function l(a,n){this.allowTransparency=n;var s=a.createElement("canvas");s.width=1,s.height=1;var c=s.getContext("2d");if(!c)throw new Error("Could not get rendering context");this._ctx=c,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new C.ColorContrastCache,this.colors={foreground:y,background:m,cursor:w,cursorAccent:h,selectionTransparent:d,selectionOpaque:v.color.blend(m,d),ansi:p.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return l.prototype.onOptionsChange=function(a){a==="minimumContrastRatio"&&this._contrastCache.clear()},l.prototype.setTheme=function(a){a===void 0&&(a={}),this.colors.foreground=this._parseColor(a.foreground,y),this.colors.background=this._parseColor(a.background,m),this.colors.cursor=this._parseColor(a.cursor,w,!0),this.colors.cursorAccent=this._parseColor(a.cursorAccent,h,!0),this.colors.selectionTransparent=this._parseColor(a.selection,d,!0),this.colors.selectionOpaque=v.color.blend(this.colors.background,this.colors.selectionTransparent),v.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=v.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(a.black,p.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(a.red,p.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(a.green,p.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(a.yellow,p.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(a.blue,p.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(a.magenta,p.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(a.cyan,p.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(a.white,p.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(a.brightBlack,p.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(a.brightRed,p.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(a.brightGreen,p.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(a.brightYellow,p.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(a.brightBlue,p.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(a.brightMagenta,p.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(a.brightCyan,p.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(a.brightWhite,p.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},l.prototype.restoreColor=function(a){if(a!==void 0)switch(a){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[a]=this._restoreColors.ansi[a]}else for(var n=0;n<this._restoreColors.ansi.length;++n)this.colors.ansi[n]=this._restoreColors.ansi[n]},l.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:g([],this.colors.ansi,!0)}},l.prototype._parseColor=function(a,n,s){if(s===void 0&&(s=this.allowTransparency),a===void 0)return n;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=a,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+a+" is invalid using fallback "+n.css),n;this._ctx.fillRect(0,0,1,1);var c=this._ctx.getImageData(0,0,1,1).data;if(c[3]!==255){if(!s)return console.warn("Color: "+a+" is using transparency, but allowTransparency is false. Using fallback "+n.css+"."),n;var f=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(x){return Number(x)}),b=f[0],k=f[1],O=f[2],D=f[3],M=Math.round(255*D);return{rgba:v.channels.toRgba(b,k,O,M),css:a}}return{css:this._ctx.fillStyle,rgba:v.channels.toRgba(c[0],c[1],c[2],c[3])}},l}();p.ColorManager=_},9631:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.removeElementFromParent=void 0,p.removeElementFromParent=function(){for(var L,g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];for(var C=0,y=g;C<y.length;C++){var m=y[C];(L=m==null?void 0:m.parentElement)===null||L===void 0||L.removeChild(m)}}},3656:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addDisposableDomListener=void 0,p.addDisposableDomListener=function(L,g,v,C){L.addEventListener(g,v,C);var y=!1;return{dispose:function(){y||(y=!0,L.removeEventListener(g,v,C))}}}},3551:function(K,p,L){var g=this&&this.__decorate||function(h,d,_,l){var a,n=arguments.length,s=n<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,_):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(h,d,_,l);else for(var c=h.length-1;c>=0;c--)(a=h[c])&&(s=(n<3?a(s):n>3?a(d,_,s):a(d,_))||s);return n>3&&s&&Object.defineProperty(d,_,s),s},v=this&&this.__param||function(h,d){return function(_,l){d(_,l,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseZone=p.Linkifier=void 0;var C=L(8460),y=L(2585),m=function(){function h(d,_,l){this._bufferService=d,this._logService=_,this._unicodeService=l,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new C.EventEmitter,this._onHideLinkUnderline=new C.EventEmitter,this._onLinkTooltip=new C.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(h.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),h.prototype.attachToDom=function(d,_){this._element=d,this._mouseZoneManager=_},h.prototype.linkifyRows=function(d,_){var l=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=d,this._rowsToLinkify.end=_):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,d),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,_)),this._mouseZoneManager.clearAll(d,_),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return l._linkifyRows()},h._timeBeforeLatency))},h.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var d=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var _=d.ydisp+this._rowsToLinkify.start;if(!(_>=d.lines.length)){for(var l=d.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,a=Math.ceil(2e3/this._bufferService.cols),n=this._bufferService.buffer.iterator(!1,_,l,a,a);n.hasNext();)for(var s=n.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(s.range.first,s.content,this._linkMatchers[c]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},h.prototype.registerLinkMatcher=function(d,_,l){if(l===void 0&&(l={}),!_)throw new Error("handler must be defined");var a={id:this._nextLinkMatcherId++,regex:d,handler:_,matchIndex:l.matchIndex,validationCallback:l.validationCallback,hoverTooltipCallback:l.tooltipCallback,hoverLeaveCallback:l.leaveCallback,willLinkActivate:l.willLinkActivate,priority:l.priority||0};return this._addLinkMatcherToList(a),a.id},h.prototype._addLinkMatcherToList=function(d){if(this._linkMatchers.length!==0){for(var _=this._linkMatchers.length-1;_>=0;_--)if(d.priority<=this._linkMatchers[_].priority)return void this._linkMatchers.splice(_+1,0,d);this._linkMatchers.splice(0,0,d)}else this._linkMatchers.push(d)},h.prototype.deregisterLinkMatcher=function(d){for(var _=0;_<this._linkMatchers.length;_++)if(this._linkMatchers[_].id===d)return this._linkMatchers.splice(_,1),!0;return!1},h.prototype._doLinkifyRow=function(d,_,l){for(var a,n=this,s=new RegExp(l.regex.source,(l.regex.flags||"")+"g"),c=-1,f=function(){var k=a[typeof l.matchIndex!="number"?0:l.matchIndex];if(!k)return b._logService.debug("match found without corresponding matchIndex",a,l),"break";if(c=_.indexOf(k,c+1),s.lastIndex=c+k.length,c<0)return"break";var O=b._bufferService.buffer.stringIndexToBufferIndex(d,c);if(O[0]<0)return"break";var D=b._bufferService.buffer.lines.get(O[0]);if(!D)return"break";var M=D.getFg(O[1]),x=M?M>>9&511:void 0;l.validationCallback?l.validationCallback(k,function(B){n._rowsTimeoutId||B&&n._addLink(O[1],O[0]-n._bufferService.buffer.ydisp,k,l,x)}):b._addLink(O[1],O[0]-b._bufferService.buffer.ydisp,k,l,x)},b=this;(a=s.exec(_))!==null&&f()!=="break";);},h.prototype._addLink=function(d,_,l,a,n){var s=this;if(this._mouseZoneManager&&this._element){var c=this._unicodeService.getStringCellWidth(l),f=d%this._bufferService.cols,b=_+Math.floor(d/this._bufferService.cols),k=(f+c)%this._bufferService.cols,O=b+Math.floor((f+c)/this._bufferService.cols);k===0&&(k=this._bufferService.cols,O--),this._mouseZoneManager.add(new w(f+1,b+1,k+1,O+1,function(D){if(a.handler)return a.handler(D,l);var M=window.open();M?(M.opener=null,M.location.href=l):console.warn("Opening link blocked as opener could not be cleared")},function(){s._onShowLinkUnderline.fire(s._createLinkHoverEvent(f,b,k,O,n)),s._element.classList.add("xterm-cursor-pointer")},function(D){s._onLinkTooltip.fire(s._createLinkHoverEvent(f,b,k,O,n)),a.hoverTooltipCallback&&a.hoverTooltipCallback(D,l,{start:{x:f,y:b},end:{x:k,y:O}})},function(){s._onHideLinkUnderline.fire(s._createLinkHoverEvent(f,b,k,O,n)),s._element.classList.remove("xterm-cursor-pointer"),a.hoverLeaveCallback&&a.hoverLeaveCallback()},function(D){return!a.willLinkActivate||a.willLinkActivate(D,l)}))}},h.prototype._createLinkHoverEvent=function(d,_,l,a,n){return{x1:d,y1:_,x2:l,y2:a,cols:this._bufferService.cols,fg:n}},h._timeBeforeLatency=200,h=g([v(0,y.IBufferService),v(1,y.ILogService),v(2,y.IUnicodeService)],h)}();p.Linkifier=m;var w=function(h,d,_,l,a,n,s,c,f){this.x1=h,this.y1=d,this.x2=_,this.y2=l,this.clickCallback=a,this.hoverCallback=n,this.tooltipCallback=s,this.leaveCallback=c,this.willLinkActivate=f};p.MouseZone=w},6465:function(K,p,L){var g,v=this&&this.__extends||(g=function(l,a){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},g(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=l}g(l,a),l.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}),C=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},y=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Linkifier2=void 0;var m=L(2585),w=L(8460),h=L(844),d=L(3656),_=function(l){function a(n){var s=l.call(this)||this;return s._bufferService=n,s._linkProviders=[],s._linkCacheDisposables=[],s._isMouseOut=!0,s._activeLine=-1,s._onShowLinkUnderline=s.register(new w.EventEmitter),s._onHideLinkUnderline=s.register(new w.EventEmitter),s.register((0,h.getDisposeArrayDisposable)(s._linkCacheDisposables)),s}return v(a,l),Object.defineProperty(a.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),a.prototype.registerLinkProvider=function(n){var s=this;return this._linkProviders.push(n),{dispose:function(){var c=s._linkProviders.indexOf(n);c!==-1&&s._linkProviders.splice(c,1)}}},a.prototype.attachToDom=function(n,s,c){var f=this;this._element=n,this._mouseService=s,this._renderService=c,this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",function(){f._isMouseOut=!0,f._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},a.prototype._onMouseMove=function(n){if(this._lastMouseEvent=n,this._element&&this._mouseService){var s=this._positionFromMouseEvent(n,this._element,this._mouseService);if(s){this._isMouseOut=!1;for(var c=n.composedPath(),f=0;f<c.length;f++){var b=c[f];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._onHover(s),this._lastBufferCell=s)}}},a.prototype._onHover=function(n){if(this._activeLine!==n.y)return this._clearCurrentLink(),void this._askForLink(n,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))},a.prototype._askForLink=function(n,s){var c,f=this;this._activeProviderReplies&&s||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(function(k){k==null||k.forEach(function(O){O.link.dispose&&O.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);var b=!1;this._linkProviders.forEach(function(k,O){var D;s?((D=f._activeProviderReplies)===null||D===void 0?void 0:D.get(O))&&(b=f._checkLinkProviderResult(O,n,b)):k.provideLinks(n.y,function(M){var x,B;if(!f._isMouseOut){var T=M==null?void 0:M.map(function(J){return{link:J}});(x=f._activeProviderReplies)===null||x===void 0||x.set(O,T),b=f._checkLinkProviderResult(O,n,b),((B=f._activeProviderReplies)===null||B===void 0?void 0:B.size)===f._linkProviders.length&&f._removeIntersectingLinks(n.y,f._activeProviderReplies)}})})},a.prototype._removeIntersectingLinks=function(n,s){for(var c=new Set,f=0;f<s.size;f++){var b=s.get(f);if(b)for(var k=0;k<b.length;k++)for(var O=b[k],D=O.link.range.start.y<n?0:O.link.range.start.x,M=O.link.range.end.y>n?this._bufferService.cols:O.link.range.end.x,x=D;x<=M;x++){if(c.has(x)){b.splice(k--,1);break}c.add(x)}}},a.prototype._checkLinkProviderResult=function(n,s,c){var f,b=this;if(!this._activeProviderReplies)return c;for(var k=this._activeProviderReplies.get(n),O=!1,D=0;D<n;D++)this._activeProviderReplies.has(D)&&!this._activeProviderReplies.get(D)||(O=!0);if(!O&&k){var M=k.find(function(B){return b._linkAtPosition(B.link,s)});M&&(c=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(D=0;D<this._activeProviderReplies.size;D++){var x=(f=this._activeProviderReplies.get(D))===null||f===void 0?void 0:f.find(function(B){return b._linkAtPosition(B.link,s)});if(x){c=!0,this._handleNewLink(x);break}}return c},a.prototype._onClick=function(n){if(this._element&&this._mouseService&&this._currentLink){var s=this._positionFromMouseEvent(n,this._element,this._mouseService);s&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(n,this._currentLink.link.text)}},a.prototype._clearCurrentLink=function(n,s){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!s||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))},a.prototype._handleNewLink=function(n){var s=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(n.link,c)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:function(){var f,b;return(b=(f=s._currentLink)===null||f===void 0?void 0:f.state)===null||b===void 0?void 0:b.decorations.pointerCursor},set:function(f){var b,k;((b=s._currentLink)===null||b===void 0?void 0:b.state)&&s._currentLink.state.decorations.pointerCursor!==f&&(s._currentLink.state.decorations.pointerCursor=f,s._currentLink.state.isHovered&&((k=s._element)===null||k===void 0||k.classList.toggle("xterm-cursor-pointer",f)))}},underline:{get:function(){var f,b;return(b=(f=s._currentLink)===null||f===void 0?void 0:f.state)===null||b===void 0?void 0:b.decorations.underline},set:function(f){var b,k,O;((b=s._currentLink)===null||b===void 0?void 0:b.state)&&((O=(k=s._currentLink)===null||k===void 0?void 0:k.state)===null||O===void 0?void 0:O.decorations.underline)!==f&&(s._currentLink.state.decorations.underline=f,s._currentLink.state.isHovered&&s._fireUnderlineEvent(n.link,f))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(f){var b=f.start===0?0:f.start+1+s._bufferService.buffer.ydisp;s._clearCurrentLink(b,f.end+1+s._bufferService.buffer.ydisp)})))}},a.prototype._linkHover=function(n,s,c){var f;((f=this._currentLink)===null||f===void 0?void 0:f.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(c,s.text)},a.prototype._fireUnderlineEvent=function(n,s){var c=n.range,f=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-f-1,c.end.x,c.end.y-f-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)},a.prototype._linkLeave=function(n,s,c){var f;((f=this._currentLink)===null||f===void 0?void 0:f.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(c,s.text)},a.prototype._linkAtPosition=function(n,s){var c=n.range.start.y===n.range.end.y,f=n.range.start.y<s.y,b=n.range.end.y>s.y;return(c&&n.range.start.x<=s.x&&n.range.end.x>=s.x||f&&n.range.end.x>=s.x||b&&n.range.start.x<=s.x||f&&b)&&n.range.start.y<=s.y&&n.range.end.y>=s.y},a.prototype._positionFromMouseEvent=function(n,s,c){var f=c.getCoords(n,s,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}},a.prototype._createLinkUnderlineEvent=function(n,s,c,f,b){return{x1:n,y1:s,x2:c,y2:f,cols:this._bufferService.cols,fg:b}},C([y(0,m.IBufferService)],a)}(h.Disposable);p.Linkifier2=_},9042:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.tooMuchOutput=p.promptLabel=void 0,p.promptLabel="Terminal input",p.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(K,p,L){var g,v=this&&this.__extends||(g=function(l,a){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},g(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=l}g(l,a),l.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}),C=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},y=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseZoneManager=void 0;var m=L(844),w=L(3656),h=L(4725),d=L(2585),_=function(l){function a(n,s,c,f,b,k){var O=l.call(this)||this;return O._element=n,O._screenElement=s,O._bufferService=c,O._mouseService=f,O._selectionService=b,O._optionsService=k,O._zones=[],O._areZonesActive=!1,O._lastHoverCoords=[void 0,void 0],O._initialSelectionLength=0,O.register((0,w.addDisposableDomListener)(O._element,"mousedown",function(D){return O._onMouseDown(D)})),O._mouseMoveListener=function(D){return O._onMouseMove(D)},O._mouseLeaveListener=function(D){return O._onMouseLeave(D)},O._clickListener=function(D){return O._onClick(D)},O}return v(a,l),a.prototype.dispose=function(){l.prototype.dispose.call(this),this._deactivate()},a.prototype.add=function(n){this._zones.push(n),this._zones.length===1&&this._activate()},a.prototype.clearAll=function(n,s){if(this._zones.length!==0){n&&s||(n=0,s=this._bufferService.rows-1);for(var c=0;c<this._zones.length;c++){var f=this._zones[c];(f.y1>n&&f.y1<=s+1||f.y2>n&&f.y2<=s+1||f.y1<n&&f.y2>s+1)&&(this._currentZone&&this._currentZone===f&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(c--,1))}this._zones.length===0&&this._deactivate()}},a.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},a.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},a.prototype._onMouseMove=function(n){this._lastHoverCoords[0]===n.pageX&&this._lastHoverCoords[1]===n.pageY||(this._onHover(n),this._lastHoverCoords=[n.pageX,n.pageY])},a.prototype._onHover=function(n){var s=this,c=this._findZoneEventAt(n);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(n),this._tooltipTimeout=window.setTimeout(function(){return s._onTooltip(n)},this._optionsService.options.linkTooltipHoverDuration)))},a.prototype._onTooltip=function(n){this._tooltipTimeout=void 0;var s=this._findZoneEventAt(n);s==null||s.tooltipCallback(n)},a.prototype._onMouseDown=function(n){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var s=this._findZoneEventAt(n);(s==null?void 0:s.willLinkActivate(n))&&(n.preventDefault(),n.stopImmediatePropagation())}},a.prototype._onMouseLeave=function(n){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},a.prototype._onClick=function(n){var s=this._findZoneEventAt(n),c=this._getSelectionLength();s&&c===this._initialSelectionLength&&(s.clickCallback(n),n.preventDefault(),n.stopImmediatePropagation())},a.prototype._getSelectionLength=function(){var n=this._selectionService.selectionText;return n?n.length:0},a.prototype._findZoneEventAt=function(n){var s=this._mouseService.getCoords(n,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(s)for(var c=s[0],f=s[1],b=0;b<this._zones.length;b++){var k=this._zones[b];if(k.y1===k.y2){if(f===k.y1&&c>=k.x1&&c<k.x2)return k}else if(f===k.y1&&c>=k.x1||f===k.y2&&c<k.x2||f>k.y1&&f<k.y2)return k}},C([y(2,d.IBufferService),y(3,h.IMouseService),y(4,h.ISelectionService),y(5,d.IOptionsService)],a)}(m.Disposable);p.MouseZoneManager=_},6193:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.RenderDebouncer=void 0;var L=function(){function g(v){this._renderCallback=v}return g.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},g.prototype.refresh=function(v,C,y){var m=this;this._rowCount=y,v=v!==void 0?v:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,v):v,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return m._innerRefresh()}))},g.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var v=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(v,C)}},g}();p.RenderDebouncer=L},5596:function(K,p,L){var g,v=this&&this.__extends||(g=function(y,m){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,h){w.__proto__=h}||function(w,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(w[d]=h[d])},g(y,m)},function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function w(){this.constructor=y}g(y,m),y.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)});Object.defineProperty(p,"__esModule",{value:!0}),p.ScreenDprMonitor=void 0;var C=function(y){function m(){var w=y!==null&&y.apply(this,arguments)||this;return w._currentDevicePixelRatio=window.devicePixelRatio,w}return v(m,y),m.prototype.setListener=function(w){var h=this;this._listener&&this.clearListener(),this._listener=w,this._outerListener=function(){h._listener&&(h._listener(window.devicePixelRatio,h._currentDevicePixelRatio),h._updateDpr())},this._updateDpr()},m.prototype.dispose=function(){y.prototype.dispose.call(this),this.clearListener()},m.prototype._updateDpr=function(){var w;this._outerListener&&((w=this._resolutionMediaMatchList)===null||w===void 0||w.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},m.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},m}(L(844).Disposable);p.ScreenDprMonitor=C},3236:function(K,p,L){var g,v=this&&this.__extends||(g=function(he,F){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,G){z.__proto__=G}||function(z,G){for(var ce in G)Object.prototype.hasOwnProperty.call(G,ce)&&(z[ce]=G[ce])},g(he,F)},function(he,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function z(){this.constructor=he}g(he,F),he.prototype=F===null?Object.create(F):(z.prototype=F.prototype,new z)});Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;var C=L(2950),y=L(1680),m=L(3614),w=L(2584),h=L(5435),d=L(3525),_=L(3551),l=L(9312),a=L(6114),n=L(3656),s=L(9042),c=L(357),f=L(6954),b=L(4567),k=L(1296),O=L(7399),D=L(8460),M=L(8437),x=L(5680),B=L(3230),T=L(4725),J=L(428),j=L(8934),H=L(6465),N=L(5114),Z=L(8969),Q=L(4774),ae=L(4269),se=L(5941),me=typeof window!="undefined"?window.document:null,we=function(he){function F(z){z===void 0&&(z={});var G=he.call(this,z)||this;return G.browser=a,G._keyDownHandled=!1,G._keyPressHandled=!1,G._unprocessedDeadKey=!1,G._onCursorMove=new D.EventEmitter,G._onKey=new D.EventEmitter,G._onRender=new D.EventEmitter,G._onSelectionChange=new D.EventEmitter,G._onTitleChange=new D.EventEmitter,G._onBell=new D.EventEmitter,G._onFocus=new D.EventEmitter,G._onBlur=new D.EventEmitter,G._onA11yCharEmitter=new D.EventEmitter,G._onA11yTabEmitter=new D.EventEmitter,G._setup(),G.linkifier=G._instantiationService.createInstance(_.Linkifier),G.linkifier2=G.register(G._instantiationService.createInstance(H.Linkifier2)),G.register(G._inputHandler.onRequestBell(function(){return G.bell()})),G.register(G._inputHandler.onRequestRefreshRows(function(ce,$){return G.refresh(ce,$)})),G.register(G._inputHandler.onRequestSendFocus(function(){return G._reportFocus()})),G.register(G._inputHandler.onRequestReset(function(){return G.reset()})),G.register(G._inputHandler.onRequestWindowsOptionsReport(function(ce){return G._reportWindowsOptions(ce)})),G.register(G._inputHandler.onColor(function(ce){return G._handleColorEvent(ce)})),G.register((0,D.forwardEvent)(G._inputHandler.onCursorMove,G._onCursorMove)),G.register((0,D.forwardEvent)(G._inputHandler.onTitleChange,G._onTitleChange)),G.register((0,D.forwardEvent)(G._inputHandler.onA11yChar,G._onA11yCharEmitter)),G.register((0,D.forwardEvent)(G._inputHandler.onA11yTab,G._onA11yTabEmitter)),G.register(G._bufferService.onResize(function(ce){return G._afterResize(ce.cols,ce.rows)})),G}return v(F,he),Object.defineProperty(F.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),F.prototype._handleColorEvent=function(z){var G,ce;if(this._colorManager){for(var $=0,ge=z;$<ge.length;$++){var Le=ge[$],Be=void 0,Ee="";switch(Le.index){case 256:Be="foreground",Ee="10";break;case 257:Be="background",Ee="11";break;case 258:Be="cursor",Ee="12";break;default:Be="ansi",Ee="4;"+Le.index}if(Be)switch(Le.type){case 0:var He=Q.color.toColorRGB(Be==="ansi"?this._colorManager.colors.ansi[Le.index]:this._colorManager.colors[Be]);this.coreService.triggerDataEvent(w.C0.ESC+"]"+Ee+";"+(0,se.toRgbString)(He)+w.C0.BEL);break;case 1:Be==="ansi"?this._colorManager.colors.ansi[Le.index]=Q.rgba.toColor.apply(Q.rgba,Le.color):this._colorManager.colors[Be]=Q.rgba.toColor.apply(Q.rgba,Le.color);break;case 2:this._colorManager.restoreColor(Le.index)}}(G=this._renderService)===null||G===void 0||G.setColors(this._colorManager.colors),(ce=this.viewport)===null||ce===void 0||ce.onThemeChange(this._colorManager.colors)}},F.prototype.dispose=function(){var z,G,ce;this._isDisposed||(he.prototype.dispose.call(this),(z=this._renderService)===null||z===void 0||z.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(ce=(G=this.element)===null||G===void 0?void 0:G.parentNode)===null||ce===void 0||ce.removeChild(this.element))},F.prototype._setup=function(){he.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(F.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),F.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},F.prototype._updateOptions=function(z){var G,ce,$,ge;switch(he.prototype._updateOptions.call(this,z),z){case"fontFamily":case"fontSize":(G=this._renderService)===null||G===void 0||G.clear(),(ce=this._charSizeService)===null||ce===void 0||ce.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":($=this.viewport)===null||$===void 0||$.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new b.AccessibilityManager(this,this._renderService)):((ge=this._accessibilityManager)===null||ge===void 0||ge.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},F.prototype._onTextAreaFocus=function(z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(w.C0.ESC+"[I"),this.updateCursorStyle(z),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},F.prototype.blur=function(){var z;return(z=this.textarea)===null||z===void 0?void 0:z.blur()},F.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(w.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},F.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var z=this.buffer.ybase+this.buffer.y,G=this.buffer.lines.get(z);if(G){var ce=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.actualCellHeight,ge=G.getWidth(ce),Le=this._renderService.dimensions.actualCellWidth*ge,Be=this.buffer.y*this._renderService.dimensions.actualCellHeight,Ee=ce*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Ee+"px",this.textarea.style.top=Be+"px",this.textarea.style.width=Le+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}}},F.prototype._initGlobal=function(){var z=this;this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",function(ce){z.hasSelection()&&(0,m.copyHandler)(ce,z._selectionService)}));var G=function(ce){return(0,m.handlePasteEvent)(ce,z.textarea,z.coreService)};this.register((0,n.addDisposableDomListener)(this.textarea,"paste",G)),this.register((0,n.addDisposableDomListener)(this.element,"paste",G)),a.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(ce){ce.button===2&&(0,m.rightClickHandler)(ce,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",function(ce){(0,m.rightClickHandler)(ce,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)})),a.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",function(ce){ce.button===1&&(0,m.moveTextAreaUnderMouseCursor)(ce,z.textarea,z.screenElement)}))},F.prototype._bindKeys=function(){var z=this;this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",function(G){return z._keyUp(G)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",function(G){return z._keyDown(G)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",function(G){return z._keyPress(G)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",function(){return z._compositionHelper.compositionstart()})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",function(G){return z._compositionHelper.compositionupdate(G)})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",function(){return z._compositionHelper.compositionend()})),this.register((0,n.addDisposableDomListener)(this.textarea,"input",function(G){return z._inputEvent(G)},!0)),this.register(this.onRender(function(){return z._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(G){return z._queueLinkification(G.start,G.end)}))},F.prototype.open=function(z){var G=this;if(!z)throw new Error("Terminal requires a parent element.");z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=z.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),z.appendChild(this.element);var ce=me.createDocumentFragment();this._viewportElement=me.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ce.appendChild(this._viewportElement),this._viewportScrollArea=me.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=me.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=me.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ce.appendChild(this.screenElement),this.textarea=me.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,n.addDisposableDomListener)(this.textarea,"focus",function(Le){return G._onTextAreaFocus(Le)})),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",function(){return G._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var $=this._instantiationService.createInstance(N.CoreBrowserService,this.textarea);this._instantiationService.setService(T.ICoreBrowserService,$),this._charSizeService=this._instantiationService.createInstance(J.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(T.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new x.ColorManager(me,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Le){return G._colorManager.onOptionsChange(Le)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(ae.CharacterJoinerService),this._instantiationService.setService(T.ICharacterJoinerService,this._characterJoinerService);var ge=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(B.RenderService,ge,this.rows,this.screenElement)),this._instantiationService.setService(T.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Le){return G._onRender.fire(Le)})),this.onResize(function(Le){return G._renderService.resize(Le.cols,Le.rows)}),this._compositionView=me.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(C.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ce),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(T.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(j.MouseService),this._instantiationService.setService(T.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,function(Le){return G.scrollLines(Le,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return G.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){G._renderService.onCursorMove(),G._syncTextArea()})),this.register(this.onResize(function(){return G._renderService.onResize(G.cols,G.rows)})),this.register(this.onBlur(function(){return G._renderService.onBlur()})),this.register(this.onFocus(function(){return G._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return G.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(l.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(T.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Le){return G.scrollLines(Le.amount,Le.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return G._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Le){return G._renderService.onSelectionChanged(Le.start,Le.end,Le.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Le){G.textarea.value=Le,G.textarea.focus(),G.textarea.select()})),this.register(this._onScroll.event(function(Le){G.viewport.syncScrollArea(),G._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",function(){return G._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(f.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return G._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(Le){return G._selectionService.onMouseDown(Le)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new b.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},F.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(d.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(k.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},F.prototype._setTheme=function(z){var G,ce,$;this._theme=z,(G=this._colorManager)===null||G===void 0||G.setTheme(z),(ce=this._renderService)===null||ce===void 0||ce.setColors(this._colorManager.colors),($=this.viewport)===null||$===void 0||$.onThemeChange(this._colorManager.colors)},F.prototype.bindMouse=function(){var z=this,G=this,ce=this.element;function $(Se){var ze,vt,At=G._mouseService.getRawByteCoords(Se,G.screenElement,G.cols,G.rows);if(!At)return!1;switch(Se.overrideType||Se.type){case"mousemove":vt=32,Se.buttons===void 0?(ze=3,Se.button!==void 0&&(ze=Se.button<3?Se.button:3)):ze=1&Se.buttons?0:4&Se.buttons?1:2&Se.buttons?2:3;break;case"mouseup":vt=0,ze=Se.button<3?Se.button:3;break;case"mousedown":vt=1,ze=Se.button<3?Se.button:3;break;case"wheel":Se.deltaY!==0&&(vt=Se.deltaY<0?0:1),ze=4;break;default:return!1}return!(vt===void 0||ze===void 0||ze>4)&&G.coreMouseService.triggerMouseEvent({col:At.x-33,row:At.y-33,button:ze,action:vt,ctrl:Se.ctrlKey,alt:Se.altKey,shift:Se.shiftKey})}var ge={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Le=function(Se){return $(Se),Se.buttons||(z._document.removeEventListener("mouseup",ge.mouseup),ge.mousedrag&&z._document.removeEventListener("mousemove",ge.mousedrag)),z.cancel(Se)},Be=function(Se){return $(Se),z.cancel(Se,!0)},Ee=function(Se){Se.buttons&&$(Se)},He=function(Se){Se.buttons||$(Se)};this.register(this.coreMouseService.onProtocolChange(function(Se){Se?(z.optionsService.options.logLevel==="debug"&&z._logService.debug("Binding to mouse events:",z.coreMouseService.explainEvents(Se)),z.element.classList.add("enable-mouse-events"),z._selectionService.disable()):(z._logService.debug("Unbinding from mouse events."),z.element.classList.remove("enable-mouse-events"),z._selectionService.enable()),8&Se?ge.mousemove||(ce.addEventListener("mousemove",He),ge.mousemove=He):(ce.removeEventListener("mousemove",ge.mousemove),ge.mousemove=null),16&Se?ge.wheel||(ce.addEventListener("wheel",Be,{passive:!1}),ge.wheel=Be):(ce.removeEventListener("wheel",ge.wheel),ge.wheel=null),2&Se?ge.mouseup||(ge.mouseup=Le):(z._document.removeEventListener("mouseup",ge.mouseup),ge.mouseup=null),4&Se?ge.mousedrag||(ge.mousedrag=Ee):(z._document.removeEventListener("mousemove",ge.mousedrag),ge.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(ce,"mousedown",function(Se){if(Se.preventDefault(),z.focus(),z.coreMouseService.areMouseEventsActive&&!z._selectionService.shouldForceSelection(Se))return $(Se),ge.mouseup&&z._document.addEventListener("mouseup",ge.mouseup),ge.mousedrag&&z._document.addEventListener("mousemove",ge.mousedrag),z.cancel(Se)})),this.register((0,n.addDisposableDomListener)(ce,"wheel",function(Se){if(!ge.wheel){if(!z.buffer.hasScrollback){var ze=z.viewport.getLinesScrolled(Se);if(ze===0)return;for(var vt=w.C0.ESC+(z.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Se.deltaY<0?"A":"B"),At="",Vt=0;Vt<Math.abs(ze);Vt++)At+=vt;return z.coreService.triggerDataEvent(At,!0),z.cancel(Se,!0)}return z.viewport.onWheel(Se)?z.cancel(Se):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(ce,"touchstart",function(Se){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchStart(Se),z.cancel(Se)},{passive:!0})),this.register((0,n.addDisposableDomListener)(ce,"touchmove",function(Se){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchMove(Se)?void 0:z.cancel(Se)},{passive:!1}))},F.prototype.refresh=function(z,G){var ce;(ce=this._renderService)===null||ce===void 0||ce.refreshRows(z,G)},F.prototype._queueLinkification=function(z,G){var ce;(ce=this.linkifier)===null||ce===void 0||ce.linkifyRows(z,G)},F.prototype.updateCursorStyle=function(z){var G;((G=this._selectionService)===null||G===void 0?void 0:G.shouldColumnSelect(z))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},F.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},F.prototype.scrollLines=function(z,G,ce){ce===void 0&&(ce=0),he.prototype.scrollLines.call(this,z,G,ce),this.refresh(0,this.rows-1)},F.prototype.paste=function(z){(0,m.paste)(z,this.textarea,this.coreService)},F.prototype.attachCustomKeyEventHandler=function(z){this._customKeyEventHandler=z},F.prototype.registerLinkMatcher=function(z,G,ce){var $=this.linkifier.registerLinkMatcher(z,G,ce);return this.refresh(0,this.rows-1),$},F.prototype.deregisterLinkMatcher=function(z){this.linkifier.deregisterLinkMatcher(z)&&this.refresh(0,this.rows-1)},F.prototype.registerLinkProvider=function(z){return this.linkifier2.registerLinkProvider(z)},F.prototype.registerCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var G=this._characterJoinerService.register(z);return this.refresh(0,this.rows-1),G},F.prototype.deregisterCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(z)&&this.refresh(0,this.rows-1)},Object.defineProperty(F.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),F.prototype.addMarker=function(z){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+z)},F.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},F.prototype.select=function(z,G,ce){this._selectionService.setSelection(z,G,ce)},F.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},F.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},F.prototype.clearSelection=function(){var z;(z=this._selectionService)===null||z===void 0||z.clearSelection()},F.prototype.selectAll=function(){var z;(z=this._selectionService)===null||z===void 0||z.selectAll()},F.prototype.selectLines=function(z,G){var ce;(ce=this._selectionService)===null||ce===void 0||ce.selectLines(z,G)},F.prototype._keyDown=function(z){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(!this._compositionHelper.keydown(z))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;z.key!=="Dead"&&z.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var G=(0,O.evaluateKeyboardEvent)(z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(z),G.type===3||G.type===2){var ce=this.rows-1;return this.scrollLines(G.type===2?-ce:ce),this.cancel(z,!0)}return G.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,z)||(G.cancel&&this.cancel(z,!0),!G.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(G.key!==w.C0.ETX&&G.key!==w.C0.CR||(this.textarea.value=""),this._onKey.fire({key:G.key,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(G.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(z,!0))))},F.prototype._isThirdLevelShift=function(z,G){var ce=z.isMac&&!this.options.macOptionIsMeta&&G.altKey&&!G.ctrlKey&&!G.metaKey||z.isWindows&&G.altKey&&G.ctrlKey&&!G.metaKey||z.isWindows&&G.getModifierState("AltGraph");return G.type==="keypress"?ce:ce&&(!G.keyCode||G.keyCode>47)},F.prototype._keyUp=function(z){this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1||(function(G){return G.keyCode===16||G.keyCode===17||G.keyCode===18}(z)||this.focus(),this.updateCursorStyle(z),this._keyPressHandled=!1)},F.prototype._keyPress=function(z){var G;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(this.cancel(z),z.charCode)G=z.charCode;else if(z.which===null||z.which===void 0)G=z.keyCode;else{if(z.which===0||z.charCode===0)return!1;G=z.which}return!(!G||(z.altKey||z.ctrlKey||z.metaKey)&&!this._isThirdLevelShift(this.browser,z)||(G=String.fromCharCode(G),this._onKey.fire({key:G,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(G,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},F.prototype._inputEvent=function(z){if(z.data&&z.inputType==="insertText"&&!z.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var G=z.data;return this.coreService.triggerDataEvent(G,!0),this.cancel(z),!0}return!1},F.prototype.bell=function(){var z;this._soundBell()&&((z=this._soundService)===null||z===void 0||z.playBellSound()),this._onBell.fire()},F.prototype.resize=function(z,G){z!==this.cols||G!==this.rows?he.prototype.resize.call(this,z,G):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},F.prototype._afterResize=function(z,G){var ce,$;(ce=this._charSizeService)===null||ce===void 0||ce.measure(),($=this.viewport)===null||$===void 0||$.syncScrollArea(!0)},F.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(M.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},F.prototype.reset=function(){var z,G;this.options.rows=this.rows,this.options.cols=this.cols;var ce=this._customKeyEventHandler;this._setup(),he.prototype.reset.call(this),(z=this._selectionService)===null||z===void 0||z.reset(),this._customKeyEventHandler=ce,this.refresh(0,this.rows-1),(G=this.viewport)===null||G===void 0||G.syncScrollArea()},F.prototype.clearTextureAtlas=function(){var z;(z=this._renderService)===null||z===void 0||z.clearTextureAtlas()},F.prototype._reportFocus=function(){var z;((z=this.element)===null||z===void 0?void 0:z.classList.contains("focus"))?this.coreService.triggerDataEvent(w.C0.ESC+"[I"):this.coreService.triggerDataEvent(w.C0.ESC+"[O")},F.prototype._reportWindowsOptions=function(z){if(this._renderService)switch(z){case h.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var G=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),ce=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(w.C0.ESC+"[4;"+ce+";"+G+"t");break;case h.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var $=this._renderService.dimensions.scaledCellWidth.toFixed(0),ge=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(w.C0.ESC+"[6;"+ge+";"+$+"t")}},F.prototype.cancel=function(z,G){if(this.options.cancelEvents||G)return z.preventDefault(),z.stopPropagation(),!1},F.prototype._visualBell=function(){return!1},F.prototype._soundBell=function(){return this.options.bellStyle==="sound"},F}(Z.CoreTerminal);p.Terminal=we},9924:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TimeBasedDebouncer=void 0;var L=function(){function g(v,C){C===void 0&&(C=1e3),this._renderCallback=v,this._debounceThresholdMS=C,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return g.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},g.prototype.refresh=function(v,C,y){var m=this;this._rowCount=y,v=v!==void 0?v:0,C=C!==void 0?C:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,v):v,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,C):C;var w=Date.now();if(w-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=w,this._innerRefresh();else if(!this._additionalRefreshRequested){var h=w-this._lastRefreshMs,d=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){m._lastRefreshMs=Date.now(),m._innerRefresh(),m._additionalRefreshRequested=!1,m._refreshTimeoutID=void 0},d)}},g.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var v=Math.max(this._rowStart,0),C=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(v,C)}},g}();p.TimeBasedDebouncer=L},1680:function(K,p,L){var g,v=this&&this.__extends||(g=function(l,a){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},g(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=l}g(l,a),l.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}),C=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},y=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Viewport=void 0;var m=L(844),w=L(3656),h=L(4725),d=L(2585),_=function(l){function a(n,s,c,f,b,k,O,D){var M=l.call(this)||this;return M._scrollLines=n,M._viewportElement=s,M._scrollArea=c,M._element=f,M._bufferService=b,M._optionsService=k,M._charSizeService=O,M._renderService=D,M.scrollBarWidth=0,M._currentRowHeight=0,M._currentScaledCellHeight=0,M._lastRecordedBufferLength=0,M._lastRecordedViewportHeight=0,M._lastRecordedBufferHeight=0,M._lastTouchY=0,M._lastScrollTop=0,M._lastHadScrollBar=!1,M._wheelPartialScroll=0,M._refreshAnimationFrame=null,M._ignoreNextScrollEvent=!1,M.scrollBarWidth=M._viewportElement.offsetWidth-M._scrollArea.offsetWidth||15,M._lastHadScrollBar=!0,M.register((0,w.addDisposableDomListener)(M._viewportElement,"scroll",M._onScroll.bind(M))),M._activeBuffer=M._bufferService.buffer,M.register(M._bufferService.buffers.onBufferActivate(function(x){return M._activeBuffer=x.activeBuffer})),M._renderDimensions=M._renderService.dimensions,M.register(M._renderService.onDimensionsChange(function(x){return M._renderDimensions=x})),setTimeout(function(){return M.syncScrollArea()},0),M}return v(a,l),a.prototype.onThemeChange=function(n){this._viewportElement.style.backgroundColor=n.background.css},a.prototype._refresh=function(n){var s=this;if(n)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return s._innerRefresh()}))},a.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var c=window.getComputedStyle(this._element),f=parseInt(c.paddingLeft)+parseInt(c.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?f:0)).toString()+"px",this._refreshAnimationFrame=null},a.prototype.syncScrollArea=function(n){if(n===void 0&&(n=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(n);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(n):this._refresh(n)},a.prototype._onScroll=function(n){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(s)}},a.prototype._bubbleScroll=function(n,s){var c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&c<this._lastRecordedBufferHeight)||(n.cancelable&&n.preventDefault(),!1)},a.prototype.onWheel=function(n){var s=this._getPixelsScrolled(n);return s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(n,s))},a.prototype._getPixelsScrolled=function(n){if(n.deltaY===0||n.shiftKey)return 0;var s=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s},a.prototype.getLinesScrolled=function(n){if(n.deltaY===0||n.shiftKey)return 0;var s=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s},a.prototype._applyScrollModifier=function(n,s){var c=this._optionsService.options.fastScrollModifier;return c==="alt"&&s.altKey||c==="ctrl"&&s.ctrlKey||c==="shift"&&s.shiftKey?n*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:n*this._optionsService.options.scrollSensitivity},a.prototype.onTouchStart=function(n){this._lastTouchY=n.touches[0].pageY},a.prototype.onTouchMove=function(n){var s=this._lastTouchY-n.touches[0].pageY;return this._lastTouchY=n.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(n,s))},C([y(4,d.IBufferService),y(5,d.IOptionsService),y(6,h.ICharSizeService),y(7,h.IRenderService)],a)}(m.Disposable);p.Viewport=_},2950:function(K,p,L){var g=this&&this.__decorate||function(w,h,d,_){var l,a=arguments.length,n=a<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(w,h,d,_);else for(var s=w.length-1;s>=0;s--)(l=w[s])&&(n=(a<3?l(n):a>3?l(h,d,n):l(h,d))||n);return a>3&&n&&Object.defineProperty(h,d,n),n},v=this&&this.__param||function(w,h){return function(d,_){h(d,_,w)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CompositionHelper=void 0;var C=L(4725),y=L(2585),m=function(){function w(h,d,_,l,a,n){this._textarea=h,this._compositionView=d,this._bufferService=_,this._optionsService=l,this._coreService=a,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(w.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),w.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},w.prototype.compositionupdate=function(h){var d=this;this._compositionView.textContent=h.data,this.updateCompositionElements(),setTimeout(function(){d._compositionPosition.end=d._textarea.value.length},0)},w.prototype.compositionend=function(){this._finalizeComposition(!0)},w.prototype.keydown=function(h){if(this._isComposing||this._isSendingComposition){if(h.keyCode===229||h.keyCode===16||h.keyCode===17||h.keyCode===18)return!1;this._finalizeComposition(!1)}return h.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},w.prototype._finalizeComposition=function(h){var d=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,h){var _={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(d._isSendingComposition){d._isSendingComposition=!1;var a;_.start+=d._dataAlreadySent.length,(a=d._isComposing?d._textarea.value.substring(_.start,_.end):d._textarea.value.substring(_.start)).length>0&&d._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;var l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}},w.prototype._handleAnyTextareaChanges=function(){var h=this,d=this._textarea.value;setTimeout(function(){if(!h._isComposing){var _=h._textarea.value.replace(d,"");_.length>0&&(h._dataAlreadySent=_,h._coreService.triggerDataEvent(_,!0))}},0)},w.prototype.updateCompositionElements=function(h){var d=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.actualCellHeight,a=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,n=_*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=n+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}h||setTimeout(function(){return d.updateCompositionElements(!0)},0)}},g([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,y.ICoreService),v(5,C.IRenderService)],w)}();p.CompositionHelper=m},9806:(K,p)=>{function L(g,v){var C=v.getBoundingClientRect();return[g.clientX-C.left,g.clientY-C.top]}Object.defineProperty(p,"__esModule",{value:!0}),p.getRawByteCoords=p.getCoords=p.getCoordsRelativeToElement=void 0,p.getCoordsRelativeToElement=L,p.getCoords=function(g,v,C,y,m,w,h,d){if(m){var _=L(g,v);if(_)return _[0]=Math.ceil((_[0]+(d?w/2:0))/w),_[1]=Math.ceil(_[1]/h),_[0]=Math.min(Math.max(_[0],1),C+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),y),_}},p.getRawByteCoords=function(g){if(g)return{x:g[0]+32,y:g[1]+32}}},9504:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.moveToCellSequence=void 0;var g=L(2584);function v(d,_,l,a){var n=d-C(l,d),s=_-C(l,_),c=Math.abs(n-s)-function(f,b,k){for(var O=0,D=f-C(k,f),M=b-C(k,b),x=0;x<Math.abs(D-M);x++){var B=y(f,b)==="A"?-1:1,T=k.buffer.lines.get(D+B*x);(T==null?void 0:T.isWrapped)&&O++}return O}(d,_,l);return h(c,w(y(d,_),a))}function C(d,_){for(var l=0,a=d.buffer.lines.get(_),n=a==null?void 0:a.isWrapped;n&&_>=0&&_<d.rows;)l++,n=(a=d.buffer.lines.get(--_))==null?void 0:a.isWrapped;return l}function y(d,_){return d>_?"A":"B"}function m(d,_,l,a,n,s){for(var c=d,f=_,b="";c!==l||f!==a;)c+=n?1:-1,n&&c>s.cols-1?(b+=s.buffer.translateBufferLineToString(f,!1,d,c),c=0,d=0,f++):!n&&c<0&&(b+=s.buffer.translateBufferLineToString(f,!1,0,d+1),d=c=s.cols-1,f--);return b+s.buffer.translateBufferLineToString(f,!1,d,c)}function w(d,_){var l=_?"O":"[";return g.C0.ESC+l+d}function h(d,_){d=Math.floor(d);for(var l="",a=0;a<d;a++)l+=_;return l}p.moveToCellSequence=function(d,_,l,a){var n,s=l.buffer.x,c=l.buffer.y;if(!l.buffer.hasScrollback)return function(b,k,O,D,M,x){return v(k,D,M,x).length===0?"":h(m(b,k,b,k-C(M,k),!1,M).length,w("D",x))}(s,c,0,_,l,a)+v(c,_,l,a)+function(b,k,O,D,M,x){var B;B=v(k,D,M,x).length>0?D-C(M,D):k;var T=D,J=function(j,H,N,Z,Q,ae){var se;return se=v(N,Z,Q,ae).length>0?Z-C(Q,Z):H,j<N&&se<=Z||j>=N&&se<Z?"C":"D"}(b,k,O,D,M,x);return h(m(b,B,O,T,J==="C",M).length,w(J,x))}(s,c,d,_,l,a);if(c===_)return n=s>d?"D":"C",h(Math.abs(s-d),w(n,a));n=c>_?"D":"C";var f=Math.abs(c-_);return h(function(b,k){return k.cols-b}(c>_?d:s,l)+(f-1)*l.cols+1+((c>_?s:d)-1),w(n,a))}},1546:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BaseRenderLayer=void 0;var g=L(643),v=L(8803),C=L(1420),y=L(3734),m=L(1752),w=L(4774),h=L(9631),d=L(8978),_=function(){function l(a,n,s,c,f,b,k,O){this._container=a,this._alpha=c,this._colors=f,this._rendererId=b,this._bufferService=k,this._optionsService=O,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+n+"-layer"),this._canvas.style.zIndex=s.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return l.prototype.dispose=function(){var a;(0,h.removeElementFromParent)(this._canvas),(a=this._charAtlas)===null||a===void 0||a.dispose()},l.prototype._initCanvas=function(){this._ctx=(0,m.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},l.prototype.onOptionsChanged=function(){},l.prototype.onBlur=function(){},l.prototype.onFocus=function(){},l.prototype.onCursorMove=function(){},l.prototype.onGridChanged=function(a,n){},l.prototype.onSelectionChanged=function(a,n,s){s===void 0&&(s=!1)},l.prototype.setColors=function(a){this._refreshCharAtlas(a)},l.prototype._setTransparency=function(a){if(a!==this._alpha){var n=this._canvas;this._alpha=a,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,n),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},l.prototype._refreshCharAtlas=function(a){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,C.acquireCharAtlas)(this._optionsService.options,this._rendererId,a,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},l.prototype.resize=function(a){this._scaledCellWidth=a.scaledCellWidth,this._scaledCellHeight=a.scaledCellHeight,this._scaledCharWidth=a.scaledCharWidth,this._scaledCharHeight=a.scaledCharHeight,this._scaledCharLeft=a.scaledCharLeft,this._scaledCharTop=a.scaledCharTop,this._canvas.width=a.scaledCanvasWidth,this._canvas.height=a.scaledCanvasHeight,this._canvas.style.width=a.canvasWidth+"px",this._canvas.style.height=a.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},l.prototype.clearTextureAtlas=function(){var a;(a=this._charAtlas)===null||a===void 0||a.clear()},l.prototype._fillCells=function(a,n,s,c){this._ctx.fillRect(a*this._scaledCellWidth,n*this._scaledCellHeight,s*this._scaledCellWidth,c*this._scaledCellHeight)},l.prototype._fillMiddleLineAtCells=function(a,n,s){s===void 0&&(s=1);var c=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(a*this._scaledCellWidth,(n+1)*this._scaledCellHeight-c-window.devicePixelRatio,s*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillBottomLineAtCells=function(a,n,s){s===void 0&&(s=1),this._ctx.fillRect(a*this._scaledCellWidth,(n+1)*this._scaledCellHeight-window.devicePixelRatio-1,s*this._scaledCellWidth,window.devicePixelRatio)},l.prototype._fillLeftLineAtCell=function(a,n,s){this._ctx.fillRect(a*this._scaledCellWidth,n*this._scaledCellHeight,window.devicePixelRatio*s,this._scaledCellHeight)},l.prototype._strokeRectAtCell=function(a,n,s,c){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/2,n*this._scaledCellHeight+window.devicePixelRatio/2,s*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)},l.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},l.prototype._clearCells=function(a,n,s,c){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,n*this._scaledCellHeight,s*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(a*this._scaledCellWidth,n*this._scaledCellHeight,s*this._scaledCellWidth,c*this._scaledCellHeight))},l.prototype._fillCharTrueColor=function(a,n,s){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=v.TEXT_BASELINE,this._clipRow(s);var c=!1;this._optionsService.options.customGlyphs!==!1&&(c=(0,d.tryDrawCustomChar)(this._ctx,a.getChars(),n*this._scaledCellWidth,s*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(a.getChars(),n*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},l.prototype._drawChars=function(a,n,s){var c,f,b,k=this._getContrastColor(a);k||a.isFgRGB()||a.isBgRGB()?this._drawUncachedChars(a,n,s,k):(a.isInverse()?(f=a.isBgDefault()?v.INVERTED_DEFAULT_COLOR:a.getBgColor(),b=a.isFgDefault()?v.INVERTED_DEFAULT_COLOR:a.getFgColor()):(b=a.isBgDefault()?g.DEFAULT_COLOR:a.getBgColor(),f=a.isFgDefault()?g.DEFAULT_COLOR:a.getFgColor()),f+=this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&f<8?8:0,this._currentGlyphIdentifier.chars=a.getChars()||g.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=a.getCode()||g.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=b,this._currentGlyphIdentifier.fg=f,this._currentGlyphIdentifier.bold=!!a.isBold(),this._currentGlyphIdentifier.dim=!!a.isDim(),this._currentGlyphIdentifier.italic=!!a.isItalic(),((c=this._charAtlas)===null||c===void 0?void 0:c.draw(this._ctx,this._currentGlyphIdentifier,n*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(a,n,s))},l.prototype._drawUncachedChars=function(a,n,s,c){if(this._ctx.save(),this._ctx.font=this._getFont(!!a.isBold(),!!a.isItalic()),this._ctx.textBaseline=v.TEXT_BASELINE,a.isInverse())if(c)this._ctx.fillStyle=c.css;else if(a.isBgDefault())this._ctx.fillStyle=w.color.opaque(this._colors.background).css;else if(a.isBgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(a.getBgColor()).join(",")+")";else{var f=a.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&f<8&&(f+=8),this._ctx.fillStyle=this._colors.ansi[f].css}else if(c)this._ctx.fillStyle=c.css;else if(a.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(a.isFgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(a.getFgColor()).join(",")+")";else{var b=a.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&b<8&&(b+=8),this._ctx.fillStyle=this._colors.ansi[b].css}this._clipRow(s),a.isDim()&&(this._ctx.globalAlpha=v.DIM_OPACITY);var k=!1;this._optionsService.options.customGlyphs!==!1&&(k=(0,d.tryDrawCustomChar)(this._ctx,a.getChars(),n*this._scaledCellWidth,s*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),k||this._ctx.fillText(a.getChars(),n*this._scaledCellWidth+this._scaledCharLeft,s*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},l.prototype._clipRow=function(a){this._ctx.beginPath(),this._ctx.rect(0,a*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},l.prototype._getFont=function(a,n){return(n?"italic":"")+" "+(a?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},l.prototype._getContrastColor=function(a){if(this._optionsService.options.minimumContrastRatio!==1){var n=this._colors.contrastCache.getColor(a.bg,a.fg);if(n!==void 0)return n||void 0;var s=a.getFgColor(),c=a.getFgColorMode(),f=a.getBgColor(),b=a.getBgColorMode(),k=!!a.isInverse(),O=!!a.isInverse();if(k){var D=s;s=f,f=D;var M=c;c=b,b=M}var x=this._resolveBackgroundRgba(b,f,k),B=this._resolveForegroundRgba(c,s,k,O),T=w.rgba.ensureContrastRatio(x,B,this._optionsService.options.minimumContrastRatio);if(T){var J={css:w.channels.toCss(T>>24&255,T>>16&255,T>>8&255),rgba:T};return this._colors.contrastCache.setColor(a.bg,a.fg,J),J}this._colors.contrastCache.setColor(a.bg,a.fg,null)}},l.prototype._resolveBackgroundRgba=function(a,n,s){switch(a){case 16777216:case 33554432:return this._colors.ansi[n].rgba;case 50331648:return n<<8;default:return s?this._colors.foreground.rgba:this._colors.background.rgba}},l.prototype._resolveForegroundRgba=function(a,n,s,c){switch(a){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&c&&n<8&&(n+=8),this._colors.ansi[n].rgba;case 50331648:return n<<8;default:return s?this._colors.background.rgba:this._colors.foreground.rgba}},l}();p.BaseRenderLayer=_},2512:function(K,p,L){var g,v=this&&this.__extends||(g=function(n,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(c[b]=f[b])},g(n,s)},function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function c(){this.constructor=n}g(n,s),n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}),C=this&&this.__decorate||function(n,s,c,f){var b,k=arguments.length,O=k<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(n,s,c,f);else for(var D=n.length-1;D>=0;D--)(b=n[D])&&(O=(k<3?b(O):k>3?b(s,c,O):b(s,c))||O);return k>3&&O&&Object.defineProperty(s,c,O),O},y=this&&this.__param||function(n,s){return function(c,f){s(c,f,n)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CursorRenderLayer=void 0;var m=L(1546),w=L(511),h=L(2585),d=L(4725),_=600,l=function(n){function s(c,f,b,k,O,D,M,x,B){var T=n.call(this,c,"cursor",f,!0,b,k,D,M)||this;return T._onRequestRedraw=O,T._coreService=x,T._coreBrowserService=B,T._cell=new w.CellData,T._state={x:0,y:0,isFocused:!1,style:"",width:0},T._cursorRenderers={bar:T._renderBarCursor.bind(T),block:T._renderBlockCursor.bind(T),underline:T._renderUnderlineCursor.bind(T)},T}return v(s,n),s.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),n.prototype.dispose.call(this)},s.prototype.resize=function(c){n.prototype.resize.call(this,c),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},s.prototype.reset=function(){var c;this._clearCursor(),(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation(),this.onOptionsChanged()},s.prototype.onBlur=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onFocus=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onOptionsChanged=function(){var c,f=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new a(this._coreBrowserService.isFocused,function(){f._render(!0)})):((c=this._cursorBlinkStateManager)===null||c===void 0||c.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},s.prototype.onCursorMove=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation()},s.prototype.onGridChanged=function(c,f){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},s.prototype._render=function(c){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var f=this._bufferService.buffer.ybase+this._bufferService.buffer.y,b=f-this._bufferService.buffer.ydisp;if(b<0||b>=this._bufferService.rows)this._clearCursor();else{var k=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(f).loadCell(k,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var O=this._optionsService.options.cursorStyle;return O&&O!=="block"?this._cursorRenderers[O](k,b,this._cell):this._renderBlurCursor(k,b,this._cell),this._ctx.restore(),this._state.x=k,this._state.y=b,this._state.isFocused=!1,this._state.style=O,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===k&&this._state.y===b&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](k,b,this._cell),this._ctx.restore(),this._state.x=k,this._state.y=b,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},s.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},s.prototype._renderBarCursor=function(c,f,b){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(c,f,this._optionsService.options.cursorWidth),this._ctx.restore()},s.prototype._renderBlockCursor=function(c,f,b){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(c,f,b.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(b,c,f),this._ctx.restore()},s.prototype._renderUnderlineCursor=function(c,f,b){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(c,f),this._ctx.restore()},s.prototype._renderBlurCursor=function(c,f,b){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(c,f,b.getWidth(),1),this._ctx.restore()},C([y(5,h.IBufferService),y(6,h.IOptionsService),y(7,h.ICoreService),y(8,d.ICoreBrowserService)],s)}(m.BaseRenderLayer);p.CursorRenderLayer=l;var a=function(){function n(s,c){this._renderCallback=c,this.isCursorVisible=!0,s&&this._restartInterval()}return Object.defineProperty(n.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},n.prototype.restartBlinkAnimation=function(){var s=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})))},n.prototype._restartInterval=function(s){var c=this;s===void 0&&(s=_),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(c._animationTimeRestarted){var f=_-(Date.now()-c._animationTimeRestarted);if(c._animationTimeRestarted=void 0,f>0)return void c._restartInterval(f)}c.isCursorVisible=!1,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0}),c._blinkInterval=window.setInterval(function(){if(c._animationTimeRestarted){var b=_-(Date.now()-c._animationTimeRestarted);return c._animationTimeRestarted=void 0,void c._restartInterval(b)}c.isCursorVisible=!c.isCursorVisible,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0})},_)},s)},n.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},n.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},n}()},8978:(K,p,L)=>{var g,v,C,y,m,w,h,d,_,l,a,n,s,c,f,b,k,O,D,M,x,B,T,J,j,H,N,Z,Q,ae,se,me,we,he,F,z,G,ce,$,ge,Le,Be,Ee,He,Se,ze,vt,At,Vt,br,ei,hi,Ir,ti,jt,di,gt,Ne,cr,ut,Zt,ke,ur,tt,Ae,je,fr,Ke,Mt,Ye,hr,ft,rr,$t,Hr,Sr,rt,Fr,Cr,Rt,wr,Wr,Nr,Lr,Jt,_t,ht,jr,Ut,dr,pr,xt,kt,dt,xr,kr,Fe,Ce,Dt,Er,nt,Oe,Ot,ir,Tr,ue,I,X,oe,fe,Me,De,_e,$e,yt,Ar,zt,Ri,Di,Ur,pi,Oi,vi,Bi,Pi,Ii,Hi,sn;Object.defineProperty(p,"__esModule",{value:!0}),p.tryDrawCustomChar=p.boxDrawingDefinitions=p.blockElementDefinitions=void 0;var In=L(1752);p.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Hn={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};p.boxDrawingDefinitions={"\u2500":(g={},g[1]="M0,.5 L1,.5",g),"\u2501":(v={},v[3]="M0,.5 L1,.5",v),"\u2502":(C={},C[1]="M.5,0 L.5,1",C),"\u2503":(y={},y[3]="M.5,0 L.5,1",y),"\u250C":(m={},m[1]="M0.5,1 L.5,.5 L1,.5",m),"\u250F":(w={},w[3]="M0.5,1 L.5,.5 L1,.5",w),"\u2510":(h={},h[1]="M0,.5 L.5,.5 L.5,1",h),"\u2513":(d={},d[3]="M0,.5 L.5,.5 L.5,1",d),"\u2514":(_={},_[1]="M.5,0 L.5,.5 L1,.5",_),"\u2517":(l={},l[3]="M.5,0 L.5,.5 L1,.5",l),"\u2518":(a={},a[1]="M.5,0 L.5,.5 L0,.5",a),"\u251B":(n={},n[3]="M.5,0 L.5,.5 L0,.5",n),"\u251C":(s={},s[1]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2523":(c={},c[3]="M.5,0 L.5,1 M.5,.5 L1,.5",c),"\u2524":(f={},f[1]="M.5,0 L.5,1 M.5,.5 L0,.5",f),"\u252B":(b={},b[3]="M.5,0 L.5,1 M.5,.5 L0,.5",b),"\u252C":(k={},k[1]="M0,.5 L1,.5 M.5,.5 L.5,1",k),"\u2533":(O={},O[3]="M0,.5 L1,.5 M.5,.5 L.5,1",O),"\u2534":(D={},D[1]="M0,.5 L1,.5 M.5,.5 L.5,0",D),"\u253B":(M={},M[3]="M0,.5 L1,.5 M.5,.5 L.5,0",M),"\u253C":(x={},x[1]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u254B":(B={},B[3]="M0,.5 L1,.5 M.5,0 L.5,1",B),"\u2574":(T={},T[1]="M.5,.5 L0,.5",T),"\u2578":(J={},J[3]="M.5,.5 L0,.5",J),"\u2575":(j={},j[1]="M.5,.5 L.5,0",j),"\u2579":(H={},H[3]="M.5,.5 L.5,0",H),"\u2576":(N={},N[1]="M.5,.5 L1,.5",N),"\u257A":(Z={},Z[3]="M.5,.5 L1,.5",Z),"\u2577":(Q={},Q[1]="M.5,.5 L.5,1",Q),"\u257B":(ae={},ae[3]="M.5,.5 L.5,1",ae),"\u2550":(se={},se[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},se),"\u2551":(me={},me[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},me),"\u2552":(we={},we[1]=function(ne,ie){return"M.5,1 L.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},we),"\u2553":(he={},he[1]=function(ne,ie){return"M"+(.5-ne)+",1 L"+(.5-ne)+",.5 L1,.5 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},he),"\u2554":(F={},F[1]=function(ne,ie){return"M1,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1"},F),"\u2555":(z={},z[1]=function(ne,ie){return"M0,"+(.5-ie)+" L.5,"+(.5-ie)+" L.5,1 M0,"+(.5+ie)+" L.5,"+(.5+ie)},z),"\u2556":(G={},G[1]=function(ne,ie){return"M"+(.5+ne)+",1 L"+(.5+ne)+",.5 L0,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1"},G),"\u2557":(ce={},ce[1]=function(ne,ie){return"M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M0,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",1"},ce),"\u2558":($={},$[1]=function(ne,ie){return"M.5,0 L.5,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5-ie)+" L1,"+(.5-ie)},$),"\u2559":(ge={},ge[1]=function(ne,ie){return"M1,.5 L"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},ge),"\u255A":(Le={},Le[1]=function(ne,ie){return"M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0 M1,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",0"},Le),"\u255B":(Be={},Be[1]=function(ne,ie){return"M0,"+(.5+ie)+" L.5,"+(.5+ie)+" L.5,0 M0,"+(.5-ie)+" L.5,"+(.5-ie)},Be),"\u255C":(Ee={},Ee[1]=function(ne,ie){return"M0,.5 L"+(.5+ne)+",.5 L"+(.5+ne)+",0 M"+(.5-ne)+",.5 L"+(.5-ne)+",0"},Ee),"\u255D":(He={},He[1]=function(ne,ie){return"M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M0,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",0"},He),"\u255E":(Se={},Se[1]=function(ne,ie){return"M.5,0 L.5,1 M.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},Se),"\u255F":(ze={},ze[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1 M"+(.5+ne)+",.5 L1,.5"},ze),"\u2560":(vt={},vt[1]=function(ne,ie){return"M"+(.5-ne)+",0 L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},vt),"\u2561":(At={},At[1]=function(ne,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L.5,"+(.5-ie)+" M0,"+(.5+ie)+" L.5,"+(.5+ie)},At),"\u2562":(Vt={},Vt[1]=function(ne,ie){return"M0,.5 L"+(.5-ne)+",.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Vt),"\u2563":(br={},br[1]=function(ne,ie){return"M"+(.5+ne)+",0 L"+(.5+ne)+",1 M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0"},br),"\u2564":(ei={},ei[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5+ie)+" L.5,1"},ei),"\u2565":(hi={},hi[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",1 M"+(.5+ne)+",.5 L"+(.5+ne)+",1"},hi),"\u2566":(Ir={},Ir[1]=function(ne,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1"},Ir),"\u2567":(ti={},ti[1]=function(ne,ie){return"M.5,0 L.5,"+(.5-ie)+" M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},ti),"\u2568":(jt={},jt[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",.5 L"+(.5-ne)+",0 M"+(.5+ne)+",.5 L"+(.5+ne)+",0"},jt),"\u2569":(di={},di[1]=function(ne,ie){return"M0,"+(.5+ie)+" L1,"+(.5+ie)+" M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},di),"\u256A":(gt={},gt[1]=function(ne,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},gt),"\u256B":(Ne={},Ne[1]=function(ne,ie){return"M0,.5 L1,.5 M"+(.5-ne)+",0 L"+(.5-ne)+",1 M"+(.5+ne)+",0 L"+(.5+ne)+",1"},Ne),"\u256C":(cr={},cr[1]=function(ne,ie){return"M0,"+(.5+ie)+" L"+(.5-ne)+","+(.5+ie)+" L"+(.5-ne)+",1 M1,"+(.5+ie)+" L"+(.5+ne)+","+(.5+ie)+" L"+(.5+ne)+",1 M0,"+(.5-ie)+" L"+(.5-ne)+","+(.5-ie)+" L"+(.5-ne)+",0 M1,"+(.5-ie)+" L"+(.5+ne)+","+(.5-ie)+" L"+(.5+ne)+",0"},cr),"\u2571":(ut={},ut[1]="M1,0 L0,1",ut),"\u2572":(Zt={},Zt[1]="M0,0 L1,1",Zt),"\u2573":(ke={},ke[1]="M1,0 L0,1 M0,0 L1,1",ke),"\u257C":(ur={},ur[1]="M.5,.5 L0,.5",ur[3]="M.5,.5 L1,.5",ur),"\u257D":(tt={},tt[1]="M.5,.5 L.5,0",tt[3]="M.5,.5 L.5,1",tt),"\u257E":(Ae={},Ae[1]="M.5,.5 L1,.5",Ae[3]="M.5,.5 L0,.5",Ae),"\u257F":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L.5,0",je),"\u250D":(fr={},fr[1]="M.5,.5 L.5,1",fr[3]="M.5,.5 L1,.5",fr),"\u250E":(Ke={},Ke[1]="M.5,.5 L1,.5",Ke[3]="M.5,.5 L.5,1",Ke),"\u2511":(Mt={},Mt[1]="M.5,.5 L.5,1",Mt[3]="M.5,.5 L0,.5",Mt),"\u2512":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2515":(hr={},hr[1]="M.5,.5 L.5,0",hr[3]="M.5,.5 L1,.5",hr),"\u2516":(ft={},ft[1]="M.5,.5 L1,.5",ft[3]="M.5,.5 L.5,0",ft),"\u2519":(rr={},rr[1]="M.5,.5 L.5,0",rr[3]="M.5,.5 L0,.5",rr),"\u251A":($t={},$t[1]="M.5,.5 L0,.5",$t[3]="M.5,.5 L.5,0",$t),"\u251D":(Hr={},Hr[1]="M.5,0 L.5,1",Hr[3]="M.5,.5 L1,.5",Hr),"\u251E":(Sr={},Sr[1]="M0.5,1 L.5,.5 L1,.5",Sr[3]="M.5,.5 L.5,0",Sr),"\u251F":(rt={},rt[1]="M.5,0 L.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2520":(Fr={},Fr[1]="M.5,.5 L1,.5",Fr[3]="M.5,0 L.5,1",Fr),"\u2521":(Cr={},Cr[1]="M.5,.5 L.5,1",Cr[3]="M.5,0 L.5,.5 L1,.5",Cr),"\u2522":(Rt={},Rt[1]="M.5,.5 L.5,0",Rt[3]="M0.5,1 L.5,.5 L1,.5",Rt),"\u2525":(wr={},wr[1]="M.5,0 L.5,1",wr[3]="M.5,.5 L0,.5",wr),"\u2526":(Wr={},Wr[1]="M0,.5 L.5,.5 L.5,1",Wr[3]="M.5,.5 L.5,0",Wr),"\u2527":(Nr={},Nr[1]="M.5,0 L.5,.5 L0,.5",Nr[3]="M.5,.5 L.5,1",Nr),"\u2528":(Lr={},Lr[1]="M.5,.5 L0,.5",Lr[3]="M.5,0 L.5,1",Lr),"\u2529":(Jt={},Jt[1]="M.5,.5 L.5,1",Jt[3]="M.5,0 L.5,.5 L0,.5",Jt),"\u252A":(_t={},_t[1]="M.5,.5 L.5,0",_t[3]="M0,.5 L.5,.5 L.5,1",_t),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(jr={},jr[1]="M0,.5 L.5,.5 L.5,1",jr[3]="M.5,.5 L1,.5",jr),"\u252F":(Ut={},Ut[1]="M.5,.5 L.5,1",Ut[3]="M0,.5 L1,.5",Ut),"\u2530":(dr={},dr[1]="M0,.5 L1,.5",dr[3]="M.5,.5 L.5,1",dr),"\u2531":(pr={},pr[1]="M.5,.5 L1,.5",pr[3]="M0,.5 L.5,.5 L.5,1",pr),"\u2532":(xt={},xt[1]="M.5,.5 L0,.5",xt[3]="M0.5,1 L.5,.5 L1,.5",xt),"\u2535":(kt={},kt[1]="M.5,0 L.5,.5 L1,.5",kt[3]="M.5,.5 L0,.5",kt),"\u2536":(dt={},dt[1]="M.5,0 L.5,.5 L0,.5",dt[3]="M.5,.5 L1,.5",dt),"\u2537":(xr={},xr[1]="M.5,.5 L.5,0",xr[3]="M0,.5 L1,.5",xr),"\u2538":(kr={},kr[1]="M0,.5 L1,.5",kr[3]="M.5,.5 L.5,0",kr),"\u2539":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,0 L.5,.5 L0,.5",Fe),"\u253A":(Ce={},Ce[1]="M.5,.5 L0,.5",Ce[3]="M.5,0 L.5,.5 L1,.5",Ce),"\u253D":(Dt={},Dt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u253E":(Er={},Er[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Er[3]="M.5,.5 L1,.5",Er),"\u253F":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M0,.5 L1,.5",nt),"\u2540":(Oe={},Oe[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Oe[3]="M.5,.5 L.5,0",Oe),"\u2541":(Ot={},Ot[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ot[3]="M.5,.5 L.5,1",Ot),"\u2542":(ir={},ir[1]="M0,.5 L1,.5",ir[3]="M.5,0 L.5,1",ir),"\u2543":(Tr={},Tr[1]="M0.5,1 L.5,.5 L1,.5",Tr[3]="M.5,0 L.5,.5 L0,.5",Tr),"\u2544":(ue={},ue[1]="M0,.5 L.5,.5 L.5,1",ue[3]="M.5,0 L.5,.5 L1,.5",ue),"\u2545":(I={},I[1]="M.5,0 L.5,.5 L1,.5",I[3]="M0,.5 L.5,.5 L.5,1",I),"\u2546":(X={},X[1]="M.5,0 L.5,.5 L0,.5",X[3]="M0.5,1 L.5,.5 L1,.5",X),"\u2547":(oe={},oe[1]="M.5,.5 L.5,1",oe[3]="M.5,.5 L.5,0 M0,.5 L1,.5",oe),"\u2548":(fe={},fe[1]="M.5,.5 L.5,0",fe[3]="M0,.5 L1,.5 M.5,.5 L.5,1",fe),"\u2549":(Me={},Me[1]="M.5,.5 L1,.5",Me[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Me),"\u254A":(De={},De[1]="M.5,.5 L0,.5",De[3]="M.5,0 L.5,1 M.5,.5 L1,.5",De),"\u254C":(_e={},_e[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",_e),"\u254D":($e={},$e[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",$e),"\u2504":(yt={},yt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",yt),"\u2505":(Ar={},Ar[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Ar),"\u2508":(zt={},zt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",zt),"\u2509":(Ri={},Ri[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ri),"\u254E":(Di={},Di[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Di),"\u254F":(Ur={},Ur[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Ur),"\u2506":(pi={},pi[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",pi),"\u2507":(Oi={},Oi[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Oi),"\u250A":(vi={},vi[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vi),"\u250B":(Bi={},Bi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Bi),"\u256D":(Pi={},Pi[1]="C.5,1,.5,.5,1,.5",Pi),"\u256E":(Ii={},Ii[1]="C.5,1,.5,.5,0,.5",Ii),"\u256F":(Hi={},Hi[1]="C.5,0,.5,.5,0,.5",Hi),"\u2570":(sn={},sn[1]="C.5,0,.5,.5,1,.5",sn)},p.tryDrawCustomChar=function(ne,ie,or,gi,_i,Ve){var Qt=p.blockElementDefinitions[ie];if(Qt)return function(mt,Bt,Mr,zr,qr,Kr){for(var bt=0;bt<Bt.length;bt++){var Pt=Bt[bt],Ge=qr/8,Je=Kr/8;mt.fillRect(Mr+Pt.x*Ge,zr+Pt.y*Je,Pt.w*Ge,Pt.h*Je)}}(ne,Qt,or,gi,_i,Ve),!0;var sr=Hn[ie];if(sr)return function(mt,Bt,Mr,zr,qr,Kr){var bt,Pt=nr.get(Bt);Pt||(Pt=new Map,nr.set(Bt,Pt));var Ge=mt.fillStyle;if(typeof Ge!="string")throw new Error('Unexpected fillStyle type "'+Ge+'"');var Je=Pt.get(Ge);if(!Je){var er=Bt[0].length,Gr=Bt.length,vr=document.createElement("canvas");vr.width=er,vr.height=Gr;var yi=(0,In.throwIfFalsy)(vr.getContext("2d")),St=new ImageData(er,Gr),Rr=void 0,Ct=void 0,ii=void 0,mi=void 0;if(Ge.startsWith("#"))Rr=parseInt(Ge.substr(1,2),16),Ct=parseInt(Ge.substr(3,2),16),ii=parseInt(Ge.substr(5,2),16),mi=Ge.length>7&&parseInt(Ge.substr(7,2),16)||1;else{if(!Ge.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ge+'" when drawing pattern glyph');Rr=(bt=Ge.substring(5,Ge.length-1).split(",").map(function(mo){return parseFloat(mo)}))[0],Ct=bt[1],ii=bt[2],mi=bt[3]}for(var qt=0;qt<Gr;qt++)for(var Xr=0;Xr<er;Xr++)St.data[4*(qt*er+Xr)]=Rr,St.data[4*(qt*er+Xr)+1]=Ct,St.data[4*(qt*er+Xr)+2]=ii,St.data[4*(qt*er+Xr)+3]=Bt[qt][Xr]*(255*mi);yi.putImageData(St,0,0),Je=(0,In.throwIfFalsy)(mt.createPattern(vr,null)),Pt.set(Ge,Je)}mt.fillStyle=Je,mt.fillRect(Mr,zr,qr,Kr)}(ne,sr,or,gi,_i,Ve),!0;var ri=p.boxDrawingDefinitions[ie];return!!ri&&(function(mt,Bt,Mr,zr,qr,Kr){mt.strokeStyle=mt.fillStyle;for(var bt=0,Pt=Object.entries(Bt);bt<Pt.length;bt++){var Ge=Pt[bt],Je=Ge[0],er=Ge[1];mt.beginPath(),mt.lineWidth=window.devicePixelRatio*Number.parseInt(Je);for(var Gr=0,vr=(typeof er=="function"?er(.15,.15/Kr*qr):er).split(" ");Gr<vr.length;Gr++){var yi=vr[Gr],St=yi[0],Rr=yo[St];if(Rr){var Ct=yi.substring(1).split(",");Ct[0]&&Ct[1]&&Rr(mt,Fi(Ct,qr,Kr,Mr,zr))}else console.error('Could not find drawing instructions for "'+St+'"')}mt.stroke(),mt.closePath()}}(ne,ri,or,gi,_i,Ve),!0)};var nr=new Map;function Fn(ne,ie,or){return or===void 0&&(or=0),Math.max(Math.min(ne,ie),or)}var yo={C:function(ne,ie){return ne.bezierCurveTo(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5])},L:function(ne,ie){return ne.lineTo(ie[0],ie[1])},M:function(ne,ie){return ne.moveTo(ie[0],ie[1])}};function Fi(ne,ie,or,gi,_i){var Ve=ne.map(function(ri){return parseFloat(ri)||parseInt(ri)});if(Ve.length<2)throw new Error("Too few arguments for instruction");for(var Qt=0;Qt<Ve.length;Qt+=2)Ve[Qt]*=ie,Ve[Qt]!==0&&(Ve[Qt]=Fn(Math.round(Ve[Qt]+.5)-.5,ie,0)),Ve[Qt]+=gi;for(var sr=1;sr<Ve.length;sr+=2)Ve[sr]*=or,Ve[sr]!==0&&(Ve[sr]=Fn(Math.round(Ve[sr]+.5)-.5,or,0)),Ve[sr]+=_i;return Ve}},3700:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GridCache=void 0;var L=function(){function g(){this.cache=[]}return g.prototype.resize=function(v,C){for(var y=0;y<v;y++){this.cache.length<=y&&this.cache.push([]);for(var m=this.cache[y].length;m<C;m++)this.cache[y].push(void 0);this.cache[y].length=C}this.cache.length=v},g.prototype.clear=function(){for(var v=0;v<this.cache.length;v++)for(var C=0;C<this.cache[v].length;C++)this.cache[v][C]=void 0},g}();p.GridCache=L},5098:function(K,p,L){var g,v=this&&this.__extends||(g=function(l,a){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},g(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=l}g(l,a),l.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}),C=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},y=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.LinkRenderLayer=void 0;var m=L(1546),w=L(8803),h=L(2040),d=L(2585),_=function(l){function a(n,s,c,f,b,k,O,D){var M=l.call(this,n,"link",s,!0,c,f,O,D)||this;return b.onShowLinkUnderline(function(x){return M._onShowLinkUnderline(x)}),b.onHideLinkUnderline(function(x){return M._onHideLinkUnderline(x)}),k.onShowLinkUnderline(function(x){return M._onShowLinkUnderline(x)}),k.onHideLinkUnderline(function(x){return M._onHideLinkUnderline(x)}),M}return v(a,l),a.prototype.resize=function(n){l.prototype.resize.call(this,n),this._state=void 0},a.prototype.reset=function(){this._clearCurrentLink()},a.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var n=this._state.y2-this._state.y1-1;n>0&&this._clearCells(0,this._state.y1+1,this._state.cols,n),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},a.prototype._onShowLinkUnderline=function(n){if(n.fg===w.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:n.fg&&(0,h.is256Color)(n.fg)?this._ctx.fillStyle=this._colors.ansi[n.fg].css:this._ctx.fillStyle=this._colors.foreground.css,n.y1===n.y2)this._fillBottomLineAtCells(n.x1,n.y1,n.x2-n.x1);else{this._fillBottomLineAtCells(n.x1,n.y1,n.cols-n.x1);for(var s=n.y1+1;s<n.y2;s++)this._fillBottomLineAtCells(0,s,n.cols);this._fillBottomLineAtCells(0,n.y2,n.x2)}this._state=n},a.prototype._onHideLinkUnderline=function(n){this._clearCurrentLink()},C([y(6,d.IBufferService),y(7,d.IOptionsService)],a)}(m.BaseRenderLayer);p.LinkRenderLayer=_},3525:function(K,p,L){var g,v=this&&this.__extends||(g=function(b,k){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,D){O.__proto__=D}||function(O,D){for(var M in D)Object.prototype.hasOwnProperty.call(D,M)&&(O[M]=D[M])},g(b,k)},function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=b}g(b,k),b.prototype=k===null?Object.create(k):(O.prototype=k.prototype,new O)}),C=this&&this.__decorate||function(b,k,O,D){var M,x=arguments.length,B=x<3?k:D===null?D=Object.getOwnPropertyDescriptor(k,O):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,k,O,D);else for(var T=b.length-1;T>=0;T--)(M=b[T])&&(B=(x<3?M(B):x>3?M(k,O,B):M(k,O))||B);return x>3&&B&&Object.defineProperty(k,O,B),B},y=this&&this.__param||function(b,k){return function(O,D){k(O,D,b)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Renderer=void 0;var m=L(9596),w=L(4149),h=L(2512),d=L(5098),_=L(844),l=L(4725),a=L(2585),n=L(1420),s=L(8460),c=1,f=function(b){function k(O,D,M,x,B,T,J,j){var H=b.call(this)||this;H._colors=O,H._screenElement=D,H._bufferService=T,H._charSizeService=J,H._optionsService=j,H._id=c++,H._onRequestRedraw=new s.EventEmitter;var N=H._optionsService.options.allowTransparency;return H._renderLayers=[B.createInstance(m.TextRenderLayer,H._screenElement,0,H._colors,N,H._id),B.createInstance(w.SelectionRenderLayer,H._screenElement,1,H._colors,H._id),B.createInstance(d.LinkRenderLayer,H._screenElement,2,H._colors,H._id,M,x),B.createInstance(h.CursorRenderLayer,H._screenElement,3,H._colors,H._id,H._onRequestRedraw)],H.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},H._devicePixelRatio=window.devicePixelRatio,H._updateDimensions(),H.onOptionsChanged(),H}return v(k,b),Object.defineProperty(k.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),k.prototype.dispose=function(){for(var O=0,D=this._renderLayers;O<D.length;O++)D[O].dispose();b.prototype.dispose.call(this),(0,n.removeTerminalFromCache)(this._id)},k.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},k.prototype.setColors=function(O){this._colors=O;for(var D=0,M=this._renderLayers;D<M.length;D++){var x=M[D];x.setColors(this._colors),x.reset()}},k.prototype.onResize=function(O,D){this._updateDimensions();for(var M=0,x=this._renderLayers;M<x.length;M++)x[M].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},k.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},k.prototype.onBlur=function(){this._runOperation(function(O){return O.onBlur()})},k.prototype.onFocus=function(){this._runOperation(function(O){return O.onFocus()})},k.prototype.onSelectionChanged=function(O,D,M){M===void 0&&(M=!1),this._runOperation(function(x){return x.onSelectionChanged(O,D,M)})},k.prototype.onCursorMove=function(){this._runOperation(function(O){return O.onCursorMove()})},k.prototype.onOptionsChanged=function(){this._runOperation(function(O){return O.onOptionsChanged()})},k.prototype.clear=function(){this._runOperation(function(O){return O.reset()})},k.prototype._runOperation=function(O){for(var D=0,M=this._renderLayers;D<M.length;D++)O(M[D])},k.prototype.renderRows=function(O,D){for(var M=0,x=this._renderLayers;M<x.length;M++)x[M].onGridChanged(O,D)},k.prototype.clearTextureAtlas=function(){for(var O=0,D=this._renderLayers;O<D.length;O++)D[O].clearTextureAtlas()},k.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},C([y(4,a.IInstantiationService),y(5,a.IBufferService),y(6,l.ICharSizeService),y(7,a.IOptionsService)],k)}(_.Disposable);p.Renderer=f},1752:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.throwIfFalsy=void 0,p.throwIfFalsy=function(L){if(!L)throw new Error("value must not be falsy");return L}},4149:function(K,p,L){var g,v=this&&this.__extends||(g=function(d,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(l[n]=a[n])},g(d,_)},function(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function l(){this.constructor=d}g(d,_),d.prototype=_===null?Object.create(_):(l.prototype=_.prototype,new l)}),C=this&&this.__decorate||function(d,_,l,a){var n,s=arguments.length,c=s<3?_:a===null?a=Object.getOwnPropertyDescriptor(_,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(d,_,l,a);else for(var f=d.length-1;f>=0;f--)(n=d[f])&&(c=(s<3?n(c):s>3?n(_,l,c):n(_,l))||c);return s>3&&c&&Object.defineProperty(_,l,c),c},y=this&&this.__param||function(d,_){return function(l,a){_(l,a,d)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionRenderLayer=void 0;var m=L(1546),w=L(2585),h=function(d){function _(l,a,n,s,c,f){var b=d.call(this,l,"selection",a,!0,n,s,c,f)||this;return b._clearState(),b}return v(_,d),_.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},_.prototype.resize=function(l){d.prototype.resize.call(this,l),this._clearState()},_.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},_.prototype.onSelectionChanged=function(l,a,n){if(this._didStateChange(l,a,n,this._bufferService.buffer.ydisp))if(this._clearAll(),l&&a){var s=l[1]-this._bufferService.buffer.ydisp,c=a[1]-this._bufferService.buffer.ydisp,f=Math.max(s,0),b=Math.min(c,this._bufferService.rows-1);if(f>=this._bufferService.rows||b<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,n){var k=l[0],O=a[0]-k,D=b-f+1;this._fillCells(k,f,O,D)}else{k=s===f?l[0]:0;var M=f===c?a[0]:this._bufferService.cols;this._fillCells(k,f,M-k,1);var x=Math.max(b-f-1,0);if(this._fillCells(0,f+1,this._bufferService.cols,x),f!==b){var B=c===b?a[0]:this._bufferService.cols;this._fillCells(0,b,B,1)}}this._state.start=[l[0],l[1]],this._state.end=[a[0],a[1]],this._state.columnSelectMode=n,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},_.prototype._didStateChange=function(l,a,n,s){return!this._areCoordinatesEqual(l,this._state.start)||!this._areCoordinatesEqual(a,this._state.end)||n!==this._state.columnSelectMode||s!==this._state.ydisp},_.prototype._areCoordinatesEqual=function(l,a){return!(!l||!a)&&l[0]===a[0]&&l[1]===a[1]},C([y(4,w.IBufferService),y(5,w.IOptionsService)],_)}(m.BaseRenderLayer);p.SelectionRenderLayer=h},9596:function(K,p,L){var g,v=this&&this.__extends||(g=function(c,f){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,k){b.__proto__=k}||function(b,k){for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(b[O]=k[O])},g(c,f)},function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function b(){this.constructor=c}g(c,f),c.prototype=f===null?Object.create(f):(b.prototype=f.prototype,new b)}),C=this&&this.__decorate||function(c,f,b,k){var O,D=arguments.length,M=D<3?f:k===null?k=Object.getOwnPropertyDescriptor(f,b):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(c,f,b,k);else for(var x=c.length-1;x>=0;x--)(O=c[x])&&(M=(D<3?O(M):D>3?O(f,b,M):O(f,b))||M);return D>3&&M&&Object.defineProperty(f,b,M),M},y=this&&this.__param||function(c,f){return function(b,k){f(b,k,c)}};Object.defineProperty(p,"__esModule",{value:!0}),p.TextRenderLayer=void 0;var m=L(3700),w=L(1546),h=L(3734),d=L(643),_=L(511),l=L(2585),a=L(4725),n=L(4269),s=function(c){function f(b,k,O,D,M,x,B,T){var J=c.call(this,b,"text",k,D,O,M,x,B)||this;return J._characterJoinerService=T,J._characterWidth=0,J._characterFont="",J._characterOverlapCache={},J._workCell=new _.CellData,J._state=new m.GridCache,J}return v(f,c),f.prototype.resize=function(b){c.prototype.resize.call(this,b);var k=this._getFont(!1,!1);this._characterWidth===b.scaledCharWidth&&this._characterFont===k||(this._characterWidth=b.scaledCharWidth,this._characterFont=k,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},f.prototype.reset=function(){this._state.clear(),this._clearAll()},f.prototype._forEachCell=function(b,k,O){for(var D=b;D<=k;D++)for(var M=D+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.lines.get(M),B=this._characterJoinerService.getJoinedCharacters(M),T=0;T<this._bufferService.cols;T++){x.loadCell(T,this._workCell);var J=this._workCell,j=!1,H=T;if(J.getWidth()!==0){if(B.length>0&&T===B[0][0]){j=!0;var N=B.shift();J=new n.JoinedCellData(this._workCell,x.translateToString(!0,N[0],N[1]),N[1]-N[0]),H=N[1]-1}!j&&this._isOverlapping(J)&&H<x.length-1&&x.getCodePoint(H+1)===d.NULL_CELL_CODE&&(J.content&=-12582913,J.content|=2<<22),O(J,T,D),T=H}}},f.prototype._drawBackground=function(b,k){var O=this,D=this._ctx,M=this._bufferService.cols,x=0,B=0,T=null;D.save(),this._forEachCell(b,k,function(J,j,H){var N=null;J.isInverse()?N=J.isFgDefault()?O._colors.foreground.css:J.isFgRGB()?"rgb("+h.AttributeData.toColorRGB(J.getFgColor()).join(",")+")":O._colors.ansi[J.getFgColor()].css:J.isBgRGB()?N="rgb("+h.AttributeData.toColorRGB(J.getBgColor()).join(",")+")":J.isBgPalette()&&(N=O._colors.ansi[J.getBgColor()].css),T===null&&(x=j,B=H),H!==B?(D.fillStyle=T||"",O._fillCells(x,B,M-x,1),x=j,B=H):T!==N&&(D.fillStyle=T||"",O._fillCells(x,B,j-x,1),x=j,B=H),T=N}),T!==null&&(D.fillStyle=T,this._fillCells(x,B,M-x,1)),D.restore()},f.prototype._drawForeground=function(b,k){var O=this;this._forEachCell(b,k,function(D,M,x){if(!D.isInvisible()&&(O._drawChars(D,M,x),D.isUnderline()||D.isStrikethrough())){if(O._ctx.save(),D.isInverse())if(D.isBgDefault())O._ctx.fillStyle=O._colors.background.css;else if(D.isBgRGB())O._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(D.getBgColor()).join(",")+")";else{var B=D.getBgColor();O._optionsService.options.drawBoldTextInBrightColors&&D.isBold()&&B<8&&(B+=8),O._ctx.fillStyle=O._colors.ansi[B].css}else if(D.isFgDefault())O._ctx.fillStyle=O._colors.foreground.css;else if(D.isFgRGB())O._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(D.getFgColor()).join(",")+")";else{var T=D.getFgColor();O._optionsService.options.drawBoldTextInBrightColors&&D.isBold()&&T<8&&(T+=8),O._ctx.fillStyle=O._colors.ansi[T].css}D.isStrikethrough()&&O._fillMiddleLineAtCells(M,x,D.getWidth()),D.isUnderline()&&O._fillBottomLineAtCells(M,x,D.getWidth()),O._ctx.restore()}})},f.prototype.onGridChanged=function(b,k){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,b,this._bufferService.cols,k-b+1),this._drawBackground(b,k),this._drawForeground(b,k))},f.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},f.prototype._isOverlapping=function(b){if(b.getWidth()!==1||b.getCode()<256)return!1;var k=b.getChars();if(this._characterOverlapCache.hasOwnProperty(k))return this._characterOverlapCache[k];this._ctx.save(),this._ctx.font=this._characterFont;var O=Math.floor(this._ctx.measureText(k).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[k]=O,O},C([y(5,l.IBufferService),y(6,l.IOptionsService),y(7,a.ICharacterJoinerService)],f)}(w.BaseRenderLayer);p.TextRenderLayer=s},9616:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BaseCharAtlas=void 0;var L=function(){function g(){this._didWarmUp=!1}return g.prototype.dispose=function(){},g.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},g.prototype._doWarmUp=function(){},g.prototype.clear=function(){},g.prototype.beginFrame=function(){},g}();p.BaseCharAtlas=L},1420:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.removeTerminalFromCache=p.acquireCharAtlas=void 0;var g=L(2040),v=L(1906),C=[];p.acquireCharAtlas=function(y,m,w,h,d){for(var _=(0,g.generateConfig)(h,d,y,w),l=0;l<C.length;l++){var a=(n=C[l]).ownedBy.indexOf(m);if(a>=0){if((0,g.configEquals)(n.config,_))return n.atlas;n.ownedBy.length===1?(n.atlas.dispose(),C.splice(l,1)):n.ownedBy.splice(a,1);break}}for(l=0;l<C.length;l++){var n=C[l];if((0,g.configEquals)(n.config,_))return n.ownedBy.push(m),n.atlas}var s={atlas:new v.DynamicCharAtlas(document,_),config:_,ownedBy:[m]};return C.push(s),s.atlas},p.removeTerminalFromCache=function(y){for(var m=0;m<C.length;m++){var w=C[m].ownedBy.indexOf(y);if(w!==-1){C[m].ownedBy.length===1?(C[m].atlas.dispose(),C.splice(m,1)):C[m].ownedBy.splice(w,1);break}}}},2040:function(K,p,L){var g=this&&this.__spreadArray||function(C,y,m){if(m||arguments.length===2)for(var w,h=0,d=y.length;h<d;h++)!w&&h in y||(w||(w=Array.prototype.slice.call(y,0,h)),w[h]=y[h]);return C.concat(w||Array.prototype.slice.call(y))};Object.defineProperty(p,"__esModule",{value:!0}),p.is256Color=p.configEquals=p.generateConfig=void 0;var v=L(643);p.generateConfig=function(C,y,m,w){var h={foreground:w.foreground,background:w.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:g([],w.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:C,scaledCharHeight:y,fontFamily:m.fontFamily,fontSize:m.fontSize,fontWeight:m.fontWeight,fontWeightBold:m.fontWeightBold,allowTransparency:m.allowTransparency,colors:h}},p.configEquals=function(C,y){for(var m=0;m<C.colors.ansi.length;m++)if(C.colors.ansi[m].rgba!==y.colors.ansi[m].rgba)return!1;return C.devicePixelRatio===y.devicePixelRatio&&C.fontFamily===y.fontFamily&&C.fontSize===y.fontSize&&C.fontWeight===y.fontWeight&&C.fontWeightBold===y.fontWeightBold&&C.allowTransparency===y.allowTransparency&&C.scaledCharWidth===y.scaledCharWidth&&C.scaledCharHeight===y.scaledCharHeight&&C.colors.foreground===y.colors.foreground&&C.colors.background===y.colors.background},p.is256Color=function(C){return C<v.DEFAULT_COLOR}},8803:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CHAR_ATLAS_CELL_SPACING=p.TEXT_BASELINE=p.DIM_OPACITY=p.INVERTED_DEFAULT_COLOR=void 0;var g=L(6114);p.INVERTED_DEFAULT_COLOR=257,p.DIM_OPACITY=.5,p.TEXT_BASELINE=g.isFirefox?"bottom":"ideographic",p.CHAR_ATLAS_CELL_SPACING=1},1906:function(K,p,L){var g,v=this&&this.__extends||(g=function(k,O){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(D[x]=M[x])},g(k,O)},function(k,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function D(){this.constructor=k}g(k,O),k.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)});Object.defineProperty(p,"__esModule",{value:!0}),p.NoneCharAtlas=p.DynamicCharAtlas=p.getGlyphCacheKey=void 0;var C=L(8803),y=L(9616),m=L(5680),w=L(7001),h=L(6114),d=L(1752),_=L(4774),l=1024,a=1024,n={css:"rgba(0, 0, 0, 0)",rgba:0};function s(k){return k.code<<21|k.bg<<12|k.fg<<3|(k.bold?0:4)+(k.dim?0:2)+(k.italic?0:1)}p.getGlyphCacheKey=s;var c=function(k){function O(D,M){var x=k.call(this)||this;x._config=M,x._drawToCacheCount=0,x._glyphsWaitingOnBitmap=[],x._bitmapCommitTimeout=null,x._bitmap=null,x._cacheCanvas=D.createElement("canvas"),x._cacheCanvas.width=l,x._cacheCanvas.height=a,x._cacheCtx=(0,d.throwIfFalsy)(x._cacheCanvas.getContext("2d",{alpha:!0}));var B=D.createElement("canvas");B.width=x._config.scaledCharWidth,B.height=x._config.scaledCharHeight,x._tmpCtx=(0,d.throwIfFalsy)(B.getContext("2d",{alpha:x._config.allowTransparency})),x._width=Math.floor(l/x._config.scaledCharWidth),x._height=Math.floor(a/x._config.scaledCharHeight);var T=x._width*x._height;return x._cacheMap=new w.LRUMap(T),x._cacheMap.prealloc(T),x}return v(O,k),O.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},O.prototype.beginFrame=function(){this._drawToCacheCount=0},O.prototype.clear=function(){if(this._cacheMap.size>0){var D=this._width*this._height;this._cacheMap=new w.LRUMap(D),this._cacheMap.prealloc(D)}this._cacheCtx.clearRect(0,0,l,a),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},O.prototype.draw=function(D,M,x,B){if(M.code===32)return!0;if(!this._canCache(M))return!1;var T=s(M),J=this._cacheMap.get(T);if(J!=null)return this._drawFromCache(D,J,x,B),!0;if(this._drawToCacheCount<100){var j;j=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var H=this._drawToCache(M,j);return this._cacheMap.set(T,H),this._drawFromCache(D,H,x,B),!0}return!1},O.prototype._canCache=function(D){return D.code<256},O.prototype._toCoordinateX=function(D){return D%this._width*this._config.scaledCharWidth},O.prototype._toCoordinateY=function(D){return Math.floor(D/this._width)*this._config.scaledCharHeight},O.prototype._drawFromCache=function(D,M,x,B){if(!M.isEmpty){var T=this._toCoordinateX(M.index),J=this._toCoordinateY(M.index);D.drawImage(M.inBitmap?this._bitmap:this._cacheCanvas,T,J,this._config.scaledCharWidth,this._config.scaledCharHeight,x,B,this._config.scaledCharWidth,this._config.scaledCharHeight)}},O.prototype._getColorFromAnsiIndex=function(D){return D<this._config.colors.ansi.length?this._config.colors.ansi[D]:m.DEFAULT_ANSI_COLORS[D]},O.prototype._getBackgroundColor=function(D){return this._config.allowTransparency?n:D.bg===C.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:D.bg<256?this._getColorFromAnsiIndex(D.bg):this._config.colors.background},O.prototype._getForegroundColor=function(D){return D.fg===C.INVERTED_DEFAULT_COLOR?_.color.opaque(this._config.colors.background):D.fg<256?this._getColorFromAnsiIndex(D.fg):this._config.colors.foreground},O.prototype._drawToCache=function(D,M){this._drawToCacheCount++,this._tmpCtx.save();var x=this._getBackgroundColor(D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=x.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var B=D.bold?this._config.fontWeightBold:this._config.fontWeight,T=D.italic?"italic":"";this._tmpCtx.font=T+" "+B+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=C.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(D).css,D.dim&&(this._tmpCtx.globalAlpha=C.DIM_OPACITY),this._tmpCtx.fillText(D.chars,0,this._config.scaledCharHeight);var J=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),j=!1;if(this._config.allowTransparency||(j=b(J,x)),j&&D.chars==="_"&&!this._config.allowTransparency)for(var H=1;H<=5&&(this._tmpCtx.fillText(D.chars,0,this._config.scaledCharHeight-H),j=b(J=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),x));H++);this._tmpCtx.restore();var N=this._toCoordinateX(M),Z=this._toCoordinateY(M);this._cacheCtx.putImageData(J,N,Z);var Q={index:M,isEmpty:j,inBitmap:!1};return this._addGlyphToBitmap(Q),Q},O.prototype._addGlyphToBitmap=function(D){var M=this;!("createImageBitmap"in window)||h.isFirefox||h.isSafari||(this._glyphsWaitingOnBitmap.push(D),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return M._generateBitmap()},100)))},O.prototype._generateBitmap=function(){var D=this,M=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(x){D._bitmap=x;for(var B=0;B<M.length;B++)M[B].inBitmap=!0}),this._bitmapCommitTimeout=null},O}(y.BaseCharAtlas);p.DynamicCharAtlas=c;var f=function(k){function O(D,M){return k.call(this)||this}return v(O,k),O.prototype.draw=function(D,M,x,B){return!1},O}(y.BaseCharAtlas);function b(k,O){for(var D=!0,M=O.rgba>>>24,x=O.rgba>>>16&255,B=O.rgba>>>8&255,T=0;T<k.data.length;T+=4)k.data[T]===M&&k.data[T+1]===x&&k.data[T+2]===B?k.data[T+3]=0:D=!1;return D}p.NoneCharAtlas=f},7001:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.LRUMap=void 0;var L=function(){function g(v){this.capacity=v,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return g.prototype._unlinkNode=function(v){var C=v.prev,y=v.next;v===this._head&&(this._head=y),v===this._tail&&(this._tail=C),C!==null&&(C.next=y),y!==null&&(y.prev=C)},g.prototype._appendNode=function(v){var C=this._tail;C!==null&&(C.next=v),v.prev=C,v.next=null,this._tail=v,this._head===null&&(this._head=v)},g.prototype.prealloc=function(v){for(var C=this._nodePool,y=0;y<v;y++)C.push({prev:null,next:null,key:null,value:null})},g.prototype.get=function(v){var C=this._map[v];return C!==void 0?(this._unlinkNode(C),this._appendNode(C),C.value):null},g.prototype.peekValue=function(v){var C=this._map[v];return C!==void 0?C.value:null},g.prototype.peek=function(){var v=this._head;return v===null?null:v.value},g.prototype.set=function(v,C){var y=this._map[v];if(y!==void 0)y=this._map[v],this._unlinkNode(y),y.value=C;else if(this.size>=this.capacity)y=this._head,this._unlinkNode(y),delete this._map[y.key],y.key=v,y.value=C,this._map[v]=y;else{var m=this._nodePool;m.length>0?((y=m.pop()).key=v,y.value=C):y={prev:null,next:null,key:v,value:C},this._map[v]=y,this.size++}this._appendNode(y)},g}();p.LRUMap=L},1296:function(K,p,L){var g,v=this&&this.__extends||(g=function(D,M){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,B){x.__proto__=B}||function(x,B){for(var T in B)Object.prototype.hasOwnProperty.call(B,T)&&(x[T]=B[T])},g(D,M)},function(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function x(){this.constructor=D}g(D,M),D.prototype=M===null?Object.create(M):(x.prototype=M.prototype,new x)}),C=this&&this.__decorate||function(D,M,x,B){var T,J=arguments.length,j=J<3?M:B===null?B=Object.getOwnPropertyDescriptor(M,x):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(D,M,x,B);else for(var H=D.length-1;H>=0;H--)(T=D[H])&&(j=(J<3?T(j):J>3?T(M,x,j):T(M,x))||j);return J>3&&j&&Object.defineProperty(M,x,j),j},y=this&&this.__param||function(D,M){return function(x,B){M(x,B,D)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRenderer=void 0;var m=L(3787),w=L(8803),h=L(844),d=L(4725),_=L(2585),l=L(8460),a=L(4774),n=L(9631),s="xterm-dom-renderer-owner-",c="xterm-fg-",f="xterm-bg-",b="xterm-focus",k=1,O=function(D){function M(x,B,T,J,j,H,N,Z,Q,ae){var se=D.call(this)||this;return se._colors=x,se._element=B,se._screenElement=T,se._viewportElement=J,se._linkifier=j,se._linkifier2=H,se._charSizeService=Z,se._optionsService=Q,se._bufferService=ae,se._terminalClass=k++,se._rowElements=[],se._rowContainer=document.createElement("div"),se._rowContainer.classList.add("xterm-rows"),se._rowContainer.style.lineHeight="normal",se._rowContainer.setAttribute("aria-hidden","true"),se._refreshRowElements(se._bufferService.cols,se._bufferService.rows),se._selectionContainer=document.createElement("div"),se._selectionContainer.classList.add("xterm-selection"),se._selectionContainer.setAttribute("aria-hidden","true"),se.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},se._updateDimensions(),se._injectCss(),se._rowFactory=N.createInstance(m.DomRendererRowFactory,document,se._colors),se._element.classList.add(s+se._terminalClass),se._screenElement.appendChild(se._rowContainer),se._screenElement.appendChild(se._selectionContainer),se._linkifier.onShowLinkUnderline(function(me){return se._onLinkHover(me)}),se._linkifier.onHideLinkUnderline(function(me){return se._onLinkLeave(me)}),se._linkifier2.onShowLinkUnderline(function(me){return se._onLinkHover(me)}),se._linkifier2.onHideLinkUnderline(function(me){return se._onLinkLeave(me)}),se}return v(M,D),Object.defineProperty(M.prototype,"onRequestRedraw",{get:function(){return new l.EventEmitter().event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){this._element.classList.remove(s+this._terminalClass),(0,n.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),D.prototype.dispose.call(this)},M.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var x=0,B=this._rowElements;x<B.length;x++){var T=B[x];T.style.width=this.dimensions.canvasWidth+"px",T.style.height=this.dimensions.actualCellHeight+"px",T.style.lineHeight=this.dimensions.actualCellHeight+"px",T.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var J=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=J,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},M.prototype.setColors=function(x){this._colors=x,this._injectCss()},M.prototype._injectCss=function(){var x=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var B=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";B+=this._terminalSelector+" span:not(."+m.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+m.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+m.ITALIC_CLASS+" { font-style: italic;}",B+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",B+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",B+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+":not(."+m.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",B+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(T,J){B+=x._terminalSelector+" ."+c+J+" { color: "+T.css+"; }"+x._terminalSelector+" ."+f+J+" { background-color: "+T.css+"; }"}),B+=this._terminalSelector+" ."+c+w.INVERTED_DEFAULT_COLOR+" { color: "+a.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+f+w.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=B},M.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},M.prototype._refreshRowElements=function(x,B){for(var T=this._rowElements.length;T<=B;T++){var J=document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>B;)this._rowContainer.removeChild(this._rowElements.pop())},M.prototype.onResize=function(x,B){this._refreshRowElements(x,B),this._updateDimensions()},M.prototype.onCharSizeChanged=function(){this._updateDimensions()},M.prototype.onBlur=function(){this._rowContainer.classList.remove(b)},M.prototype.onFocus=function(){this._rowContainer.classList.add(b)},M.prototype.onSelectionChanged=function(x,B,T){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(x&&B){var J=x[1]-this._bufferService.buffer.ydisp,j=B[1]-this._bufferService.buffer.ydisp,H=Math.max(J,0),N=Math.min(j,this._bufferService.rows-1);if(!(H>=this._bufferService.rows||N<0)){var Z=document.createDocumentFragment();if(T)Z.appendChild(this._createSelectionElement(H,x[0],B[0],N-H+1));else{var Q=J===H?x[0]:0,ae=H===j?B[0]:this._bufferService.cols;Z.appendChild(this._createSelectionElement(H,Q,ae));var se=N-H-1;if(Z.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,se)),H!==N){var me=j===N?B[0]:this._bufferService.cols;Z.appendChild(this._createSelectionElement(N,0,me))}}this._selectionContainer.appendChild(Z)}}},M.prototype._createSelectionElement=function(x,B,T,J){J===void 0&&(J=1);var j=document.createElement("div");return j.style.height=J*this.dimensions.actualCellHeight+"px",j.style.top=x*this.dimensions.actualCellHeight+"px",j.style.left=B*this.dimensions.actualCellWidth+"px",j.style.width=this.dimensions.actualCellWidth*(T-B)+"px",j},M.prototype.onCursorMove=function(){},M.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},M.prototype.clear=function(){for(var x=0,B=this._rowElements;x<B.length;x++)B[x].innerText=""},M.prototype.renderRows=function(x,B){for(var T=this._bufferService.buffer.ybase+this._bufferService.buffer.y,J=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),j=this._optionsService.options.cursorBlink,H=x;H<=B;H++){var N=this._rowElements[H];N.innerText="";var Z=H+this._bufferService.buffer.ydisp,Q=this._bufferService.buffer.lines.get(Z),ae=this._optionsService.options.cursorStyle;N.appendChild(this._rowFactory.createRow(Q,Z,Z===T,ae,J,j,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(M.prototype,"_terminalSelector",{get:function(){return"."+s+this._terminalClass},enumerable:!1,configurable:!0}),M.prototype._onLinkHover=function(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!0)},M.prototype._onLinkLeave=function(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!1)},M.prototype._setCellUnderline=function(x,B,T,J,j,H){for(;x!==B||T!==J;){var N=this._rowElements[T];if(!N)return;var Z=N.children[x];Z&&(Z.style.textDecoration=H?"underline":"none"),++x>=j&&(x=0,T++)}},C([y(6,_.IInstantiationService),y(7,d.ICharSizeService),y(8,_.IOptionsService),y(9,_.IBufferService)],M)}(h.Disposable);p.DomRenderer=O},3787:function(K,p,L){var g=this&&this.__decorate||function(n,s,c,f){var b,k=arguments.length,O=k<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(n,s,c,f);else for(var D=n.length-1;D>=0;D--)(b=n[D])&&(O=(k<3?b(O):k>3?b(s,c,O):b(s,c))||O);return k>3&&O&&Object.defineProperty(s,c,O),O},v=this&&this.__param||function(n,s){return function(c,f){s(c,f,n)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRendererRowFactory=p.CURSOR_STYLE_UNDERLINE_CLASS=p.CURSOR_STYLE_BAR_CLASS=p.CURSOR_STYLE_BLOCK_CLASS=p.CURSOR_BLINK_CLASS=p.CURSOR_CLASS=p.STRIKETHROUGH_CLASS=p.UNDERLINE_CLASS=p.ITALIC_CLASS=p.DIM_CLASS=p.BOLD_CLASS=void 0;var C=L(8803),y=L(643),m=L(511),w=L(2585),h=L(4774),d=L(4725),_=L(4269);p.BOLD_CLASS="xterm-bold",p.DIM_CLASS="xterm-dim",p.ITALIC_CLASS="xterm-italic",p.UNDERLINE_CLASS="xterm-underline",p.STRIKETHROUGH_CLASS="xterm-strikethrough",p.CURSOR_CLASS="xterm-cursor",p.CURSOR_BLINK_CLASS="xterm-cursor-blink",p.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",p.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",p.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var l=function(){function n(s,c,f,b,k){this._document=s,this._colors=c,this._characterJoinerService=f,this._optionsService=b,this._coreService=k,this._workCell=new m.CellData}return n.prototype.setColors=function(s){this._colors=s},n.prototype.createRow=function(s,c,f,b,k,O,D,M){for(var x=this._document.createDocumentFragment(),B=this._characterJoinerService.getJoinedCharacters(c),T=0,J=Math.min(s.length,M)-1;J>=0;J--)if(s.loadCell(J,this._workCell).getCode()!==y.NULL_CELL_CODE||f&&J===k){T=J+1;break}for(J=0;J<T;J++){s.loadCell(J,this._workCell);var j=this._workCell.getWidth();if(j!==0){var H=!1,N=J,Z=this._workCell;if(B.length>0&&J===B[0][0]){H=!0;var Q=B.shift();Z=new _.JoinedCellData(this._workCell,s.translateToString(!0,Q[0],Q[1]),Q[1]-Q[0]),N=Q[1]-1,j=Z.getWidth()}var ae=this._document.createElement("span");if(j>1&&(ae.style.width=D*j+"px"),H&&(ae.style.display="inline",k>=J&&k<=N&&(k=J)),!this._coreService.isCursorHidden&&f&&J===k)switch(ae.classList.add(p.CURSOR_CLASS),O&&ae.classList.add(p.CURSOR_BLINK_CLASS),b){case"bar":ae.classList.add(p.CURSOR_STYLE_BAR_CLASS);break;case"underline":ae.classList.add(p.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ae.classList.add(p.CURSOR_STYLE_BLOCK_CLASS)}Z.isBold()&&ae.classList.add(p.BOLD_CLASS),Z.isItalic()&&ae.classList.add(p.ITALIC_CLASS),Z.isDim()&&ae.classList.add(p.DIM_CLASS),Z.isUnderline()&&ae.classList.add(p.UNDERLINE_CLASS),Z.isInvisible()?ae.textContent=y.WHITESPACE_CELL_CHAR:ae.textContent=Z.getChars()||y.WHITESPACE_CELL_CHAR,Z.isStrikethrough()&&ae.classList.add(p.STRIKETHROUGH_CLASS);var se=Z.getFgColor(),me=Z.getFgColorMode(),we=Z.getBgColor(),he=Z.getBgColorMode(),F=!!Z.isInverse();if(F){var z=se;se=we,we=z;var G=me;me=he,he=G}switch(me){case 16777216:case 33554432:Z.isBold()&&se<8&&this._optionsService.options.drawBoldTextInBrightColors&&(se+=8),this._applyMinimumContrast(ae,this._colors.background,this._colors.ansi[se])||ae.classList.add("xterm-fg-"+se);break;case 50331648:var ce=h.rgba.toColor(se>>16&255,se>>8&255,255&se);this._applyMinimumContrast(ae,this._colors.background,ce)||this._addStyle(ae,"color:#"+a(se.toString(16),"0",6));break;default:this._applyMinimumContrast(ae,this._colors.background,this._colors.foreground)||F&&ae.classList.add("xterm-fg-"+C.INVERTED_DEFAULT_COLOR)}switch(he){case 16777216:case 33554432:ae.classList.add("xterm-bg-"+we);break;case 50331648:this._addStyle(ae,"background-color:#"+a(we.toString(16),"0",6));break;default:F&&ae.classList.add("xterm-bg-"+C.INVERTED_DEFAULT_COLOR)}x.appendChild(ae),J=N}}return x},n.prototype._applyMinimumContrast=function(s,c,f){if(this._optionsService.options.minimumContrastRatio===1)return!1;var b=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return b===void 0&&(b=h.color.ensureContrastRatio(c,f,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,b??null)),!!b&&(this._addStyle(s,"color:"+b.css),!0)},n.prototype._addStyle=function(s,c){s.setAttribute("style",""+(s.getAttribute("style")||"")+c+";")},g([v(2,d.ICharacterJoinerService),v(3,w.IOptionsService),v(4,w.ICoreService)],n)}();function a(n,s,c){for(;n.length<c;)n=s+n;return n}p.DomRendererRowFactory=l},456:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionModel=void 0;var L=function(){function g(v){this._bufferService=v,this.isSelectAllActive=!1,this.selectionStartLength=0}return g.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(g.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var v=this.selectionStart[0]+this.selectionStartLength;return v>this._bufferService.cols?v%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)-1]:[v%this._bufferService.cols,this.selectionStart[1]+Math.floor(v/this._bufferService.cols)]:[v,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),g.prototype.areSelectionValuesReversed=function(){var v=this.selectionStart,C=this.selectionEnd;return!(!v||!C)&&(v[1]>C[1]||v[1]===C[1]&&v[0]>C[0])},g.prototype.onTrim=function(v){return this.selectionStart&&(this.selectionStart[1]-=v),this.selectionEnd&&(this.selectionEnd[1]-=v),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},g}();p.SelectionModel=L},428:function(K,p,L){var g=this&&this.__decorate||function(h,d,_,l){var a,n=arguments.length,s=n<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,_):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(h,d,_,l);else for(var c=h.length-1;c>=0;c--)(a=h[c])&&(s=(n<3?a(s):n>3?a(d,_,s):a(d,_))||s);return n>3&&s&&Object.defineProperty(d,_,s),s},v=this&&this.__param||function(h,d){return function(_,l){d(_,l,h)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharSizeService=void 0;var C=L(2585),y=L(8460),m=function(){function h(d,_,l){this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=new y.EventEmitter,this._measureStrategy=new w(d,_,this._optionsService)}return Object.defineProperty(h.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),h.prototype.measure=function(){var d=this._measureStrategy.measure();d.width===this.width&&d.height===this.height||(this.width=d.width,this.height=d.height,this._onCharSizeChange.fire())},g([v(2,C.IOptionsService)],h)}();p.CharSizeService=m;var w=function(){function h(d,_,l){this._document=d,this._parentElement=_,this._optionsService=l,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return h.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var d=this._measureElement.getBoundingClientRect();return d.width!==0&&d.height!==0&&(this._result.width=d.width,this._result.height=Math.ceil(d.height)),this._result},h}()},4269:function(K,p,L){var g,v=this&&this.__extends||(g=function(a,n){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])},g(a,n)},function(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=a}g(a,n),a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}),C=this&&this.__decorate||function(a,n,s,c){var f,b=arguments.length,k=b<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,n,s,c);else for(var O=a.length-1;O>=0;O--)(f=a[O])&&(k=(b<3?f(k):b>3?f(n,s,k):f(n,s))||k);return b>3&&k&&Object.defineProperty(n,s,k),k},y=this&&this.__param||function(a,n){return function(s,c){n(s,c,a)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharacterJoinerService=p.JoinedCellData=void 0;var m=L(3734),w=L(643),h=L(511),d=L(2585),_=function(a){function n(s,c,f){var b=a.call(this)||this;return b.content=0,b.combinedData="",b.fg=s.fg,b.bg=s.bg,b.combinedData=c,b._width=f,b}return v(n,a),n.prototype.isCombined=function(){return 2097152},n.prototype.getWidth=function(){return this._width},n.prototype.getChars=function(){return this.combinedData},n.prototype.getCode=function(){return 2097151},n.prototype.setFromCharData=function(s){throw new Error("not implemented")},n.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},n}(m.AttributeData);p.JoinedCellData=_;var l=function(){function a(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}return a.prototype.register=function(n){var s={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(s),s.id},a.prototype.deregister=function(n){for(var s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===n)return this._characterJoiners.splice(s,1),!0;return!1},a.prototype.getJoinedCharacters=function(n){if(this._characterJoiners.length===0)return[];var s=this._bufferService.buffer.lines.get(n);if(!s||s.length===0)return[];for(var c=[],f=s.translateToString(!0),b=0,k=0,O=0,D=s.getFg(0),M=s.getBg(0),x=0;x<s.getTrimmedLength();x++)if(s.loadCell(x,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==M){if(x-b>1)for(var B=this._getJoinedRanges(f,O,k,s,b),T=0;T<B.length;T++)c.push(B[T]);b=x,O=k,D=this._workCell.fg,M=this._workCell.bg}k+=this._workCell.getChars().length||w.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1)for(B=this._getJoinedRanges(f,O,k,s,b),T=0;T<B.length;T++)c.push(B[T]);return c},a.prototype._getJoinedRanges=function(n,s,c,f,b){var k=n.substring(s,c),O=[];try{O=this._characterJoiners[0].handler(k)}catch(B){console.error(B)}for(var D=1;D<this._characterJoiners.length;D++)try{for(var M=this._characterJoiners[D].handler(k),x=0;x<M.length;x++)a._mergeRanges(O,M[x])}catch(B){console.error(B)}return this._stringRangesToCellRanges(O,f,b),O},a.prototype._stringRangesToCellRanges=function(n,s,c){var f=0,b=!1,k=0,O=n[f];if(O){for(var D=c;D<this._bufferService.cols;D++){var M=s.getWidth(D),x=s.getString(D).length||w.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!b&&O[0]<=k&&(O[0]=D,b=!0),O[1]<=k){if(O[1]=D,!(O=n[++f]))break;O[0]<=k?(O[0]=D,b=!0):b=!1}k+=x}}O&&(O[1]=this._bufferService.cols)}},a._mergeRanges=function(n,s){for(var c=!1,f=0;f<n.length;f++){var b=n[f];if(c){if(s[1]<=b[0])return n[f-1][1]=s[1],n;if(s[1]<=b[1])return n[f-1][1]=Math.max(s[1],b[1]),n.splice(f,1),n;n.splice(f,1),f--}else{if(s[1]<=b[0])return n.splice(f,0,s),n;if(s[1]<=b[1])return b[0]=Math.min(s[0],b[0]),n;s[0]<b[1]&&(b[0]=Math.min(s[0],b[0]),c=!0)}}return c?n[n.length-1][1]=s[1]:n.push(s),n},a=C([y(0,d.IBufferService)],a)}();p.CharacterJoinerService=l},5114:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreBrowserService=void 0;var L=function(){function g(v){this._textarea=v}return Object.defineProperty(g.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),g}();p.CoreBrowserService=L},8934:function(K,p,L){var g=this&&this.__decorate||function(w,h,d,_){var l,a=arguments.length,n=a<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(w,h,d,_);else for(var s=w.length-1;s>=0;s--)(l=w[s])&&(n=(a<3?l(n):a>3?l(h,d,n):l(h,d))||n);return a>3&&n&&Object.defineProperty(h,d,n),n},v=this&&this.__param||function(w,h){return function(d,_){h(d,_,w)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseService=void 0;var C=L(4725),y=L(9806),m=function(){function w(h,d){this._renderService=h,this._charSizeService=d}return w.prototype.getCoords=function(h,d,_,l,a){return(0,y.getCoords)(h,d,_,l,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,a)},w.prototype.getRawByteCoords=function(h,d,_,l){var a=this.getCoords(h,d,_,l);return(0,y.getRawByteCoords)(a)},g([v(0,C.IRenderService),v(1,C.ICharSizeService)],w)}();p.MouseService=m},3230:function(K,p,L){var g,v=this&&this.__extends||(g=function(s,c){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,b){f.__proto__=b}||function(f,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(f[k]=b[k])},g(s,c)},function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=s}g(s,c),s.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}),C=this&&this.__decorate||function(s,c,f,b){var k,O=arguments.length,D=O<3?c:b===null?b=Object.getOwnPropertyDescriptor(c,f):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(s,c,f,b);else for(var M=s.length-1;M>=0;M--)(k=s[M])&&(D=(O<3?k(D):O>3?k(c,f,D):k(c,f))||D);return O>3&&D&&Object.defineProperty(c,f,D),D},y=this&&this.__param||function(s,c){return function(f,b){c(f,b,s)}};Object.defineProperty(p,"__esModule",{value:!0}),p.RenderService=void 0;var m=L(6193),w=L(8460),h=L(844),d=L(5596),_=L(3656),l=L(2585),a=L(4725),n=function(s){function c(f,b,k,O,D,M){var x=s.call(this)||this;if(x._renderer=f,x._rowCount=b,x._charSizeService=D,x._isPaused=!1,x._needsFullRefresh=!1,x._isNextRenderRedrawOnly=!0,x._needsSelectionRefresh=!1,x._canvasWidth=0,x._canvasHeight=0,x._selectionState={start:void 0,end:void 0,columnSelectMode:!1},x._onDimensionsChange=new w.EventEmitter,x._onRender=new w.EventEmitter,x._onRefreshRequest=new w.EventEmitter,x.register({dispose:function(){return x._renderer.dispose()}}),x._renderDebouncer=new m.RenderDebouncer(function(T,J){return x._renderRows(T,J)}),x.register(x._renderDebouncer),x._screenDprMonitor=new d.ScreenDprMonitor,x._screenDprMonitor.setListener(function(){return x.onDevicePixelRatioChange()}),x.register(x._screenDprMonitor),x.register(M.onResize(function(T){return x._fullRefresh()})),x.register(O.onOptionChange(function(){return x._renderer.onOptionsChanged()})),x.register(x._charSizeService.onCharSizeChange(function(){return x.onCharSizeChanged()})),x._renderer.onRequestRedraw(function(T){return x.refreshRows(T.start,T.end,!0)}),x.register((0,_.addDisposableDomListener)(window,"resize",function(){return x.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var B=new IntersectionObserver(function(T){return x._onIntersectionChange(T[T.length-1])},{threshold:0});B.observe(k),x.register({dispose:function(){return B.disconnect()}})}return x}return v(c,s),Object.defineProperty(c.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),c.prototype._onIntersectionChange=function(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},c.prototype.refreshRows=function(f,b,k){k===void 0&&(k=!1),this._isPaused?this._needsFullRefresh=!0:(k||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,b,this._rowCount))},c.prototype._renderRows=function(f,b){this._renderer.renderRows(f,b),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:f,end:b}),this._isNextRenderRedrawOnly=!0},c.prototype.resize=function(f,b){this._rowCount=b,this._fireOnCanvasResize()},c.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},c.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},c.prototype.dispose=function(){s.prototype.dispose.call(this)},c.prototype.setRenderer=function(f){var b=this;this._renderer.dispose(),this._renderer=f,this._renderer.onRequestRedraw(function(k){return b.refreshRows(k.start,k.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},c.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},c.prototype.clearTextureAtlas=function(){var f,b;(b=(f=this._renderer)===null||f===void 0?void 0:f.clearTextureAtlas)===null||b===void 0||b.call(f),this._fullRefresh()},c.prototype.setColors=function(f){this._renderer.setColors(f),this._fullRefresh()},c.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},c.prototype.onResize=function(f,b){this._renderer.onResize(f,b),this._fullRefresh()},c.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},c.prototype.onBlur=function(){this._renderer.onBlur()},c.prototype.onFocus=function(){this._renderer.onFocus()},c.prototype.onSelectionChanged=function(f,b,k){this._selectionState.start=f,this._selectionState.end=b,this._selectionState.columnSelectMode=k,this._renderer.onSelectionChanged(f,b,k)},c.prototype.onCursorMove=function(){this._renderer.onCursorMove()},c.prototype.clear=function(){this._renderer.clear()},C([y(3,l.IOptionsService),y(4,a.ICharSizeService),y(5,l.IBufferService)],c)}(h.Disposable);p.RenderService=n},9312:function(K,p,L){var g,v=this&&this.__extends||(g=function(O,D){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,x){M.__proto__=x}||function(M,x){for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(M[B]=x[B])},g(O,D)},function(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function M(){this.constructor=O}g(O,D),O.prototype=D===null?Object.create(D):(M.prototype=D.prototype,new M)}),C=this&&this.__decorate||function(O,D,M,x){var B,T=arguments.length,J=T<3?D:x===null?x=Object.getOwnPropertyDescriptor(D,M):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(O,D,M,x);else for(var j=O.length-1;j>=0;j--)(B=O[j])&&(J=(T<3?B(J):T>3?B(D,M,J):B(D,M))||J);return T>3&&J&&Object.defineProperty(D,M,J),J},y=this&&this.__param||function(O,D){return function(M,x){D(M,x,O)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionService=void 0;var m=L(6114),w=L(456),h=L(511),d=L(8460),_=L(4725),l=L(2585),a=L(9806),n=L(9504),s=L(844),c=L(4841),f=String.fromCharCode(160),b=new RegExp(f,"g"),k=function(O){function D(M,x,B,T,J,j,H,N){var Z=O.call(this)||this;return Z._element=M,Z._screenElement=x,Z._linkifier=B,Z._bufferService=T,Z._coreService=J,Z._mouseService=j,Z._optionsService=H,Z._renderService=N,Z._dragScrollAmount=0,Z._enabled=!0,Z._workCell=new h.CellData,Z._mouseDownTimeStamp=0,Z._oldHasSelection=!1,Z._oldSelectionStart=void 0,Z._oldSelectionEnd=void 0,Z._onLinuxMouseSelection=Z.register(new d.EventEmitter),Z._onRedrawRequest=Z.register(new d.EventEmitter),Z._onSelectionChange=Z.register(new d.EventEmitter),Z._onRequestScrollLines=Z.register(new d.EventEmitter),Z._mouseMoveListener=function(Q){return Z._onMouseMove(Q)},Z._mouseUpListener=function(Q){return Z._onMouseUp(Q)},Z._coreService.onUserInput(function(){Z.hasSelection&&Z.clearSelection()}),Z._trimListener=Z._bufferService.buffer.lines.onTrim(function(Q){return Z._onTrim(Q)}),Z.register(Z._bufferService.buffers.onBufferActivate(function(Q){return Z._onBufferActivate(Q)})),Z.enable(),Z._model=new w.SelectionModel(Z._bufferService),Z._activeSelectionMode=0,Z}return v(D,O),Object.defineProperty(D.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),D.prototype.dispose=function(){this._removeMouseDownListeners()},D.prototype.reset=function(){this.clearSelection()},D.prototype.disable=function(){this.clearSelection(),this._enabled=!1},D.prototype.enable=function(){this._enabled=!0},Object.defineProperty(D.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"hasSelection",{get:function(){var M=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!M||!x||M[0]===x[0]&&M[1]===x[1])},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"selectionText",{get:function(){var M=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!M||!x)return"";var B=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(M[0]===x[0])return"";for(var J=M[1];J<=x[1];J++){var j=B.translateBufferLineToString(J,!0,M[0],x[0]);T.push(j)}}else{var H=M[1]===x[1]?x[0]:void 0;for(T.push(B.translateBufferLineToString(M[1],!0,M[0],H)),J=M[1]+1;J<=x[1]-1;J++){var N=B.lines.get(J);j=B.translateBufferLineToString(J,!0),(N==null?void 0:N.isWrapped)?T[T.length-1]+=j:T.push(j)}M[1]!==x[1]&&(N=B.lines.get(x[1]),j=B.translateBufferLineToString(x[1],!0,0,x[0]),N&&N.isWrapped?T[T.length-1]+=j:T.push(j))}return T.map(function(Z){return Z.replace(b," ")}).join(m.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),D.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},D.prototype.refresh=function(M){var x=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return x._refresh()})),m.isLinux&&M&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},D.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},D.prototype._isClickInSelection=function(M){var x=this._getMouseBufferCoords(M),B=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(B&&T&&x)&&this._areCoordsInSelection(x,B,T)},D.prototype._areCoordsInSelection=function(M,x,B){return M[1]>x[1]&&M[1]<B[1]||x[1]===B[1]&&M[1]===x[1]&&M[0]>=x[0]&&M[0]<B[0]||x[1]<B[1]&&M[1]===B[1]&&M[0]<B[0]||x[1]<B[1]&&M[1]===x[1]&&M[0]>=x[0]},D.prototype._selectWordAtCursor=function(M,x){var B,T,J=(T=(B=this._linkifier.currentLink)===null||B===void 0?void 0:B.link)===null||T===void 0?void 0:T.range;if(J)return this._model.selectionStart=[J.start.x-1,J.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(J,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var j=this._getMouseBufferCoords(M);return!!j&&(this._selectWordAt(j,x),this._model.selectionEnd=void 0,!0)},D.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},D.prototype.selectLines=function(M,x){this._model.clearSelection(),M=Math.max(M,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,M],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()},D.prototype._onTrim=function(M){this._model.onTrim(M)&&this.refresh()},D.prototype._getMouseBufferCoords=function(M){var x=this._mouseService.getCoords(M,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x},D.prototype._getMouseEventScrollAmount=function(M){var x=(0,a.getCoordsRelativeToElement)(M,this._screenElement)[1],B=this._renderService.dimensions.canvasHeight;return x>=0&&x<=B?0:(x>B&&(x-=B),x=Math.min(Math.max(x,-50),50),(x/=50)/Math.abs(x)+Math.round(14*x))},D.prototype.shouldForceSelection=function(M){return m.isMac?M.altKey&&this._optionsService.options.macOptionClickForcesSelection:M.shiftKey},D.prototype.onMouseDown=function(M){if(this._mouseDownTimeStamp=M.timeStamp,(M.button!==2||!this.hasSelection)&&M.button===0){if(!this._enabled){if(!this.shouldForceSelection(M))return;M.stopPropagation()}M.preventDefault(),this._dragScrollAmount=0,this._enabled&&M.shiftKey?this._onIncrementalClick(M):M.detail===1?this._onSingleClick(M):M.detail===2?this._onDoubleClick(M):M.detail===3&&this._onTripleClick(M),this._addMouseDownListeners(),this.refresh(!0)}},D.prototype._addMouseDownListeners=function(){var M=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return M._dragScroll()},50)},D.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},D.prototype._onIncrementalClick=function(M){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(M))},D.prototype._onSingleClick=function(M){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(M)?3:0,this._model.selectionStart=this._getMouseBufferCoords(M),this._model.selectionStart){this._model.selectionEnd=void 0;var x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},D.prototype._onDoubleClick=function(M){this._selectWordAtCursor(M,!0)&&(this._activeSelectionMode=1)},D.prototype._onTripleClick=function(M){var x=this._getMouseBufferCoords(M);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))},D.prototype.shouldColumnSelect=function(M){return M.altKey&&!(m.isMac&&this._optionsService.options.macOptionClickForcesSelection)},D.prototype._onMouseMove=function(M){if(M.stopImmediatePropagation(),this._model.selectionStart){var x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(M),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(M),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){var T=B.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},D.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var M=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(M.ydisp+this._bufferService.rows,M.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=M.ydisp),this.refresh()}},D.prototype._onMouseUp=function(M){var x=M.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&M.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var B=this._mouseService.getCoords(M,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){var T=(0,n.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()},D.prototype._fireEventIfSelectionChanged=function(){var M=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,B=!(!M||!x||M[0]===x[0]&&M[1]===x[1]);B?M&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&M[0]===this._oldSelectionStart[0]&&M[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(M,x,B)):this._oldHasSelection&&this._fireOnSelectionChange(M,x,B)},D.prototype._fireOnSelectionChange=function(M,x,B){this._oldSelectionStart=M,this._oldSelectionEnd=x,this._oldHasSelection=B,this._onSelectionChange.fire()},D.prototype._onBufferActivate=function(M){var x=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=M.activeBuffer.lines.onTrim(function(B){return x._onTrim(B)})},D.prototype._convertViewportColToCharacterIndex=function(M,x){for(var B=x[0],T=0;x[0]>=T;T++){var J=M.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:J>1&&x[0]!==T&&(B+=J-1)}return B},D.prototype.setSelection=function(M,x,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[M,x],this._model.selectionStartLength=B,this.refresh()},D.prototype.rightClickSelect=function(M){this._isClickInSelection(M)||(this._selectWordAtCursor(M,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},D.prototype._getWordAt=function(M,x,B,T){if(B===void 0&&(B=!0),T===void 0&&(T=!0),!(M[0]>=this._bufferService.cols)){var J=this._bufferService.buffer,j=J.lines.get(M[1]);if(j){var H=J.translateBufferLineToString(M[1],!1),N=this._convertViewportColToCharacterIndex(j,M),Z=N,Q=M[0]-N,ae=0,se=0,me=0,we=0;if(H.charAt(N)===" "){for(;N>0&&H.charAt(N-1)===" ";)N--;for(;Z<H.length&&H.charAt(Z+1)===" ";)Z++}else{var he=M[0],F=M[0];j.getWidth(he)===0&&(ae++,he--),j.getWidth(F)===2&&(se++,F++);var z=j.getString(F).length;for(z>1&&(we+=z-1,Z+=z-1);he>0&&N>0&&!this._isCharWordSeparator(j.loadCell(he-1,this._workCell));){j.loadCell(he-1,this._workCell);var G=this._workCell.getChars().length;this._workCell.getWidth()===0?(ae++,he--):G>1&&(me+=G-1,N-=G-1),N--,he--}for(;F<j.length&&Z+1<H.length&&!this._isCharWordSeparator(j.loadCell(F+1,this._workCell));){j.loadCell(F+1,this._workCell);var ce=this._workCell.getChars().length;this._workCell.getWidth()===2?(se++,F++):ce>1&&(we+=ce-1,Z+=ce-1),Z++,F++}}Z++;var $=N+Q-ae+me,ge=Math.min(this._bufferService.cols,Z-N+ae+se-me-we);if(x||H.slice(N,Z).trim()!==""){if(B&&$===0&&j.getCodePoint(0)!==32){var Le=J.lines.get(M[1]-1);if(Le&&j.isWrapped&&Le.getCodePoint(this._bufferService.cols-1)!==32){var Be=this._getWordAt([this._bufferService.cols-1,M[1]-1],!1,!0,!1);if(Be){var Ee=this._bufferService.cols-Be.start;$-=Ee,ge+=Ee}}}if(T&&$+ge===this._bufferService.cols&&j.getCodePoint(this._bufferService.cols-1)!==32){var He=J.lines.get(M[1]+1);if((He==null?void 0:He.isWrapped)&&He.getCodePoint(0)!==32){var Se=this._getWordAt([0,M[1]+1],!1,!1,!0);Se&&(ge+=Se.length)}}return{start:$,length:ge}}}}},D.prototype._selectWordAt=function(M,x){var B=this._getWordAt(M,x);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,M[1]--;this._model.selectionStart=[B.start,M[1]],this._model.selectionStartLength=B.length}},D.prototype._selectToWordAt=function(M){var x=this._getWordAt(M,!0);if(x){for(var B=M[1];x.start<0;)x.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,B]}},D.prototype._isCharWordSeparator=function(M){return M.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(M.getChars())>=0},D.prototype._selectLineAt=function(M){var x=this._bufferService.buffer.getWrappedRangeForLine(M);this._model.selectionStart=[0,x.first],this._model.selectionEnd=[this._bufferService.cols,x.last],this._model.selectionStartLength=0},C([y(3,l.IBufferService),y(4,l.ICoreService),y(5,_.IMouseService),y(6,l.IOptionsService),y(7,_.IRenderService)],D)}(s.Disposable);p.SelectionService=k},4725:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ICharacterJoinerService=p.ISoundService=p.ISelectionService=p.IRenderService=p.IMouseService=p.ICoreBrowserService=p.ICharSizeService=void 0;var g=L(8343);p.ICharSizeService=(0,g.createDecorator)("CharSizeService"),p.ICoreBrowserService=(0,g.createDecorator)("CoreBrowserService"),p.IMouseService=(0,g.createDecorator)("MouseService"),p.IRenderService=(0,g.createDecorator)("RenderService"),p.ISelectionService=(0,g.createDecorator)("SelectionService"),p.ISoundService=(0,g.createDecorator)("SoundService"),p.ICharacterJoinerService=(0,g.createDecorator)("CharacterJoinerService")},357:function(K,p,L){var g=this&&this.__decorate||function(m,w,h,d){var _,l=arguments.length,a=l<3?w:d===null?d=Object.getOwnPropertyDescriptor(w,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(m,w,h,d);else for(var n=m.length-1;n>=0;n--)(_=m[n])&&(a=(l<3?_(a):l>3?_(w,h,a):_(w,h))||a);return l>3&&a&&Object.defineProperty(w,h,a),a},v=this&&this.__param||function(m,w){return function(h,d){w(h,d,m)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SoundService=void 0;var C=L(2585),y=function(){function m(w){this._optionsService=w}return Object.defineProperty(m,"audioContext",{get:function(){if(!m._audioContext){var w=window.AudioContext||window.webkitAudioContext;if(!w)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;m._audioContext=new w}return m._audioContext},enumerable:!1,configurable:!0}),m.prototype.playBellSound=function(){var w=m.audioContext;if(w){var h=w.createBufferSource();w.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(d){h.buffer=d,h.connect(w.destination),h.start(0)})}},m.prototype._base64ToArrayBuffer=function(w){for(var h=window.atob(w),d=h.length,_=new Uint8Array(d),l=0;l<d;l++)_[l]=h.charCodeAt(l);return _.buffer},m.prototype._removeMimeType=function(w){return w.split(",")[1]},m=g([v(0,C.IOptionsService)],m)}();p.SoundService=y},6349:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CircularList=void 0;var g=L(8460),v=function(){function C(y){this._maxLength=y,this.onDeleteEmitter=new g.EventEmitter,this.onInsertEmitter=new g.EventEmitter,this.onTrimEmitter=new g.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(C.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"maxLength",{get:function(){return this._maxLength},set:function(y){if(this._maxLength!==y){for(var m=new Array(y),w=0;w<Math.min(y,this.length);w++)m[w]=this._array[this._getCyclicIndex(w)];this._array=m,this._maxLength=y,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"length",{get:function(){return this._length},set:function(y){if(y>this._length)for(var m=this._length;m<y;m++)this._array[m]=void 0;this._length=y},enumerable:!1,configurable:!0}),C.prototype.get=function(y){return this._array[this._getCyclicIndex(y)]},C.prototype.set=function(y,m){this._array[this._getCyclicIndex(y)]=m},C.prototype.push=function(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},C.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(C.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),C.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},C.prototype.splice=function(y,m){for(var w=[],h=2;h<arguments.length;h++)w[h-2]=arguments[h];if(m){for(var d=y;d<this._length-m;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+m)];this._length-=m,this.onDeleteEmitter.fire({index:y,amount:m})}for(d=this._length-1;d>=y;d--)this._array[this._getCyclicIndex(d+w.length)]=this._array[this._getCyclicIndex(d)];for(d=0;d<w.length;d++)this._array[this._getCyclicIndex(y+d)]=w[d];if(w.length&&this.onInsertEmitter.fire({index:y,amount:w.length}),this._length+w.length>this._maxLength){var _=this._length+w.length-this._maxLength;this._startIndex+=_,this._length=this._maxLength,this.onTrimEmitter.fire(_)}else this._length+=w.length},C.prototype.trimStart=function(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)},C.prototype.shiftElements=function(y,m,w){if(!(m<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(var h=m-1;h>=0;h--)this.set(y+h+w,this.get(y+h));var d=y+m+w-this._length;if(d>0)for(this._length+=d;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(h=0;h<m;h++)this.set(y+h+w,this.get(y+h))}},C.prototype._getCyclicIndex=function(y){return(this._startIndex+y)%this._maxLength},C}();p.CircularList=v},1439:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.clone=void 0,p.clone=function L(g,v){if(v===void 0&&(v=5),typeof g!="object")return g;var C=Array.isArray(g)?[]:{};for(var y in g)C[y]=v<=1?g[y]:g[y]&&L(g[y],v-1);return C}},8969:function(K,p,L){var g,v=this&&this.__extends||(g=function(M,x){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,T){B.__proto__=T}||function(B,T){for(var J in T)Object.prototype.hasOwnProperty.call(T,J)&&(B[J]=T[J])},g(M,x)},function(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function B(){this.constructor=M}g(M,x),M.prototype=x===null?Object.create(x):(B.prototype=x.prototype,new B)});Object.defineProperty(p,"__esModule",{value:!0}),p.CoreTerminal=void 0;var C=L(844),y=L(2585),m=L(4348),w=L(7866),h=L(744),d=L(7302),_=L(6975),l=L(8460),a=L(1753),n=L(3730),s=L(1480),c=L(7994),f=L(9282),b=L(5435),k=L(5981),O=!1,D=function(M){function x(B){var T=M.call(this)||this;return T._onBinary=new l.EventEmitter,T._onData=new l.EventEmitter,T._onLineFeed=new l.EventEmitter,T._onResize=new l.EventEmitter,T._onScroll=new l.EventEmitter,T._instantiationService=new m.InstantiationService,T.optionsService=new d.OptionsService(B),T._instantiationService.setService(y.IOptionsService,T.optionsService),T._bufferService=T.register(T._instantiationService.createInstance(h.BufferService)),T._instantiationService.setService(y.IBufferService,T._bufferService),T._logService=T._instantiationService.createInstance(w.LogService),T._instantiationService.setService(y.ILogService,T._logService),T.coreService=T.register(T._instantiationService.createInstance(_.CoreService,function(){return T.scrollToBottom()})),T._instantiationService.setService(y.ICoreService,T.coreService),T.coreMouseService=T._instantiationService.createInstance(a.CoreMouseService),T._instantiationService.setService(y.ICoreMouseService,T.coreMouseService),T._dirtyRowService=T._instantiationService.createInstance(n.DirtyRowService),T._instantiationService.setService(y.IDirtyRowService,T._dirtyRowService),T.unicodeService=T._instantiationService.createInstance(s.UnicodeService),T._instantiationService.setService(y.IUnicodeService,T.unicodeService),T._charsetService=T._instantiationService.createInstance(c.CharsetService),T._instantiationService.setService(y.ICharsetService,T._charsetService),T._inputHandler=new b.InputHandler(T._bufferService,T._charsetService,T.coreService,T._dirtyRowService,T._logService,T.optionsService,T.coreMouseService,T.unicodeService),T.register((0,l.forwardEvent)(T._inputHandler.onLineFeed,T._onLineFeed)),T.register(T._inputHandler),T.register((0,l.forwardEvent)(T._bufferService.onResize,T._onResize)),T.register((0,l.forwardEvent)(T.coreService.onData,T._onData)),T.register((0,l.forwardEvent)(T.coreService.onBinary,T._onBinary)),T.register(T.optionsService.onOptionChange(function(J){return T._updateOptions(J)})),T.register(T._bufferService.onScroll(function(J){T._onScroll.fire({position:T._bufferService.buffer.ydisp,source:0}),T._dirtyRowService.markRangeDirty(T._bufferService.buffer.scrollTop,T._bufferService.buffer.scrollBottom)})),T.register(T._inputHandler.onScroll(function(J){T._onScroll.fire({position:T._bufferService.buffer.ydisp,source:0}),T._dirtyRowService.markRangeDirty(T._bufferService.buffer.scrollTop,T._bufferService.buffer.scrollBottom)})),T._writeBuffer=new k.WriteBuffer(function(J,j){return T._inputHandler.parse(J,j)}),T}return v(x,M),Object.defineProperty(x.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScroll",{get:function(){var B=this;return this._onScrollApi||(this._onScrollApi=new l.EventEmitter,this.register(this._onScroll.event(function(T){var J;(J=B._onScrollApi)===null||J===void 0||J.fire(T.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"options",{get:function(){return this.optionsService.options},set:function(B){for(var T in B)this.optionsService.options[T]=B[T]},enumerable:!1,configurable:!0}),x.prototype.dispose=function(){var B;this._isDisposed||(M.prototype.dispose.call(this),(B=this._windowsMode)===null||B===void 0||B.dispose(),this._windowsMode=void 0)},x.prototype.write=function(B,T){this._writeBuffer.write(B,T)},x.prototype.writeSync=function(B,T){this._logService.logLevel<=y.LogLevelEnum.WARN&&!O&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O=!0),this._writeBuffer.writeSync(B,T)},x.prototype.resize=function(B,T){isNaN(B)||isNaN(T)||(B=Math.max(B,h.MINIMUM_COLS),T=Math.max(T,h.MINIMUM_ROWS),this._bufferService.resize(B,T))},x.prototype.scroll=function(B,T){T===void 0&&(T=!1),this._bufferService.scroll(B,T)},x.prototype.scrollLines=function(B,T,J){this._bufferService.scrollLines(B,T,J)},x.prototype.scrollPages=function(B){this._bufferService.scrollPages(B)},x.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},x.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},x.prototype.scrollToLine=function(B){this._bufferService.scrollToLine(B)},x.prototype.registerEscHandler=function(B,T){return this._inputHandler.registerEscHandler(B,T)},x.prototype.registerDcsHandler=function(B,T){return this._inputHandler.registerDcsHandler(B,T)},x.prototype.registerCsiHandler=function(B,T){return this._inputHandler.registerCsiHandler(B,T)},x.prototype.registerOscHandler=function(B,T){return this._inputHandler.registerOscHandler(B,T)},x.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},x.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},x.prototype._updateOptions=function(B){var T;switch(B){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)}},x.prototype._enableWindowsMode=function(){var B=this;if(!this._windowsMode){var T=[];T.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},function(){return(0,f.updateWindowsModeWrappedState)(B._bufferService),!1})),this._windowsMode={dispose:function(){for(var J=0,j=T;J<j.length;J++)j[J].dispose()}}}},x}(C.Disposable);p.CoreTerminal=D},8460:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.forwardEvent=p.EventEmitter=void 0;var L=function(){function g(){this._listeners=[],this._disposed=!1}return Object.defineProperty(g.prototype,"event",{get:function(){var v=this;return this._event||(this._event=function(C){return v._listeners.push(C),{dispose:function(){if(!v._disposed){for(var y=0;y<v._listeners.length;y++)if(v._listeners[y]===C)return void v._listeners.splice(y,1)}}}}),this._event},enumerable:!1,configurable:!0}),g.prototype.fire=function(v,C){for(var y=[],m=0;m<this._listeners.length;m++)y.push(this._listeners[m]);for(m=0;m<y.length;m++)y[m].call(void 0,v,C)},g.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},g}();p.EventEmitter=L,p.forwardEvent=function(g,v){return g(function(C){return v.fire(C)})}},5435:function(K,p,L){var g,v=this&&this.__extends||(g=function(J,j){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,N){H.__proto__=N}||function(H,N){for(var Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&(H[Z]=N[Z])},g(J,j)},function(J,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function H(){this.constructor=J}g(J,j),J.prototype=j===null?Object.create(j):(H.prototype=j.prototype,new H)});Object.defineProperty(p,"__esModule",{value:!0}),p.InputHandler=p.WindowsOptionsReportType=void 0;var C,y=L(2584),m=L(7116),w=L(2015),h=L(844),d=L(8273),_=L(482),l=L(8437),a=L(8460),n=L(643),s=L(511),c=L(3734),f=L(2585),b=L(6242),k=L(6351),O=L(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function x(J,j){if(J>24)return j.setWinLines||!1;switch(J){case 1:return!!j.restoreWin;case 2:return!!j.minimizeWin;case 3:return!!j.setWinPosition;case 4:return!!j.setWinSizePixels;case 5:return!!j.raiseWin;case 6:return!!j.lowerWin;case 7:return!!j.refreshWin;case 8:return!!j.setWinSizeChars;case 9:return!!j.maximizeWin;case 10:return!!j.fullscreenWin;case 11:return!!j.getWinState;case 13:return!!j.getWinPosition;case 14:return!!j.getWinSizePixels;case 15:return!!j.getScreenSizePixels;case 16:return!!j.getCellSizePixels;case 18:return!!j.getWinSizeChars;case 19:return!!j.getScreenSizeChars;case 20:return!!j.getIconTitle;case 21:return!!j.getWinTitle;case 22:return!!j.pushTitle;case 23:return!!j.popTitle;case 24:return!!j.setWinLines}return!1}(function(J){J[J.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",J[J.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(C=p.WindowsOptionsReportType||(p.WindowsOptionsReportType={}));var B=function(){function J(j,H,N,Z){this._bufferService=j,this._coreService=H,this._logService=N,this._optionsService=Z,this._data=new Uint32Array(0)}return J.prototype.hook=function(j){this._data=new Uint32Array(0)},J.prototype.put=function(j,H,N){this._data=(0,d.concat)(this._data,j.subarray(H,N))},J.prototype.unhook=function(j){if(!j)return this._data=new Uint32Array(0),!0;var H=(0,_.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),H){case'"q':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r0"q'+y.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r61;1"p'+y.C0.ESC+"\\");break;case"r":var N=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+N+y.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(y.C0.ESC+"P1$r0m"+y.C0.ESC+"\\");break;case" q":var Z={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];Z-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+Z+" q"+y.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",H),this._coreService.triggerDataEvent(y.C0.ESC+"P0$r"+y.C0.ESC+"\\")}return!0},J}(),T=function(J){function j(H,N,Z,Q,ae,se,me,we,he){he===void 0&&(he=new w.EscapeSequenceParser);var F=J.call(this)||this;F._bufferService=H,F._charsetService=N,F._coreService=Z,F._dirtyRowService=Q,F._logService=ae,F._optionsService=se,F._coreMouseService=me,F._unicodeService=we,F._parser=he,F._parseBuffer=new Uint32Array(4096),F._stringDecoder=new _.StringToUtf32,F._utf8Decoder=new _.Utf8ToUtf32,F._workCell=new s.CellData,F._windowTitle="",F._iconName="",F._windowTitleStack=[],F._iconNameStack=[],F._curAttrData=l.DEFAULT_ATTR_DATA.clone(),F._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),F._onRequestBell=new a.EventEmitter,F._onRequestRefreshRows=new a.EventEmitter,F._onRequestReset=new a.EventEmitter,F._onRequestSendFocus=new a.EventEmitter,F._onRequestSyncScrollBar=new a.EventEmitter,F._onRequestWindowsOptionsReport=new a.EventEmitter,F._onA11yChar=new a.EventEmitter,F._onA11yTab=new a.EventEmitter,F._onCursorMove=new a.EventEmitter,F._onLineFeed=new a.EventEmitter,F._onScroll=new a.EventEmitter,F._onTitleChange=new a.EventEmitter,F._onColor=new a.EventEmitter,F._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},F._specialColors=[256,257,258],F.register(F._parser),F._activeBuffer=F._bufferService.buffer,F.register(F._bufferService.buffers.onBufferActivate(function($){return F._activeBuffer=$.activeBuffer})),F._parser.setCsiHandlerFallback(function($,ge){F._logService.debug("Unknown CSI code: ",{identifier:F._parser.identToString($),params:ge.toArray()})}),F._parser.setEscHandlerFallback(function($){F._logService.debug("Unknown ESC code: ",{identifier:F._parser.identToString($)})}),F._parser.setExecuteHandlerFallback(function($){F._logService.debug("Unknown EXECUTE code: ",{code:$})}),F._parser.setOscHandlerFallback(function($,ge,Le){F._logService.debug("Unknown OSC code: ",{identifier:$,action:ge,data:Le})}),F._parser.setDcsHandlerFallback(function($,ge,Le){ge==="HOOK"&&(Le=Le.toArray()),F._logService.debug("Unknown DCS code: ",{identifier:F._parser.identToString($),action:ge,payload:Le})}),F._parser.setPrintHandler(function($,ge,Le){return F.print($,ge,Le)}),F._parser.registerCsiHandler({final:"@"},function($){return F.insertChars($)}),F._parser.registerCsiHandler({intermediates:" ",final:"@"},function($){return F.scrollLeft($)}),F._parser.registerCsiHandler({final:"A"},function($){return F.cursorUp($)}),F._parser.registerCsiHandler({intermediates:" ",final:"A"},function($){return F.scrollRight($)}),F._parser.registerCsiHandler({final:"B"},function($){return F.cursorDown($)}),F._parser.registerCsiHandler({final:"C"},function($){return F.cursorForward($)}),F._parser.registerCsiHandler({final:"D"},function($){return F.cursorBackward($)}),F._parser.registerCsiHandler({final:"E"},function($){return F.cursorNextLine($)}),F._parser.registerCsiHandler({final:"F"},function($){return F.cursorPrecedingLine($)}),F._parser.registerCsiHandler({final:"G"},function($){return F.cursorCharAbsolute($)}),F._parser.registerCsiHandler({final:"H"},function($){return F.cursorPosition($)}),F._parser.registerCsiHandler({final:"I"},function($){return F.cursorForwardTab($)}),F._parser.registerCsiHandler({final:"J"},function($){return F.eraseInDisplay($)}),F._parser.registerCsiHandler({prefix:"?",final:"J"},function($){return F.eraseInDisplay($)}),F._parser.registerCsiHandler({final:"K"},function($){return F.eraseInLine($)}),F._parser.registerCsiHandler({prefix:"?",final:"K"},function($){return F.eraseInLine($)}),F._parser.registerCsiHandler({final:"L"},function($){return F.insertLines($)}),F._parser.registerCsiHandler({final:"M"},function($){return F.deleteLines($)}),F._parser.registerCsiHandler({final:"P"},function($){return F.deleteChars($)}),F._parser.registerCsiHandler({final:"S"},function($){return F.scrollUp($)}),F._parser.registerCsiHandler({final:"T"},function($){return F.scrollDown($)}),F._parser.registerCsiHandler({final:"X"},function($){return F.eraseChars($)}),F._parser.registerCsiHandler({final:"Z"},function($){return F.cursorBackwardTab($)}),F._parser.registerCsiHandler({final:"`"},function($){return F.charPosAbsolute($)}),F._parser.registerCsiHandler({final:"a"},function($){return F.hPositionRelative($)}),F._parser.registerCsiHandler({final:"b"},function($){return F.repeatPrecedingCharacter($)}),F._parser.registerCsiHandler({final:"c"},function($){return F.sendDeviceAttributesPrimary($)}),F._parser.registerCsiHandler({prefix:">",final:"c"},function($){return F.sendDeviceAttributesSecondary($)}),F._parser.registerCsiHandler({final:"d"},function($){return F.linePosAbsolute($)}),F._parser.registerCsiHandler({final:"e"},function($){return F.vPositionRelative($)}),F._parser.registerCsiHandler({final:"f"},function($){return F.hVPosition($)}),F._parser.registerCsiHandler({final:"g"},function($){return F.tabClear($)}),F._parser.registerCsiHandler({final:"h"},function($){return F.setMode($)}),F._parser.registerCsiHandler({prefix:"?",final:"h"},function($){return F.setModePrivate($)}),F._parser.registerCsiHandler({final:"l"},function($){return F.resetMode($)}),F._parser.registerCsiHandler({prefix:"?",final:"l"},function($){return F.resetModePrivate($)}),F._parser.registerCsiHandler({final:"m"},function($){return F.charAttributes($)}),F._parser.registerCsiHandler({final:"n"},function($){return F.deviceStatus($)}),F._parser.registerCsiHandler({prefix:"?",final:"n"},function($){return F.deviceStatusPrivate($)}),F._parser.registerCsiHandler({intermediates:"!",final:"p"},function($){return F.softReset($)}),F._parser.registerCsiHandler({intermediates:" ",final:"q"},function($){return F.setCursorStyle($)}),F._parser.registerCsiHandler({final:"r"},function($){return F.setScrollRegion($)}),F._parser.registerCsiHandler({final:"s"},function($){return F.saveCursor($)}),F._parser.registerCsiHandler({final:"t"},function($){return F.windowOptions($)}),F._parser.registerCsiHandler({final:"u"},function($){return F.restoreCursor($)}),F._parser.registerCsiHandler({intermediates:"'",final:"}"},function($){return F.insertColumns($)}),F._parser.registerCsiHandler({intermediates:"'",final:"~"},function($){return F.deleteColumns($)}),F._parser.setExecuteHandler(y.C0.BEL,function(){return F.bell()}),F._parser.setExecuteHandler(y.C0.LF,function(){return F.lineFeed()}),F._parser.setExecuteHandler(y.C0.VT,function(){return F.lineFeed()}),F._parser.setExecuteHandler(y.C0.FF,function(){return F.lineFeed()}),F._parser.setExecuteHandler(y.C0.CR,function(){return F.carriageReturn()}),F._parser.setExecuteHandler(y.C0.BS,function(){return F.backspace()}),F._parser.setExecuteHandler(y.C0.HT,function(){return F.tab()}),F._parser.setExecuteHandler(y.C0.SO,function(){return F.shiftOut()}),F._parser.setExecuteHandler(y.C0.SI,function(){return F.shiftIn()}),F._parser.setExecuteHandler(y.C1.IND,function(){return F.index()}),F._parser.setExecuteHandler(y.C1.NEL,function(){return F.nextLine()}),F._parser.setExecuteHandler(y.C1.HTS,function(){return F.tabSet()}),F._parser.registerOscHandler(0,new b.OscHandler(function($){return F.setTitle($),F.setIconName($),!0})),F._parser.registerOscHandler(1,new b.OscHandler(function($){return F.setIconName($)})),F._parser.registerOscHandler(2,new b.OscHandler(function($){return F.setTitle($)})),F._parser.registerOscHandler(4,new b.OscHandler(function($){return F.setOrReportIndexedColor($)})),F._parser.registerOscHandler(10,new b.OscHandler(function($){return F.setOrReportFgColor($)})),F._parser.registerOscHandler(11,new b.OscHandler(function($){return F.setOrReportBgColor($)})),F._parser.registerOscHandler(12,new b.OscHandler(function($){return F.setOrReportCursorColor($)})),F._parser.registerOscHandler(104,new b.OscHandler(function($){return F.restoreIndexedColor($)})),F._parser.registerOscHandler(110,new b.OscHandler(function($){return F.restoreFgColor($)})),F._parser.registerOscHandler(111,new b.OscHandler(function($){return F.restoreBgColor($)})),F._parser.registerOscHandler(112,new b.OscHandler(function($){return F.restoreCursorColor($)})),F._parser.registerEscHandler({final:"7"},function(){return F.saveCursor()}),F._parser.registerEscHandler({final:"8"},function(){return F.restoreCursor()}),F._parser.registerEscHandler({final:"D"},function(){return F.index()}),F._parser.registerEscHandler({final:"E"},function(){return F.nextLine()}),F._parser.registerEscHandler({final:"H"},function(){return F.tabSet()}),F._parser.registerEscHandler({final:"M"},function(){return F.reverseIndex()}),F._parser.registerEscHandler({final:"="},function(){return F.keypadApplicationMode()}),F._parser.registerEscHandler({final:">"},function(){return F.keypadNumericMode()}),F._parser.registerEscHandler({final:"c"},function(){return F.fullReset()}),F._parser.registerEscHandler({final:"n"},function(){return F.setgLevel(2)}),F._parser.registerEscHandler({final:"o"},function(){return F.setgLevel(3)}),F._parser.registerEscHandler({final:"|"},function(){return F.setgLevel(3)}),F._parser.registerEscHandler({final:"}"},function(){return F.setgLevel(2)}),F._parser.registerEscHandler({final:"~"},function(){return F.setgLevel(1)}),F._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return F.selectDefaultCharset()}),F._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return F.selectDefaultCharset()});var z=function($){G._parser.registerEscHandler({intermediates:"(",final:$},function(){return F.selectCharset("("+$)}),G._parser.registerEscHandler({intermediates:")",final:$},function(){return F.selectCharset(")"+$)}),G._parser.registerEscHandler({intermediates:"*",final:$},function(){return F.selectCharset("*"+$)}),G._parser.registerEscHandler({intermediates:"+",final:$},function(){return F.selectCharset("+"+$)}),G._parser.registerEscHandler({intermediates:"-",final:$},function(){return F.selectCharset("-"+$)}),G._parser.registerEscHandler({intermediates:".",final:$},function(){return F.selectCharset("."+$)}),G._parser.registerEscHandler({intermediates:"/",final:$},function(){return F.selectCharset("/"+$)})},G=this;for(var ce in m.CHARSETS)z(ce);return F._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return F.screenAlignmentPattern()}),F._parser.setErrorHandler(function($){return F._logService.error("Parsing error: ",$),$}),F._parser.registerDcsHandler({intermediates:"$",final:"q"},new B(F._bufferService,F._coreService,F._logService,F._optionsService)),F}return v(j,J),Object.defineProperty(j.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),j.prototype.dispose=function(){J.prototype.dispose.call(this)},j.prototype._preserveStack=function(H,N,Z,Q){this._parseStack.paused=!0,this._parseStack.cursorStartX=H,this._parseStack.cursorStartY=N,this._parseStack.decodedLength=Z,this._parseStack.position=Q},j.prototype._logSlowResolvingAsync=function(H){this._logService.logLevel<=f.LogLevelEnum.WARN&&Promise.race([H,new Promise(function(N,Z){return setTimeout(function(){return Z("#SLOW_TIMEOUT")},5e3)})]).catch(function(N){if(N!=="#SLOW_TIMEOUT")throw N;console.warn("async parser handler taking longer than 5000 ms")})},j.prototype.parse=function(H,N){var Z,Q=this._activeBuffer.x,ae=this._activeBuffer.y,se=0,me=this._parseStack.paused;if(me){if(Z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,N))return this._logSlowResolvingAsync(Z),Z;Q=this._parseStack.cursorStartX,ae=this._parseStack.cursorStartY,this._parseStack.paused=!1,H.length>M&&(se=this._parseStack.position+M)}if(this._logService.logLevel<=f.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof H=="string"?' "'+H+'"':""),typeof H=="string"?H.split("").map(function(z){return z.charCodeAt(0)}):H),this._parseBuffer.length<H.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(H.length,M))),me||this._dirtyRowService.clearRange(),H.length>M)for(var we=se;we<H.length;we+=M){var he=we+M<H.length?we+M:H.length,F=typeof H=="string"?this._stringDecoder.decode(H.substring(we,he),this._parseBuffer):this._utf8Decoder.decode(H.subarray(we,he),this._parseBuffer);if(Z=this._parser.parse(this._parseBuffer,F))return this._preserveStack(Q,ae,F,we),this._logSlowResolvingAsync(Z),Z}else if(!me&&(F=typeof H=="string"?this._stringDecoder.decode(H,this._parseBuffer):this._utf8Decoder.decode(H,this._parseBuffer),Z=this._parser.parse(this._parseBuffer,F)))return this._preserveStack(Q,ae,F,0),this._logSlowResolvingAsync(Z),Z;this._activeBuffer.x===Q&&this._activeBuffer.y===ae||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},j.prototype.print=function(H,N,Z){var Q,ae,se=this._charsetService.charset,me=this._optionsService.options.screenReaderMode,we=this._bufferService.cols,he=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,z=this._curAttrData,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Z-N>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(var ce=N;ce<Z;++ce){if(Q=H[ce],ae=this._unicodeService.wcwidth(Q),Q<127&&se){var $=se[String.fromCharCode(Q)];$&&(Q=$.charCodeAt(0))}if(me&&this._onA11yChar.fire((0,_.stringFromCodePoint)(Q)),ae||!this._activeBuffer.x){if(this._activeBuffer.x+ae-1>=we){if(he){for(;this._activeBuffer.x<we;)G.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=we-1,ae===2)continue}if(F&&(G.insertCells(this._activeBuffer.x,ae,this._activeBuffer.getNullCell(z),z),G.getWidth(we-1)===2&&G.setCellFromCodePoint(we-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),G.setCellFromCodePoint(this._activeBuffer.x++,Q,ae,z.fg,z.bg,z.extended),ae>0)for(;--ae;)G.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else G.getWidth(this._activeBuffer.x-1)?G.addCodepointToCell(this._activeBuffer.x-1,Q):G.addCodepointToCell(this._activeBuffer.x-2,Q)}Z-N>0&&(G.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<we&&Z-N>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},j.prototype.registerCsiHandler=function(H,N){var Z=this;return H.final!=="t"||H.prefix||H.intermediates?this._parser.registerCsiHandler(H,N):this._parser.registerCsiHandler(H,function(Q){return!x(Q.params[0],Z._optionsService.options.windowOptions)||N(Q)})},j.prototype.registerDcsHandler=function(H,N){return this._parser.registerDcsHandler(H,new k.DcsHandler(N))},j.prototype.registerEscHandler=function(H,N){return this._parser.registerEscHandler(H,N)},j.prototype.registerOscHandler=function(H,N){return this._parser.registerOscHandler(H,new b.OscHandler(N))},j.prototype.bell=function(){return this._onRequestBell.fire(),!0},j.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},j.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},j.prototype.backspace=function(){var H;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||H===void 0?void 0:H.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);N.hasWidth(this._activeBuffer.x)&&!N.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},j.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var H=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-H),!0},j.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},j.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},j.prototype._restrictCursor=function(H){H===void 0&&(H=this._bufferService.cols-1),this._activeBuffer.x=Math.min(H,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},j.prototype._setCursor=function(H,N){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=H,this._activeBuffer.y=this._activeBuffer.scrollTop+N):(this._activeBuffer.x=H,this._activeBuffer.y=N),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},j.prototype._moveCursor=function(H,N){this._restrictCursor(),this._setCursor(this._activeBuffer.x+H,this._activeBuffer.y+N)},j.prototype.cursorUp=function(H){var N=this._activeBuffer.y-this._activeBuffer.scrollTop;return N>=0?this._moveCursor(0,-Math.min(N,H.params[0]||1)):this._moveCursor(0,-(H.params[0]||1)),!0},j.prototype.cursorDown=function(H){var N=this._activeBuffer.scrollBottom-this._activeBuffer.y;return N>=0?this._moveCursor(0,Math.min(N,H.params[0]||1)):this._moveCursor(0,H.params[0]||1),!0},j.prototype.cursorForward=function(H){return this._moveCursor(H.params[0]||1,0),!0},j.prototype.cursorBackward=function(H){return this._moveCursor(-(H.params[0]||1),0),!0},j.prototype.cursorNextLine=function(H){return this.cursorDown(H),this._activeBuffer.x=0,!0},j.prototype.cursorPrecedingLine=function(H){return this.cursorUp(H),this._activeBuffer.x=0,!0},j.prototype.cursorCharAbsolute=function(H){return this._setCursor((H.params[0]||1)-1,this._activeBuffer.y),!0},j.prototype.cursorPosition=function(H){return this._setCursor(H.length>=2?(H.params[1]||1)-1:0,(H.params[0]||1)-1),!0},j.prototype.charPosAbsolute=function(H){return this._setCursor((H.params[0]||1)-1,this._activeBuffer.y),!0},j.prototype.hPositionRelative=function(H){return this._moveCursor(H.params[0]||1,0),!0},j.prototype.linePosAbsolute=function(H){return this._setCursor(this._activeBuffer.x,(H.params[0]||1)-1),!0},j.prototype.vPositionRelative=function(H){return this._moveCursor(0,H.params[0]||1),!0},j.prototype.hVPosition=function(H){return this.cursorPosition(H),!0},j.prototype.tabClear=function(H){var N=H.params[0];return N===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:N===3&&(this._activeBuffer.tabs={}),!0},j.prototype.cursorForwardTab=function(H){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var N=H.params[0]||1;N--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},j.prototype.cursorBackwardTab=function(H){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var N=H.params[0]||1;N--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},j.prototype._eraseInBufferLine=function(H,N,Z,Q){Q===void 0&&(Q=!1);var ae=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);ae.replaceCells(N,Z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Q&&(ae.isWrapped=!1)},j.prototype._resetBufferLine=function(H){var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);N.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),N.isWrapped=!1},j.prototype.eraseInDisplay=function(H){var N;switch(this._restrictCursor(this._bufferService.cols),H.params[0]){case 0:for(N=this._activeBuffer.y,this._dirtyRowService.markDirty(N),this._eraseInBufferLine(N++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);N<this._bufferService.rows;N++)this._resetBufferLine(N);this._dirtyRowService.markDirty(N);break;case 1:for(N=this._activeBuffer.y,this._dirtyRowService.markDirty(N),this._eraseInBufferLine(N,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(N+1).isWrapped=!1);N--;)this._resetBufferLine(N);this._dirtyRowService.markDirty(0);break;case 2:for(N=this._bufferService.rows,this._dirtyRowService.markDirty(N-1);N--;)this._resetBufferLine(N);this._dirtyRowService.markDirty(0);break;case 3:var Z=this._activeBuffer.lines.length-this._bufferService.rows;Z>0&&(this._activeBuffer.lines.trimStart(Z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-Z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-Z,0),this._onScroll.fire(0))}return!0},j.prototype.eraseInLine=function(H){switch(this._restrictCursor(this._bufferService.cols),H.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},j.prototype.insertLines=function(H){this._restrictCursor();var N=H.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var Z=this._activeBuffer.ybase+this._activeBuffer.y,Q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ae=this._bufferService.rows-1+this._activeBuffer.ybase-Q+1;N--;)this._activeBuffer.lines.splice(ae-1,1),this._activeBuffer.lines.splice(Z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},j.prototype.deleteLines=function(H){this._restrictCursor();var N=H.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var Z,Q=this._activeBuffer.ybase+this._activeBuffer.y;for(Z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-Z;N--;)this._activeBuffer.lines.splice(Q,1),this._activeBuffer.lines.splice(Z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},j.prototype.insertChars=function(H){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.insertCells(this._activeBuffer.x,H.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},j.prototype.deleteChars=function(H){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.deleteCells(this._activeBuffer.x,H.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},j.prototype.scrollUp=function(H){for(var N=H.params[0]||1;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.scrollDown=function(H){for(var N=H.params[0]||1;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.scrollLeft=function(H){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=H.params[0]||1,Z=this._activeBuffer.scrollTop;Z<=this._activeBuffer.scrollBottom;++Z){var Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+Z);Q.deleteCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Q.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.scrollRight=function(H){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=H.params[0]||1,Z=this._activeBuffer.scrollTop;Z<=this._activeBuffer.scrollBottom;++Z){var Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+Z);Q.insertCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Q.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.insertColumns=function(H){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=H.params[0]||1,Z=this._activeBuffer.scrollTop;Z<=this._activeBuffer.scrollBottom;++Z){var Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+Z);Q.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Q.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.deleteColumns=function(H){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=H.params[0]||1,Z=this._activeBuffer.scrollTop;Z<=this._activeBuffer.scrollBottom;++Z){var Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+Z);Q.deleteCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Q.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},j.prototype.eraseChars=function(H){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(H.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},j.prototype.repeatPrecedingCharacter=function(H){if(!this._parser.precedingCodepoint)return!0;for(var N=H.params[0]||1,Z=new Uint32Array(N),Q=0;Q<N;++Q)Z[Q]=this._parser.precedingCodepoint;return this.print(Z,0,Z.length),!0},j.prototype.sendDeviceAttributesPrimary=function(H){return H.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(y.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(y.C0.ESC+"[?6c")),!0},j.prototype.sendDeviceAttributesSecondary=function(H){return H.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(y.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(y.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(H.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(y.C0.ESC+"[>83;40003;0c")),!0},j.prototype._is=function(H){return(this._optionsService.options.termName+"").indexOf(H)===0},j.prototype.setMode=function(H){for(var N=0;N<H.length;N++)H.params[N]===4&&(this._coreService.modes.insertMode=!0);return!0},j.prototype.setModePrivate=function(H){for(var N=0;N<H.length;N++)switch(H.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},j.prototype.resetMode=function(H){for(var N=0;N<H.length;N++)H.params[N]===4&&(this._coreService.modes.insertMode=!1);return!0},j.prototype.resetModePrivate=function(H){for(var N=0;N<H.length;N++)switch(H.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),H.params[N]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},j.prototype._updateAttrColor=function(H,N,Z,Q,ae){return N===2?(H|=50331648,H&=-16777216,H|=c.AttributeData.fromColorRGB([Z,Q,ae])):N===5&&(H&=-50331904,H|=33554432|255&Z),H},j.prototype._extractColor=function(H,N,Z){var Q=[0,0,-1,0,0,0],ae=0,se=0;do{if(Q[se+ae]=H.params[N+se],H.hasSubParams(N+se)){var me=H.getSubParams(N+se),we=0;do Q[1]===5&&(ae=1),Q[se+we+1+ae]=me[we];while(++we<me.length&&we+se+1+ae<Q.length);break}if(Q[1]===5&&se+ae>=2||Q[1]===2&&se+ae>=5)break;Q[1]&&(ae=1)}while(++se+N<H.length&&se+ae<Q.length);for(we=2;we<Q.length;++we)Q[we]===-1&&(Q[we]=0);switch(Q[0]){case 38:Z.fg=this._updateAttrColor(Z.fg,Q[1],Q[3],Q[4],Q[5]);break;case 48:Z.bg=this._updateAttrColor(Z.bg,Q[1],Q[3],Q[4],Q[5]);break;case 58:Z.extended=Z.extended.clone(),Z.extended.underlineColor=this._updateAttrColor(Z.extended.underlineColor,Q[1],Q[3],Q[4],Q[5])}return se},j.prototype._processUnderline=function(H,N){N.extended=N.extended.clone(),(!~H||H>5)&&(H=1),N.extended.underlineStyle=H,N.fg|=268435456,H===0&&(N.fg&=-268435457),N.updateExtended()},j.prototype.charAttributes=function(H){if(H.length===1&&H.params[0]===0)return this._curAttrData.fg=l.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=l.DEFAULT_ATTR_DATA.bg,!0;for(var N,Z=H.length,Q=this._curAttrData,ae=0;ae<Z;ae++)(N=H.params[ae])>=30&&N<=37?(Q.fg&=-50331904,Q.fg|=16777216|N-30):N>=40&&N<=47?(Q.bg&=-50331904,Q.bg|=16777216|N-40):N>=90&&N<=97?(Q.fg&=-50331904,Q.fg|=16777224|N-90):N>=100&&N<=107?(Q.bg&=-50331904,Q.bg|=16777224|N-100):N===0?(Q.fg=l.DEFAULT_ATTR_DATA.fg,Q.bg=l.DEFAULT_ATTR_DATA.bg):N===1?Q.fg|=134217728:N===3?Q.bg|=67108864:N===4?(Q.fg|=268435456,this._processUnderline(H.hasSubParams(ae)?H.getSubParams(ae)[0]:1,Q)):N===5?Q.fg|=536870912:N===7?Q.fg|=67108864:N===8?Q.fg|=1073741824:N===9?Q.fg|=2147483648:N===2?Q.bg|=134217728:N===21?this._processUnderline(2,Q):N===22?(Q.fg&=-134217729,Q.bg&=-134217729):N===23?Q.bg&=-67108865:N===24?Q.fg&=-268435457:N===25?Q.fg&=-536870913:N===27?Q.fg&=-67108865:N===28?Q.fg&=-1073741825:N===29?Q.fg&=2147483647:N===39?(Q.fg&=-67108864,Q.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):N===49?(Q.bg&=-67108864,Q.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):N===38||N===48||N===58?ae+=this._extractColor(H,ae,Q):N===59?(Q.extended=Q.extended.clone(),Q.extended.underlineColor=-1,Q.updateExtended()):N===100?(Q.fg&=-67108864,Q.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,Q.bg&=-67108864,Q.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",N);return!0},j.prototype.deviceStatus=function(H){switch(H.params[0]){case 5:this._coreService.triggerDataEvent(y.C0.ESC+"[0n");break;case 6:var N=this._activeBuffer.y+1,Z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(y.C0.ESC+"["+N+";"+Z+"R")}return!0},j.prototype.deviceStatusPrivate=function(H){if(H.params[0]===6){var N=this._activeBuffer.y+1,Z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(y.C0.ESC+"[?"+N+";"+Z+"R")}return!0},j.prototype.softReset=function(H){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},j.prototype.setCursorStyle=function(H){var N=H.params[0]||1;switch(N){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var Z=N%2==1;return this._optionsService.options.cursorBlink=Z,!0},j.prototype.setScrollRegion=function(H){var N,Z=H.params[0]||1;return(H.length<2||(N=H.params[1])>this._bufferService.rows||N===0)&&(N=this._bufferService.rows),N>Z&&(this._activeBuffer.scrollTop=Z-1,this._activeBuffer.scrollBottom=N-1,this._setCursor(0,0)),!0},j.prototype.windowOptions=function(H){if(!x(H.params[0],this._optionsService.options.windowOptions))return!0;var N=H.length>1?H.params[1]:0;switch(H.params[0]){case 14:N!==2&&this._onRequestWindowsOptionsReport.fire(C.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(C.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(y.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:N!==0&&N!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),N!==0&&N!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:N!==0&&N!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),N!==0&&N!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},j.prototype.saveCursor=function(H){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},j.prototype.restoreCursor=function(H){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},j.prototype.setTitle=function(H){return this._windowTitle=H,this._onTitleChange.fire(H),!0},j.prototype.setIconName=function(H){return this._iconName=H,!0},j.prototype.setOrReportIndexedColor=function(H){for(var N=[],Z=H.split(";");Z.length>1;){var Q=Z.shift(),ae=Z.shift();if(/^\d+$/.exec(Q)){var se=parseInt(Q);if(0<=se&&se<256)if(ae==="?")N.push({type:0,index:se});else{var me=(0,O.parseColor)(ae);me&&N.push({type:1,index:se,color:me})}}}return N.length&&this._onColor.fire(N),!0},j.prototype._setOrReportSpecialColor=function(H,N){for(var Z=H.split(";"),Q=0;Q<Z.length&&!(N>=this._specialColors.length);++Q,++N)if(Z[Q]==="?")this._onColor.fire([{type:0,index:this._specialColors[N]}]);else{var ae=(0,O.parseColor)(Z[Q]);ae&&this._onColor.fire([{type:1,index:this._specialColors[N],color:ae}])}return!0},j.prototype.setOrReportFgColor=function(H){return this._setOrReportSpecialColor(H,0)},j.prototype.setOrReportBgColor=function(H){return this._setOrReportSpecialColor(H,1)},j.prototype.setOrReportCursorColor=function(H){return this._setOrReportSpecialColor(H,2)},j.prototype.restoreIndexedColor=function(H){if(!H)return this._onColor.fire([{type:2}]),!0;for(var N=[],Z=H.split(";"),Q=0;Q<Z.length;++Q)if(/^\d+$/.exec(Z[Q])){var ae=parseInt(Z[Q]);0<=ae&&ae<256&&N.push({type:2,index:ae})}return N.length&&this._onColor.fire(N),!0},j.prototype.restoreFgColor=function(H){return this._onColor.fire([{type:2,index:256}]),!0},j.prototype.restoreBgColor=function(H){return this._onColor.fire([{type:2,index:257}]),!0},j.prototype.restoreCursorColor=function(H){return this._onColor.fire([{type:2,index:258}]),!0},j.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},j.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},j.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},j.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0},j.prototype.selectCharset=function(H){return H.length!==2?(this.selectDefaultCharset(),!0):(H[0]==="/"||this._charsetService.setgCharset(D[H[0]],m.CHARSETS[H[1]]||m.DEFAULT_CHARSET),!0)},j.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},j.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},j.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var H=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,H,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},j.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},j.prototype.reset=function(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()},j.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},j.prototype.setgLevel=function(H){return this._charsetService.setgLevel(H),!0},j.prototype.screenAlignmentPattern=function(){var H=new s.CellData;H.content=1<<22|"E".charCodeAt(0),H.fg=this._curAttrData.fg,H.bg=this._curAttrData.bg,this._setCursor(0,0);for(var N=0;N<this._bufferService.rows;++N){var Z=this._activeBuffer.ybase+this._activeBuffer.y+N,Q=this._activeBuffer.lines.get(Z);Q&&(Q.fill(H),Q.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},j}(h.Disposable);p.InputHandler=T},844:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getDisposeArrayDisposable=p.disposeArray=p.Disposable=void 0;var L=function(){function v(){this._disposables=[],this._isDisposed=!1}return v.prototype.dispose=function(){this._isDisposed=!0;for(var C=0,y=this._disposables;C<y.length;C++)y[C].dispose();this._disposables.length=0},v.prototype.register=function(C){return this._disposables.push(C),C},v.prototype.unregister=function(C){var y=this._disposables.indexOf(C);y!==-1&&this._disposables.splice(y,1)},v}();function g(v){for(var C=0,y=v;C<y.length;C++)y[C].dispose();v.length=0}p.Disposable=L,p.disposeArray=g,p.getDisposeArrayDisposable=function(v){return{dispose:function(){return g(v)}}}},6114:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.isLinux=p.isWindows=p.isIphone=p.isIpad=p.isMac=p.isSafari=p.isFirefox=void 0;var L=typeof navigator=="undefined",g=L?"node":navigator.userAgent,v=L?"node":navigator.platform;p.isFirefox=g.includes("Firefox"),p.isSafari=/^((?!chrome|android).)*safari/i.test(g),p.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(v),p.isIpad=v==="iPad",p.isIphone=v==="iPhone",p.isWindows=["Windows","Win16","Win32","WinCE"].includes(v),p.isLinux=v.indexOf("Linux")>=0},8273:(K,p)=>{function L(g,v,C,y){if(C===void 0&&(C=0),y===void 0&&(y=g.length),C>=g.length)return g;C=(g.length+C)%g.length,y=y>=g.length?g.length:(g.length+y)%g.length;for(var m=C;m<y;++m)g[m]=v;return g}Object.defineProperty(p,"__esModule",{value:!0}),p.concat=p.fillFallback=p.fill=void 0,p.fill=function(g,v,C,y){return g.fill?g.fill(v,C,y):L(g,v,C,y)},p.fillFallback=L,p.concat=function(g,v){var C=new g.constructor(g.length+v.length);return C.set(g),C.set(v,g.length),C}},9282:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.updateWindowsModeWrappedState=void 0;var g=L(643);p.updateWindowsModeWrappedState=function(v){var C=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),y=C==null?void 0:C.get(v.cols-1),m=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);m&&y&&(m.isWrapped=y[g.CHAR_DATA_CODE_INDEX]!==g.NULL_CELL_CODE&&y[g.CHAR_DATA_CODE_INDEX]!==g.WHITESPACE_CELL_CODE)}},3734:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ExtendedAttrs=p.AttributeData=void 0;var L=function(){function v(){this.fg=0,this.bg=0,this.extended=new g}return v.toColorRGB=function(C){return[C>>>16&255,C>>>8&255,255&C]},v.fromColorRGB=function(C){return(255&C[0])<<16|(255&C[1])<<8|255&C[2]},v.prototype.clone=function(){var C=new v;return C.fg=this.fg,C.bg=this.bg,C.extended=this.extended.clone(),C},v.prototype.isInverse=function(){return 67108864&this.fg},v.prototype.isBold=function(){return 134217728&this.fg},v.prototype.isUnderline=function(){return 268435456&this.fg},v.prototype.isBlink=function(){return 536870912&this.fg},v.prototype.isInvisible=function(){return 1073741824&this.fg},v.prototype.isItalic=function(){return 67108864&this.bg},v.prototype.isDim=function(){return 134217728&this.bg},v.prototype.isStrikethrough=function(){return 2147483648&this.fg},v.prototype.getFgColorMode=function(){return 50331648&this.fg},v.prototype.getBgColorMode=function(){return 50331648&this.bg},v.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},v.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},v.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},v.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},v.prototype.isFgDefault=function(){return(50331648&this.fg)==0},v.prototype.isBgDefault=function(){return(50331648&this.bg)==0},v.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},v.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},v.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},v.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},v.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},v.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},v.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},v.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},v.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},v.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},v.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},v}();p.AttributeData=L;var g=function(){function v(C,y){C===void 0&&(C=0),y===void 0&&(y=-1),this.underlineStyle=C,this.underlineColor=y}return v.prototype.clone=function(){return new v(this.underlineStyle,this.underlineColor)},v.prototype.isEmpty=function(){return this.underlineStyle===0},v}();p.ExtendedAttrs=g},9092:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferStringIterator=p.Buffer=p.MAX_BUFFER_SIZE=void 0;var g=L(6349),v=L(8437),C=L(511),y=L(643),m=L(4634),w=L(4863),h=L(7116),d=L(3734);p.MAX_BUFFER_SIZE=4294967295;var _=function(){function a(n,s,c){this._hasScrollback=n,this._optionsService=s,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new g.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return a.prototype.getNullCell=function(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell},a.prototype.getWhitespaceCell=function(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell},a.prototype.getBlankLine=function(n,s){return new v.BufferLine(this._bufferService.cols,this.getNullCell(n),s)},Object.defineProperty(a.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isCursorInViewport",{get:function(){var n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows},enumerable:!1,configurable:!0}),a.prototype._getCorrectBufferLength=function(n){if(!this._hasScrollback)return n;var s=n+this._optionsService.options.scrollback;return s>p.MAX_BUFFER_SIZE?p.MAX_BUFFER_SIZE:s},a.prototype.fillViewportRows=function(n){if(this.lines.length===0){n===void 0&&(n=v.DEFAULT_ATTR_DATA);for(var s=this._rows;s--;)this.lines.push(this.getBlankLine(n))}},a.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new g.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},a.prototype.resize=function(n,s){var c=this.getNullCell(v.DEFAULT_ATTR_DATA),f=this._getCorrectBufferLength(s);if(f>this.lines.maxLength&&(this.lines.maxLength=f),this.lines.length>0){if(this._cols<n)for(var b=0;b<this.lines.length;b++)this.lines.get(b).resize(n,c);var k=0;if(this._rows<s)for(var O=this._rows;O<s;O++)this.lines.length<s+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new v.BufferLine(n,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(n,c)));else for(O=this._rows;O>s;O--)this.lines.length>s+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(f<this.lines.maxLength){var D=this.lines.length-f;D>0&&(this.lines.trimStart(D),this.ybase=Math.max(this.ybase-D,0),this.ydisp=Math.max(this.ydisp-D,0),this.savedY=Math.max(this.savedY-D,0)),this.lines.maxLength=f}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,s-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=s-1,this._isReflowEnabled&&(this._reflow(n,s),this._cols>n))for(b=0;b<this.lines.length;b++)this.lines.get(b).resize(n,c);this._cols=n,this._rows=s},Object.defineProperty(a.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),a.prototype._reflow=function(n,s){this._cols!==n&&(n>this._cols?this._reflowLarger(n,s):this._reflowSmaller(n,s))},a.prototype._reflowLarger=function(n,s){var c=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(c.length>0){var f=(0,m.reflowLargerCreateNewLayout)(this.lines,c);(0,m.reflowLargerApplyNewLayout)(this.lines,f.layout),this._reflowLargerAdjustViewport(n,s,f.countRemoved)}},a.prototype._reflowLargerAdjustViewport=function(n,s,c){for(var f=this.getNullCell(v.DEFAULT_ATTR_DATA),b=c;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<s&&this.lines.push(new v.BufferLine(n,f))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},a.prototype._reflowSmaller=function(n,s){for(var c=this.getNullCell(v.DEFAULT_ATTR_DATA),f=[],b=0,k=this.lines.length-1;k>=0;k--){var O=this.lines.get(k);if(!(!O||!O.isWrapped&&O.getTrimmedLength()<=n)){for(var D=[O];O.isWrapped&&k>0;)O=this.lines.get(--k),D.unshift(O);var M=this.ybase+this.y;if(!(M>=k&&M<k+D.length)){var x,B=D[D.length-1].getTrimmedLength(),T=(0,m.reflowSmallerGetNewLineLengths)(D,this._cols,n),J=T.length-D.length;x=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+J):Math.max(0,this.lines.length-this.lines.maxLength+J);for(var j=[],H=0;H<J;H++){var N=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);j.push(N)}j.length>0&&(f.push({start:k+D.length+b,newLines:j}),b+=j.length),D.push.apply(D,j);var Z=T.length-1,Q=T[Z];Q===0&&(Q=T[--Z]);for(var ae=D.length-J-1,se=B;ae>=0;){var me=Math.min(se,Q);if(D[Z].copyCellsFrom(D[ae],se-me,Q-me,me,!0),(Q-=me)==0&&(Q=T[--Z]),(se-=me)==0){ae--;var we=Math.max(ae,0);se=(0,m.getWrappedLineTrimmedLength)(D,we,this._cols)}}for(H=0;H<D.length;H++)T[H]<n&&D[H].setCell(T[H],c);for(var he=J-x;he-- >0;)this.ybase===0?this.y<s-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-s&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+J,this.ybase+s-1)}}}if(f.length>0){var F=[],z=[];for(H=0;H<this.lines.length;H++)z.push(this.lines.get(H));var G=this.lines.length,ce=G-1,$=0,ge=f[$];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);var Le=0;for(H=Math.min(this.lines.maxLength-1,G+b-1);H>=0;H--)if(ge&&ge.start>ce+Le){for(var Be=ge.newLines.length-1;Be>=0;Be--)this.lines.set(H--,ge.newLines[Be]);H++,F.push({index:ce+1,amount:ge.newLines.length}),Le+=ge.newLines.length,ge=f[++$]}else this.lines.set(H,z[ce--]);var Ee=0;for(H=F.length-1;H>=0;H--)F[H].index+=Ee,this.lines.onInsertEmitter.fire(F[H]),Ee+=F[H].amount;var He=Math.max(0,G+b-this.lines.maxLength);He>0&&this.lines.onTrimEmitter.fire(He)}},a.prototype.stringIndexToBufferIndex=function(n,s,c){for(c===void 0&&(c=!1);s;){var f=this.lines.get(n);if(!f)return[-1,-1];for(var b=c?f.getTrimmedLength():f.length,k=0;k<b;++k)if(f.get(k)[y.CHAR_DATA_WIDTH_INDEX]&&(s-=f.get(k)[y.CHAR_DATA_CHAR_INDEX].length||1),s<0)return[n,k];n++}return[n,0]},a.prototype.translateBufferLineToString=function(n,s,c,f){c===void 0&&(c=0);var b=this.lines.get(n);return b?b.translateToString(s,c,f):""},a.prototype.getWrappedRangeForLine=function(n){for(var s=n,c=n;s>0&&this.lines.get(s).isWrapped;)s--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:s,last:c}},a.prototype.setupTabStops=function(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.options.tabStopWidth)this.tabs[n]=!0},a.prototype.prevStop=function(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n},a.prototype.nextStop=function(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n},a.prototype.addMarker=function(n){var s=this,c=new w.Marker(n);return this.markers.push(c),c.register(this.lines.onTrim(function(f){c.line-=f,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(function(f){c.line>=f.index&&(c.line+=f.amount)})),c.register(this.lines.onDelete(function(f){c.line>=f.index&&c.line<f.index+f.amount&&c.dispose(),c.line>f.index&&(c.line-=f.amount)})),c.register(c.onDispose(function(){return s._removeMarker(c)})),c},a.prototype._removeMarker=function(n){this.markers.splice(this.markers.indexOf(n),1)},a.prototype.iterator=function(n,s,c,f,b){return new l(this,n,s,c,f,b)},a}();p.Buffer=_;var l=function(){function a(n,s,c,f,b,k){c===void 0&&(c=0),f===void 0&&(f=n.lines.length),b===void 0&&(b=0),k===void 0&&(k=0),this._buffer=n,this._trimRight=s,this._startIndex=c,this._endIndex=f,this._startOverscan=b,this._endOverscan=k,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return a.prototype.hasNext=function(){return this._current<this._endIndex},a.prototype.next=function(){var n=this._buffer.getWrappedRangeForLine(this._current);n.first<this._startIndex-this._startOverscan&&(n.first=this._startIndex-this._startOverscan),n.last>this._endIndex+this._endOverscan&&(n.last=this._endIndex+this._endOverscan),n.first=Math.max(n.first,0),n.last=Math.min(n.last,this._buffer.lines.length);for(var s="",c=n.first;c<=n.last;++c)s+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=n.last+1,{range:n,content:s}},a}();p.BufferStringIterator=l},8437:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLine=p.DEFAULT_ATTR_DATA=void 0;var g=L(482),v=L(643),C=L(511),y=L(3734);p.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);var m=function(){function w(h,d,_){_===void 0&&(_=!1),this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);for(var l=d||C.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),a=0;a<h;++a)this.setCell(a,l);this.length=h}return w.prototype.get=function(h){var d=this._data[3*h+0],_=2097151&d;return[this._data[3*h+1],2097152&d?this._combined[h]:_?(0,g.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[h].charCodeAt(this._combined[h].length-1):_]},w.prototype.set=function(h,d){this._data[3*h+1]=d[v.CHAR_DATA_ATTR_INDEX],d[v.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=d[1],this._data[3*h+0]=2097152|h|d[v.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=d[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[v.CHAR_DATA_WIDTH_INDEX]<<22},w.prototype.getWidth=function(h){return this._data[3*h+0]>>22},w.prototype.hasWidth=function(h){return 12582912&this._data[3*h+0]},w.prototype.getFg=function(h){return this._data[3*h+1]},w.prototype.getBg=function(h){return this._data[3*h+2]},w.prototype.hasContent=function(h){return 4194303&this._data[3*h+0]},w.prototype.getCodePoint=function(h){var d=this._data[3*h+0];return 2097152&d?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&d},w.prototype.isCombined=function(h){return 2097152&this._data[3*h+0]},w.prototype.getString=function(h){var d=this._data[3*h+0];return 2097152&d?this._combined[h]:2097151&d?(0,g.stringFromCodePoint)(2097151&d):""},w.prototype.loadCell=function(h,d){var _=3*h;return d.content=this._data[_+0],d.fg=this._data[_+1],d.bg=this._data[_+2],2097152&d.content&&(d.combinedData=this._combined[h]),268435456&d.bg&&(d.extended=this._extendedAttrs[h]),d},w.prototype.setCell=function(h,d){2097152&d.content&&(this._combined[h]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[h]=d.extended),this._data[3*h+0]=d.content,this._data[3*h+1]=d.fg,this._data[3*h+2]=d.bg},w.prototype.setCellFromCodePoint=function(h,d,_,l,a,n){268435456&a&&(this._extendedAttrs[h]=n),this._data[3*h+0]=d|_<<22,this._data[3*h+1]=l,this._data[3*h+2]=a},w.prototype.addCodepointToCell=function(h,d){var _=this._data[3*h+0];2097152&_?this._combined[h]+=(0,g.stringFromCodePoint)(d):(2097151&_?(this._combined[h]=(0,g.stringFromCodePoint)(2097151&_)+(0,g.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|1<<22,this._data[3*h+0]=_)},w.prototype.insertCells=function(h,d,_,l){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),d<this.length-h){for(var a=new C.CellData,n=this.length-h-d-1;n>=0;--n)this.setCell(h+d+n,this.loadCell(h+n,a));for(n=0;n<d;++n)this.setCell(h+n,_)}else for(n=h;n<this.length;++n)this.setCell(n,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs)},w.prototype.deleteCells=function(h,d,_,l){if(h%=this.length,d<this.length-h){for(var a=new C.CellData,n=0;n<this.length-h-d;++n)this.setCell(h+n,this.loadCell(h+d+n,a));for(n=this.length-d;n<this.length;++n)this.setCell(n,_)}else for(n=h;n<this.length;++n)this.setCell(n,_);h&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodePoint(h,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs)},w.prototype.replaceCells=function(h,d,_,l){for(h&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(l==null?void 0:l.fg)||0,(l==null?void 0:l.bg)||0,(l==null?void 0:l.extended)||new y.ExtendedAttrs);h<d&&h<this.length;)this.setCell(h++,_)},w.prototype.resize=function(h,d){if(h!==this.length){if(h>this.length){var _=new Uint32Array(3*h);this.length&&(3*h<this._data.length?_.set(this._data.subarray(0,3*h)):_.set(this._data)),this._data=_;for(var l=this.length;l<h;++l)this.setCell(l,d)}else if(h){(_=new Uint32Array(3*h)).set(this._data.subarray(0,3*h)),this._data=_;var a=Object.keys(this._combined);for(l=0;l<a.length;l++){var n=parseInt(a[l],10);n>=h&&delete this._combined[n]}}else this._data=new Uint32Array(0),this._combined={};this.length=h}},w.prototype.fill=function(h){this._combined={},this._extendedAttrs={};for(var d=0;d<this.length;++d)this.setCell(d,h)},w.prototype.copyFrom=function(h){for(var d in this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={},h._combined)this._combined[d]=h._combined[d];for(var d in this._extendedAttrs={},h._extendedAttrs)this._extendedAttrs[d]=h._extendedAttrs[d];this.isWrapped=h.isWrapped},w.prototype.clone=function(){var h=new w(0);for(var d in h._data=new Uint32Array(this._data),h.length=this.length,this._combined)h._combined[d]=this._combined[d];for(var d in this._extendedAttrs)h._extendedAttrs[d]=this._extendedAttrs[d];return h.isWrapped=this.isWrapped,h},w.prototype.getTrimmedLength=function(){for(var h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0},w.prototype.copyCellsFrom=function(h,d,_,l,a){var n=h._data;if(a)for(var s=l-1;s>=0;s--)for(var c=0;c<3;c++)this._data[3*(_+s)+c]=n[3*(d+s)+c];else for(s=0;s<l;s++)for(c=0;c<3;c++)this._data[3*(_+s)+c]=n[3*(d+s)+c];var f=Object.keys(h._combined);for(c=0;c<f.length;c++){var b=parseInt(f[c],10);b>=d&&(this._combined[b-d+_]=h._combined[b])}},w.prototype.translateToString=function(h,d,_){h===void 0&&(h=!1),d===void 0&&(d=0),_===void 0&&(_=this.length),h&&(_=Math.min(_,this.getTrimmedLength()));for(var l="";d<_;){var a=this._data[3*d+0],n=2097151&a;l+=2097152&a?this._combined[d]:n?(0,g.stringFromCodePoint)(n):v.WHITESPACE_CELL_CHAR,d+=a>>22||1}return l},w}();p.BufferLine=m},4841:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getRangeLength=void 0,p.getRangeLength=function(L,g){if(L.start.y>L.end.y)throw new Error("Buffer range end ("+L.end.x+", "+L.end.y+") cannot be before start ("+L.start.x+", "+L.start.y+")");return g*(L.end.y-L.start.y)+(L.end.x-L.start.x+1)}},4634:(K,p)=>{function L(g,v,C){if(v===g.length-1)return g[v].getTrimmedLength();var y=!g[v].hasContent(C-1)&&g[v].getWidth(C-1)===1,m=g[v+1].getWidth(0)===2;return y&&m?C-1:C}Object.defineProperty(p,"__esModule",{value:!0}),p.getWrappedLineTrimmedLength=p.reflowSmallerGetNewLineLengths=p.reflowLargerApplyNewLayout=p.reflowLargerCreateNewLayout=p.reflowLargerGetLinesToRemove=void 0,p.reflowLargerGetLinesToRemove=function(g,v,C,y,m){for(var w=[],h=0;h<g.length-1;h++){var d=h,_=g.get(++d);if(_.isWrapped){for(var l=[g.get(h)];d<g.length&&_.isWrapped;)l.push(_),_=g.get(++d);if(y>=h&&y<d)h+=l.length-1;else{for(var a=0,n=L(l,a,v),s=1,c=0;s<l.length;){var f=L(l,s,v),b=f-c,k=C-n,O=Math.min(b,k);l[a].copyCellsFrom(l[s],c,n,O,!1),(n+=O)===C&&(a++,n=0),(c+=O)===f&&(s++,c=0),n===0&&a!==0&&l[a-1].getWidth(C-1)===2&&(l[a].copyCellsFrom(l[a-1],C-1,n++,1,!1),l[a-1].setCell(C-1,m))}l[a].replaceCells(n,C,m);for(var D=0,M=l.length-1;M>0&&(M>a||l[M].getTrimmedLength()===0);M--)D++;D>0&&(w.push(h+l.length-D),w.push(D)),h+=l.length-1}}}return w},p.reflowLargerCreateNewLayout=function(g,v){for(var C=[],y=0,m=v[y],w=0,h=0;h<g.length;h++)if(m===h){var d=v[++y];g.onDeleteEmitter.fire({index:h-w,amount:d}),h+=d-1,w+=d,m=v[++y]}else C.push(h);return{layout:C,countRemoved:w}},p.reflowLargerApplyNewLayout=function(g,v){for(var C=[],y=0;y<v.length;y++)C.push(g.get(v[y]));for(y=0;y<C.length;y++)g.set(y,C[y]);g.length=v.length},p.reflowSmallerGetNewLineLengths=function(g,v,C){for(var y=[],m=g.map(function(n,s){return L(g,s,v)}).reduce(function(n,s){return n+s}),w=0,h=0,d=0;d<m;){if(m-d<C){y.push(m-d);break}w+=C;var _=L(g,h,v);w>_&&(w-=_,h++);var l=g[h].getWidth(w-1)===2;l&&w--;var a=l?C-1:C;y.push(a),d+=a}return y},p.getWrappedLineTrimmedLength=L},5295:function(K,p,L){var g,v=this&&this.__extends||(g=function(w,h){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,_){d.__proto__=_}||function(d,_){for(var l in _)Object.prototype.hasOwnProperty.call(_,l)&&(d[l]=_[l])},g(w,h)},function(w,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=w}g(w,h),w.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(p,"__esModule",{value:!0}),p.BufferSet=void 0;var C=L(9092),y=L(8460),m=function(w){function h(d,_){var l=w.call(this)||this;return l._optionsService=d,l._bufferService=_,l._onBufferActivate=l.register(new y.EventEmitter),l.reset(),l}return v(h,w),Object.defineProperty(h.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),h.prototype.reset=function(){this._normal=new C.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new C.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(h.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),h.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},h.prototype.activateAltBuffer=function(d){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(d),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},h.prototype.resize=function(d,_){this._normal.resize(d,_),this._alt.resize(d,_)},h.prototype.setupTabStops=function(d){this._normal.setupTabStops(d),this._alt.setupTabStops(d)},h}(L(844).Disposable);p.BufferSet=m},511:function(K,p,L){var g,v=this&&this.__extends||(g=function(h,d){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,l){_.__proto__=l}||function(_,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(_[a]=l[a])},g(h,d)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function _(){this.constructor=h}g(h,d),h.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)});Object.defineProperty(p,"__esModule",{value:!0}),p.CellData=void 0;var C=L(482),y=L(643),m=L(3734),w=function(h){function d(){var _=h!==null&&h.apply(this,arguments)||this;return _.content=0,_.fg=0,_.bg=0,_.extended=new m.ExtendedAttrs,_.combinedData="",_}return v(d,h),d.fromCharData=function(_){var l=new d;return l.setFromCharData(_),l},d.prototype.isCombined=function(){return 2097152&this.content},d.prototype.getWidth=function(){return this.content>>22},d.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,C.stringFromCodePoint)(2097151&this.content):""},d.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},d.prototype.setFromCharData=function(_){this.fg=_[y.CHAR_DATA_ATTR_INDEX],this.bg=0;var l=!1;if(_[y.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(_[y.CHAR_DATA_CHAR_INDEX].length===2){var a=_[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){var n=_[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(a-55296)+n-56320+65536|_[y.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=_[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[y.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=_[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[y.CHAR_DATA_WIDTH_INDEX]<<22)},d.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},d}(m.AttributeData);p.CellData=w},643:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WHITESPACE_CELL_CODE=p.WHITESPACE_CELL_WIDTH=p.WHITESPACE_CELL_CHAR=p.NULL_CELL_CODE=p.NULL_CELL_WIDTH=p.NULL_CELL_CHAR=p.CHAR_DATA_CODE_INDEX=p.CHAR_DATA_WIDTH_INDEX=p.CHAR_DATA_CHAR_INDEX=p.CHAR_DATA_ATTR_INDEX=p.DEFAULT_ATTR=p.DEFAULT_COLOR=void 0,p.DEFAULT_COLOR=256,p.DEFAULT_ATTR=256|p.DEFAULT_COLOR<<9,p.CHAR_DATA_ATTR_INDEX=0,p.CHAR_DATA_CHAR_INDEX=1,p.CHAR_DATA_WIDTH_INDEX=2,p.CHAR_DATA_CODE_INDEX=3,p.NULL_CELL_CHAR="",p.NULL_CELL_WIDTH=1,p.NULL_CELL_CODE=0,p.WHITESPACE_CELL_CHAR=" ",p.WHITESPACE_CELL_WIDTH=1,p.WHITESPACE_CELL_CODE=32},4863:function(K,p,L){var g,v=this&&this.__extends||(g=function(m,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(h[_]=d[_])},g(m,w)},function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function h(){this.constructor=m}g(m,w),m.prototype=w===null?Object.create(w):(h.prototype=w.prototype,new h)});Object.defineProperty(p,"__esModule",{value:!0}),p.Marker=void 0;var C=L(8460),y=function(m){function w(h){var d=m.call(this)||this;return d.line=h,d._id=w._nextId++,d.isDisposed=!1,d._onDispose=new C.EventEmitter,d}return v(w,m),Object.defineProperty(w.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),m.prototype.dispose.call(this))},w._nextId=1,w}(L(844).Disposable);p.Marker=y},7116:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DEFAULT_CHARSET=p.CHARSETS=void 0,p.CHARSETS={},p.DEFAULT_CHARSET=p.CHARSETS.B,p.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},p.CHARSETS.A={"#":"\xA3"},p.CHARSETS.B=void 0,p.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},p.CHARSETS.C=p.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},p.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},p.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},p.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},p.CHARSETS.E=p.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},p.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},p.CHARSETS.H=p.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(K,p)=>{var L,g;Object.defineProperty(p,"__esModule",{value:!0}),p.C1=p.C0=void 0,(g=p.C0||(p.C0={})).NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL="\x7F",(L=p.C1||(p.C1={})).PAD="\x80",L.HOP="\x81",L.BPH="\x82",L.NBH="\x83",L.IND="\x84",L.NEL="\x85",L.SSA="\x86",L.ESA="\x87",L.HTS="\x88",L.HTJ="\x89",L.VTS="\x8A",L.PLD="\x8B",L.PLU="\x8C",L.RI="\x8D",L.SS2="\x8E",L.SS3="\x8F",L.DCS="\x90",L.PU1="\x91",L.PU2="\x92",L.STS="\x93",L.CCH="\x94",L.MW="\x95",L.SPA="\x96",L.EPA="\x97",L.SOS="\x98",L.SGCI="\x99",L.SCI="\x9A",L.CSI="\x9B",L.ST="\x9C",L.OSC="\x9D",L.PM="\x9E",L.APC="\x9F"},7399:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.evaluateKeyboardEvent=void 0;var g=L(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};p.evaluateKeyboardEvent=function(C,y,m,w){var h={type:0,cancel:!1,key:void 0},d=(C.shiftKey?1:0)|(C.altKey?2:0)|(C.ctrlKey?4:0)|(C.metaKey?8:0);switch(C.keyCode){case 0:C.key==="UIKeyInputUpArrow"?h.key=y?g.C0.ESC+"OA":g.C0.ESC+"[A":C.key==="UIKeyInputLeftArrow"?h.key=y?g.C0.ESC+"OD":g.C0.ESC+"[D":C.key==="UIKeyInputRightArrow"?h.key=y?g.C0.ESC+"OC":g.C0.ESC+"[C":C.key==="UIKeyInputDownArrow"&&(h.key=y?g.C0.ESC+"OB":g.C0.ESC+"[B");break;case 8:if(C.shiftKey){h.key=g.C0.BS;break}if(C.altKey){h.key=g.C0.ESC+g.C0.DEL;break}h.key=g.C0.DEL;break;case 9:if(C.shiftKey){h.key=g.C0.ESC+"[Z";break}h.key=g.C0.HT,h.cancel=!0;break;case 13:h.key=C.altKey?g.C0.ESC+g.C0.CR:g.C0.CR,h.cancel=!0;break;case 27:h.key=g.C0.ESC,C.altKey&&(h.key=g.C0.ESC+g.C0.ESC),h.cancel=!0;break;case 37:if(C.metaKey)break;d?(h.key=g.C0.ESC+"[1;"+(d+1)+"D",h.key===g.C0.ESC+"[1;3D"&&(h.key=g.C0.ESC+(m?"b":"[1;5D"))):h.key=y?g.C0.ESC+"OD":g.C0.ESC+"[D";break;case 39:if(C.metaKey)break;d?(h.key=g.C0.ESC+"[1;"+(d+1)+"C",h.key===g.C0.ESC+"[1;3C"&&(h.key=g.C0.ESC+(m?"f":"[1;5C"))):h.key=y?g.C0.ESC+"OC":g.C0.ESC+"[C";break;case 38:if(C.metaKey)break;d?(h.key=g.C0.ESC+"[1;"+(d+1)+"A",m||h.key!==g.C0.ESC+"[1;3A"||(h.key=g.C0.ESC+"[1;5A")):h.key=y?g.C0.ESC+"OA":g.C0.ESC+"[A";break;case 40:if(C.metaKey)break;d?(h.key=g.C0.ESC+"[1;"+(d+1)+"B",m||h.key!==g.C0.ESC+"[1;3B"||(h.key=g.C0.ESC+"[1;5B")):h.key=y?g.C0.ESC+"OB":g.C0.ESC+"[B";break;case 45:C.shiftKey||C.ctrlKey||(h.key=g.C0.ESC+"[2~");break;case 46:h.key=d?g.C0.ESC+"[3;"+(d+1)+"~":g.C0.ESC+"[3~";break;case 36:h.key=d?g.C0.ESC+"[1;"+(d+1)+"H":y?g.C0.ESC+"OH":g.C0.ESC+"[H";break;case 35:h.key=d?g.C0.ESC+"[1;"+(d+1)+"F":y?g.C0.ESC+"OF":g.C0.ESC+"[F";break;case 33:C.shiftKey?h.type=2:h.key=g.C0.ESC+"[5~";break;case 34:C.shiftKey?h.type=3:h.key=g.C0.ESC+"[6~";break;case 112:h.key=d?g.C0.ESC+"[1;"+(d+1)+"P":g.C0.ESC+"OP";break;case 113:h.key=d?g.C0.ESC+"[1;"+(d+1)+"Q":g.C0.ESC+"OQ";break;case 114:h.key=d?g.C0.ESC+"[1;"+(d+1)+"R":g.C0.ESC+"OR";break;case 115:h.key=d?g.C0.ESC+"[1;"+(d+1)+"S":g.C0.ESC+"OS";break;case 116:h.key=d?g.C0.ESC+"[15;"+(d+1)+"~":g.C0.ESC+"[15~";break;case 117:h.key=d?g.C0.ESC+"[17;"+(d+1)+"~":g.C0.ESC+"[17~";break;case 118:h.key=d?g.C0.ESC+"[18;"+(d+1)+"~":g.C0.ESC+"[18~";break;case 119:h.key=d?g.C0.ESC+"[19;"+(d+1)+"~":g.C0.ESC+"[19~";break;case 120:h.key=d?g.C0.ESC+"[20;"+(d+1)+"~":g.C0.ESC+"[20~";break;case 121:h.key=d?g.C0.ESC+"[21;"+(d+1)+"~":g.C0.ESC+"[21~";break;case 122:h.key=d?g.C0.ESC+"[23;"+(d+1)+"~":g.C0.ESC+"[23~";break;case 123:h.key=d?g.C0.ESC+"[24;"+(d+1)+"~":g.C0.ESC+"[24~";break;default:if(!C.ctrlKey||C.shiftKey||C.altKey||C.metaKey)if(m&&!w||!C.altKey||C.metaKey)!m||C.altKey||C.ctrlKey||C.shiftKey||!C.metaKey?C.key&&!C.ctrlKey&&!C.altKey&&!C.metaKey&&C.keyCode>=48&&C.key.length===1?h.key=C.key:C.key&&C.ctrlKey&&C.key==="_"&&(h.key=g.C0.US):C.keyCode===65&&(h.type=1);else{var _=v[C.keyCode],l=_==null?void 0:_[C.shiftKey?1:0];if(l)h.key=g.C0.ESC+l;else if(C.keyCode>=65&&C.keyCode<=90){var a=C.ctrlKey?C.keyCode-64:C.keyCode+32;h.key=g.C0.ESC+String.fromCharCode(a)}}else C.keyCode>=65&&C.keyCode<=90?h.key=String.fromCharCode(C.keyCode-64):C.keyCode===32?h.key=g.C0.NUL:C.keyCode>=51&&C.keyCode<=55?h.key=String.fromCharCode(C.keyCode-51+27):C.keyCode===56?h.key=g.C0.DEL:C.keyCode===219?h.key=g.C0.ESC:C.keyCode===220?h.key=g.C0.FS:C.keyCode===221&&(h.key=g.C0.GS)}return h}},482:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Utf8ToUtf32=p.StringToUtf32=p.utf32ToString=p.stringFromCodePoint=void 0,p.stringFromCodePoint=function(v){return v>65535?(v-=65536,String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):String.fromCharCode(v)},p.utf32ToString=function(v,C,y){C===void 0&&(C=0),y===void 0&&(y=v.length);for(var m="",w=C;w<y;++w){var h=v[w];h>65535?(h-=65536,m+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):m+=String.fromCharCode(h)}return m};var L=function(){function v(){this._interim=0}return v.prototype.clear=function(){this._interim=0},v.prototype.decode=function(C,y){var m=C.length;if(!m)return 0;var w=0,h=0;this._interim&&(56320<=(l=C.charCodeAt(h++))&&l<=57343?y[w++]=1024*(this._interim-55296)+l-56320+65536:(y[w++]=this._interim,y[w++]=l),this._interim=0);for(var d=h;d<m;++d){var _=C.charCodeAt(d);if(55296<=_&&_<=56319){if(++d>=m)return this._interim=_,w;var l;56320<=(l=C.charCodeAt(d))&&l<=57343?y[w++]=1024*(_-55296)+l-56320+65536:(y[w++]=_,y[w++]=l)}else _!==65279&&(y[w++]=_)}return w},v}();p.StringToUtf32=L;var g=function(){function v(){this.interim=new Uint8Array(3)}return v.prototype.clear=function(){this.interim.fill(0)},v.prototype.decode=function(C,y){var m=C.length;if(!m)return 0;var w,h,d,_,l=0,a=0,n=0;if(this.interim[0]){var s=!1,c=this.interim[0];c&=(224&c)==192?31:(240&c)==224?15:7;for(var f=0,b=void 0;(b=63&this.interim[++f])&&f<4;)c<<=6,c|=b;for(var k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,O=k-f;n<O;){if(n>=m)return 0;if((192&(b=C[n++]))!=128){n--,s=!0;break}this.interim[f++]=b,c<<=6,c|=63&b}s||(k===2?c<128?n--:y[l++]=c:k===3?c<2048||c>=55296&&c<=57343||c===65279||(y[l++]=c):c<65536||c>1114111||(y[l++]=c)),this.interim.fill(0)}for(var D=m-4,M=n;M<m;){for(;!(!(M<D)||128&(w=C[M])||128&(h=C[M+1])||128&(d=C[M+2])||128&(_=C[M+3]));)y[l++]=w,y[l++]=h,y[l++]=d,y[l++]=_,M+=4;if((w=C[M++])<128)y[l++]=w;else if((224&w)==192){if(M>=m)return this.interim[0]=w,l;if((192&(h=C[M++]))!=128){M--;continue}if((a=(31&w)<<6|63&h)<128){M--;continue}y[l++]=a}else if((240&w)==224){if(M>=m)return this.interim[0]=w,l;if((192&(h=C[M++]))!=128){M--;continue}if(M>=m)return this.interim[0]=w,this.interim[1]=h,l;if((192&(d=C[M++]))!=128){M--;continue}if((a=(15&w)<<12|(63&h)<<6|63&d)<2048||a>=55296&&a<=57343||a===65279)continue;y[l++]=a}else if((248&w)==240){if(M>=m)return this.interim[0]=w,l;if((192&(h=C[M++]))!=128){M--;continue}if(M>=m)return this.interim[0]=w,this.interim[1]=h,l;if((192&(d=C[M++]))!=128){M--;continue}if(M>=m)return this.interim[0]=w,this.interim[1]=h,this.interim[2]=d,l;if((192&(_=C[M++]))!=128){M--;continue}if((a=(7&w)<<18|(63&h)<<12|(63&d)<<6|63&_)<65536||a>1114111)continue;y[l++]=a}}return l},v}();p.Utf8ToUtf32=g},225:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeV6=void 0;var g,v=L(8273),C=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],m=function(){function w(){if(this.version="6",!g){g=new Uint8Array(65536),(0,v.fill)(g,1),g[0]=0,(0,v.fill)(g,0,1,32),(0,v.fill)(g,0,127,160),(0,v.fill)(g,2,4352,4448),g[9001]=2,g[9002]=2,(0,v.fill)(g,2,11904,42192),g[12351]=1,(0,v.fill)(g,2,44032,55204),(0,v.fill)(g,2,63744,64256),(0,v.fill)(g,2,65040,65050),(0,v.fill)(g,2,65072,65136),(0,v.fill)(g,2,65280,65377),(0,v.fill)(g,2,65504,65511);for(var h=0;h<C.length;++h)(0,v.fill)(g,0,C[h][0],C[h][1]+1)}}return w.prototype.wcwidth=function(h){return h<32?0:h<127?1:h<65536?g[h]:function(d,_){var l,a=0,n=_.length-1;if(d<_[0][0]||d>_[n][1])return!1;for(;n>=a;)if(d>_[l=a+n>>1][1])a=l+1;else{if(!(d<_[l][0]))return!0;n=l-1}return!1}(h,y)?0:h>=131072&&h<=196605||h>=196608&&h<=262141?2:1},w}();p.UnicodeV6=m},5981:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WriteBuffer=void 0;var L=typeof queueMicrotask=="undefined"?function(v){Promise.resolve().then(v)}:queueMicrotask,g=function(){function v(C){this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return v.prototype.writeSync=function(C,y){if(y!==void 0&&this._syncCalls>y)this._syncCalls=0;else if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);var w=this._callbacks.shift();w&&w()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},v.prototype.write=function(C,y){var m=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return m._innerWrite()})),this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(y)},v.prototype._innerWrite=function(C,y){var m=this;C===void 0&&(C=0),y===void 0&&(y=!0);for(var w=C||Date.now();this._writeBuffer.length>this._bufferOffset;){var h=this._writeBuffer[this._bufferOffset],d=this._action(h,y);if(d)return void d.catch(function(l){return L(function(){throw l}),Promise.resolve(!1)}).then(function(l){return Date.now()-w>=12?setTimeout(function(){return m._innerWrite(0,l)}):m._innerWrite(w,l)});var _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return m._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},v}();p.WriteBuffer=g},5941:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.toRgbString=p.parseColor=void 0;var L=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,g=/^[\da-f]+$/;function v(C,y){var m=C.toString(16),w=m.length<2?"0"+m:m;switch(y){case 4:return m[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}p.parseColor=function(C){if(C){var y=C.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);var m=L.exec(y);if(m){var w=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/w*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/w*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/w*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),g.exec(y)&&[3,6,9,12].includes(y.length))){for(var h=y.length/3,d=[0,0,0],_=0;_<3;++_){var l=parseInt(y.slice(h*_,h*_+h),16);d[_]=h===1?l<<4:h===2?l:h===3?l>>4:l>>8}return d}}},p.toRgbString=function(C,y){y===void 0&&(y=16);var m=C[0],w=C[1],h=C[2];return"rgb:"+v(m,y)+"/"+v(w,y)+"/"+v(h,y)}},5770:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PAYLOAD_LIMIT=void 0,p.PAYLOAD_LIMIT=1e7},6351:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DcsHandler=p.DcsParser=void 0;var g=L(482),v=L(8742),C=L(5770),y=[],m=function(){function d(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return d.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=y},d.prototype.registerHandler=function(_,l){this._handlers[_]===void 0&&(this._handlers[_]=[]);var a=this._handlers[_];return a.push(l),{dispose:function(){var n=a.indexOf(l);n!==-1&&a.splice(n,1)}}},d.prototype.clearHandler=function(_){this._handlers[_]&&delete this._handlers[_]},d.prototype.setHandlerFallback=function(_){this._handlerFb=_},d.prototype.reset=function(){if(this._active.length)for(var _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0},d.prototype.hook=function(_,l){if(this.reset(),this._ident=_,this._active=this._handlers[_]||y,this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].hook(l);else this._handlerFb(this._ident,"HOOK",l)},d.prototype.put=function(_,l,a){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(_,l,a);else this._handlerFb(this._ident,"PUT",(0,g.utf32ToString)(_,l,a))},d.prototype.unhook=function(_,l){if(l===void 0&&(l=!0),this._active.length){var a=!1,n=this._active.length-1,s=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,a=l,s=this._stack.fallThrough,this._stack.paused=!1),!s&&a===!1){for(;n>=0&&(a=this._active[n].unhook(_))!==!0;n--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,a;n--}for(;n>=0;n--)if((a=this._active[n].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",_);this._active=y,this._ident=0},d}();p.DcsParser=m;var w=new v.Params;w.addParam(0);var h=function(){function d(_){this._handler=_,this._data="",this._params=w,this._hitLimit=!1}return d.prototype.hook=function(_){this._params=_.length>1||_.params[0]?_.clone():w,this._data="",this._hitLimit=!1},d.prototype.put=function(_,l,a){this._hitLimit||(this._data+=(0,g.utf32ToString)(_,l,a),this._data.length>C.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},d.prototype.unhook=function(_){var l=this,a=!1;if(this._hitLimit)a=!1;else if(_&&(a=this._handler(this._data,this._params))instanceof Promise)return a.then(function(n){return l._params=w,l._data="",l._hitLimit=!1,n});return this._params=w,this._data="",this._hitLimit=!1,a},d}();p.DcsHandler=h},2015:function(K,p,L){var g,v=this&&this.__extends||(g=function(a,n){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])},g(a,n)},function(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=a}g(a,n),a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)});Object.defineProperty(p,"__esModule",{value:!0}),p.EscapeSequenceParser=p.VT500_TRANSITION_TABLE=p.TransitionTable=void 0;var C=L(844),y=L(8273),m=L(8742),w=L(6242),h=L(6351),d=function(){function a(n){this.table=new Uint8Array(n)}return a.prototype.setDefault=function(n,s){(0,y.fill)(this.table,n<<4|s)},a.prototype.add=function(n,s,c,f){this.table[s<<8|n]=c<<4|f},a.prototype.addMany=function(n,s,c,f){for(var b=0;b<n.length;b++)this.table[s<<8|n[b]]=c<<4|f},a}();p.TransitionTable=d;var _=160;p.VT500_TRANSITION_TABLE=function(){var a=new d(4095),n=Array.apply(null,Array(256)).map(function(O,D){return D}),s=function(O,D){return n.slice(O,D)},c=s(32,127),f=s(0,24);f.push(25),f.push.apply(f,s(28,32));var b,k=s(0,14);for(b in a.setDefault(1,0),a.addMany(c,0,2,0),k)a.addMany([24,26,153,154],b,3,0),a.addMany(s(128,144),b,3,0),a.addMany(s(144,152),b,3,0),a.add(156,b,0,0),a.add(27,b,11,1),a.add(157,b,4,8),a.addMany([152,158,159],b,0,7),a.add(155,b,11,3),a.add(144,b,11,9);return a.addMany(f,0,3,0),a.addMany(f,1,3,1),a.add(127,1,0,1),a.addMany(f,8,0,8),a.addMany(f,3,3,3),a.add(127,3,0,3),a.addMany(f,4,3,4),a.add(127,4,0,4),a.addMany(f,6,3,6),a.addMany(f,5,3,5),a.add(127,5,0,5),a.addMany(f,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(c,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(s(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(c,7,0,7),a.addMany(f,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(s(64,127),3,7,0),a.addMany(s(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(s(48,60),4,8,4),a.addMany(s(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(s(32,64),6,0,6),a.add(127,6,0,6),a.addMany(s(64,127),6,0,0),a.addMany(s(32,48),3,9,5),a.addMany(s(32,48),5,9,5),a.addMany(s(48,64),5,0,6),a.addMany(s(64,127),5,7,0),a.addMany(s(32,48),4,9,5),a.addMany(s(32,48),1,9,2),a.addMany(s(32,48),2,9,2),a.addMany(s(48,127),2,10,0),a.addMany(s(48,80),1,10,0),a.addMany(s(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(s(96,127),1,10,0),a.add(80,1,11,9),a.addMany(f,9,0,9),a.add(127,9,0,9),a.addMany(s(28,32),9,0,9),a.addMany(s(32,48),9,9,12),a.addMany(s(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(f,11,0,11),a.addMany(s(32,128),11,0,11),a.addMany(s(28,32),11,0,11),a.addMany(f,10,0,10),a.add(127,10,0,10),a.addMany(s(28,32),10,0,10),a.addMany(s(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(s(32,48),10,9,12),a.addMany(f,12,0,12),a.add(127,12,0,12),a.addMany(s(28,32),12,0,12),a.addMany(s(32,48),12,9,12),a.addMany(s(48,64),12,0,11),a.addMany(s(64,127),12,12,13),a.addMany(s(64,127),10,12,13),a.addMany(s(64,127),9,12,13),a.addMany(f,13,13,13),a.addMany(c,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(_,0,2,0),a.add(_,8,5,8),a.add(_,6,0,6),a.add(_,11,0,11),a.add(_,13,13,13),a}();var l=function(a){function n(s){s===void 0&&(s=p.VT500_TRANSITION_TABLE);var c=a.call(this)||this;return c._transitions=s,c._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},c.initialState=0,c.currentState=c.initialState,c._params=new m.Params,c._params.addParam(0),c._collect=0,c.precedingCodepoint=0,c._printHandlerFb=function(f,b,k){},c._executeHandlerFb=function(f){},c._csiHandlerFb=function(f,b){},c._escHandlerFb=function(f){},c._errorHandlerFb=function(f){return f},c._printHandler=c._printHandlerFb,c._executeHandlers=Object.create(null),c._csiHandlers=Object.create(null),c._escHandlers=Object.create(null),c._oscParser=new w.OscParser,c._dcsParser=new h.DcsParser,c._errorHandler=c._errorHandlerFb,c.registerEscHandler({final:"\\"},function(){return!0}),c}return v(n,a),n.prototype._identifier=function(s,c){c===void 0&&(c=[64,126]);var f=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if((f=s.prefix.charCodeAt(0))&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var b=0;b<s.intermediates.length;++b){var k=s.intermediates.charCodeAt(b);if(32>k||k>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=k}}if(s.final.length!==1)throw new Error("final must be a single byte");var O=s.final.charCodeAt(0);if(c[0]>O||O>c[1])throw new Error("final must be in range "+c[0]+" .. "+c[1]);return(f<<=8)|O},n.prototype.identToString=function(s){for(var c=[];s;)c.push(String.fromCharCode(255&s)),s>>=8;return c.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(s){this._printHandler=s},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.registerEscHandler=function(s,c){var f=this._identifier(s,[48,126]);this._escHandlers[f]===void 0&&(this._escHandlers[f]=[]);var b=this._escHandlers[f];return b.push(c),{dispose:function(){var k=b.indexOf(c);k!==-1&&b.splice(k,1)}}},n.prototype.clearEscHandler=function(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]},n.prototype.setEscHandlerFallback=function(s){this._escHandlerFb=s},n.prototype.setExecuteHandler=function(s,c){this._executeHandlers[s.charCodeAt(0)]=c},n.prototype.clearExecuteHandler=function(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(s){this._executeHandlerFb=s},n.prototype.registerCsiHandler=function(s,c){var f=this._identifier(s);this._csiHandlers[f]===void 0&&(this._csiHandlers[f]=[]);var b=this._csiHandlers[f];return b.push(c),{dispose:function(){var k=b.indexOf(c);k!==-1&&b.splice(k,1)}}},n.prototype.clearCsiHandler=function(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]},n.prototype.setCsiHandlerFallback=function(s){this._csiHandlerFb=s},n.prototype.registerDcsHandler=function(s,c){return this._dcsParser.registerHandler(this._identifier(s),c)},n.prototype.clearDcsHandler=function(s){this._dcsParser.clearHandler(this._identifier(s))},n.prototype.setDcsHandlerFallback=function(s){this._dcsParser.setHandlerFallback(s)},n.prototype.registerOscHandler=function(s,c){return this._oscParser.registerHandler(s,c)},n.prototype.clearOscHandler=function(s){this._oscParser.clearHandler(s)},n.prototype.setOscHandlerFallback=function(s){this._oscParser.setHandlerFallback(s)},n.prototype.setErrorHandler=function(s){this._errorHandler=s},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},n.prototype._preserveStack=function(s,c,f,b,k){this._parseStack.state=s,this._parseStack.handlers=c,this._parseStack.handlerPos=f,this._parseStack.transition=b,this._parseStack.chunkPos=k},n.prototype.parse=function(s,c,f){var b,k=0,O=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(f===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var M=this._parseStack.handlers,x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(f===!1&&x>-1){for(;x>=0&&(b=M[x](this._params))!==!0;x--)if(b instanceof Promise)return this._parseStack.handlerPos=x,b}this._parseStack.handlers=[];break;case 4:if(f===!1&&x>-1){for(;x>=0&&(b=M[x]())!==!0;x--)if(b instanceof Promise)return this._parseStack.handlerPos=x,b}this._parseStack.handlers=[];break;case 6:if(k=s[this._parseStack.chunkPos],b=this._dcsParser.unhook(k!==24&&k!==26,f))return b;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(k=s[this._parseStack.chunkPos],b=this._oscParser.end(k!==24&&k!==26,f))return b;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var B=D;B<c;++B){switch(k=s[B],(O=this._transitions.table[this.currentState<<8|(k<160?k:_)])>>4){case 2:for(var T=B+1;;++T){if(T>=c||(k=s[T])<32||k>126&&k<_){this._printHandler(s,B,T),B=T-1;break}if(++T>=c||(k=s[T])<32||k>126&&k<_){this._printHandler(s,B,T),B=T-1;break}if(++T>=c||(k=s[T])<32||k>126&&k<_){this._printHandler(s,B,T),B=T-1;break}if(++T>=c||(k=s[T])<32||k>126&&k<_){this._printHandler(s,B,T),B=T-1;break}}break;case 3:this._executeHandlers[k]?this._executeHandlers[k]():this._executeHandlerFb(k),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:B,code:k,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var J=(M=this._csiHandlers[this._collect<<8|k])?M.length-1:-1;J>=0&&(b=M[J](this._params))!==!0;J--)if(b instanceof Promise)return this._preserveStack(3,M,J,O,B),b;J<0&&this._csiHandlerFb(this._collect<<8|k,this._params),this.precedingCodepoint=0;break;case 8:do switch(k){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(k-48)}while(++B<c&&(k=s[B])>47&&k<60);B--;break;case 9:this._collect<<=8,this._collect|=k;break;case 10:for(var j=this._escHandlers[this._collect<<8|k],H=j?j.length-1:-1;H>=0&&(b=j[H]())!==!0;H--)if(b instanceof Promise)return this._preserveStack(4,j,H,O,B),b;H<0&&this._escHandlerFb(this._collect<<8|k),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|k,this._params);break;case 13:for(var N=B+1;;++N)if(N>=c||(k=s[N])===24||k===26||k===27||k>127&&k<_){this._dcsParser.put(s,B,N),B=N-1;break}break;case 14:if(b=this._dcsParser.unhook(k!==24&&k!==26))return this._preserveStack(6,[],0,O,B),b;k===27&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var Z=B+1;;Z++)if(Z>=c||(k=s[Z])<32||k>127&&k<_){this._oscParser.put(s,B,Z),B=Z-1;break}break;case 6:if(b=this._oscParser.end(k!==24&&k!==26))return this._preserveStack(5,[],0,O,B),b;k===27&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&O}},n}(C.Disposable);p.EscapeSequenceParser=l},6242:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OscHandler=p.OscParser=void 0;var g=L(5770),v=L(482),C=[],y=function(){function w(){this._state=0,this._active=C,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return w.prototype.registerHandler=function(h,d){this._handlers[h]===void 0&&(this._handlers[h]=[]);var _=this._handlers[h];return _.push(d),{dispose:function(){var l=_.indexOf(d);l!==-1&&_.splice(l,1)}}},w.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},w.prototype.setHandlerFallback=function(h){this._handlerFb=h},w.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=C},w.prototype.reset=function(){if(this._state===2)for(var h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].end(!1);this._stack.paused=!1,this._active=C,this._id=-1,this._state=0},w.prototype._start=function(){if(this._active=this._handlers[this._id]||C,this._active.length)for(var h=this._active.length-1;h>=0;h--)this._active[h].start();else this._handlerFb(this._id,"START")},w.prototype._put=function(h,d,_){if(this._active.length)for(var l=this._active.length-1;l>=0;l--)this._active[l].put(h,d,_);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(h,d,_))},w.prototype.start=function(){this.reset(),this._state=1},w.prototype.put=function(h,d,_){if(this._state!==3){if(this._state===1)for(;d<_;){var l=h[d++];if(l===59){this._state=2,this._start();break}if(l<48||57<l)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+l-48}this._state===2&&_-d>0&&this._put(h,d,_)}},w.prototype.end=function(h,d){if(d===void 0&&(d=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var _=!1,l=this._active.length-1,a=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,_=d,a=this._stack.fallThrough,this._stack.paused=!1),!a&&_===!1){for(;l>=0&&(_=this._active[l].end(h))!==!0;l--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,_;l--}for(;l>=0;l--)if((_=this._active[l].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",h);this._active=C,this._id=-1,this._state=0}},w}();p.OscParser=y;var m=function(){function w(h){this._handler=h,this._data="",this._hitLimit=!1}return w.prototype.start=function(){this._data="",this._hitLimit=!1},w.prototype.put=function(h,d,_){this._hitLimit||(this._data+=(0,v.utf32ToString)(h,d,_),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},w.prototype.end=function(h){var d=this,_=!1;if(this._hitLimit)_=!1;else if(h&&(_=this._handler(this._data))instanceof Promise)return _.then(function(l){return d._data="",d._hitLimit=!1,l});return this._data="",this._hitLimit=!1,_},w}();p.OscHandler=m},8742:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Params=void 0;var L=2147483647,g=function(){function v(C,y){if(C===void 0&&(C=32),y===void 0&&(y=32),this.maxLength=C,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(C),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(C),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return v.fromArray=function(C){var y=new v;if(!C.length)return y;for(var m=Array.isArray(C[0])?1:0;m<C.length;++m){var w=C[m];if(Array.isArray(w))for(var h=0;h<w.length;++h)y.addSubParam(w[h]);else y.addParam(w)}return y},v.prototype.clone=function(){var C=new v(this.maxLength,this.maxSubParamsLength);return C.params.set(this.params),C.length=this.length,C._subParams.set(this._subParams),C._subParamsLength=this._subParamsLength,C._subParamsIdx.set(this._subParamsIdx),C._rejectDigits=this._rejectDigits,C._rejectSubDigits=this._rejectSubDigits,C._digitIsSub=this._digitIsSub,C},v.prototype.toArray=function(){for(var C=[],y=0;y<this.length;++y){C.push(this.params[y]);var m=this._subParamsIdx[y]>>8,w=255&this._subParamsIdx[y];w-m>0&&C.push(Array.prototype.slice.call(this._subParams,m,w))}return C},v.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},v.prototype.addParam=function(C){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(C<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=C>L?L:C}},v.prototype.addSubParam=function(C){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(C<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=C>L?L:C,this._subParamsIdx[this.length-1]++}},v.prototype.hasSubParams=function(C){return(255&this._subParamsIdx[C])-(this._subParamsIdx[C]>>8)>0},v.prototype.getSubParams=function(C){var y=this._subParamsIdx[C]>>8,m=255&this._subParamsIdx[C];return m-y>0?this._subParams.subarray(y,m):null},v.prototype.getSubParamsAll=function(){for(var C={},y=0;y<this.length;++y){var m=this._subParamsIdx[y]>>8,w=255&this._subParamsIdx[y];w-m>0&&(C[y]=this._subParams.slice(m,w))}return C},v.prototype.addDigit=function(C){var y;if(!(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var m=this._digitIsSub?this._subParams:this.params,w=m[y-1];m[y-1]=~w?Math.min(10*w+C,L):C}},v}();p.Params=g},5741:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AddonManager=void 0;var L=function(){function g(){this._addons=[]}return g.prototype.dispose=function(){for(var v=this._addons.length-1;v>=0;v--)this._addons[v].instance.dispose()},g.prototype.loadAddon=function(v,C){var y=this,m={instance:C,dispose:C.dispose,isDisposed:!1};this._addons.push(m),C.dispose=function(){return y._wrappedAddonDispose(m)},C.activate(v)},g.prototype._wrappedAddonDispose=function(v){if(!v.isDisposed){for(var C=-1,y=0;y<this._addons.length;y++)if(this._addons[y]===v){C=y;break}if(C===-1)throw new Error("Could not dispose an addon that has not been loaded");v.isDisposed=!0,v.dispose.apply(v.instance),this._addons.splice(C,1)}},g}();p.AddonManager=L},8771:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferApiView=void 0;var g=L(3785),v=L(511),C=function(){function y(m,w){this._buffer=m,this.type=w}return y.prototype.init=function(m){return this._buffer=m,this},Object.defineProperty(y.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),y.prototype.getLine=function(m){var w=this._buffer.lines.get(m);if(w)return new g.BufferLineApiView(w)},y.prototype.getNullCell=function(){return new v.CellData},y}();p.BufferApiView=C},3785:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLineApiView=void 0;var g=L(511),v=function(){function C(y){this._line=y}return Object.defineProperty(C.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),C.prototype.getCell=function(y,m){if(!(y<0||y>=this._line.length))return m?(this._line.loadCell(y,m),m):this._line.loadCell(y,new g.CellData)},C.prototype.translateToString=function(y,m,w){return this._line.translateToString(y,m,w)},C}();p.BufferLineApiView=v},8285:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferNamespaceApi=void 0;var g=L(8771),v=L(8460),C=function(){function y(m){var w=this;this._core=m,this._onBufferChange=new v.EventEmitter,this._normal=new g.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new g.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return w._onBufferChange.fire(w.active)})}return Object.defineProperty(y.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),y}();p.BufferNamespaceApi=C},7975:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ParserApi=void 0;var L=function(){function g(v){this._core=v}return g.prototype.registerCsiHandler=function(v,C){return this._core.registerCsiHandler(v,function(y){return C(y.toArray())})},g.prototype.addCsiHandler=function(v,C){return this.registerCsiHandler(v,C)},g.prototype.registerDcsHandler=function(v,C){return this._core.registerDcsHandler(v,function(y,m){return C(y,m.toArray())})},g.prototype.addDcsHandler=function(v,C){return this.registerDcsHandler(v,C)},g.prototype.registerEscHandler=function(v,C){return this._core.registerEscHandler(v,C)},g.prototype.addEscHandler=function(v,C){return this.registerEscHandler(v,C)},g.prototype.registerOscHandler=function(v,C){return this._core.registerOscHandler(v,C)},g.prototype.addOscHandler=function(v,C){return this.registerOscHandler(v,C)},g}();p.ParserApi=L},7090:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeApi=void 0;var L=function(){function g(v){this._core=v}return g.prototype.register=function(v){this._core.unicodeService.register(v)},Object.defineProperty(g.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(v){this._core.unicodeService.activeVersion=v},enumerable:!1,configurable:!0}),g}();p.UnicodeApi=L},744:function(K,p,L){var g,v=this&&this.__extends||(g=function(l,a){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])},g(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=l}g(l,a),l.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}),C=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},y=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferService=p.MINIMUM_ROWS=p.MINIMUM_COLS=void 0;var m=L(2585),w=L(5295),h=L(8460),d=L(844);p.MINIMUM_COLS=2,p.MINIMUM_ROWS=1;var _=function(l){function a(n){var s=l.call(this)||this;return s._optionsService=n,s.isUserScrolling=!1,s._onResize=new h.EventEmitter,s._onScroll=new h.EventEmitter,s.cols=Math.max(n.options.cols||0,p.MINIMUM_COLS),s.rows=Math.max(n.options.rows||0,p.MINIMUM_ROWS),s.buffers=new w.BufferSet(n,s),s}return v(a,l),Object.defineProperty(a.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){l.prototype.dispose.call(this),this.buffers.dispose()},a.prototype.resize=function(n,s){this.cols=n,this.rows=s,this.buffers.resize(n,s),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:n,rows:s})},a.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},a.prototype.scroll=function(n,s){s===void 0&&(s=!1);var c,f=this.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=f.getBlankLine(n,s),this._cachedBlankLine=c),c.isWrapped=s;var b=f.ybase+f.scrollTop,k=f.ybase+f.scrollBottom;if(f.scrollTop===0){var O=f.lines.isFull;k===f.lines.length-1?O?f.lines.recycle().copyFrom(c):f.lines.push(c.clone()):f.lines.splice(k+1,0,c.clone()),O?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{var D=k-b+1;f.lines.shiftElements(b+1,D-1,-1),f.lines.set(k,c.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)},a.prototype.scrollLines=function(n,s,c){var f=this.buffer;if(n<0){if(f.ydisp===0)return;this.isUserScrolling=!0}else n+f.ydisp>=f.ybase&&(this.isUserScrolling=!1);var b=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+n,f.ybase),0),b!==f.ydisp&&(s||this._onScroll.fire(f.ydisp))},a.prototype.scrollPages=function(n){this.scrollLines(n*(this.rows-1))},a.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},a.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},a.prototype.scrollToLine=function(n){var s=n-this.buffer.ydisp;s!==0&&this.scrollLines(s)},C([y(0,m.IOptionsService)],a)}(d.Disposable);p.BufferService=_},7994:(K,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CharsetService=void 0;var L=function(){function g(){this.glevel=0,this._charsets=[]}return g.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},g.prototype.setgLevel=function(v){this.glevel=v,this.charset=this._charsets[v]},g.prototype.setgCharset=function(v,C){this._charsets[v]=C,this.glevel===v&&(this.charset=C)},g}();p.CharsetService=L},1753:function(K,p,L){var g=this&&this.__decorate||function(l,a,n,s){var c,f=arguments.length,b=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,n):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,a,n,s);else for(var k=l.length-1;k>=0;k--)(c=l[k])&&(b=(f<3?c(b):f>3?c(a,n,b):c(a,n))||b);return f>3&&b&&Object.defineProperty(a,n,b),b},v=this&&this.__param||function(l,a){return function(n,s){a(n,s,l)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreMouseService=void 0;var C=L(2585),y=L(8460),m={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(l){return l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)}},VT200:{events:19,restrict:function(l){return l.action!==32}},DRAG:{events:23,restrict:function(l){return l.action!==32||l.button!==3}},ANY:{events:31,restrict:function(l){return!0}}};function w(l,a){var n=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(n|=64,n|=l.action):(n|=3&l.button,4&l.button&&(n|=64),8&l.button&&(n|=128),l.action===32?n|=32:l.action!==0||a||(n|=3)),n}var h=String.fromCharCode,d={DEFAULT:function(l){var a=[w(l,!1)+32,l.col+32,l.row+32];return a[0]>255||a[1]>255||a[2]>255?"":"\x1B[M"+h(a[0])+h(a[1])+h(a[2])},SGR:function(l){var a=l.action===0&&l.button!==4?"m":"M";return"\x1B[<"+w(l,!0)+";"+l.col+";"+l.row+a}},_=function(){function l(a,n){this._bufferService=a,this._coreService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new y.EventEmitter,this._lastEvent=null;for(var s=0,c=Object.keys(m);s<c.length;s++){var f=c[s];this.addProtocol(f,m[f])}for(var b=0,k=Object.keys(d);b<k.length;b++){var O=k[b];this.addEncoding(O,d[O])}this.reset()}return l.prototype.addProtocol=function(a,n){this._protocols[a]=n},l.prototype.addEncoding=function(a,n){this._encodings[a]=n},Object.defineProperty(l.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(a){if(!this._protocols[a])throw new Error('unknown protocol "'+a+'"');this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(a){if(!this._encodings[a])throw new Error('unknown encoding "'+a+'"');this._activeEncoding=a},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(l.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),l.prototype.triggerMouseEvent=function(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,a))||!this._protocols[this._activeProtocol].restrict(a))return!1;var n=this._encodings[this._activeEncoding](a);return n&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(n):this._coreService.triggerDataEvent(n,!0)),this._lastEvent=a,!0},l.prototype.explainEvents=function(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}},l.prototype._compareEvents=function(a,n){return a.col===n.col&&a.row===n.row&&a.button===n.button&&a.action===n.action&&a.ctrl===n.ctrl&&a.alt===n.alt&&a.shift===n.shift},g([v(0,C.IBufferService),v(1,C.ICoreService)],l)}();p.CoreMouseService=_},6975:function(K,p,L){var g,v=this&&this.__extends||(g=function(n,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(c[b]=f[b])},g(n,s)},function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function c(){this.constructor=n}g(n,s),n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}),C=this&&this.__decorate||function(n,s,c,f){var b,k=arguments.length,O=k<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(n,s,c,f);else for(var D=n.length-1;D>=0;D--)(b=n[D])&&(O=(k<3?b(O):k>3?b(s,c,O):b(s,c))||O);return k>3&&O&&Object.defineProperty(s,c,O),O},y=this&&this.__param||function(n,s){return function(c,f){s(c,f,n)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreService=void 0;var m=L(2585),w=L(8460),h=L(1439),d=L(844),_=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),a=function(n){function s(c,f,b,k){var O=n.call(this)||this;return O._bufferService=f,O._logService=b,O._optionsService=k,O.isCursorInitialized=!1,O.isCursorHidden=!1,O._onData=O.register(new w.EventEmitter),O._onUserInput=O.register(new w.EventEmitter),O._onBinary=O.register(new w.EventEmitter),O._scrollToBottom=c,O.register({dispose:function(){return O._scrollToBottom=void 0}}),O.modes=(0,h.clone)(_),O.decPrivateModes=(0,h.clone)(l),O}return v(s,n),Object.defineProperty(s.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(l)},s.prototype.triggerDataEvent=function(c,f){if(f===void 0&&(f=!1),!this._optionsService.options.disableStdin){var b=this._bufferService.buffer;b.ybase!==b.ydisp&&this._scrollToBottom(),f&&this._onUserInput.fire(),this._logService.debug('sending data "'+c+'"',function(){return c.split("").map(function(k){return k.charCodeAt(0)})}),this._onData.fire(c)}},s.prototype.triggerBinaryEvent=function(c){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+c+'"',function(){return c.split("").map(function(f){return f.charCodeAt(0)})}),this._onBinary.fire(c))},C([y(1,m.IBufferService),y(2,m.ILogService),y(3,m.IOptionsService)],s)}(d.Disposable);p.CoreService=a},3730:function(K,p,L){var g=this&&this.__decorate||function(m,w,h,d){var _,l=arguments.length,a=l<3?w:d===null?d=Object.getOwnPropertyDescriptor(w,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(m,w,h,d);else for(var n=m.length-1;n>=0;n--)(_=m[n])&&(a=(l<3?_(a):l>3?_(w,h,a):_(w,h))||a);return l>3&&a&&Object.defineProperty(w,h,a),a},v=this&&this.__param||function(m,w){return function(h,d){w(h,d,m)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DirtyRowService=void 0;var C=L(2585),y=function(){function m(w){this._bufferService=w,this.clearRange()}return Object.defineProperty(m.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),m.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},m.prototype.markDirty=function(w){w<this._start?this._start=w:w>this._end&&(this._end=w)},m.prototype.markRangeDirty=function(w,h){if(w>h){var d=w;w=h,h=d}w<this._start&&(this._start=w),h>this._end&&(this._end=h)},m.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},g([v(0,C.IBufferService)],m)}();p.DirtyRowService=y},4348:function(K,p,L){var g=this&&this.__spreadArray||function(w,h,d){if(d||arguments.length===2)for(var _,l=0,a=h.length;l<a;l++)!_&&l in h||(_||(_=Array.prototype.slice.call(h,0,l)),_[l]=h[l]);return w.concat(_||Array.prototype.slice.call(h))};Object.defineProperty(p,"__esModule",{value:!0}),p.InstantiationService=p.ServiceCollection=void 0;var v=L(2585),C=L(8343),y=function(){function w(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];this._entries=new Map;for(var _=0,l=h;_<l.length;_++){var a=l[_],n=a[0],s=a[1];this.set(n,s)}}return w.prototype.set=function(h,d){var _=this._entries.get(h);return this._entries.set(h,d),_},w.prototype.forEach=function(h){this._entries.forEach(function(d,_){return h(_,d)})},w.prototype.has=function(h){return this._entries.has(h)},w.prototype.get=function(h){return this._entries.get(h)},w}();p.ServiceCollection=y;var m=function(){function w(){this._services=new y,this._services.set(v.IInstantiationService,this)}return w.prototype.setService=function(h,d){this._services.set(h,d)},w.prototype.getService=function(h){return this._services.get(h)},w.prototype.createInstance=function(h){for(var d=[],_=1;_<arguments.length;_++)d[_-1]=arguments[_];for(var l=(0,C.getServiceDependencies)(h).sort(function(k,O){return k.index-O.index}),a=[],n=0,s=l;n<s.length;n++){var c=s[n],f=this._services.get(c.id);if(!f)throw new Error("[createInstance] "+h.name+" depends on UNKNOWN service "+c.id+".");a.push(f)}var b=l.length>0?l[0].index:d.length;if(d.length!==b)throw new Error("[createInstance] First service dependency of "+h.name+" at position "+(b+1)+" conflicts with "+d.length+" static arguments");return new(h.bind.apply(h,g([void 0],g(g([],d,!0),a,!0),!1)))},w}();p.InstantiationService=m},7866:function(K,p,L){var g=this&&this.__decorate||function(h,d,_,l){var a,n=arguments.length,s=n<3?d:l===null?l=Object.getOwnPropertyDescriptor(d,_):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(h,d,_,l);else for(var c=h.length-1;c>=0;c--)(a=h[c])&&(s=(n<3?a(s):n>3?a(d,_,s):a(d,_))||s);return n>3&&s&&Object.defineProperty(d,_,s),s},v=this&&this.__param||function(h,d){return function(_,l){d(_,l,h)}},C=this&&this.__spreadArray||function(h,d,_){if(_||arguments.length===2)for(var l,a=0,n=d.length;a<n;a++)!l&&a in d||(l||(l=Array.prototype.slice.call(d,0,a)),l[a]=d[a]);return h.concat(l||Array.prototype.slice.call(d))};Object.defineProperty(p,"__esModule",{value:!0}),p.LogService=void 0;var y=L(2585),m={debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF},w=function(){function h(d){var _=this;this._optionsService=d,this.logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(l){l==="logLevel"&&_._updateLogLevel()})}return h.prototype._updateLogLevel=function(){this.logLevel=m[this._optionsService.options.logLevel]},h.prototype._evalLazyOptionalParams=function(d){for(var _=0;_<d.length;_++)typeof d[_]=="function"&&(d[_]=d[_]())},h.prototype._log=function(d,_,l){this._evalLazyOptionalParams(l),d.call.apply(d,C([console,"xterm.js: "+_],l,!1))},h.prototype.debug=function(d){for(var _=[],l=1;l<arguments.length;l++)_[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.DEBUG&&this._log(console.log,d,_)},h.prototype.info=function(d){for(var _=[],l=1;l<arguments.length;l++)_[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.INFO&&this._log(console.info,d,_)},h.prototype.warn=function(d){for(var _=[],l=1;l<arguments.length;l++)_[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.WARN&&this._log(console.warn,d,_)},h.prototype.error=function(d){for(var _=[],l=1;l<arguments.length;l++)_[l-1]=arguments[l];this.logLevel<=y.LogLevelEnum.ERROR&&this._log(console.error,d,_)},g([v(0,y.IOptionsService)],h)}();p.LogService=w},7302:function(K,p,L){var g=this&&this.__assign||function(){return g=Object.assign||function(w){for(var h,d=1,_=arguments.length;d<_;d++)for(var l in h=arguments[d])Object.prototype.hasOwnProperty.call(h,l)&&(w[l]=h[l]);return w},g.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0}),p.OptionsService=p.DEFAULT_OPTIONS=p.DEFAULT_BELL_SOUND=void 0;var v=L(8460),C=L(6114);p.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",p.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:p.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:C.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var y=["normal","bold","100","200","300","400","500","600","700","800","900"],m=function(){function w(h){for(var d in this._onOptionChange=new v.EventEmitter,this._options=g({},p.DEFAULT_OPTIONS),h)if(d in this._options)try{var _=h[d];this._options[d]=this._sanitizeAndValidateOption(d,_)}catch(l){console.error(l)}this.options=this._setupOptions(this._options)}return Object.defineProperty(w.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),w.prototype._setupOptions=function(h){var d=this,_=g({},h),l=function(n){Object.defineProperty(_,n,{get:function(){if(!(n in p.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');return d._options[n]},set:function(s){if(!(n in p.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');s=d._sanitizeAndValidateOption(n,s),d._options[n]!==s&&(d._options[n]=s,d._onOptionChange.fire(n))}})};for(var a in _)l(a);return _},w.prototype.setOption=function(h,d){this.options[h]=d},w.prototype._sanitizeAndValidateOption=function(h,d){switch(h){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":d||(d=p.DEFAULT_OPTIONS[h]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=y.includes(d)?d:p.DEFAULT_OPTIONS[h];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(h+" cannot be less than 1, value: "+d);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(h+" cannot be less than 0, value: "+d);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(h+" cannot be less than or equal to 0, value: "+d);case"rows":case"cols":if(!d&&d!==0)throw new Error(h+" must be numeric, value: "+d)}return d},w.prototype.getOption=function(h){return this.options[h]},w}();p.OptionsService=m},8343:(K,p)=>{function L(g,v,C){v.di$target===v?v.di$dependencies.push({id:g,index:C}):(v.di$dependencies=[{id:g,index:C}],v.di$target=v)}Object.defineProperty(p,"__esModule",{value:!0}),p.createDecorator=p.getServiceDependencies=p.serviceRegistry=void 0,p.serviceRegistry=new Map,p.getServiceDependencies=function(g){return g.di$dependencies||[]},p.createDecorator=function(g){if(p.serviceRegistry.has(g))return p.serviceRegistry.get(g);var v=function(C,y,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");L(v,C,m)};return v.toString=function(){return g},p.serviceRegistry.set(g,v),v}},2585:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.IUnicodeService=p.IOptionsService=p.ILogService=p.LogLevelEnum=p.IInstantiationService=p.IDirtyRowService=p.ICharsetService=p.ICoreService=p.ICoreMouseService=p.IBufferService=void 0;var g,v=L(8343);p.IBufferService=(0,v.createDecorator)("BufferService"),p.ICoreMouseService=(0,v.createDecorator)("CoreMouseService"),p.ICoreService=(0,v.createDecorator)("CoreService"),p.ICharsetService=(0,v.createDecorator)("CharsetService"),p.IDirtyRowService=(0,v.createDecorator)("DirtyRowService"),p.IInstantiationService=(0,v.createDecorator)("InstantiationService"),(g=p.LogLevelEnum||(p.LogLevelEnum={}))[g.DEBUG=0]="DEBUG",g[g.INFO=1]="INFO",g[g.WARN=2]="WARN",g[g.ERROR=3]="ERROR",g[g.OFF=4]="OFF",p.ILogService=(0,v.createDecorator)("LogService"),p.IOptionsService=(0,v.createDecorator)("OptionsService"),p.IUnicodeService=(0,v.createDecorator)("UnicodeService")},1480:(K,p,L)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeService=void 0;var g=L(8460),v=L(225),C=function(){function y(){this._providers=Object.create(null),this._active="",this._onChange=new g.EventEmitter;var m=new v.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}return Object.defineProperty(y.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"activeVersion",{get:function(){return this._active},set:function(m){if(!this._providers[m])throw new Error('unknown Unicode version "'+m+'"');this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)},enumerable:!1,configurable:!0}),y.prototype.register=function(m){this._providers[m.version]=m},y.prototype.wcwidth=function(m){return this._activeProvider.wcwidth(m)},y.prototype.getStringCellWidth=function(m){for(var w=0,h=m.length,d=0;d<h;++d){var _=m.charCodeAt(d);if(55296<=_&&_<=56319){if(++d>=h)return w+this.wcwidth(_);var l=m.charCodeAt(d);56320<=l&&l<=57343?_=1024*(_-55296)+l-56320+65536:w+=this.wcwidth(l)}w+=this.wcwidth(_)}return w},y}();p.UnicodeService=C}},A={};function W(K){var p=A[K];if(p!==void 0)return p.exports;var L=A[K]={exports:{}};return V[K].call(L.exports,L,L.exports,W),L.exports}var q={};return(()=>{var K=q;Object.defineProperty(K,"__esModule",{value:!0}),K.Terminal=void 0;var p=W(3236),L=W(9042),g=W(7975),v=W(7090),C=W(5741),y=W(8285),m=["cols","rows"],w=function(){function h(d){var _=this;this._core=new p.Terminal(d),this._addonManager=new C.AddonManager,this._publicOptions={};var l=function(s){Object.defineProperty(a._publicOptions,s,{get:function(){return _._core.options[s]},set:function(c){_._checkReadonlyOptions(s),_._core.options[s]=c}})},a=this;for(var n in this._core.options)l(n)}return h.prototype._checkReadonlyOptions=function(d){if(m.includes(d))throw new Error('Option "'+d+'" can only be set in the constructor')},h.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(h.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new g.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"unicode",{get:function(){return this._checkProposedApi(),new v.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new y.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"modes",{get:function(){var d=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"options",{get:function(){return this._publicOptions},set:function(d){for(var _ in d)this._publicOptions[_]=d[_]},enumerable:!1,configurable:!0}),h.prototype.blur=function(){this._core.blur()},h.prototype.focus=function(){this._core.focus()},h.prototype.resize=function(d,_){this._verifyIntegers(d,_),this._core.resize(d,_)},h.prototype.open=function(d){this._core.open(d)},h.prototype.attachCustomKeyEventHandler=function(d){this._core.attachCustomKeyEventHandler(d)},h.prototype.registerLinkMatcher=function(d,_,l){return this._checkProposedApi(),this._core.registerLinkMatcher(d,_,l)},h.prototype.deregisterLinkMatcher=function(d){this._checkProposedApi(),this._core.deregisterLinkMatcher(d)},h.prototype.registerLinkProvider=function(d){return this._checkProposedApi(),this._core.registerLinkProvider(d)},h.prototype.registerCharacterJoiner=function(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)},h.prototype.deregisterCharacterJoiner=function(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)},h.prototype.registerMarker=function(d){return this._checkProposedApi(),this._verifyIntegers(d),this._core.addMarker(d)},h.prototype.addMarker=function(d){return this.registerMarker(d)},h.prototype.hasSelection=function(){return this._core.hasSelection()},h.prototype.select=function(d,_,l){this._verifyIntegers(d,_,l),this._core.select(d,_,l)},h.prototype.getSelection=function(){return this._core.getSelection()},h.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},h.prototype.clearSelection=function(){this._core.clearSelection()},h.prototype.selectAll=function(){this._core.selectAll()},h.prototype.selectLines=function(d,_){this._verifyIntegers(d,_),this._core.selectLines(d,_)},h.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},h.prototype.scrollLines=function(d){this._verifyIntegers(d),this._core.scrollLines(d)},h.prototype.scrollPages=function(d){this._verifyIntegers(d),this._core.scrollPages(d)},h.prototype.scrollToTop=function(){this._core.scrollToTop()},h.prototype.scrollToBottom=function(){this._core.scrollToBottom()},h.prototype.scrollToLine=function(d){this._verifyIntegers(d),this._core.scrollToLine(d)},h.prototype.clear=function(){this._core.clear()},h.prototype.write=function(d,_){this._core.write(d,_)},h.prototype.writeUtf8=function(d,_){this._core.write(d,_)},h.prototype.writeln=function(d,_){this._core.write(d),this._core.write(`\r
`,_)},h.prototype.paste=function(d){this._core.paste(d)},h.prototype.getOption=function(d){return this._core.optionsService.getOption(d)},h.prototype.setOption=function(d,_){this._checkReadonlyOptions(d),this._core.optionsService.setOption(d,_)},h.prototype.refresh=function(d,_){this._verifyIntegers(d,_),this._core.refresh(d,_)},h.prototype.reset=function(){this._core.reset()},h.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},h.prototype.loadAddon=function(d){return this._addonManager.loadAddon(this,d)},Object.defineProperty(h,"strings",{get:function(){return L},enumerable:!1,configurable:!0}),h.prototype._verifyIntegers=function(){for(var d=[],_=0;_<arguments.length;_++)d[_]=arguments[_];for(var l=0,a=d;l<a.length;l++){var n=a[l];if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}},h}();K.Terminal=w})(),q})()})});var Wl=ar((Hl,Fl)=>{(function(V){typeof Hl=="object"&&typeof Fl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";var A={},W=/[^\s\u00a0]/,q=V.Pos,K=V.cmpPos;function p(v){var C=v.search(W);return C==-1?0:C}V.commands.toggleComment=function(v){v.toggleComment()},V.defineExtension("toggleComment",function(v){v||(v=A);for(var C=this,y=1/0,m=this.listSelections(),w=null,h=m.length-1;h>=0;h--){var d=m[h].from(),_=m[h].to();d.line>=y||(_.line>=y&&(_=q(y,0)),y=d.line,w==null?C.uncomment(d,_,v)?w="un":(C.lineComment(d,_,v),w="line"):w=="un"?C.uncomment(d,_,v):C.lineComment(d,_,v))}});function L(v,C,y){return/\bstring\b/.test(v.getTokenTypeAt(q(C.line,0)))&&!/^[\'\"\`]/.test(y)}function g(v,C){var y=v.getMode();return y.useInnerComments===!1||!y.innerMode?y:v.getModeAt(C)}V.defineExtension("lineComment",function(v,C,y){y||(y=A);var m=this,w=g(m,v),h=m.getLine(v.line);if(!(h==null||L(m,v,h))){var d=y.lineComment||w.lineComment;if(!d){(y.blockCommentStart||w.blockCommentStart)&&(y.fullLines=!0,m.blockComment(v,C,y));return}var _=Math.min(C.ch!=0||C.line==v.line?C.line+1:C.line,m.lastLine()+1),l=y.padding==null?" ":y.padding,a=y.commentBlankLines||v.line==C.line;m.operation(function(){if(y.indent){for(var n=null,s=v.line;s<_;++s){var c=m.getLine(s),f=c.slice(0,p(c));(n==null||n.length>f.length)&&(n=f)}for(var s=v.line;s<_;++s){var c=m.getLine(s),b=n.length;!a&&!W.test(c)||(c.slice(0,b)!=n&&(b=p(c)),m.replaceRange(n+d+l,q(s,0),q(s,b)))}}else for(var s=v.line;s<_;++s)(a||W.test(m.getLine(s)))&&m.replaceRange(d+l,q(s,0))})}}),V.defineExtension("blockComment",function(v,C,y){y||(y=A);var m=this,w=g(m,v),h=y.blockCommentStart||w.blockCommentStart,d=y.blockCommentEnd||w.blockCommentEnd;if(!h||!d){(y.lineComment||w.lineComment)&&y.fullLines!=!1&&m.lineComment(v,C,y);return}if(!/\bcomment\b/.test(m.getTokenTypeAt(q(v.line,0)))){var _=Math.min(C.line,m.lastLine());_!=v.line&&C.ch==0&&W.test(m.getLine(_))&&--_;var l=y.padding==null?" ":y.padding;v.line>_||m.operation(function(){if(y.fullLines!=!1){var a=W.test(m.getLine(_));m.replaceRange(l+d,q(_)),m.replaceRange(h+l,q(v.line,0));var n=y.blockCommentLead||w.blockCommentLead;if(n!=null)for(var s=v.line+1;s<=_;++s)(s!=_||a)&&m.replaceRange(n+l,q(s,0))}else{var c=K(m.getCursor("to"),C)==0,f=!m.somethingSelected();m.replaceRange(d,C),c&&m.setSelection(f?C:m.getCursor("from"),C),m.replaceRange(h,v)}})}}),V.defineExtension("uncomment",function(v,C,y){y||(y=A);var m=this,w=g(m,v),h=Math.min(C.ch!=0||C.line==v.line?C.line:C.line-1,m.lastLine()),d=Math.min(v.line,h),_=y.lineComment||w.lineComment,l=[],a=y.padding==null?" ":y.padding,n;e:{if(!_)break e;for(var s=d;s<=h;++s){var c=m.getLine(s),f=c.indexOf(_);if(f>-1&&!/comment/.test(m.getTokenTypeAt(q(s,f+1)))&&(f=-1),f==-1&&W.test(c)||f>-1&&W.test(c.slice(0,f)))break e;l.push(c)}if(m.operation(function(){for(var Z=d;Z<=h;++Z){var Q=l[Z-d],ae=Q.indexOf(_),se=ae+_.length;ae<0||(Q.slice(se,se+a.length)==a&&(se+=a.length),n=!0,m.replaceRange("",q(Z,ae),q(Z,se)))}}),n)return!0}var b=y.blockCommentStart||w.blockCommentStart,k=y.blockCommentEnd||w.blockCommentEnd;if(!b||!k)return!1;var O=y.blockCommentLead||w.blockCommentLead,D=m.getLine(d),M=D.indexOf(b);if(M==-1)return!1;var x=h==d?D:m.getLine(h),B=x.indexOf(k,h==d?M+b.length:0),T=q(d,M+1),J=q(h,B+1);if(B==-1||!/comment/.test(m.getTokenTypeAt(T))||!/comment/.test(m.getTokenTypeAt(J))||m.getRange(T,J,`
`).indexOf(k)>-1)return!1;var j=D.lastIndexOf(b,v.ch),H=j==-1?-1:D.slice(0,v.ch).indexOf(k,j+b.length);if(j!=-1&&H!=-1&&H+k.length!=v.ch)return!1;H=x.indexOf(k,C.ch);var N=x.slice(C.ch).lastIndexOf(b,H-C.ch);return j=H==-1||N==-1?-1:C.ch+N,H!=-1&&j!=-1&&j!=C.ch?!1:(m.operation(function(){m.replaceRange("",q(h,B-(a&&x.slice(B-a.length,B)==a?a.length:0)),q(h,B+k.length));var Z=M+b.length;if(a&&D.slice(Z,Z+a.length)==a&&(Z+=a.length),m.replaceRange("",q(d,M),q(d,Z)),O)for(var Q=d+1;Q<=h;++Q){var ae=m.getLine(Q),se=ae.indexOf(O);if(!(se==-1||W.test(ae.slice(0,se)))){var me=se+O.length;a&&ae.slice(me,me+a.length)==a&&(me+=a.length),m.replaceRange("",q(Q,se),q(Q,me))}}}),!0)})})});var Ul=ar((Nl,jl)=>{(function(V){typeof Nl=="object"&&typeof jl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){var A=/\S/g,W=String.prototype.repeat||function(L){return Array(L+1).join(this)};function q(L){if(L.getOption("disableInput"))return V.Pass;for(var g=L.listSelections(),v,C=[],y=0;y<g.length;y++){var m=g[y].head;if(!/\bcomment\b/.test(L.getTokenTypeAt(m)))return V.Pass;var w=L.getModeAt(m);if(!v)v=w;else if(v!=w)return V.Pass;var h=null,d,_,l=v.blockCommentStart,a=v.lineComment;if(l&&v.blockCommentContinue){d=L.getLine(m.line);var n=d.lastIndexOf(v.blockCommentEnd,m.ch-v.blockCommentEnd.length);if(!(n!=-1&&n==m.ch-v.blockCommentEnd.length||a&&(_=d.lastIndexOf(a,m.ch-1))>-1&&/\bcomment\b/.test(L.getTokenTypeAt({line:m.line,ch:_+1}))))if(m.ch>=l.length&&(_=d.lastIndexOf(l,m.ch-l.length))>-1&&_>n)if(K(0,d)>=_)h=d.slice(0,_);else{var s=L.options.tabSize,c;_=V.countColumn(d,_,s),h=L.options.indentWithTabs?W.call("	",c=Math.floor(_/s))+W.call(" ",_-s*c):W.call(" ",_)}else(_=d.indexOf(v.blockCommentContinue))>-1&&_<=m.ch&&_<=K(0,d)&&(h=d.slice(0,_));h!=null&&(h+=v.blockCommentContinue)}if(h==null&&a&&p(L)){if(d==null&&(d=L.getLine(m.line)),_=d.indexOf(a),!m.ch&&!_)h="";else if(_>-1&&K(0,d)>=_){if(h=K(m.ch,d)>-1,!h){var f=L.getLine(m.line+1)||"",b=f.indexOf(a);h=b>-1&&K(0,f)>=b||null}h&&(h=d.slice(0,_)+a+d.slice(_+a.length).match(/^\s*/)[0])}}if(h==null)return V.Pass;C[y]=`
`+h}L.operation(function(){for(var k=g.length-1;k>=0;k--)L.replaceRange(C[k],g[k].from(),g[k].to(),"+insert")})}function K(L,g){A.lastIndex=L;var v=A.exec(g);return v?v.index:-1}function p(L){var g=L.getOption("continueComments");return g&&typeof g=="object"?g.continueLineComment!==!1:!0}V.defineOption("continueComments",null,function(L,g,v){if(v&&v!=V.Init&&L.removeKeyMap("continueComment"),g){var C="Enter";typeof g=="string"?C=g:typeof g=="object"&&g.key&&(C=g.key);var y={name:"continueComment"};y[C]=q,L.addKeyMap(y)}})})});var Kl=ar((zl,ql)=>{(function(V){typeof zl=="object"&&typeof ql=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){V.defineOption("placeholder","",function(g,v,C){var y=C&&C!=V.Init;if(v&&!y)g.on("blur",K),g.on("change",p),g.on("swapDoc",p),V.on(g.getInputField(),"compositionupdate",g.state.placeholderCompose=function(){q(g)}),p(g);else if(!v&&y){g.off("blur",K),g.off("change",p),g.off("swapDoc",p),V.off(g.getInputField(),"compositionupdate",g.state.placeholderCompose),A(g);var m=g.getWrapperElement();m.className=m.className.replace(" CodeMirror-empty","")}v&&!g.hasFocus()&&K(g)});function A(g){g.state.placeholder&&(g.state.placeholder.parentNode.removeChild(g.state.placeholder),g.state.placeholder=null)}function W(g){A(g);var v=g.state.placeholder=document.createElement("pre");v.style.cssText="height: 0; overflow: visible",v.style.direction=g.getOption("direction"),v.className="CodeMirror-placeholder CodeMirror-line-like";var C=g.getOption("placeholder");typeof C=="string"&&(C=document.createTextNode(C)),v.appendChild(C),g.display.lineSpace.insertBefore(v,g.display.lineSpace.firstChild)}function q(g){setTimeout(function(){var v=!1;if(g.lineCount()==1){var C=g.getInputField();v=C.nodeName=="TEXTAREA"?!g.getLine(0).length:!/[^\u200b]/.test(C.querySelector(".CodeMirror-line").textContent)}v?W(g):A(g)},20)}function K(g){L(g)&&W(g)}function p(g){var v=g.getWrapperElement(),C=L(g);v.className=v.className.replace(" CodeMirror-empty","")+(C?" CodeMirror-empty":""),C?W(g):A(g)}function L(g){return g.lineCount()===1&&g.getLine(0)===""}})});var Yl=ar((Gl,Xl)=>{(function(V){typeof Gl=="object"&&typeof Xl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){var A={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},W=V.Pos;V.defineOption("autoCloseBrackets",!1,function(_,l,a){a&&a!=V.Init&&(_.removeKeyMap(K),_.state.closeBrackets=null),l&&(p(q(l,"pairs")),_.state.closeBrackets=l,_.addKeyMap(K))});function q(_,l){return l=="pairs"&&typeof _=="string"?_:typeof _=="object"&&_[l]!=null?_[l]:A[l]}var K={Backspace:v,Enter:C};function p(_){for(var l=0;l<_.length;l++){var a=_.charAt(l),n="'"+a+"'";K[n]||(K[n]=L(a))}}p(A.pairs+"`");function L(_){return function(l){return w(l,_)}}function g(_){var l=_.state.closeBrackets;if(!l||l.override)return l;var a=_.getModeAt(_.getCursor());return a.closeBrackets||l}function v(_){var l=g(_);if(!l||_.getOption("disableInput"))return V.Pass;for(var a=q(l,"pairs"),n=_.listSelections(),s=0;s<n.length;s++){if(!n[s].empty())return V.Pass;var c=h(_,n[s].head);if(!c||a.indexOf(c)%2!=0)return V.Pass}for(var s=n.length-1;s>=0;s--){var f=n[s].head;_.replaceRange("",W(f.line,f.ch-1),W(f.line,f.ch+1),"+delete")}}function C(_){var l=g(_),a=l&&q(l,"explode");if(!a||_.getOption("disableInput"))return V.Pass;for(var n=_.listSelections(),s=0;s<n.length;s++){if(!n[s].empty())return V.Pass;var c=h(_,n[s].head);if(!c||a.indexOf(c)%2!=0)return V.Pass}_.operation(function(){var f=_.lineSeparator()||`
`;_.replaceSelection(f+f,null),y(_,-1),n=_.listSelections();for(var b=0;b<n.length;b++){var k=n[b].head.line;_.indentLine(k,null,!0),_.indentLine(k+1,null,!0)}})}function y(_,l){for(var a=[],n=_.listSelections(),s=0,c=0;c<n.length;c++){var f=n[c];f.head==_.getCursor()&&(s=c);var b=f.head.ch||l>0?{line:f.head.line,ch:f.head.ch+l}:{line:f.head.line-1};a.push({anchor:b,head:b})}_.setSelections(a,s)}function m(_){var l=V.cmpPos(_.anchor,_.head)>0;return{anchor:new W(_.anchor.line,_.anchor.ch+(l?-1:1)),head:new W(_.head.line,_.head.ch+(l?1:-1))}}function w(_,l){var a=g(_);if(!a||_.getOption("disableInput"))return V.Pass;var n=q(a,"pairs"),s=n.indexOf(l);if(s==-1)return V.Pass;for(var c=q(a,"closeBefore"),f=q(a,"triples"),b=n.charAt(s+1)==l,k=_.listSelections(),O=s%2==0,D,M=0;M<k.length;M++){var x=k[M],B=x.head,T,J=_.getRange(B,W(B.line,B.ch+1));if(O&&!x.empty())T="surround";else if((b||!O)&&J==l)b&&d(_,B)?T="both":f.indexOf(l)>=0&&_.getRange(B,W(B.line,B.ch+3))==l+l+l?T="skipThree":T="skip";else if(b&&B.ch>1&&f.indexOf(l)>=0&&_.getRange(W(B.line,B.ch-2),B)==l+l){if(B.ch>2&&/\bstring/.test(_.getTokenTypeAt(W(B.line,B.ch-2))))return V.Pass;T="addFour"}else if(b){var j=B.ch==0?" ":_.getRange(W(B.line,B.ch-1),B);if(!V.isWordChar(J)&&j!=l&&!V.isWordChar(j))T="both";else return V.Pass}else if(O&&(J.length===0||/\s/.test(J)||c.indexOf(J)>-1))T="both";else return V.Pass;if(!D)D=T;else if(D!=T)return V.Pass}var H=s%2?n.charAt(s-1):l,N=s%2?l:n.charAt(s+1);_.operation(function(){if(D=="skip")y(_,1);else if(D=="skipThree")y(_,3);else if(D=="surround"){for(var Z=_.getSelections(),Q=0;Q<Z.length;Q++)Z[Q]=H+Z[Q]+N;_.replaceSelections(Z,"around"),Z=_.listSelections().slice();for(var Q=0;Q<Z.length;Q++)Z[Q]=m(Z[Q]);_.setSelections(Z)}else D=="both"?(_.replaceSelection(H+N,null),_.triggerElectric(H+N),y(_,-1)):D=="addFour"&&(_.replaceSelection(H+H+H+H,"before"),y(_,1))})}function h(_,l){var a=_.getRange(W(l.line,l.ch-1),W(l.line,l.ch+1));return a.length==2?a:null}function d(_,l){var a=_.getTokenAt(W(l.line,l.ch+1));return/\bstring/.test(a.type)&&a.start==l.ch&&(l.ch==0||!/\bstring/.test(_.getTokenTypeAt(l)))}})});var ds=ar((Vl,Zl)=>{(function(V){typeof Vl=="object"&&typeof Zl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){var A=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),W=V.Pos,q={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function K(y){return y&&y.bracketRegex||/[(){}[\]]/}function p(y,m,w){var h=y.getLineHandle(m.line),d=m.ch-1,_=w&&w.afterCursor;_==null&&(_=/(^| )cm-fat-cursor($| )/.test(y.getWrapperElement().className));var l=K(w),a=!_&&d>=0&&l.test(h.text.charAt(d))&&q[h.text.charAt(d)]||l.test(h.text.charAt(d+1))&&q[h.text.charAt(++d)];if(!a)return null;var n=a.charAt(1)==">"?1:-1;if(w&&w.strict&&n>0!=(d==m.ch))return null;var s=y.getTokenTypeAt(W(m.line,d+1)),c=L(y,W(m.line,d+(n>0?1:0)),n,s,w);return c==null?null:{from:W(m.line,d),to:c&&c.pos,match:c&&c.ch==a.charAt(0),forward:n>0}}function L(y,m,w,h,d){for(var _=d&&d.maxScanLineLength||1e4,l=d&&d.maxScanLines||1e3,a=[],n=K(d),s=w>0?Math.min(m.line+l,y.lastLine()+1):Math.max(y.firstLine()-1,m.line-l),c=m.line;c!=s;c+=w){var f=y.getLine(c);if(!!f){var b=w>0?0:f.length-1,k=w>0?f.length:-1;if(!(f.length>_))for(c==m.line&&(b=m.ch-(w<0?1:0));b!=k;b+=w){var O=f.charAt(b);if(n.test(O)&&(h===void 0||(y.getTokenTypeAt(W(c,b+1))||"")==(h||""))){var D=q[O];if(D&&D.charAt(1)==">"==w>0)a.push(O);else if(a.length)a.pop();else return{pos:W(c,b),ch:O}}}}}return c-w==(w>0?y.lastLine():y.firstLine())?!1:null}function g(y,m,w){for(var h=y.state.matchBrackets.maxHighlightLineLength||1e3,d=w&&w.highlightNonMatching,_=[],l=y.listSelections(),a=0;a<l.length;a++){var n=l[a].empty()&&p(y,l[a].head,w);if(n&&(n.match||d!==!1)&&y.getLine(n.from.line).length<=h){var s=n.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";_.push(y.markText(n.from,W(n.from.line,n.from.ch+1),{className:s})),n.to&&y.getLine(n.to.line).length<=h&&_.push(y.markText(n.to,W(n.to.line,n.to.ch+1),{className:s}))}}if(_.length){A&&y.state.focused&&y.focus();var c=function(){y.operation(function(){for(var f=0;f<_.length;f++)_[f].clear()})};if(m)setTimeout(c,800);else return c}}function v(y){y.operation(function(){y.state.matchBrackets.currentlyHighlighted&&(y.state.matchBrackets.currentlyHighlighted(),y.state.matchBrackets.currentlyHighlighted=null),y.state.matchBrackets.currentlyHighlighted=g(y,!1,y.state.matchBrackets)})}function C(y){y.state.matchBrackets&&y.state.matchBrackets.currentlyHighlighted&&(y.state.matchBrackets.currentlyHighlighted(),y.state.matchBrackets.currentlyHighlighted=null)}V.defineOption("matchBrackets",!1,function(y,m,w){w&&w!=V.Init&&(y.off("cursorActivity",v),y.off("focus",v),y.off("blur",C),C(y)),m&&(y.state.matchBrackets=typeof m=="object"?m:{},y.on("cursorActivity",v),y.on("focus",v),y.on("blur",C))}),V.defineExtension("matchBrackets",function(){g(this,!0)}),V.defineExtension("findMatchingBracket",function(y,m,w){return(w||typeof m=="boolean")&&(w?(w.strict=m,m=w):m=m?{strict:!0}:null),p(this,y,m)}),V.defineExtension("scanForBracket",function(y,m,w,h){return L(this,y,m,w,h)})})});var Ql=ar(($l,Jl)=>{(function(V){typeof $l=="object"&&typeof Jl=="object"?V(lr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";var A=V.Pos;function W(l){var a=l.flags;return a??(l.ignoreCase?"i":"")+(l.global?"g":"")+(l.multiline?"m":"")}function q(l,a){for(var n=W(l),s=n,c=0;c<a.length;c++)s.indexOf(a.charAt(c))==-1&&(s+=a.charAt(c));return n==s?l:new RegExp(l.source,s)}function K(l){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(l.source)}function p(l,a,n){a=q(a,"g");for(var s=n.line,c=n.ch,f=l.lastLine();s<=f;s++,c=0){a.lastIndex=c;var b=l.getLine(s),k=a.exec(b);if(k)return{from:A(s,k.index),to:A(s,k.index+k[0].length),match:k}}}function L(l,a,n){if(!K(a))return p(l,a,n);a=q(a,"gm");for(var s,c=1,f=n.line,b=l.lastLine();f<=b;){for(var k=0;k<c&&!(f>b);k++){var O=l.getLine(f++);s=s==null?O:s+`
`+O}c=c*2,a.lastIndex=n.ch;var D=a.exec(s);if(D){var M=s.slice(0,D.index).split(`
`),x=D[0].split(`
`),B=n.line+M.length-1,T=M[M.length-1].length;return{from:A(B,T),to:A(B+x.length-1,x.length==1?T+x[0].length:x[x.length-1].length),match:D}}}}function g(l,a,n){for(var s,c=0;c<=l.length;){a.lastIndex=c;var f=a.exec(l);if(!f)break;var b=f.index+f[0].length;if(b>l.length-n)break;(!s||b>s.index+s[0].length)&&(s=f),c=f.index+1}return s}function v(l,a,n){a=q(a,"g");for(var s=n.line,c=n.ch,f=l.firstLine();s>=f;s--,c=-1){var b=l.getLine(s),k=g(b,a,c<0?0:b.length-c);if(k)return{from:A(s,k.index),to:A(s,k.index+k[0].length),match:k}}}function C(l,a,n){if(!K(a))return v(l,a,n);a=q(a,"gm");for(var s,c=1,f=l.getLine(n.line).length-n.ch,b=n.line,k=l.firstLine();b>=k;){for(var O=0;O<c&&b>=k;O++){var D=l.getLine(b--);s=s==null?D:D+`
`+s}c*=2;var M=g(s,a,f);if(M){var x=s.slice(0,M.index).split(`
`),B=M[0].split(`
`),T=b+x.length,J=x[x.length-1].length;return{from:A(T,J),to:A(T+B.length-1,B.length==1?J+B[0].length:B[B.length-1].length),match:M}}}}var y,m;String.prototype.normalize?(y=function(l){return l.normalize("NFD").toLowerCase()},m=function(l){return l.normalize("NFD")}):(y=function(l){return l.toLowerCase()},m=function(l){return l});function w(l,a,n,s){if(l.length==a.length)return n;for(var c=0,f=n+Math.max(0,l.length-a.length);;){if(c==f)return c;var b=c+f>>1,k=s(l.slice(0,b)).length;if(k==n)return b;k>n?f=b:c=b+1}}function h(l,a,n,s){if(!a.length)return null;var c=s?y:m,f=c(a).split(/\r|\n\r?/);e:for(var b=n.line,k=n.ch,O=l.lastLine()+1-f.length;b<=O;b++,k=0){var D=l.getLine(b).slice(k),M=c(D);if(f.length==1){var x=M.indexOf(f[0]);if(x==-1)continue e;var n=w(D,M,x,c)+k;return{from:A(b,w(D,M,x,c)+k),to:A(b,w(D,M,x+f[0].length,c)+k)}}else{var B=M.length-f[0].length;if(M.slice(B)!=f[0])continue e;for(var T=1;T<f.length-1;T++)if(c(l.getLine(b+T))!=f[T])continue e;var J=l.getLine(b+f.length-1),j=c(J),H=f[f.length-1];if(j.slice(0,H.length)!=H)continue e;return{from:A(b,w(D,M,B,c)+k),to:A(b+f.length-1,w(J,j,H.length,c))}}}}function d(l,a,n,s){if(!a.length)return null;var c=s?y:m,f=c(a).split(/\r|\n\r?/);e:for(var b=n.line,k=n.ch,O=l.firstLine()-1+f.length;b>=O;b--,k=-1){var D=l.getLine(b);k>-1&&(D=D.slice(0,k));var M=c(D);if(f.length==1){var x=M.lastIndexOf(f[0]);if(x==-1)continue e;return{from:A(b,w(D,M,x,c)),to:A(b,w(D,M,x+f[0].length,c))}}else{var B=f[f.length-1];if(M.slice(0,B.length)!=B)continue e;for(var T=1,n=b-f.length+1;T<f.length-1;T++)if(c(l.getLine(n+T))!=f[T])continue e;var J=l.getLine(b+1-f.length),j=c(J);if(j.slice(j.length-f[0].length)!=f[0])continue e;return{from:A(b+1-f.length,w(J,j,J.length-f[0].length,c)),to:A(b,w(D,M,B.length,c))}}}}function _(l,a,n,s){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=l,n=n?l.clipPos(n):A(0,0),this.pos={from:n,to:n};var c;typeof s=="object"?c=s.caseFold:(c=s,s=null),typeof a=="string"?(c==null&&(c=!1),this.matches=function(f,b){return(f?d:h)(l,a,b,c)}):(a=q(a,"gm"),!s||s.multiline!==!1?this.matches=function(f,b){return(f?C:L)(l,a,b)}:this.matches=function(f,b){return(f?v:p)(l,a,b)})}_.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(l){var a=this.doc.clipPos(l?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(a=A(a.line,a.ch),l?(a.ch--,a.ch<0&&(a.line--,a.ch=(this.doc.getLine(a.line)||"").length)):(a.ch++,a.ch>(this.doc.getLine(a.line)||"").length&&(a.ch=0,a.line++)),V.cmpPos(a,this.doc.clipPos(a))!=0))return this.atOccurrence=!1;var n=this.matches(l,a);if(this.afterEmptyMatch=n&&V.cmpPos(n.from,n.to)==0,n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var s=A(l?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:s,to:s},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(l,a){if(!!this.atOccurrence){var n=V.splitLines(l);this.doc.replaceRange(n,this.pos.from,this.pos.to,a),this.pos.to=A(this.pos.from.line+n.length-1,n[n.length-1].length+(n.length==1?this.pos.from.ch:0))}}},V.defineExtension("getSearchCursor",function(l,a,n){return new _(this.doc,l,a,n)}),V.defineDocExtension("getSearchCursor",function(l,a,n){return new _(this,l,a,n)}),V.defineExtension("selectMatches",function(l,a){for(var n=[],s=this.getSearchCursor(l,this.getCursor("from"),a);s.findNext()&&!(V.cmpPos(s.to(),this.getCursor("to"))>0);)n.push({anchor:s.from(),head:s.to()});n.length&&this.setSelections(n,0)})})});var rc=ar((ec,tc)=>{(function(V){typeof ec=="object"&&typeof tc=="object"?V(lr(),Ql(),ds()):typeof define=="function"&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],V):V(CodeMirror)})(function(V){"use strict";var A=V.commands,W=V.Pos;function q(n,s,c){if(c<0&&s.ch==0)return n.clipPos(W(s.line-1));var f=n.getLine(s.line);if(c>0&&s.ch>=f.length)return n.clipPos(W(s.line+1,0));for(var b="start",k,O=s.ch,D=O,M=c<0?0:f.length,x=0;D!=M;D+=c,x++){var B=f.charAt(c<0?D-1:D),T=B!="_"&&V.isWordChar(B)?"w":"o";if(T=="w"&&B.toUpperCase()==B&&(T="W"),b=="start")T!="o"?(b="in",k=T):O=D+c;else if(b=="in"&&k!=T){if(k=="w"&&T=="W"&&c<0&&D--,k=="W"&&T=="w"&&c>0)if(D==O+1){k="w";continue}else D--;break}}return W(s.line,D)}function K(n,s){n.extendSelectionsBy(function(c){return n.display.shift||n.doc.extend||c.empty()?q(n.doc,c.head,s):s<0?c.from():c.to()})}A.goSubwordLeft=function(n){K(n,-1)},A.goSubwordRight=function(n){K(n,1)},A.scrollLineUp=function(n){var s=n.getScrollInfo();if(!n.somethingSelected()){var c=n.lineAtHeight(s.top+s.clientHeight,"local");n.getCursor().line>=c&&n.execCommand("goLineUp")}n.scrollTo(null,s.top-n.defaultTextHeight())},A.scrollLineDown=function(n){var s=n.getScrollInfo();if(!n.somethingSelected()){var c=n.lineAtHeight(s.top,"local")+1;n.getCursor().line<=c&&n.execCommand("goLineDown")}n.scrollTo(null,s.top+n.defaultTextHeight())},A.splitSelectionByLine=function(n){for(var s=n.listSelections(),c=[],f=0;f<s.length;f++)for(var b=s[f].from(),k=s[f].to(),O=b.line;O<=k.line;++O)k.line>b.line&&O==k.line&&k.ch==0||c.push({anchor:O==b.line?b:W(O,0),head:O==k.line?k:W(O)});n.setSelections(c,0)},A.singleSelectionTop=function(n){var s=n.listSelections()[0];n.setSelection(s.anchor,s.head,{scroll:!1})},A.selectLine=function(n){for(var s=n.listSelections(),c=[],f=0;f<s.length;f++){var b=s[f];c.push({anchor:W(b.from().line,0),head:W(b.to().line+1,0)})}n.setSelections(c)};function p(n,s){if(n.isReadOnly())return V.Pass;n.operation(function(){for(var c=n.listSelections().length,f=[],b=-1,k=0;k<c;k++){var O=n.listSelections()[k].head;if(!(O.line<=b)){var D=W(O.line+(s?0:1),0);n.replaceRange(`
`,D,null,"+insertLine"),n.indentLine(D.line,null,!0),f.push({head:D,anchor:D}),b=O.line+1}}n.setSelections(f)}),n.execCommand("indentAuto")}A.insertLineAfter=function(n){return p(n,!1)},A.insertLineBefore=function(n){return p(n,!0)};function L(n,s){for(var c=s.ch,f=c,b=n.getLine(s.line);c&&V.isWordChar(b.charAt(c-1));)--c;for(;f<b.length&&V.isWordChar(b.charAt(f));)++f;return{from:W(s.line,c),to:W(s.line,f),word:b.slice(c,f)}}A.selectNextOccurrence=function(n){var s=n.getCursor("from"),c=n.getCursor("to"),f=n.state.sublimeFindFullWord==n.doc.sel;if(V.cmpPos(s,c)==0){var b=L(n,s);if(!b.word)return;n.setSelection(b.from,b.to),f=!0}else{var k=n.getRange(s,c),O=f?new RegExp("\\b"+k+"\\b"):k,D=n.getSearchCursor(O,c),M=D.findNext();if(M||(D=n.getSearchCursor(O,W(n.firstLine(),0)),M=D.findNext()),!M||v(n.listSelections(),D.from(),D.to()))return;n.addSelection(D.from(),D.to())}f&&(n.state.sublimeFindFullWord=n.doc.sel)},A.skipAndSelectNextOccurrence=function(n){var s=n.getCursor("anchor"),c=n.getCursor("head");A.selectNextOccurrence(n),V.cmpPos(s,c)!=0&&n.doc.setSelections(n.doc.listSelections().filter(function(f){return f.anchor!=s||f.head!=c}))};function g(n,s){for(var c=n.listSelections(),f=[],b=0;b<c.length;b++){var k=c[b],O=n.findPosV(k.anchor,s,"line",k.anchor.goalColumn),D=n.findPosV(k.head,s,"line",k.head.goalColumn);O.goalColumn=k.anchor.goalColumn!=null?k.anchor.goalColumn:n.cursorCoords(k.anchor,"div").left,D.goalColumn=k.head.goalColumn!=null?k.head.goalColumn:n.cursorCoords(k.head,"div").left;var M={anchor:O,head:D};f.push(k),f.push(M)}n.setSelections(f)}A.addCursorToPrevLine=function(n){g(n,-1)},A.addCursorToNextLine=function(n){g(n,1)};function v(n,s,c){for(var f=0;f<n.length;f++)if(V.cmpPos(n[f].from(),s)==0&&V.cmpPos(n[f].to(),c)==0)return!0;return!1}var C="(){}[]";function y(n){for(var s=n.listSelections(),c=[],f=0;f<s.length;f++){var b=s[f],k=b.head,O=n.scanForBracket(k,-1);if(!O)return!1;for(;;){var D=n.scanForBracket(k,1);if(!D)return!1;if(D.ch==C.charAt(C.indexOf(O.ch)+1)){var M=W(O.pos.line,O.pos.ch+1);if(V.cmpPos(M,b.from())==0&&V.cmpPos(D.pos,b.to())==0){if(O=n.scanForBracket(O.pos,-1),!O)return!1}else{c.push({anchor:M,head:D.pos});break}}k=W(D.pos.line,D.pos.ch+1)}}return n.setSelections(c),!0}A.selectScope=function(n){y(n)||n.execCommand("selectAll")},A.selectBetweenBrackets=function(n){if(!y(n))return V.Pass};function m(n){return n?/\bpunctuation\b/.test(n)?n:void 0:null}A.goToBracket=function(n){n.extendSelectionsBy(function(s){var c=n.scanForBracket(s.head,1,m(n.getTokenTypeAt(s.head)));if(c&&V.cmpPos(c.pos,s.head)!=0)return c.pos;var f=n.scanForBracket(s.head,-1,m(n.getTokenTypeAt(W(s.head.line,s.head.ch+1))));return f&&W(f.pos.line,f.pos.ch+1)||s.head})},A.swapLineUp=function(n){if(n.isReadOnly())return V.Pass;for(var s=n.listSelections(),c=[],f=n.firstLine()-1,b=[],k=0;k<s.length;k++){var O=s[k],D=O.from().line-1,M=O.to().line;b.push({anchor:W(O.anchor.line-1,O.anchor.ch),head:W(O.head.line-1,O.head.ch)}),O.to().ch==0&&!O.empty()&&--M,D>f?c.push(D,M):c.length&&(c[c.length-1]=M),f=M}n.operation(function(){for(var x=0;x<c.length;x+=2){var B=c[x],T=c[x+1],J=n.getLine(B);n.replaceRange("",W(B,0),W(B+1,0),"+swapLine"),T>n.lastLine()?n.replaceRange(`
`+J,W(n.lastLine()),null,"+swapLine"):n.replaceRange(J+`
`,W(T,0),null,"+swapLine")}n.setSelections(b),n.scrollIntoView()})},A.swapLineDown=function(n){if(n.isReadOnly())return V.Pass;for(var s=n.listSelections(),c=[],f=n.lastLine()+1,b=s.length-1;b>=0;b--){var k=s[b],O=k.to().line+1,D=k.from().line;k.to().ch==0&&!k.empty()&&O--,O<f?c.push(O,D):c.length&&(c[c.length-1]=D),f=D}n.operation(function(){for(var M=c.length-2;M>=0;M-=2){var x=c[M],B=c[M+1],T=n.getLine(x);x==n.lastLine()?n.replaceRange("",W(x-1),W(x),"+swapLine"):n.replaceRange("",W(x,0),W(x+1,0),"+swapLine"),n.replaceRange(T+`
`,W(B,0),null,"+swapLine")}n.scrollIntoView()})},A.toggleCommentIndented=function(n){n.toggleComment({indent:!0})},A.joinLines=function(n){for(var s=n.listSelections(),c=[],f=0;f<s.length;f++){for(var b=s[f],k=b.from(),O=k.line,D=b.to().line;f<s.length-1&&s[f+1].from().line==D;)D=s[++f].to().line;c.push({start:O,end:D,anchor:!b.empty()&&k})}n.operation(function(){for(var M=0,x=[],B=0;B<c.length;B++){for(var T=c[B],J=T.anchor&&W(T.anchor.line-M,T.anchor.ch),j,H=T.start;H<=T.end;H++){var N=H-M;H==T.end&&(j=W(N,n.getLine(N).length+1)),N<n.lastLine()&&(n.replaceRange(" ",W(N),W(N+1,/^\s*/.exec(n.getLine(N+1))[0].length)),++M)}x.push({anchor:J||j,head:j})}n.setSelections(x,0)})},A.duplicateLine=function(n){n.operation(function(){for(var s=n.listSelections().length,c=0;c<s;c++){var f=n.listSelections()[c];f.empty()?n.replaceRange(n.getLine(f.head.line)+`
`,W(f.head.line,0)):n.replaceRange(n.getRange(f.from(),f.to()),f.from())}n.scrollIntoView()})};function w(n,s,c){if(n.isReadOnly())return V.Pass;for(var f=n.listSelections(),b=[],k,O=0;O<f.length;O++){var D=f[O];if(!D.empty()){for(var M=D.from().line,x=D.to().line;O<f.length-1&&f[O+1].from().line==x;)x=f[++O].to().line;f[O].to().ch||x--,b.push(M,x)}}b.length?k=!0:b.push(n.firstLine(),n.lastLine()),n.operation(function(){for(var B=[],T=0;T<b.length;T+=2){var J=b[T],j=b[T+1],H=W(J,0),N=W(j),Z=n.getRange(H,N,!1);s?Z.sort(function(Q,ae){return Q<ae?-c:Q==ae?0:c}):Z.sort(function(Q,ae){var se=Q.toUpperCase(),me=ae.toUpperCase();return se!=me&&(Q=se,ae=me),Q<ae?-c:Q==ae?0:c}),n.replaceRange(Z,H,N),k&&B.push({anchor:H,head:W(j+1,0)})}k&&n.setSelections(B,0)})}A.sortLines=function(n){w(n,!0,1)},A.reverseSortLines=function(n){w(n,!0,-1)},A.sortLinesInsensitive=function(n){w(n,!1,1)},A.reverseSortLinesInsensitive=function(n){w(n,!1,-1)},A.nextBookmark=function(n){var s=n.state.sublimeBookmarks;if(s)for(;s.length;){var c=s.shift(),f=c.find();if(f)return s.push(c),n.setSelection(f.from,f.to)}},A.prevBookmark=function(n){var s=n.state.sublimeBookmarks;if(s)for(;s.length;){s.unshift(s.pop());var c=s[s.length-1].find();if(!c)s.pop();else return n.setSelection(c.from,c.to)}},A.toggleBookmark=function(n){for(var s=n.listSelections(),c=n.state.sublimeBookmarks||(n.state.sublimeBookmarks=[]),f=0;f<s.length;f++){for(var b=s[f].from(),k=s[f].to(),O=s[f].empty()?n.findMarksAt(b):n.findMarks(b,k),D=0;D<O.length;D++)if(O[D].sublimeBookmark){O[D].clear();for(var M=0;M<c.length;M++)c[M]==O[D]&&c.splice(M--,1);break}D==O.length&&c.push(n.markText(b,k,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},A.clearBookmarks=function(n){var s=n.state.sublimeBookmarks;if(s)for(var c=0;c<s.length;c++)s[c].clear();s.length=0},A.selectBookmarks=function(n){var s=n.state.sublimeBookmarks,c=[];if(s)for(var f=0;f<s.length;f++){var b=s[f].find();b?c.push({anchor:b.from,head:b.to}):s.splice(f--,0)}c.length&&n.setSelections(c,0)};function h(n,s){n.operation(function(){for(var c=n.listSelections(),f=[],b=[],k=0;k<c.length;k++){var O=c[k];O.empty()?(f.push(k),b.push("")):b.push(s(n.getRange(O.from(),O.to())))}n.replaceSelections(b,"around","case");for(var k=f.length-1,D;k>=0;k--){var O=c[f[k]];if(!(D&&V.cmpPos(O.head,D)>0)){var M=L(n,O.head);D=M.from,n.replaceRange(s(M.word),M.from,M.to)}}})}A.smartBackspace=function(n){if(n.somethingSelected())return V.Pass;n.operation(function(){for(var s=n.listSelections(),c=n.getOption("indentUnit"),f=s.length-1;f>=0;f--){var b=s[f].head,k=n.getRange({line:b.line,ch:0},b),O=V.countColumn(k,null,n.getOption("tabSize")),D=n.findPosH(b,-1,"char",!1);if(k&&!/\S/.test(k)&&O%c==0){var M=new W(b.line,V.findColumn(k,O-c,c));M.ch!=b.ch&&(D=M)}n.replaceRange("",D,b,"+delete")}})},A.delLineRight=function(n){n.operation(function(){for(var s=n.listSelections(),c=s.length-1;c>=0;c--)n.replaceRange("",s[c].anchor,W(s[c].to().line),"+delete");n.scrollIntoView()})},A.upcaseAtCursor=function(n){h(n,function(s){return s.toUpperCase()})},A.downcaseAtCursor=function(n){h(n,function(s){return s.toLowerCase()})},A.setSublimeMark=function(n){n.state.sublimeMark&&n.state.sublimeMark.clear(),n.state.sublimeMark=n.setBookmark(n.getCursor())},A.selectToSublimeMark=function(n){var s=n.state.sublimeMark&&n.state.sublimeMark.find();s&&n.setSelection(n.getCursor(),s)},A.deleteToSublimeMark=function(n){var s=n.state.sublimeMark&&n.state.sublimeMark.find();if(s){var c=n.getCursor(),f=s;if(V.cmpPos(c,f)>0){var b=f;f=c,c=b}n.state.sublimeKilled=n.getRange(c,f),n.replaceRange("",c,f)}},A.swapWithSublimeMark=function(n){var s=n.state.sublimeMark&&n.state.sublimeMark.find();s&&(n.state.sublimeMark.clear(),n.state.sublimeMark=n.setBookmark(n.getCursor()),n.setCursor(s))},A.sublimeYank=function(n){n.state.sublimeKilled!=null&&n.replaceSelection(n.state.sublimeKilled,null,"paste")},A.showInCenter=function(n){var s=n.cursorCoords(null,"local");n.scrollTo(null,(s.top+s.bottom)/2-n.getScrollInfo().clientHeight/2)};function d(n){var s=n.getCursor("from"),c=n.getCursor("to");if(V.cmpPos(s,c)==0){var f=L(n,s);if(!f.word)return;s=f.from,c=f.to}return{from:s,to:c,query:n.getRange(s,c),word:f}}function _(n,s){var c=d(n);if(!!c){var f=c.query,b=n.getSearchCursor(f,s?c.to:c.from);(s?b.findNext():b.findPrevious())?n.setSelection(b.from(),b.to()):(b=n.getSearchCursor(f,s?W(n.firstLine(),0):n.clipPos(W(n.lastLine()))),(s?b.findNext():b.findPrevious())?n.setSelection(b.from(),b.to()):c.word&&n.setSelection(c.from,c.to))}}A.findUnder=function(n){_(n,!0)},A.findUnderPrevious=function(n){_(n,!1)},A.findAllUnder=function(n){var s=d(n);if(!!s){for(var c=n.getSearchCursor(s.query),f=[],b=-1;c.findNext();)f.push({anchor:c.from(),head:c.to()}),c.from().line<=s.from.line&&c.from().ch<=s.from.ch&&b++;n.setSelections(f,b)}};var l=V.keyMap;l.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},V.normalizeKeyMap(l.macSublime),l.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},V.normalizeKeyMap(l.pcSublime);var a=l.default==l.macDefault;l.sublime=a?l.macSublime:l.pcSublime})});var tl=class{name(){return"base64"}matches(A){if(A.length<4)return!1;try{return atob(A),!0}catch(W){return!1}}decode(A){return Array.from(atob(A)).map(W=>W.charCodeAt(0))}},rl=tl;var il=class{name(){return"default"}matches(){return!0}decode(A){return Array.from(A).map(W=>W.charCodeAt(0))}},nl=il;var ol=class{name(){return"hexdump"}matches(A){return/^(\d{7} (((.{2}){1,2} ){1,8})(\n|$))+$/.test(A)}decode(A){return A.trim().replace(/(?<=^|\n)\d{7} (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").replace(/(..)(..)/g,"$2$1").replace(/00$/,"").match(/../g).map(W=>parseInt(W,16))}},sl=ol;var Dn=class{constructor(A,W,q,K=null,p=null,L=A){this.id=A;this.name=W;this.runner=q;this.url=K;this.args=p;this.highlighterRef=L}getId(){return this.id}getName(){return this.name}getURL(){return this.url}getArgs(){return this.args}getHighlighterRef(){return this.highlighterRef}run(A,W,q){return this.runner(A,q,W)}};var al=class{constructor(){this.data={}}register(...A){A.forEach(W=>{this.data[W.getId()]=W})}get(A){return this.data[A]}all(){return Object.keys(this.data)}run(A,W,q,K){return this.data[A].run(W,q,K)}},uo=V=>(A,W,q)=>{let K=new Worker(V);return K.postMessage({type:"run",code:A,args:q,input:W}),K},Pr=new al;var df=Yt(as()),ul=class extends Dn{constructor(){super("javascript-browser","JavaScript (Browser)",uo("dist/js/langs/javascript-browser/worker.js"),"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/",null,"javascript")}},fl=ul;var _f=Yt(ls()),pl=class extends Dn{constructor(){super("webperl-5.28.1","Perl 5.28.1 (webperl)",uo("dist/js/langs/webperl-5.28.1/worker.js"),"https://www.perl.org/",["-M5.10.0","-F","-l","-p"],"perl")}},vl=pl;var nc=Yt(lr()),oc=Yt(ml());var bl=class{constructor(...A){this.buffer="";this.registered=[];this.register(...A)}activate(A){this.registered.reduce((W,q)=>q.matches(A)&&!W?(q.isActive()||(q.activate(A),q.reset(),q.write(this.buffer)),!0):(q.deactivate(),q.reset(),W),!1),this.resize()}register(...A){this.registered.push(...A)}reset(){this.buffer="",this.registered.forEach(A=>A.reset())}resize(){this.registered.forEach(A=>{A.isActive()&&A.resize()})}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.buffer+=A,this.registered.filter(W=>W.isActive()).forEach(W=>W.write(A))}};var cs=(...V)=>new bl(...V);var Sl=class{constructor(){this.active=!1;this.mimeType="text/plain"}activate(A){this.container.removeAttribute("hidden"),this.active=!0,this.mimeType=A,this.resize()}createElement(A="div"){let W=document.createElement(A);return W.setAttribute("hidden",""),W}deactivate(){this.container.setAttribute("hidden",""),this.active=!1}isActive(){return this.active}matches(A){return!0}resize(){}},nn=Sl;var Lf=Yt(as()),xf=Yt(ls()),Cl=class extends nn{constructor(A,W={}){super();let q=document.createElement("textarea");this.container=this.createElement("div"),this.container.append(q),A.append(this.container),this.editor=ho.createEditor(q,Jr(Xt({},W),{readOnly:!0})),A.append(this.container)}activate(A){super.activate(A),this.editor.setOption("mode",A)}deactivate(){super.deactivate()}matches(A){return["application/ecmascript","application/javascript","application/json","application/x-perl","text/ecmascript","text/javascript","text/json","text/x-perl"].includes(A)}reset(){this.editor.setValue("")}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.editor.setValue(this.editor.getValue()+A)}},wl=Cl;var xl=Yt(lr());var Ll=class{constructor(){this.active=!1;this.inputs=null}activate(A){this.container.removeAttribute("hidden"),this.active=!0,this.inputs=A,this.resize()}createElement(A="div"){return this.container=document.createElement(A),this.container.setAttribute("hidden",""),this.container}deactivate(){this.container.setAttribute("hidden",""),this.active=!1}isActive(){return this.active}read(){return this.readAsString(null).split("").map(A=>A.charCodeAt(0))}resize(){}},po=Ll;var kl=class extends po{constructor(A,W={}){super();let q=this.createElement("div"),K=document.createElement("textarea");A.append(q),q.append(K),this.editor=(0,xl.fromTextArea)(K,Jr(Xt({mode:null,theme:"monokai",viewportMargin:1/0},W),{extraKeys:Xt({"Ctrl-D":"duplicateLine","Ctrl-/":"toggleComment","Shift-Tab":!1,Tab:!1},Object.keys(W.extraKeys||{}).length?W.extraKeys:{})})),this.editor.on("change",()=>{this.inputs!==null&&this.inputs.setBuffer(this.editor.getValue().split("").map(p=>p.charCodeAt(0)))})}matches(A){return/^[\t\n -~]*$/.test(A)}on(A,W){this.editor.on(A,(...q)=>W(...q))}readAsString(A="."){let W=this.editor.getValue();return A===null?W:W.replace(/[\x00-\x1f\x7f-\xff]/g,A)}reset(){this.editor.setValue("")}setOption(A,W){this.editor.setOption(A,W)}setType(A){this.editor.getOption("mode")!==A&&this.editor.setOption("mode",A)}write(A){Array.isArray(A)&&(A=A.map(W=>String.fromCharCode(W)).join("")),this.editor.setValue(A)}},on=kl;var El=class extends nn{constructor(A){super();this.buffer="";this.mimeType="text/html";this.container=this.createElement("iframe"),A.append(this.container),this.update()}activate(A){super.activate(A),this.update()}matches(A){return["text/html"].includes(A)}reset(){this.buffer="",this.update()}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.buffer+=A,this.update()}update(){this.container.src=`data:${this.mimeType};base64,${btoa(this.buffer)}`}},vo=El;var Tl=class{constructor(A,W,q,K,p){this.languageSelector=A;this.stdin=W;this.stdout=q;this.stderr=K;this.args=p}static getRaw(A){return A.getValue()}getArgs(){return this.args.getValue()}setArgs(A){this.args.setValue(A)}argsRefresh(){this.args.refresh()}getStdin(){return this.stdin.getValue()}setStdin(A){this.stdin.setValue(A)}},Al=Tl;var Ml=class extends vo{constructor(){super(...arguments);this.imageBuffer="";this.imageMimeType="image/png"}activate(A){super.activate("text/html"),this.imageMimeType=A}css(){return`
html, body {
  margin: 0;
  padding: 0;
}

body > img {
  --z: 1;
  image-rendering: pixelated;
  transform: scale(var(--z));
  transform-origin: 0 0;
}

.checked {
  background-image: linear-gradient(to right, rgba(192, 192, 192, 0.75), rgba(192, 192, 192, 0.75)),
    linear-gradient(to right, black 50%, white 50%),
    linear-gradient(to bottom, black 50%, white 50%);
  background-blend-mode: normal, difference, normal;
  background-size: 2em 2em;
}

.controls {
  background: rgba(255, 255, 255, .2);
  border: solid rgba(255, 255, 255, .6);
  border-radius: .3em 0 0 .3em;
  border-width: 1px 0 1px 1px;
  padding: .2em .2em .5em;
  position: fixed;
  right: 0;
  top: 1em;
}

.controls button {
  appearance: none;
  background: transparent;
  border: 0;
}

.controls button.toggle:after {
  content: '\\27f5';
}

.controls.left {
  border-radius: 0 .3em .3em 0;
  border-width: 1px 1px 1px 0;
  left: 0;
  right: auto;
}

.controls.left header {
  text-align: right;
}

.controls.left button.toggle:after {
  content: '\\27f6';
}
`.replace(/\s*,\s*/g,",").replace(/\s*>\s*/g,">").replace(/\s*;\s*}\s*/g,"}").replace(/\s*{\s*/g,"{").replace(/\s*:\s*/g,":").replace(/\s*;\s*/g,";")}data(){return`
<style>${this.css()}</style>
<img src="data:${this.imageMimeType};base64,${btoa(this.imageBuffer)}">
<div class="controls">
  <header>
    <button class="toggle"></button>
  </header>
  <section>
    <button class="zoom-in"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTN2M2gtMnYtM2gtM3YtMmgzdi0zaDJ2M2gzdjJ6bTguMTcyIDE0bC03LjM4Ny03LjM4N2MtMS4zODguODc0LTMuMDI0IDEuMzg3LTQuNzg1IDEuMzg3LTQuOTcxIDAtOS00LjAyOS05LTlzNC4wMjktOSA5LTkgOSA0LjAyOSA5IDljMCAxLjc2MS0uNTE0IDMuMzk4LTEuMzg3IDQuNzg1bDcuMzg3IDcuMzg3LTIuODI4IDIuODI4em0tMTIuMTcyLThjMy44NTkgMCA3LTMuMTQgNy03cy0zLjE0MS03LTctNy03IDMuMTQtNyA3IDMuMTQxIDcgNyA3eiIvPjwvc3ZnPg=="></button>
    <button class="zoom-out"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTh2LTJoOHYyem04LjE3MiAxNGwtNy4zODctNy4zODdjLTEuMzg4Ljg3NC0zLjAyNCAxLjM4Ny00Ljc4NSAxLjM4Ny00Ljk3MSAwLTktNC4wMjktOS05czQuMDI5LTkgOS05IDkgNC4wMjkgOSA5YzAgMS43NjEtLjUxNCAzLjM5OC0xLjM4NyA0Ljc4NWw3LjM4NyA3LjM4Ny0yLjgyOCAyLjgyOHptLTEyLjE3Mi04YzMuODU5IDAgNy0zLjE0IDctN3MtMy4xNDEtNy03LTctNyAzLjE0LTcgNyAzLjE0MSA3IDcgN3oiLz48L3N2Zz4="></button>
  </section>
  <section>
    <button class="checked">&#x2580;&#x2584;</button>
  </section>
</div>
<script>${this.js()}<\/script>
`}js(){return'e=document.querySelector("img"),t=document.querySelector(".controls");document.addEventListener("click",(function(o){var c=o.target,l=getComputedStyle(e).getPropertyValue("--z");c.matches(".zoom-in,.zoom-in *")&&e.style.setProperty("--z",2*l),c.matches(".zoom-out,.zoom-out *")&&e.style.setProperty("--z",l/2),c.matches(".toggle,.toggle *")&&t.classList.toggle("left"),c.matches("button.checked")&&e.classList.toggle("checked")}))'}matches(A){return["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/webp"].includes(A)}reset(){super.reset(),this.imageBuffer=""}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.imageBuffer+=A,this.buffer="",super.write(this.data())}},go=Ml;var Rl=class extends TypeError{},Mi=Rl;var Dl=class extends go{constructor(){super(...arguments);this.ppmBuffer="";this.superTimeout=null}activate(A){super.activate("image/png")}matches(A){return["image/x-portable-bitmap","image/x-portable-graymap","image/x-portable-pixmap","image/x-portable-anymap"].includes(A)}reset(){super.reset(),this.ppmBuffer=""}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.ppmBuffer+=A,!(this.ppmBuffer.length<10)&&(this.superTimeout&&clearTimeout(this.superTimeout),this.superTimeout=setTimeout(()=>{try{super.reset(),super.write(this.convertToPNG())}catch(W){console.error(W)}},50))}convertToPNG(){if(!/^P[1-7]/.test(this.ppmBuffer))throw new Mi;let A=this.extractPBMHeader();if(!A)throw new Mi;let[W]=A;if(!W)throw new Mi;if(W==="P1"){let[,q,K,p]=A;return this.parseP1(q,K,p)}if(W==="P2"){let[,q,K,p,L]=A;return this.parseP2(q,K,p,L)}if(W==="P3"){let[,q,K,p,L]=A;return this.parseP3(q,K,p,L)}if(W==="P4"){let[,q,K,p]=A;return this.parseP4(q,K,p)}if(W==="P5"){let[,q,K,p,L]=A;return this.parseP2(q,K,p,L,!0)}if(W==="P6"){let[,q,K,p,L]=A;return this.parseP3(q,K,p,L,!0)}throw new Mi("Currently unsupported.")}createCanvas(A,W){let q=document.createElement("canvas"),K=q.getContext("2d"),p=new ImageData(A,W);return q.width=A,q.height=W,[q,K,p]}canvasToRawPNG(A){return atob(A.toDataURL("image/png").replace(/^data:image\/png;base64,/,""))}parseP1(A,W,q){let[K,p,L]=this.createCanvas(A,W),g=this.asciiDataGenerator(q,!1);for(let v=0;v<A*W*4;){let C=g.next().value?0:255;L.data[v++]=C,L.data[v++]=C,L.data[v++]=C,L.data[v++]=255}return p.putImageData(L,0,0,0,0,A,W),this.canvasToRawPNG(K)}parseP2(A,W,q,K,p=!1){let[L,g,v]=this.createCanvas(A,W),C=p?this.binaryDataGenerator(K):this.asciiDataGenerator(K);for(let y=0;y<A*W*4;){let m=Math.floor(C.next().value/q*255);v.data[y++]=m,v.data[y++]=m,v.data[y++]=m,v.data[y++]=255}return g.putImageData(v,0,0,0,0,A,W),this.canvasToRawPNG(L)}parseP3(A,W,q,K,p=!1){let[L,g,v]=this.createCanvas(A,W),C=p?this.binaryDataGenerator(K):this.asciiDataGenerator(K);for(let y=0;y<A*W*4;)v.data[y++]=Math.floor((C.next().value||0)/q*255),v.data[y++]=Math.floor((C.next().value||0)/q*255),v.data[y++]=Math.floor((C.next().value||0)/q*255),v.data[y++]=255;return g.putImageData(v,0,0,0,0,A,W),this.canvasToRawPNG(L)}parseP4(A,W,q){let[K,p,L]=this.createCanvas(A,W),g=this.binaryDataGenerator(q);for(let v=0;v<A*W*4;){let C="";for(let y=0;y<Math.ceil(A/8);y++)C+=("00000000"+g.next().value.toString(2)).slice(-8);for(let y=0;y<A;y++){let m=C[y]==="1"?0:255;L.data[v++]=m,L.data[v++]=m,L.data[v++]=m,L.data[v++]=255}}return p.putImageData(L,0,0,0,0,A,W),this.canvasToRawPNG(K)}extractPBMHeader(){let A=this.ppmBuffer.slice(0,2),W=/^(P[14])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/,q=/^(P[2356])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/;if(A==="P1"||A==="P4"){let K=this.ppmBuffer.match(W);if(!K)throw new Mi;return[K[1],parseInt(K[2],10),parseInt(K[3],10),K[0].length]}if(A==="P2"||A==="P3"||A==="P5"||A==="P6"){let K=this.ppmBuffer.match(q);if(!K)throw new Mi;return[K[1],parseInt(K[2],10),parseInt(K[3],10),parseInt(K[4],10),K[0].length]}}*asciiDataGenerator(A,W=!0){let q="";for(let K=A,p=!1;K<this.ppmBuffer.length;K++){let L=this.ppmBuffer[K];/#/.test(L)&&(q&&(yield parseInt(q,10),q=""),p=!0),/\n/.test(L)&&p&&(p=!1),!p&&(/\s/.test(L)&&q.length>0&&(yield parseInt(q,10),q=""),/\d/.test(L)&&(q+=L),W===!1&&q&&(yield parseInt(q,10),q=""))}yield parseInt(q,10)}*binaryDataGenerator(A){let W="";for(let q=A;q<this.ppmBuffer.length;q++)yield this.ppmBuffer[q].charCodeAt(0);yield parseInt(W,10)}},Ol=Dl;var Pl=Yt(Bl());var rf=2,nf=1,fs=class{constructor(){}activate(A){this._terminal=A}dispose(){}fit(){let A=this.proposeDimensions();if(!A||!this._terminal)return;let W=this._terminal._core;(this._terminal.rows!==A.rows||this._terminal.cols!==A.cols)&&(W._renderService.clear(),this._terminal.resize(A.cols,A.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let A=this._terminal._core;if(A._renderService.dimensions.actualCellWidth===0||A._renderService.dimensions.actualCellHeight===0)return;let W=window.getComputedStyle(this._terminal.element.parentElement),q=parseInt(W.getPropertyValue("height")),K=Math.max(0,parseInt(W.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),L={top:parseInt(p.getPropertyValue("padding-top")),bottom:parseInt(p.getPropertyValue("padding-bottom")),right:parseInt(p.getPropertyValue("padding-right")),left:parseInt(p.getPropertyValue("padding-left"))},g=L.top+L.bottom,v=L.right+L.left,C=q-g,y=K-v-A.viewport.scrollBarWidth;return{cols:Math.max(rf,Math.floor(y/A._renderService.dimensions.actualCellWidth)),rows:Math.max(nf,Math.floor(C/A._renderService.dimensions.actualCellHeight))}}};var On=class extends nn{constructor(A,W={}){super();this.container=this.createElement("div"),this.container.classList.add("tty"),A.append(this.container),this.fit=new fs,this.terminal=On.createTerminal(W),this.terminal.loadAddon(this.fit),this.terminal.open(this.container),this.options=W}matches(){return!0}write(A){typeof A=="number"&&(A=String.fromCharCode(A)),this.terminal.write(On.cleanText(A))}reset(){this.terminal.reset()}resize(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.container.hasAttribute("hidden")||(this.fit.activate(this.terminal),this.fit.fit(),(this.options.rows||this.options.cols)&&this.terminal.resize(this.options.cols||this.terminal.cols,this.options.rows||this.terminal.rows))})})}static createTerminal(A={}){var W;return new Pl.Terminal(Jr(Xt({},A),{theme:Xt({background:"#272822",cursor:"transparent",foreground:"#f8f8f2"},(W=A.theme)!=null?W:{})}))}static cleanText(A){return A.replace(/(?<!\r)\n/g,`\r
`)}},hs=On;var Il=class{constructor(){this.registered=[]}register(...A){this.registered.push(...A)}decode(A){return this.decoder(A).decode(A)}decoder(A){let[W]=this.registered.filter(q=>q.matches(A));return W}};var Bn=new Il;var dh=Yt(Wl()),ph=Yt(Ul()),vh=Yt(Kl()),gh=Yt(Yl()),_h=Yt(ds()),yh=Yt(rc());var Pn=class{constructor(...A){this.buffer=[];this.registered=[];this.register(...A)}active(){let[A]=this.registered.filter(W=>W.isActive());return A}activate(A){this.registered.reduce((W,q)=>!W&&(typeof A=="function"&&q instanceof A||q===A)?(q.isActive()||(q.activate(this),q.reset(),q.write(this.buffer)),!0):(q.deactivate(),q.reset(),W),!1),this.resize()}on(A,W){this.registered.forEach(q=>q.on(A,W))}read(){return this.active().read()}readAsString(A="."){return this.active().readAsString(A)}register(...A){this.registered.push(...A)}reset(){this.buffer.splice(0),this.registered.forEach(A=>A.reset())}resize(){this.registered.forEach(A=>{A.isActive()&&A.resize()})}setBuffer(A){this.buffer.push(...A)}setType(A){this.type=A,this.registered.forEach(W=>W.setType(A))}write(A){let W=[];typeof A=="number"&&W.push(A),Array.isArray(A)&&A.forEach(q=>W.push(q)),typeof A=="string"&&A.split("").forEach(q=>W.push(q.charCodeAt(0))),this.registered.filter(q=>{q.isActive()&&q.write(W)}),W.forEach(q=>this.buffer.push(q))}};var ic=class extends po{constructor(A,W={}){super();this.buffer=[];this.options={};this.undoPosition=0;this.undoBuffer=[];this.options=Xt({maxUndoLevel:100},W),this.editorContainer=this.createElement("div"),this.editorContainer.setAttribute("tabindex","-1"),this.editorContainer.classList.add("hex-editor"),this.gutter=document.createElement("textarea"),this.gutter.setAttribute("readonly",""),this.gutter.setAttribute("rows","1"),this.gutter.setAttribute("spellcheck","false"),this.gutter.classList.add("gutter"),this.hexEditor=document.createElement("textarea"),this.hexEditor.setAttribute("rows","1"),this.hexEditor.setAttribute("spellcheck","false"),this.hexEditor.classList.add("hex-input"),this.textEditor=document.createElement("textarea"),this.textEditor.setAttribute("cols","15"),this.textEditor.setAttribute("rows","1"),this.textEditor.setAttribute("spellcheck","false"),this.textEditor.classList.add("text-input"),this.editorContainer.append(this.gutter,this.hexEditor,this.textEditor),A.append(this.editorContainer),this.editorContainer.addEventListener("click",({target:q})=>{if(q===this.hexEditor||q===this.gutter){this.hexEditor.focus();return}this.textEditor.focus()}),this.textEditor.addEventListener("keydown",q=>{let{altKey:K,ctrlKey:p,metaKey:L,key:g}=q;if(/^[ -~]$/.test(g)&&[K,p,L].every(v=>v===!1)){this.addValue(g),q.preventDefault();return}if(g==="Tab"&&[K,p,L].every(v=>v===!1)){this.addValue(9),q.preventDefault();return}if(g==="Enter"&&[K,p,L].every(v=>v===!1)){this.addValue(10),q.preventDefault();return}if(g==="Delete"&&!p||g==="Backspace"&&!p||p&&(g==="x"||g==="X")){let[v,C]=this.currentSelection();this.spliceBuffer([],v===C?g==="Backspace"?[v-1,v]:[v,v+1]:[v,C]),this.textEditor.setSelectionRange(v,v,"forward"),q.preventDefault();return}if((g==="Delete"||g==="Backspace")&&p){let[v]=this.currentSelection();this.deleteWord(g==="Delete"?"forward":"backward"),this.textEditor.setSelectionRange(v,v,"forward"),q.preventDefault();return}if(p&&g==="z"){this.performUndo(),q.preventDefault();return}if(p&&(g==="Z"||g==="y"||g==="Y")){this.performRedo(),q.preventDefault();return}g==="Unidentified"&&console.warn("Unidentified key pressed.")}),this.textEditor.addEventListener("paste",q=>{this.addValue(q.clipboardData.getData("text/plain")),q.preventDefault()})}addValue(A){let W=[];typeof A=="string"&&W.push(...A.split("").map(q=>q.charCodeAt(0))),typeof A=="number"&&W.push(A),this.spliceBuffer(W)}currentSelection(){let A=document.activeElement;if(![this.hexEditor,this.textEditor].includes(A))return[-1,-1];let W=A.selectionStart,q=A.selectionEnd;return[W<q?W:q,W<q?q:W,A.selectionDirection]}spliceBuffer(A=[],W=this.currentSelection()){let[q,K]=W;if(q===-1||K===-1)return;let p=this.buffer.slice(q,K);this.buffer.splice(q,K-q,...A);let L=()=>this.buffer.splice(q,K-q,...A),g=()=>this.buffer.splice(q,A.length,...p);this.addUndo({undo:g,redo:L},q===K&&A.length===1),this.updateDisplay()}deleteWord(A){let[W,q]=this.currentSelection();if(W===-1||q===-1)return;if(W!==q){this.spliceBuffer([],W<q?[W,q]:[q,W]);return}let K=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,95,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122],p=A==="forward"?1:-1,L=W+(A==="forward"?0:-1),g=this.buffer[L],v=K.includes(g),C=L;for(let y=C;y>=0&&y<this.buffer.length;y+=p){let m=this.buffer[y],w=K.includes(m);if(v&&!w||!v&&g!==m)break;C=y+(A==="forward"?1:0)}this.spliceBuffer([],W<C?[W,C]:[C,W])}matches(){return!0}on(A,W){this.textEditor.addEventListener(A,(...q)=>W(...q))}addUndo({undo:A,redo:W},q=!1){if(this.undoPosition<this.undoBuffer.length&&this.undoBuffer.splice(this.undoPosition,this.undoBuffer.length-this.undoPosition),this.undoBuffer.length>=this.options.maxUndoLevel&&(this.undoBuffer.shift(),this.undoPosition--),!q||this.undoPosition===0){this.undoBuffer.push({undo:A,redo:W}),this.undoPosition++;return}let{undo:K,redo:p}=this.undoBuffer.pop();this.undoBuffer.push({undo:()=>{A(),K()},redo:()=>{p(),W()}})}performRedo(){this.undoPosition>=this.undoBuffer.length||(this.undoBuffer[this.undoPosition].redo(),this.undoPosition++,this.updateDisplay())}performUndo(){this.undoPosition<1||(this.undoPosition--,this.undoBuffer[this.undoPosition].undo(),this.updateDisplay())}read(){var A;return((A=this.hexEditor.value.replace(/\s+/g,"").match(/[0-9a-f]{2}/g))==null?void 0:A.map(W=>parseInt(W,16)))||[]}readAsString(A="."){let W=this.buffer.map(q=>String.fromCharCode(q)).join("");return A===null?W:W.replace(/[\x00-\x1f\x7f-\xff]/g,A)}reset(){this.buffer.splice(0),this.updateDisplay()}setType(A){}write(A){}updateDisplay(){if(this.buffer.length===0){this.gutter.value="",this.hexEditor.value="",this.textEditor.value="",this.gutter.rows=1,this.hexEditor.rows=1,this.textEditor.rows=1;return}let A=Math.ceil((this.buffer.length+1)/16);this.gutter.value=Array(A).fill(0).map((W,q)=>(q+1).toString(16).padStart(6,"0")+"0:").join(`
`),this.hexEditor.value=this.buffer.map(W=>W.toString(16).padStart(2,"0")).join("").replace(/[0-9a-f]{4}/gi,"$& ").replace(/(([0-9a-f]{4} ){7}[0-9a-f]{4}) /gi,`$1
`),this.textEditor.value=this.readAsString(),this.gutter.rows=A,this.hexEditor.rows=A,this.textEditor.rows=A}},ps=ic;var mr=class{constructor(){this.mimeType="text/plain";this.langSelector=document.querySelector('select[name="lang"]'),this.addRegisteredLangs();let A=document.querySelector("div.stdout");this.codeHeader=new Pn(new on(document.querySelector("div.header"),{autoCloseBrackets:!0,matchBrackets:!0,placeholder:"Header..."})),this.codeHeader.activate(on),this.code=new Pn(new on(document.querySelector("div.code"),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0,placeholder:"Code..."}),new ps(document.querySelector("div.code"))),this.code.activate(ps),this.code.setType(this.langSelector.value),this.langSelector.addEventListener("change",()=>this.code.setType(this.langSelector.value)),this.codeFooter=new Pn(new on(document.querySelector("div.footer"),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0,placeholder:"Footer..."})),this.codeFooter.activate(on),this.stdout=cs(new wl(A),new Ol(A),new go(A),new vo(A),new hs(A)),this.stdout.activate("text/plain"),this.stderr=cs(new hs(document.querySelector("div.stderr"),{rows:8,theme:{foreground:"#f92672"}})),this.stderr.activate("text/plain"),this.stdin=mr.createEditor(document.querySelector('textarea[name="input"]')),this.args=mr.createEditor(document.querySelector('textarea[name="args"]')),this.io=new Al(this.langSelector,this.stdin,this.stdout,this.stderr,this.args),this.expanders=document.querySelectorAll('button[name="expand"]'),this.argsWrapper=document.querySelector(".args-wrapper"),this.addArg=document.querySelector(".args-wrapper .actions"),this.runButton=document.querySelector('button[name="run"]'),this.stopButton=document.querySelector('button[name="stop"]'),this.bytesCount=document.querySelector(".bytes .byte-count"),this.bytesPlural=document.querySelector(".bytes .plural"),this.encoded=document.querySelector(".encoded"),this.format=document.querySelector(".format"),this.copyLinkButton=document.querySelector('button[name="copy"]'),this.markdownButton=document.querySelector('button[name="markdown"]'),this.mimeTypeInput=document.querySelector(".stdout-header input"),this.connectExpanders(),this.code.on("change",()=>this.codeOnChange()),this.runButton.addEventListener("click",()=>this.runCode()),this.langSelector.addEventListener("change",()=>this.populateArgs()),this.copyLinkButton.addEventListener("click",()=>{let W=this.buildLink();location.href!==W&&history.pushState(this.buildHashData(),document.title,W),navigator.clipboard.writeText(W),mr.copied(this.copyLinkButton)}),this.markdownButton.addEventListener("click",()=>{navigator.clipboard.writeText(this.buildMarkdown()),mr.copied(this.markdownButton)}),this.mimeTypeInput.addEventListener("change",()=>this.setMimeType(this.mimeTypeInput.value||"text/plain",!1)),this.mimeTypeInput.addEventListener("keypress",({key:W})=>{W==="Enter"&&this.mimeType!==this.mimeTypeInput.value&&this.setMimeType(this.mimeTypeInput.value||"text/plain",!1)}),addEventListener("keydown",W=>{if(W.key==="s"&&(W.ctrlKey||W.metaKey)){let q=this.buildLink();history.pushState(this.buildHashData(),document.title,q),navigator.clipboard.writeText(q),this.toast("Saved!","success",{hide:2}),W.preventDefault()}}),addEventListener("hashchange",()=>{this.parseHashData(location.hash),this.code.read().length&&this.runCode()}),addEventListener("resize",()=>this.resize()),this.parseHashData(location.hash);try{this.populateArgs()}catch(W){this.toast(W.message,"error")}this.codeOnChange(),this.code.read().length&&this.runCode(),this.resize()}addRegisteredLangs(){Pr.all().forEach(A=>{let W=Pr.get(A),q=document.createElement("option");q.setAttribute("value",W.getId()),q.append(document.createTextNode(W.getName())),this.langSelector.append(q)})}setLang(A){if(!Pr.all().includes(A))throw new TypeError(`Unknown lang: ${A}.`);this.langSelector.value=A,this.setCodeHighlight()}getLangId(){return this.langSelector.value}setCodeHighlight(){let A=Pr.get(this.getLangId());[this.codeHeader,this.code,this.codeFooter].forEach(W=>{if(Bn.decoder(W.readAsString(null)).name()!=="default"){W.setType(null);return}W.setType(A.getHighlighterRef())})}static createEditor(A,W={}){return(0,nc.fromTextArea)(A,Jr(Xt({mode:null,theme:"monokai",viewportMargin:1/0},W),{extraKeys:Xt({"Ctrl-D":"duplicateLine","Ctrl-/":"toggleComment","Shift-Tab":!1,Tab:!1},W.extraKeys||{})}))}resize(){this.stdout.resize(),this.stderr.resize()}codeOnChange(){let A=this.code.read();this.encoded.setAttribute("hidden",""),this.setCodeHighlight();let W=Bn.decoder(this.code.readAsString(null));W.name()!=="default"&&(this.encoded.removeAttribute("hidden"),this.format.innerText=W.name()),this.showBytes(A.length)}runCode(){let A=Date.now(),W=()=>{q.terminate(),this.stderr.write(`Aborted execution after ${Date.now()-A}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",W)};this.stdout.reset(),this.stderr.reset(),this.runButton.setAttribute("disabled",""),this.stopButton.removeAttribute("disabled");let q=Pr.run(this.getLangId(),[].concat(this.codeHeader.read(),this.code.read(),this.codeFooter.read()),this.io.getArgs(),this.io.getStdin());this.stopButton.addEventListener("click",W),q.onmessage=({data:K})=>{let{type:p,output:L,error:g}=K;L&&this.stdout.write(L),g&&this.stderr.write(g!=null?g:""),p==="done"&&(this.stderr.write(`Completed execution after ${Date.now()-A}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",W),q.terminate())},q.onerror=K=>{this.toast(`Worker error: ${K.message}`,"error"),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled","")}}populateArgs(){for(;this.addArg.firstElementChild;)this.addArg.firstElementChild.remove();let A=Pr.get(this.getLangId());if(!A)throw new TypeError("Unregistered lang: "+this.getLangId());let W=A.getArgs();W!==null?(this.argsWrapper.removeAttribute("hidden"),W.forEach(q=>{let K=document.createElement("button");K.append(document.createTextNode(q)),K.addEventListener("click",()=>{var g;let p=(g=this.io.getArgs())!=null?g:"";new RegExp("(\\n|^)"+q+"(\\n|$)").test(p)||this.io.setArgs((p+`
`+q).trim())}),this.addArg.append(K)})):this.argsWrapper.setAttribute("hidden",""),this.io.argsRefresh()}static expand(A){let W=A.nextElementSibling,q=document.querySelector(A.dataset.target);if(!q){console.debug("No collapser or target for expander: ",A);return}A.setAttribute("hidden",""),q.removeAttribute("hidden"),W.removeAttribute("hidden"),W.focus()}static collapse(A){let W=A.nextElementSibling,q=document.querySelector(A.dataset.target);if(!q){console.debug("No collapser or target for expander: ",A);return}A.removeAttribute("hidden"),q.setAttribute("hidden",""),W.setAttribute("hidden",""),A.focus()}connectExpanders(){this.expanders.forEach(A=>{let W=A.nextElementSibling;if(!W||!W.matches('button[name="collapse"]')){console.debug("No collapser or target for expander: ",A);return}A.addEventListener("click",()=>mr.expand(A)),W.addEventListener("click",()=>mr.collapse(A))})}setMimeType(A,W=!0){this.mimeType=A,W&&(this.mimeTypeInput.value=A),this.stdout.activate(A),this.stdout.resize()}static copied(A){A.setAttribute("disabled",""),A.style.width=A.offsetWidth+"px",A.classList.toggle("copied"),setTimeout(()=>{A.removeAttribute("disabled"),A.style.width=null,A.classList.toggle("copied")},1e3)}parseHashData(A){var p,L,g,v,C,y;if(!A||A.length<2)return;let W;try{let m=atob(A.slice(1));W=JSON.parse(m)}catch(m){if(m instanceof DOMException){this.toast("Unable to decode URL data. Aborting.","error");return}if(m instanceof SyntaxError){this.toast("Unable to decode JSON data. Aborting.","error");return}throw m}let[q]=Array.from(this.expanders).filter(m=>m.parentElement.matches(".code-header")),[K]=Array.from(this.expanders).filter(m=>m.parentElement.matches(".code-footer"));W.header&&mr.expand(q),W.footer&&mr.expand(K),this.setLang((p=W.lang)!=null?p:this.getLangId()),this.codeHeader.write((L=W.header)!=null?L:""),this.code.write((g=W.code)!=null?g:""),this.codeFooter.write((v=W.footer)!=null?v:""),this.io.setArgs((C=W.args)!=null?C:""),this.io.setStdin((y=W.input)!=null?y:""),W.mime&&this.setMimeType(W.mime)}buildHashData(){let A={lang:this.getLangId(),code:this.code.readAsString(null)},W=this.codeHeader.readAsString(null),q=this.codeFooter.readAsString(null),K=this.io.getArgs(),p=this.io.getStdin(),L=this.mimeType;return Object.entries({header:W,footer:q,args:K,input:p}).forEach(([g,v])=>{v&&(A[g]=v)}),L!=="text/plain"&&(A.mime=L),btoa(JSON.stringify(A))}buildLink(){let A=this.buildHashData();return location.protocol+"//"+location.host+location.pathname+"#"+A}buildMarkdown(){let A=this.io.getArgs().trim().split(/\n/).join(" "),W=Pr.get(this.getLangId()),q=Math.random().toString(36).slice(2,10),K=this.code.read().length;return`# [${W.getName()}]${A?` + \`${A}\``:""}, ${K} byte${K===1?"":"s"}

<!-- language-all: lang-${W.getHighlighterRef()} -->

<pre><code>${this.code.readAsString().replace(/[&<>]/g,p=>p==="<"?"&lt;":p===">"?"&gt;":p==="&"?"&amp;":p)}</code></pre>

[Try it online!][TIO-${q}]

[${W.getName()}]: ${W.getURL()}
[TIO-${q}]: ${this.buildLink()}`}showBytes(A){if(this.bytesCount.innerText=A.toString(),A===1){this.bytesPlural.setAttribute("hidden","");return}this.bytesPlural.removeAttribute("hidden")}toast(A,W,q={}){return q.events||(q.events={}),q.events.click||(q.events.click=[]),q.events.click.push(K=>K.hide()),new oc.Melba(Jr(Xt({},q),{content:A,type:W}))}},ho=mr;var sc=class{name(){return"xxd"}matches(A){return/^(\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\n|$))+$/.test(A)}decode(A){return A.trim().replace(/(?<=^|\n)\d{7,8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map(W=>parseInt(W,16))}},ac=sc;Bn.register(new ac,new sl,new rl,new nl);Pr.register(new fl,new vl);var Dh=new ho;})();
/**
 * Copyright (c) 2017 The xterm.js authors. All rights reserved.
 * @license MIT
 */
//# sourceMappingURL=app.js.map
