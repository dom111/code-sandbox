(()=>{var Su=Object.create;var Xo=Object.defineProperty;var Cu=Object.getOwnPropertyDescriptor;var wu=Object.getOwnPropertyNames;var xu=Object.getPrototypeOf,ku=Object.prototype.hasOwnProperty;var Lu=V=>Xo(V,"__esModule",{value:!0});var lr=(V,q)=>()=>(q||V((q={exports:{}}).exports,q),q.exports);var Eu=(V,q,Z,ie)=>{if(q&&typeof q=="object"||typeof q=="function")for(let J of wu(q))!ku.call(V,J)&&(Z||J!=="default")&&Xo(V,J,{get:()=>q[J],enumerable:!(ie=Cu(q,J))||ie.enumerable});return V},ti=(V,q)=>Eu(Lu(Xo(V!=null?Su(xu(V)):{},"default",!q&&V&&V.__esModule?{get:()=>V.default,enumerable:!0}:{value:V,enumerable:!0})),V);var pr=lr(($o,Yo)=>{(function(V,q){typeof $o=="object"&&typeof Yo!="undefined"?Yo.exports=q():typeof define=="function"&&define.amd?define(q):(V=V||self,V.CodeMirror=q())})($o,function(){"use strict";var V=navigator.userAgent,q=navigator.platform,Z=/gecko\/\d/i.test(V),ie=/MSIE \d/.test(V),J=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(V),h=/Edge\/(\d+)/.exec(V),x=ie||J||h,_=x&&(ie?document.documentMode||6:+(h||J)[1]),b=!h&&/WebKit\//.test(V),S=b&&/Qt\/\d+\.\d+/.test(V),v=!h&&/Chrome\//.test(V),y=/Opera\//.test(V),C=/Apple Computer/.test(navigator.vendor),u=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(V),f=/PhantomJS/.test(V),d=C&&(/Mobile\/\w+/.test(V)||navigator.maxTouchPoints>2),a=/Android/.test(V),s=d||a||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(V),o=d||/Mac/.test(q),l=/\bCrOS\b/.test(V),p=/win/i.test(q),g=y&&V.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1])),g&&g>=15&&(y=!1,b=!0);var T=o&&(S||y&&(g==null||g<12.11)),A=Z||x&&_>=9;function B(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var D=function(e,t){var i=e.className,r=B(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function R(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return R(e).appendChild(t)}function I(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var c=0;c<t.length;++c)n.appendChild(t[c]);return n}function w(e,t,i,r){var n=I(e,t,i,r);return n.setAttribute("role","presentation"),n}var U;document.createRange?U=function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:U=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function N(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function L(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function O(e,t){var i=e.className;B(t).test(i)||(e.className+=(i?" ":"")+t)}function W(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!B(i[r]).test(t)&&(t+=" "+i[r]);return t}var Y=function(e){e.select()};d?Y=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(Y=function(e){try{e.select()}catch{}});function ue(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function le(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function we(e,t,i,r,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var c=r||0,m=n||0;;){var k=e.indexOf("	",c);if(k<0||k>=t)return m+(t-c);m+=k-c,m+=i-m%i,c=k+1}}var xe=function(){this.id=null,this.f=null,this.time=0,this.handler=ue(this.onTimeout,this)};xe.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},xe.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function de(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var F=50,z={toString:function(){return"CodeMirror.Pass"}},K={scroll:!1},re={origin:"*mouse"},$={origin:"+move"};function be(e,t,i){for(var r=0,n=0;;){var c=e.indexOf("	",r);c==-1&&(c=e.length);var m=c-r;if(c==e.length||n+m>=t)return r+Math.min(m,t-n);if(n+=c-r,n+=i-n%i,r=c+1,n>=t)return r}}var Te=[""];function Ke(e){for(;Te.length<=e;)Te.push(Me(Te)+" ");return Te[e]}function Me(e){return e[e.length-1]}function He(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function ge(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}function Xe(){}function Ve(e,t){var i;return Object.create?i=Object.create(e):(Xe.prototype=e,i=new Xe),t&&le(t,i),i}var Ge=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ze(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Ge.test(e))}function te(e,t){return t?t.source.indexOf("\\w")>-1&&ze(e)?!0:t.test(e):ze(e)}function ve(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var oe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function We(e){return e.charCodeAt(0)>=768&&oe.test(e)}function Ee(e,t,i){for(;(i<0?t>0:t<e.length)&&We(e.charAt(t));)t+=i;return t}function De(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var n=(t+i)/2,c=r<0?Math.ceil(n):Math.floor(n);if(c==t)return e(c)?t:i;e(c)?i=c:t=c+r}}function Ae(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var n=!1,c=0;c<e.length;++c){var m=e[c];(m.from<i&&m.to>t||t==i&&m.to==t)&&(r(Math.max(m.from,t),Math.min(m.to,i),m.level==1?"rtl":"ltr",c),n=!0)}n||r(t,i,"ltr")}var Ne=null;function Fe(e,t,i){var r;Ne=null;for(var n=0;n<e.length;++n){var c=e[n];if(c.from<t&&c.to>t)return n;c.to==t&&(c.from!=c.to&&i=="before"?r=n:Ne=n),c.from==t&&(c.from!=c.to&&i!="before"?r=n:Ne=n)}return r??Ne}var Et=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(P){return P<=247?e.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?t.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,c=/[LRr]/,m=/[Lb1n]/,k=/[1n]/;function M(P,j,X){this.level=P,this.from=j,this.to=X}return function(P,j){var X=j=="ltr"?"L":"R";if(P.length==0||j=="ltr"&&!r.test(P))return!1;for(var ee=P.length,Q=[],ne=0;ne<ee;++ne)Q.push(i(P.charCodeAt(ne)));for(var fe=0,_e=X;fe<ee;++fe){var ye=Q[fe];ye=="m"?Q[fe]=_e:_e=ye}for(var Ce=0,me=X;Ce<ee;++Ce){var ke=Q[Ce];ke=="1"&&me=="r"?Q[Ce]="n":c.test(ke)&&(me=ke,ke=="r"&&(Q[Ce]="R"))}for(var Pe=1,Re=Q[0];Pe<ee-1;++Pe){var qe=Q[Pe];qe=="+"&&Re=="1"&&Q[Pe+1]=="1"?Q[Pe]="1":qe==","&&Re==Q[Pe+1]&&(Re=="1"||Re=="n")&&(Q[Pe]=Re),Re=qe}for(var Je=0;Je<ee;++Je){var bt=Q[Je];if(bt==",")Q[Je]="N";else if(bt=="%"){var tt=void 0;for(tt=Je+1;tt<ee&&Q[tt]=="%";++tt);for(var tr=Je&&Q[Je-1]=="!"||tt<ee&&Q[tt]=="1"?"1":"N",$t=Je;$t<tt;++$t)Q[$t]=tr;Je=tt-1}}for(var ut=0,Yt=X;ut<ee;++ut){var kt=Q[ut];Yt=="L"&&kt=="1"?Q[ut]="L":c.test(kt)&&(Yt=kt)}for(var vt=0;vt<ee;++vt)if(n.test(Q[vt])){var ft=void 0;for(ft=vt+1;ft<ee&&n.test(Q[ft]);++ft);for(var nt=(vt?Q[vt-1]:X)=="L",Vt=(ft<ee?Q[ft]:X)=="L",tn=nt==Vt?nt?"L":"R":X,hi=vt;hi<ft;++hi)Q[hi]=tn;vt=ft-1}for(var Bt=[],Hr,St=0;St<ee;)if(m.test(Q[St])){var Ko=St;for(++St;St<ee&&m.test(Q[St]);++St);Bt.push(new M(0,Ko,St))}else{var ei=St,Ti=Bt.length,Mi=j=="rtl"?1:0;for(++St;St<ee&&Q[St]!="L";++St);for(var Nt=ei;Nt<St;)if(k.test(Q[Nt])){ei<Nt&&(Bt.splice(Ti,0,new M(1,ei,Nt)),Ti+=Mi);var rn=Nt;for(++Nt;Nt<St&&k.test(Q[Nt]);++Nt);Bt.splice(Ti,0,new M(2,rn,Nt)),Ti+=Mi,ei=Nt}else++Nt;ei<St&&Bt.splice(Ti,0,new M(1,ei,St))}return j=="ltr"&&(Bt[0].level==1&&(Hr=P.match(/^\s+/))&&(Bt[0].from=Hr[0].length,Bt.unshift(new M(0,0,Hr[0].length))),Me(Bt).level==1&&(Hr=P.match(/\s+$/))&&(Me(Bt).to-=Hr[0].length,Bt.push(new M(0,ee-Hr[0].length,ee)))),j=="rtl"?Bt.reverse():Bt}}();function ht(e,t){var i=e.order;return i==null&&(i=e.order=Et(e.text,t)),i}var rr=[],Oe=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||rr).concat(i)}};function vr(e,t){return e._handlers&&e._handlers[t]||rr}function dt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var c=de(n,i);c>-1&&(r[t]=n.slice(0,c).concat(n.slice(c+1)))}}}function Be(e,t){var i=vr(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function Qe(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Be(e,i||t.type,e,t),Ct(t)||t.codemirrorIgnore}function _r(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)de(i,t[r])==-1&&i.push(t[r])}function rt(e,t){return vr(e,t).length>0}function Wt(e){e.prototype.on=function(t,i){Oe(this,t,i)},e.prototype.off=function(t,i){dt(this,t,i)}}function ot(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function gr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ct(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function cr(e){ot(e),gr(e)}function ir(e){return e.target||e.srcElement}function Wr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),o&&e.ctrlKey&&t==1&&(t=3),t}var xr=function(){if(x&&_<9)return!1;var e=I("div");return"draggable"in e||"dragDrop"in e}(),pt;function qr(e){if(pt==null){var t=I("span","\u200B");E(e,I("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(pt=t.offsetWidth<=1&&t.offsetHeight>2&&!(x&&_<8))}var i=pt?I("span","\u200B"):I("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var kr;function qt(e){if(kr!=null)return kr;var t=E(e,document.createTextNode("A\u062EA")),i=U(t,0,1).getBoundingClientRect(),r=U(t,1,2).getBoundingClientRect();return R(e),!i||i.left==i.right?!1:kr=r.right-i.right<3}var Lr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var c=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),m=c.indexOf("\r");m!=-1?(i.push(c.slice(0,m)),t+=m+1):(i.push(c),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},jr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},zr=function(){var e=I("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Er=null;function nr(e){if(Er!=null)return Er;var t=E(e,I("span","x")),i=t.getBoundingClientRect(),r=U(t,0,1).getBoundingClientRect();return Er=Math.abs(i.left-r.left)>1}var Tt={},wt={};function Ur(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Tt[e]=t}function Zt(e,t){wt[e]=t}function yr(e){if(typeof e=="string"&&wt.hasOwnProperty(e))e=wt[e];else if(e&&typeof e.name=="string"&&wt.hasOwnProperty(e.name)){var t=wt[e.name];typeof t=="string"&&(t={name:t}),e=Ve(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return yr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return yr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function mr(e,t){t=yr(t);var i=Tt[t.name];if(!i)return mr(e,"text/plain");var r=i(e,t);if(It.hasOwnProperty(t.name)){var n=It[t.name];for(var c in n)!n.hasOwnProperty(c)||(r.hasOwnProperty(c)&&(r["_"+c]=r[c]),r[c]=n[c])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var m in t.modeProps)r[m]=t.modeProps[m];return r}var It={};function Ht(e,t){var i=It.hasOwnProperty(e)?It[e]:It[e]={};le(t,i)}function xt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function Tr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Mr(e,t,i){return e.startState?e.startState(t,i):!0}var Ze=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Ze.prototype.eol=function(){return this.pos>=this.string.length},Ze.prototype.sol=function(){return this.pos==this.lineStart},Ze.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ze.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ze.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},Ze.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ze.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ze.prototype.skipToEnd=function(){this.pos=this.string.length},Ze.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ze.prototype.backUp=function(e){this.pos-=e},Ze.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=we(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.indentation=function(){return we(this.string,null,this.tabSize)-(this.lineStart?we(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(m){return i?m.toLowerCase():m},n=this.string.substr(this.pos,e.length);if(r(n)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var c=this.string.slice(this.pos).match(e);return c&&c.index>0?null:(c&&t!==!1&&(this.pos+=c[0].length),c)}},Ze.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ze.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ze.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ze.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Le(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],c=n.chunkSize();if(t<c){i=n;break}t-=c}return i.lines[t]}function jt(e,t,i){var r=[],n=t.line;return e.iter(t.line,i.line+1,function(c){var m=c.text;n==i.line&&(m=m.slice(0,i.ch)),n==t.line&&(m=m.slice(t.ch)),r.push(m),++n}),r}function Ar(e,t,i){var r=[];return e.iter(t,i,function(n){r.push(n.text)}),r}function _t(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function Ue(e){if(e.parent==null)return null;for(var t=e.parent,i=de(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function zt(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],c=n.height;if(t<c){e=n;continue e}t-=c,i+=n.chunkSize()}return i}while(!e.lines);for(var m=0;m<e.lines.length;++m){var k=e.lines[m],M=k.height;if(t<M)break;t-=M}return i+m}function ur(e,t){return t>=e.first&&t<e.first+e.size}function Rr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function he(e,t,i){if(i===void 0&&(i=null),!(this instanceof he))return new he(e,t,i);this.line=e,this.ch=t,this.sticky=i}function H(e,t){return e.line-t.line||e.ch-t.ch}function G(e,t){return e.sticky==t.sticky&&H(e,t)==0}function ce(e){return he(e.line,e.ch)}function pe(e,t){return H(e,t)<0?t:e}function Ie(e,t){return H(e,t)<0?e:t}function je(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Se(e,t){if(t.line<e.first)return he(e.first,0);var i=e.first+e.size-1;return t.line>i?he(i,Le(e,i).text.length):lt(t,Le(e,t.line).text.length)}function lt(e,t){var i=e.ch;return i==null||i>t?he(e.line,t):i<0?he(e.line,0):e}function Mt(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=Se(e,t[r]);return i}var Or=function(e,t){this.state=e,this.lookAhead=t},Jt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};Jt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Jt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Jt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Jt.fromSaved=function(e,t,i){return t instanceof Or?new Jt(e,xt(e.mode,t.state),i,t.lookAhead):new Jt(e,xt(e.mode,t),i)},Jt.prototype.save=function(e){var t=e!==!1?xt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Or(t,this.maxLookAhead):t};function Ri(e,t,i,r){var n=[e.state.modeGen],c={};Hi(e,t.text,e.doc.mode,i,function(P,j){return n.push(P,j)},c,r);for(var m=i.state,k=function(P){i.baseTokens=n;var j=e.state.overlays[P],X=1,ee=0;i.state=!0,Hi(e,t.text,j.mode,i,function(Q,ne){for(var fe=X;ee<Q;){var _e=n[X];_e>Q&&n.splice(X,1,Q,n[X+1],_e),X+=2,ee=Math.min(Q,_e)}if(!!ne)if(j.opaque)n.splice(fe,X-fe,Q,"overlay "+ne),X=fe+2;else for(;fe<X;fe+=2){var ye=n[fe+1];n[fe+1]=(ye?ye+" ":"")+"overlay "+ne}},c),i.state=m,i.baseTokens=null,i.baseTokenPos=1},M=0;M<e.state.overlays.length;++M)k(M);return{styles:n,classes:c.bgClass||c.textClass?c:null}}function Oi(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Kr(e,Ue(t)),n=t.text.length>e.options.maxHighlightLength&&xt(e.doc.mode,r.state),c=Ri(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=c.styles,c.classes?t.styleClasses=c.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Kr(e,t,i){var r=e.doc,n=e.display;if(!r.mode.startState)return new Jt(r,!0,t);var c=nn(e,t,i),m=c>r.first&&Le(r,c-1).stateAfter,k=m?Jt.fromSaved(r,m,c):new Jt(r,Mr(r.mode),c);return r.iter(c,t,function(M){pi(e,M.text,k);var P=k.line;M.stateAfter=P==t-1||P%5==0||P>=n.viewFrom&&P<n.viewTo?k.save():null,k.nextLine()}),i&&(r.modeFrontier=k.line),k}function pi(e,t,i,r){var n=e.doc.mode,c=new Ze(t,e.options.tabSize,i);for(c.start=c.pos=r||0,t==""&&Di(n,i.state);!c.eol();)vi(n,c,i.state),c.start=c.pos}function Di(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=Tr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function vi(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=Tr(e,i).mode);var c=e.token(t,i);if(t.pos>t.start)return c}throw new Error("Mode "+e.name+" failed to advance stream.")}var Pi=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Bi(e,t,i,r){var n=e.doc,c=n.mode,m;t=Se(n,t);var k=Le(n,t.line),M=Kr(e,t.line,i),P=new Ze(k.text,e.options.tabSize,M),j;for(r&&(j=[]);(r||P.pos<t.ch)&&!P.eol();)P.start=P.pos,m=vi(c,P,M.state),r&&j.push(new Pi(P,m,xt(n.mode,M.state)));return r?j:new Pi(P,m,M.state)}function Ii(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Hi(e,t,i,r,n,c,m){var k=i.flattenSpans;k==null&&(k=e.options.flattenSpans);var M=0,P=null,j=new Ze(t,e.options.tabSize,r),X,ee=e.options.addModeClass&&[null];for(t==""&&Ii(Di(i,r.state),c);!j.eol();){if(j.pos>e.options.maxHighlightLength?(k=!1,m&&pi(e,t,r,j.pos),j.pos=t.length,X=null):X=Ii(vi(i,j,r.state,ee),c),ee){var Q=ee[0].name;Q&&(X="m-"+(X?Q+" "+X:Q))}if(!k||P!=X){for(;M<j.start;)M=Math.min(j.start,M+5e3),n(M,P);P=X}j.start=j.pos}for(;M<j.pos;){var ne=Math.min(j.pos,M+5e3);n(ne,P),M=ne}}function nn(e,t,i){for(var r,n,c=e.doc,m=i?-1:t-(e.doc.mode.innerMode?1e3:100),k=t;k>m;--k){if(k<=c.first)return c.first;var M=Le(c,k-1),P=M.stateAfter;if(P&&(!i||k+(P instanceof Or?P.lookAhead:0)<=c.modeFrontier))return k;var j=we(M.text,null,e.options.tabSize);(n==null||r>j)&&(n=k-1,r=j)}return n}function An(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var n=Le(e,r).stateAfter;if(n&&(!(n instanceof Or)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var Rn=!1,fr=!1;function On(){Rn=!0}function oo(){fr=!0}function Fi(e,t,i){this.marker=e,this.from=t,this.to=i}function ae(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function se(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function hr(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function _i(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],m=c.marker,k=c.from==null||(m.inclusiveLeft?c.from<=t:c.from<t);if(k||c.from==t&&m.type=="bookmark"&&(!i||!c.marker.insertLeft)){var M=c.to==null||(m.inclusiveRight?c.to>=t:c.to>t);(r||(r=[])).push(new Fi(m,c.from,M?null:c.to))}}return r}function gi(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var c=e[n],m=c.marker,k=c.to==null||(m.inclusiveRight?c.to>=t:c.to>t);if(k||c.from==t&&m.type=="bookmark"&&(!i||c.marker.insertLeft)){var M=c.from==null||(m.inclusiveLeft?c.from<=t:c.from<t);(r||(r=[])).push(new Fi(m,M?null:c.from-t,c.to==null?null:c.to-t))}}return r}function st(e,t){if(t.full)return null;var i=ur(e,t.from.line)&&Le(e,t.from.line).markedSpans,r=ur(e,t.to.line)&&Le(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,c=t.to.ch,m=H(t.from,t.to)==0,k=_i(i,n,m),M=gi(r,c,m),P=t.text.length==1,j=Me(t.text).length+(P?n:0);if(k)for(var X=0;X<k.length;++X){var ee=k[X];if(ee.to==null){var Q=ae(M,ee.marker);Q?P&&(ee.to=Q.to==null?null:Q.to+j):ee.to=n}}if(M)for(var ne=0;ne<M.length;++ne){var fe=M[ne];if(fe.to!=null&&(fe.to+=j),fe.from==null){var _e=ae(k,fe.marker);_e||(fe.from=j,P&&(k||(k=[])).push(fe))}else fe.from+=j,P&&(k||(k=[])).push(fe)}k&&(k=or(k)),M&&M!=k&&(M=or(M));var ye=[k];if(!P){var Ce=t.text.length-2,me;if(Ce>0&&k)for(var ke=0;ke<k.length;++ke)k[ke].to==null&&(me||(me=[])).push(new Fi(k[ke].marker,null,null));for(var Pe=0;Pe<Ce;++Pe)ye.push(me);ye.push(M)}return ye}function or(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function dr(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(Q){if(Q.markedSpans)for(var ne=0;ne<Q.markedSpans.length;++ne){var fe=Q.markedSpans[ne].marker;fe.readOnly&&(!r||de(r,fe)==-1)&&(r||(r=[])).push(fe)}}),!r)return null;for(var n=[{from:t,to:i}],c=0;c<r.length;++c)for(var m=r[c],k=m.find(0),M=0;M<n.length;++M){var P=n[M];if(!(H(P.to,k.from)<0||H(P.from,k.to)>0)){var j=[M,1],X=H(P.from,k.from),ee=H(P.to,k.to);(X<0||!m.inclusiveLeft&&!X)&&j.push({from:P.from,to:k.from}),(ee>0||!m.inclusiveRight&&!ee)&&j.push({from:k.to,to:P.to}),n.splice.apply(n,j),M+=j.length-3}}return n}function ii(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function At(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Ut(e){return e.inclusiveLeft?-1:0}function Dr(e){return e.inclusiveRight?1:0}function Gr(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),n=t.find(),c=H(r.from,n.from)||Ut(e)-Ut(t);if(c)return-c;var m=H(r.to,n.to)||Dr(e)-Dr(t);return m||t.id-e.id}function Xr(e,t){var i=fr&&e.markedSpans,r;if(i)for(var n=void 0,c=0;c<i.length;++c)n=i[c],n.marker.collapsed&&(t?n.from:n.to)==null&&(!r||Gr(r,n.marker)<0)&&(r=n.marker);return r}function $r(e){return Xr(e,!0)}function Rt(e){return Xr(e,!1)}function Kt(e,t){var i=fr&&e.markedSpans,r;if(i)for(var n=0;n<i.length;++n){var c=i[n];c.marker.collapsed&&(c.from==null||c.from<t)&&(c.to==null||c.to>t)&&(!r||Gr(r,c.marker)<0)&&(r=c.marker)}return r}function it(e,t,i,r,n){var c=Le(e,t),m=fr&&c.markedSpans;if(m)for(var k=0;k<m.length;++k){var M=m[k];if(!!M.marker.collapsed){var P=M.marker.find(0),j=H(P.from,i)||Ut(M.marker)-Ut(n),X=H(P.to,r)||Dr(M.marker)-Dr(n);if(!(j>=0&&X<=0||j<=0&&X>=0)&&(j<=0&&(M.marker.inclusiveRight&&n.inclusiveLeft?H(P.to,i)>=0:H(P.to,i)>0)||j>=0&&(M.marker.inclusiveRight&&n.inclusiveLeft?H(P.from,r)<=0:H(P.from,r)<0)))return!0}}}function ct(e){for(var t;t=$r(e);)e=t.find(-1,!0).line;return e}function sr(e){for(var t;t=Rt(e);)e=t.find(1,!0).line;return e}function Yr(e){for(var t,i;t=Rt(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function br(e,t){var i=Le(e,t),r=ct(i);return i==r?t:Ue(r)}function yi(e,t){if(t>e.lastLine())return t;var i=Le(e,t),r;if(!Ot(e,i))return t;for(;r=Rt(i);)i=r.find(1,!0).line;return Ue(i)+1}function Ot(e,t){var i=fr&&t.markedSpans;if(i){for(var r=void 0,n=0;n<i.length;++n)if(r=i[n],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&Pr(e,t,r))return!0}}}function Pr(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return Pr(e,r.line,ae(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,c=0;c<t.markedSpans.length;++c)if(n=t.markedSpans[c],n.marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(n.to==null||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Pr(e,t,n))return!0}function Dt(e){e=ct(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var c=i.parent;c;i=c,c=i.parent)for(var m=0;m<c.children.length;++m){var k=c.children[m];if(k==i)break;t+=k.height}return t}function ni(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=$r(r);){var n=i.find(0,!0);r=n.from.line,t+=n.from.ch-n.to.ch}for(r=e;i=Rt(r);){var c=i.find(0,!0);t-=r.text.length-c.from.ch,r=c.to.line,t+=r.text.length-c.to.ch}return t}function mi(e){var t=e.display,i=e.doc;t.maxLine=Le(i,i.first),t.maxLineLength=ni(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var n=ni(r);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=r)})}var Qt=function(e,t,i){this.text=e,At(this,t),this.height=i?i(this):1};Qt.prototype.lineNo=function(){return Ue(this)},Wt(Qt);function Vr(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),ii(e),At(e,i);var n=r?r(e):1;n!=e.height&&_t(e,n)}function so(e){e.parent=null,ii(e)}var Hl={},Fl={};function es(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Fl:Hl;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function ts(e,t){var i=w("span",null,null,b?"padding-right: .1px":null),r={pre:w("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var c=n?t.rest[n-1]:t.line,m=void 0;r.pos=0,r.addToken=Wl,qt(e.display.measure)&&(m=ht(c,e.doc.direction))&&(r.addToken=jl(r.addToken,m)),r.map=[];var k=t!=e.display.externalMeasured&&Ue(c);zl(c,r,Oi(e,c,k)),c.styleClasses&&(c.styleClasses.bgClass&&(r.bgClass=W(c.styleClasses.bgClass,r.bgClass||"")),c.styleClasses.textClass&&(r.textClass=W(c.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(qr(e.display.measure))),n==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(b){var M=r.content.lastChild;(/\bcm-tab\b/.test(M.className)||M.querySelector&&M.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Be(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=W(r.pre.className,r.textClass||"")),r}function Nl(e){var t=I("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Wl(e,t,i,r,n,c,m){if(!!t){var k=e.splitSpaces?ql(t,e.trailingSpace):t,M=e.cm.state.specialChars,P=!1,j;if(!M.test(t))e.col+=t.length,j=document.createTextNode(k),e.map.push(e.pos,e.pos+t.length,j),x&&_<9&&(P=!0),e.pos+=t.length;else{j=document.createDocumentFragment();for(var X=0;;){M.lastIndex=X;var ee=M.exec(t),Q=ee?ee.index-X:t.length-X;if(Q){var ne=document.createTextNode(k.slice(X,X+Q));x&&_<9?j.appendChild(I("span",[ne])):j.appendChild(ne),e.map.push(e.pos,e.pos+Q,ne),e.col+=Q,e.pos+=Q}if(!ee)break;X+=Q+1;var fe=void 0;if(ee[0]=="	"){var _e=e.cm.options.tabSize,ye=_e-e.col%_e;fe=j.appendChild(I("span",Ke(ye),"cm-tab")),fe.setAttribute("role","presentation"),fe.setAttribute("cm-text","	"),e.col+=ye}else ee[0]=="\r"||ee[0]==`
`?(fe=j.appendChild(I("span",ee[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),fe.setAttribute("cm-text",ee[0]),e.col+=1):(fe=e.cm.options.specialCharPlaceholder(ee[0]),fe.setAttribute("cm-text",ee[0]),x&&_<9?j.appendChild(I("span",[fe])):j.appendChild(fe),e.col+=1);e.map.push(e.pos,e.pos+1,fe),e.pos++}}if(e.trailingSpace=k.charCodeAt(t.length-1)==32,i||r||n||P||c||m){var Ce=i||"";r&&(Ce+=r),n&&(Ce+=n);var me=I("span",[j],Ce,c);if(m)for(var ke in m)m.hasOwnProperty(ke)&&ke!="style"&&ke!="class"&&me.setAttribute(ke,m[ke]);return e.content.appendChild(me)}e.content.appendChild(j)}}function ql(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var c=e.charAt(n);c==" "&&i&&(n==e.length-1||e.charCodeAt(n+1)==32)&&(c="\xA0"),r+=c,i=c==" "}return r}function jl(e,t){return function(i,r,n,c,m,k,M){n=n?n+" cm-force-border":"cm-force-border";for(var P=i.pos,j=P+r.length;;){for(var X=void 0,ee=0;ee<t.length&&(X=t[ee],!(X.to>P&&X.from<=P));ee++);if(X.to>=j)return e(i,r,n,c,m,k,M);e(i,r.slice(0,X.to-P),n,c,null,k,M),c=null,r=r.slice(X.to-P),P=X.to}}}function rs(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function zl(e,t,i){var r=e.markedSpans,n=e.text,c=0;if(!r){for(var m=1;m<i.length;m+=2)t.addToken(t,n.slice(c,c=i[m]),es(i[m+1],t.cm.options));return}for(var k=n.length,M=0,P=1,j="",X,ee,Q=0,ne,fe,_e,ye,Ce;;){if(Q==M){ne=fe=_e=ee="",Ce=null,ye=null,Q=1/0;for(var me=[],ke=void 0,Pe=0;Pe<r.length;++Pe){var Re=r[Pe],qe=Re.marker;if(qe.type=="bookmark"&&Re.from==M&&qe.widgetNode)me.push(qe);else if(Re.from<=M&&(Re.to==null||Re.to>M||qe.collapsed&&Re.to==M&&Re.from==M)){if(Re.to!=null&&Re.to!=M&&Q>Re.to&&(Q=Re.to,fe=""),qe.className&&(ne+=" "+qe.className),qe.css&&(ee=(ee?ee+";":"")+qe.css),qe.startStyle&&Re.from==M&&(_e+=" "+qe.startStyle),qe.endStyle&&Re.to==Q&&(ke||(ke=[])).push(qe.endStyle,Re.to),qe.title&&((Ce||(Ce={})).title=qe.title),qe.attributes)for(var Je in qe.attributes)(Ce||(Ce={}))[Je]=qe.attributes[Je];qe.collapsed&&(!ye||Gr(ye.marker,qe)<0)&&(ye=Re)}else Re.from>M&&Q>Re.from&&(Q=Re.from)}if(ke)for(var bt=0;bt<ke.length;bt+=2)ke[bt+1]==Q&&(fe+=" "+ke[bt]);if(!ye||ye.from==M)for(var tt=0;tt<me.length;++tt)rs(t,0,me[tt]);if(ye&&(ye.from||0)==M){if(rs(t,(ye.to==null?k+1:ye.to)-M,ye.marker,ye.from==null),ye.to==null)return;ye.to==M&&(ye=!1)}}if(M>=k)break;for(var tr=Math.min(k,Q);;){if(j){var $t=M+j.length;if(!ye){var ut=$t>tr?j.slice(0,tr-M):j;t.addToken(t,ut,X?X+ne:ne,_e,M+ut.length==Q?fe:"",ee,Ce)}if($t>=tr){j=j.slice(tr-M),M=tr;break}M=$t,_e=""}j=n.slice(c,c=i[P++]),X=es(i[P++],t.cm.options)}}}function is(e,t,i){this.line=t,this.rest=Yr(t),this.size=this.rest?Ue(Me(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Ot(e,t)}function Dn(e,t,i){for(var r=[],n,c=t;c<i;c=n){var m=new is(e.doc,Le(e.doc,c),c);n=c+m.size,r.push(m)}return r}var Ni=null;function Ul(e){Ni?Ni.ops.push(e):e.ownsGroup=Ni={ops:[e],delayedCallbacks:[]}}function Kl(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}function Gl(e,t){var i=e.ownsGroup;if(!!i)try{Kl(i)}finally{Ni=null,t(i)}}var on=null;function gt(e,t){var i=vr(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),n;Ni?n=Ni.delayedCallbacks:on?n=on:(n=on=[],setTimeout(Xl,0));for(var c=function(k){n.push(function(){return i[k].apply(null,r)})},m=0;m<i.length;++m)c(m)}}function Xl(){var e=on;on=null;for(var t=0;t<e.length;++t)e[t]()}function ns(e,t,i,r){for(var n=0;n<t.changes.length;n++){var c=t.changes[n];c=="text"?Yl(e,t):c=="gutter"?ss(e,t,i,r):c=="class"?ao(e,t):c=="widget"&&Vl(e,t,r)}t.changes=null}function sn(e){return e.node==e.text&&(e.node=I("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&_<8&&(e.node.style.zIndex=2)),e.node}function $l(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=sn(t);t.background=r.insertBefore(I("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function os(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):ts(e,t)}function Yl(e,t){var i=t.text.className,r=os(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ao(e,t)):i&&(t.text.className=i)}function ao(e,t){$l(e,t),t.line.wrapClass?sn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function ss(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=sn(t);t.gutterBackground=I("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var c=t.line.gutterMarkers;if(e.options.lineNumbers||c){var m=sn(t),k=t.gutter=I("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(k.setAttribute("aria-hidden","true"),e.display.input.setUneditable(k),m.insertBefore(k,t.text),t.line.gutterClass&&(k.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!c||!c["CodeMirror-linenumbers"])&&(t.lineNumber=k.appendChild(I("div",Rr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),c)for(var M=0;M<e.display.gutterSpecs.length;++M){var P=e.display.gutterSpecs[M].className,j=c.hasOwnProperty(P)&&c[P];j&&k.appendChild(I("div",[j],"CodeMirror-gutter-elt","left: "+r.gutterLeft[P]+"px; width: "+r.gutterWidth[P]+"px"))}}}function Vl(e,t,i){t.alignable&&(t.alignable=null);for(var r=B("CodeMirror-linewidget"),n=t.node.firstChild,c=void 0;n;n=c)c=n.nextSibling,r.test(n.className)&&t.node.removeChild(n);as(e,t,i)}function Zl(e,t,i,r){var n=os(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),ao(e,t),ss(e,t,i,r),as(e,t,r),t.node}function as(e,t,i){if(ls(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)ls(e,t.rest[r],t,i,!1)}function ls(e,t,i,r,n){if(!!t.widgets)for(var c=sn(i),m=0,k=t.widgets;m<k.length;++m){var M=k[m],P=I("div",[M.node],"CodeMirror-linewidget"+(M.className?" "+M.className:""));M.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),Jl(M,P,i,r),e.display.input.setUneditable(P),n&&M.above?c.insertBefore(P,i.gutter||i.text):c.appendChild(P),gt(M,"redraw")}}function Jl(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function an(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!N(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),E(t.display.measure,I("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Zr(e,t){for(var i=ir(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Pn(e){return e.lineSpace.offsetTop}function lo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function cs(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,I("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Br(e){return F-e.display.nativeBarWidth}function bi(e){return e.display.scroller.clientWidth-Br(e)-e.display.barWidth}function co(e){return e.display.scroller.clientHeight-Br(e)-e.display.barHeight}function Ql(e,t,i){var r=e.options.lineWrapping,n=r&&bi(e);if(!t.measure.heights||r&&t.measure.width!=n){var c=t.measure.heights=[];if(r){t.measure.width=n;for(var m=t.text.firstChild.getClientRects(),k=0;k<m.length-1;k++){var M=m[k],P=m[k+1];Math.abs(M.bottom-P.bottom)>2&&c.push((M.bottom+P.top)/2-i.top)}}c.push(i.bottom-i.top)}}function us(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(Ue(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}}function ec(e,t){t=ct(t);var i=Ue(t),r=e.display.externalMeasured=new is(e.doc,t,i);r.lineN=i;var n=r.built=ts(e,r);return r.text=n.pre,E(e.display.lineMeasure,n.pre),r}function fs(e,t,i,r){return Ir(e,Wi(e,t),i,r)}function uo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[wi(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function Wi(e,t){var i=Ue(t),r=uo(e,i);r&&!r.text?r=null:r&&r.changes&&(ns(e,r,i,_o(e)),e.curOp.forceUpdate=!0),r||(r=ec(e,t));var n=us(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Ir(e,t,i,r,n){t.before&&(i=-1);var c=i+(r||""),m;return t.cache.hasOwnProperty(c)?m=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ql(e,t.view,t.rect),t.hasHeights=!0),m=rc(e,t,i,r),m.bogus||(t.cache[c]=m)),{left:m.left,right:m.right,top:n?m.rtop:m.top,bottom:n?m.rbottom:m.bottom}}var hs={left:0,right:0,top:0,bottom:0};function ds(e,t,i){for(var r,n,c,m,k,M,P=0;P<e.length;P+=3)if(k=e[P],M=e[P+1],t<k?(n=0,c=1,m="left"):t<M?(n=t-k,c=n+1):(P==e.length-3||t==M&&e[P+3]>t)&&(c=M-k,n=c-1,t>=M&&(m="right")),n!=null){if(r=e[P+2],k==M&&i==(r.insertLeft?"left":"right")&&(m=i),i=="left"&&n==0)for(;P&&e[P-2]==e[P-3]&&e[P-1].insertLeft;)r=e[(P-=3)+2],m="left";if(i=="right"&&n==M-k)for(;P<e.length-3&&e[P+3]==e[P+4]&&!e[P+5].insertLeft;)r=e[(P+=3)+2],m="right";break}return{node:r,start:n,end:c,collapse:m,coverStart:k,coverEnd:M}}function tc(e,t){var i=hs;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function rc(e,t,i,r){var n=ds(t.map,i,r),c=n.node,m=n.start,k=n.end,M=n.collapse,P;if(c.nodeType==3){for(var j=0;j<4;j++){for(;m&&We(t.line.text.charAt(n.coverStart+m));)--m;for(;n.coverStart+k<n.coverEnd&&We(t.line.text.charAt(n.coverStart+k));)++k;if(x&&_<9&&m==0&&k==n.coverEnd-n.coverStart?P=c.parentNode.getBoundingClientRect():P=tc(U(c,m,k).getClientRects(),r),P.left||P.right||m==0)break;k=m,m=m-1,M="right"}x&&_<11&&(P=ic(e.display.measure,P))}else{m>0&&(M=r="right");var X;e.options.lineWrapping&&(X=c.getClientRects()).length>1?P=X[r=="right"?X.length-1:0]:P=c.getBoundingClientRect()}if(x&&_<9&&!m&&(!P||!P.left&&!P.right)){var ee=c.parentNode.getClientRects()[0];ee?P={left:ee.left,right:ee.left+ji(e.display),top:ee.top,bottom:ee.bottom}:P=hs}for(var Q=P.top-t.rect.top,ne=P.bottom-t.rect.top,fe=(Q+ne)/2,_e=t.view.measure.heights,ye=0;ye<_e.length-1&&!(fe<_e[ye]);ye++);var Ce=ye?_e[ye-1]:0,me=_e[ye],ke={left:(M=="right"?P.right:P.left)-t.rect.left,right:(M=="left"?P.left:P.right)-t.rect.left,top:Ce,bottom:me};return!P.left&&!P.right&&(ke.bogus=!0),e.options.singleCursorHeightPerLine||(ke.rtop=Q,ke.rbottom=ne),ke}function ic(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!nr(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function ps(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function vs(e){e.display.externalMeasure=null,R(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ps(e.display.view[t])}function ln(e){vs(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function _s(){return v&&a?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gs(){return v&&a?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function fo(e){var t=ct(e),i=t.widgets,r=0;if(i)for(var n=0;n<i.length;++n)i[n].above&&(r+=an(i[n]));return r}function Bn(e,t,i,r,n){if(!n){var c=fo(t);i.top+=c,i.bottom+=c}if(r=="line")return i;r||(r="local");var m=Dt(t);if(r=="local"?m+=Pn(e.display):m-=e.display.viewOffset,r=="page"||r=="window"){var k=e.display.lineSpace.getBoundingClientRect();m+=k.top+(r=="window"?0:gs());var M=k.left+(r=="window"?0:_s());i.left+=M,i.right+=M}return i.top+=m,i.bottom+=m,i}function ys(e,t,i){if(i=="div")return t;var r=t.left,n=t.top;if(i=="page")r-=_s(),n-=gs();else if(i=="local"||!i){var c=e.display.sizer.getBoundingClientRect();r+=c.left,n+=c.top}var m=e.display.lineSpace.getBoundingClientRect();return{left:r-m.left,top:n-m.top}}function In(e,t,i,r,n){return r||(r=Le(e.doc,t.line)),Bn(e,r,fs(e,r,t.ch,n),i)}function Sr(e,t,i,r,n,c){r=r||Le(e.doc,t.line),n||(n=Wi(e,r));function m(ne,fe){var _e=Ir(e,n,ne,fe?"right":"left",c);return fe?_e.left=_e.right:_e.right=_e.left,Bn(e,r,_e,i)}var k=ht(r,e.doc.direction),M=t.ch,P=t.sticky;if(M>=r.text.length?(M=r.text.length,P="before"):M<=0&&(M=0,P="after"),!k)return m(P=="before"?M-1:M,P=="before");function j(ne,fe,_e){var ye=k[fe],Ce=ye.level==1;return m(_e?ne-1:ne,Ce!=_e)}var X=Fe(k,M,P),ee=Ne,Q=j(M,X,P=="before");return ee!=null&&(Q.other=j(M,ee,P!="before")),Q}function ms(e,t){var i=0;t=Se(e.doc,t),e.options.lineWrapping||(i=ji(e.display)*t.ch);var r=Le(e.doc,t.line),n=Dt(r)+Pn(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function ho(e,t,i,r,n){var c=he(e,t,i);return c.xRel=n,r&&(c.outside=r),c}function po(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return ho(r.first,0,null,-1,-1);var n=zt(r,i),c=r.first+r.size-1;if(n>c)return ho(r.first+r.size-1,Le(r,c).text.length,null,1,1);t<0&&(t=0);for(var m=Le(r,n);;){var k=nc(e,m,n,t,i),M=Kt(m,k.ch+(k.xRel>0||k.outside>0?1:0));if(!M)return k;var P=M.find(1);if(P.line==n)return P;m=Le(r,n=P.line)}}function bs(e,t,i,r){r-=fo(t);var n=t.text.length,c=De(function(m){return Ir(e,i,m-1).bottom<=r},n,0);return n=De(function(m){return Ir(e,i,m).top>r},c,n),{begin:c,end:n}}function Ss(e,t,i,r){i||(i=Wi(e,t));var n=Bn(e,t,Ir(e,i,r),"line").top;return bs(e,t,i,n)}function vo(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function nc(e,t,i,r,n){n-=Dt(t);var c=Wi(e,t),m=fo(t),k=0,M=t.text.length,P=!0,j=ht(t,e.doc.direction);if(j){var X=(e.options.lineWrapping?sc:oc)(e,t,i,c,j,r,n);P=X.level!=1,k=P?X.from:X.to-1,M=P?X.to:X.from-1}var ee=null,Q=null,ne=De(function(Pe){var Re=Ir(e,c,Pe);return Re.top+=m,Re.bottom+=m,vo(Re,r,n,!1)?(Re.top<=n&&Re.left<=r&&(ee=Pe,Q=Re),!0):!1},k,M),fe,_e,ye=!1;if(Q){var Ce=r-Q.left<Q.right-r,me=Ce==P;ne=ee+(me?0:1),_e=me?"after":"before",fe=Ce?Q.left:Q.right}else{!P&&(ne==M||ne==k)&&ne++,_e=ne==0?"after":ne==t.text.length?"before":Ir(e,c,ne-(P?1:0)).bottom+m<=n==P?"after":"before";var ke=Sr(e,he(i,ne,_e),"line",t,c);fe=ke.left,ye=n<ke.top?-1:n>=ke.bottom?1:0}return ne=Ee(t.text,ne,1),ho(i,ne,_e,ye,r-fe)}function oc(e,t,i,r,n,c,m){var k=De(function(X){var ee=n[X],Q=ee.level!=1;return vo(Sr(e,he(i,Q?ee.to:ee.from,Q?"before":"after"),"line",t,r),c,m,!0)},0,n.length-1),M=n[k];if(k>0){var P=M.level!=1,j=Sr(e,he(i,P?M.from:M.to,P?"after":"before"),"line",t,r);vo(j,c,m,!0)&&j.top>m&&(M=n[k-1])}return M}function sc(e,t,i,r,n,c,m){var k=bs(e,t,r,m),M=k.begin,P=k.end;/\s/.test(t.text.charAt(P-1))&&P--;for(var j=null,X=null,ee=0;ee<n.length;ee++){var Q=n[ee];if(!(Q.from>=P||Q.to<=M)){var ne=Q.level!=1,fe=Ir(e,r,ne?Math.min(P,Q.to)-1:Math.max(M,Q.from)).right,_e=fe<c?c-fe+1e9:fe-c;(!j||X>_e)&&(j=Q,X=_e)}}return j||(j=n[n.length-1]),j.from<M&&(j={from:M,to:j.to,level:j.level}),j.to>P&&(j={from:j.from,to:P,level:j.level}),j}var Si;function qi(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Si==null){Si=I("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Si.appendChild(document.createTextNode("x")),Si.appendChild(I("br"));Si.appendChild(document.createTextNode("x"))}E(e.measure,Si);var i=Si.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),R(e.measure),i||1}function ji(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=I("span","xxxxxxxxxx"),i=I("pre",[t],"CodeMirror-line-like");E(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function _o(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,c=t.gutters.firstChild,m=0;c;c=c.nextSibling,++m){var k=e.display.gutterSpecs[m].className;i[k]=c.offsetLeft+c.clientLeft+n,r[k]=c.clientWidth}return{fixedPos:go(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function go(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Cs(e){var t=qi(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/ji(e.display)-3);return function(n){if(Ot(e.doc,n))return 0;var c=0;if(n.widgets)for(var m=0;m<n.widgets.length;m++)n.widgets[m].height&&(c+=n.widgets[m].height);return i?c+(Math.ceil(n.text.length/r)||1)*t:c+t}}function yo(e){var t=e.doc,i=Cs(e);t.iter(function(r){var n=i(r);n!=r.height&&_t(r,n)})}function Ci(e,t,i,r){var n=e.display;if(!i&&ir(t).getAttribute("cm-not-content")=="true")return null;var c,m,k=n.lineSpace.getBoundingClientRect();try{c=t.clientX-k.left,m=t.clientY-k.top}catch{return null}var M=po(e,c,m),P;if(r&&M.xRel>0&&(P=Le(e.doc,M.line).text).length==M.ch){var j=we(P,P.length,e.options.tabSize)-P.length;M=he(M.line,Math.max(0,Math.round((c-cs(e.display).left)/ji(e.display))-j))}return M}function wi(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function Gt(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)fr&&br(e.doc,t)<n.viewTo&&si(e);else if(i<=n.viewFrom)fr&&yi(e.doc,i+r)>n.viewFrom?si(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)si(e);else if(t<=n.viewFrom){var c=Hn(e,i,i+r,1);c?(n.view=n.view.slice(c.index),n.viewFrom=c.lineN,n.viewTo+=r):si(e)}else if(i>=n.viewTo){var m=Hn(e,t,t,-1);m?(n.view=n.view.slice(0,m.index),n.viewTo=m.lineN):si(e)}else{var k=Hn(e,t,t,-1),M=Hn(e,i,i+r,1);k&&M?(n.view=n.view.slice(0,k.index).concat(Dn(e,k.lineN,M.lineN)).concat(n.view.slice(M.index)),n.viewTo+=r):si(e)}var P=n.externalMeasured;P&&(i<P.lineN?P.lineN+=r:t<P.lineN+P.size&&(n.externalMeasured=null))}function oi(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var c=r.view[wi(e,t)];if(c.node!=null){var m=c.changes||(c.changes=[]);de(m,i)==-1&&m.push(i)}}}function si(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Hn(e,t,i,r){var n=wi(e,t),c,m=e.display.view;if(!fr||i==e.doc.first+e.doc.size)return{index:n,lineN:i};for(var k=e.display.viewFrom,M=0;M<n;M++)k+=m[M].size;if(k!=t){if(r>0){if(n==m.length-1)return null;c=k+m[n].size-t,n++}else c=k-t;t+=c,i+=c}for(;br(e.doc,i)!=i;){if(n==(r<0?0:m.length-1))return null;i+=r*m[n-(r<0?1:0)].size,n+=r}return{index:n,lineN:i}}function ac(e,t,i){var r=e.display,n=r.view;n.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Dn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Dn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(wi(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Dn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,wi(e,i)))),r.viewTo=i}function ws(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];!n.hidden&&(!n.node||n.changes)&&++i}return i}function cn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function xs(e,t){t===void 0&&(t=!0);var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),c=r.selection=document.createDocumentFragment(),m=e.options.$customCursor;m&&(t=!0);for(var k=0;k<i.sel.ranges.length;k++)if(!(!t&&k==i.sel.primIndex)){var M=i.sel.ranges[k];if(!(M.from().line>=e.display.viewTo||M.to().line<e.display.viewFrom)){var P=M.empty();if(m){var j=m(e,M);j&&mo(e,j,n)}else(P||e.options.showCursorWhenSelecting)&&mo(e,M.head,n);P||lc(e,M,c)}}return r}function mo(e,t,i){var r=Sr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(I("div","\xA0","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var c=In(e,t,"div",null,null),m=c.right-c.left;n.style.width=(m>0?m:e.defaultCharWidth())+"px"}if(r.other){var k=i.appendChild(I("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));k.style.display="",k.style.left=r.other.left+"px",k.style.top=r.other.top+"px",k.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Fn(e,t){return e.top-t.top||e.left-t.left}function lc(e,t,i){var r=e.display,n=e.doc,c=document.createDocumentFragment(),m=cs(e.display),k=m.left,M=Math.max(r.sizerWidth,bi(e)-r.sizer.offsetLeft)-m.right,P=n.direction=="ltr";function j(me,ke,Pe,Re){ke<0&&(ke=0),ke=Math.round(ke),Re=Math.round(Re),c.appendChild(I("div",null,"CodeMirror-selected","position: absolute; left: "+me+`px;
                             top: `+ke+"px; width: "+(Pe??M-me)+`px;
                             height: `+(Re-ke)+"px"))}function X(me,ke,Pe){var Re=Le(n,me),qe=Re.text.length,Je,bt;function tt(ut,Yt){return In(e,he(me,ut),"div",Re,Yt)}function tr(ut,Yt,kt){var vt=Ss(e,Re,null,ut),ft=Yt=="ltr"==(kt=="after")?"left":"right",nt=kt=="after"?vt.begin:vt.end-(/\s/.test(Re.text.charAt(vt.end-1))?2:1);return tt(nt,ft)[ft]}var $t=ht(Re,n.direction);return Ae($t,ke||0,Pe??qe,function(ut,Yt,kt,vt){var ft=kt=="ltr",nt=tt(ut,ft?"left":"right"),Vt=tt(Yt-1,ft?"right":"left"),tn=ke==null&&ut==0,hi=Pe==null&&Yt==qe,Bt=vt==0,Hr=!$t||vt==$t.length-1;if(Vt.top-nt.top<=3){var St=(P?tn:hi)&&Bt,Ko=(P?hi:tn)&&Hr,ei=St?k:(ft?nt:Vt).left,Ti=Ko?M:(ft?Vt:nt).right;j(ei,nt.top,Ti-ei,nt.bottom)}else{var Mi,Nt,rn,Go;ft?(Mi=P&&tn&&Bt?k:nt.left,Nt=P?M:tr(ut,kt,"before"),rn=P?k:tr(Yt,kt,"after"),Go=P&&hi&&Hr?M:Vt.right):(Mi=P?tr(ut,kt,"before"):k,Nt=!P&&tn&&Bt?M:nt.right,rn=!P&&hi&&Hr?k:Vt.left,Go=P?tr(Yt,kt,"after"):M),j(Mi,nt.top,Nt-Mi,nt.bottom),nt.bottom<Vt.top&&j(k,nt.bottom,null,Vt.top),j(rn,Vt.top,Go-rn,Vt.bottom)}(!Je||Fn(nt,Je)<0)&&(Je=nt),Fn(Vt,Je)<0&&(Je=Vt),(!bt||Fn(nt,bt)<0)&&(bt=nt),Fn(Vt,bt)<0&&(bt=Vt)}),{start:Je,end:bt}}var ee=t.from(),Q=t.to();if(ee.line==Q.line)X(ee.line,ee.ch,Q.ch);else{var ne=Le(n,ee.line),fe=Le(n,Q.line),_e=ct(ne)==ct(fe),ye=X(ee.line,ee.ch,_e?ne.text.length+1:null).end,Ce=X(Q.line,_e?0:null,Q.ch).start;_e&&(ye.top<Ce.top-2?(j(ye.right,ye.top,null,ye.bottom),j(k,Ce.top,Ce.left,Ce.bottom)):j(ye.right,ye.top,Ce.left-ye.right,ye.bottom)),ye.bottom<Ce.top&&j(k,ye.bottom,null,Ce.top)}i.appendChild(c)}function bo(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||zi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ks(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Co(e))}function So(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&zi(e))},100)}function Co(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Be(e,"focus",e,t),e.state.focused=!0,O(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),b&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),bo(e))}function zi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Be(e,"blur",e,t),e.state.focused=!1,D(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Nn(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),n=t.lineDiv.getBoundingClientRect().top,c=0,m=0;m<t.view.length;m++){var k=t.view[m],M=e.options.lineWrapping,P=void 0,j=0;if(!k.hidden){if(n+=k.line.height,x&&_<8){var X=k.node.offsetTop+k.node.offsetHeight;P=X-i,i=X}else{var ee=k.node.getBoundingClientRect();P=ee.bottom-ee.top,!M&&k.text.firstChild&&(j=k.text.firstChild.getBoundingClientRect().right-ee.left-1)}var Q=k.line.height-P;if((Q>.005||Q<-.005)&&(n<r&&(c-=Q),_t(k.line,P),Ls(k.line),k.rest))for(var ne=0;ne<k.rest.length;ne++)Ls(k.rest[ne]);if(j>e.display.sizerWidth){var fe=Math.ceil(j/ji(e.display));fe>e.display.maxLineLength&&(e.display.maxLineLength=fe,e.display.maxLine=k.line,e.display.maxLineChanged=!0)}}}Math.abs(c)>2&&(t.scroller.scrollTop+=c)}function Ls(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function Wn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Pn(e));var n=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,c=zt(t,r),m=zt(t,n);if(i&&i.ensure){var k=i.ensure.from.line,M=i.ensure.to.line;k<c?(c=k,m=zt(t,Dt(Le(t,k))+e.wrapper.clientHeight)):Math.min(M,t.lastLine())>=m&&(c=zt(t,Dt(Le(t,M))-e.wrapper.clientHeight),m=M)}return{from:c,to:Math.max(m,c+1)}}function cc(e,t){if(!Qe(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!f){var c=I("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Pn(e.display))+`px;
                         height: `+(t.bottom-t.top+Br(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(c),c.scrollIntoView(n),e.display.lineSpace.removeChild(c)}}}function uc(e,t,i,r){r==null&&(r=0);var n;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?he(t.line,t.ch+1,"before"):t,t=t.ch?he(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var c=0;c<5;c++){var m=!1,k=Sr(e,t),M=!i||i==t?k:Sr(e,i);n={left:Math.min(k.left,M.left),top:Math.min(k.top,M.top)-r,right:Math.max(k.left,M.left),bottom:Math.max(k.bottom,M.bottom)+r};var P=wo(e,n),j=e.doc.scrollTop,X=e.doc.scrollLeft;if(P.scrollTop!=null&&(fn(e,P.scrollTop),Math.abs(e.doc.scrollTop-j)>1&&(m=!0)),P.scrollLeft!=null&&(xi(e,P.scrollLeft),Math.abs(e.doc.scrollLeft-X)>1&&(m=!0)),!m)break}return n}function fc(e,t){var i=wo(e,t);i.scrollTop!=null&&fn(e,i.scrollTop),i.scrollLeft!=null&&xi(e,i.scrollLeft)}function wo(e,t){var i=e.display,r=qi(e.display);t.top<0&&(t.top=0);var n=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,c=co(e),m={};t.bottom-t.top>c&&(t.bottom=t.top+c);var k=e.doc.height+lo(i),M=t.top<r,P=t.bottom>k-r;if(t.top<n)m.scrollTop=M?0:t.top;else if(t.bottom>n+c){var j=Math.min(t.top,(P?k:t.bottom)-c);j!=n&&(m.scrollTop=j)}var X=e.options.fixedGutter?0:i.gutters.offsetWidth,ee=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-X,Q=bi(e)-i.gutters.offsetWidth,ne=t.right-t.left>Q;return ne&&(t.right=t.left+Q),t.left<10?m.scrollLeft=0:t.left<ee?m.scrollLeft=Math.max(0,t.left+X-(ne?0:10)):t.right>Q+ee-3&&(m.scrollLeft=t.right+(ne?0:10)-Q),m}function xo(e,t){t!=null&&(qn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ui(e){qn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function un(e,t,i){(t!=null||i!=null)&&qn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function hc(e,t){qn(e),e.curOp.scrollToPos=t}function qn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ms(e,t.from),r=ms(e,t.to);Es(e,i,r,t.margin)}}function Es(e,t,i,r){var n=wo(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});un(e,n.scrollLeft,n.scrollTop)}function fn(e,t){Math.abs(e.doc.scrollTop-t)<2||(Z||Lo(e,{top:t}),Ts(e,t,!0),Z&&Lo(e),pn(e,100))}function Ts(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function xi(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Ds(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function hn(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+lo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Br(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var ki=function(e,t,i){this.cm=i;var r=this.vert=I("div",[I("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=I("div",[I("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,e(r),e(n),Oe(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Oe(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,x&&_<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ki.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var c=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+c)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},ki.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ki.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ki.prototype.zeroWidthHack=function(){var e=o&&!u?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new xe,this.disableVert=new xe},ki.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var n=e.getBoundingClientRect(),c=i=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);c!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},ki.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var dn=function(){};dn.prototype.update=function(){return{bottom:0,right:0}},dn.prototype.setScrollLeft=function(){},dn.prototype.setScrollTop=function(){},dn.prototype.clear=function(){};function Ki(e,t){t||(t=hn(e));var i=e.display.barWidth,r=e.display.barHeight;Ms(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&Nn(e),Ms(e,hn(e)),i=e.display.barWidth,r=e.display.barHeight}function Ms(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var As={native:ki,null:dn};function Rs(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new As[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Oe(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?xi(e,t):fn(e,t)},e),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)}var dc=0;function Li(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++dc,markArrays:null},Ul(e.curOp)}function Ei(e){var t=e.curOp;t&&Gl(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;pc(i)})}function pc(e){for(var t=e.ops,i=0;i<t.length;i++)vc(t[i]);for(var r=0;r<t.length;r++)_c(t[r]);for(var n=0;n<t.length;n++)gc(t[n]);for(var c=0;c<t.length;c++)yc(t[c]);for(var m=0;m<t.length;m++)mc(t[m])}function vc(e){var t=e.cm,i=t.display;Sc(t),e.updateMaxLine&&mi(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new jn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function _c(e){e.updatedDisplay=e.mustUpdate&&ko(e.cm,e.update)}function gc(e){var t=e.cm,i=t.display;e.updatedDisplay&&Nn(t),e.barMeasure=hn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=fs(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Br(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-bi(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function yc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&xi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==L();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ki(t,e.barMeasure),e.updatedDisplay&&To(t,e.barMeasure),e.selectionChanged&&bo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ks(e.cm)}function mc(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&Os(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&Ts(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&xi(t,e.scrollLeft,!0,!0),e.scrollToPos){var n=uc(t,Se(r,e.scrollToPos.from),Se(r,e.scrollToPos.to),e.scrollToPos.margin);cc(t,n)}var c=e.maybeHiddenMarkers,m=e.maybeUnhiddenMarkers;if(c)for(var k=0;k<c.length;++k)c[k].lines.length||Be(c[k],"hide");if(m)for(var M=0;M<m.length;++M)m[M].lines.length&&Be(m[M],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Be(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function er(e,t){if(e.curOp)return t();Li(e);try{return t()}finally{Ei(e)}}function yt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Li(e);try{return t.apply(e,arguments)}finally{Ei(e)}}}function Ft(e){return function(){if(this.curOp)return e.apply(this,arguments);Li(this);try{return e.apply(this,arguments)}finally{Ei(this)}}}function mt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Li(t);try{return e.apply(this,arguments)}finally{Ei(t)}}}function pn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,ue(bc,e))}function bc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=Kr(e,t.highlightFrontier),n=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(c){if(r.line>=e.display.viewFrom){var m=c.styles,k=c.text.length>e.options.maxHighlightLength?xt(t.mode,r.state):null,M=Ri(e,c,r,!0);k&&(r.state=k),c.styles=M.styles;var P=c.styleClasses,j=M.classes;j?c.styleClasses=j:P&&(c.styleClasses=null);for(var X=!m||m.length!=c.styles.length||P!=j&&(!P||!j||P.bgClass!=j.bgClass||P.textClass!=j.textClass),ee=0;!X&&ee<m.length;++ee)X=m[ee]!=c.styles[ee];X&&n.push(r.line),c.stateAfter=r.save(),r.nextLine()}else c.text.length<=e.options.maxHighlightLength&&pi(e,c.text,r),c.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return pn(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),n.length&&er(e,function(){for(var c=0;c<n.length;c++)oi(e,n[c],"text")})}}var jn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=Wn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=bi(e),this.force=i,this.dims=_o(e),this.events=[]};jn.prototype.signal=function(e,t){rt(e,t)&&this.events.push(arguments)},jn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Be.apply(null,this.events[e])};function Sc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Br(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Br(e)+"px",t.scrollbarsClipped=!0)}function Cc(e){if(e.hasFocus())return null;var t=L();if(!t||!N(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&N(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function wc(e){if(!(!e||!e.activeElt||e.activeElt==L())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&N(document.body,e.anchorNode)&&N(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function ko(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return si(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&ws(e)==0)return!1;Ps(e)&&(si(e),t.dims=_o(e));var n=r.first+r.size,c=Math.max(t.visible.from-e.options.viewportMargin,r.first),m=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<c&&c-i.viewFrom<20&&(c=Math.max(r.first,i.viewFrom)),i.viewTo>m&&i.viewTo-m<20&&(m=Math.min(n,i.viewTo)),fr&&(c=br(e.doc,c),m=yi(e.doc,m));var k=c!=i.viewFrom||m!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;ac(e,c,m),i.viewOffset=Dt(Le(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var M=ws(e);if(!k&&M==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var P=Cc(e);return M>4&&(i.lineDiv.style.display="none"),xc(e,i.updateLineNumbers,t.dims),M>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,wc(P),R(i.cursorDiv),R(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,k&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,pn(e,400)),i.updateLineNumbers=null,!0}function Os(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==bi(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+lo(e.display)-co(e),i.top)}),t.visible=Wn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Wn(e.display,e.doc,i));if(!ko(e,t))break;Nn(e);var n=hn(e);cn(e),Ki(e,n),To(e,n),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Lo(e,t){var i=new jn(e,t);if(ko(e,i)){Nn(e),Os(e,i);var r=hn(e);cn(e),Ki(e,r),To(e,r),i.finish()}}function xc(e,t,i){var r=e.display,n=e.options.lineNumbers,c=r.lineDiv,m=c.firstChild;function k(ne){var fe=ne.nextSibling;return b&&o&&e.display.currentWheelTarget==ne?ne.style.display="none":ne.parentNode.removeChild(ne),fe}for(var M=r.view,P=r.viewFrom,j=0;j<M.length;j++){var X=M[j];if(!X.hidden)if(!X.node||X.node.parentNode!=c){var ee=Zl(e,X,P,i);c.insertBefore(ee,m)}else{for(;m!=X.node;)m=k(m);var Q=n&&t!=null&&t<=P&&X.lineNumber;X.changes&&(de(X.changes,"gutter")>-1&&(Q=!1),ns(e,X,P,i)),Q&&(R(X.lineNumber),X.lineNumber.appendChild(document.createTextNode(Rr(e.options,P)))),m=X.node.nextSibling}P+=X.size}for(;m;)m=k(m)}function Eo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",gt(e,"gutterChanged",e)}function To(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Br(e)+"px"}function Ds(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=go(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,c=r+"px",m=0;m<i.length;m++)if(!i[m].hidden){e.options.fixedGutter&&(i[m].gutter&&(i[m].gutter.style.left=c),i[m].gutterBackground&&(i[m].gutterBackground.style.left=c));var k=i[m].alignable;if(k)for(var M=0;M<k.length;M++)k[M].style.left=c}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function Ps(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=Rr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var n=r.measure.appendChild(I("div",[I("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),c=n.firstChild.offsetWidth,m=n.offsetWidth-c;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(c,r.lineGutter.offsetWidth-m)+1,r.lineNumWidth=r.lineNumInnerWidth+m,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Eo(e.display),!0}return!1}function Mo(e,t){for(var i=[],r=!1,n=0;n<e.length;n++){var c=e[n],m=null;if(typeof c!="string"&&(m=c.style,c=c.className),c=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:c,style:m})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function Bs(e){var t=e.gutters,i=e.gutterSpecs;R(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var n=i[r],c=n.className,m=n.style,k=t.appendChild(I("div",null,"CodeMirror-gutter "+c));m&&(k.style.cssText=m),c=="CodeMirror-linenumbers"&&(e.lineGutter=k,k.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",Eo(e)}function vn(e){Bs(e.display),Gt(e),Ds(e)}function kc(e,t,i,r){var n=this;this.input=i,n.scrollbarFiller=I("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=I("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=w("div",null,"CodeMirror-code"),n.selectionDiv=I("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=I("div",null,"CodeMirror-cursors"),n.measure=I("div",null,"CodeMirror-measure"),n.lineMeasure=I("div",null,"CodeMirror-measure"),n.lineSpace=w("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var c=w("div",[n.lineSpace],"CodeMirror-lines");n.mover=I("div",[c],null,"position: relative"),n.sizer=I("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=I("div",null,null,"position: absolute; height: "+F+"px; width: 1px;"),n.gutters=I("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=I("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=I("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),n.wrapper.setAttribute("translate","no"),x&&_<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!b&&!(Z&&s)&&(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=Mo(r.gutters,r.lineNumbers),Bs(n),i.init(n)}var zn=0,Jr=null;x?Jr=-.53:Z?Jr=15:v?Jr=-.7:C&&(Jr=-1/3);function Is(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function Lc(e){var t=Is(e);return t.x*=Jr,t.y*=Jr,t}function Hs(e,t){var i=Is(t),r=i.x,n=i.y,c=Jr;t.deltaMode===0&&(r=t.deltaX,n=t.deltaY,c=1);var m=e.display,k=m.scroller,M=k.scrollWidth>k.clientWidth,P=k.scrollHeight>k.clientHeight;if(!!(r&&M||n&&P)){if(n&&o&&b){e:for(var j=t.target,X=m.view;j!=k;j=j.parentNode)for(var ee=0;ee<X.length;ee++)if(X[ee].node==j){e.display.currentWheelTarget=j;break e}}if(r&&!Z&&!y&&c!=null){n&&P&&fn(e,Math.max(0,k.scrollTop+n*c)),xi(e,Math.max(0,k.scrollLeft+r*c)),(!n||n&&P)&&ot(t),m.wheelStartX=null;return}if(n&&c!=null){var Q=n*c,ne=e.doc.scrollTop,fe=ne+m.wrapper.clientHeight;Q<0?ne=Math.max(0,ne+Q-50):fe=Math.min(e.doc.height,fe+Q+50),Lo(e,{top:ne,bottom:fe})}zn<20&&t.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=k.scrollLeft,m.wheelStartY=k.scrollTop,m.wheelDX=r,m.wheelDY=n,setTimeout(function(){if(m.wheelStartX!=null){var _e=k.scrollLeft-m.wheelStartX,ye=k.scrollTop-m.wheelStartY,Ce=ye&&m.wheelDY&&ye/m.wheelDY||_e&&m.wheelDX&&_e/m.wheelDX;m.wheelStartX=m.wheelStartY=null,!!Ce&&(Jr=(Jr*zn+Ce)/(zn+1),++zn)}},200)):(m.wheelDX+=r,m.wheelDY+=n))}}var ar=function(e,t){this.ranges=e,this.primIndex=t};ar.prototype.primary=function(){return this.ranges[this.primIndex]},ar.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!G(i.anchor,r.anchor)||!G(i.head,r.head))return!1}return!0},ar.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new $e(ce(this.ranges[t].anchor),ce(this.ranges[t].head));return new ar(e,this.primIndex)},ar.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ar.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(H(t,r.from())>=0&&H(e,r.to())<=0)return i}return-1};var $e=function(e,t){this.anchor=e,this.head=t};$e.prototype.from=function(){return Ie(this.anchor,this.head)},$e.prototype.to=function(){return pe(this.anchor,this.head)},$e.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Cr(e,t,i){var r=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(ee,Q){return H(ee.from(),Q.from())}),i=de(t,n);for(var c=1;c<t.length;c++){var m=t[c],k=t[c-1],M=H(k.to(),m.from());if(r&&!m.empty()?M>0:M>=0){var P=Ie(k.from(),m.from()),j=pe(k.to(),m.to()),X=k.empty()?m.from()==m.head:k.from()==k.head;c<=i&&--i,t.splice(--c,2,new $e(X?j:P,X?P:j))}}return new ar(t,i)}function ai(e,t){return new ar([new $e(e,t||e)],0)}function li(e){return e.text?he(e.from.line+e.text.length-1,Me(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Fs(e,t){if(H(e,t.from)<0)return e;if(H(e,t.to)<=0)return li(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=li(t).ch-t.to.ch),he(i,r)}function Ao(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new $e(Fs(n.anchor,t),Fs(n.head,t)))}return Cr(e.cm,i,e.sel.primIndex)}function Ns(e,t,i){return e.line==t.line?he(i.line,e.ch-t.ch+i.ch):he(i.line+(e.line-t.line),e.ch)}function Ec(e,t,i){for(var r=[],n=he(e.first,0),c=n,m=0;m<t.length;m++){var k=t[m],M=Ns(k.from,n,c),P=Ns(li(k),n,c);if(n=k.to,c=P,i=="around"){var j=e.sel.ranges[m],X=H(j.head,j.anchor)<0;r[m]=new $e(X?P:M,X?M:P)}else r[m]=new $e(M,M)}return new ar(r,e.sel.primIndex)}function Ro(e){e.doc.mode=mr(e.options,e.doc.modeOption),_n(e)}function _n(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,pn(e,100),e.state.modeGen++,e.curOp&&Gt(e)}function Ws(e,t){return t.from.ch==0&&t.to.ch==0&&Me(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Oo(e,t,i,r){function n(Ce){return i?i[Ce]:null}function c(Ce,me,ke){Vr(Ce,me,ke,r),gt(Ce,"change",Ce,t)}function m(Ce,me){for(var ke=[],Pe=Ce;Pe<me;++Pe)ke.push(new Qt(P[Pe],n(Pe),r));return ke}var k=t.from,M=t.to,P=t.text,j=Le(e,k.line),X=Le(e,M.line),ee=Me(P),Q=n(P.length-1),ne=M.line-k.line;if(t.full)e.insert(0,m(0,P.length)),e.remove(P.length,e.size-P.length);else if(Ws(e,t)){var fe=m(0,P.length-1);c(X,X.text,Q),ne&&e.remove(k.line,ne),fe.length&&e.insert(k.line,fe)}else if(j==X)if(P.length==1)c(j,j.text.slice(0,k.ch)+ee+j.text.slice(M.ch),Q);else{var _e=m(1,P.length-1);_e.push(new Qt(ee+j.text.slice(M.ch),Q,r)),c(j,j.text.slice(0,k.ch)+P[0],n(0)),e.insert(k.line+1,_e)}else if(P.length==1)c(j,j.text.slice(0,k.ch)+P[0]+X.text.slice(M.ch),n(0)),e.remove(k.line+1,ne);else{c(j,j.text.slice(0,k.ch)+P[0],n(0)),c(X,ee+X.text.slice(M.ch),Q);var ye=m(1,P.length-1);ne>1&&e.remove(k.line+1,ne-1),e.insert(k.line+1,ye)}gt(e,"change",e,t)}function ci(e,t,i){function r(n,c,m){if(n.linked)for(var k=0;k<n.linked.length;++k){var M=n.linked[k];if(M.doc!=c){var P=m&&M.sharedHist;i&&!P||(t(M.doc,P),r(M.doc,n,P))}}}r(e,null,!0)}function qs(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,yo(e),Ro(e),js(e),e.options.direction=t.direction,e.options.lineWrapping||mi(e),e.options.mode=t.modeOption,Gt(e)}function js(e){(e.doc.direction=="rtl"?O:D)(e.display.lineDiv,"CodeMirror-rtl")}function Tc(e){er(e,function(){js(e),Gt(e)})}function Un(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Do(e,t){var i={from:ce(t.from),to:li(t),text:jt(e,t.from,t.to)};return Ks(e,i,t.from.line,t.to.line+1),ci(e,function(r){return Ks(r,i,t.from.line,t.to.line+1)},!0),i}function zs(e){for(;e.length;){var t=Me(e);if(t.ranges)e.pop();else break}}function Mc(e,t){if(t)return zs(e.done),Me(e.done);if(e.done.length&&!Me(e.done).ranges)return Me(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Me(e.done)}function Us(e,t,i,r){var n=e.history;n.undone.length=0;var c=+new Date,m,k;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&n.lastModTime>c-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(m=Mc(n,n.lastOp==r)))k=Me(m.changes),H(t.from,t.to)==0&&H(t.from,k.to)==0?k.to=li(t):m.changes.push(Do(e,t));else{var M=Me(n.done);for((!M||!M.ranges)&&Kn(e.sel,n.done),m={changes:[Do(e,t)],generation:n.generation},n.done.push(m);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=c,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,k||Be(e,"historyAdded")}function Ac(e,t,i,r){var n=t.charAt(0);return n=="*"||n=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Rc(e,t,i,r){var n=e.history,c=r&&r.origin;i==n.lastSelOp||c&&n.lastSelOrigin==c&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==c||Ac(e,c,Me(n.done),t))?n.done[n.done.length-1]=t:Kn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=c,n.lastSelOp=i,r&&r.clearRedo!==!1&&zs(n.undone)}function Kn(e,t){var i=Me(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Ks(e,t,i,r){var n=t["spans_"+e.id],c=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(m){m.markedSpans&&((n||(n=t["spans_"+e.id]={}))[c]=m.markedSpans),++c})}function Oc(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Dc(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(Oc(i[n]));return r}function Gs(e,t){var i=Dc(e,t),r=st(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var c=i[n],m=r[n];if(c&&m){e:for(var k=0;k<m.length;++k){for(var M=m[k],P=0;P<c.length;++P)if(c[P].marker==M.marker)continue e;c.push(M)}}else m&&(i[n]=m)}return i}function Gi(e,t,i){for(var r=[],n=0;n<e.length;++n){var c=e[n];if(c.ranges){r.push(i?ar.prototype.deepCopy.call(c):c);continue}var m=c.changes,k=[];r.push({changes:k});for(var M=0;M<m.length;++M){var P=m[M],j=void 0;if(k.push({from:P.from,to:P.to,text:P.text}),t)for(var X in P)(j=X.match(/^spans_(\d+)$/))&&de(t,Number(j[1]))>-1&&(Me(k)[X]=P[X],delete P[X])}}return r}function Po(e,t,i,r){if(r){var n=e.anchor;if(i){var c=H(t,n)<0;c!=H(i,n)<0?(n=t,t=i):c!=H(t,i)<0&&(t=i)}return new $e(n,t)}else return new $e(i||t,t)}function Gn(e,t,i,r,n){n==null&&(n=e.cm&&(e.cm.display.shift||e.extend)),Pt(e,new ar([Po(e.sel.primary(),t,i,n)],0),r)}function Xs(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),c=0;c<e.sel.ranges.length;c++)r[c]=Po(e.sel.ranges[c],t[c],null,n);var m=Cr(e.cm,r,e.sel.primIndex);Pt(e,m,i)}function Bo(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,Pt(e,Cr(e.cm,n,e.sel.primIndex),r)}function $s(e,t,i,r){Pt(e,ai(t,i),r)}function Pc(e,t,i){var r={ranges:t.ranges,update:function(n){this.ranges=[];for(var c=0;c<n.length;c++)this.ranges[c]=new $e(Se(e,n[c].anchor),Se(e,n[c].head))},origin:i&&i.origin};return Be(e,"beforeSelectionChange",e,r),e.cm&&Be(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Cr(e.cm,r.ranges,r.ranges.length-1):t}function Ys(e,t,i){var r=e.history.done,n=Me(r);n&&n.ranges?(r[r.length-1]=t,Xn(e,t,i)):Pt(e,t,i)}function Pt(e,t,i){Xn(e,t,i),Rc(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Xn(e,t,i){(rt(e,"beforeSelectionChange")||e.cm&&rt(e.cm,"beforeSelectionChange"))&&(t=Pc(e,t,i));var r=i&&i.bias||(H(t.primary().head,e.sel.primary().head)<0?-1:1);Vs(e,Js(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Ui(e.cm)}function Vs(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,_r(e.cm)),gt(e,"cursorActivity",e))}function Zs(e){Vs(e,Js(e,e.sel,null,!1))}function Js(e,t,i,r){for(var n,c=0;c<t.ranges.length;c++){var m=t.ranges[c],k=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[c],M=$n(e,m.anchor,k&&k.anchor,i,r),P=$n(e,m.head,k&&k.head,i,r);(n||M!=m.anchor||P!=m.head)&&(n||(n=t.ranges.slice(0,c)),n[c]=new $e(M,P))}return n?Cr(e.cm,n,t.primIndex):t}function Xi(e,t,i,r,n){var c=Le(e,t.line);if(c.markedSpans)for(var m=0;m<c.markedSpans.length;++m){var k=c.markedSpans[m],M=k.marker,P="selectLeft"in M?!M.selectLeft:M.inclusiveLeft,j="selectRight"in M?!M.selectRight:M.inclusiveRight;if((k.from==null||(P?k.from<=t.ch:k.from<t.ch))&&(k.to==null||(j?k.to>=t.ch:k.to>t.ch))){if(n&&(Be(M,"beforeCursorEnter"),M.explicitlyCleared))if(c.markedSpans){--m;continue}else break;if(!M.atomic)continue;if(i){var X=M.find(r<0?1:-1),ee=void 0;if((r<0?j:P)&&(X=Qs(e,X,-r,X&&X.line==t.line?c:null)),X&&X.line==t.line&&(ee=H(X,i))&&(r<0?ee<0:ee>0))return Xi(e,X,t,r,n)}var Q=M.find(r<0?-1:1);return(r<0?P:j)&&(Q=Qs(e,Q,r,Q.line==t.line?c:null)),Q?Xi(e,Q,t,r,n):null}}return t}function $n(e,t,i,r,n){var c=r||1,m=Xi(e,t,i,c,n)||!n&&Xi(e,t,i,c,!0)||Xi(e,t,i,-c,n)||!n&&Xi(e,t,i,-c,!0);return m||(e.cantEdit=!0,he(e.first,0))}function Qs(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?Se(e,he(t.line-1)):null:i>0&&t.ch==(r||Le(e,t.line)).text.length?t.line<e.first+e.size-1?he(t.line+1,0):null:new he(t.line,t.ch+i)}function ea(e){e.setSelection(he(e.firstLine(),0),he(e.lastLine()),K)}function ta(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(n,c,m,k){n&&(r.from=Se(e,n)),c&&(r.to=Se(e,c)),m&&(r.text=m),k!==void 0&&(r.origin=k)}),Be(e,"beforeChange",e,r),e.cm&&Be(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function $i(e,t,i){if(e.cm){if(!e.cm.curOp)return yt(e.cm,$i)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"))&&(t=ta(e,t,!0),!t))){var r=Rn&&!i&&dr(e,t.from,t.to);if(r)for(var n=r.length-1;n>=0;--n)ra(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else ra(e,t)}}function ra(e,t){if(!(t.text.length==1&&t.text[0]==""&&H(t.from,t.to)==0)){var i=Ao(e,t);Us(e,t,i,e.cm?e.cm.curOp.id:NaN),gn(e,t,i,st(e,t));var r=[];ci(e,function(n,c){!c&&de(r,n.history)==-1&&(sa(n.history,t),r.push(n.history)),gn(n,t,null,st(n,t))})}}function Yn(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var n=e.history,c,m=e.sel,k=t=="undo"?n.done:n.undone,M=t=="undo"?n.undone:n.done,P=0;P<k.length&&(c=k[P],!(i?c.ranges&&!c.equals(e.sel):!c.ranges));P++);if(P!=k.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(c=k.pop(),c.ranges){if(Kn(c,M),i&&!c.equals(e.sel)){Pt(e,c,{clearRedo:!1});return}m=c}else if(r){k.push(c);return}else break;var j=[];Kn(m,M),M.push({changes:j,generation:n.generation}),n.generation=c.generation||++n.maxGeneration;for(var X=rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"),ee=function(fe){var _e=c.changes[fe];if(_e.origin=t,X&&!ta(e,_e,!1))return k.length=0,{};j.push(Do(e,_e));var ye=fe?Ao(e,_e):Me(k);gn(e,_e,ye,Gs(e,_e)),!fe&&e.cm&&e.cm.scrollIntoView({from:_e.from,to:li(_e)});var Ce=[];ci(e,function(me,ke){!ke&&de(Ce,me.history)==-1&&(sa(me.history,_e),Ce.push(me.history)),gn(me,_e,null,Gs(me,_e))})},Q=c.changes.length-1;Q>=0;--Q){var ne=ee(Q);if(ne)return ne.v}}}}function ia(e,t){if(t!=0&&(e.first+=t,e.sel=new ar(He(e.sel.ranges,function(n){return new $e(he(n.anchor.line+t,n.anchor.ch),he(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){Gt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)oi(e.cm,r,"gutter")}}function gn(e,t,i,r){if(e.cm&&!e.cm.curOp)return yt(e.cm,gn)(e,t,i,r);if(t.to.line<e.first){ia(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);ia(e,n),t={from:he(e.first,0),to:he(t.to.line+n,t.to.ch),text:[Me(t.text)],origin:t.origin}}var c=e.lastLine();t.to.line>c&&(t={from:t.from,to:he(c,Le(e,c).text.length),text:[t.text[0]],origin:t.origin}),t.removed=jt(e,t.from,t.to),i||(i=Ao(e,t)),e.cm?Bc(e.cm,t,r):Oo(e,t,r),Xn(e,i,K),e.cantEdit&&$n(e,he(e.firstLine(),0))&&(e.cantEdit=!1)}}function Bc(e,t,i){var r=e.doc,n=e.display,c=t.from,m=t.to,k=!1,M=c.line;e.options.lineWrapping||(M=Ue(ct(Le(r,c.line))),r.iter(M,m.line+1,function(Q){if(Q==n.maxLine)return k=!0,!0})),r.sel.contains(t.from,t.to)>-1&&_r(e),Oo(r,t,i,Cs(e)),e.options.lineWrapping||(r.iter(M,c.line+t.text.length,function(Q){var ne=ni(Q);ne>n.maxLineLength&&(n.maxLine=Q,n.maxLineLength=ne,n.maxLineChanged=!0,k=!1)}),k&&(e.curOp.updateMaxLine=!0)),An(r,c.line),pn(e,400);var P=t.text.length-(m.line-c.line)-1;t.full?Gt(e):c.line==m.line&&t.text.length==1&&!Ws(e.doc,t)?oi(e,c.line,"text"):Gt(e,c.line,m.line+1,P);var j=rt(e,"changes"),X=rt(e,"change");if(X||j){var ee={from:c,to:m,text:t.text,removed:t.removed,origin:t.origin};X&&gt(e,"change",e,ee),j&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(ee)}e.display.selForContextMenu=null}function Yi(e,t,i,r,n){var c;r||(r=i),H(r,i)<0&&(c=[r,i],i=c[0],r=c[1]),typeof t=="string"&&(t=e.splitLines(t)),$i(e,{from:i,to:r,text:t,origin:n})}function na(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function oa(e,t,i,r){for(var n=0;n<e.length;++n){var c=e[n],m=!0;if(c.ranges){c.copied||(c=e[n]=c.deepCopy(),c.copied=!0);for(var k=0;k<c.ranges.length;k++)na(c.ranges[k].anchor,t,i,r),na(c.ranges[k].head,t,i,r);continue}for(var M=0;M<c.changes.length;++M){var P=c.changes[M];if(i<P.from.line)P.from=he(P.from.line+r,P.from.ch),P.to=he(P.to.line+r,P.to.ch);else if(t<=P.to.line){m=!1;break}}m||(e.splice(0,n+1),n=0)}}function sa(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;oa(e.done,i,r,n),oa(e.undone,i,r,n)}function yn(e,t,i,r){var n=t,c=t;return typeof t=="number"?c=Le(e,je(e,t)):n=Ue(t),n==null?null:(r(c,n)&&e.cm&&oi(e.cm,n,i),c)}function mn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}mn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var n=this.lines[i];this.height-=n.height,so(n),gt(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function bn(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}bn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var c=Math.min(t,n-e),m=r.height;if(r.removeInner(e,c),this.height-=m-r.height,n==c&&(this.children.splice(i--,1),r.parent=null),(t-=c)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof mn))){var k=[];this.collapse(k),this.children=[new mn(k)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<=c){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(var m=n.lines.length%25+25,k=m;k<n.lines.length;){var M=new mn(n.lines.slice(k,k+=25));n.height-=M.height,this.children.splice(++r,0,M),M.parent=this}n.lines=n.lines.slice(0,m),this.maybeSpill()}break}e-=c}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new bn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=de(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new bn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],c=n.chunkSize();if(e<c){var m=Math.min(t,c-e);if(n.iterN(e,m,i))return!0;if((t-=m)==0)break;e=0}else e-=c}}};var Sn=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};Sn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=Ue(i);if(!(r==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var c=an(this);_t(i,Math.max(0,i.height-c)),e&&(er(e,function(){aa(e,i,-c),oi(e,r,"widget")}),gt(e,"lineWidgetCleared",e,this,r))}},Sn.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=an(this)-t;!n||(Ot(this.doc,r)||_t(r,r.height+n),i&&er(i,function(){i.curOp.forceUpdate=!0,aa(i,r,n),gt(i,"lineWidgetChanged",i,e,Ue(r))}))},Wt(Sn);function aa(e,t,i){Dt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&xo(e,i)}function Ic(e,t,i,r){var n=new Sn(e,i,r),c=e.cm;return c&&n.noHScroll&&(c.display.alignWidgets=!0),yn(e,t,"widget",function(m){var k=m.widgets||(m.widgets=[]);if(n.insertAt==null?k.push(n):k.splice(Math.min(k.length,Math.max(0,n.insertAt)),0,n),n.line=m,c&&!Ot(e,m)){var M=Dt(m)<e.scrollTop;_t(m,m.height+an(n)),M&&xo(c,n.height),c.curOp.forceUpdate=!0}return!0}),c&&gt(c,"lineWidgetAdded",c,n,typeof t=="number"?t:Ue(t)),n}var la=0,ui=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++la};ui.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Li(e),rt(this,"clear")){var i=this.find();i&&gt(this,"clear",i.from,i.to)}for(var r=null,n=null,c=0;c<this.lines.length;++c){var m=this.lines[c],k=ae(m.markedSpans,this);e&&!this.collapsed?oi(e,Ue(m),"text"):e&&(k.to!=null&&(n=Ue(m)),k.from!=null&&(r=Ue(m))),m.markedSpans=se(m.markedSpans,k),k.from==null&&this.collapsed&&!Ot(this.doc,m)&&e&&_t(m,qi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var M=0;M<this.lines.length;++M){var P=ct(this.lines[M]),j=ni(P);j>e.display.maxLineLength&&(e.display.maxLine=P,e.display.maxLineLength=j,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Gt(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Zs(e.doc)),e&&gt(e,"markerCleared",e,this,r,n),t&&Ei(e),this.parent&&this.parent.clear()}},ui.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,n=0;n<this.lines.length;++n){var c=this.lines[n],m=ae(c.markedSpans,this);if(m.from!=null&&(i=he(t?c:Ue(c),m.from),e==-1))return i;if(m.to!=null&&(r=he(t?c:Ue(c),m.to),e==1))return r}return i&&{from:i,to:r}},ui.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||er(r,function(){var n=t.line,c=Ue(t.line),m=uo(r,c);if(m&&(ps(m),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Ot(i.doc,n)&&i.height!=null){var k=i.height;i.height=null;var M=an(i)-k;M&&_t(n,n.height+M)}gt(r,"markerChanged",r,e)})},ui.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||de(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ui.prototype.detachLine=function(e){if(this.lines.splice(de(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Wt(ui);function Vi(e,t,i,r,n){if(r&&r.shared)return Hc(e,t,i,r,n);if(e.cm&&!e.cm.curOp)return yt(e.cm,Vi)(e,t,i,r,n);var c=new ui(e,n),m=H(t,i);if(r&&le(r,c,!1),m>0||m==0&&c.clearWhenEmpty!==!1)return c;if(c.replacedWith&&(c.collapsed=!0,c.widgetNode=w("span",[c.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||c.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(c.widgetNode.insertLeft=!0)),c.collapsed){if(it(e,t.line,t,i,c)||t.line!=i.line&&it(e,i.line,t,i,c))throw new Error("Inserting collapsed marker partially overlapping an existing one");oo()}c.addToHistory&&Us(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var k=t.line,M=e.cm,P;if(e.iter(k,i.line+1,function(X){M&&c.collapsed&&!M.options.lineWrapping&&ct(X)==M.display.maxLine&&(P=!0),c.collapsed&&k!=t.line&&_t(X,0),hr(X,new Fi(c,k==t.line?t.ch:null,k==i.line?i.ch:null),e.cm&&e.cm.curOp),++k}),c.collapsed&&e.iter(t.line,i.line+1,function(X){Ot(e,X)&&_t(X,0)}),c.clearOnEnter&&Oe(c,"beforeCursorEnter",function(){return c.clear()}),c.readOnly&&(On(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),c.collapsed&&(c.id=++la,c.atomic=!0),M){if(P&&(M.curOp.updateMaxLine=!0),c.collapsed)Gt(M,t.line,i.line+1);else if(c.className||c.startStyle||c.endStyle||c.css||c.attributes||c.title)for(var j=t.line;j<=i.line;j++)oi(M,j,"text");c.atomic&&Zs(M.doc),gt(M,"markerAdded",M,c)}return c}var Cn=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Cn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();gt(this,"clear")}},Cn.prototype.find=function(e,t){return this.primary.find(e,t)},Wt(Cn);function Hc(e,t,i,r,n){r=le(r),r.shared=!1;var c=[Vi(e,t,i,r,n)],m=c[0],k=r.widgetNode;return ci(e,function(M){k&&(r.widgetNode=k.cloneNode(!0)),c.push(Vi(M,Se(M,t),Se(M,i),r,n));for(var P=0;P<M.linked.length;++P)if(M.linked[P].isParent)return;m=Me(c)}),new Cn(c,m)}function ca(e){return e.findMarks(he(e.first,0),e.clipPos(he(e.lastLine())),function(t){return t.parent})}function Fc(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),c=e.clipPos(n.from),m=e.clipPos(n.to);if(H(c,m)){var k=Vi(e,c,m,r.primary,r.primary.type);r.markers.push(k),k.parent=r}}}function Nc(e){for(var t=function(r){var n=e[r],c=[n.primary.doc];ci(n.primary.doc,function(M){return c.push(M)});for(var m=0;m<n.markers.length;m++){var k=n.markers[m];de(c,k.doc)==-1&&(k.parent=null,n.markers.splice(m--,1))}},i=0;i<e.length;i++)t(i)}var Wc=0,Xt=function(e,t,i,r,n){if(!(this instanceof Xt))return new Xt(e,t,i,r,n);i==null&&(i=0),bn.call(this,[new mn([new Qt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var c=he(i,0);this.sel=ai(c),this.history=new Un(null),this.id=++Wc,this.modeOption=t,this.lineSep=r,this.direction=n=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Oo(this,{from:c,to:c,text:e}),Pt(this,ai(c),K)};Xt.prototype=Ve(bn.prototype,{constructor:Xt,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ar(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:mt(function(e){var t=he(this.first,0),i=this.first+this.size-1;$i(this,{from:t,to:he(i,Le(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&un(this.cm,0,0),Pt(this,ai(t),K)}),replaceRange:function(e,t,i,r){t=Se(this,t),i=i?Se(this,i):t,Yi(this,e,t,i,r)},getRange:function(e,t,i){var r=jt(this,Se(this,e),Se(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ur(this,e))return Le(this,e)},getLineNumber:function(e){return Ue(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Le(this,e)),ct(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Se(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:mt(function(e,t,i){$s(this,Se(this,typeof e=="number"?he(e,t||0):e),null,i)}),setSelection:mt(function(e,t,i){$s(this,Se(this,e),Se(this,t||e),i)}),extendSelection:mt(function(e,t,i){Gn(this,Se(this,e),t&&Se(this,t),i)}),extendSelections:mt(function(e,t){Xs(this,Mt(this,e),t)}),extendSelectionsBy:mt(function(e,t){var i=He(this.sel.ranges,e);Xs(this,Mt(this,i),t)}),setSelections:mt(function(e,t,i){if(!!e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new $e(Se(this,e[n].anchor),Se(this,e[n].head||e[n].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Pt(this,Cr(this.cm,r,t),i)}}),addSelection:mt(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new $e(Se(this,e),Se(this,t||e))),Pt(this,Cr(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var n=jt(this,t[r].from(),t[r].to());i=i?i.concat(n):n}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=jt(this,i[r].from(),i[r].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:mt(function(e,t,i){for(var r=[],n=this.sel,c=0;c<n.ranges.length;c++){var m=n.ranges[c];r[c]={from:m.from(),to:m.to(),text:this.splitLines(e[c]),origin:i}}for(var k=t&&t!="end"&&Ec(this,r,t),M=r.length-1;M>=0;M--)$i(this,r[M]);k?Ys(this,k):this.cm&&Ui(this.cm)}),undo:mt(function(){Yn(this,"undo")}),redo:mt(function(){Yn(this,"redo")}),undoSelection:mt(function(){Yn(this,"undo",!0)}),redoSelection:mt(function(){Yn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new Un(this.history),ci(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(e){var t=this.history=new Un(this.history);t.done=Gi(e.done.slice(0),null,!0),t.undone=Gi(e.undone.slice(0),null,!0)},setGutterMarker:mt(function(e,t,i){return yn(this,e,"gutter",function(r){var n=r.gutterMarkers||(r.gutterMarkers={});return n[t]=i,!i&&ve(n)&&(r.gutterMarkers=null),!0})}),clearGutter:mt(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&yn(t,i,"gutter",function(){return i.gutterMarkers[e]=null,ve(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!ur(this,e)||(t=e,e=Le(this,e),!e))return null}else if(t=Ue(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:mt(function(e,t,i){return yn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[n])r[n]=i;else{if(B(i).test(r[n]))return!1;r[n]+=" "+i}return!0})}),removeLineClass:mt(function(e,t,i){return yn(this,e,t=="gutter"?"gutter":"class",function(r){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",c=r[n];if(c)if(i==null)r[n]=null;else{var m=c.match(B(i));if(!m)return!1;var k=m.index+m[0].length;r[n]=c.slice(0,m.index)+(!m.index||k==c.length?"":" ")+c.slice(k)||null}else return!1;return!0})}),addLineWidget:mt(function(e,t,i){return Ic(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Vi(this,Se(this,e),Se(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=Se(this,e),Vi(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Se(this,e);var t=[],i=Le(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=Se(this,e),t=Se(this,t);var r=[],n=e.line;return this.iter(e.line,t.line+1,function(c){var m=c.markedSpans;if(m)for(var k=0;k<m.length;k++){var M=m[k];!(M.to!=null&&n==e.line&&e.ch>=M.to||M.from==null&&n!=e.line||M.from!=null&&n==t.line&&M.from>=t.ch)&&(!i||i(M.marker))&&r.push(M.marker.parent||M.marker)}++n}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(n){var c=n.text.length+r;if(c>e)return t=e,!0;e-=c,++i}),Se(this,he(i,t))},indexFromPos:function(e){e=Se(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new Xt(Ar(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new Xt(Ar(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Fc(r,ca(this)),r},unlinkDoc:function(e){if(e instanceof et&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Nc(ca(this));break}}if(e.history==this.history){var r=[e.id];ci(e,function(n){return r.push(n.id)},!0),e.history=new Un(null),e.history.done=Gi(this.history.done,r),e.history.undone=Gi(this.history.undone,r)}},iterLinkedDocs:function(e){ci(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Lr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:mt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Tc(this.cm))})}),Xt.prototype.eachLine=Xt.prototype.iter;var ua=0;function qc(e){var t=this;if(fa(t),!(Qe(t,e)||Zr(t.display,e))){ot(e),x&&(ua=+new Date);var i=Ci(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var n=r.length,c=Array(n),m=0,k=function(){++m==n&&yt(t,function(){i=Se(t.doc,i);var Q={from:i,to:i,text:t.doc.splitLines(c.filter(function(ne){return ne!=null}).join(t.doc.lineSeparator())),origin:"paste"};$i(t.doc,Q),Ys(t.doc,ai(Se(t.doc,i),Se(t.doc,li(Q))))})()},M=function(Q,ne){if(t.options.allowDropFileTypes&&de(t.options.allowDropFileTypes,Q.type)==-1){k();return}var fe=new FileReader;fe.onerror=function(){return k()},fe.onload=function(){var _e=fe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(_e)){k();return}c[ne]=_e,k()},fe.readAsText(Q)},P=0;P<r.length;P++)M(r[P],P);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var j=e.dataTransfer.getData("Text");if(j){var X;if(t.state.draggingText&&!t.state.draggingText.copy&&(X=t.listSelections()),Xn(t.doc,ai(i,i)),X)for(var ee=0;ee<X.length;++ee)Yi(t.doc,"",X[ee].anchor,X[ee].head,"drag");t.replaceSelection(j,"around","paste"),t.display.input.focus()}}catch{}}}}function jc(e,t){if(x&&(!e.state.draggingText||+new Date-ua<100)){cr(t);return}if(!(Qe(e,t)||Zr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!C)){var i=I("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),y&&i.parentNode.removeChild(i)}}function zc(e,t){var i=Ci(e,t);if(!!i){var r=document.createDocumentFragment();mo(e,i,r),e.display.dragCursor||(e.display.dragCursor=I("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,r)}}function fa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ha(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&i.push(n)}i.length&&i[0].operation(function(){for(var c=0;c<i.length;c++)e(i[c])})}}var da=!1;function Uc(){da||(Kc(),da=!0)}function Kc(){var e;Oe(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,ha(Gc)},100))}),Oe(window,"blur",function(){return ha(zi)})}function Gc(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var fi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},wn=0;wn<10;wn++)fi[wn+48]=fi[wn+96]=String(wn);for(var Vn=65;Vn<=90;Vn++)fi[Vn]=String.fromCharCode(Vn);for(var xn=1;xn<=12;xn++)fi[xn+111]=fi[xn+63235]="F"+xn;var Qr={};Qr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qr.default=o?Qr.macDefault:Qr.pcDefault;function Xc(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,n,c,m=0;m<t.length-1;m++){var k=t[m];if(/^(cmd|meta|m)$/i.test(k))c=!0;else if(/^a(lt)?$/i.test(k))i=!0;else if(/^(c|ctrl|control)$/i.test(k))r=!0;else if(/^s(hift)?$/i.test(k))n=!0;else throw new Error("Unrecognized modifier name: "+k)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),c&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function $c(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var n=He(i.split(" "),Xc),c=0;c<n.length;c++){var m=void 0,k=void 0;c==n.length-1?(k=n.join(" "),m=r):(k=n.slice(0,c+1).join(" "),m="...");var M=t[k];if(!M)t[k]=m;else if(M!=m)throw new Error("Inconsistent bindings for "+k)}delete e[i]}for(var P in t)e[P]=t[P];return e}function Zi(e,t,i,r){t=Zn(t);var n=t.call?t.call(e,r):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&i(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Zi(e,t.fallthrough,i,r);for(var c=0;c<t.fallthrough.length;c++){var m=Zi(e,t.fallthrough[c],i,r);if(m)return m}}}function pa(e){var t=typeof e=="string"?e:fi[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function va(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function _a(e,t){if(y&&e.keyCode==34&&e.char)return!1;var i=fi[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),va(i,e,t))}function Zn(e){return typeof e=="string"?Qr[e]:e}function Ji(e,t){for(var i=e.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var c=t(i[n]);r.length&&H(c.from,Me(r).to)<=0;){var m=r.pop();if(H(m.from,c.from)<0){c.from=m.from;break}}r.push(c)}er(e,function(){for(var k=r.length-1;k>=0;k--)Yi(e.doc,"",r[k].from,r[k].to,"+delete");Ui(e)})}function Io(e,t,i){var r=Ee(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Ho(e,t,i){var r=Io(e,t.ch,i);return r==null?null:new he(t.line,r,i<0?"after":"before")}function Fo(e,t,i,r,n){if(e){t.doc.direction=="rtl"&&(n=-n);var c=ht(i,t.doc.direction);if(c){var m=n<0?Me(c):c[0],k=n<0==(m.level==1),M=k?"after":"before",P;if(m.level>0||t.doc.direction=="rtl"){var j=Wi(t,i);P=n<0?i.text.length-1:0;var X=Ir(t,j,P).top;P=De(function(ee){return Ir(t,j,ee).top==X},n<0==(m.level==1)?m.from:m.to-1,P),M=="before"&&(P=Io(i,P,1))}else P=n<0?m.to:m.from;return new he(r,P,M)}}return new he(r,n<0?i.text.length:0,n<0?"before":"after")}function Yc(e,t,i,r){var n=ht(t,e.doc.direction);if(!n)return Ho(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var c=Fe(n,i.ch,i.sticky),m=n[c];if(e.doc.direction=="ltr"&&m.level%2==0&&(r>0?m.to>i.ch:m.from<i.ch))return Ho(t,i,r);var k=function(ye,Ce){return Io(t,ye instanceof he?ye.ch:ye,Ce)},M,P=function(ye){return e.options.lineWrapping?(M=M||Wi(e,t),Ss(e,t,M,ye)):{begin:0,end:t.text.length}},j=P(i.sticky=="before"?k(i,-1):i.ch);if(e.doc.direction=="rtl"||m.level==1){var X=m.level==1==r<0,ee=k(i,X?1:-1);if(ee!=null&&(X?ee<=m.to&&ee<=j.end:ee>=m.from&&ee>=j.begin)){var Q=X?"before":"after";return new he(i.line,ee,Q)}}var ne=function(ye,Ce,me){for(var ke=function(Je,bt){return bt?new he(i.line,k(Je,1),"before"):new he(i.line,Je,"after")};ye>=0&&ye<n.length;ye+=Ce){var Pe=n[ye],Re=Ce>0==(Pe.level!=1),qe=Re?me.begin:k(me.end,-1);if(Pe.from<=qe&&qe<Pe.to||(qe=Re?Pe.from:k(Pe.to,-1),me.begin<=qe&&qe<me.end))return ke(qe,Re)}},fe=ne(c+r,r,j);if(fe)return fe;var _e=r>0?j.end:k(j.begin,-1);return _e!=null&&!(r>0&&_e==t.text.length)&&(fe=ne(r>0?0:n.length-1,r,P(_e)),fe)?fe:null}var kn={selectAll:ea,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),K)},killLine:function(e){return Ji(e,function(t){if(t.empty()){var i=Le(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:he(t.head.line+1,0)}:{from:t.head,to:he(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Ji(e,function(t){return{from:he(t.from().line,0),to:Se(e.doc,he(t.to().line+1,0))}})},delLineLeft:function(e){return Ji(e,function(t){return{from:he(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Ji(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Ji(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(he(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(he(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ga(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ya(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Vc(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},$)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},$)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?ya(e,t.head):r},$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var c=i[n].from(),m=we(e.getLine(c.line),c.ch,r);t.push(Ke(r-m%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return er(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var n=t[r].head,c=Le(e.doc,n.line).text;if(c){if(n.ch==c.length&&(n=new he(n.line,n.ch-1)),n.ch>0)n=new he(n.line,n.ch+1),e.replaceRange(c.charAt(n.ch-1)+c.charAt(n.ch-2),he(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var m=Le(e.doc,n.line-1).text;m&&(n=new he(n.line,1),e.replaceRange(c.charAt(0)+e.doc.lineSeparator()+m.charAt(m.length-1),he(n.line-1,m.length-1),n,"+transpose"))}}i.push(new $e(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return er(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ui(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ga(e,t){var i=Le(e.doc,t),r=ct(i);return r!=i&&(t=Ue(r)),Fo(!0,e,r,t,1)}function Vc(e,t){var i=Le(e.doc,t),r=sr(i);return r!=i&&(t=Ue(r)),Fo(!0,e,i,t,-1)}function ya(e,t){var i=ga(e,t.line),r=Le(e.doc,i.line),n=ht(r,e.doc.direction);if(!n||n[0].level==0){var c=Math.max(i.ch,r.text.search(/\S/)),m=t.line==i.line&&t.ch<=c&&t.ch;return he(i.line,m?0:c,i.sticky)}return i}function Jn(e,t,i){if(typeof t=="string"&&(t=kn[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=z}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}function Zc(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=Zi(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&Zi(t,e.options.extraKeys,i,e)||Zi(t,e.options.keyMap,i,e)}var Jc=new xe;function Ln(e,t,i,r){var n=e.state.keySeq;if(n){if(pa(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Jc.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),ma(e,n+" "+t,i,r))return!0}return ma(e,t,i,r)}function ma(e,t,i,r){var n=Zc(e,t,r);return n=="multi"&&(e.state.keySeq=t),n=="handled"&&gt(e,"keyHandled",e,t,i),(n=="handled"||n=="multi")&&(ot(i),bo(e)),!!n}function ba(e,t){var i=_a(t,!0);return i?t.shiftKey&&!e.state.keySeq?Ln(e,"Shift-"+i,t,function(r){return Jn(e,r,!0)})||Ln(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return Jn(e,r)}):Ln(e,i,t,function(r){return Jn(e,r)}):!1}function Qc(e,t,i){return Ln(e,"'"+i+"'",t,function(r){return Jn(e,r,!0)})}var No=null;function Sa(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=L(),!Qe(t,e))){x&&_<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=ba(t,e);y&&(No=r?i:null,!r&&i==88&&!zr&&(o?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),Z&&!o&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&eu(t)}}function eu(e){var t=e.display.lineDiv;O(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(D(t,"CodeMirror-crosshair"),dt(document,"keyup",i),dt(document,"mouseover",i))}Oe(document,"keyup",i),Oe(document,"mouseover",i)}function Ca(e){e.keyCode==16&&(this.doc.sel.shift=!1),Qe(this,e)}function wa(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Zr(t.display,e)||Qe(t,e)||e.ctrlKey&&!e.altKey||o&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(y&&i==No){No=null,ot(e);return}if(!(y&&(!e.which||e.which<10)&&ba(t,e))){var n=String.fromCharCode(r??i);n!="\b"&&(Qc(t,e,n)||t.display.input.onKeyPress(e))}}}var tu=400,Wo=function(e,t,i){this.time=e,this.pos=t,this.button=i};Wo.prototype.compare=function(e,t,i){return this.time+tu>e&&H(t,this.pos)==0&&i==this.button};var En,Tn;function ru(e,t){var i=+new Date;return Tn&&Tn.compare(i,e,t)?(En=Tn=null,"triple"):En&&En.compare(i,e,t)?(Tn=new Wo(i,e,t),En=null,"double"):(En=new Wo(i,e,t),Tn=null,"single")}function xa(e){var t=this,i=t.display;if(!(Qe(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Zr(i,e)){b||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!qo(t,e)){var r=Ci(t,e),n=Wr(e),c=r?ru(r,n):"single";window.focus(),n==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&iu(t,n,r,c,e))&&(n==1?r?ou(t,r,c,e):ir(e)==i.scroller&&ot(e):n==2?(r&&Gn(t.doc,r),setTimeout(function(){return i.input.focus()},20)):n==3&&(A?t.display.input.onContextMenu(e):So(t)))}}}function iu(e,t,i,r,n){var c="Click";return r=="double"?c="Double"+c:r=="triple"&&(c="Triple"+c),c=(t==1?"Left":t==2?"Middle":"Right")+c,Ln(e,va(c,n),n,function(m){if(typeof m=="string"&&(m=kn[m]),!m)return!1;var k=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),k=m(e,i)!=z}finally{e.state.suppressEdits=!1}return k})}function nu(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(n.unit==null){var c=l?i.shiftKey&&i.metaKey:i.altKey;n.unit=c?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(n.extend==null||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),n.addNew==null&&(n.addNew=o?i.metaKey:i.ctrlKey),n.moveOnDrag==null&&(n.moveOnDrag=!(o?i.altKey:i.ctrlKey)),n}function ou(e,t,i,r){x?setTimeout(ue(ks,e),0):e.curOp.focus=L();var n=nu(e,i,r),c=e.doc.sel,m;e.options.dragDrop&&xr&&!e.isReadOnly()&&i=="single"&&(m=c.contains(t))>-1&&(H((m=c.ranges[m]).from(),t)<0||t.xRel>0)&&(H(m.to(),t)>0||t.xRel<0)?su(e,r,t,n):au(e,r,t,n)}function su(e,t,i,r){var n=e.display,c=!1,m=yt(e,function(P){b&&(n.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:So(e)),dt(n.wrapper.ownerDocument,"mouseup",m),dt(n.wrapper.ownerDocument,"mousemove",k),dt(n.scroller,"dragstart",M),dt(n.scroller,"drop",m),c||(ot(P),r.addNew||Gn(e.doc,i,null,null,r.extend),b&&!C||x&&_==9?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),k=function(P){c=c||Math.abs(t.clientX-P.clientX)+Math.abs(t.clientY-P.clientY)>=10},M=function(){return c=!0};b&&(n.scroller.draggable=!0),e.state.draggingText=m,m.copy=!r.moveOnDrag,Oe(n.wrapper.ownerDocument,"mouseup",m),Oe(n.wrapper.ownerDocument,"mousemove",k),Oe(n.scroller,"dragstart",M),Oe(n.scroller,"drop",m),e.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}function ka(e,t,i){if(i=="char")return new $e(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new $e(he(t.line,0),Se(e.doc,he(t.line+1,0)));var r=i(e,t);return new $e(r.from,r.to)}function au(e,t,i,r){x&&So(e);var n=e.display,c=e.doc;ot(t);var m,k,M=c.sel,P=M.ranges;if(r.addNew&&!r.extend?(k=c.sel.contains(i),k>-1?m=P[k]:m=new $e(i,i)):(m=c.sel.primary(),k=c.sel.primIndex),r.unit=="rectangle")r.addNew||(m=new $e(i,i)),i=Ci(e,t,!0,!0),k=-1;else{var j=ka(e,i,r.unit);r.extend?m=Po(m,j.anchor,j.head,r.extend):m=j}r.addNew?k==-1?(k=P.length,Pt(c,Cr(e,P.concat([m]),k),{scroll:!1,origin:"*mouse"})):P.length>1&&P[k].empty()&&r.unit=="char"&&!r.extend?(Pt(c,Cr(e,P.slice(0,k).concat(P.slice(k+1)),0),{scroll:!1,origin:"*mouse"}),M=c.sel):Bo(c,k,m,re):(k=0,Pt(c,new ar([m],0),re),M=c.sel);var X=i;function ee(me){if(H(X,me)!=0)if(X=me,r.unit=="rectangle"){for(var ke=[],Pe=e.options.tabSize,Re=we(Le(c,i.line).text,i.ch,Pe),qe=we(Le(c,me.line).text,me.ch,Pe),Je=Math.min(Re,qe),bt=Math.max(Re,qe),tt=Math.min(i.line,me.line),tr=Math.min(e.lastLine(),Math.max(i.line,me.line));tt<=tr;tt++){var $t=Le(c,tt).text,ut=be($t,Je,Pe);Je==bt?ke.push(new $e(he(tt,ut),he(tt,ut))):$t.length>ut&&ke.push(new $e(he(tt,ut),he(tt,be($t,bt,Pe))))}ke.length||ke.push(new $e(i,i)),Pt(c,Cr(e,M.ranges.slice(0,k).concat(ke),k),{origin:"*mouse",scroll:!1}),e.scrollIntoView(me)}else{var Yt=m,kt=ka(e,me,r.unit),vt=Yt.anchor,ft;H(kt.anchor,vt)>0?(ft=kt.head,vt=Ie(Yt.from(),kt.anchor)):(ft=kt.anchor,vt=pe(Yt.to(),kt.head));var nt=M.ranges.slice(0);nt[k]=lu(e,new $e(Se(c,vt),ft)),Pt(c,Cr(e,nt,k),re)}}var Q=n.wrapper.getBoundingClientRect(),ne=0;function fe(me){var ke=++ne,Pe=Ci(e,me,!0,r.unit=="rectangle");if(!!Pe)if(H(Pe,X)!=0){e.curOp.focus=L(),ee(Pe);var Re=Wn(n,c);(Pe.line>=Re.to||Pe.line<Re.from)&&setTimeout(yt(e,function(){ne==ke&&fe(me)}),150)}else{var qe=me.clientY<Q.top?-20:me.clientY>Q.bottom?20:0;qe&&setTimeout(yt(e,function(){ne==ke&&(n.scroller.scrollTop+=qe,fe(me))}),50)}}function _e(me){e.state.selectingText=!1,ne=1/0,me&&(ot(me),n.input.focus()),dt(n.wrapper.ownerDocument,"mousemove",ye),dt(n.wrapper.ownerDocument,"mouseup",Ce),c.history.lastSelOrigin=null}var ye=yt(e,function(me){me.buttons===0||!Wr(me)?_e(me):fe(me)}),Ce=yt(e,_e);e.state.selectingText=Ce,Oe(n.wrapper.ownerDocument,"mousemove",ye),Oe(n.wrapper.ownerDocument,"mouseup",Ce)}function lu(e,t){var i=t.anchor,r=t.head,n=Le(e.doc,i.line);if(H(i,r)==0&&i.sticky==r.sticky)return t;var c=ht(n);if(!c)return t;var m=Fe(c,i.ch,i.sticky),k=c[m];if(k.from!=i.ch&&k.to!=i.ch)return t;var M=m+(k.from==i.ch==(k.level!=1)?0:1);if(M==0||M==c.length)return t;var P;if(r.line!=i.line)P=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var j=Fe(c,r.ch,r.sticky),X=j-m||(r.ch-i.ch)*(k.level==1?-1:1);j==M-1||j==M?P=X<0:P=X>0}var ee=c[M+(P?-1:0)],Q=P==(ee.level==1),ne=Q?ee.from:ee.to,fe=Q?"after":"before";return i.ch==ne&&i.sticky==fe?t:new $e(new he(i.line,ne,fe),r)}function La(e,t,i,r){var n,c;if(t.touches)n=t.touches[0].clientX,c=t.touches[0].clientY;else try{n=t.clientX,c=t.clientY}catch{return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ot(t);var m=e.display,k=m.lineDiv.getBoundingClientRect();if(c>k.bottom||!rt(e,i))return Ct(t);c-=k.top-m.viewOffset;for(var M=0;M<e.display.gutterSpecs.length;++M){var P=m.gutters.childNodes[M];if(P&&P.getBoundingClientRect().right>=n){var j=zt(e.doc,c),X=e.display.gutterSpecs[M];return Be(e,i,e,j,X.className,t),Ct(t)}}}function qo(e,t){return La(e,t,"gutterClick",!0)}function Ea(e,t){Zr(e.display,t)||cu(e,t)||Qe(e,t,"contextmenu")||A||e.display.input.onContextMenu(t)}function cu(e,t){return rt(e,"gutterContextMenu")?La(e,t,"gutterContextMenu",!1):!1}function Ta(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ln(e)}var Qi={toString:function(){return"CodeMirror.Init"}},Ma={},Qn={};function uu(e){var t=e.optionHandlers;function i(r,n,c,m){e.defaults[r]=n,c&&(t[r]=m?function(k,M,P){P!=Qi&&c(k,M,P)}:c)}e.defineOption=i,e.Init=Qi,i("value","",function(r,n){return r.setValue(n)},!0),i("mode",null,function(r,n){r.doc.modeOption=n,Ro(r)},!0),i("indentUnit",2,Ro,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){_n(r),ln(r),Gt(r)},!0),i("lineSeparator",null,function(r,n){if(r.doc.lineSep=n,!!n){var c=[],m=r.doc.first;r.doc.iter(function(M){for(var P=0;;){var j=M.text.indexOf(n,P);if(j==-1)break;P=j+n.length,c.push(he(m,j))}m++});for(var k=c.length-1;k>=0;k--)Yi(r.doc,n,c[k],he(c[k].line,c[k].ch+n.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,n,c){r.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),c!=Qi&&r.refresh()}),i("specialCharPlaceholder",Nl,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",s?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,n){return r.getInputField().spellcheck=n},!0),i("autocorrect",!1,function(r,n){return r.getInputField().autocorrect=n},!0),i("autocapitalize",!1,function(r,n){return r.getInputField().autocapitalize=n},!0),i("rtlMoveVisually",!p),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){Ta(r),vn(r)},!0),i("keyMap","default",function(r,n,c){var m=Zn(n),k=c!=Qi&&Zn(c);k&&k.detach&&k.detach(r,m),m.attach&&m.attach(r,k||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,hu,!0),i("gutters",[],function(r,n){r.display.gutterSpecs=Mo(n,r.options.lineNumbers),vn(r)},!0),i("fixedGutter",!0,function(r,n){r.display.gutters.style.left=n?go(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Ki(r)},!0),i("scrollbarStyle","native",function(r){Rs(r),Ki(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,n){r.display.gutterSpecs=Mo(r.options.gutters,n),vn(r)},!0),i("firstLineNumber",1,vn,!0),i("lineNumberFormatter",function(r){return r},vn,!0),i("showCursorWhenSelecting",!1,cn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,n){n=="nocursor"&&(zi(r),r.display.input.blur()),r.display.input.readOnlyChanged(n)}),i("screenReaderLabel",null,function(r,n){n=n===""?null:n,r.display.input.screenReaderLabelChanged(n)}),i("disableInput",!1,function(r,n){n||r.display.input.reset()},!0),i("dragDrop",!0,fu),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,cn,!0),i("singleCursorHeightPerLine",!0,cn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,_n,!0),i("addModeClass",!1,_n,!0),i("pollInterval",100),i("undoDepth",200,function(r,n){return r.doc.history.undoDepth=n}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,_n,!0),i("moveInputWithCursor",!0,function(r,n){n||r.display.input.resetPosition()}),i("tabindex",null,function(r,n){return r.display.input.getField().tabIndex=n||""}),i("autofocus",null),i("direction","ltr",function(r,n){return r.doc.setDirection(n)},!0),i("phrases",null)}function fu(e,t,i){var r=i&&i!=Qi;if(!t!=!r){var n=e.display.dragFunctions,c=t?Oe:dt;c(e.display.scroller,"dragstart",n.start),c(e.display.scroller,"dragenter",n.enter),c(e.display.scroller,"dragover",n.over),c(e.display.scroller,"dragleave",n.leave),c(e.display.scroller,"drop",n.drop)}}function hu(e){e.options.lineWrapping?(O(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(D(e.display.wrapper,"CodeMirror-wrap"),mi(e)),yo(e),Gt(e),ln(e),setTimeout(function(){return Ki(e)},100)}function et(e,t){var i=this;if(!(this instanceof et))return new et(e,t);this.options=t=t?le(t):{},le(Ma,t,!1);var r=t.value;typeof r=="string"?r=new Xt(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var n=new et.inputStyles[t.inputStyle](this),c=this.display=new kc(e,r,n,t);c.wrapper.CodeMirror=this,Ta(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Rs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new xe,keySeq:null,specialChars:null},t.autofocus&&!s&&c.input.focus(),x&&_<11&&setTimeout(function(){return i.display.input.reset(!0)},20),du(this),Uc(),Li(this),this.curOp.forceUpdate=!0,qs(this,r),t.autofocus&&!s||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&Co(i)},20):zi(this);for(var m in Qn)Qn.hasOwnProperty(m)&&Qn[m](this,t[m],Qi);Ps(this),t.finishInit&&t.finishInit(this);for(var k=0;k<jo.length;++k)jo[k](this);Ei(this),b&&t.lineWrapping&&getComputedStyle(c.lineDiv).textRendering=="optimizelegibility"&&(c.lineDiv.style.textRendering="auto")}et.defaults=Ma,et.optionHandlers=Qn;function du(e){var t=e.display;Oe(t.scroller,"mousedown",yt(e,xa)),x&&_<11?Oe(t.scroller,"dblclick",yt(e,function(M){if(!Qe(e,M)){var P=Ci(e,M);if(!(!P||qo(e,M)||Zr(e.display,M))){ot(M);var j=e.findWordAt(P);Gn(e.doc,j.anchor,j.head)}}})):Oe(t.scroller,"dblclick",function(M){return Qe(e,M)||ot(M)}),Oe(t.scroller,"contextmenu",function(M){return Ea(e,M)}),Oe(t.input.getField(),"contextmenu",function(M){t.scroller.contains(M.target)||Ea(e,M)});var i,r={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function c(M){if(M.touches.length!=1)return!1;var P=M.touches[0];return P.radiusX<=1&&P.radiusY<=1}function m(M,P){if(P.left==null)return!0;var j=P.left-M.left,X=P.top-M.top;return j*j+X*X>20*20}Oe(t.scroller,"touchstart",function(M){if(!Qe(e,M)&&!c(M)&&!qo(e,M)){t.input.ensurePolled(),clearTimeout(i);var P=+new Date;t.activeTouch={start:P,moved:!1,prev:P-r.end<=300?r:null},M.touches.length==1&&(t.activeTouch.left=M.touches[0].pageX,t.activeTouch.top=M.touches[0].pageY)}}),Oe(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Oe(t.scroller,"touchend",function(M){var P=t.activeTouch;if(P&&!Zr(t,M)&&P.left!=null&&!P.moved&&new Date-P.start<300){var j=e.coordsChar(t.activeTouch,"page"),X;!P.prev||m(P,P.prev)?X=new $e(j,j):!P.prev.prev||m(P,P.prev.prev)?X=e.findWordAt(j):X=new $e(he(j.line,0),Se(e.doc,he(j.line+1,0))),e.setSelection(X.anchor,X.head),e.focus(),ot(M)}n()}),Oe(t.scroller,"touchcancel",n),Oe(t.scroller,"scroll",function(){t.scroller.clientHeight&&(fn(e,t.scroller.scrollTop),xi(e,t.scroller.scrollLeft,!0),Be(e,"scroll",e))}),Oe(t.scroller,"mousewheel",function(M){return Hs(e,M)}),Oe(t.scroller,"DOMMouseScroll",function(M){return Hs(e,M)}),Oe(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(M){Qe(e,M)||cr(M)},over:function(M){Qe(e,M)||(zc(e,M),cr(M))},start:function(M){return jc(e,M)},drop:yt(e,qc),leave:function(M){Qe(e,M)||fa(e)}};var k=t.input.getField();Oe(k,"keyup",function(M){return Ca.call(e,M)}),Oe(k,"keydown",yt(e,Sa)),Oe(k,"keypress",yt(e,wa)),Oe(k,"focus",function(M){return Co(e,M)}),Oe(k,"blur",function(M){return zi(e,M)})}var jo=[];et.defineInitHook=function(e){return jo.push(e)};function Mn(e,t,i,r){var n=e.doc,c;i==null&&(i="add"),i=="smart"&&(n.mode.indent?c=Kr(e,t).state:i="prev");var m=e.options.tabSize,k=Le(n,t),M=we(k.text,null,m);k.stateAfter&&(k.stateAfter=null);var P=k.text.match(/^\s*/)[0],j;if(!r&&!/\S/.test(k.text))j=0,i="not";else if(i=="smart"&&(j=n.mode.indent(c,k.text.slice(P.length),k.text),j==z||j>150)){if(!r)return;i="prev"}i=="prev"?t>n.first?j=we(Le(n,t-1).text,null,m):j=0:i=="add"?j=M+e.options.indentUnit:i=="subtract"?j=M-e.options.indentUnit:typeof i=="number"&&(j=M+i),j=Math.max(0,j);var X="",ee=0;if(e.options.indentWithTabs)for(var Q=Math.floor(j/m);Q;--Q)ee+=m,X+="	";if(ee<j&&(X+=Ke(j-ee)),X!=P)return Yi(n,X,he(t,0),he(t,P.length),"+input"),k.stateAfter=null,!0;for(var ne=0;ne<n.sel.ranges.length;ne++){var fe=n.sel.ranges[ne];if(fe.head.line==t&&fe.head.ch<P.length){var _e=he(t,P.length);Bo(n,ne,new $e(_e,_e));break}}}var wr=null;function eo(e){wr=e}function zo(e,t,i,r,n){var c=e.doc;e.display.shift=!1,r||(r=c.sel);var m=+new Date-200,k=n=="paste"||e.state.pasteIncoming>m,M=Lr(t),P=null;if(k&&r.ranges.length>1)if(wr&&wr.text.join(`
`)==t){if(r.ranges.length%wr.text.length==0){P=[];for(var j=0;j<wr.text.length;j++)P.push(c.splitLines(wr.text[j]))}}else M.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(P=He(M,function(ye){return[ye]}));for(var X=e.curOp.updateInput,ee=r.ranges.length-1;ee>=0;ee--){var Q=r.ranges[ee],ne=Q.from(),fe=Q.to();Q.empty()&&(i&&i>0?ne=he(ne.line,ne.ch-i):e.state.overwrite&&!k?fe=he(fe.line,Math.min(Le(c,fe.line).text.length,fe.ch+Me(M).length)):k&&wr&&wr.lineWise&&wr.text.join(`
`)==M.join(`
`)&&(ne=fe=he(ne.line,0)));var _e={from:ne,to:fe,text:P?P[ee%P.length]:M,origin:n||(k?"paste":e.state.cutIncoming>m?"cut":"+input")};$i(e.doc,_e),gt(e,"inputRead",e,_e)}t&&!k&&Ra(e,t),Ui(e),e.curOp.updateInput<2&&(e.curOp.updateInput=X),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Aa(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&er(t,function(){return zo(t,i,0,null,"paste")}),!0}function Ra(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var n=i.ranges[r];if(!(n.head.ch>100||r&&i.ranges[r-1].head.line==n.head.line)){var c=e.getModeAt(n.head),m=!1;if(c.electricChars){for(var k=0;k<c.electricChars.length;k++)if(t.indexOf(c.electricChars.charAt(k))>-1){m=Mn(e,n.head.line,"smart");break}}else c.electricInput&&c.electricInput.test(Le(e.doc,n.head.line).text.slice(0,n.head.ch))&&(m=Mn(e,n.head.line,"smart"));m&&gt(e,"electricInput",e,n.head.line)}}}function Oa(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,c={anchor:he(n,0),head:he(n+1,0)};i.push(c),t.push(e.getRange(c.anchor,c.head))}return{text:t,ranges:i}}function Da(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Pa(){var e=I("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=I("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?e.style.width="1000px":e.setAttribute("wrap","off"),d&&(e.style.border="1px solid black"),Da(e),t}function pu(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,n){var c=this.options,m=c[r];c[r]==n&&r!="mode"||(c[r]=n,t.hasOwnProperty(r)&&yt(this,t[r])(this,n,m),Be(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,n){this.state.keyMaps[n?"push":"unshift"](Zn(r))},removeKeyMap:function(r){for(var n=this.state.keyMaps,c=0;c<n.length;++c)if(n[c]==r||n[c].name==r)return n.splice(c,1),!0},addOverlay:Ft(function(r,n){var c=r.token?r:e.getMode(this.options,r);if(c.startState)throw new Error("Overlays may not be stateful.");ge(this.state.overlays,{mode:c,modeSpec:r,opaque:n&&n.opaque,priority:n&&n.priority||0},function(m){return m.priority}),this.state.modeGen++,Gt(this)}),removeOverlay:Ft(function(r){for(var n=this.state.overlays,c=0;c<n.length;++c){var m=n[c].modeSpec;if(m==r||typeof r=="string"&&m.name==r){n.splice(c,1),this.state.modeGen++,Gt(this);return}}}),indentLine:Ft(function(r,n,c){typeof n!="string"&&typeof n!="number"&&(n==null?n=this.options.smartIndent?"smart":"prev":n=n?"add":"subtract"),ur(this.doc,r)&&Mn(this,r,n,c)}),indentSelection:Ft(function(r){for(var n=this.doc.sel.ranges,c=-1,m=0;m<n.length;m++){var k=n[m];if(k.empty())k.head.line>c&&(Mn(this,k.head.line,r,!0),c=k.head.line,m==this.doc.sel.primIndex&&Ui(this));else{var M=k.from(),P=k.to(),j=Math.max(c,M.line);c=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var X=j;X<c;++X)Mn(this,X,r);var ee=this.doc.sel.ranges;M.ch==0&&n.length==ee.length&&ee[m].from().ch>0&&Bo(this.doc,m,new $e(M,ee[m].to()),K)}}}),getTokenAt:function(r,n){return Bi(this,r,n)},getLineTokens:function(r,n){return Bi(this,he(r),n,!0)},getTokenTypeAt:function(r){r=Se(this.doc,r);var n=Oi(this,Le(this.doc,r.line)),c=0,m=(n.length-1)/2,k=r.ch,M;if(k==0)M=n[2];else for(;;){var P=c+m>>1;if((P?n[P*2-1]:0)>=k)m=P;else if(n[P*2+1]<k)c=P+1;else{M=n[P*2+2];break}}var j=M?M.indexOf("overlay "):-1;return j<0?M:j==0?null:M.slice(0,j-1)},getModeAt:function(r){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(r).state).mode:n},getHelper:function(r,n){return this.getHelpers(r,n)[0]},getHelpers:function(r,n){var c=[];if(!i.hasOwnProperty(n))return c;var m=i[n],k=this.getModeAt(r);if(typeof k[n]=="string")m[k[n]]&&c.push(m[k[n]]);else if(k[n])for(var M=0;M<k[n].length;M++){var P=m[k[n][M]];P&&c.push(P)}else k.helperType&&m[k.helperType]?c.push(m[k.helperType]):m[k.name]&&c.push(m[k.name]);for(var j=0;j<m._global.length;j++){var X=m._global[j];X.pred(k,this)&&de(c,X.val)==-1&&c.push(X.val)}return c},getStateAfter:function(r,n){var c=this.doc;return r=je(c,r??c.first+c.size-1),Kr(this,r+1,n).state},cursorCoords:function(r,n){var c,m=this.doc.sel.primary();return r==null?c=m.head:typeof r=="object"?c=Se(this.doc,r):c=r?m.from():m.to(),Sr(this,c,n||"page")},charCoords:function(r,n){return In(this,Se(this.doc,r),n||"page")},coordsChar:function(r,n){return r=ys(this,r,n||"page"),po(this,r.left,r.top)},lineAtHeight:function(r,n){return r=ys(this,{top:r,left:0},n||"page").top,zt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,n,c){var m=!1,k;if(typeof r=="number"){var M=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>M&&(r=M,m=!0),k=Le(this.doc,r)}else k=r;return Bn(this,k,{top:0,left:0},n||"page",c||m).top+(m?this.doc.height-Dt(k):0)},defaultTextHeight:function(){return qi(this.display)},defaultCharWidth:function(){return ji(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,n,c,m,k){var M=this.display;r=Sr(this,Se(this.doc,r));var P=r.bottom,j=r.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),M.sizer.appendChild(n),m=="over")P=r.top;else if(m=="above"||m=="near"){var X=Math.max(M.wrapper.clientHeight,this.doc.height),ee=Math.max(M.sizer.clientWidth,M.lineSpace.clientWidth);(m=="above"||r.bottom+n.offsetHeight>X)&&r.top>n.offsetHeight?P=r.top-n.offsetHeight:r.bottom+n.offsetHeight<=X&&(P=r.bottom),j+n.offsetWidth>ee&&(j=ee-n.offsetWidth)}n.style.top=P+"px",n.style.left=n.style.right="",k=="right"?(j=M.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):(k=="left"?j=0:k=="middle"&&(j=(M.sizer.clientWidth-n.offsetWidth)/2),n.style.left=j+"px"),c&&fc(this,{left:j,top:P,right:j+n.offsetWidth,bottom:P+n.offsetHeight})},triggerOnKeyDown:Ft(Sa),triggerOnKeyPress:Ft(wa),triggerOnKeyUp:Ca,triggerOnMouseDown:Ft(xa),execCommand:function(r){if(kn.hasOwnProperty(r))return kn[r].call(null,this)},triggerElectric:Ft(function(r){Ra(this,r)}),findPosH:function(r,n,c,m){var k=1;n<0&&(k=-1,n=-n);for(var M=Se(this.doc,r),P=0;P<n&&(M=Uo(this.doc,M,k,c,m),!M.hitSide);++P);return M},moveH:Ft(function(r,n){var c=this;this.extendSelectionsBy(function(m){return c.display.shift||c.doc.extend||m.empty()?Uo(c.doc,m.head,r,n,c.options.rtlMoveVisually):r<0?m.from():m.to()},$)}),deleteH:Ft(function(r,n){var c=this.doc.sel,m=this.doc;c.somethingSelected()?m.replaceSelection("",null,"+delete"):Ji(this,function(k){var M=Uo(m,k.head,r,n,!1);return r<0?{from:M,to:k.head}:{from:k.head,to:M}})}),findPosV:function(r,n,c,m){var k=1,M=m;n<0&&(k=-1,n=-n);for(var P=Se(this.doc,r),j=0;j<n;++j){var X=Sr(this,P,"div");if(M==null?M=X.left:X.left=M,P=Ba(this,X,k,c),P.hitSide)break}return P},moveV:Ft(function(r,n){var c=this,m=this.doc,k=[],M=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(j){if(M)return r<0?j.from():j.to();var X=Sr(c,j.head,"div");j.goalColumn!=null&&(X.left=j.goalColumn),k.push(X.left);var ee=Ba(c,X,r,n);return n=="page"&&j==m.sel.primary()&&xo(c,In(c,ee,"div").top-X.top),ee},$),k.length)for(var P=0;P<m.sel.ranges.length;P++)m.sel.ranges[P].goalColumn=k[P]}),findWordAt:function(r){var n=this.doc,c=Le(n,r.line).text,m=r.ch,k=r.ch;if(c){var M=this.getHelper(r,"wordChars");(r.sticky=="before"||k==c.length)&&m?--m:++k;for(var P=c.charAt(m),j=te(P,M)?function(X){return te(X,M)}:/\s/.test(P)?function(X){return/\s/.test(X)}:function(X){return!/\s/.test(X)&&!te(X)};m>0&&j(c.charAt(m-1));)--m;for(;k<c.length&&j(c.charAt(k));)++k}return new $e(he(r.line,m),he(r.line,k))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?O(this.display.cursorDiv,"CodeMirror-overwrite"):D(this.display.cursorDiv,"CodeMirror-overwrite"),Be(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ft(function(r,n){un(this,r,n)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Br(this)-this.display.barHeight,width:r.scrollWidth-Br(this)-this.display.barWidth,clientHeight:co(this),clientWidth:bi(this)}},scrollIntoView:Ft(function(r,n){r==null?(r={from:this.doc.sel.primary().head,to:null},n==null&&(n=this.options.cursorScrollMargin)):typeof r=="number"?r={from:he(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=n||0,r.from.line!=null?hc(this,r):Es(this,r.from,r.to,r.margin)}),setSize:Ft(function(r,n){var c=this,m=function(M){return typeof M=="number"||/^\d+$/.test(String(M))?M+"px":M};r!=null&&(this.display.wrapper.style.width=m(r)),n!=null&&(this.display.wrapper.style.height=m(n)),this.options.lineWrapping&&vs(this);var k=this.display.viewFrom;this.doc.iter(k,this.display.viewTo,function(M){if(M.widgets){for(var P=0;P<M.widgets.length;P++)if(M.widgets[P].noHScroll){oi(c,k,"widget");break}}++k}),this.curOp.forceUpdate=!0,Be(this,"refresh",this)}),operation:function(r){return er(this,r)},startOperation:function(){return Li(this)},endOperation:function(){return Ei(this)},refresh:Ft(function(){var r=this.display.cachedTextHeight;Gt(this),this.curOp.forceUpdate=!0,ln(this),un(this,this.doc.scrollLeft,this.doc.scrollTop),Eo(this.display),(r==null||Math.abs(r-qi(this.display))>.5||this.options.lineWrapping)&&yo(this),Be(this,"refresh",this)}),swapDoc:Ft(function(r){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),qs(this,r),ln(this),this.display.input.reset(),un(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,gt(this,"swapDoc",this,n),n}),phrase:function(r){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,r)?n[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Wt(e),e.registerHelper=function(r,n,c){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][n]=c},e.registerGlobalHelper=function(r,n,c,m){e.registerHelper(r,n,m),i[r]._global.push({pred:c,val:m})}}function Uo(e,t,i,r,n){var c=t,m=i,k=Le(e,t.line),M=n&&e.direction=="rtl"?-i:i;function P(){var Ce=t.line+M;return Ce<e.first||Ce>=e.first+e.size?!1:(t=new he(Ce,t.ch,t.sticky),k=Le(e,Ce))}function j(Ce){var me;if(r=="codepoint"){var ke=k.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(ke))me=null;else{var Pe=i>0?ke>=55296&&ke<56320:ke>=56320&&ke<57343;me=new he(t.line,Math.max(0,Math.min(k.text.length,t.ch+i*(Pe?2:1))),-i)}}else n?me=Yc(e.cm,k,t,i):me=Ho(k,t,i);if(me==null)if(!Ce&&P())t=Fo(n,e.cm,k,t.line,M);else return!1;else t=me;return!0}if(r=="char"||r=="codepoint")j();else if(r=="column")j(!0);else if(r=="word"||r=="group")for(var X=null,ee=r=="group",Q=e.cm&&e.cm.getHelper(t,"wordChars"),ne=!0;!(i<0&&!j(!ne));ne=!1){var fe=k.text.charAt(t.ch)||`
`,_e=te(fe,Q)?"w":ee&&fe==`
`?"n":!ee||/\s/.test(fe)?null:"p";if(ee&&!ne&&!_e&&(_e="s"),X&&X!=_e){i<0&&(i=1,j(),t.sticky="after");break}if(_e&&(X=_e),i>0&&!j(!ne))break}var ye=$n(e,t,c,m,!0);return G(c,ye)&&(ye.hitSide=!0),ye}function Ba(e,t,i,r){var n=e.doc,c=t.left,m;if(r=="page"){var k=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),M=Math.max(k-.5*qi(e.display),3);m=(i>0?t.bottom:t.top)+i*M}else r=="line"&&(m=i>0?t.bottom+3:t.top-3);for(var P;P=po(e,c,m),!!P.outside;){if(i<0?m<=0:m>=n.height){P.hitSide=!0;break}m+=i*5}return P}var Ye=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new xe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ye.prototype.init=function(e){var t=this,i=this,r=i.cm,n=i.div=e.lineDiv;n.contentEditable=!0,Da(n,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function c(k){for(var M=k.target;M;M=M.parentNode){if(M==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(M.className))break}return!1}Oe(n,"paste",function(k){!c(k)||Qe(r,k)||Aa(k,r)||_<=11&&setTimeout(yt(r,function(){return t.updateFromDOM()}),20)}),Oe(n,"compositionstart",function(k){t.composing={data:k.data,done:!1}}),Oe(n,"compositionupdate",function(k){t.composing||(t.composing={data:k.data,done:!1})}),Oe(n,"compositionend",function(k){t.composing&&(k.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Oe(n,"touchstart",function(){return i.forceCompositionEnd()}),Oe(n,"input",function(){t.composing||t.readFromDOMSoon()});function m(k){if(!(!c(k)||Qe(r,k))){if(r.somethingSelected())eo({lineWise:!1,text:r.getSelections()}),k.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var M=Oa(r);eo({lineWise:!0,text:M.text}),k.type=="cut"&&r.operation(function(){r.setSelections(M.ranges,0,K),r.replaceSelection("",null,"cut")})}else return;if(k.clipboardData){k.clipboardData.clearData();var P=wr.text.join(`
`);if(k.clipboardData.setData("Text",P),k.clipboardData.getData("Text")==P){k.preventDefault();return}}var j=Pa(),X=j.firstChild;r.display.lineSpace.insertBefore(j,r.display.lineSpace.firstChild),X.value=wr.text.join(`
`);var ee=L();Y(X),setTimeout(function(){r.display.lineSpace.removeChild(j),ee.focus(),ee==n&&i.showPrimarySelection()},50)}}Oe(n,"copy",m),Oe(n,"cut",m)},Ye.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ye.prototype.prepareSelection=function(){var e=xs(this.cm,!1);return e.focus=L()==this.div,e},Ye.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ye.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ye.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),n=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||n.line<t.display.viewFrom){e.removeAllRanges();return}var c=to(t,e.anchorNode,e.anchorOffset),m=to(t,e.focusNode,e.focusOffset);if(!(c&&!c.bad&&m&&!m.bad&&H(Ie(c,m),r)==0&&H(pe(c,m),n)==0)){var k=t.display.view,M=r.line>=t.display.viewFrom&&Ia(t,r)||{node:k[0].measure.map[2],offset:0},P=n.line<t.display.viewTo&&Ia(t,n);if(!P){var j=k[k.length-1].measure,X=j.maps?j.maps[j.maps.length-1]:j.map;P={node:X[X.length-1],offset:X[X.length-2]-X[X.length-3]}}if(!M||!P){e.removeAllRanges();return}var ee=e.rangeCount&&e.getRangeAt(0),Q;try{Q=U(M.node,M.offset,P.offset,P.node)}catch{}Q&&(!Z&&t.state.focused?(e.collapse(M.node,M.offset),Q.collapsed||(e.removeAllRanges(),e.addRange(Q))):(e.removeAllRanges(),e.addRange(Q)),ee&&e.anchorNode==null?e.addRange(ee):Z&&this.startGracePeriod()),this.rememberSelection()}},Ye.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ye.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},Ye.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ye.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return N(this.div,t)},Ye.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||L()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ye.prototype.blur=function(){this.div.blur()},Ye.prototype.getField=function(){return this.div},Ye.prototype.supportsTouch=function(){return!0},Ye.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):er(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Ye.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ye.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(a&&v&&this.cm.display.gutterSpecs.length&&vu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=to(t,e.anchorNode,e.anchorOffset),r=to(t,e.focusNode,e.focusOffset);i&&r&&er(t,function(){Pt(t.doc,ai(i,r),K),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Ye.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),n=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=he(r.line-1,Le(e.doc,r.line-1).length)),n.ch==Le(e.doc,n.line).text.length&&n.line<e.lastLine()&&(n=he(n.line+1,0)),r.line<t.viewFrom||n.line>t.viewTo-1)return!1;var c,m,k;r.line==t.viewFrom||(c=wi(e,r.line))==0?(m=Ue(t.view[0].line),k=t.view[0].node):(m=Ue(t.view[c].line),k=t.view[c-1].node.nextSibling);var M=wi(e,n.line),P,j;if(M==t.view.length-1?(P=t.viewTo-1,j=t.lineDiv.lastChild):(P=Ue(t.view[M+1].line)-1,j=t.view[M+1].node.previousSibling),!k)return!1;for(var X=e.doc.splitLines(_u(e,k,j,m,P)),ee=jt(e.doc,he(m,0),he(P,Le(e.doc,P).text.length));X.length>1&&ee.length>1;)if(Me(X)==Me(ee))X.pop(),ee.pop(),P--;else if(X[0]==ee[0])X.shift(),ee.shift(),m++;else break;for(var Q=0,ne=0,fe=X[0],_e=ee[0],ye=Math.min(fe.length,_e.length);Q<ye&&fe.charCodeAt(Q)==_e.charCodeAt(Q);)++Q;for(var Ce=Me(X),me=Me(ee),ke=Math.min(Ce.length-(X.length==1?Q:0),me.length-(ee.length==1?Q:0));ne<ke&&Ce.charCodeAt(Ce.length-ne-1)==me.charCodeAt(me.length-ne-1);)++ne;if(X.length==1&&ee.length==1&&m==r.line)for(;Q&&Q>r.ch&&Ce.charCodeAt(Ce.length-ne-1)==me.charCodeAt(me.length-ne-1);)Q--,ne++;X[X.length-1]=Ce.slice(0,Ce.length-ne).replace(/^\u200b+/,""),X[0]=X[0].slice(Q).replace(/\u200b+$/,"");var Pe=he(m,Q),Re=he(P,ee.length?Me(ee).length-ne:0);if(X.length>1||X[0]||H(Pe,Re))return Yi(e.doc,X,Pe,Re,"+input"),!0},Ye.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ye.prototype.reset=function(){this.forceCompositionEnd()},Ye.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ye.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ye.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&er(this.cm,function(){return Gt(e.cm)})},Ye.prototype.setUneditable=function(e){e.contentEditable="false"},Ye.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||yt(this.cm,zo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ye.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ye.prototype.onContextMenu=function(){},Ye.prototype.resetPosition=function(){},Ye.prototype.needsContentAttribute=!0;function Ia(e,t){var i=uo(e,t.line);if(!i||i.hidden)return null;var r=Le(e.doc,t.line),n=us(i,r,t.line),c=ht(r,e.doc.direction),m="left";if(c){var k=Fe(c,t.ch);m=k%2?"right":"left"}var M=ds(n.map,t.ch,m);return M.offset=M.collapse=="right"?M.end:M.start,M}function vu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function en(e,t){return t&&(e.bad=!0),e}function _u(e,t,i,r,n){var c="",m=!1,k=e.doc.lineSeparator(),M=!1;function P(Q){return function(ne){return ne.id==Q}}function j(){m&&(c+=k,M&&(c+=k),m=M=!1)}function X(Q){Q&&(j(),c+=Q)}function ee(Q){if(Q.nodeType==1){var ne=Q.getAttribute("cm-text");if(ne){X(ne);return}var fe=Q.getAttribute("cm-marker"),_e;if(fe){var ye=e.findMarks(he(r,0),he(n+1,0),P(+fe));ye.length&&(_e=ye[0].find(0))&&X(jt(e.doc,_e.from,_e.to).join(k));return}if(Q.getAttribute("contenteditable")=="false")return;var Ce=/^(pre|div|p|li|table|br)$/i.test(Q.nodeName);if(!/^br$/i.test(Q.nodeName)&&Q.textContent.length==0)return;Ce&&j();for(var me=0;me<Q.childNodes.length;me++)ee(Q.childNodes[me]);/^(pre|p)$/i.test(Q.nodeName)&&(M=!0),Ce&&(m=!0)}else Q.nodeType==3&&X(Q.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ee(t),t!=i;)t=t.nextSibling,M=!1;return c}function to(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return en(e.clipPos(he(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var c=e.display.view[n];if(c.node==r)return gu(c,t,i)}}function gu(e,t,i){var r=e.text.firstChild,n=!1;if(!t||!N(r,t))return en(he(Ue(e.line),0),!0);if(t==r&&(n=!0,t=r.childNodes[i],i=0,!t)){var c=e.rest?Me(e.rest):e.line;return en(he(Ue(c),c.text.length),n)}var m=t.nodeType==3?t:null,k=t;for(!m&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(m=t.firstChild,i&&(i=m.nodeValue.length));k.parentNode!=r;)k=k.parentNode;var M=e.measure,P=M.maps;function j(_e,ye,Ce){for(var me=-1;me<(P?P.length:0);me++)for(var ke=me<0?M.map:P[me],Pe=0;Pe<ke.length;Pe+=3){var Re=ke[Pe+2];if(Re==_e||Re==ye){var qe=Ue(me<0?e.line:e.rest[me]),Je=ke[Pe]+Ce;return(Ce<0||Re!=_e)&&(Je=ke[Pe+(Ce?1:0)]),he(qe,Je)}}}var X=j(m,k,i);if(X)return en(X,n);for(var ee=k.nextSibling,Q=m?m.nodeValue.length-i:0;ee;ee=ee.nextSibling){if(X=j(ee,ee.firstChild,0),X)return en(he(X.line,X.ch-Q),n);Q+=ee.textContent.length}for(var ne=k.previousSibling,fe=i;ne;ne=ne.previousSibling){if(X=j(ne,ne.firstChild,-1),X)return en(he(X.line,X.ch+fe),n);fe+=ne.textContent.length}}var at=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new xe,this.hasSelection=!1,this.composing=null};at.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var n=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),d&&(n.style.width="0px"),Oe(n,"input",function(){x&&_>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),Oe(n,"paste",function(m){Qe(r,m)||Aa(m,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function c(m){if(!Qe(r,m)){if(r.somethingSelected())eo({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var k=Oa(r);eo({lineWise:!0,text:k.text}),m.type=="cut"?r.setSelections(k.ranges,null,K):(i.prevInput="",n.value=k.text.join(`
`),Y(n))}else return;m.type=="cut"&&(r.state.cutIncoming=+new Date)}}Oe(n,"cut",c),Oe(n,"copy",c),Oe(e.scroller,"paste",function(m){if(!(Zr(e,m)||Qe(r,m))){if(!n.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var k=new Event("paste");k.clipboardData=m.clipboardData,n.dispatchEvent(k)}}),Oe(e.lineSpace,"selectstart",function(m){Zr(e,m)||ot(m)}),Oe(n,"compositionstart",function(){var m=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:m,range:r.markText(m,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Oe(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},at.prototype.createField=function(e){this.wrapper=Pa(),this.textarea=this.wrapper.firstChild},at.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},at.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=xs(e);if(e.options.moveInputWithCursor){var n=Sr(e,i.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),m=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+m.top-c.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+m.left-c.left))}return r},at.prototype.showSelection=function(e){var t=this.cm,i=t.display;E(i.cursorDiv,e.cursors),E(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},at.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&Y(this.textarea),x&&_>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",x&&_>=9&&(this.hasSelection=null))}},at.prototype.getField=function(){return this.textarea},at.prototype.supportsTouch=function(){return!1},at.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!s||L()!=this.textarea))try{this.textarea.focus()}catch{}},at.prototype.blur=function(){this.textarea.blur()},at.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},at.prototype.receivedFocus=function(){this.slowPoll()},at.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},at.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},at.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||jr(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(x&&_>=9&&this.hasSelection===n||o&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var c=n.charCodeAt(0);if(c==8203&&!r&&(r="\u200B"),c==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,k=Math.min(r.length,n.length);m<k&&r.charCodeAt(m)==n.charCodeAt(m);)++m;return er(t,function(){zo(t,n.slice(m),r.length-m,null,e.composing?"*compose":null),n.length>1e3||n.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},at.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},at.prototype.onKeyPress=function(){x&&_>=9&&(this.hasSelection=null),this.fastPoll()},at.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,n=t.textarea;t.contextMenuPending&&t.contextMenuPending();var c=Ci(i,e),m=r.scroller.scrollTop;if(!c||y)return;var k=i.options.resetSelectionOnContextMenu;k&&i.doc.sel.contains(c)==-1&&yt(i,Pt)(i.doc,ai(c),K);var M=n.style.cssText,P=t.wrapper.style.cssText,j=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",n.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-j.top-5)+"px; left: "+(e.clientX-j.left-5)+`px;
      z-index: 1000; background: `+(x?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var X;b&&(X=window.scrollY),r.input.focus(),b&&window.scrollTo(null,X),r.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=Q,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function ee(){if(n.selectionStart!=null){var fe=i.somethingSelected(),_e="\u200B"+(fe?n.value:"");n.value="\u21DA",n.value=_e,t.prevInput=fe?"":"\u200B",n.selectionStart=1,n.selectionEnd=_e.length,r.selForContextMenu=i.doc.sel}}function Q(){if(t.contextMenuPending==Q&&(t.contextMenuPending=!1,t.wrapper.style.cssText=P,n.style.cssText=M,x&&_<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=m),n.selectionStart!=null)){(!x||x&&_<9)&&ee();var fe=0,_e=function(){r.selForContextMenu==i.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="\u200B"?yt(i,ea)(i):fe++<10?r.detectingSelectAll=setTimeout(_e,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(_e,200)}}if(x&&_>=9&&ee(),A){cr(e);var ne=function(){dt(window,"mouseup",ne),setTimeout(Q,20)};Oe(window,"mouseup",ne)}else setTimeout(Q,50)},at.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},at.prototype.setUneditable=function(){},at.prototype.needsContentAttribute=!1;function yu(e,t){if(t=t?le(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=L();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=k.getValue()}var n;if(e.form&&(Oe(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var c=e.form;n=c.submit;try{var m=c.submit=function(){r(),c.submit=n,c.submit(),c.submit=m}}catch{}}t.finishInit=function(M){M.save=r,M.getTextArea=function(){return e},M.toTextArea=function(){M.toTextArea=isNaN,r(),e.parentNode.removeChild(M.getWrapperElement()),e.style.display="",e.form&&(dt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=n))}},e.style.display="none";var k=et(function(M){return e.parentNode.insertBefore(M,e.nextSibling)},t);return k}function mu(e){e.off=dt,e.on=Oe,e.wheelEventPixels=Lc,e.Doc=Xt,e.splitLines=Lr,e.countColumn=we,e.findColumn=be,e.isWordChar=ze,e.Pass=z,e.signal=Be,e.Line=Qt,e.changeEnd=li,e.scrollbarModel=As,e.Pos=he,e.cmpPos=H,e.modes=Tt,e.mimeModes=wt,e.resolveMode=yr,e.getMode=mr,e.modeExtensions=It,e.extendMode=Ht,e.copyState=xt,e.startState=Mr,e.innerMode=Tr,e.commands=kn,e.keyMap=Qr,e.keyName=_a,e.isModifierKey=pa,e.lookupKey=Zi,e.normalizeKeyMap=$c,e.StringStream=Ze,e.SharedTextMarker=Cn,e.TextMarker=ui,e.LineWidget=Sn,e.e_preventDefault=ot,e.e_stopPropagation=gr,e.e_stop=cr,e.addClass=O,e.contains=N,e.rmClass=D,e.keyNames=fi}uu(et),pu(et);var bu="iter insert remove copy getEditor constructor".split(" ");for(var ro in Xt.prototype)Xt.prototype.hasOwnProperty(ro)&&de(bu,ro)<0&&(et.prototype[ro]=function(e){return function(){return e.apply(this.doc,arguments)}}(Xt.prototype[ro]));return Wt(Xt),et.inputStyles={textarea:at,contenteditable:Ye},et.defineMode=function(e){!et.defaults.mode&&e!="null"&&(et.defaults.mode=e),Ur.apply(this,arguments)},et.defineMIME=Zt,et.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),et.defineMIME("text/plain","null"),et.defineExtension=function(e,t){et.prototype[e]=t},et.defineDocExtension=function(e,t){Xt.prototype[e]=t},et.fromTextArea=yu,mu(et),et.version="5.65.1",et})});var Vo=lr((za,Ua)=>{(function(V){typeof za=="object"&&typeof Ua=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";V.defineMode("javascript",function(q,Z){var ie=q.indentUnit,J=Z.statementIndent,h=Z.jsonld,x=Z.json||h,_=Z.trackScope!==!1,b=Z.typescript,S=Z.wordCharacters||/[\w$\xa1-\uffff]/,v=function(){function H(lt){return{type:lt,style:"keyword"}}var G=H("keyword a"),ce=H("keyword b"),pe=H("keyword c"),Ie=H("keyword d"),je=H("operator"),Se={type:"atom",style:"atom"};return{if:H("if"),while:G,with:G,else:ce,do:ce,try:ce,finally:ce,return:Ie,break:Ie,continue:Ie,new:H("new"),delete:pe,void:pe,throw:pe,debugger:H("debugger"),var:H("var"),const:H("var"),let:H("var"),function:H("function"),catch:H("catch"),for:H("for"),switch:H("switch"),case:H("case"),default:H("default"),in:je,typeof:je,instanceof:je,true:Se,false:Se,null:Se,undefined:Se,NaN:Se,Infinity:Se,this:H("this"),class:H("class"),super:H("atom"),yield:pe,export:H("export"),import:H("import"),extends:pe,await:pe}}(),y=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function u(H){for(var G=!1,ce,pe=!1;(ce=H.next())!=null;){if(!G){if(ce=="/"&&!pe)return;ce=="["?pe=!0:pe&&ce=="]"&&(pe=!1)}G=!G&&ce=="\\"}}var f,d;function a(H,G,ce){return f=H,d=ce,G}function s(H,G){var ce=H.next();if(ce=='"'||ce=="'")return G.tokenize=o(ce),G.tokenize(H,G);if(ce=="."&&H.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return a("number","number");if(ce=="."&&H.match(".."))return a("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ce))return a(ce);if(ce=="="&&H.eat(">"))return a("=>","operator");if(ce=="0"&&H.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return a("number","number");if(/\d/.test(ce))return H.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),a("number","number");if(ce=="/")return H.eat("*")?(G.tokenize=l,l(H,G)):H.eat("/")?(H.skipToEnd(),a("comment","comment")):he(H,G,1)?(u(H),H.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),a("regexp","string-2")):(H.eat("="),a("operator","operator",H.current()));if(ce=="`")return G.tokenize=p,p(H,G);if(ce=="#"&&H.peek()=="!")return H.skipToEnd(),a("meta","meta");if(ce=="#"&&H.eatWhile(S))return a("variable","property");if(ce=="<"&&H.match("!--")||ce=="-"&&H.match("->")&&!/\S/.test(H.string.slice(0,H.start)))return H.skipToEnd(),a("comment","comment");if(y.test(ce))return(ce!=">"||!G.lexical||G.lexical.type!=">")&&(H.eat("=")?(ce=="!"||ce=="=")&&H.eat("="):/[<>*+\-|&?]/.test(ce)&&(H.eat(ce),ce==">"&&H.eat(ce))),ce=="?"&&H.eat(".")?a("."):a("operator","operator",H.current());if(S.test(ce)){H.eatWhile(S);var pe=H.current();if(G.lastType!="."){if(v.propertyIsEnumerable(pe)){var Ie=v[pe];return a(Ie.type,Ie.style,pe)}if(pe=="async"&&H.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return a("async","keyword",pe)}return a("variable","variable",pe)}}function o(H){return function(G,ce){var pe=!1,Ie;if(h&&G.peek()=="@"&&G.match(C))return ce.tokenize=s,a("jsonld-keyword","meta");for(;(Ie=G.next())!=null&&!(Ie==H&&!pe);)pe=!pe&&Ie=="\\";return pe||(ce.tokenize=s),a("string","string")}}function l(H,G){for(var ce=!1,pe;pe=H.next();){if(pe=="/"&&ce){G.tokenize=s;break}ce=pe=="*"}return a("comment","comment")}function p(H,G){for(var ce=!1,pe;(pe=H.next())!=null;){if(!ce&&(pe=="`"||pe=="$"&&H.eat("{"))){G.tokenize=s;break}ce=!ce&&pe=="\\"}return a("quasi","string-2",H.current())}var g="([{}])";function T(H,G){G.fatArrowAt&&(G.fatArrowAt=null);var ce=H.string.indexOf("=>",H.start);if(!(ce<0)){if(b){var pe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(H.string.slice(H.start,ce));pe&&(ce=pe.index)}for(var Ie=0,je=!1,Se=ce-1;Se>=0;--Se){var lt=H.string.charAt(Se),Mt=g.indexOf(lt);if(Mt>=0&&Mt<3){if(!Ie){++Se;break}if(--Ie==0){lt=="("&&(je=!0);break}}else if(Mt>=3&&Mt<6)++Ie;else if(S.test(lt))je=!0;else if(/["'\/`]/.test(lt))for(;;--Se){if(Se==0)return;var Or=H.string.charAt(Se-1);if(Or==lt&&H.string.charAt(Se-2)!="\\"){Se--;break}}else if(je&&!Ie){++Se;break}}je&&!Ie&&(G.fatArrowAt=Se)}}var A={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function B(H,G,ce,pe,Ie,je){this.indented=H,this.column=G,this.type=ce,this.prev=Ie,this.info=je,pe!=null&&(this.align=pe)}function D(H,G){if(!_)return!1;for(var ce=H.localVars;ce;ce=ce.next)if(ce.name==G)return!0;for(var pe=H.context;pe;pe=pe.prev)for(var ce=pe.vars;ce;ce=ce.next)if(ce.name==G)return!0}function R(H,G,ce,pe,Ie){var je=H.cc;for(E.state=H,E.stream=Ie,E.marked=null,E.cc=je,E.style=G,H.lexical.hasOwnProperty("align")||(H.lexical.align=!0);;){var Se=je.length?je.pop():x?$:K;if(Se(ce,pe)){for(;je.length&&je[je.length-1].lex;)je.pop()();return E.marked?E.marked:ce=="variable"&&D(H,pe)?"variable-2":G}}}var E={state:null,column:null,marked:null,cc:null};function I(){for(var H=arguments.length-1;H>=0;H--)E.cc.push(arguments[H])}function w(){return I.apply(null,arguments),!0}function U(H,G){for(var ce=G;ce;ce=ce.next)if(ce.name==H)return!0;return!1}function N(H){var G=E.state;if(E.marked="def",!!_){if(G.context){if(G.lexical.info=="var"&&G.context&&G.context.block){var ce=L(H,G.context);if(ce!=null){G.context=ce;return}}else if(!U(H,G.localVars)){G.localVars=new Y(H,G.localVars);return}}Z.globalVars&&!U(H,G.globalVars)&&(G.globalVars=new Y(H,G.globalVars))}}function L(H,G){if(G)if(G.block){var ce=L(H,G.prev);return ce?ce==G.prev?G:new W(ce,G.vars,!0):null}else return U(H,G.vars)?G:new W(G.prev,new Y(H,G.vars),!1);else return null}function O(H){return H=="public"||H=="private"||H=="protected"||H=="abstract"||H=="readonly"}function W(H,G,ce){this.prev=H,this.vars=G,this.block=ce}function Y(H,G){this.name=H,this.next=G}var ue=new Y("this",new Y("arguments",null));function le(){E.state.context=new W(E.state.context,E.state.localVars,!1),E.state.localVars=ue}function we(){E.state.context=new W(E.state.context,E.state.localVars,!0),E.state.localVars=null}le.lex=we.lex=!0;function xe(){E.state.localVars=E.state.context.vars,E.state.context=E.state.context.prev}xe.lex=!0;function de(H,G){var ce=function(){var pe=E.state,Ie=pe.indented;if(pe.lexical.type=="stat")Ie=pe.lexical.indented;else for(var je=pe.lexical;je&&je.type==")"&&je.align;je=je.prev)Ie=je.indented;pe.lexical=new B(Ie,E.stream.column(),H,null,pe.lexical,G)};return ce.lex=!0,ce}function F(){var H=E.state;H.lexical.prev&&(H.lexical.type==")"&&(H.indented=H.lexical.indented),H.lexical=H.lexical.prev)}F.lex=!0;function z(H){function G(ce){return ce==H?w():H==";"||ce=="}"||ce==")"||ce=="]"?I():w(G)}return G}function K(H,G){return H=="var"?w(de("vardef",G),xr,z(";"),F):H=="keyword a"?w(de("form"),Te,K,F):H=="keyword b"?w(de("form"),K,F):H=="keyword d"?E.stream.match(/^\s*$/,!1)?w():w(de("stat"),Me,z(";"),F):H=="debugger"?w(z(";")):H=="{"?w(de("}"),we,ht,F,xe):H==";"?w():H=="if"?(E.state.lexical.info=="else"&&E.state.cc[E.state.cc.length-1]==F&&E.state.cc.pop()(),w(de("form"),Te,K,F,jr)):H=="function"?w(Tt):H=="for"?w(de("form"),we,zr,K,xe,F):H=="class"||b&&G=="interface"?(E.marked="keyword",w(de("form",H=="class"?H:G),mr,F)):H=="variable"?b&&G=="declare"?(E.marked="keyword",w(K)):b&&(G=="module"||G=="enum"||G=="type")&&E.stream.match(/^\s*\w/,!1)?(E.marked="keyword",G=="enum"?w(zt):G=="type"?w(Ur,z("operator"),Be,z(";")):w(de("form"),pt,z("{"),de("}"),ht,F,F)):b&&G=="namespace"?(E.marked="keyword",w(de("form"),$,K,F)):b&&G=="abstract"?(E.marked="keyword",w(K)):w(de("stat"),We):H=="switch"?w(de("form"),Te,z("{"),de("}","switch"),we,ht,F,F,xe):H=="case"?w($,z(":")):H=="default"?w(z(":")):H=="catch"?w(de("form"),le,re,K,F,xe):H=="export"?w(de("stat"),Tr,F):H=="import"?w(de("stat"),Ze,F):H=="async"?w(K):G=="@"?w($,K):I(de("stat"),$,z(";"),F)}function re(H){if(H=="(")return w(Zt,z(")"))}function $(H,G){return Ke(H,G,!1)}function be(H,G){return Ke(H,G,!0)}function Te(H){return H!="("?I():w(de(")"),Me,z(")"),F)}function Ke(H,G,ce){if(E.state.fatArrowAt==E.stream.start){var pe=ce?ze:Ge;if(H=="(")return w(le,de(")"),Fe(Zt,")"),F,z("=>"),pe,xe);if(H=="variable")return I(le,pt,z("=>"),pe,xe)}var Ie=ce?ge:He;return A.hasOwnProperty(H)?w(Ie):H=="function"?w(Tt,Ie):H=="class"||b&&G=="interface"?(E.marked="keyword",w(de("form"),yr,F)):H=="keyword c"||H=="async"?w(ce?be:$):H=="("?w(de(")"),Me,z(")"),F,Ie):H=="operator"||H=="spread"?w(ce?be:$):H=="["?w(de("]"),Ue,F,Ie):H=="{"?Et(De,"}",null,Ie):H=="quasi"?I(Xe,Ie):H=="new"?w(te(ce)):w()}function Me(H){return H.match(/[;\}\)\],]/)?I():I($)}function He(H,G){return H==","?w(Me):ge(H,G,!1)}function ge(H,G,ce){var pe=ce==!1?He:ge,Ie=ce==!1?$:be;if(H=="=>")return w(le,ce?ze:Ge,xe);if(H=="operator")return/\+\+|--/.test(G)||b&&G=="!"?w(pe):b&&G=="<"&&E.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?w(de(">"),Fe(Be,">"),F,pe):G=="?"?w($,z(":"),Ie):w(Ie);if(H=="quasi")return I(Xe,pe);if(H!=";"){if(H=="(")return Et(be,")","call",pe);if(H==".")return w(Ee,pe);if(H=="[")return w(de("]"),Me,z("]"),F,pe);if(b&&G=="as")return E.marked="keyword",w(Be,pe);if(H=="regexp")return E.state.lastType=E.marked="operator",E.stream.backUp(E.stream.pos-E.stream.start-1),w(Ie)}}function Xe(H,G){return H!="quasi"?I():G.slice(G.length-2)!="${"?w(Xe):w(Me,Ve)}function Ve(H){if(H=="}")return E.marked="string-2",E.state.tokenize=p,w(Xe)}function Ge(H){return T(E.stream,E.state),I(H=="{"?K:$)}function ze(H){return T(E.stream,E.state),I(H=="{"?K:be)}function te(H){return function(G){return G=="."?w(H?oe:ve):G=="variable"&&b?w(cr,H?ge:He):I(H?be:$)}}function ve(H,G){if(G=="target")return E.marked="keyword",w(He)}function oe(H,G){if(G=="target")return E.marked="keyword",w(ge)}function We(H){return H==":"?w(F,K):I(He,z(";"),F)}function Ee(H){if(H=="variable")return E.marked="property",w()}function De(H,G){if(H=="async")return E.marked="property",w(De);if(H=="variable"||E.style=="keyword"){if(E.marked="property",G=="get"||G=="set")return w(Ae);var ce;return b&&E.state.fatArrowAt==E.stream.start&&(ce=E.stream.match(/^\s*:\s*/,!1))&&(E.state.fatArrowAt=E.stream.pos+ce[0].length),w(Ne)}else{if(H=="number"||H=="string")return E.marked=h?"property":E.style+" property",w(Ne);if(H=="jsonld-keyword")return w(Ne);if(b&&O(G))return E.marked="keyword",w(De);if(H=="[")return w($,rr,z("]"),Ne);if(H=="spread")return w(be,Ne);if(G=="*")return E.marked="keyword",w(De);if(H==":")return I(Ne)}}function Ae(H){return H!="variable"?I(Ne):(E.marked="property",w(Tt))}function Ne(H){if(H==":")return w(be);if(H=="(")return I(Tt)}function Fe(H,G,ce){function pe(Ie,je){if(ce?ce.indexOf(Ie)>-1:Ie==","){var Se=E.state.lexical;return Se.info=="call"&&(Se.pos=(Se.pos||0)+1),w(function(lt,Mt){return lt==G||Mt==G?I():I(H)},pe)}return Ie==G||je==G?w():ce&&ce.indexOf(";")>-1?I(H):w(z(G))}return function(Ie,je){return Ie==G||je==G?w():I(H,pe)}}function Et(H,G,ce){for(var pe=3;pe<arguments.length;pe++)E.cc.push(arguments[pe]);return w(de(G,ce),Fe(H,G),F)}function ht(H){return H=="}"?w():I(K,ht)}function rr(H,G){if(b){if(H==":")return w(Be);if(G=="?")return w(rr)}}function Oe(H,G){if(b&&(H==":"||G=="in"))return w(Be)}function vr(H){if(b&&H==":")return E.stream.match(/^\s*\w+\s+is\b/,!1)?w($,dt,Be):w(Be)}function dt(H,G){if(G=="is")return E.marked="keyword",w()}function Be(H,G){if(G=="keyof"||G=="typeof"||G=="infer"||G=="readonly")return E.marked="keyword",w(G=="typeof"?be:Be);if(H=="variable"||G=="void")return E.marked="type",w(Ct);if(G=="|"||G=="&")return w(Be);if(H=="string"||H=="number"||H=="atom")return w(Ct);if(H=="[")return w(de("]"),Fe(Be,"]",","),F,Ct);if(H=="{")return w(de("}"),_r,F,Ct);if(H=="(")return w(Fe(gr,")"),Qe,Ct);if(H=="<")return w(Fe(Be,">"),Be);if(H=="quasi")return I(Wt,Ct)}function Qe(H){if(H=="=>")return w(Be)}function _r(H){return H.match(/[\}\)\]]/)?w():H==","||H==";"?w(_r):I(rt,_r)}function rt(H,G){if(H=="variable"||E.style=="keyword")return E.marked="property",w(rt);if(G=="?"||H=="number"||H=="string")return w(rt);if(H==":")return w(Be);if(H=="[")return w(z("variable"),Oe,z("]"),rt);if(H=="(")return I(wt,rt);if(!H.match(/[;\}\)\],]/))return w()}function Wt(H,G){return H!="quasi"?I():G.slice(G.length-2)!="${"?w(Wt):w(Be,ot)}function ot(H){if(H=="}")return E.marked="string-2",E.state.tokenize=p,w(Wt)}function gr(H,G){return H=="variable"&&E.stream.match(/^\s*[?:]/,!1)||G=="?"?w(gr):H==":"?w(Be):H=="spread"?w(gr):I(Be)}function Ct(H,G){if(G=="<")return w(de(">"),Fe(Be,">"),F,Ct);if(G=="|"||H=="."||G=="&")return w(Be);if(H=="[")return w(Be,z("]"),Ct);if(G=="extends"||G=="implements")return E.marked="keyword",w(Be);if(G=="?")return w(Be,z(":"),Be)}function cr(H,G){if(G=="<")return w(de(">"),Fe(Be,">"),F,Ct)}function ir(){return I(Be,Wr)}function Wr(H,G){if(G=="=")return w(Be)}function xr(H,G){return G=="enum"?(E.marked="keyword",w(zt)):I(pt,rr,qt,Lr)}function pt(H,G){if(b&&O(G))return E.marked="keyword",w(pt);if(H=="variable")return N(G),w();if(H=="spread")return w(pt);if(H=="[")return Et(kr,"]");if(H=="{")return Et(qr,"}")}function qr(H,G){return H=="variable"&&!E.stream.match(/^\s*:/,!1)?(N(G),w(qt)):(H=="variable"&&(E.marked="property"),H=="spread"?w(pt):H=="}"?I():H=="["?w($,z("]"),z(":"),qr):w(z(":"),pt,qt))}function kr(){return I(pt,qt)}function qt(H,G){if(G=="=")return w(be)}function Lr(H){if(H==",")return w(xr)}function jr(H,G){if(H=="keyword b"&&G=="else")return w(de("form","else"),K,F)}function zr(H,G){if(G=="await")return w(zr);if(H=="(")return w(de(")"),Er,F)}function Er(H){return H=="var"?w(xr,nr):H=="variable"?w(nr):I(nr)}function nr(H,G){return H==")"?w():H==";"?w(nr):G=="in"||G=="of"?(E.marked="keyword",w($,nr)):I($,nr)}function Tt(H,G){if(G=="*")return E.marked="keyword",w(Tt);if(H=="variable")return N(G),w(Tt);if(H=="(")return w(le,de(")"),Fe(Zt,")"),F,vr,K,xe);if(b&&G=="<")return w(de(">"),Fe(ir,">"),F,Tt)}function wt(H,G){if(G=="*")return E.marked="keyword",w(wt);if(H=="variable")return N(G),w(wt);if(H=="(")return w(le,de(")"),Fe(Zt,")"),F,vr,xe);if(b&&G=="<")return w(de(">"),Fe(ir,">"),F,wt)}function Ur(H,G){if(H=="keyword"||H=="variable")return E.marked="type",w(Ur);if(G=="<")return w(de(">"),Fe(ir,">"),F)}function Zt(H,G){return G=="@"&&w($,Zt),H=="spread"?w(Zt):b&&O(G)?(E.marked="keyword",w(Zt)):b&&H=="this"?w(rr,qt):I(pt,rr,qt)}function yr(H,G){return H=="variable"?mr(H,G):It(H,G)}function mr(H,G){if(H=="variable")return N(G),w(It)}function It(H,G){if(G=="<")return w(de(">"),Fe(ir,">"),F,It);if(G=="extends"||G=="implements"||b&&H==",")return G=="implements"&&(E.marked="keyword"),w(b?Be:$,It);if(H=="{")return w(de("}"),Ht,F)}function Ht(H,G){if(H=="async"||H=="variable"&&(G=="static"||G=="get"||G=="set"||b&&O(G))&&E.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return E.marked="keyword",w(Ht);if(H=="variable"||E.style=="keyword")return E.marked="property",w(xt,Ht);if(H=="number"||H=="string")return w(xt,Ht);if(H=="[")return w($,rr,z("]"),xt,Ht);if(G=="*")return E.marked="keyword",w(Ht);if(b&&H=="(")return I(wt,Ht);if(H==";"||H==",")return w(Ht);if(H=="}")return w();if(G=="@")return w($,Ht)}function xt(H,G){if(G=="!"||G=="?")return w(xt);if(H==":")return w(Be,qt);if(G=="=")return w(be);var ce=E.state.lexical.prev,pe=ce&&ce.info=="interface";return I(pe?wt:Tt)}function Tr(H,G){return G=="*"?(E.marked="keyword",w(_t,z(";"))):G=="default"?(E.marked="keyword",w($,z(";"))):H=="{"?w(Fe(Mr,"}"),_t,z(";")):I(K)}function Mr(H,G){if(G=="as")return E.marked="keyword",w(z("variable"));if(H=="variable")return I(be,Mr)}function Ze(H){return H=="string"?w():H=="("?I($):H=="."?I(He):I(Le,jt,_t)}function Le(H,G){return H=="{"?Et(Le,"}"):(H=="variable"&&N(G),G=="*"&&(E.marked="keyword"),w(Ar))}function jt(H){if(H==",")return w(Le,jt)}function Ar(H,G){if(G=="as")return E.marked="keyword",w(Le)}function _t(H,G){if(G=="from")return E.marked="keyword",w($)}function Ue(H){return H=="]"?w():I(Fe(be,"]"))}function zt(){return I(de("form"),pt,z("{"),de("}"),Fe(ur,"}"),F,F)}function ur(){return I(pt,qt)}function Rr(H,G){return H.lastType=="operator"||H.lastType==","||y.test(G.charAt(0))||/[,.]/.test(G.charAt(0))}function he(H,G,ce){return G.tokenize==s&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(G.lastType)||G.lastType=="quasi"&&/\{\s*$/.test(H.string.slice(0,H.pos-(ce||0)))}return{startState:function(H){var G={tokenize:s,lastType:"sof",cc:[],lexical:new B((H||0)-ie,0,"block",!1),localVars:Z.localVars,context:Z.localVars&&new W(null,null,!1),indented:H||0};return Z.globalVars&&typeof Z.globalVars=="object"&&(G.globalVars=Z.globalVars),G},token:function(H,G){if(H.sol()&&(G.lexical.hasOwnProperty("align")||(G.lexical.align=!1),G.indented=H.indentation(),T(H,G)),G.tokenize!=l&&H.eatSpace())return null;var ce=G.tokenize(H,G);return f=="comment"?ce:(G.lastType=f=="operator"&&(d=="++"||d=="--")?"incdec":f,R(G,ce,f,d,H))},indent:function(H,G){if(H.tokenize==l||H.tokenize==p)return V.Pass;if(H.tokenize!=s)return 0;var ce=G&&G.charAt(0),pe=H.lexical,Ie;if(!/^\s*else\b/.test(G))for(var je=H.cc.length-1;je>=0;--je){var Se=H.cc[je];if(Se==F)pe=pe.prev;else if(Se!=jr&&Se!=xe)break}for(;(pe.type=="stat"||pe.type=="form")&&(ce=="}"||(Ie=H.cc[H.cc.length-1])&&(Ie==He||Ie==ge)&&!/^[,\.=+\-*:?[\(]/.test(G));)pe=pe.prev;J&&pe.type==")"&&pe.prev.type=="stat"&&(pe=pe.prev);var lt=pe.type,Mt=ce==lt;return lt=="vardef"?pe.indented+(H.lastType=="operator"||H.lastType==","?pe.info.length+1:0):lt=="form"&&ce=="{"?pe.indented:lt=="form"?pe.indented+ie:lt=="stat"?pe.indented+(Rr(H,G)?J||ie:0):pe.info=="switch"&&!Mt&&Z.doubleIndentSwitch!=!1?pe.indented+(/^(?:case|default)\b/.test(G)?ie:2*ie):pe.align?pe.column+(Mt?0:1):pe.indented+(Mt?0:ie)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:x?null:"/*",blockCommentEnd:x?null:"*/",blockCommentContinue:x?null:" * ",lineComment:x?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:x?"json":"javascript",jsonldMode:h,jsonMode:x,expressionAllowed:he,skipExpression:function(H){R(H,"atom","atom","true",new V.StringStream("",2,null))}}}),V.registerHelper("wordChars","javascript",/[\w$]/),V.defineMIME("text/javascript","javascript"),V.defineMIME("text/ecmascript","javascript"),V.defineMIME("application/javascript","javascript"),V.defineMIME("application/x-javascript","javascript"),V.defineMIME("application/ecmascript","javascript"),V.defineMIME("application/json",{name:"javascript",json:!0}),V.defineMIME("application/x-json",{name:"javascript",json:!0}),V.defineMIME("application/manifest+json",{name:"javascript",json:!0}),V.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),V.defineMIME("text/typescript",{name:"javascript",typescript:!0}),V.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var Ya=lr((Xa,$a)=>{(function(V){typeof Xa=="object"&&typeof $a=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";var q={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},Z={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};V.defineMode("xml",function(ie,J){var h=ie.indentUnit,x={},_=J.htmlMode?q:Z;for(var b in _)x[b]=_[b];for(var b in J)x[b]=J[b];var S,v;function y(w,U){function N(W){return U.tokenize=W,W(w,U)}var L=w.next();if(L=="<")return w.eat("!")?w.eat("[")?w.match("CDATA[")?N(f("atom","]]>")):null:w.match("--")?N(f("comment","-->")):w.match("DOCTYPE",!0,!0)?(w.eatWhile(/[\w\._\-]/),N(d(1))):null:w.eat("?")?(w.eatWhile(/[\w\._\-]/),U.tokenize=f("meta","?>"),"meta"):(S=w.eat("/")?"closeTag":"openTag",U.tokenize=C,"tag bracket");if(L=="&"){var O;return w.eat("#")?w.eat("x")?O=w.eatWhile(/[a-fA-F\d]/)&&w.eat(";"):O=w.eatWhile(/[\d]/)&&w.eat(";"):O=w.eatWhile(/[\w\.\-:]/)&&w.eat(";"),O?"atom":"error"}else return w.eatWhile(/[^&<]/),null}y.isInText=!0;function C(w,U){var N=w.next();if(N==">"||N=="/"&&w.eat(">"))return U.tokenize=y,S=N==">"?"endTag":"selfcloseTag","tag bracket";if(N=="=")return S="equals",null;if(N=="<"){U.tokenize=y,U.state=p,U.tagName=U.tagStart=null;var L=U.tokenize(w,U);return L?L+" tag error":"tag error"}else return/[\'\"]/.test(N)?(U.tokenize=u(N),U.stringStartCol=w.column(),U.tokenize(w,U)):(w.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function u(w){var U=function(N,L){for(;!N.eol();)if(N.next()==w){L.tokenize=C;break}return"string"};return U.isInAttribute=!0,U}function f(w,U){return function(N,L){for(;!N.eol();){if(N.match(U)){L.tokenize=y;break}N.next()}return w}}function d(w){return function(U,N){for(var L;(L=U.next())!=null;){if(L=="<")return N.tokenize=d(w+1),N.tokenize(U,N);if(L==">")if(w==1){N.tokenize=y;break}else return N.tokenize=d(w-1),N.tokenize(U,N)}return"meta"}}function a(w){return w&&w.toLowerCase()}function s(w,U,N){this.prev=w.context,this.tagName=U||"",this.indent=w.indented,this.startOfLine=N,(x.doNotIndent.hasOwnProperty(U)||w.context&&w.context.noIndent)&&(this.noIndent=!0)}function o(w){w.context&&(w.context=w.context.prev)}function l(w,U){for(var N;;){if(!w.context||(N=w.context.tagName,!x.contextGrabbers.hasOwnProperty(a(N))||!x.contextGrabbers[a(N)].hasOwnProperty(a(U))))return;o(w)}}function p(w,U,N){return w=="openTag"?(N.tagStart=U.column(),g):w=="closeTag"?T:p}function g(w,U,N){return w=="word"?(N.tagName=U.current(),v="tag",D):x.allowMissingTagName&&w=="endTag"?(v="tag bracket",D(w,U,N)):(v="error",g)}function T(w,U,N){if(w=="word"){var L=U.current();return N.context&&N.context.tagName!=L&&x.implicitlyClosed.hasOwnProperty(a(N.context.tagName))&&o(N),N.context&&N.context.tagName==L||x.matchClosing===!1?(v="tag",A):(v="tag error",B)}else return x.allowMissingTagName&&w=="endTag"?(v="tag bracket",A(w,U,N)):(v="error",B)}function A(w,U,N){return w!="endTag"?(v="error",A):(o(N),p)}function B(w,U,N){return v="error",A(w,U,N)}function D(w,U,N){if(w=="word")return v="attribute",R;if(w=="endTag"||w=="selfcloseTag"){var L=N.tagName,O=N.tagStart;return N.tagName=N.tagStart=null,w=="selfcloseTag"||x.autoSelfClosers.hasOwnProperty(a(L))?l(N,L):(l(N,L),N.context=new s(N,L,O==N.indented)),p}return v="error",D}function R(w,U,N){return w=="equals"?E:(x.allowMissing||(v="error"),D(w,U,N))}function E(w,U,N){return w=="string"?I:w=="word"&&x.allowUnquoted?(v="string",D):(v="error",D(w,U,N))}function I(w,U,N){return w=="string"?I:D(w,U,N)}return{startState:function(w){var U={tokenize:y,state:p,indented:w||0,tagName:null,tagStart:null,context:null};return w!=null&&(U.baseIndent=w),U},token:function(w,U){if(!U.tagName&&w.sol()&&(U.indented=w.indentation()),w.eatSpace())return null;S=null;var N=U.tokenize(w,U);return(N||S)&&N!="comment"&&(v=null,U.state=U.state(S||N,w,U),v&&(N=v=="error"?N+" error":v)),N},indent:function(w,U,N){var L=w.context;if(w.tokenize.isInAttribute)return w.tagStart==w.indented?w.stringStartCol+1:w.indented+h;if(L&&L.noIndent)return V.Pass;if(w.tokenize!=C&&w.tokenize!=y)return N?N.match(/^(\s*)/)[0].length:0;if(w.tagName)return x.multilineTagIndentPastTag!==!1?w.tagStart+w.tagName.length+2:w.tagStart+h*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(U))return 0;var O=U&&/^<(\/)?([\w_:\.-]*)/.exec(U);if(O&&O[1])for(;L;)if(L.tagName==O[2]){L=L.prev;break}else if(x.implicitlyClosed.hasOwnProperty(a(L.tagName)))L=L.prev;else break;else if(O)for(;L;){var W=x.contextGrabbers[a(L.tagName)];if(W&&W.hasOwnProperty(a(O[2])))L=L.prev;else break}for(;L&&L.prev&&!L.startOfLine;)L=L.prev;return L?L.indent+h:w.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(w){w.state==E&&(w.state=D)},xmlCurrentTag:function(w){return w.tagName?{name:w.tagName,close:w.type=="closeTag"}:null},xmlCurrentContext:function(w){for(var U=[],N=w.context;N;N=N.prev)U.push(N.tagName);return U.reverse()}}}),V.defineMIME("text/xml","xml"),V.defineMIME("application/xml","xml"),V.mimeModes.hasOwnProperty("text/html")||V.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var Ja=lr((Va,Za)=>{(function(V){typeof Va=="object"&&typeof Za=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";V.defineMode("css",function(B,D){var R=D.inline;D.propertyKeywords||(D=V.resolveMode("text/css"));var E=B.indentUnit,I=D.tokenHooks,w=D.documentTypes||{},U=D.mediaTypes||{},N=D.mediaFeatures||{},L=D.mediaValueKeywords||{},O=D.propertyKeywords||{},W=D.nonStandardPropertyKeywords||{},Y=D.fontProperties||{},ue=D.counterDescriptors||{},le=D.colorKeywords||{},we=D.valueKeywords||{},xe=D.allowNested,de=D.lineComment,F=D.supportsAtComponent===!0,z=B.highlightNonStandardPropertyKeywords!==!1,K,re;function $(te,ve){return K=ve,te}function be(te,ve){var oe=te.next();if(I[oe]){var We=I[oe](te,ve);if(We!==!1)return We}if(oe=="@")return te.eatWhile(/[\w\\\-]/),$("def",te.current());if(oe=="="||(oe=="~"||oe=="|")&&te.eat("="))return $(null,"compare");if(oe=='"'||oe=="'")return ve.tokenize=Te(oe),ve.tokenize(te,ve);if(oe=="#")return te.eatWhile(/[\w\\\-]/),$("atom","hash");if(oe=="!")return te.match(/^\s*\w*/),$("keyword","important");if(/\d/.test(oe)||oe=="."&&te.eat(/\d/))return te.eatWhile(/[\w.%]/),$("number","unit");if(oe==="-"){if(/[\d.]/.test(te.peek()))return te.eatWhile(/[\w.%]/),$("number","unit");if(te.match(/^-[\w\\\-]*/))return te.eatWhile(/[\w\\\-]/),te.match(/^\s*:/,!1)?$("variable-2","variable-definition"):$("variable-2","variable");if(te.match(/^\w+-/))return $("meta","meta")}else return/[,+>*\/]/.test(oe)?$(null,"select-op"):oe=="."&&te.match(/^-?[_a-z][_a-z0-9-]*/i)?$("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(oe)?$(null,oe):te.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(te.current())&&(ve.tokenize=Ke),$("variable callee","variable")):/[\w\\\-]/.test(oe)?(te.eatWhile(/[\w\\\-]/),$("property","word")):$(null,null)}function Te(te){return function(ve,oe){for(var We=!1,Ee;(Ee=ve.next())!=null;){if(Ee==te&&!We){te==")"&&ve.backUp(1);break}We=!We&&Ee=="\\"}return(Ee==te||!We&&te!=")")&&(oe.tokenize=null),$("string","string")}}function Ke(te,ve){return te.next(),te.match(/^\s*[\"\')]/,!1)?ve.tokenize=null:ve.tokenize=Te(")"),$(null,"(")}function Me(te,ve,oe){this.type=te,this.indent=ve,this.prev=oe}function He(te,ve,oe,We){return te.context=new Me(oe,ve.indentation()+(We===!1?0:E),te.context),oe}function ge(te){return te.context.prev&&(te.context=te.context.prev),te.context.type}function Xe(te,ve,oe){return ze[oe.context.type](te,ve,oe)}function Ve(te,ve,oe,We){for(var Ee=We||1;Ee>0;Ee--)oe.context=oe.context.prev;return Xe(te,ve,oe)}function Ge(te){var ve=te.current().toLowerCase();we.hasOwnProperty(ve)?re="atom":le.hasOwnProperty(ve)?re="keyword":re="variable"}var ze={};return ze.top=function(te,ve,oe){if(te=="{")return He(oe,ve,"block");if(te=="}"&&oe.context.prev)return ge(oe);if(F&&/@component/i.test(te))return He(oe,ve,"atComponentBlock");if(/^@(-moz-)?document$/i.test(te))return He(oe,ve,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(te))return He(oe,ve,"atBlock");if(/^@(font-face|counter-style)/i.test(te))return oe.stateArg=te,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(te))return"keyframes";if(te&&te.charAt(0)=="@")return He(oe,ve,"at");if(te=="hash")re="builtin";else if(te=="word")re="tag";else{if(te=="variable-definition")return"maybeprop";if(te=="interpolation")return He(oe,ve,"interpolation");if(te==":")return"pseudo";if(xe&&te=="(")return He(oe,ve,"parens")}return oe.context.type},ze.block=function(te,ve,oe){if(te=="word"){var We=ve.current().toLowerCase();return O.hasOwnProperty(We)?(re="property","maybeprop"):W.hasOwnProperty(We)?(re=z?"string-2":"property","maybeprop"):xe?(re=ve.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(re+=" error","maybeprop")}else return te=="meta"?"block":!xe&&(te=="hash"||te=="qualifier")?(re="error","block"):ze.top(te,ve,oe)},ze.maybeprop=function(te,ve,oe){return te==":"?He(oe,ve,"prop"):Xe(te,ve,oe)},ze.prop=function(te,ve,oe){if(te==";")return ge(oe);if(te=="{"&&xe)return He(oe,ve,"propBlock");if(te=="}"||te=="{")return Ve(te,ve,oe);if(te=="(")return He(oe,ve,"parens");if(te=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(ve.current()))re+=" error";else if(te=="word")Ge(ve);else if(te=="interpolation")return He(oe,ve,"interpolation");return"prop"},ze.propBlock=function(te,ve,oe){return te=="}"?ge(oe):te=="word"?(re="property","maybeprop"):oe.context.type},ze.parens=function(te,ve,oe){return te=="{"||te=="}"?Ve(te,ve,oe):te==")"?ge(oe):te=="("?He(oe,ve,"parens"):te=="interpolation"?He(oe,ve,"interpolation"):(te=="word"&&Ge(ve),"parens")},ze.pseudo=function(te,ve,oe){return te=="meta"?"pseudo":te=="word"?(re="variable-3",oe.context.type):Xe(te,ve,oe)},ze.documentTypes=function(te,ve,oe){return te=="word"&&w.hasOwnProperty(ve.current())?(re="tag",oe.context.type):ze.atBlock(te,ve,oe)},ze.atBlock=function(te,ve,oe){if(te=="(")return He(oe,ve,"atBlock_parens");if(te=="}"||te==";")return Ve(te,ve,oe);if(te=="{")return ge(oe)&&He(oe,ve,xe?"block":"top");if(te=="interpolation")return He(oe,ve,"interpolation");if(te=="word"){var We=ve.current().toLowerCase();We=="only"||We=="not"||We=="and"||We=="or"?re="keyword":U.hasOwnProperty(We)?re="attribute":N.hasOwnProperty(We)?re="property":L.hasOwnProperty(We)?re="keyword":O.hasOwnProperty(We)?re="property":W.hasOwnProperty(We)?re=z?"string-2":"property":we.hasOwnProperty(We)?re="atom":le.hasOwnProperty(We)?re="keyword":re="error"}return oe.context.type},ze.atComponentBlock=function(te,ve,oe){return te=="}"?Ve(te,ve,oe):te=="{"?ge(oe)&&He(oe,ve,xe?"block":"top",!1):(te=="word"&&(re="error"),oe.context.type)},ze.atBlock_parens=function(te,ve,oe){return te==")"?ge(oe):te=="{"||te=="}"?Ve(te,ve,oe,2):ze.atBlock(te,ve,oe)},ze.restricted_atBlock_before=function(te,ve,oe){return te=="{"?He(oe,ve,"restricted_atBlock"):te=="word"&&oe.stateArg=="@counter-style"?(re="variable","restricted_atBlock_before"):Xe(te,ve,oe)},ze.restricted_atBlock=function(te,ve,oe){return te=="}"?(oe.stateArg=null,ge(oe)):te=="word"?(oe.stateArg=="@font-face"&&!Y.hasOwnProperty(ve.current().toLowerCase())||oe.stateArg=="@counter-style"&&!ue.hasOwnProperty(ve.current().toLowerCase())?re="error":re="property","maybeprop"):"restricted_atBlock"},ze.keyframes=function(te,ve,oe){return te=="word"?(re="variable","keyframes"):te=="{"?He(oe,ve,"top"):Xe(te,ve,oe)},ze.at=function(te,ve,oe){return te==";"?ge(oe):te=="{"||te=="}"?Ve(te,ve,oe):(te=="word"?re="tag":te=="hash"&&(re="builtin"),"at")},ze.interpolation=function(te,ve,oe){return te=="}"?ge(oe):te=="{"||te==";"?Ve(te,ve,oe):(te=="word"?re="variable":te!="variable"&&te!="("&&te!=")"&&(re="error"),"interpolation")},{startState:function(te){return{tokenize:null,state:R?"block":"top",stateArg:null,context:new Me(R?"block":"top",te||0,null)}},token:function(te,ve){if(!ve.tokenize&&te.eatSpace())return null;var oe=(ve.tokenize||be)(te,ve);return oe&&typeof oe=="object"&&(K=oe[1],oe=oe[0]),re=oe,K!="comment"&&(ve.state=ze[ve.state](K,te,ve)),re},indent:function(te,ve){var oe=te.context,We=ve&&ve.charAt(0),Ee=oe.indent;return oe.type=="prop"&&(We=="}"||We==")")&&(oe=oe.prev),oe.prev&&(We=="}"&&(oe.type=="block"||oe.type=="top"||oe.type=="interpolation"||oe.type=="restricted_atBlock")?(oe=oe.prev,Ee=oe.indent):(We==")"&&(oe.type=="parens"||oe.type=="atBlock_parens")||We=="{"&&(oe.type=="at"||oe.type=="atBlock"))&&(Ee=Math.max(0,oe.indent-E))),Ee},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:de,fold:"brace"}});function q(B){for(var D={},R=0;R<B.length;++R)D[B[R].toLowerCase()]=!0;return D}var Z=["domain","regexp","url","url-prefix"],ie=q(Z),J=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],h=q(J),x=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],_=q(x),b=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],S=q(b),v=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],y=q(v),C=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],u=q(C),f=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],d=q(f),a=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],s=q(a),o=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=q(o),p=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],g=q(p),T=Z.concat(J).concat(x).concat(b).concat(v).concat(C).concat(o).concat(p);V.registerHelper("hintWords","css",T);function A(B,D){for(var R=!1,E;(E=B.next())!=null;){if(R&&E=="/"){D.tokenize=null;break}R=E=="*"}return["comment","comment"]}V.defineMIME("text/css",{documentTypes:ie,mediaTypes:h,mediaFeatures:_,mediaValueKeywords:S,propertyKeywords:y,nonStandardPropertyKeywords:u,fontProperties:d,counterDescriptors:s,colorKeywords:l,valueKeywords:g,tokenHooks:{"/":function(B,D){return B.eat("*")?(D.tokenize=A,A(B,D)):!1}},name:"css"}),V.defineMIME("text/x-scss",{mediaTypes:h,mediaFeatures:_,mediaValueKeywords:S,propertyKeywords:y,nonStandardPropertyKeywords:u,colorKeywords:l,valueKeywords:g,fontProperties:d,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(B,D){return B.eat("/")?(B.skipToEnd(),["comment","comment"]):B.eat("*")?(D.tokenize=A,A(B,D)):["operator","operator"]},":":function(B){return B.match(/^\s*\{/,!1)?[null,null]:!1},$:function(B){return B.match(/^[\w-]+/),B.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(B){return B.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),V.defineMIME("text/x-less",{mediaTypes:h,mediaFeatures:_,mediaValueKeywords:S,propertyKeywords:y,nonStandardPropertyKeywords:u,colorKeywords:l,valueKeywords:g,fontProperties:d,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(B,D){return B.eat("/")?(B.skipToEnd(),["comment","comment"]):B.eat("*")?(D.tokenize=A,A(B,D)):["operator","operator"]},"@":function(B){return B.eat("{")?[null,"interpolation"]:B.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(B.eatWhile(/[\w\\\-]/),B.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),V.defineMIME("text/x-gss",{documentTypes:ie,mediaTypes:h,mediaFeatures:_,propertyKeywords:y,nonStandardPropertyKeywords:u,fontProperties:d,counterDescriptors:s,colorKeywords:l,valueKeywords:g,supportsAtComponent:!0,tokenHooks:{"/":function(B,D){return B.eat("*")?(D.tokenize=A,A(B,D)):!1}},name:"css",helperType:"gss"})})});var tl=lr((Qa,el)=>{(function(V){typeof Qa=="object"&&typeof el=="object"?V(pr(),Ya(),Vo(),Ja()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],V):V(CodeMirror)})(function(V){"use strict";var q={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function Z(S,v,y){var C=S.current(),u=C.search(v);return u>-1?S.backUp(C.length-u):C.match(/<\/?$/)&&(S.backUp(C.length),S.match(v,!1)||S.match(C)),y}var ie={};function J(S){var v=ie[S];return v||(ie[S]=new RegExp("\\s+"+S+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function h(S,v){var y=S.match(J(v));return y?/^\s*(.*?)\s*$/.exec(y[2])[1]:""}function x(S,v){return new RegExp((v?"^":"")+"</s*"+S+"s*>","i")}function _(S,v){for(var y in S)for(var C=v[y]||(v[y]=[]),u=S[y],f=u.length-1;f>=0;f--)C.unshift(u[f])}function b(S,v){for(var y=0;y<S.length;y++){var C=S[y];if(!C[0]||C[1].test(h(v,C[0])))return C[2]}}V.defineMode("htmlmixed",function(S,v){var y=V.getMode(S,{name:"xml",htmlMode:!0,multilineTagIndentFactor:v.multilineTagIndentFactor,multilineTagIndentPastTag:v.multilineTagIndentPastTag,allowMissingTagName:v.allowMissingTagName}),C={},u=v&&v.tags,f=v&&v.scriptTypes;if(_(q,C),u&&_(u,C),f)for(var d=f.length-1;d>=0;d--)C.script.unshift(["type",f[d].matches,f[d].mode]);function a(s,o){var l=y.token(s,o.htmlState),p=/\btag\b/.test(l),g;if(p&&!/[<>\s\/]/.test(s.current())&&(g=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&C.hasOwnProperty(g))o.inTag=g+" ";else if(o.inTag&&p&&/>$/.test(s.current())){var T=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var A=s.current()==">"&&b(C[T[1]],T[2]),B=V.getMode(S,A),D=x(T[1],!0),R=x(T[1],!1);o.token=function(E,I){return E.match(D,!1)?(I.token=a,I.localState=I.localMode=null,null):Z(E,R,I.localMode.token(E,I.localState))},o.localMode=B,o.localState=V.startState(B,y.indent(o.htmlState,"",""))}else o.inTag&&(o.inTag+=s.current(),s.eol()&&(o.inTag+=" "));return l}return{startState:function(){var s=V.startState(y);return{token:a,inTag:null,localMode:null,localState:null,htmlState:s}},copyState:function(s){var o;return s.localState&&(o=V.copyState(s.localMode,s.localState)),{token:s.token,inTag:s.inTag,localMode:s.localMode,localState:o,htmlState:V.copyState(y,s.htmlState)}},token:function(s,o){return o.token(s,o)},indent:function(s,o,l){return!s.localMode||/^\s*<\//.test(o)?y.indent(s.htmlState,o,l):s.localMode.indent?s.localMode.indent(s.localState,o,l):V.Pass},innerMode:function(s){return{state:s.localState||s.htmlState,mode:s.localMode||y}}}},"xml","javascript","css"),V.defineMIME("text/html","htmlmixed")})});var nl=lr((rl,il)=>{(function(V){typeof rl=="object"&&typeof il=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";function q(L,O,W,Y,ue,le){this.indented=L,this.column=O,this.type=W,this.info=Y,this.align=ue,this.prev=le}function Z(L,O,W,Y){var ue=L.indented;return L.context&&L.context.type=="statement"&&W!="statement"&&(ue=L.context.indented),L.context=new q(ue,O,W,Y,null,L.context)}function ie(L){var O=L.context.type;return(O==")"||O=="]"||O=="}")&&(L.indented=L.context.indented),L.context=L.context.prev}function J(L,O,W){if(O.prevToken=="variable"||O.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(L.string.slice(0,W))||O.typeAtEndOfLine&&L.column()==L.indentation())return!0}function h(L){for(;;){if(!L||L.type=="top")return!0;if(L.type=="}"&&L.prev.info!="namespace")return!1;L=L.prev}}V.defineMode("clike",function(L,O){var W=L.indentUnit,Y=O.statementIndentUnit||W,ue=O.dontAlignCalls,le=O.keywords||{},we=O.types||{},xe=O.builtin||{},de=O.blockKeywords||{},F=O.defKeywords||{},z=O.atoms||{},K=O.hooks||{},re=O.multiLineStrings,$=O.indentStatements!==!1,be=O.indentSwitch!==!1,Te=O.namespaceSeparator,Ke=O.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,Me=O.numberStart||/[\d\.]/,He=O.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,ge=O.isOperatorChar||/[+\-*&%=<>!?|\/]/,Xe=O.isIdentifierChar||/[\w\$_\xa1-\uffff]/,Ve=O.isReservedIdentifier||!1,Ge,ze;function te(Ee,De){var Ae=Ee.next();if(K[Ae]){var Ne=K[Ae](Ee,De);if(Ne!==!1)return Ne}if(Ae=='"'||Ae=="'")return De.tokenize=ve(Ae),De.tokenize(Ee,De);if(Me.test(Ae)){if(Ee.backUp(1),Ee.match(He))return"number";Ee.next()}if(Ke.test(Ae))return Ge=Ae,null;if(Ae=="/"){if(Ee.eat("*"))return De.tokenize=oe,oe(Ee,De);if(Ee.eat("/"))return Ee.skipToEnd(),"comment"}if(ge.test(Ae)){for(;!Ee.match(/^\/[\/*]/,!1)&&Ee.eat(ge););return"operator"}if(Ee.eatWhile(Xe),Te)for(;Ee.match(Te);)Ee.eatWhile(Xe);var Fe=Ee.current();return _(le,Fe)?(_(de,Fe)&&(Ge="newstatement"),_(F,Fe)&&(ze=!0),"keyword"):_(we,Fe)?"type":_(xe,Fe)||Ve&&Ve(Fe)?(_(de,Fe)&&(Ge="newstatement"),"builtin"):_(z,Fe)?"atom":"variable"}function ve(Ee){return function(De,Ae){for(var Ne=!1,Fe,Et=!1;(Fe=De.next())!=null;){if(Fe==Ee&&!Ne){Et=!0;break}Ne=!Ne&&Fe=="\\"}return(Et||!(Ne||re))&&(Ae.tokenize=null),"string"}}function oe(Ee,De){for(var Ae=!1,Ne;Ne=Ee.next();){if(Ne=="/"&&Ae){De.tokenize=null;break}Ae=Ne=="*"}return"comment"}function We(Ee,De){O.typeFirstDefinitions&&Ee.eol()&&h(De.context)&&(De.typeAtEndOfLine=J(Ee,De,Ee.pos))}return{startState:function(Ee){return{tokenize:null,context:new q((Ee||0)-W,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(Ee,De){var Ae=De.context;if(Ee.sol()&&(Ae.align==null&&(Ae.align=!1),De.indented=Ee.indentation(),De.startOfLine=!0),Ee.eatSpace())return We(Ee,De),null;Ge=ze=null;var Ne=(De.tokenize||te)(Ee,De);if(Ne=="comment"||Ne=="meta")return Ne;if(Ae.align==null&&(Ae.align=!0),Ge==";"||Ge==":"||Ge==","&&Ee.match(/^\s*(?:\/\/.*)?$/,!1))for(;De.context.type=="statement";)ie(De);else if(Ge=="{")Z(De,Ee.column(),"}");else if(Ge=="[")Z(De,Ee.column(),"]");else if(Ge=="(")Z(De,Ee.column(),")");else if(Ge=="}"){for(;Ae.type=="statement";)Ae=ie(De);for(Ae.type=="}"&&(Ae=ie(De));Ae.type=="statement";)Ae=ie(De)}else Ge==Ae.type?ie(De):$&&((Ae.type=="}"||Ae.type=="top")&&Ge!=";"||Ae.type=="statement"&&Ge=="newstatement")&&Z(De,Ee.column(),"statement",Ee.current());if(Ne=="variable"&&(De.prevToken=="def"||O.typeFirstDefinitions&&J(Ee,De,Ee.start)&&h(De.context)&&Ee.match(/^\s*\(/,!1))&&(Ne="def"),K.token){var Fe=K.token(Ee,De,Ne);Fe!==void 0&&(Ne=Fe)}return Ne=="def"&&O.styleDefs===!1&&(Ne="variable"),De.startOfLine=!1,De.prevToken=ze?"def":Ne||Ge,We(Ee,De),Ne},indent:function(Ee,De){if(Ee.tokenize!=te&&Ee.tokenize!=null||Ee.typeAtEndOfLine)return V.Pass;var Ae=Ee.context,Ne=De&&De.charAt(0),Fe=Ne==Ae.type;if(Ae.type=="statement"&&Ne=="}"&&(Ae=Ae.prev),O.dontIndentStatements)for(;Ae.type=="statement"&&O.dontIndentStatements.test(Ae.info);)Ae=Ae.prev;if(K.indent){var Et=K.indent(Ee,Ae,De,W);if(typeof Et=="number")return Et}var ht=Ae.prev&&Ae.prev.info=="switch";if(O.allmanIndentation&&/[{(]/.test(Ne)){for(;Ae.type!="top"&&Ae.type!="}";)Ae=Ae.prev;return Ae.indented}return Ae.type=="statement"?Ae.indented+(Ne=="{"?0:Y):Ae.align&&(!ue||Ae.type!=")")?Ae.column+(Fe?0:1):Ae.type==")"&&!Fe?Ae.indented+Y:Ae.indented+(Fe?0:W)+(!Fe&&ht&&!/^(?:case|default)\b/.test(De)?W:0)},electricInput:be?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});function x(L){for(var O={},W=L.split(" "),Y=0;Y<W.length;++Y)O[W[Y]]=!0;return O}function _(L,O){return typeof L=="function"?L(O):L.propertyIsEnumerable(O)}var b="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",S="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",v="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",y="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",C=x("int long char short double float unsigned signed void bool"),u=x("SEL instancetype id Class Protocol BOOL");function f(L){return _(C,L)||/.+_t$/.test(L)}function d(L){return f(L)||_(u,L)}var a="case do else for if switch while struct enum union",s="struct enum union";function o(L,O){if(!O.startOfLine)return!1;for(var W,Y=null;W=L.peek();){if(W=="\\"&&L.match(/^.$/)){Y=o;break}else if(W=="/"&&L.match(/^\/[\/\*]/,!1))break;L.next()}return O.tokenize=Y,"meta"}function l(L,O){return O.prevToken=="type"?"type":!1}function p(L){return!L||L.length<2||L[0]!="_"?!1:L[1]=="_"||L[1]!==L[1].toLowerCase()}function g(L){return L.eatWhile(/[\w\.']/),"number"}function T(L,O){if(L.backUp(1),L.match(/^(?:R|u8R|uR|UR|LR)/)){var W=L.match(/^"([^\s\\()]{0,16})\(/);return W?(O.cpp11RawStringDelim=W[1],O.tokenize=D,D(L,O)):!1}return L.match(/^(?:u8|u|U|L)/)?L.match(/^["']/,!1)?"string":!1:(L.next(),!1)}function A(L){var O=/(\w+)::~?(\w+)$/.exec(L);return O&&O[1]==O[2]}function B(L,O){for(var W;(W=L.next())!=null;)if(W=='"'&&!L.eat('"')){O.tokenize=null;break}return"string"}function D(L,O){var W=O.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),Y=L.match(new RegExp(".*?\\)"+W+'"'));return Y?O.tokenize=null:L.skipToEnd(),"string"}function R(L,O){typeof L=="string"&&(L=[L]);var W=[];function Y(le){if(le)for(var we in le)le.hasOwnProperty(we)&&W.push(we)}Y(O.keywords),Y(O.types),Y(O.builtin),Y(O.atoms),W.length&&(O.helperType=L[0],V.registerHelper("hintWords",L[0],W));for(var ue=0;ue<L.length;++ue)V.defineMIME(L[ue],O)}R(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:x(b),types:f,blockKeywords:x(a),defKeywords:x(s),typeFirstDefinitions:!0,atoms:x("NULL true false"),isReservedIdentifier:p,hooks:{"#":o,"*":l},modeProps:{fold:["brace","include"]}}),R(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:x(b+" "+S),types:f,blockKeywords:x(a+" class try catch"),defKeywords:x(s+" class namespace"),typeFirstDefinitions:!0,atoms:x("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:p,hooks:{"#":o,"*":l,u:T,U:T,L:T,R:T,"0":g,"1":g,"2":g,"3":g,"4":g,"5":g,"6":g,"7":g,"8":g,"9":g,token:function(L,O,W){if(W=="variable"&&L.peek()=="("&&(O.prevToken==";"||O.prevToken==null||O.prevToken=="}")&&A(L.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),R("text/x-java",{name:"clike",keywords:x("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:x("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:x("catch class do else finally for if switch try while"),defKeywords:x("class interface enum @interface"),typeFirstDefinitions:!0,atoms:x("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(L){return L.match("interface",!1)?!1:(L.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),R("text/x-csharp",{name:"clike",keywords:x("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:x("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:x("catch class do else finally for foreach if struct switch try while"),defKeywords:x("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:x("true false null"),hooks:{"@":function(L,O){return L.eat('"')?(O.tokenize=B,B(L,O)):(L.eatWhile(/[\w\$_]/),"meta")}}});function E(L,O){for(var W=!1;!L.eol();){if(!W&&L.match('"""')){O.tokenize=null;break}W=L.next()=="\\"&&!W}return"string"}function I(L){return function(O,W){for(var Y;Y=O.next();)if(Y=="*"&&O.eat("/"))if(L==1){W.tokenize=null;break}else return W.tokenize=I(L-1),W.tokenize(O,W);else if(Y=="/"&&O.eat("*"))return W.tokenize=I(L+1),W.tokenize(O,W);return"comment"}}R("text/x-scala",{name:"clike",keywords:x("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:x("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:x("catch class enum do else finally for forSome if match switch try while"),defKeywords:x("class enum def object package trait type val var"),atoms:x("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},'"':function(L,O){return L.match('""')?(O.tokenize=E,O.tokenize(L,O)):!1},"'":function(L){return L.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(L,O){var W=O.context;return W.type=="}"&&W.align&&L.eat(">")?(O.context=new q(W.indented,W.column,W.type,W.info,null,W.prev),"operator"):!1},"/":function(L,O){return L.eat("*")?(O.tokenize=I(1),O.tokenize(L,O)):!1}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}});function w(L){return function(O,W){for(var Y=!1,ue,le=!1;!O.eol();){if(!L&&!Y&&O.match('"')){le=!0;break}if(L&&O.match('"""')){le=!0;break}ue=O.next(),!Y&&ue=="$"&&O.match("{")&&O.skipTo("}"),Y=!Y&&ue=="\\"&&!L}return(le||!L)&&(W.tokenize=null),"string"}}R("text/x-kotlin",{name:"clike",keywords:x("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam value"),types:x("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:x("catch class do else finally for if where try while enum"),defKeywords:x("class val var object interface fun"),atoms:x("true false null this"),hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},"*":function(L,O){return O.prevToken=="."?"variable":"operator"},'"':function(L,O){return O.tokenize=w(L.match('""')),O.tokenize(L,O)},"/":function(L,O){return L.eat("*")?(O.tokenize=I(1),O.tokenize(L,O)):!1},indent:function(L,O,W,Y){var ue=W&&W.charAt(0);if((L.prevToken=="}"||L.prevToken==")")&&W=="")return L.indented;if(L.prevToken=="operator"&&W!="}"&&L.context.type!="}"||L.prevToken=="variable"&&ue=="."||(L.prevToken=="}"||L.prevToken==")")&&ue==".")return Y*2+O.indented;if(O.align&&O.type=="}")return O.indented+(L.context.type==(W||"").charAt(0)?0:Y)}},modeProps:{closeBrackets:{triples:'"'}}}),R(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:x("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:x("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:x("for while do if else struct"),builtin:x("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:x("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":o},modeProps:{fold:["brace","include"]}}),R("text/x-nesc",{name:"clike",keywords:x(b+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:f,blockKeywords:x(a),atoms:x("null true false"),hooks:{"#":o},modeProps:{fold:["brace","include"]}}),R("text/x-objectivec",{name:"clike",keywords:x(b+" "+v),types:d,builtin:x(y),blockKeywords:x(a+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:x(s+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:x("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:p,hooks:{"#":o,"*":l},modeProps:{fold:["brace","include"]}}),R("text/x-objectivec++",{name:"clike",keywords:x(b+" "+v+" "+S),types:d,builtin:x(y),blockKeywords:x(a+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:x(s+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:x("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:p,hooks:{"#":o,"*":l,u:T,U:T,L:T,R:T,"0":g,"1":g,"2":g,"3":g,"4":g,"5":g,"6":g,"7":g,"8":g,"9":g,token:function(L,O,W){if(W=="variable"&&L.peek()=="("&&(O.prevToken==";"||O.prevToken==null||O.prevToken=="}")&&A(L.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),R("text/x-squirrel",{name:"clike",keywords:x("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:f,blockKeywords:x("case catch class else for foreach if switch try while"),defKeywords:x("function local class"),typeFirstDefinitions:!0,atoms:x("true false null"),hooks:{"#":o},modeProps:{fold:["brace","include"]}});var U=null;function N(L){return function(O,W){for(var Y=!1,ue,le=!1;!O.eol();){if(!Y&&O.match('"')&&(L=="single"||O.match('""'))){le=!0;break}if(!Y&&O.match("``")){U=N(L),le=!0;break}ue=O.next(),Y=L=="single"&&!Y&&ue=="\\"}return le&&(W.tokenize=null),"string"}}R("text/x-ceylon",{name:"clike",keywords:x("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(L){var O=L.charAt(0);return O===O.toUpperCase()&&O!==O.toLowerCase()},blockKeywords:x("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:x("class dynamic function interface module object package value"),builtin:x("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:x("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},'"':function(L,O){return O.tokenize=N(L.match('""')?"triple":"single"),O.tokenize(L,O)},"`":function(L,O){return!U||!L.match("`")?!1:(O.tokenize=U,U=null,O.tokenize(L,O))},"'":function(L){return L.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(L,O,W){if((W=="variable"||W=="type")&&O.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})});var al=lr((ol,sl)=>{(function(V){typeof ol=="object"&&typeof sl=="object"?V(pr(),tl(),nl()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],V):V(CodeMirror)})(function(V){"use strict";function q(S){for(var v={},y=S.split(" "),C=0;C<y.length;++C)v[y[C]]=!0;return v}function Z(S,v,y){return S.length==0?ie(v):function(C,u){for(var f=S[0],d=0;d<f.length;d++)if(C.match(f[d][0]))return u.tokenize=Z(S.slice(1),v),f[d][1];return u.tokenize=ie(v,y),"string"}}function ie(S,v){return function(y,C){return J(y,C,S,v)}}function J(S,v,y,C){if(C!==!1&&S.match("${",!1)||S.match("{$",!1))return v.tokenize=null,"string";if(C!==!1&&S.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return S.match("[",!1)&&(v.tokenize=Z([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],y,C)),S.match(/^->\w/,!1)&&(v.tokenize=Z([[["->",null]],[[/[\w]+/,"variable"]]],y,C)),"variable-2";for(var u=!1;!S.eol()&&(u||C===!1||!S.match("{$",!1)&&!S.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!u&&S.match(y)){v.tokenize=null,v.tokStack.pop(),v.tokStack.pop();break}u=S.next()=="\\"&&!u}return"string"}var h="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile enum extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally readonly match",x="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",_="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage memory_get_peak_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";V.registerHelper("hintWords","php",[h,x,_].join(" ").split(" ")),V.registerHelper("wordChars","php",/[\w$]/);var b={name:"clike",helperType:"php",keywords:q(h),blockKeywords:q("catch do else elseif for foreach if switch try while finally"),defKeywords:q("class enum function interface namespace trait"),atoms:q(x),builtin:q(_),multiLineStrings:!0,hooks:{$:function(S){return S.eatWhile(/[\w\$_]/),"variable-2"},"<":function(S,v){var y;if(y=S.match(/^<<\s*/)){var C=S.eat(/['"]/);S.eatWhile(/[\w\.]/);var u=S.current().slice(y[0].length+(C?2:1));if(C&&S.eat(C),u)return(v.tokStack||(v.tokStack=[])).push(u,0),v.tokenize=ie(u,C!="'"),"string"}return!1},"#":function(S){for(;!S.eol()&&!S.match("?>",!1);)S.next();return"comment"},"/":function(S){if(S.eat("/")){for(;!S.eol()&&!S.match("?>",!1);)S.next();return"comment"}return!1},'"':function(S,v){return(v.tokStack||(v.tokStack=[])).push('"',0),v.tokenize=ie('"'),"string"},"{":function(S,v){return v.tokStack&&v.tokStack.length&&v.tokStack[v.tokStack.length-1]++,!1},"}":function(S,v){return v.tokStack&&v.tokStack.length>0&&!--v.tokStack[v.tokStack.length-1]&&(v.tokenize=ie(v.tokStack[v.tokStack.length-2])),!1}}};V.defineMode("php",function(S,v){var y=V.getMode(S,v&&v.htmlMode||"text/html"),C=V.getMode(S,b);function u(f,d){var a=d.curMode==C;if(f.sol()&&d.pending&&d.pending!='"'&&d.pending!="'"&&(d.pending=null),a)return a&&d.php.tokenize==null&&f.match("?>")?(d.curMode=y,d.curState=d.html,d.php.context.prev||(d.php=null),"meta"):C.token(f,d.curState);if(f.match(/^<\?\w*/))return d.curMode=C,d.php||(d.php=V.startState(C,y.indent(d.html,"",""))),d.curState=d.php,"meta";if(d.pending=='"'||d.pending=="'"){for(;!f.eol()&&f.next()!=d.pending;);var s="string"}else if(d.pending&&f.pos<d.pending.end){f.pos=d.pending.end;var s=d.pending.style}else var s=y.token(f,d.curState);d.pending&&(d.pending=null);var o=f.current(),l=o.search(/<\?/),p;return l!=-1&&(s=="string"&&(p=o.match(/[\'\"]$/))&&!/\?>/.test(o)?d.pending=p[0]:d.pending={end:f.pos,style:s},f.backUp(o.length-l)),s}return{startState:function(){var f=V.startState(y),d=v.startOpen?V.startState(C):null;return{html:f,php:d,curMode:v.startOpen?C:y,curState:v.startOpen?d:f,pending:null}},copyState:function(f){var d=f.html,a=V.copyState(y,d),s=f.php,o=s&&V.copyState(C,s),l;return f.curMode==y?l=a:l=o,{html:a,php:o,curMode:f.curMode,curState:l,pending:f.pending}},token:u,indent:function(f,d,a){return f.curMode!=C&&/^\s*<\//.test(d)||f.curMode==C&&/^\?>/.test(d)?y.indent(f.html,d,a):f.curMode.indent(f.curState,d,a)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(f){return{state:f.curState,mode:f.curMode}}}},"htmlmixed","clike"),V.defineMIME("application/x-httpd-php","php"),V.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),V.defineMIME("text/x-php",b)})});var hl=lr((ul,fl)=>{(function(V){typeof ul=="object"&&typeof fl=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){"use strict";V.defineMode("perl",function(){var h={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},x="string-2",_=/[goseximacplud]/;function b(y,C,u,f,d){return C.chain=null,C.style=null,C.tail=null,C.tokenize=function(a,s){for(var o=!1,l,p=0;l=a.next();){if(l===u[p]&&!o)return u[++p]!==void 0?(s.chain=u[p],s.style=f,s.tail=d):d&&a.eatWhile(d),s.tokenize=v,f;o=!o&&l=="\\"}return f},C.tokenize(y,C)}function S(y,C,u){return C.tokenize=function(f,d){return f.string==u&&(d.tokenize=v),f.skipToEnd(),"string"},C.tokenize(y,C)}function v(y,C){if(y.eatSpace())return null;if(C.chain)return b(y,C,C.chain,C.style,C.tail);if(y.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(y.match(/^<<(?=[_a-zA-Z])/))return y.eatWhile(/\w/),S(y,C,y.current().substr(2));if(y.sol()&&y.match(/^\=item(?!\w)/))return S(y,C,"=cut");var u=y.next();if(u=='"'||u=="'"){if(Z(y,3)=="<<"+u){var f=y.pos;y.eatWhile(/\w/);var d=y.current().substr(1);if(d&&y.eat(u))return S(y,C,d);y.pos=f}return b(y,C,[u],"string")}if(u=="q"){var a=q(y,-2);if(!(a&&/\w/.test(a))){if(a=q(y,0),a=="x"){if(a=q(y,1),a=="(")return J(y,2),b(y,C,[")"],x,_);if(a=="[")return J(y,2),b(y,C,["]"],x,_);if(a=="{")return J(y,2),b(y,C,["}"],x,_);if(a=="<")return J(y,2),b(y,C,[">"],x,_);if(/[\^'"!~\/]/.test(a))return J(y,1),b(y,C,[y.eat(a)],x,_)}else if(a=="q"){if(a=q(y,1),a=="(")return J(y,2),b(y,C,[")"],"string");if(a=="[")return J(y,2),b(y,C,["]"],"string");if(a=="{")return J(y,2),b(y,C,["}"],"string");if(a=="<")return J(y,2),b(y,C,[">"],"string");if(/[\^'"!~\/]/.test(a))return J(y,1),b(y,C,[y.eat(a)],"string")}else if(a=="w"){if(a=q(y,1),a=="(")return J(y,2),b(y,C,[")"],"bracket");if(a=="[")return J(y,2),b(y,C,["]"],"bracket");if(a=="{")return J(y,2),b(y,C,["}"],"bracket");if(a=="<")return J(y,2),b(y,C,[">"],"bracket");if(/[\^'"!~\/]/.test(a))return J(y,1),b(y,C,[y.eat(a)],"bracket")}else if(a=="r"){if(a=q(y,1),a=="(")return J(y,2),b(y,C,[")"],x,_);if(a=="[")return J(y,2),b(y,C,["]"],x,_);if(a=="{")return J(y,2),b(y,C,["}"],x,_);if(a=="<")return J(y,2),b(y,C,[">"],x,_);if(/[\^'"!~\/]/.test(a))return J(y,1),b(y,C,[y.eat(a)],x,_)}else if(/[\^'"!~\/(\[{<]/.test(a)){if(a=="(")return J(y,1),b(y,C,[")"],"string");if(a=="[")return J(y,1),b(y,C,["]"],"string");if(a=="{")return J(y,1),b(y,C,["}"],"string");if(a=="<")return J(y,1),b(y,C,[">"],"string");if(/[\^'"!~\/]/.test(a))return b(y,C,[y.eat(a)],"string")}}}if(u=="m"){var a=q(y,-2);if(!(a&&/\w/.test(a))&&(a=y.eat(/[(\[{<\^'"!~\/]/),a)){if(/[\^'"!~\/]/.test(a))return b(y,C,[a],x,_);if(a=="(")return b(y,C,[")"],x,_);if(a=="[")return b(y,C,["]"],x,_);if(a=="{")return b(y,C,["}"],x,_);if(a=="<")return b(y,C,[">"],x,_)}}if(u=="s"){var a=/[\/>\]})\w]/.test(q(y,-2));if(!a&&(a=y.eat(/[(\[{<\^'"!~\/]/),a))return a=="["?b(y,C,["]","]"],x,_):a=="{"?b(y,C,["}","}"],x,_):a=="<"?b(y,C,[">",">"],x,_):a=="("?b(y,C,[")",")"],x,_):b(y,C,[a,a],x,_)}if(u=="y"){var a=/[\/>\]})\w]/.test(q(y,-2));if(!a&&(a=y.eat(/[(\[{<\^'"!~\/]/),a))return a=="["?b(y,C,["]","]"],x,_):a=="{"?b(y,C,["}","}"],x,_):a=="<"?b(y,C,[">",">"],x,_):a=="("?b(y,C,[")",")"],x,_):b(y,C,[a,a],x,_)}if(u=="t"){var a=/[\/>\]})\w]/.test(q(y,-2));if(!a&&(a=y.eat("r"),a&&(a=y.eat(/[(\[{<\^'"!~\/]/),a)))return a=="["?b(y,C,["]","]"],x,_):a=="{"?b(y,C,["}","}"],x,_):a=="<"?b(y,C,[">",">"],x,_):a=="("?b(y,C,[")",")"],x,_):b(y,C,[a,a],x,_)}if(u=="`")return b(y,C,[u],"variable-2");if(u=="/")return/~\s*$/.test(Z(y))?b(y,C,[u],x,_):"operator";if(u=="$"){var f=y.pos;if(y.eatWhile(/\d/)||y.eat("{")&&y.eatWhile(/\d/)&&y.eat("}"))return"variable-2";y.pos=f}if(/[$@%]/.test(u)){var f=y.pos;if(y.eat("^")&&y.eat(/[A-Z]/)||!/[@$%&]/.test(q(y,-2))&&y.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var a=y.current();if(h[a])return"variable-2"}y.pos=f}if(/[$@%&]/.test(u)&&(y.eatWhile(/[\w$]/)||y.eat("{")&&y.eatWhile(/[\w$]/)&&y.eat("}"))){var a=y.current();return h[a]?"variable-2":"variable"}if(u=="#"&&q(y,-2)!="$")return y.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(u)){var f=y.pos;if(y.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),h[y.current()])return"operator";y.pos=f}if(u=="_"&&y.pos==1){if(ie(y,6)=="_END__")return b(y,C,["\0"],"comment");if(ie(y,7)=="_DATA__")return b(y,C,["\0"],"variable-2");if(ie(y,7)=="_C__")return b(y,C,["\0"],"string")}if(/\w/.test(u)){var f=y.pos;if(q(y,-2)=="{"&&(q(y,0)=="}"||y.eatWhile(/\w/)&&q(y,0)=="}"))return"string";y.pos=f}if(/[A-Z]/.test(u)){var s=q(y,-2),f=y.pos;if(y.eatWhile(/[A-Z_]/),/[\da-z]/.test(q(y,0)))y.pos=f;else{var a=h[y.current()];return a?(a[1]&&(a=a[0]),s!=":"?a==1?"keyword":a==2?"def":a==3?"atom":a==4?"operator":a==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(u)){var s=q(y,-2);y.eatWhile(/\w/);var a=h[y.current()];return a?(a[1]&&(a=a[0]),s!=":"?a==1?"keyword":a==2?"def":a==3?"atom":a==4?"operator":a==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:v,chain:null,style:null,tail:null}},token:function(y,C){return(C.tokenize||v)(y,C)},lineComment:"#"}}),V.registerHelper("wordChars","perl",/[\w$]/),V.defineMIME("text/x-perl","perl");function q(h,x){return h.string.charAt(h.pos+(x||0))}function Z(h,x){if(x){var _=h.pos-x;return h.string.substr(_>=0?_:0,x)}else return h.string.substr(0,h.pos-1)}function ie(h,x){var _=h.string.length,b=_-h.pos+1;return h.string.substr(h.pos,x&&x<_?x:b)}function J(h,x){var _=h.pos+x,b;_<=0?h.pos=0:_>=(b=h.string.length-1)?h.pos=b:h.pos=_}})});var vl=lr((io,Zo)=>{(function(V,q){if(typeof io=="object"&&typeof Zo=="object")Zo.exports=q();else if(typeof define=="function"&&define.amd)define([],q);else{var Z=q();for(var ie in Z)(typeof io=="object"?io:V)[ie]=Z[ie]}})(self,function(){return(()=>{"use strict";var V={4567:function(J,h,x){var _,b=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(l[g]=p[g])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.AccessibilityManager=void 0;var S=x(9042),v=x(6114),y=x(9924),C=x(3656),u=x(844),f=x(5596),d=x(9631),a=function(s){function o(l,p){var g=s.call(this)||this;g._terminal=l,g._renderService=p,g._liveRegionLineCount=0,g._charsToConsume=[],g._charsToAnnounce="",g._accessibilityTreeRoot=document.createElement("div"),g._accessibilityTreeRoot.setAttribute("role","document"),g._accessibilityTreeRoot.classList.add("xterm-accessibility"),g._accessibilityTreeRoot.tabIndex=0,g._rowContainer=document.createElement("div"),g._rowContainer.setAttribute("role","list"),g._rowContainer.classList.add("xterm-accessibility-tree"),g._rowElements=[];for(var T=0;T<g._terminal.rows;T++)g._rowElements[T]=g._createAccessibilityTreeNode(),g._rowContainer.appendChild(g._rowElements[T]);if(g._topBoundaryFocusListener=function(A){return g._onBoundaryFocus(A,0)},g._bottomBoundaryFocusListener=function(A){return g._onBoundaryFocus(A,1)},g._rowElements[0].addEventListener("focus",g._topBoundaryFocusListener),g._rowElements[g._rowElements.length-1].addEventListener("focus",g._bottomBoundaryFocusListener),g._refreshRowsDimensions(),g._accessibilityTreeRoot.appendChild(g._rowContainer),g._renderRowsDebouncer=new y.TimeBasedDebouncer(g._renderRows.bind(g)),g._refreshRows(),g._liveRegion=document.createElement("div"),g._liveRegion.classList.add("live-region"),g._liveRegion.setAttribute("aria-live","assertive"),g._accessibilityTreeRoot.appendChild(g._liveRegion),!g._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return g._terminal.element.insertAdjacentElement("afterbegin",g._accessibilityTreeRoot),g.register(g._renderRowsDebouncer),g.register(g._terminal.onResize(function(A){return g._onResize(A.rows)})),g.register(g._terminal.onRender(function(A){return g._refreshRows(A.start,A.end)})),g.register(g._terminal.onScroll(function(){return g._refreshRows()})),g.register(g._terminal.onA11yChar(function(A){return g._onChar(A)})),g.register(g._terminal.onLineFeed(function(){return g._onChar(`
`)})),g.register(g._terminal.onA11yTab(function(A){return g._onTab(A)})),g.register(g._terminal.onKey(function(A){return g._onKey(A.key)})),g.register(g._terminal.onBlur(function(){return g._clearLiveRegion()})),g.register(g._renderService.onDimensionsChange(function(){return g._refreshRowsDimensions()})),g._screenDprMonitor=new f.ScreenDprMonitor,g.register(g._screenDprMonitor),g._screenDprMonitor.setListener(function(){return g._refreshRowsDimensions()}),g.register((0,C.addDisposableDomListener)(window,"resize",function(){return g._refreshRowsDimensions()})),g}return b(o,s),o.prototype.dispose=function(){s.prototype.dispose.call(this),(0,d.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},o.prototype._onBoundaryFocus=function(l,p){var g=l.target,T=this._rowElements[p===0?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")!==(p===0?"1":""+this._terminal.buffer.lines.length)&&l.relatedTarget===T){var A,B;if(p===0?(A=g,B=this._rowElements.pop(),this._rowContainer.removeChild(B)):(A=this._rowElements.shift(),B=g,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),B.removeEventListener("focus",this._bottomBoundaryFocusListener),p===0){var D=this._createAccessibilityTreeNode();this._rowElements.unshift(D),this._rowContainer.insertAdjacentElement("afterbegin",D)}else D=this._createAccessibilityTreeNode(),this._rowElements.push(D),this._rowContainer.appendChild(D);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(p===0?-1:1),this._rowElements[p===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}},o.prototype._onResize=function(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var p=this._rowContainer.children.length;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},o.prototype._createAccessibilityTreeNode=function(){var l=document.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l},o.prototype._onTab=function(l){for(var p=0;p<l;p++)this._onChar(" ")},o.prototype._onChar=function(l){var p=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=S.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){p._accessibilityTreeRoot.appendChild(p._liveRegion)},0))},o.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&(0,d.removeElementFromParent)(this._liveRegion)},o.prototype._onKey=function(l){this._clearLiveRegion(),this._charsToConsume.push(l)},o.prototype._refreshRows=function(l,p){this._renderRowsDebouncer.refresh(l,p,this._terminal.rows)},o.prototype._renderRows=function(l,p){for(var g=this._terminal.buffer,T=g.lines.length.toString(),A=l;A<=p;A++){var B=g.translateBufferLineToString(g.ydisp+A,!0),D=(g.ydisp+A+1).toString(),R=this._rowElements[A];R&&(B.length===0?R.innerText="\xA0":R.textContent=B,R.setAttribute("aria-posinset",D),R.setAttribute("aria-setsize",T))}this._announceCharacters()},o.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}},o.prototype._refreshRowDimensions=function(l){l.style.height=this._renderService.dimensions.actualCellHeight+"px"},o.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},o}(u.Disposable);h.AccessibilityManager=a},3614:(J,h)=>{function x(v){return v.replace(/\r?\n/g,"\r")}function _(v,y){return y?"\x1B[200~"+v+"\x1B[201~":v}function b(v,y,C){v=_(v=x(v),C.decPrivateModes.bracketedPasteMode),C.triggerDataEvent(v,!0),y.value=""}function S(v,y,C){var u=C.getBoundingClientRect(),f=v.clientX-u.left-10,d=v.clientY-u.top-10;y.style.width="20px",y.style.height="20px",y.style.left=f+"px",y.style.top=d+"px",y.style.zIndex="1000",y.focus()}Object.defineProperty(h,"__esModule",{value:!0}),h.rightClickHandler=h.moveTextAreaUnderMouseCursor=h.paste=h.handlePasteEvent=h.copyHandler=h.bracketTextForPaste=h.prepareTextForTerminal=void 0,h.prepareTextForTerminal=x,h.bracketTextForPaste=_,h.copyHandler=function(v,y){v.clipboardData&&v.clipboardData.setData("text/plain",y.selectionText),v.preventDefault()},h.handlePasteEvent=function(v,y,C){v.stopPropagation(),v.clipboardData&&b(v.clipboardData.getData("text/plain"),y,C)},h.paste=b,h.moveTextAreaUnderMouseCursor=S,h.rightClickHandler=function(v,y,C,u,f){S(v,y,C),f&&u.rightClickSelect(v),y.value=u.selectionText,y.select()}},4774:(J,h)=>{var x,_,b,S;function v(C){var u=C.toString(16);return u.length<2?"0"+u:u}function y(C,u){return C<u?(u+.05)/(C+.05):(C+.05)/(u+.05)}Object.defineProperty(h,"__esModule",{value:!0}),h.contrastRatio=h.toPaddedHex=h.rgba=h.rgb=h.css=h.color=h.channels=void 0,function(C){C.toCss=function(u,f,d,a){return a!==void 0?"#"+v(u)+v(f)+v(d)+v(a):"#"+v(u)+v(f)+v(d)},C.toRgba=function(u,f,d,a){return a===void 0&&(a=255),(u<<24|f<<16|d<<8|a)>>>0}}(x=h.channels||(h.channels={})),(_=h.color||(h.color={})).blend=function(C,u){var f=(255&u.rgba)/255;if(f===1)return{css:u.css,rgba:u.rgba};var d=u.rgba>>24&255,a=u.rgba>>16&255,s=u.rgba>>8&255,o=C.rgba>>24&255,l=C.rgba>>16&255,p=C.rgba>>8&255,g=o+Math.round((d-o)*f),T=l+Math.round((a-l)*f),A=p+Math.round((s-p)*f);return{css:x.toCss(g,T,A),rgba:x.toRgba(g,T,A)}},_.isOpaque=function(C){return(255&C.rgba)==255},_.ensureContrastRatio=function(C,u,f){var d=S.ensureContrastRatio(C.rgba,u.rgba,f);if(d)return S.toColor(d>>24&255,d>>16&255,d>>8&255)},_.opaque=function(C){var u=(255|C.rgba)>>>0,f=S.toChannels(u),d=f[0],a=f[1],s=f[2];return{css:x.toCss(d,a,s),rgba:u}},_.opacity=function(C,u){var f=Math.round(255*u),d=S.toChannels(C.rgba),a=d[0],s=d[1],o=d[2];return{css:x.toCss(a,s,o,f),rgba:x.toRgba(a,s,o,f)}},_.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]},(h.css||(h.css={})).toColor=function(C){switch(C.length){case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(C){function u(f,d,a){var s=f/255,o=d/255,l=a/255;return .2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))}C.relativeLuminance=function(f){return u(f>>16&255,f>>8&255,255&f)},C.relativeLuminance2=u}(b=h.rgb||(h.rgb={})),function(C){function u(d,a,s){for(var o=d>>24&255,l=d>>16&255,p=d>>8&255,g=a>>24&255,T=a>>16&255,A=a>>8&255,B=y(b.relativeLuminance2(g,A,T),b.relativeLuminance2(o,l,p));B<s&&(g>0||T>0||A>0);)g-=Math.max(0,Math.ceil(.1*g)),T-=Math.max(0,Math.ceil(.1*T)),A-=Math.max(0,Math.ceil(.1*A)),B=y(b.relativeLuminance2(g,A,T),b.relativeLuminance2(o,l,p));return(g<<24|T<<16|A<<8|255)>>>0}function f(d,a,s){for(var o=d>>24&255,l=d>>16&255,p=d>>8&255,g=a>>24&255,T=a>>16&255,A=a>>8&255,B=y(b.relativeLuminance2(g,A,T),b.relativeLuminance2(o,l,p));B<s&&(g<255||T<255||A<255);)g=Math.min(255,g+Math.ceil(.1*(255-g))),T=Math.min(255,T+Math.ceil(.1*(255-T))),A=Math.min(255,A+Math.ceil(.1*(255-A))),B=y(b.relativeLuminance2(g,A,T),b.relativeLuminance2(o,l,p));return(g<<24|T<<16|A<<8|255)>>>0}C.ensureContrastRatio=function(d,a,s){var o=b.relativeLuminance(d>>8),l=b.relativeLuminance(a>>8);if(y(o,l)<s)return l<o?u(d,a,s):f(d,a,s)},C.reduceLuminance=u,C.increaseLuminance=f,C.toChannels=function(d){return[d>>24&255,d>>16&255,d>>8&255,255&d]},C.toColor=function(d,a,s){return{css:x.toCss(d,a,s),rgba:x.toRgba(d,a,s)}}}(S=h.rgba||(h.rgba={})),h.toPaddedHex=v,h.contrastRatio=y},7239:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorContrastCache=void 0;var x=function(){function _(){this._color={},this._rgba={}}return _.prototype.clear=function(){this._color={},this._rgba={}},_.prototype.setCss=function(b,S,v){this._rgba[b]||(this._rgba[b]={}),this._rgba[b][S]=v},_.prototype.getCss=function(b,S){return this._rgba[b]?this._rgba[b][S]:void 0},_.prototype.setColor=function(b,S,v){this._color[b]||(this._color[b]={}),this._color[b][S]=v},_.prototype.getColor=function(b,S){return this._color[b]?this._color[b][S]:void 0},_}();h.ColorContrastCache=x},5680:function(J,h,x){var _=this&&this.__spreadArray||function(a,s,o){if(o||arguments.length===2)for(var l,p=0,g=s.length;p<g;p++)!l&&p in s||(l||(l=Array.prototype.slice.call(s,0,p)),l[p]=s[p]);return a.concat(l||Array.prototype.slice.call(s))};Object.defineProperty(h,"__esModule",{value:!0}),h.ColorManager=h.DEFAULT_ANSI_COLORS=void 0;var b=x(4774),S=x(7239),v=b.css.toColor("#ffffff"),y=b.css.toColor("#000000"),C=b.css.toColor("#ffffff"),u=b.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};h.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[b.css.toColor("#2e3436"),b.css.toColor("#cc0000"),b.css.toColor("#4e9a06"),b.css.toColor("#c4a000"),b.css.toColor("#3465a4"),b.css.toColor("#75507b"),b.css.toColor("#06989a"),b.css.toColor("#d3d7cf"),b.css.toColor("#555753"),b.css.toColor("#ef2929"),b.css.toColor("#8ae234"),b.css.toColor("#fce94f"),b.css.toColor("#729fcf"),b.css.toColor("#ad7fa8"),b.css.toColor("#34e2e2"),b.css.toColor("#eeeeec")],s=[0,95,135,175,215,255],o=0;o<216;o++){var l=s[o/36%6|0],p=s[o/6%6|0],g=s[o%6];a.push({css:b.channels.toCss(l,p,g),rgba:b.channels.toRgba(l,p,g)})}for(o=0;o<24;o++){var T=8+10*o;a.push({css:b.channels.toCss(T,T,T),rgba:b.channels.toRgba(T,T,T)})}return a}());var d=function(){function a(s,o){this.allowTransparency=o;var l=s.createElement("canvas");l.width=1,l.height=1;var p=l.getContext("2d");if(!p)throw new Error("Could not get rendering context");this._ctx=p,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new S.ColorContrastCache,this.colors={foreground:v,background:y,cursor:C,cursorAccent:u,selectionTransparent:f,selectionOpaque:b.color.blend(y,f),ansi:h.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return a.prototype.onOptionsChange=function(s){s==="minimumContrastRatio"&&this._contrastCache.clear()},a.prototype.setTheme=function(s){s===void 0&&(s={}),this.colors.foreground=this._parseColor(s.foreground,v),this.colors.background=this._parseColor(s.background,y),this.colors.cursor=this._parseColor(s.cursor,C,!0),this.colors.cursorAccent=this._parseColor(s.cursorAccent,u,!0),this.colors.selectionTransparent=this._parseColor(s.selection,f,!0),this.colors.selectionOpaque=b.color.blend(this.colors.background,this.colors.selectionTransparent),b.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=b.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(s.black,h.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(s.red,h.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(s.green,h.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(s.yellow,h.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(s.blue,h.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(s.magenta,h.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(s.cyan,h.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(s.white,h.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(s.brightBlack,h.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(s.brightRed,h.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(s.brightGreen,h.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(s.brightYellow,h.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(s.brightBlue,h.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(s.brightMagenta,h.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(s.brightCyan,h.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(s.brightWhite,h.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},a.prototype.restoreColor=function(s){if(s!==void 0)switch(s){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[s]=this._restoreColors.ansi[s]}else for(var o=0;o<this._restoreColors.ansi.length;++o)this.colors.ansi[o]=this._restoreColors.ansi[o]},a.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:_([],this.colors.ansi,!0)}},a.prototype._parseColor=function(s,o,l){if(l===void 0&&(l=this.allowTransparency),s===void 0)return o;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+s+" is invalid using fallback "+o.css),o;this._ctx.fillRect(0,0,1,1);var p=this._ctx.getImageData(0,0,1,1).data;if(p[3]!==255){if(!l)return console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+o.css+"."),o;var g=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(E){return Number(E)}),T=g[0],A=g[1],B=g[2],D=g[3],R=Math.round(255*D);return{rgba:b.channels.toRgba(T,A,B,R),css:s}}return{css:this._ctx.fillStyle,rgba:b.channels.toRgba(p[0],p[1],p[2],p[3])}},a}();h.ColorManager=d},9631:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeElementFromParent=void 0,h.removeElementFromParent=function(){for(var x,_=[],b=0;b<arguments.length;b++)_[b]=arguments[b];for(var S=0,v=_;S<v.length;S++){var y=v[S];(x=y==null?void 0:y.parentElement)===null||x===void 0||x.removeChild(y)}}},3656:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.addDisposableDomListener=void 0,h.addDisposableDomListener=function(x,_,b,S){x.addEventListener(_,b,S);var v=!1;return{dispose:function(){v||(v=!0,x.removeEventListener(_,b,S))}}}},3551:function(J,h,x){var _=this&&this.__decorate||function(u,f,d,a){var s,o=arguments.length,l=o<3?f:a===null?a=Object.getOwnPropertyDescriptor(f,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,f,d,a);else for(var p=u.length-1;p>=0;p--)(s=u[p])&&(l=(o<3?s(l):o>3?s(f,d,l):s(f,d))||l);return o>3&&l&&Object.defineProperty(f,d,l),l},b=this&&this.__param||function(u,f){return function(d,a){f(d,a,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZone=h.Linkifier=void 0;var S=x(8460),v=x(2585),y=function(){function u(f,d,a){this._bufferService=f,this._logService=d,this._unicodeService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new S.EventEmitter,this._onHideLinkUnderline=new S.EventEmitter,this._onLinkTooltip=new S.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(u.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),u.prototype.attachToDom=function(f,d){this._element=f,this._mouseZoneManager=d},u.prototype.linkifyRows=function(f,d){var a=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=f,this._rowsToLinkify.end=d):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,f),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,d)),this._mouseZoneManager.clearAll(f,d),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},u._timeBeforeLatency))},u.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var f=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var d=f.ydisp+this._rowsToLinkify.start;if(!(d>=f.lines.length)){for(var a=f.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,s=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,d,a,s,s);o.hasNext();)for(var l=o.next(),p=0;p<this._linkMatchers.length;p++)this._doLinkifyRow(l.range.first,l.content,this._linkMatchers[p]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},u.prototype.registerLinkMatcher=function(f,d,a){if(a===void 0&&(a={}),!d)throw new Error("handler must be defined");var s={id:this._nextLinkMatcherId++,regex:f,handler:d,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,priority:a.priority||0};return this._addLinkMatcherToList(s),s.id},u.prototype._addLinkMatcherToList=function(f){if(this._linkMatchers.length!==0){for(var d=this._linkMatchers.length-1;d>=0;d--)if(f.priority<=this._linkMatchers[d].priority)return void this._linkMatchers.splice(d+1,0,f);this._linkMatchers.splice(0,0,f)}else this._linkMatchers.push(f)},u.prototype.deregisterLinkMatcher=function(f){for(var d=0;d<this._linkMatchers.length;d++)if(this._linkMatchers[d].id===f)return this._linkMatchers.splice(d,1),!0;return!1},u.prototype._doLinkifyRow=function(f,d,a){for(var s,o=this,l=new RegExp(a.regex.source,(a.regex.flags||"")+"g"),p=-1,g=function(){var A=s[typeof a.matchIndex!="number"?0:a.matchIndex];if(!A)return T._logService.debug("match found without corresponding matchIndex",s,a),"break";if(p=d.indexOf(A,p+1),l.lastIndex=p+A.length,p<0)return"break";var B=T._bufferService.buffer.stringIndexToBufferIndex(f,p);if(B[0]<0)return"break";var D=T._bufferService.buffer.lines.get(B[0]);if(!D)return"break";var R=D.getFg(B[1]),E=R?R>>9&511:void 0;a.validationCallback?a.validationCallback(A,function(I){o._rowsTimeoutId||I&&o._addLink(B[1],B[0]-o._bufferService.buffer.ydisp,A,a,E)}):T._addLink(B[1],B[0]-T._bufferService.buffer.ydisp,A,a,E)},T=this;(s=l.exec(d))!==null&&g()!=="break";);},u.prototype._addLink=function(f,d,a,s,o){var l=this;if(this._mouseZoneManager&&this._element){var p=this._unicodeService.getStringCellWidth(a),g=f%this._bufferService.cols,T=d+Math.floor(f/this._bufferService.cols),A=(g+p)%this._bufferService.cols,B=T+Math.floor((g+p)/this._bufferService.cols);A===0&&(A=this._bufferService.cols,B--),this._mouseZoneManager.add(new C(g+1,T+1,A+1,B+1,function(D){if(s.handler)return s.handler(D,a);var R=window.open();R?(R.opener=null,R.location.href=a):console.warn("Opening link blocked as opener could not be cleared")},function(){l._onShowLinkUnderline.fire(l._createLinkHoverEvent(g,T,A,B,o)),l._element.classList.add("xterm-cursor-pointer")},function(D){l._onLinkTooltip.fire(l._createLinkHoverEvent(g,T,A,B,o)),s.hoverTooltipCallback&&s.hoverTooltipCallback(D,a,{start:{x:g,y:T},end:{x:A,y:B}})},function(){l._onHideLinkUnderline.fire(l._createLinkHoverEvent(g,T,A,B,o)),l._element.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()},function(D){return!s.willLinkActivate||s.willLinkActivate(D,a)}))}},u.prototype._createLinkHoverEvent=function(f,d,a,s,o){return{x1:f,y1:d,x2:a,y2:s,cols:this._bufferService.cols,fg:o}},u._timeBeforeLatency=200,u=_([b(0,v.IBufferService),b(1,v.ILogService),b(2,v.IUnicodeService)],u)}();h.Linkifier=y;var C=function(u,f,d,a,s,o,l,p,g){this.x1=u,this.y1=f,this.x2=d,this.y2=a,this.clickCallback=s,this.hoverCallback=o,this.tooltipCallback=l,this.leaveCallback=p,this.willLinkActivate=g};h.MouseZone=C},6465:function(J,h,x){var _,b=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),S=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},v=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Linkifier2=void 0;var y=x(2585),C=x(8460),u=x(844),f=x(3656),d=function(a){function s(o){var l=a.call(this)||this;return l._bufferService=o,l._linkProviders=[],l._linkCacheDisposables=[],l._isMouseOut=!0,l._activeLine=-1,l._onShowLinkUnderline=l.register(new C.EventEmitter),l._onHideLinkUnderline=l.register(new C.EventEmitter),l.register((0,u.getDisposeArrayDisposable)(l._linkCacheDisposables)),l}return b(s,a),Object.defineProperty(s.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),s.prototype.registerLinkProvider=function(o){var l=this;return this._linkProviders.push(o),{dispose:function(){var p=l._linkProviders.indexOf(o);p!==-1&&l._linkProviders.splice(p,1)}}},s.prototype.attachToDom=function(o,l,p){var g=this;this._element=o,this._mouseService=l,this._renderService=p,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",function(){g._isMouseOut=!0,g._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},s.prototype._onMouseMove=function(o){if(this._lastMouseEvent=o,this._element&&this._mouseService){var l=this._positionFromMouseEvent(o,this._element,this._mouseService);if(l){this._isMouseOut=!1;for(var p=o.composedPath(),g=0;g<p.length;g++){var T=p[g];if(T.classList.contains("xterm"))break;if(T.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._onHover(l),this._lastBufferCell=l)}}},s.prototype._onHover=function(o){if(this._activeLine!==o.y)return this._clearCurrentLink(),void this._askForLink(o,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))},s.prototype._askForLink=function(o,l){var p,g=this;this._activeProviderReplies&&l||((p=this._activeProviderReplies)===null||p===void 0||p.forEach(function(A){A==null||A.forEach(function(B){B.link.dispose&&B.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);var T=!1;this._linkProviders.forEach(function(A,B){var D;l?((D=g._activeProviderReplies)===null||D===void 0?void 0:D.get(B))&&(T=g._checkLinkProviderResult(B,o,T)):A.provideLinks(o.y,function(R){var E,I;if(!g._isMouseOut){var w=R==null?void 0:R.map(function(U){return{link:U}});(E=g._activeProviderReplies)===null||E===void 0||E.set(B,w),T=g._checkLinkProviderResult(B,o,T),((I=g._activeProviderReplies)===null||I===void 0?void 0:I.size)===g._linkProviders.length&&g._removeIntersectingLinks(o.y,g._activeProviderReplies)}})})},s.prototype._removeIntersectingLinks=function(o,l){for(var p=new Set,g=0;g<l.size;g++){var T=l.get(g);if(T)for(var A=0;A<T.length;A++)for(var B=T[A],D=B.link.range.start.y<o?0:B.link.range.start.x,R=B.link.range.end.y>o?this._bufferService.cols:B.link.range.end.x,E=D;E<=R;E++){if(p.has(E)){T.splice(A--,1);break}p.add(E)}}},s.prototype._checkLinkProviderResult=function(o,l,p){var g,T=this;if(!this._activeProviderReplies)return p;for(var A=this._activeProviderReplies.get(o),B=!1,D=0;D<o;D++)this._activeProviderReplies.has(D)&&!this._activeProviderReplies.get(D)||(B=!0);if(!B&&A){var R=A.find(function(I){return T._linkAtPosition(I.link,l)});R&&(p=!0,this._handleNewLink(R))}if(this._activeProviderReplies.size===this._linkProviders.length&&!p)for(D=0;D<this._activeProviderReplies.size;D++){var E=(g=this._activeProviderReplies.get(D))===null||g===void 0?void 0:g.find(function(I){return T._linkAtPosition(I.link,l)});if(E){p=!0,this._handleNewLink(E);break}}return p},s.prototype._onClick=function(o){if(this._element&&this._mouseService&&this._currentLink){var l=this._positionFromMouseEvent(o,this._element,this._mouseService);l&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(o,this._currentLink.link.text)}},s.prototype._clearCurrentLink=function(o,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!l||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))},s.prototype._handleNewLink=function(o){var l=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var p=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);p&&this._linkAtPosition(o.link,p)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:function(){var g,T;return(T=(g=l._currentLink)===null||g===void 0?void 0:g.state)===null||T===void 0?void 0:T.decorations.pointerCursor},set:function(g){var T,A;((T=l._currentLink)===null||T===void 0?void 0:T.state)&&l._currentLink.state.decorations.pointerCursor!==g&&(l._currentLink.state.decorations.pointerCursor=g,l._currentLink.state.isHovered&&((A=l._element)===null||A===void 0||A.classList.toggle("xterm-cursor-pointer",g)))}},underline:{get:function(){var g,T;return(T=(g=l._currentLink)===null||g===void 0?void 0:g.state)===null||T===void 0?void 0:T.decorations.underline},set:function(g){var T,A,B;((T=l._currentLink)===null||T===void 0?void 0:T.state)&&((B=(A=l._currentLink)===null||A===void 0?void 0:A.state)===null||B===void 0?void 0:B.decorations.underline)!==g&&(l._currentLink.state.decorations.underline=g,l._currentLink.state.isHovered&&l._fireUnderlineEvent(o.link,g))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(g){var T=g.start===0?0:g.start+1+l._bufferService.buffer.ydisp;l._clearCurrentLink(T,g.end+1+l._bufferService.buffer.ydisp)})))}},s.prototype._linkHover=function(o,l,p){var g;((g=this._currentLink)===null||g===void 0?void 0:g.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(p,l.text)},s.prototype._fireUnderlineEvent=function(o,l){var p=o.range,g=this._bufferService.buffer.ydisp,T=this._createLinkUnderlineEvent(p.start.x-1,p.start.y-g-1,p.end.x,p.end.y-g-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(T)},s.prototype._linkLeave=function(o,l,p){var g;((g=this._currentLink)===null||g===void 0?void 0:g.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(p,l.text)},s.prototype._linkAtPosition=function(o,l){var p=o.range.start.y===o.range.end.y,g=o.range.start.y<l.y,T=o.range.end.y>l.y;return(p&&o.range.start.x<=l.x&&o.range.end.x>=l.x||g&&o.range.end.x>=l.x||T&&o.range.start.x<=l.x||g&&T)&&o.range.start.y<=l.y&&o.range.end.y>=l.y},s.prototype._positionFromMouseEvent=function(o,l,p){var g=p.getCoords(o,l,this._bufferService.cols,this._bufferService.rows);if(g)return{x:g[0],y:g[1]+this._bufferService.buffer.ydisp}},s.prototype._createLinkUnderlineEvent=function(o,l,p,g,T){return{x1:o,y1:l,x2:p,y2:g,cols:this._bufferService.cols,fg:T}},S([v(0,y.IBufferService)],s)}(u.Disposable);h.Linkifier2=d},9042:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.tooMuchOutput=h.promptLabel=void 0,h.promptLabel="Terminal input",h.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(J,h,x){var _,b=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),S=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},v=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZoneManager=void 0;var y=x(844),C=x(3656),u=x(4725),f=x(2585),d=function(a){function s(o,l,p,g,T,A){var B=a.call(this)||this;return B._element=o,B._screenElement=l,B._bufferService=p,B._mouseService=g,B._selectionService=T,B._optionsService=A,B._zones=[],B._areZonesActive=!1,B._lastHoverCoords=[void 0,void 0],B._initialSelectionLength=0,B.register((0,C.addDisposableDomListener)(B._element,"mousedown",function(D){return B._onMouseDown(D)})),B._mouseMoveListener=function(D){return B._onMouseMove(D)},B._mouseLeaveListener=function(D){return B._onMouseLeave(D)},B._clickListener=function(D){return B._onClick(D)},B}return b(s,a),s.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},s.prototype.add=function(o){this._zones.push(o),this._zones.length===1&&this._activate()},s.prototype.clearAll=function(o,l){if(this._zones.length!==0){o&&l||(o=0,l=this._bufferService.rows-1);for(var p=0;p<this._zones.length;p++){var g=this._zones[p];(g.y1>o&&g.y1<=l+1||g.y2>o&&g.y2<=l+1||g.y1<o&&g.y2>l+1)&&(this._currentZone&&this._currentZone===g&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(p--,1))}this._zones.length===0&&this._deactivate()}},s.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},s.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},s.prototype._onMouseMove=function(o){this._lastHoverCoords[0]===o.pageX&&this._lastHoverCoords[1]===o.pageY||(this._onHover(o),this._lastHoverCoords=[o.pageX,o.pageY])},s.prototype._onHover=function(o){var l=this,p=this._findZoneEventAt(o);p!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),p&&(this._currentZone=p,p.hoverCallback&&p.hoverCallback(o),this._tooltipTimeout=window.setTimeout(function(){return l._onTooltip(o)},this._optionsService.options.linkTooltipHoverDuration)))},s.prototype._onTooltip=function(o){this._tooltipTimeout=void 0;var l=this._findZoneEventAt(o);l==null||l.tooltipCallback(o)},s.prototype._onMouseDown=function(o){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var l=this._findZoneEventAt(o);(l==null?void 0:l.willLinkActivate(o))&&(o.preventDefault(),o.stopImmediatePropagation())}},s.prototype._onMouseLeave=function(o){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},s.prototype._onClick=function(o){var l=this._findZoneEventAt(o),p=this._getSelectionLength();l&&p===this._initialSelectionLength&&(l.clickCallback(o),o.preventDefault(),o.stopImmediatePropagation())},s.prototype._getSelectionLength=function(){var o=this._selectionService.selectionText;return o?o.length:0},s.prototype._findZoneEventAt=function(o){var l=this._mouseService.getCoords(o,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(l)for(var p=l[0],g=l[1],T=0;T<this._zones.length;T++){var A=this._zones[T];if(A.y1===A.y2){if(g===A.y1&&p>=A.x1&&p<A.x2)return A}else if(g===A.y1&&p>=A.x1||g===A.y2&&p<A.x2||g>A.y1&&g<A.y2)return A}},S([v(2,f.IBufferService),v(3,u.IMouseService),v(4,u.ISelectionService),v(5,f.IOptionsService)],s)}(y.Disposable);h.MouseZoneManager=d},6193:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderDebouncer=void 0;var x=function(){function _(b){this._renderCallback=b}return _.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},_.prototype.refresh=function(b,S,v){var y=this;this._rowCount=v,b=b!==void 0?b:0,S=S!==void 0?S:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,b):b,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,S):S,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return y._innerRefresh()}))},_.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var b=Math.max(this._rowStart,0),S=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(b,S)}},_}();h.RenderDebouncer=x},5596:function(J,h,x){var _,b=this&&this.__extends||(_=function(v,y){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,u){C.__proto__=u}||function(C,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(C[f]=u[f])},_(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function C(){this.constructor=v}_(v,y),v.prototype=y===null?Object.create(y):(C.prototype=y.prototype,new C)});Object.defineProperty(h,"__esModule",{value:!0}),h.ScreenDprMonitor=void 0;var S=function(v){function y(){var C=v!==null&&v.apply(this,arguments)||this;return C._currentDevicePixelRatio=window.devicePixelRatio,C}return b(y,v),y.prototype.setListener=function(C){var u=this;this._listener&&this.clearListener(),this._listener=C,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},y.prototype.dispose=function(){v.prototype.dispose.call(this),this.clearListener()},y.prototype._updateDpr=function(){var C;this._outerListener&&((C=this._resolutionMediaMatchList)===null||C===void 0||C.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},y.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},y}(x(844).Disposable);h.ScreenDprMonitor=S},3236:function(J,h,x){var _,b=this&&this.__extends||(_=function(de,F){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,K){z.__proto__=K}||function(z,K){for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&(z[re]=K[re])},_(de,F)},function(de,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function z(){this.constructor=de}_(de,F),de.prototype=F===null?Object.create(F):(z.prototype=F.prototype,new z)});Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;var S=x(2950),v=x(1680),y=x(3614),C=x(2584),u=x(5435),f=x(3525),d=x(3551),a=x(9312),s=x(6114),o=x(3656),l=x(9042),p=x(357),g=x(6954),T=x(4567),A=x(1296),B=x(7399),D=x(8460),R=x(8437),E=x(5680),I=x(3230),w=x(4725),U=x(428),N=x(8934),L=x(6465),O=x(5114),W=x(8969),Y=x(4774),ue=x(4269),le=x(5941),we=typeof window!="undefined"?window.document:null,xe=function(de){function F(z){z===void 0&&(z={});var K=de.call(this,z)||this;return K.browser=s,K._keyDownHandled=!1,K._keyPressHandled=!1,K._unprocessedDeadKey=!1,K._onCursorMove=new D.EventEmitter,K._onKey=new D.EventEmitter,K._onRender=new D.EventEmitter,K._onSelectionChange=new D.EventEmitter,K._onTitleChange=new D.EventEmitter,K._onBell=new D.EventEmitter,K._onFocus=new D.EventEmitter,K._onBlur=new D.EventEmitter,K._onA11yCharEmitter=new D.EventEmitter,K._onA11yTabEmitter=new D.EventEmitter,K._setup(),K.linkifier=K._instantiationService.createInstance(d.Linkifier),K.linkifier2=K.register(K._instantiationService.createInstance(L.Linkifier2)),K.register(K._inputHandler.onRequestBell(function(){return K.bell()})),K.register(K._inputHandler.onRequestRefreshRows(function(re,$){return K.refresh(re,$)})),K.register(K._inputHandler.onRequestSendFocus(function(){return K._reportFocus()})),K.register(K._inputHandler.onRequestReset(function(){return K.reset()})),K.register(K._inputHandler.onRequestWindowsOptionsReport(function(re){return K._reportWindowsOptions(re)})),K.register(K._inputHandler.onColor(function(re){return K._handleColorEvent(re)})),K.register((0,D.forwardEvent)(K._inputHandler.onCursorMove,K._onCursorMove)),K.register((0,D.forwardEvent)(K._inputHandler.onTitleChange,K._onTitleChange)),K.register((0,D.forwardEvent)(K._inputHandler.onA11yChar,K._onA11yCharEmitter)),K.register((0,D.forwardEvent)(K._inputHandler.onA11yTab,K._onA11yTabEmitter)),K.register(K._bufferService.onResize(function(re){return K._afterResize(re.cols,re.rows)})),K}return b(F,de),Object.defineProperty(F.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),F.prototype._handleColorEvent=function(z){var K,re;if(this._colorManager){for(var $=0,be=z;$<be.length;$++){var Te=be[$],Ke=void 0,Me="";switch(Te.index){case 256:Ke="foreground",Me="10";break;case 257:Ke="background",Me="11";break;case 258:Ke="cursor",Me="12";break;default:Ke="ansi",Me="4;"+Te.index}if(Ke)switch(Te.type){case 0:var He=Y.color.toColorRGB(Ke==="ansi"?this._colorManager.colors.ansi[Te.index]:this._colorManager.colors[Ke]);this.coreService.triggerDataEvent(C.C0.ESC+"]"+Me+";"+(0,le.toRgbString)(He)+C.C0.BEL);break;case 1:Ke==="ansi"?this._colorManager.colors.ansi[Te.index]=Y.rgba.toColor.apply(Y.rgba,Te.color):this._colorManager.colors[Ke]=Y.rgba.toColor.apply(Y.rgba,Te.color);break;case 2:this._colorManager.restoreColor(Te.index)}}(K=this._renderService)===null||K===void 0||K.setColors(this._colorManager.colors),(re=this.viewport)===null||re===void 0||re.onThemeChange(this._colorManager.colors)}},F.prototype.dispose=function(){var z,K,re;this._isDisposed||(de.prototype.dispose.call(this),(z=this._renderService)===null||z===void 0||z.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(re=(K=this.element)===null||K===void 0?void 0:K.parentNode)===null||re===void 0||re.removeChild(this.element))},F.prototype._setup=function(){de.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(F.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),F.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},F.prototype._updateOptions=function(z){var K,re,$,be;switch(de.prototype._updateOptions.call(this,z),z){case"fontFamily":case"fontSize":(K=this._renderService)===null||K===void 0||K.clear(),(re=this._charSizeService)===null||re===void 0||re.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":($=this.viewport)===null||$===void 0||$.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new T.AccessibilityManager(this,this._renderService)):((be=this._accessibilityManager)===null||be===void 0||be.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},F.prototype._onTextAreaFocus=function(z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(C.C0.ESC+"[I"),this.updateCursorStyle(z),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},F.prototype.blur=function(){var z;return(z=this.textarea)===null||z===void 0?void 0:z.blur()},F.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(C.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},F.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var z=this.buffer.ybase+this.buffer.y,K=this.buffer.lines.get(z);if(K){var re=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.actualCellHeight,be=K.getWidth(re),Te=this._renderService.dimensions.actualCellWidth*be,Ke=this.buffer.y*this._renderService.dimensions.actualCellHeight,Me=re*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Me+"px",this.textarea.style.top=Ke+"px",this.textarea.style.width=Te+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}}},F.prototype._initGlobal=function(){var z=this;this._bindKeys(),this.register((0,o.addDisposableDomListener)(this.element,"copy",function(re){z.hasSelection()&&(0,y.copyHandler)(re,z._selectionService)}));var K=function(re){return(0,y.handlePasteEvent)(re,z.textarea,z.coreService)};this.register((0,o.addDisposableDomListener)(this.textarea,"paste",K)),this.register((0,o.addDisposableDomListener)(this.element,"paste",K)),s.isFirefox?this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(re){re.button===2&&(0,y.rightClickHandler)(re,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)})):this.register((0,o.addDisposableDomListener)(this.element,"contextmenu",function(re){(0,y.rightClickHandler)(re,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)})),s.isLinux&&this.register((0,o.addDisposableDomListener)(this.element,"auxclick",function(re){re.button===1&&(0,y.moveTextAreaUnderMouseCursor)(re,z.textarea,z.screenElement)}))},F.prototype._bindKeys=function(){var z=this;this.register((0,o.addDisposableDomListener)(this.textarea,"keyup",function(K){return z._keyUp(K)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keydown",function(K){return z._keyDown(K)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"keypress",function(K){return z._keyPress(K)},!0)),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionstart",function(){return z._compositionHelper.compositionstart()})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionupdate",function(K){return z._compositionHelper.compositionupdate(K)})),this.register((0,o.addDisposableDomListener)(this.textarea,"compositionend",function(){return z._compositionHelper.compositionend()})),this.register((0,o.addDisposableDomListener)(this.textarea,"input",function(K){return z._inputEvent(K)},!0)),this.register(this.onRender(function(){return z._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(K){return z._queueLinkification(K.start,K.end)}))},F.prototype.open=function(z){var K=this;if(!z)throw new Error("Terminal requires a parent element.");z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=z.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),z.appendChild(this.element);var re=we.createDocumentFragment();this._viewportElement=we.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),re.appendChild(this._viewportElement),this._viewportScrollArea=we.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=we.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=we.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),re.appendChild(this.screenElement),this.textarea=we.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,o.addDisposableDomListener)(this.textarea,"focus",function(Te){return K._onTextAreaFocus(Te)})),this.register((0,o.addDisposableDomListener)(this.textarea,"blur",function(){return K._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var $=this._instantiationService.createInstance(O.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,$),this._charSizeService=this._instantiationService.createInstance(U.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new E.ColorManager(we,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Te){return K._colorManager.onOptionsChange(Te)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(ue.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService);var be=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(I.RenderService,be,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Te){return K._onRender.fire(Te)})),this.onResize(function(Te){return K._renderService.resize(Te.cols,Te.rows)}),this._compositionView=we.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(S.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(re),this._soundService=this._instantiationService.createInstance(p.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(N.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(v.Viewport,function(Te){return K.scrollLines(Te,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return K.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){K._renderService.onCursorMove(),K._syncTextArea()})),this.register(this.onResize(function(){return K._renderService.onResize(K.cols,K.rows)})),this.register(this.onBlur(function(){return K._renderService.onBlur()})),this.register(this.onFocus(function(){return K._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return K.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(a.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Te){return K.scrollLines(Te.amount,Te.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return K._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Te){return K._renderService.onSelectionChanged(Te.start,Te.end,Te.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Te){K.textarea.value=Te,K.textarea.focus(),K.textarea.select()})),this.register(this._onScroll.event(function(Te){K.viewport.syncScrollArea(),K._selectionService.refresh()})),this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",function(){return K._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(g.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return K._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,o.addDisposableDomListener)(this.element,"mousedown",function(Te){return K._selectionService.onMouseDown(Te)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new T.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},F.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(A.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},F.prototype._setTheme=function(z){var K,re,$;this._theme=z,(K=this._colorManager)===null||K===void 0||K.setTheme(z),(re=this._renderService)===null||re===void 0||re.setColors(this._colorManager.colors),($=this.viewport)===null||$===void 0||$.onThemeChange(this._colorManager.colors)},F.prototype.bindMouse=function(){var z=this,K=this,re=this.element;function $(ge){var Xe,Ve,Ge=K._mouseService.getRawByteCoords(ge,K.screenElement,K.cols,K.rows);if(!Ge)return!1;switch(ge.overrideType||ge.type){case"mousemove":Ve=32,ge.buttons===void 0?(Xe=3,ge.button!==void 0&&(Xe=ge.button<3?ge.button:3)):Xe=1&ge.buttons?0:4&ge.buttons?1:2&ge.buttons?2:3;break;case"mouseup":Ve=0,Xe=ge.button<3?ge.button:3;break;case"mousedown":Ve=1,Xe=ge.button<3?ge.button:3;break;case"wheel":ge.deltaY!==0&&(Ve=ge.deltaY<0?0:1),Xe=4;break;default:return!1}return!(Ve===void 0||Xe===void 0||Xe>4)&&K.coreMouseService.triggerMouseEvent({col:Ge.x-33,row:Ge.y-33,button:Xe,action:Ve,ctrl:ge.ctrlKey,alt:ge.altKey,shift:ge.shiftKey})}var be={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Te=function(ge){return $(ge),ge.buttons||(z._document.removeEventListener("mouseup",be.mouseup),be.mousedrag&&z._document.removeEventListener("mousemove",be.mousedrag)),z.cancel(ge)},Ke=function(ge){return $(ge),z.cancel(ge,!0)},Me=function(ge){ge.buttons&&$(ge)},He=function(ge){ge.buttons||$(ge)};this.register(this.coreMouseService.onProtocolChange(function(ge){ge?(z.optionsService.options.logLevel==="debug"&&z._logService.debug("Binding to mouse events:",z.coreMouseService.explainEvents(ge)),z.element.classList.add("enable-mouse-events"),z._selectionService.disable()):(z._logService.debug("Unbinding from mouse events."),z.element.classList.remove("enable-mouse-events"),z._selectionService.enable()),8&ge?be.mousemove||(re.addEventListener("mousemove",He),be.mousemove=He):(re.removeEventListener("mousemove",be.mousemove),be.mousemove=null),16&ge?be.wheel||(re.addEventListener("wheel",Ke,{passive:!1}),be.wheel=Ke):(re.removeEventListener("wheel",be.wheel),be.wheel=null),2&ge?be.mouseup||(be.mouseup=Te):(z._document.removeEventListener("mouseup",be.mouseup),be.mouseup=null),4&ge?be.mousedrag||(be.mousedrag=Me):(z._document.removeEventListener("mousemove",be.mousedrag),be.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,o.addDisposableDomListener)(re,"mousedown",function(ge){if(ge.preventDefault(),z.focus(),z.coreMouseService.areMouseEventsActive&&!z._selectionService.shouldForceSelection(ge))return $(ge),be.mouseup&&z._document.addEventListener("mouseup",be.mouseup),be.mousedrag&&z._document.addEventListener("mousemove",be.mousedrag),z.cancel(ge)})),this.register((0,o.addDisposableDomListener)(re,"wheel",function(ge){if(!be.wheel){if(!z.buffer.hasScrollback){var Xe=z.viewport.getLinesScrolled(ge);if(Xe===0)return;for(var Ve=C.C0.ESC+(z.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ge.deltaY<0?"A":"B"),Ge="",ze=0;ze<Math.abs(Xe);ze++)Ge+=Ve;return z.coreService.triggerDataEvent(Ge,!0),z.cancel(ge,!0)}return z.viewport.onWheel(ge)?z.cancel(ge):void 0}},{passive:!1})),this.register((0,o.addDisposableDomListener)(re,"touchstart",function(ge){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchStart(ge),z.cancel(ge)},{passive:!0})),this.register((0,o.addDisposableDomListener)(re,"touchmove",function(ge){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchMove(ge)?void 0:z.cancel(ge)},{passive:!1}))},F.prototype.refresh=function(z,K){var re;(re=this._renderService)===null||re===void 0||re.refreshRows(z,K)},F.prototype._queueLinkification=function(z,K){var re;(re=this.linkifier)===null||re===void 0||re.linkifyRows(z,K)},F.prototype.updateCursorStyle=function(z){var K;((K=this._selectionService)===null||K===void 0?void 0:K.shouldColumnSelect(z))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},F.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},F.prototype.scrollLines=function(z,K,re){re===void 0&&(re=0),de.prototype.scrollLines.call(this,z,K,re),this.refresh(0,this.rows-1)},F.prototype.paste=function(z){(0,y.paste)(z,this.textarea,this.coreService)},F.prototype.attachCustomKeyEventHandler=function(z){this._customKeyEventHandler=z},F.prototype.registerLinkMatcher=function(z,K,re){var $=this.linkifier.registerLinkMatcher(z,K,re);return this.refresh(0,this.rows-1),$},F.prototype.deregisterLinkMatcher=function(z){this.linkifier.deregisterLinkMatcher(z)&&this.refresh(0,this.rows-1)},F.prototype.registerLinkProvider=function(z){return this.linkifier2.registerLinkProvider(z)},F.prototype.registerCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var K=this._characterJoinerService.register(z);return this.refresh(0,this.rows-1),K},F.prototype.deregisterCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(z)&&this.refresh(0,this.rows-1)},Object.defineProperty(F.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),F.prototype.addMarker=function(z){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+z)},F.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},F.prototype.select=function(z,K,re){this._selectionService.setSelection(z,K,re)},F.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},F.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},F.prototype.clearSelection=function(){var z;(z=this._selectionService)===null||z===void 0||z.clearSelection()},F.prototype.selectAll=function(){var z;(z=this._selectionService)===null||z===void 0||z.selectAll()},F.prototype.selectLines=function(z,K){var re;(re=this._selectionService)===null||re===void 0||re.selectLines(z,K)},F.prototype._keyDown=function(z){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(!this._compositionHelper.keydown(z))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;z.key!=="Dead"&&z.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var K=(0,B.evaluateKeyboardEvent)(z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(z),K.type===3||K.type===2){var re=this.rows-1;return this.scrollLines(K.type===2?-re:re),this.cancel(z,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,z)||(K.cancel&&this.cancel(z,!0),!K.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==C.C0.ETX&&K.key!==C.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(z,!0))))},F.prototype._isThirdLevelShift=function(z,K){var re=z.isMac&&!this.options.macOptionIsMeta&&K.altKey&&!K.ctrlKey&&!K.metaKey||z.isWindows&&K.altKey&&K.ctrlKey&&!K.metaKey||z.isWindows&&K.getModifierState("AltGraph");return K.type==="keypress"?re:re&&(!K.keyCode||K.keyCode>47)},F.prototype._keyUp=function(z){this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1||(function(K){return K.keyCode===16||K.keyCode===17||K.keyCode===18}(z)||this.focus(),this.updateCursorStyle(z),this._keyPressHandled=!1)},F.prototype._keyPress=function(z){var K;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(this.cancel(z),z.charCode)K=z.charCode;else if(z.which===null||z.which===void 0)K=z.keyCode;else{if(z.which===0||z.charCode===0)return!1;K=z.which}return!(!K||(z.altKey||z.ctrlKey||z.metaKey)&&!this._isThirdLevelShift(this.browser,z)||(K=String.fromCharCode(K),this._onKey.fire({key:K,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(K,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},F.prototype._inputEvent=function(z){if(z.data&&z.inputType==="insertText"&&!z.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var K=z.data;return this.coreService.triggerDataEvent(K,!0),this.cancel(z),!0}return!1},F.prototype.bell=function(){var z;this._soundBell()&&((z=this._soundService)===null||z===void 0||z.playBellSound()),this._onBell.fire()},F.prototype.resize=function(z,K){z!==this.cols||K!==this.rows?de.prototype.resize.call(this,z,K):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},F.prototype._afterResize=function(z,K){var re,$;(re=this._charSizeService)===null||re===void 0||re.measure(),($=this.viewport)===null||$===void 0||$.syncScrollArea(!0)},F.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(R.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},F.prototype.reset=function(){var z,K;this.options.rows=this.rows,this.options.cols=this.cols;var re=this._customKeyEventHandler;this._setup(),de.prototype.reset.call(this),(z=this._selectionService)===null||z===void 0||z.reset(),this._customKeyEventHandler=re,this.refresh(0,this.rows-1),(K=this.viewport)===null||K===void 0||K.syncScrollArea()},F.prototype.clearTextureAtlas=function(){var z;(z=this._renderService)===null||z===void 0||z.clearTextureAtlas()},F.prototype._reportFocus=function(){var z;((z=this.element)===null||z===void 0?void 0:z.classList.contains("focus"))?this.coreService.triggerDataEvent(C.C0.ESC+"[I"):this.coreService.triggerDataEvent(C.C0.ESC+"[O")},F.prototype._reportWindowsOptions=function(z){if(this._renderService)switch(z){case u.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var K=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),re=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(C.C0.ESC+"[4;"+re+";"+K+"t");break;case u.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var $=this._renderService.dimensions.scaledCellWidth.toFixed(0),be=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(C.C0.ESC+"[6;"+be+";"+$+"t")}},F.prototype.cancel=function(z,K){if(this.options.cancelEvents||K)return z.preventDefault(),z.stopPropagation(),!1},F.prototype._visualBell=function(){return!1},F.prototype._soundBell=function(){return this.options.bellStyle==="sound"},F}(W.CoreTerminal);h.Terminal=xe},9924:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TimeBasedDebouncer=void 0;var x=function(){function _(b,S){S===void 0&&(S=1e3),this._renderCallback=b,this._debounceThresholdMS=S,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return _.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},_.prototype.refresh=function(b,S,v){var y=this;this._rowCount=v,b=b!==void 0?b:0,S=S!==void 0?S:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,b):b,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,S):S;var C=Date.now();if(C-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=C,this._innerRefresh();else if(!this._additionalRefreshRequested){var u=C-this._lastRefreshMs,f=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){y._lastRefreshMs=Date.now(),y._innerRefresh(),y._additionalRefreshRequested=!1,y._refreshTimeoutID=void 0},f)}},_.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var b=Math.max(this._rowStart,0),S=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(b,S)}},_}();h.TimeBasedDebouncer=x},1680:function(J,h,x){var _,b=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),S=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},v=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Viewport=void 0;var y=x(844),C=x(3656),u=x(4725),f=x(2585),d=function(a){function s(o,l,p,g,T,A,B,D){var R=a.call(this)||this;return R._scrollLines=o,R._viewportElement=l,R._scrollArea=p,R._element=g,R._bufferService=T,R._optionsService=A,R._charSizeService=B,R._renderService=D,R.scrollBarWidth=0,R._currentRowHeight=0,R._currentScaledCellHeight=0,R._lastRecordedBufferLength=0,R._lastRecordedViewportHeight=0,R._lastRecordedBufferHeight=0,R._lastTouchY=0,R._lastScrollTop=0,R._lastHadScrollBar=!1,R._wheelPartialScroll=0,R._refreshAnimationFrame=null,R._ignoreNextScrollEvent=!1,R.scrollBarWidth=R._viewportElement.offsetWidth-R._scrollArea.offsetWidth||15,R._lastHadScrollBar=!0,R.register((0,C.addDisposableDomListener)(R._viewportElement,"scroll",R._onScroll.bind(R))),R._activeBuffer=R._bufferService.buffer,R.register(R._bufferService.buffers.onBufferActivate(function(E){return R._activeBuffer=E.activeBuffer})),R._renderDimensions=R._renderService.dimensions,R.register(R._renderService.onDimensionsChange(function(E){return R._renderDimensions=E})),setTimeout(function(){return R.syncScrollArea()},0),R}return b(s,a),s.prototype.onThemeChange=function(o){this._viewportElement.style.backgroundColor=o.background.css},s.prototype._refresh=function(o){var l=this;if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return l._innerRefresh()}))},s.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var p=window.getComputedStyle(this._element),g=parseInt(p.paddingLeft)+parseInt(p.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?g:0)).toString()+"px",this._refreshAnimationFrame=null},s.prototype.syncScrollArea=function(o){if(o===void 0&&(o=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(o):this._refresh(o)},s.prototype._onScroll=function(o){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(l)}},s.prototype._bubbleScroll=function(o,l){var p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&p<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)},s.prototype.onWheel=function(o){var l=this._getPixelsScrolled(o);return l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(o,l))},s.prototype._getPixelsScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var l=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l},s.prototype.getLinesScrolled=function(o){if(o.deltaY===0||o.shiftKey)return 0;var l=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l},s.prototype._applyScrollModifier=function(o,l){var p=this._optionsService.options.fastScrollModifier;return p==="alt"&&l.altKey||p==="ctrl"&&l.ctrlKey||p==="shift"&&l.shiftKey?o*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:o*this._optionsService.options.scrollSensitivity},s.prototype.onTouchStart=function(o){this._lastTouchY=o.touches[0].pageY},s.prototype.onTouchMove=function(o){var l=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(o,l))},S([v(4,f.IBufferService),v(5,f.IOptionsService),v(6,u.ICharSizeService),v(7,u.IRenderService)],s)}(y.Disposable);h.Viewport=d},2950:function(J,h,x){var _=this&&this.__decorate||function(C,u,f,d){var a,s=arguments.length,o=s<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,u,f,d);else for(var l=C.length-1;l>=0;l--)(a=C[l])&&(o=(s<3?a(o):s>3?a(u,f,o):a(u,f))||o);return s>3&&o&&Object.defineProperty(u,f,o),o},b=this&&this.__param||function(C,u){return function(f,d){u(f,d,C)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CompositionHelper=void 0;var S=x(4725),v=x(2585),y=function(){function C(u,f,d,a,s,o){this._textarea=u,this._compositionView=f,this._bufferService=d,this._optionsService=a,this._coreService=s,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(C.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),C.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},C.prototype.compositionupdate=function(u){var f=this;this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(function(){f._compositionPosition.end=f._textarea.value.length},0)},C.prototype.compositionend=function(){this._finalizeComposition(!0)},C.prototype.keydown=function(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},C.prototype._finalizeComposition=function(u){var f=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){var d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(f._isSendingComposition){f._isSendingComposition=!1;var s;d.start+=f._dataAlreadySent.length,(s=f._isComposing?f._textarea.value.substring(d.start,d.end):f._textarea.value.substring(d.start)).length>0&&f._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;var a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}},C.prototype._handleAnyTextareaChanges=function(){var u=this,f=this._textarea.value;setTimeout(function(){if(!u._isComposing){var d=u._textarea.value.replace(f,"");d.length>0&&(u._dataAlreadySent=d,u._coreService.triggerDataEvent(d,!0))}},0)},C.prototype.updateCompositionElements=function(u){var f=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.actualCellHeight,s=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=d*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var l=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}u||setTimeout(function(){return f.updateCompositionElements(!0)},0)}},_([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,v.ICoreService),b(5,S.IRenderService)],C)}();h.CompositionHelper=y},9806:(J,h)=>{function x(_,b){var S=b.getBoundingClientRect();return[_.clientX-S.left,_.clientY-S.top]}Object.defineProperty(h,"__esModule",{value:!0}),h.getRawByteCoords=h.getCoords=h.getCoordsRelativeToElement=void 0,h.getCoordsRelativeToElement=x,h.getCoords=function(_,b,S,v,y,C,u,f){if(y){var d=x(_,b);if(d)return d[0]=Math.ceil((d[0]+(f?C/2:0))/C),d[1]=Math.ceil(d[1]/u),d[0]=Math.min(Math.max(d[0],1),S+(f?1:0)),d[1]=Math.min(Math.max(d[1],1),v),d}},h.getRawByteCoords=function(_){if(_)return{x:_[0]+32,y:_[1]+32}}},9504:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.moveToCellSequence=void 0;var _=x(2584);function b(f,d,a,s){var o=f-S(a,f),l=d-S(a,d),p=Math.abs(o-l)-function(g,T,A){for(var B=0,D=g-S(A,g),R=T-S(A,T),E=0;E<Math.abs(D-R);E++){var I=v(g,T)==="A"?-1:1,w=A.buffer.lines.get(D+I*E);(w==null?void 0:w.isWrapped)&&B++}return B}(f,d,a);return u(p,C(v(f,d),s))}function S(f,d){for(var a=0,s=f.buffer.lines.get(d),o=s==null?void 0:s.isWrapped;o&&d>=0&&d<f.rows;)a++,o=(s=f.buffer.lines.get(--d))==null?void 0:s.isWrapped;return a}function v(f,d){return f>d?"A":"B"}function y(f,d,a,s,o,l){for(var p=f,g=d,T="";p!==a||g!==s;)p+=o?1:-1,o&&p>l.cols-1?(T+=l.buffer.translateBufferLineToString(g,!1,f,p),p=0,f=0,g++):!o&&p<0&&(T+=l.buffer.translateBufferLineToString(g,!1,0,f+1),f=p=l.cols-1,g--);return T+l.buffer.translateBufferLineToString(g,!1,f,p)}function C(f,d){var a=d?"O":"[";return _.C0.ESC+a+f}function u(f,d){f=Math.floor(f);for(var a="",s=0;s<f;s++)a+=d;return a}h.moveToCellSequence=function(f,d,a,s){var o,l=a.buffer.x,p=a.buffer.y;if(!a.buffer.hasScrollback)return function(T,A,B,D,R,E){return b(A,D,R,E).length===0?"":u(y(T,A,T,A-S(R,A),!1,R).length,C("D",E))}(l,p,0,d,a,s)+b(p,d,a,s)+function(T,A,B,D,R,E){var I;I=b(A,D,R,E).length>0?D-S(R,D):A;var w=D,U=function(N,L,O,W,Y,ue){var le;return le=b(O,W,Y,ue).length>0?W-S(Y,W):L,N<O&&le<=W||N>=O&&le<W?"C":"D"}(T,A,B,D,R,E);return u(y(T,I,B,w,U==="C",R).length,C(U,E))}(l,p,f,d,a,s);if(p===d)return o=l>f?"D":"C",u(Math.abs(l-f),C(o,s));o=p>d?"D":"C";var g=Math.abs(p-d);return u(function(T,A){return A.cols-T}(p>d?f:l,a)+(g-1)*a.cols+1+((p>d?l:f)-1),C(o,s))}},1546:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseRenderLayer=void 0;var _=x(643),b=x(8803),S=x(1420),v=x(3734),y=x(1752),C=x(4774),u=x(9631),f=x(8978),d=function(){function a(s,o,l,p,g,T,A,B){this._container=s,this._alpha=p,this._colors=g,this._rendererId=T,this._bufferService=A,this._optionsService=B,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+o+"-layer"),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return a.prototype.dispose=function(){var s;(0,u.removeElementFromParent)(this._canvas),(s=this._charAtlas)===null||s===void 0||s.dispose()},a.prototype._initCanvas=function(){this._ctx=(0,y.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},a.prototype.onOptionsChanged=function(){},a.prototype.onBlur=function(){},a.prototype.onFocus=function(){},a.prototype.onCursorMove=function(){},a.prototype.onGridChanged=function(s,o){},a.prototype.onSelectionChanged=function(s,o,l){l===void 0&&(l=!1)},a.prototype.setColors=function(s){this._refreshCharAtlas(s)},a.prototype._setTransparency=function(s){if(s!==this._alpha){var o=this._canvas;this._alpha=s,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,o),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},a.prototype._refreshCharAtlas=function(s){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,S.acquireCharAtlas)(this._optionsService.options,this._rendererId,s,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},a.prototype.resize=function(s){this._scaledCellWidth=s.scaledCellWidth,this._scaledCellHeight=s.scaledCellHeight,this._scaledCharWidth=s.scaledCharWidth,this._scaledCharHeight=s.scaledCharHeight,this._scaledCharLeft=s.scaledCharLeft,this._scaledCharTop=s.scaledCharTop,this._canvas.width=s.scaledCanvasWidth,this._canvas.height=s.scaledCanvasHeight,this._canvas.style.width=s.canvasWidth+"px",this._canvas.style.height=s.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},a.prototype.clearTextureAtlas=function(){var s;(s=this._charAtlas)===null||s===void 0||s.clear()},a.prototype._fillCells=function(s,o,l,p){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,p*this._scaledCellHeight)},a.prototype._fillMiddleLineAtCells=function(s,o,l){l===void 0&&(l=1);var p=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-p-window.devicePixelRatio,l*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillBottomLineAtCells=function(s,o,l){l===void 0&&(l=1),this._ctx.fillRect(s*this._scaledCellWidth,(o+1)*this._scaledCellHeight-window.devicePixelRatio-1,l*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillLeftLineAtCell=function(s,o,l){this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,window.devicePixelRatio*l,this._scaledCellHeight)},a.prototype._strokeRectAtCell=function(s,o,l,p){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(s*this._scaledCellWidth+window.devicePixelRatio/2,o*this._scaledCellHeight+window.devicePixelRatio/2,l*this._scaledCellWidth-window.devicePixelRatio,p*this._scaledCellHeight-window.devicePixelRatio)},a.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},a.prototype._clearCells=function(s,o,l,p){this._alpha?this._ctx.clearRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,p*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(s*this._scaledCellWidth,o*this._scaledCellHeight,l*this._scaledCellWidth,p*this._scaledCellHeight))},a.prototype._fillCharTrueColor=function(s,o,l){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=b.TEXT_BASELINE,this._clipRow(l);var p=!1;this._optionsService.options.customGlyphs!==!1&&(p=(0,f.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),p||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},a.prototype._drawChars=function(s,o,l){var p,g,T,A=this._getContrastColor(s);A||s.isFgRGB()||s.isBgRGB()?this._drawUncachedChars(s,o,l,A):(s.isInverse()?(g=s.isBgDefault()?b.INVERTED_DEFAULT_COLOR:s.getBgColor(),T=s.isFgDefault()?b.INVERTED_DEFAULT_COLOR:s.getFgColor()):(T=s.isBgDefault()?_.DEFAULT_COLOR:s.getBgColor(),g=s.isFgDefault()?_.DEFAULT_COLOR:s.getFgColor()),g+=this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&g<8?8:0,this._currentGlyphIdentifier.chars=s.getChars()||_.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=s.getCode()||_.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=T,this._currentGlyphIdentifier.fg=g,this._currentGlyphIdentifier.bold=!!s.isBold(),this._currentGlyphIdentifier.dim=!!s.isDim(),this._currentGlyphIdentifier.italic=!!s.isItalic(),((p=this._charAtlas)===null||p===void 0?void 0:p.draw(this._ctx,this._currentGlyphIdentifier,o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(s,o,l))},a.prototype._drawUncachedChars=function(s,o,l,p){if(this._ctx.save(),this._ctx.font=this._getFont(!!s.isBold(),!!s.isItalic()),this._ctx.textBaseline=b.TEXT_BASELINE,s.isInverse())if(p)this._ctx.fillStyle=p.css;else if(s.isBgDefault())this._ctx.fillStyle=C.color.opaque(this._colors.background).css;else if(s.isBgRGB())this._ctx.fillStyle="rgb("+v.AttributeData.toColorRGB(s.getBgColor()).join(",")+")";else{var g=s.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&g<8&&(g+=8),this._ctx.fillStyle=this._colors.ansi[g].css}else if(p)this._ctx.fillStyle=p.css;else if(s.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(s.isFgRGB())this._ctx.fillStyle="rgb("+v.AttributeData.toColorRGB(s.getFgColor()).join(",")+")";else{var T=s.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&s.isBold()&&T<8&&(T+=8),this._ctx.fillStyle=this._colors.ansi[T].css}this._clipRow(l),s.isDim()&&(this._ctx.globalAlpha=b.DIM_OPACITY);var A=!1;this._optionsService.options.customGlyphs!==!1&&(A=(0,f.tryDrawCustomChar)(this._ctx,s.getChars(),o*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),A||this._ctx.fillText(s.getChars(),o*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},a.prototype._clipRow=function(s){this._ctx.beginPath(),this._ctx.rect(0,s*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},a.prototype._getFont=function(s,o){return(o?"italic":"")+" "+(s?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},a.prototype._getContrastColor=function(s){if(this._optionsService.options.minimumContrastRatio!==1){var o=this._colors.contrastCache.getColor(s.bg,s.fg);if(o!==void 0)return o||void 0;var l=s.getFgColor(),p=s.getFgColorMode(),g=s.getBgColor(),T=s.getBgColorMode(),A=!!s.isInverse(),B=!!s.isInverse();if(A){var D=l;l=g,g=D;var R=p;p=T,T=R}var E=this._resolveBackgroundRgba(T,g,A),I=this._resolveForegroundRgba(p,l,A,B),w=C.rgba.ensureContrastRatio(E,I,this._optionsService.options.minimumContrastRatio);if(w){var U={css:C.channels.toCss(w>>24&255,w>>16&255,w>>8&255),rgba:w};return this._colors.contrastCache.setColor(s.bg,s.fg,U),U}this._colors.contrastCache.setColor(s.bg,s.fg,null)}},a.prototype._resolveBackgroundRgba=function(s,o,l){switch(s){case 16777216:case 33554432:return this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return l?this._colors.foreground.rgba:this._colors.background.rgba}},a.prototype._resolveForegroundRgba=function(s,o,l,p){switch(s){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&p&&o<8&&(o+=8),this._colors.ansi[o].rgba;case 50331648:return o<<8;default:return l?this._colors.background.rgba:this._colors.foreground.rgba}},a}();h.BaseRenderLayer=d},2512:function(J,h,x){var _,b=this&&this.__extends||(_=function(o,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(p[T]=g[T])},_(o,l)},function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=o}_(o,l),o.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}),S=this&&this.__decorate||function(o,l,p,g){var T,A=arguments.length,B=A<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(o,l,p,g);else for(var D=o.length-1;D>=0;D--)(T=o[D])&&(B=(A<3?T(B):A>3?T(l,p,B):T(l,p))||B);return A>3&&B&&Object.defineProperty(l,p,B),B},v=this&&this.__param||function(o,l){return function(p,g){l(p,g,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CursorRenderLayer=void 0;var y=x(1546),C=x(511),u=x(2585),f=x(4725),d=600,a=function(o){function l(p,g,T,A,B,D,R,E,I){var w=o.call(this,p,"cursor",g,!0,T,A,D,R)||this;return w._onRequestRedraw=B,w._coreService=E,w._coreBrowserService=I,w._cell=new C.CellData,w._state={x:0,y:0,isFocused:!1,style:"",width:0},w._cursorRenderers={bar:w._renderBarCursor.bind(w),block:w._renderBlockCursor.bind(w),underline:w._renderUnderlineCursor.bind(w)},w}return b(l,o),l.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),o.prototype.dispose.call(this)},l.prototype.resize=function(p){o.prototype.resize.call(this,p),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},l.prototype.reset=function(){var p;this._clearCursor(),(p=this._cursorBlinkStateManager)===null||p===void 0||p.restartBlinkAnimation(),this.onOptionsChanged()},l.prototype.onBlur=function(){var p;(p=this._cursorBlinkStateManager)===null||p===void 0||p.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onFocus=function(){var p;(p=this._cursorBlinkStateManager)===null||p===void 0||p.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onOptionsChanged=function(){var p,g=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(this._coreBrowserService.isFocused,function(){g._render(!0)})):((p=this._cursorBlinkStateManager)===null||p===void 0||p.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onCursorMove=function(){var p;(p=this._cursorBlinkStateManager)===null||p===void 0||p.restartBlinkAnimation()},l.prototype.onGridChanged=function(p,g){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},l.prototype._render=function(p){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var g=this._bufferService.buffer.ybase+this._bufferService.buffer.y,T=g-this._bufferService.buffer.ydisp;if(T<0||T>=this._bufferService.rows)this._clearCursor();else{var A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(g).loadCell(A,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var B=this._optionsService.options.cursorStyle;return B&&B!=="block"?this._cursorRenderers[B](A,T,this._cell):this._renderBlurCursor(A,T,this._cell),this._ctx.restore(),this._state.x=A,this._state.y=T,this._state.isFocused=!1,this._state.style=B,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===A&&this._state.y===T&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](A,T,this._cell),this._ctx.restore(),this._state.x=A,this._state.y=T,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},l.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},l.prototype._renderBarCursor=function(p,g,T){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(p,g,this._optionsService.options.cursorWidth),this._ctx.restore()},l.prototype._renderBlockCursor=function(p,g,T){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(p,g,T.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(T,p,g),this._ctx.restore()},l.prototype._renderUnderlineCursor=function(p,g,T){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(p,g),this._ctx.restore()},l.prototype._renderBlurCursor=function(p,g,T){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(p,g,T.getWidth(),1),this._ctx.restore()},S([v(5,u.IBufferService),v(6,u.IOptionsService),v(7,u.ICoreService),v(8,f.ICoreBrowserService)],l)}(y.BaseRenderLayer);h.CursorRenderLayer=a;var s=function(){function o(l,p){this._renderCallback=p,this.isCursorVisible=!0,l&&this._restartInterval()}return Object.defineProperty(o.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),o.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.restartBlinkAnimation=function(){var l=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=void 0})))},o.prototype._restartInterval=function(l){var p=this;l===void 0&&(l=d),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(p._animationTimeRestarted){var g=d-(Date.now()-p._animationTimeRestarted);if(p._animationTimeRestarted=void 0,g>0)return void p._restartInterval(g)}p.isCursorVisible=!1,p._animationFrame=window.requestAnimationFrame(function(){p._renderCallback(),p._animationFrame=void 0}),p._blinkInterval=window.setInterval(function(){if(p._animationTimeRestarted){var T=d-(Date.now()-p._animationTimeRestarted);return p._animationTimeRestarted=void 0,void p._restartInterval(T)}p.isCursorVisible=!p.isCursorVisible,p._animationFrame=window.requestAnimationFrame(function(){p._renderCallback(),p._animationFrame=void 0})},d)},l)},o.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},o.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},o}()},8978:(J,h,x)=>{var _,b,S,v,y,C,u,f,d,a,s,o,l,p,g,T,A,B,D,R,E,I,w,U,N,L,O,W,Y,ue,le,we,xe,de,F,z,K,re,$,be,Te,Ke,Me,He,ge,Xe,Ve,Ge,ze,te,ve,oe,We,Ee,De,Ae,Ne,Fe,Et,ht,rr,Oe,vr,dt,Be,Qe,_r,rt,Wt,ot,gr,Ct,cr,ir,Wr,xr,pt,qr,kr,qt,Lr,jr,zr,Er,nr,Tt,wt,Ur,Zt,yr,mr,It,Ht,xt,Tr,Mr,Ze,Le,jt,Ar,_t,Ue,zt,ur,Rr,he,H,G,ce,pe,Ie,je,Se,lt,Mt,Or,Jt,Ri,Oi,Kr,pi,Di,vi,Pi,Bi,Ii,Hi,nn;Object.defineProperty(h,"__esModule",{value:!0}),h.tryDrawCustomChar=h.boxDrawingDefinitions=h.blockElementDefinitions=void 0;var An=x(1752);h.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Rn={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};h.boxDrawingDefinitions={"\u2500":(_={},_[1]="M0,.5 L1,.5",_),"\u2501":(b={},b[3]="M0,.5 L1,.5",b),"\u2502":(S={},S[1]="M.5,0 L.5,1",S),"\u2503":(v={},v[3]="M.5,0 L.5,1",v),"\u250C":(y={},y[1]="M0.5,1 L.5,.5 L1,.5",y),"\u250F":(C={},C[3]="M0.5,1 L.5,.5 L1,.5",C),"\u2510":(u={},u[1]="M0,.5 L.5,.5 L.5,1",u),"\u2513":(f={},f[3]="M0,.5 L.5,.5 L.5,1",f),"\u2514":(d={},d[1]="M.5,0 L.5,.5 L1,.5",d),"\u2517":(a={},a[3]="M.5,0 L.5,.5 L1,.5",a),"\u2518":(s={},s[1]="M.5,0 L.5,.5 L0,.5",s),"\u251B":(o={},o[3]="M.5,0 L.5,.5 L0,.5",o),"\u251C":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L1,.5",l),"\u2523":(p={},p[3]="M.5,0 L.5,1 M.5,.5 L1,.5",p),"\u2524":(g={},g[1]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"\u252B":(T={},T[3]="M.5,0 L.5,1 M.5,.5 L0,.5",T),"\u252C":(A={},A[1]="M0,.5 L1,.5 M.5,.5 L.5,1",A),"\u2533":(B={},B[3]="M0,.5 L1,.5 M.5,.5 L.5,1",B),"\u2534":(D={},D[1]="M0,.5 L1,.5 M.5,.5 L.5,0",D),"\u253B":(R={},R[3]="M0,.5 L1,.5 M.5,.5 L.5,0",R),"\u253C":(E={},E[1]="M0,.5 L1,.5 M.5,0 L.5,1",E),"\u254B":(I={},I[3]="M0,.5 L1,.5 M.5,0 L.5,1",I),"\u2574":(w={},w[1]="M.5,.5 L0,.5",w),"\u2578":(U={},U[3]="M.5,.5 L0,.5",U),"\u2575":(N={},N[1]="M.5,.5 L.5,0",N),"\u2579":(L={},L[3]="M.5,.5 L.5,0",L),"\u2576":(O={},O[1]="M.5,.5 L1,.5",O),"\u257A":(W={},W[3]="M.5,.5 L1,.5",W),"\u2577":(Y={},Y[1]="M.5,.5 L.5,1",Y),"\u257B":(ue={},ue[3]="M.5,.5 L.5,1",ue),"\u2550":(le={},le[1]=function(ae,se){return"M0,"+(.5-se)+" L1,"+(.5-se)+" M0,"+(.5+se)+" L1,"+(.5+se)},le),"\u2551":(we={},we[1]=function(ae,se){return"M"+(.5-ae)+",0 L"+(.5-ae)+",1 M"+(.5+ae)+",0 L"+(.5+ae)+",1"},we),"\u2552":(xe={},xe[1]=function(ae,se){return"M.5,1 L.5,"+(.5-se)+" L1,"+(.5-se)+" M.5,"+(.5+se)+" L1,"+(.5+se)},xe),"\u2553":(de={},de[1]=function(ae,se){return"M"+(.5-ae)+",1 L"+(.5-ae)+",.5 L1,.5 M"+(.5+ae)+",.5 L"+(.5+ae)+",1"},de),"\u2554":(F={},F[1]=function(ae,se){return"M1,"+(.5-se)+" L"+(.5-ae)+","+(.5-se)+" L"+(.5-ae)+",1 M1,"+(.5+se)+" L"+(.5+ae)+","+(.5+se)+" L"+(.5+ae)+",1"},F),"\u2555":(z={},z[1]=function(ae,se){return"M0,"+(.5-se)+" L.5,"+(.5-se)+" L.5,1 M0,"+(.5+se)+" L.5,"+(.5+se)},z),"\u2556":(K={},K[1]=function(ae,se){return"M"+(.5+ae)+",1 L"+(.5+ae)+",.5 L0,.5 M"+(.5-ae)+",.5 L"+(.5-ae)+",1"},K),"\u2557":(re={},re[1]=function(ae,se){return"M0,"+(.5+se)+" L"+(.5-ae)+","+(.5+se)+" L"+(.5-ae)+",1 M0,"+(.5-se)+" L"+(.5+ae)+","+(.5-se)+" L"+(.5+ae)+",1"},re),"\u2558":($={},$[1]=function(ae,se){return"M.5,0 L.5,"+(.5+se)+" L1,"+(.5+se)+" M.5,"+(.5-se)+" L1,"+(.5-se)},$),"\u2559":(be={},be[1]=function(ae,se){return"M1,.5 L"+(.5-ae)+",.5 L"+(.5-ae)+",0 M"+(.5+ae)+",.5 L"+(.5+ae)+",0"},be),"\u255A":(Te={},Te[1]=function(ae,se){return"M1,"+(.5-se)+" L"+(.5+ae)+","+(.5-se)+" L"+(.5+ae)+",0 M1,"+(.5+se)+" L"+(.5-ae)+","+(.5+se)+" L"+(.5-ae)+",0"},Te),"\u255B":(Ke={},Ke[1]=function(ae,se){return"M0,"+(.5+se)+" L.5,"+(.5+se)+" L.5,0 M0,"+(.5-se)+" L.5,"+(.5-se)},Ke),"\u255C":(Me={},Me[1]=function(ae,se){return"M0,.5 L"+(.5+ae)+",.5 L"+(.5+ae)+",0 M"+(.5-ae)+",.5 L"+(.5-ae)+",0"},Me),"\u255D":(He={},He[1]=function(ae,se){return"M0,"+(.5-se)+" L"+(.5-ae)+","+(.5-se)+" L"+(.5-ae)+",0 M0,"+(.5+se)+" L"+(.5+ae)+","+(.5+se)+" L"+(.5+ae)+",0"},He),"\u255E":(ge={},ge[1]=function(ae,se){return"M.5,0 L.5,1 M.5,"+(.5-se)+" L1,"+(.5-se)+" M.5,"+(.5+se)+" L1,"+(.5+se)},ge),"\u255F":(Xe={},Xe[1]=function(ae,se){return"M"+(.5-ae)+",0 L"+(.5-ae)+",1 M"+(.5+ae)+",0 L"+(.5+ae)+",1 M"+(.5+ae)+",.5 L1,.5"},Xe),"\u2560":(Ve={},Ve[1]=function(ae,se){return"M"+(.5-ae)+",0 L"+(.5-ae)+",1 M1,"+(.5+se)+" L"+(.5+ae)+","+(.5+se)+" L"+(.5+ae)+",1 M1,"+(.5-se)+" L"+(.5+ae)+","+(.5-se)+" L"+(.5+ae)+",0"},Ve),"\u2561":(Ge={},Ge[1]=function(ae,se){return"M.5,0 L.5,1 M0,"+(.5-se)+" L.5,"+(.5-se)+" M0,"+(.5+se)+" L.5,"+(.5+se)},Ge),"\u2562":(ze={},ze[1]=function(ae,se){return"M0,.5 L"+(.5-ae)+",.5 M"+(.5-ae)+",0 L"+(.5-ae)+",1 M"+(.5+ae)+",0 L"+(.5+ae)+",1"},ze),"\u2563":(te={},te[1]=function(ae,se){return"M"+(.5+ae)+",0 L"+(.5+ae)+",1 M0,"+(.5+se)+" L"+(.5-ae)+","+(.5+se)+" L"+(.5-ae)+",1 M0,"+(.5-se)+" L"+(.5-ae)+","+(.5-se)+" L"+(.5-ae)+",0"},te),"\u2564":(ve={},ve[1]=function(ae,se){return"M0,"+(.5-se)+" L1,"+(.5-se)+" M0,"+(.5+se)+" L1,"+(.5+se)+" M.5,"+(.5+se)+" L.5,1"},ve),"\u2565":(oe={},oe[1]=function(ae,se){return"M0,.5 L1,.5 M"+(.5-ae)+",.5 L"+(.5-ae)+",1 M"+(.5+ae)+",.5 L"+(.5+ae)+",1"},oe),"\u2566":(We={},We[1]=function(ae,se){return"M0,"+(.5-se)+" L1,"+(.5-se)+" M0,"+(.5+se)+" L"+(.5-ae)+","+(.5+se)+" L"+(.5-ae)+",1 M1,"+(.5+se)+" L"+(.5+ae)+","+(.5+se)+" L"+(.5+ae)+",1"},We),"\u2567":(Ee={},Ee[1]=function(ae,se){return"M.5,0 L.5,"+(.5-se)+" M0,"+(.5-se)+" L1,"+(.5-se)+" M0,"+(.5+se)+" L1,"+(.5+se)},Ee),"\u2568":(De={},De[1]=function(ae,se){return"M0,.5 L1,.5 M"+(.5-ae)+",.5 L"+(.5-ae)+",0 M"+(.5+ae)+",.5 L"+(.5+ae)+",0"},De),"\u2569":(Ae={},Ae[1]=function(ae,se){return"M0,"+(.5+se)+" L1,"+(.5+se)+" M0,"+(.5-se)+" L"+(.5-ae)+","+(.5-se)+" L"+(.5-ae)+",0 M1,"+(.5-se)+" L"+(.5+ae)+","+(.5-se)+" L"+(.5+ae)+",0"},Ae),"\u256A":(Ne={},Ne[1]=function(ae,se){return"M.5,0 L.5,1 M0,"+(.5-se)+" L1,"+(.5-se)+" M0,"+(.5+se)+" L1,"+(.5+se)},Ne),"\u256B":(Fe={},Fe[1]=function(ae,se){return"M0,.5 L1,.5 M"+(.5-ae)+",0 L"+(.5-ae)+",1 M"+(.5+ae)+",0 L"+(.5+ae)+",1"},Fe),"\u256C":(Et={},Et[1]=function(ae,se){return"M0,"+(.5+se)+" L"+(.5-ae)+","+(.5+se)+" L"+(.5-ae)+",1 M1,"+(.5+se)+" L"+(.5+ae)+","+(.5+se)+" L"+(.5+ae)+",1 M0,"+(.5-se)+" L"+(.5-ae)+","+(.5-se)+" L"+(.5-ae)+",0 M1,"+(.5-se)+" L"+(.5+ae)+","+(.5-se)+" L"+(.5+ae)+",0"},Et),"\u2571":(ht={},ht[1]="M1,0 L0,1",ht),"\u2572":(rr={},rr[1]="M0,0 L1,1",rr),"\u2573":(Oe={},Oe[1]="M1,0 L0,1 M0,0 L1,1",Oe),"\u257C":(vr={},vr[1]="M.5,.5 L0,.5",vr[3]="M.5,.5 L1,.5",vr),"\u257D":(dt={},dt[1]="M.5,.5 L.5,0",dt[3]="M.5,.5 L.5,1",dt),"\u257E":(Be={},Be[1]="M.5,.5 L1,.5",Be[3]="M.5,.5 L0,.5",Be),"\u257F":(Qe={},Qe[1]="M.5,.5 L.5,1",Qe[3]="M.5,.5 L.5,0",Qe),"\u250D":(_r={},_r[1]="M.5,.5 L.5,1",_r[3]="M.5,.5 L1,.5",_r),"\u250E":(rt={},rt[1]="M.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2511":(Wt={},Wt[1]="M.5,.5 L.5,1",Wt[3]="M.5,.5 L0,.5",Wt),"\u2512":(ot={},ot[1]="M.5,.5 L0,.5",ot[3]="M.5,.5 L.5,1",ot),"\u2515":(gr={},gr[1]="M.5,.5 L.5,0",gr[3]="M.5,.5 L1,.5",gr),"\u2516":(Ct={},Ct[1]="M.5,.5 L1,.5",Ct[3]="M.5,.5 L.5,0",Ct),"\u2519":(cr={},cr[1]="M.5,.5 L.5,0",cr[3]="M.5,.5 L0,.5",cr),"\u251A":(ir={},ir[1]="M.5,.5 L0,.5",ir[3]="M.5,.5 L.5,0",ir),"\u251D":(Wr={},Wr[1]="M.5,0 L.5,1",Wr[3]="M.5,.5 L1,.5",Wr),"\u251E":(xr={},xr[1]="M0.5,1 L.5,.5 L1,.5",xr[3]="M.5,.5 L.5,0",xr),"\u251F":(pt={},pt[1]="M.5,0 L.5,.5 L1,.5",pt[3]="M.5,.5 L.5,1",pt),"\u2520":(qr={},qr[1]="M.5,.5 L1,.5",qr[3]="M.5,0 L.5,1",qr),"\u2521":(kr={},kr[1]="M.5,.5 L.5,1",kr[3]="M.5,0 L.5,.5 L1,.5",kr),"\u2522":(qt={},qt[1]="M.5,.5 L.5,0",qt[3]="M0.5,1 L.5,.5 L1,.5",qt),"\u2525":(Lr={},Lr[1]="M.5,0 L.5,1",Lr[3]="M.5,.5 L0,.5",Lr),"\u2526":(jr={},jr[1]="M0,.5 L.5,.5 L.5,1",jr[3]="M.5,.5 L.5,0",jr),"\u2527":(zr={},zr[1]="M.5,0 L.5,.5 L0,.5",zr[3]="M.5,.5 L.5,1",zr),"\u2528":(Er={},Er[1]="M.5,.5 L0,.5",Er[3]="M.5,0 L.5,1",Er),"\u2529":(nr={},nr[1]="M.5,.5 L.5,1",nr[3]="M.5,0 L.5,.5 L0,.5",nr),"\u252A":(Tt={},Tt[1]="M.5,.5 L.5,0",Tt[3]="M0,.5 L.5,.5 L.5,1",Tt),"\u252D":(wt={},wt[1]="M0.5,1 L.5,.5 L1,.5",wt[3]="M.5,.5 L0,.5",wt),"\u252E":(Ur={},Ur[1]="M0,.5 L.5,.5 L.5,1",Ur[3]="M.5,.5 L1,.5",Ur),"\u252F":(Zt={},Zt[1]="M.5,.5 L.5,1",Zt[3]="M0,.5 L1,.5",Zt),"\u2530":(yr={},yr[1]="M0,.5 L1,.5",yr[3]="M.5,.5 L.5,1",yr),"\u2531":(mr={},mr[1]="M.5,.5 L1,.5",mr[3]="M0,.5 L.5,.5 L.5,1",mr),"\u2532":(It={},It[1]="M.5,.5 L0,.5",It[3]="M0.5,1 L.5,.5 L1,.5",It),"\u2535":(Ht={},Ht[1]="M.5,0 L.5,.5 L1,.5",Ht[3]="M.5,.5 L0,.5",Ht),"\u2536":(xt={},xt[1]="M.5,0 L.5,.5 L0,.5",xt[3]="M.5,.5 L1,.5",xt),"\u2537":(Tr={},Tr[1]="M.5,.5 L.5,0",Tr[3]="M0,.5 L1,.5",Tr),"\u2538":(Mr={},Mr[1]="M0,.5 L1,.5",Mr[3]="M.5,.5 L.5,0",Mr),"\u2539":(Ze={},Ze[1]="M.5,.5 L1,.5",Ze[3]="M.5,0 L.5,.5 L0,.5",Ze),"\u253A":(Le={},Le[1]="M.5,.5 L0,.5",Le[3]="M.5,0 L.5,.5 L1,.5",Le),"\u253D":(jt={},jt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",jt[3]="M.5,.5 L0,.5",jt),"\u253E":(Ar={},Ar[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ar[3]="M.5,.5 L1,.5",Ar),"\u253F":(_t={},_t[1]="M.5,0 L.5,1",_t[3]="M0,.5 L1,.5",_t),"\u2540":(Ue={},Ue[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ue[3]="M.5,.5 L.5,0",Ue),"\u2541":(zt={},zt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",zt[3]="M.5,.5 L.5,1",zt),"\u2542":(ur={},ur[1]="M0,.5 L1,.5",ur[3]="M.5,0 L.5,1",ur),"\u2543":(Rr={},Rr[1]="M0.5,1 L.5,.5 L1,.5",Rr[3]="M.5,0 L.5,.5 L0,.5",Rr),"\u2544":(he={},he[1]="M0,.5 L.5,.5 L.5,1",he[3]="M.5,0 L.5,.5 L1,.5",he),"\u2545":(H={},H[1]="M.5,0 L.5,.5 L1,.5",H[3]="M0,.5 L.5,.5 L.5,1",H),"\u2546":(G={},G[1]="M.5,0 L.5,.5 L0,.5",G[3]="M0.5,1 L.5,.5 L1,.5",G),"\u2547":(ce={},ce[1]="M.5,.5 L.5,1",ce[3]="M.5,.5 L.5,0 M0,.5 L1,.5",ce),"\u2548":(pe={},pe[1]="M.5,.5 L.5,0",pe[3]="M0,.5 L1,.5 M.5,.5 L.5,1",pe),"\u2549":(Ie={},Ie[1]="M.5,.5 L1,.5",Ie[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ie),"\u254A":(je={},je[1]="M.5,.5 L0,.5",je[3]="M.5,0 L.5,1 M.5,.5 L1,.5",je),"\u254C":(Se={},Se[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Se),"\u254D":(lt={},lt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",lt),"\u2504":(Mt={},Mt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Mt),"\u2505":(Or={},Or[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Or),"\u2508":(Jt={},Jt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Jt),"\u2509":(Ri={},Ri[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ri),"\u254E":(Oi={},Oi[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Oi),"\u254F":(Kr={},Kr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Kr),"\u2506":(pi={},pi[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",pi),"\u2507":(Di={},Di[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Di),"\u250A":(vi={},vi[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vi),"\u250B":(Pi={},Pi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Pi),"\u256D":(Bi={},Bi[1]="C.5,1,.5,.5,1,.5",Bi),"\u256E":(Ii={},Ii[1]="C.5,1,.5,.5,0,.5",Ii),"\u256F":(Hi={},Hi[1]="C.5,0,.5,.5,0,.5",Hi),"\u2570":(nn={},nn[1]="C.5,0,.5,.5,1,.5",nn)},h.tryDrawCustomChar=function(ae,se,hr,_i,gi,st){var or=h.blockElementDefinitions[se];if(or)return function(At,Ut,Dr,Gr,Xr,$r){for(var Rt=0;Rt<Ut.length;Rt++){var Kt=Ut[Rt],it=Xr/8,ct=$r/8;At.fillRect(Dr+Kt.x*it,Gr+Kt.y*ct,Kt.w*it,Kt.h*ct)}}(ae,or,hr,_i,gi,st),!0;var dr=Rn[se];if(dr)return function(At,Ut,Dr,Gr,Xr,$r){var Rt,Kt=fr.get(Ut);Kt||(Kt=new Map,fr.set(Ut,Kt));var it=At.fillStyle;if(typeof it!="string")throw new Error('Unexpected fillStyle type "'+it+'"');var ct=Kt.get(it);if(!ct){var sr=Ut[0].length,Yr=Ut.length,br=document.createElement("canvas");br.width=sr,br.height=Yr;var yi=(0,An.throwIfFalsy)(br.getContext("2d")),Ot=new ImageData(sr,Yr),Pr=void 0,Dt=void 0,ni=void 0,mi=void 0;if(it.startsWith("#"))Pr=parseInt(it.substr(1,2),16),Dt=parseInt(it.substr(3,2),16),ni=parseInt(it.substr(5,2),16),mi=it.length>7&&parseInt(it.substr(7,2),16)||1;else{if(!it.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+it+'" when drawing pattern glyph');Pr=(Rt=it.substring(5,it.length-1).split(",").map(function(so){return parseFloat(so)}))[0],Dt=Rt[1],ni=Rt[2],mi=Rt[3]}for(var Qt=0;Qt<Yr;Qt++)for(var Vr=0;Vr<sr;Vr++)Ot.data[4*(Qt*sr+Vr)]=Pr,Ot.data[4*(Qt*sr+Vr)+1]=Dt,Ot.data[4*(Qt*sr+Vr)+2]=ni,Ot.data[4*(Qt*sr+Vr)+3]=Ut[Qt][Vr]*(255*mi);yi.putImageData(Ot,0,0),ct=(0,An.throwIfFalsy)(At.createPattern(br,null)),Kt.set(it,ct)}At.fillStyle=ct,At.fillRect(Dr,Gr,Xr,$r)}(ae,dr,hr,_i,gi,st),!0;var ii=h.boxDrawingDefinitions[se];return!!ii&&(function(At,Ut,Dr,Gr,Xr,$r){At.strokeStyle=At.fillStyle;for(var Rt=0,Kt=Object.entries(Ut);Rt<Kt.length;Rt++){var it=Kt[Rt],ct=it[0],sr=it[1];At.beginPath(),At.lineWidth=window.devicePixelRatio*Number.parseInt(ct);for(var Yr=0,br=(typeof sr=="function"?sr(.15,.15/$r*Xr):sr).split(" ");Yr<br.length;Yr++){var yi=br[Yr],Ot=yi[0],Pr=oo[Ot];if(Pr){var Dt=yi.substring(1).split(",");Dt[0]&&Dt[1]&&Pr(At,Fi(Dt,Xr,$r,Dr,Gr))}else console.error('Could not find drawing instructions for "'+Ot+'"')}At.stroke(),At.closePath()}}(ae,ii,hr,_i,gi,st),!0)};var fr=new Map;function On(ae,se,hr){return hr===void 0&&(hr=0),Math.max(Math.min(ae,se),hr)}var oo={C:function(ae,se){return ae.bezierCurveTo(se[0],se[1],se[2],se[3],se[4],se[5])},L:function(ae,se){return ae.lineTo(se[0],se[1])},M:function(ae,se){return ae.moveTo(se[0],se[1])}};function Fi(ae,se,hr,_i,gi){var st=ae.map(function(ii){return parseFloat(ii)||parseInt(ii)});if(st.length<2)throw new Error("Too few arguments for instruction");for(var or=0;or<st.length;or+=2)st[or]*=se,st[or]!==0&&(st[or]=On(Math.round(st[or]+.5)-.5,se,0)),st[or]+=_i;for(var dr=1;dr<st.length;dr+=2)st[dr]*=hr,st[dr]!==0&&(st[dr]=On(Math.round(st[dr]+.5)-.5,hr,0)),st[dr]+=gi;return st}},3700:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GridCache=void 0;var x=function(){function _(){this.cache=[]}return _.prototype.resize=function(b,S){for(var v=0;v<b;v++){this.cache.length<=v&&this.cache.push([]);for(var y=this.cache[v].length;y<S;y++)this.cache[v].push(void 0);this.cache[v].length=S}this.cache.length=b},_.prototype.clear=function(){for(var b=0;b<this.cache.length;b++)for(var S=0;S<this.cache[b].length;S++)this.cache[b][S]=void 0},_}();h.GridCache=x},5098:function(J,h,x){var _,b=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),S=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},v=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.LinkRenderLayer=void 0;var y=x(1546),C=x(8803),u=x(2040),f=x(2585),d=function(a){function s(o,l,p,g,T,A,B,D){var R=a.call(this,o,"link",l,!0,p,g,B,D)||this;return T.onShowLinkUnderline(function(E){return R._onShowLinkUnderline(E)}),T.onHideLinkUnderline(function(E){return R._onHideLinkUnderline(E)}),A.onShowLinkUnderline(function(E){return R._onShowLinkUnderline(E)}),A.onHideLinkUnderline(function(E){return R._onHideLinkUnderline(E)}),R}return b(s,a),s.prototype.resize=function(o){a.prototype.resize.call(this,o),this._state=void 0},s.prototype.reset=function(){this._clearCurrentLink()},s.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},s.prototype._onShowLinkUnderline=function(o){if(o.fg===C.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&(0,u.is256Color)(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var l=o.y1+1;l<o.y2;l++)this._fillBottomLineAtCells(0,l,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},s.prototype._onHideLinkUnderline=function(o){this._clearCurrentLink()},S([v(6,f.IBufferService),v(7,f.IOptionsService)],s)}(y.BaseRenderLayer);h.LinkRenderLayer=d},3525:function(J,h,x){var _,b=this&&this.__extends||(_=function(T,A){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,D){B.__proto__=D}||function(B,D){for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(B[R]=D[R])},_(T,A)},function(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function B(){this.constructor=T}_(T,A),T.prototype=A===null?Object.create(A):(B.prototype=A.prototype,new B)}),S=this&&this.__decorate||function(T,A,B,D){var R,E=arguments.length,I=E<3?A:D===null?D=Object.getOwnPropertyDescriptor(A,B):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(T,A,B,D);else for(var w=T.length-1;w>=0;w--)(R=T[w])&&(I=(E<3?R(I):E>3?R(A,B,I):R(A,B))||I);return E>3&&I&&Object.defineProperty(A,B,I),I},v=this&&this.__param||function(T,A){return function(B,D){A(B,D,T)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Renderer=void 0;var y=x(9596),C=x(4149),u=x(2512),f=x(5098),d=x(844),a=x(4725),s=x(2585),o=x(1420),l=x(8460),p=1,g=function(T){function A(B,D,R,E,I,w,U,N){var L=T.call(this)||this;L._colors=B,L._screenElement=D,L._bufferService=w,L._charSizeService=U,L._optionsService=N,L._id=p++,L._onRequestRedraw=new l.EventEmitter;var O=L._optionsService.options.allowTransparency;return L._renderLayers=[I.createInstance(y.TextRenderLayer,L._screenElement,0,L._colors,O,L._id),I.createInstance(C.SelectionRenderLayer,L._screenElement,1,L._colors,L._id),I.createInstance(f.LinkRenderLayer,L._screenElement,2,L._colors,L._id,R,E),I.createInstance(u.CursorRenderLayer,L._screenElement,3,L._colors,L._id,L._onRequestRedraw)],L.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},L._devicePixelRatio=window.devicePixelRatio,L._updateDimensions(),L.onOptionsChanged(),L}return b(A,T),Object.defineProperty(A.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){for(var B=0,D=this._renderLayers;B<D.length;B++)D[B].dispose();T.prototype.dispose.call(this),(0,o.removeTerminalFromCache)(this._id)},A.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},A.prototype.setColors=function(B){this._colors=B;for(var D=0,R=this._renderLayers;D<R.length;D++){var E=R[D];E.setColors(this._colors),E.reset()}},A.prototype.onResize=function(B,D){this._updateDimensions();for(var R=0,E=this._renderLayers;R<E.length;R++)E[R].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},A.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},A.prototype.onBlur=function(){this._runOperation(function(B){return B.onBlur()})},A.prototype.onFocus=function(){this._runOperation(function(B){return B.onFocus()})},A.prototype.onSelectionChanged=function(B,D,R){R===void 0&&(R=!1),this._runOperation(function(E){return E.onSelectionChanged(B,D,R)})},A.prototype.onCursorMove=function(){this._runOperation(function(B){return B.onCursorMove()})},A.prototype.onOptionsChanged=function(){this._runOperation(function(B){return B.onOptionsChanged()})},A.prototype.clear=function(){this._runOperation(function(B){return B.reset()})},A.prototype._runOperation=function(B){for(var D=0,R=this._renderLayers;D<R.length;D++)B(R[D])},A.prototype.renderRows=function(B,D){for(var R=0,E=this._renderLayers;R<E.length;R++)E[R].onGridChanged(B,D)},A.prototype.clearTextureAtlas=function(){for(var B=0,D=this._renderLayers;B<D.length;B++)D[B].clearTextureAtlas()},A.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},S([v(4,s.IInstantiationService),v(5,s.IBufferService),v(6,a.ICharSizeService),v(7,s.IOptionsService)],A)}(d.Disposable);h.Renderer=g},1752:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.throwIfFalsy=void 0,h.throwIfFalsy=function(x){if(!x)throw new Error("value must not be falsy");return x}},4149:function(J,h,x){var _,b=this&&this.__extends||(_=function(f,d){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},_(f,d)},function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function a(){this.constructor=f}_(f,d),f.prototype=d===null?Object.create(d):(a.prototype=d.prototype,new a)}),S=this&&this.__decorate||function(f,d,a,s){var o,l=arguments.length,p=l<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,a):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(f,d,a,s);else for(var g=f.length-1;g>=0;g--)(o=f[g])&&(p=(l<3?o(p):l>3?o(d,a,p):o(d,a))||p);return l>3&&p&&Object.defineProperty(d,a,p),p},v=this&&this.__param||function(f,d){return function(a,s){d(a,s,f)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionRenderLayer=void 0;var y=x(1546),C=x(2585),u=function(f){function d(a,s,o,l,p,g){var T=f.call(this,a,"selection",s,!0,o,l,p,g)||this;return T._clearState(),T}return b(d,f),d.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},d.prototype.resize=function(a){f.prototype.resize.call(this,a),this._clearState()},d.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},d.prototype.onSelectionChanged=function(a,s,o){if(this._didStateChange(a,s,o,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&s){var l=a[1]-this._bufferService.buffer.ydisp,p=s[1]-this._bufferService.buffer.ydisp,g=Math.max(l,0),T=Math.min(p,this._bufferService.rows-1);if(g>=this._bufferService.rows||T<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,o){var A=a[0],B=s[0]-A,D=T-g+1;this._fillCells(A,g,B,D)}else{A=l===g?a[0]:0;var R=g===p?s[0]:this._bufferService.cols;this._fillCells(A,g,R-A,1);var E=Math.max(T-g-1,0);if(this._fillCells(0,g+1,this._bufferService.cols,E),g!==T){var I=p===T?s[0]:this._bufferService.cols;this._fillCells(0,T,I,1)}}this._state.start=[a[0],a[1]],this._state.end=[s[0],s[1]],this._state.columnSelectMode=o,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},d.prototype._didStateChange=function(a,s,o,l){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(s,this._state.end)||o!==this._state.columnSelectMode||l!==this._state.ydisp},d.prototype._areCoordinatesEqual=function(a,s){return!(!a||!s)&&a[0]===s[0]&&a[1]===s[1]},S([v(4,C.IBufferService),v(5,C.IOptionsService)],d)}(y.BaseRenderLayer);h.SelectionRenderLayer=u},9596:function(J,h,x){var _,b=this&&this.__extends||(_=function(p,g){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var B in A)Object.prototype.hasOwnProperty.call(A,B)&&(T[B]=A[B])},_(p,g)},function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function T(){this.constructor=p}_(p,g),p.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}),S=this&&this.__decorate||function(p,g,T,A){var B,D=arguments.length,R=D<3?g:A===null?A=Object.getOwnPropertyDescriptor(g,T):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(p,g,T,A);else for(var E=p.length-1;E>=0;E--)(B=p[E])&&(R=(D<3?B(R):D>3?B(g,T,R):B(g,T))||R);return D>3&&R&&Object.defineProperty(g,T,R),R},v=this&&this.__param||function(p,g){return function(T,A){g(T,A,p)}};Object.defineProperty(h,"__esModule",{value:!0}),h.TextRenderLayer=void 0;var y=x(3700),C=x(1546),u=x(3734),f=x(643),d=x(511),a=x(2585),s=x(4725),o=x(4269),l=function(p){function g(T,A,B,D,R,E,I,w){var U=p.call(this,T,"text",A,D,B,R,E,I)||this;return U._characterJoinerService=w,U._characterWidth=0,U._characterFont="",U._characterOverlapCache={},U._workCell=new d.CellData,U._state=new y.GridCache,U}return b(g,p),g.prototype.resize=function(T){p.prototype.resize.call(this,T);var A=this._getFont(!1,!1);this._characterWidth===T.scaledCharWidth&&this._characterFont===A||(this._characterWidth=T.scaledCharWidth,this._characterFont=A,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},g.prototype.reset=function(){this._state.clear(),this._clearAll()},g.prototype._forEachCell=function(T,A,B){for(var D=T;D<=A;D++)for(var R=D+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.lines.get(R),I=this._characterJoinerService.getJoinedCharacters(R),w=0;w<this._bufferService.cols;w++){E.loadCell(w,this._workCell);var U=this._workCell,N=!1,L=w;if(U.getWidth()!==0){if(I.length>0&&w===I[0][0]){N=!0;var O=I.shift();U=new o.JoinedCellData(this._workCell,E.translateToString(!0,O[0],O[1]),O[1]-O[0]),L=O[1]-1}!N&&this._isOverlapping(U)&&L<E.length-1&&E.getCodePoint(L+1)===f.NULL_CELL_CODE&&(U.content&=-12582913,U.content|=2<<22),B(U,w,D),w=L}}},g.prototype._drawBackground=function(T,A){var B=this,D=this._ctx,R=this._bufferService.cols,E=0,I=0,w=null;D.save(),this._forEachCell(T,A,function(U,N,L){var O=null;U.isInverse()?O=U.isFgDefault()?B._colors.foreground.css:U.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(U.getFgColor()).join(",")+")":B._colors.ansi[U.getFgColor()].css:U.isBgRGB()?O="rgb("+u.AttributeData.toColorRGB(U.getBgColor()).join(",")+")":U.isBgPalette()&&(O=B._colors.ansi[U.getBgColor()].css),w===null&&(E=N,I=L),L!==I?(D.fillStyle=w||"",B._fillCells(E,I,R-E,1),E=N,I=L):w!==O&&(D.fillStyle=w||"",B._fillCells(E,I,N-E,1),E=N,I=L),w=O}),w!==null&&(D.fillStyle=w,this._fillCells(E,I,R-E,1)),D.restore()},g.prototype._drawForeground=function(T,A){var B=this;this._forEachCell(T,A,function(D,R,E){if(!D.isInvisible()&&(B._drawChars(D,R,E),D.isUnderline()||D.isStrikethrough())){if(B._ctx.save(),D.isInverse())if(D.isBgDefault())B._ctx.fillStyle=B._colors.background.css;else if(D.isBgRGB())B._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(D.getBgColor()).join(",")+")";else{var I=D.getBgColor();B._optionsService.options.drawBoldTextInBrightColors&&D.isBold()&&I<8&&(I+=8),B._ctx.fillStyle=B._colors.ansi[I].css}else if(D.isFgDefault())B._ctx.fillStyle=B._colors.foreground.css;else if(D.isFgRGB())B._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(D.getFgColor()).join(",")+")";else{var w=D.getFgColor();B._optionsService.options.drawBoldTextInBrightColors&&D.isBold()&&w<8&&(w+=8),B._ctx.fillStyle=B._colors.ansi[w].css}D.isStrikethrough()&&B._fillMiddleLineAtCells(R,E,D.getWidth()),D.isUnderline()&&B._fillBottomLineAtCells(R,E,D.getWidth()),B._ctx.restore()}})},g.prototype.onGridChanged=function(T,A){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,T,this._bufferService.cols,A-T+1),this._drawBackground(T,A),this._drawForeground(T,A))},g.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},g.prototype._isOverlapping=function(T){if(T.getWidth()!==1||T.getCode()<256)return!1;var A=T.getChars();if(this._characterOverlapCache.hasOwnProperty(A))return this._characterOverlapCache[A];this._ctx.save(),this._ctx.font=this._characterFont;var B=Math.floor(this._ctx.measureText(A).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[A]=B,B},S([v(5,a.IBufferService),v(6,a.IOptionsService),v(7,s.ICharacterJoinerService)],g)}(C.BaseRenderLayer);h.TextRenderLayer=l},9616:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseCharAtlas=void 0;var x=function(){function _(){this._didWarmUp=!1}return _.prototype.dispose=function(){},_.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},_.prototype._doWarmUp=function(){},_.prototype.clear=function(){},_.prototype.beginFrame=function(){},_}();h.BaseCharAtlas=x},1420:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeTerminalFromCache=h.acquireCharAtlas=void 0;var _=x(2040),b=x(1906),S=[];h.acquireCharAtlas=function(v,y,C,u,f){for(var d=(0,_.generateConfig)(u,f,v,C),a=0;a<S.length;a++){var s=(o=S[a]).ownedBy.indexOf(y);if(s>=0){if((0,_.configEquals)(o.config,d))return o.atlas;o.ownedBy.length===1?(o.atlas.dispose(),S.splice(a,1)):o.ownedBy.splice(s,1);break}}for(a=0;a<S.length;a++){var o=S[a];if((0,_.configEquals)(o.config,d))return o.ownedBy.push(y),o.atlas}var l={atlas:new b.DynamicCharAtlas(document,d),config:d,ownedBy:[y]};return S.push(l),l.atlas},h.removeTerminalFromCache=function(v){for(var y=0;y<S.length;y++){var C=S[y].ownedBy.indexOf(v);if(C!==-1){S[y].ownedBy.length===1?(S[y].atlas.dispose(),S.splice(y,1)):S[y].ownedBy.splice(C,1);break}}}},2040:function(J,h,x){var _=this&&this.__spreadArray||function(S,v,y){if(y||arguments.length===2)for(var C,u=0,f=v.length;u<f;u++)!C&&u in v||(C||(C=Array.prototype.slice.call(v,0,u)),C[u]=v[u]);return S.concat(C||Array.prototype.slice.call(v))};Object.defineProperty(h,"__esModule",{value:!0}),h.is256Color=h.configEquals=h.generateConfig=void 0;var b=x(643);h.generateConfig=function(S,v,y,C){var u={foreground:C.foreground,background:C.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:_([],C.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:S,scaledCharHeight:v,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,colors:u}},h.configEquals=function(S,v){for(var y=0;y<S.colors.ansi.length;y++)if(S.colors.ansi[y].rgba!==v.colors.ansi[y].rgba)return!1;return S.devicePixelRatio===v.devicePixelRatio&&S.fontFamily===v.fontFamily&&S.fontSize===v.fontSize&&S.fontWeight===v.fontWeight&&S.fontWeightBold===v.fontWeightBold&&S.allowTransparency===v.allowTransparency&&S.scaledCharWidth===v.scaledCharWidth&&S.scaledCharHeight===v.scaledCharHeight&&S.colors.foreground===v.colors.foreground&&S.colors.background===v.colors.background},h.is256Color=function(S){return S<b.DEFAULT_COLOR}},8803:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CHAR_ATLAS_CELL_SPACING=h.TEXT_BASELINE=h.DIM_OPACITY=h.INVERTED_DEFAULT_COLOR=void 0;var _=x(6114);h.INVERTED_DEFAULT_COLOR=257,h.DIM_OPACITY=.5,h.TEXT_BASELINE=_.isFirefox?"bottom":"ideographic",h.CHAR_ATLAS_CELL_SPACING=1},1906:function(J,h,x){var _,b=this&&this.__extends||(_=function(A,B){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,R){D.__proto__=R}||function(D,R){for(var E in R)Object.prototype.hasOwnProperty.call(R,E)&&(D[E]=R[E])},_(A,B)},function(A,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function D(){this.constructor=A}_(A,B),A.prototype=B===null?Object.create(B):(D.prototype=B.prototype,new D)});Object.defineProperty(h,"__esModule",{value:!0}),h.NoneCharAtlas=h.DynamicCharAtlas=h.getGlyphCacheKey=void 0;var S=x(8803),v=x(9616),y=x(5680),C=x(7001),u=x(6114),f=x(1752),d=x(4774),a=1024,s=1024,o={css:"rgba(0, 0, 0, 0)",rgba:0};function l(A){return A.code<<21|A.bg<<12|A.fg<<3|(A.bold?0:4)+(A.dim?0:2)+(A.italic?0:1)}h.getGlyphCacheKey=l;var p=function(A){function B(D,R){var E=A.call(this)||this;E._config=R,E._drawToCacheCount=0,E._glyphsWaitingOnBitmap=[],E._bitmapCommitTimeout=null,E._bitmap=null,E._cacheCanvas=D.createElement("canvas"),E._cacheCanvas.width=a,E._cacheCanvas.height=s,E._cacheCtx=(0,f.throwIfFalsy)(E._cacheCanvas.getContext("2d",{alpha:!0}));var I=D.createElement("canvas");I.width=E._config.scaledCharWidth,I.height=E._config.scaledCharHeight,E._tmpCtx=(0,f.throwIfFalsy)(I.getContext("2d",{alpha:E._config.allowTransparency})),E._width=Math.floor(a/E._config.scaledCharWidth),E._height=Math.floor(s/E._config.scaledCharHeight);var w=E._width*E._height;return E._cacheMap=new C.LRUMap(w),E._cacheMap.prealloc(w),E}return b(B,A),B.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},B.prototype.beginFrame=function(){this._drawToCacheCount=0},B.prototype.clear=function(){if(this._cacheMap.size>0){var D=this._width*this._height;this._cacheMap=new C.LRUMap(D),this._cacheMap.prealloc(D)}this._cacheCtx.clearRect(0,0,a,s),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},B.prototype.draw=function(D,R,E,I){if(R.code===32)return!0;if(!this._canCache(R))return!1;var w=l(R),U=this._cacheMap.get(w);if(U!=null)return this._drawFromCache(D,U,E,I),!0;if(this._drawToCacheCount<100){var N;N=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var L=this._drawToCache(R,N);return this._cacheMap.set(w,L),this._drawFromCache(D,L,E,I),!0}return!1},B.prototype._canCache=function(D){return D.code<256},B.prototype._toCoordinateX=function(D){return D%this._width*this._config.scaledCharWidth},B.prototype._toCoordinateY=function(D){return Math.floor(D/this._width)*this._config.scaledCharHeight},B.prototype._drawFromCache=function(D,R,E,I){if(!R.isEmpty){var w=this._toCoordinateX(R.index),U=this._toCoordinateY(R.index);D.drawImage(R.inBitmap?this._bitmap:this._cacheCanvas,w,U,this._config.scaledCharWidth,this._config.scaledCharHeight,E,I,this._config.scaledCharWidth,this._config.scaledCharHeight)}},B.prototype._getColorFromAnsiIndex=function(D){return D<this._config.colors.ansi.length?this._config.colors.ansi[D]:y.DEFAULT_ANSI_COLORS[D]},B.prototype._getBackgroundColor=function(D){return this._config.allowTransparency?o:D.bg===S.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:D.bg<256?this._getColorFromAnsiIndex(D.bg):this._config.colors.background},B.prototype._getForegroundColor=function(D){return D.fg===S.INVERTED_DEFAULT_COLOR?d.color.opaque(this._config.colors.background):D.fg<256?this._getColorFromAnsiIndex(D.fg):this._config.colors.foreground},B.prototype._drawToCache=function(D,R){this._drawToCacheCount++,this._tmpCtx.save();var E=this._getBackgroundColor(D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=E.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var I=D.bold?this._config.fontWeightBold:this._config.fontWeight,w=D.italic?"italic":"";this._tmpCtx.font=w+" "+I+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=S.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(D).css,D.dim&&(this._tmpCtx.globalAlpha=S.DIM_OPACITY),this._tmpCtx.fillText(D.chars,0,this._config.scaledCharHeight);var U=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),N=!1;if(this._config.allowTransparency||(N=T(U,E)),N&&D.chars==="_"&&!this._config.allowTransparency)for(var L=1;L<=5&&(this._tmpCtx.fillText(D.chars,0,this._config.scaledCharHeight-L),N=T(U=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),E));L++);this._tmpCtx.restore();var O=this._toCoordinateX(R),W=this._toCoordinateY(R);this._cacheCtx.putImageData(U,O,W);var Y={index:R,isEmpty:N,inBitmap:!1};return this._addGlyphToBitmap(Y),Y},B.prototype._addGlyphToBitmap=function(D){var R=this;!("createImageBitmap"in window)||u.isFirefox||u.isSafari||(this._glyphsWaitingOnBitmap.push(D),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return R._generateBitmap()},100)))},B.prototype._generateBitmap=function(){var D=this,R=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(E){D._bitmap=E;for(var I=0;I<R.length;I++)R[I].inBitmap=!0}),this._bitmapCommitTimeout=null},B}(v.BaseCharAtlas);h.DynamicCharAtlas=p;var g=function(A){function B(D,R){return A.call(this)||this}return b(B,A),B.prototype.draw=function(D,R,E,I){return!1},B}(v.BaseCharAtlas);function T(A,B){for(var D=!0,R=B.rgba>>>24,E=B.rgba>>>16&255,I=B.rgba>>>8&255,w=0;w<A.data.length;w+=4)A.data[w]===R&&A.data[w+1]===E&&A.data[w+2]===I?A.data[w+3]=0:D=!1;return D}h.NoneCharAtlas=g},7001:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LRUMap=void 0;var x=function(){function _(b){this.capacity=b,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return _.prototype._unlinkNode=function(b){var S=b.prev,v=b.next;b===this._head&&(this._head=v),b===this._tail&&(this._tail=S),S!==null&&(S.next=v),v!==null&&(v.prev=S)},_.prototype._appendNode=function(b){var S=this._tail;S!==null&&(S.next=b),b.prev=S,b.next=null,this._tail=b,this._head===null&&(this._head=b)},_.prototype.prealloc=function(b){for(var S=this._nodePool,v=0;v<b;v++)S.push({prev:null,next:null,key:null,value:null})},_.prototype.get=function(b){var S=this._map[b];return S!==void 0?(this._unlinkNode(S),this._appendNode(S),S.value):null},_.prototype.peekValue=function(b){var S=this._map[b];return S!==void 0?S.value:null},_.prototype.peek=function(){var b=this._head;return b===null?null:b.value},_.prototype.set=function(b,S){var v=this._map[b];if(v!==void 0)v=this._map[b],this._unlinkNode(v),v.value=S;else if(this.size>=this.capacity)v=this._head,this._unlinkNode(v),delete this._map[v.key],v.key=b,v.value=S,this._map[b]=v;else{var y=this._nodePool;y.length>0?((v=y.pop()).key=b,v.value=S):v={prev:null,next:null,key:b,value:S},this._map[b]=v,this.size++}this._appendNode(v)},_}();h.LRUMap=x},1296:function(J,h,x){var _,b=this&&this.__extends||(_=function(D,R){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,I){E.__proto__=I}||function(E,I){for(var w in I)Object.prototype.hasOwnProperty.call(I,w)&&(E[w]=I[w])},_(D,R)},function(D,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=D}_(D,R),D.prototype=R===null?Object.create(R):(E.prototype=R.prototype,new E)}),S=this&&this.__decorate||function(D,R,E,I){var w,U=arguments.length,N=U<3?R:I===null?I=Object.getOwnPropertyDescriptor(R,E):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(D,R,E,I);else for(var L=D.length-1;L>=0;L--)(w=D[L])&&(N=(U<3?w(N):U>3?w(R,E,N):w(R,E))||N);return U>3&&N&&Object.defineProperty(R,E,N),N},v=this&&this.__param||function(D,R){return function(E,I){R(E,I,D)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRenderer=void 0;var y=x(3787),C=x(8803),u=x(844),f=x(4725),d=x(2585),a=x(8460),s=x(4774),o=x(9631),l="xterm-dom-renderer-owner-",p="xterm-fg-",g="xterm-bg-",T="xterm-focus",A=1,B=function(D){function R(E,I,w,U,N,L,O,W,Y,ue){var le=D.call(this)||this;return le._colors=E,le._element=I,le._screenElement=w,le._viewportElement=U,le._linkifier=N,le._linkifier2=L,le._charSizeService=W,le._optionsService=Y,le._bufferService=ue,le._terminalClass=A++,le._rowElements=[],le._rowContainer=document.createElement("div"),le._rowContainer.classList.add("xterm-rows"),le._rowContainer.style.lineHeight="normal",le._rowContainer.setAttribute("aria-hidden","true"),le._refreshRowElements(le._bufferService.cols,le._bufferService.rows),le._selectionContainer=document.createElement("div"),le._selectionContainer.classList.add("xterm-selection"),le._selectionContainer.setAttribute("aria-hidden","true"),le.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},le._updateDimensions(),le._injectCss(),le._rowFactory=O.createInstance(y.DomRendererRowFactory,document,le._colors),le._element.classList.add(l+le._terminalClass),le._screenElement.appendChild(le._rowContainer),le._screenElement.appendChild(le._selectionContainer),le._linkifier.onShowLinkUnderline(function(we){return le._onLinkHover(we)}),le._linkifier.onHideLinkUnderline(function(we){return le._onLinkLeave(we)}),le._linkifier2.onShowLinkUnderline(function(we){return le._onLinkHover(we)}),le._linkifier2.onHideLinkUnderline(function(we){return le._onLinkLeave(we)}),le}return b(R,D),Object.defineProperty(R.prototype,"onRequestRedraw",{get:function(){return new a.EventEmitter().event},enumerable:!1,configurable:!0}),R.prototype.dispose=function(){this._element.classList.remove(l+this._terminalClass),(0,o.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),D.prototype.dispose.call(this)},R.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var E=0,I=this._rowElements;E<I.length;E++){var w=I[E];w.style.width=this.dimensions.canvasWidth+"px",w.style.height=this.dimensions.actualCellHeight+"px",w.style.lineHeight=this.dimensions.actualCellHeight+"px",w.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var U=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},R.prototype.setColors=function(E){this._colors=E,this._injectCss()},R.prototype._injectCss=function(){var E=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var I=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";I+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",I+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",I+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",I+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",I+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(w,U){I+=E._terminalSelector+" ."+p+U+" { color: "+w.css+"; }"+E._terminalSelector+" ."+g+U+" { background-color: "+w.css+"; }"}),I+=this._terminalSelector+" ."+p+C.INVERTED_DEFAULT_COLOR+" { color: "+s.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+g+C.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=I},R.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},R.prototype._refreshRowElements=function(E,I){for(var w=this._rowElements.length;w<=I;w++){var U=document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())},R.prototype.onResize=function(E,I){this._refreshRowElements(E,I),this._updateDimensions()},R.prototype.onCharSizeChanged=function(){this._updateDimensions()},R.prototype.onBlur=function(){this._rowContainer.classList.remove(T)},R.prototype.onFocus=function(){this._rowContainer.classList.add(T)},R.prototype.onSelectionChanged=function(E,I,w){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(E&&I){var U=E[1]-this._bufferService.buffer.ydisp,N=I[1]-this._bufferService.buffer.ydisp,L=Math.max(U,0),O=Math.min(N,this._bufferService.rows-1);if(!(L>=this._bufferService.rows||O<0)){var W=document.createDocumentFragment();if(w)W.appendChild(this._createSelectionElement(L,E[0],I[0],O-L+1));else{var Y=U===L?E[0]:0,ue=L===N?I[0]:this._bufferService.cols;W.appendChild(this._createSelectionElement(L,Y,ue));var le=O-L-1;if(W.appendChild(this._createSelectionElement(L+1,0,this._bufferService.cols,le)),L!==O){var we=N===O?I[0]:this._bufferService.cols;W.appendChild(this._createSelectionElement(O,0,we))}}this._selectionContainer.appendChild(W)}}},R.prototype._createSelectionElement=function(E,I,w,U){U===void 0&&(U=1);var N=document.createElement("div");return N.style.height=U*this.dimensions.actualCellHeight+"px",N.style.top=E*this.dimensions.actualCellHeight+"px",N.style.left=I*this.dimensions.actualCellWidth+"px",N.style.width=this.dimensions.actualCellWidth*(w-I)+"px",N},R.prototype.onCursorMove=function(){},R.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},R.prototype.clear=function(){for(var E=0,I=this._rowElements;E<I.length;E++)I[E].innerText=""},R.prototype.renderRows=function(E,I){for(var w=this._bufferService.buffer.ybase+this._bufferService.buffer.y,U=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),N=this._optionsService.options.cursorBlink,L=E;L<=I;L++){var O=this._rowElements[L];O.innerText="";var W=L+this._bufferService.buffer.ydisp,Y=this._bufferService.buffer.lines.get(W),ue=this._optionsService.options.cursorStyle;O.appendChild(this._rowFactory.createRow(Y,W,W===w,ue,U,N,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(R.prototype,"_terminalSelector",{get:function(){return"."+l+this._terminalClass},enumerable:!1,configurable:!0}),R.prototype._onLinkHover=function(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)},R.prototype._onLinkLeave=function(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)},R.prototype._setCellUnderline=function(E,I,w,U,N,L){for(;E!==I||w!==U;){var O=this._rowElements[w];if(!O)return;var W=O.children[E];W&&(W.style.textDecoration=L?"underline":"none"),++E>=N&&(E=0,w++)}},S([v(6,d.IInstantiationService),v(7,f.ICharSizeService),v(8,d.IOptionsService),v(9,d.IBufferService)],R)}(u.Disposable);h.DomRenderer=B},3787:function(J,h,x){var _=this&&this.__decorate||function(o,l,p,g){var T,A=arguments.length,B=A<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(o,l,p,g);else for(var D=o.length-1;D>=0;D--)(T=o[D])&&(B=(A<3?T(B):A>3?T(l,p,B):T(l,p))||B);return A>3&&B&&Object.defineProperty(l,p,B),B},b=this&&this.__param||function(o,l){return function(p,g){l(p,g,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRendererRowFactory=h.CURSOR_STYLE_UNDERLINE_CLASS=h.CURSOR_STYLE_BAR_CLASS=h.CURSOR_STYLE_BLOCK_CLASS=h.CURSOR_BLINK_CLASS=h.CURSOR_CLASS=h.STRIKETHROUGH_CLASS=h.UNDERLINE_CLASS=h.ITALIC_CLASS=h.DIM_CLASS=h.BOLD_CLASS=void 0;var S=x(8803),v=x(643),y=x(511),C=x(2585),u=x(4774),f=x(4725),d=x(4269);h.BOLD_CLASS="xterm-bold",h.DIM_CLASS="xterm-dim",h.ITALIC_CLASS="xterm-italic",h.UNDERLINE_CLASS="xterm-underline",h.STRIKETHROUGH_CLASS="xterm-strikethrough",h.CURSOR_CLASS="xterm-cursor",h.CURSOR_BLINK_CLASS="xterm-cursor-blink",h.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",h.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",h.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var a=function(){function o(l,p,g,T,A){this._document=l,this._colors=p,this._characterJoinerService=g,this._optionsService=T,this._coreService=A,this._workCell=new y.CellData}return o.prototype.setColors=function(l){this._colors=l},o.prototype.createRow=function(l,p,g,T,A,B,D,R){for(var E=this._document.createDocumentFragment(),I=this._characterJoinerService.getJoinedCharacters(p),w=0,U=Math.min(l.length,R)-1;U>=0;U--)if(l.loadCell(U,this._workCell).getCode()!==v.NULL_CELL_CODE||g&&U===A){w=U+1;break}for(U=0;U<w;U++){l.loadCell(U,this._workCell);var N=this._workCell.getWidth();if(N!==0){var L=!1,O=U,W=this._workCell;if(I.length>0&&U===I[0][0]){L=!0;var Y=I.shift();W=new d.JoinedCellData(this._workCell,l.translateToString(!0,Y[0],Y[1]),Y[1]-Y[0]),O=Y[1]-1,N=W.getWidth()}var ue=this._document.createElement("span");if(N>1&&(ue.style.width=D*N+"px"),L&&(ue.style.display="inline",A>=U&&A<=O&&(A=U)),!this._coreService.isCursorHidden&&g&&U===A)switch(ue.classList.add(h.CURSOR_CLASS),B&&ue.classList.add(h.CURSOR_BLINK_CLASS),T){case"bar":ue.classList.add(h.CURSOR_STYLE_BAR_CLASS);break;case"underline":ue.classList.add(h.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ue.classList.add(h.CURSOR_STYLE_BLOCK_CLASS)}W.isBold()&&ue.classList.add(h.BOLD_CLASS),W.isItalic()&&ue.classList.add(h.ITALIC_CLASS),W.isDim()&&ue.classList.add(h.DIM_CLASS),W.isUnderline()&&ue.classList.add(h.UNDERLINE_CLASS),W.isInvisible()?ue.textContent=v.WHITESPACE_CELL_CHAR:ue.textContent=W.getChars()||v.WHITESPACE_CELL_CHAR,W.isStrikethrough()&&ue.classList.add(h.STRIKETHROUGH_CLASS);var le=W.getFgColor(),we=W.getFgColorMode(),xe=W.getBgColor(),de=W.getBgColorMode(),F=!!W.isInverse();if(F){var z=le;le=xe,xe=z;var K=we;we=de,de=K}switch(we){case 16777216:case 33554432:W.isBold()&&le<8&&this._optionsService.options.drawBoldTextInBrightColors&&(le+=8),this._applyMinimumContrast(ue,this._colors.background,this._colors.ansi[le])||ue.classList.add("xterm-fg-"+le);break;case 50331648:var re=u.rgba.toColor(le>>16&255,le>>8&255,255&le);this._applyMinimumContrast(ue,this._colors.background,re)||this._addStyle(ue,"color:#"+s(le.toString(16),"0",6));break;default:this._applyMinimumContrast(ue,this._colors.background,this._colors.foreground)||F&&ue.classList.add("xterm-fg-"+S.INVERTED_DEFAULT_COLOR)}switch(de){case 16777216:case 33554432:ue.classList.add("xterm-bg-"+xe);break;case 50331648:this._addStyle(ue,"background-color:#"+s(xe.toString(16),"0",6));break;default:F&&ue.classList.add("xterm-bg-"+S.INVERTED_DEFAULT_COLOR)}E.appendChild(ue),U=O}}return E},o.prototype._applyMinimumContrast=function(l,p,g){if(this._optionsService.options.minimumContrastRatio===1)return!1;var T=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return T===void 0&&(T=u.color.ensureContrastRatio(p,g,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,T??null)),!!T&&(this._addStyle(l,"color:"+T.css),!0)},o.prototype._addStyle=function(l,p){l.setAttribute("style",""+(l.getAttribute("style")||"")+p+";")},_([b(2,f.ICharacterJoinerService),b(3,C.IOptionsService),b(4,C.ICoreService)],o)}();function s(o,l,p){for(;o.length<p;)o=l+o;return o}h.DomRendererRowFactory=a},456:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionModel=void 0;var x=function(){function _(b){this._bufferService=b,this.isSelectAllActive=!1,this.selectionStartLength=0}return _.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(_.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var b=this.selectionStart[0]+this.selectionStartLength;return b>this._bufferService.cols?b%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(b/this._bufferService.cols)-1]:[b%this._bufferService.cols,this.selectionStart[1]+Math.floor(b/this._bufferService.cols)]:[b,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),_.prototype.areSelectionValuesReversed=function(){var b=this.selectionStart,S=this.selectionEnd;return!(!b||!S)&&(b[1]>S[1]||b[1]===S[1]&&b[0]>S[0])},_.prototype.onTrim=function(b){return this.selectionStart&&(this.selectionStart[1]-=b),this.selectionEnd&&(this.selectionEnd[1]-=b),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},_}();h.SelectionModel=x},428:function(J,h,x){var _=this&&this.__decorate||function(u,f,d,a){var s,o=arguments.length,l=o<3?f:a===null?a=Object.getOwnPropertyDescriptor(f,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,f,d,a);else for(var p=u.length-1;p>=0;p--)(s=u[p])&&(l=(o<3?s(l):o>3?s(f,d,l):s(f,d))||l);return o>3&&l&&Object.defineProperty(f,d,l),l},b=this&&this.__param||function(u,f){return function(d,a){f(d,a,u)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharSizeService=void 0;var S=x(2585),v=x(8460),y=function(){function u(f,d,a){this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=new v.EventEmitter,this._measureStrategy=new C(f,d,this._optionsService)}return Object.defineProperty(u.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),u.prototype.measure=function(){var f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())},_([b(2,S.IOptionsService)],u)}();h.CharSizeService=y;var C=function(){function u(f,d,a){this._document=f,this._parentElement=d,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return u.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var f=this._measureElement.getBoundingClientRect();return f.width!==0&&f.height!==0&&(this._result.width=f.width,this._result.height=Math.ceil(f.height)),this._result},u}()},4269:function(J,h,x){var _,b=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(l[g]=p[g])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}),S=this&&this.__decorate||function(s,o,l,p){var g,T=arguments.length,A=T<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(s,o,l,p);else for(var B=s.length-1;B>=0;B--)(g=s[B])&&(A=(T<3?g(A):T>3?g(o,l,A):g(o,l))||A);return T>3&&A&&Object.defineProperty(o,l,A),A},v=this&&this.__param||function(s,o){return function(l,p){o(l,p,s)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharacterJoinerService=h.JoinedCellData=void 0;var y=x(3734),C=x(643),u=x(511),f=x(2585),d=function(s){function o(l,p,g){var T=s.call(this)||this;return T.content=0,T.combinedData="",T.fg=l.fg,T.bg=l.bg,T.combinedData=p,T._width=g,T}return b(o,s),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(l){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(y.AttributeData);h.JoinedCellData=d;var a=function(){function s(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return s.prototype.register=function(o){var l={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(l),l.id},s.prototype.deregister=function(o){for(var l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===o)return this._characterJoiners.splice(l,1),!0;return!1},s.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var l=this._bufferService.buffer.lines.get(o);if(!l||l.length===0)return[];for(var p=[],g=l.translateToString(!0),T=0,A=0,B=0,D=l.getFg(0),R=l.getBg(0),E=0;E<l.getTrimmedLength();E++)if(l.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==R){if(E-T>1)for(var I=this._getJoinedRanges(g,B,A,l,T),w=0;w<I.length;w++)p.push(I[w]);T=E,B=A,D=this._workCell.fg,R=this._workCell.bg}A+=this._workCell.getChars().length||C.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-T>1)for(I=this._getJoinedRanges(g,B,A,l,T),w=0;w<I.length;w++)p.push(I[w]);return p},s.prototype._getJoinedRanges=function(o,l,p,g,T){var A=o.substring(l,p),B=[];try{B=this._characterJoiners[0].handler(A)}catch(I){console.error(I)}for(var D=1;D<this._characterJoiners.length;D++)try{for(var R=this._characterJoiners[D].handler(A),E=0;E<R.length;E++)s._mergeRanges(B,R[E])}catch(I){console.error(I)}return this._stringRangesToCellRanges(B,g,T),B},s.prototype._stringRangesToCellRanges=function(o,l,p){var g=0,T=!1,A=0,B=o[g];if(B){for(var D=p;D<this._bufferService.cols;D++){var R=l.getWidth(D),E=l.getString(D).length||C.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!T&&B[0]<=A&&(B[0]=D,T=!0),B[1]<=A){if(B[1]=D,!(B=o[++g]))break;B[0]<=A?(B[0]=D,T=!0):T=!1}A+=E}}B&&(B[1]=this._bufferService.cols)}},s._mergeRanges=function(o,l){for(var p=!1,g=0;g<o.length;g++){var T=o[g];if(p){if(l[1]<=T[0])return o[g-1][1]=l[1],o;if(l[1]<=T[1])return o[g-1][1]=Math.max(l[1],T[1]),o.splice(g,1),o;o.splice(g,1),g--}else{if(l[1]<=T[0])return o.splice(g,0,l),o;if(l[1]<=T[1])return T[0]=Math.min(l[0],T[0]),o;l[0]<T[1]&&(T[0]=Math.min(l[0],T[0]),p=!0)}}return p?o[o.length-1][1]=l[1]:o.push(l),o},s=S([v(0,f.IBufferService)],s)}();h.CharacterJoinerService=a},5114:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CoreBrowserService=void 0;var x=function(){function _(b){this._textarea=b}return Object.defineProperty(_.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),_}();h.CoreBrowserService=x},8934:function(J,h,x){var _=this&&this.__decorate||function(C,u,f,d){var a,s=arguments.length,o=s<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,f):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,u,f,d);else for(var l=C.length-1;l>=0;l--)(a=C[l])&&(o=(s<3?a(o):s>3?a(u,f,o):a(u,f))||o);return s>3&&o&&Object.defineProperty(u,f,o),o},b=this&&this.__param||function(C,u){return function(f,d){u(f,d,C)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseService=void 0;var S=x(4725),v=x(9806),y=function(){function C(u,f){this._renderService=u,this._charSizeService=f}return C.prototype.getCoords=function(u,f,d,a,s){return(0,v.getCoords)(u,f,d,a,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,s)},C.prototype.getRawByteCoords=function(u,f,d,a){var s=this.getCoords(u,f,d,a);return(0,v.getRawByteCoords)(s)},_([b(0,S.IRenderService),b(1,S.ICharSizeService)],C)}();h.MouseService=y},3230:function(J,h,x){var _,b=this&&this.__extends||(_=function(l,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(g[A]=T[A])},_(l,p)},function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=l}_(l,p),l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}),S=this&&this.__decorate||function(l,p,g,T){var A,B=arguments.length,D=B<3?p:T===null?T=Object.getOwnPropertyDescriptor(p,g):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(l,p,g,T);else for(var R=l.length-1;R>=0;R--)(A=l[R])&&(D=(B<3?A(D):B>3?A(p,g,D):A(p,g))||D);return B>3&&D&&Object.defineProperty(p,g,D),D},v=this&&this.__param||function(l,p){return function(g,T){p(g,T,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.RenderService=void 0;var y=x(6193),C=x(8460),u=x(844),f=x(5596),d=x(3656),a=x(2585),s=x(4725),o=function(l){function p(g,T,A,B,D,R){var E=l.call(this)||this;if(E._renderer=g,E._rowCount=T,E._charSizeService=D,E._isPaused=!1,E._needsFullRefresh=!1,E._isNextRenderRedrawOnly=!0,E._needsSelectionRefresh=!1,E._canvasWidth=0,E._canvasHeight=0,E._selectionState={start:void 0,end:void 0,columnSelectMode:!1},E._onDimensionsChange=new C.EventEmitter,E._onRender=new C.EventEmitter,E._onRefreshRequest=new C.EventEmitter,E.register({dispose:function(){return E._renderer.dispose()}}),E._renderDebouncer=new y.RenderDebouncer(function(w,U){return E._renderRows(w,U)}),E.register(E._renderDebouncer),E._screenDprMonitor=new f.ScreenDprMonitor,E._screenDprMonitor.setListener(function(){return E.onDevicePixelRatioChange()}),E.register(E._screenDprMonitor),E.register(R.onResize(function(w){return E._fullRefresh()})),E.register(B.onOptionChange(function(){return E._renderer.onOptionsChanged()})),E.register(E._charSizeService.onCharSizeChange(function(){return E.onCharSizeChanged()})),E._renderer.onRequestRedraw(function(w){return E.refreshRows(w.start,w.end,!0)}),E.register((0,d.addDisposableDomListener)(window,"resize",function(){return E.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var I=new IntersectionObserver(function(w){return E._onIntersectionChange(w[w.length-1])},{threshold:0});I.observe(A),E.register({dispose:function(){return I.disconnect()}})}return E}return b(p,l),Object.defineProperty(p.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),p.prototype._onIntersectionChange=function(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},p.prototype.refreshRows=function(g,T,A){A===void 0&&(A=!1),this._isPaused?this._needsFullRefresh=!0:(A||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,T,this._rowCount))},p.prototype._renderRows=function(g,T){this._renderer.renderRows(g,T),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:g,end:T}),this._isNextRenderRedrawOnly=!0},p.prototype.resize=function(g,T){this._rowCount=T,this._fireOnCanvasResize()},p.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},p.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},p.prototype.dispose=function(){l.prototype.dispose.call(this)},p.prototype.setRenderer=function(g){var T=this;this._renderer.dispose(),this._renderer=g,this._renderer.onRequestRedraw(function(A){return T.refreshRows(A.start,A.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},p.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},p.prototype.clearTextureAtlas=function(){var g,T;(T=(g=this._renderer)===null||g===void 0?void 0:g.clearTextureAtlas)===null||T===void 0||T.call(g),this._fullRefresh()},p.prototype.setColors=function(g){this._renderer.setColors(g),this._fullRefresh()},p.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},p.prototype.onResize=function(g,T){this._renderer.onResize(g,T),this._fullRefresh()},p.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},p.prototype.onBlur=function(){this._renderer.onBlur()},p.prototype.onFocus=function(){this._renderer.onFocus()},p.prototype.onSelectionChanged=function(g,T,A){this._selectionState.start=g,this._selectionState.end=T,this._selectionState.columnSelectMode=A,this._renderer.onSelectionChanged(g,T,A)},p.prototype.onCursorMove=function(){this._renderer.onCursorMove()},p.prototype.clear=function(){this._renderer.clear()},S([v(3,a.IOptionsService),v(4,s.ICharSizeService),v(5,a.IBufferService)],p)}(u.Disposable);h.RenderService=o},9312:function(J,h,x){var _,b=this&&this.__extends||(_=function(B,D){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,E){R.__proto__=E}||function(R,E){for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(R[I]=E[I])},_(B,D)},function(B,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function R(){this.constructor=B}_(B,D),B.prototype=D===null?Object.create(D):(R.prototype=D.prototype,new R)}),S=this&&this.__decorate||function(B,D,R,E){var I,w=arguments.length,U=w<3?D:E===null?E=Object.getOwnPropertyDescriptor(D,R):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(B,D,R,E);else for(var N=B.length-1;N>=0;N--)(I=B[N])&&(U=(w<3?I(U):w>3?I(D,R,U):I(D,R))||U);return w>3&&U&&Object.defineProperty(D,R,U),U},v=this&&this.__param||function(B,D){return function(R,E){D(R,E,B)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionService=void 0;var y=x(6114),C=x(456),u=x(511),f=x(8460),d=x(4725),a=x(2585),s=x(9806),o=x(9504),l=x(844),p=x(4841),g=String.fromCharCode(160),T=new RegExp(g,"g"),A=function(B){function D(R,E,I,w,U,N,L,O){var W=B.call(this)||this;return W._element=R,W._screenElement=E,W._linkifier=I,W._bufferService=w,W._coreService=U,W._mouseService=N,W._optionsService=L,W._renderService=O,W._dragScrollAmount=0,W._enabled=!0,W._workCell=new u.CellData,W._mouseDownTimeStamp=0,W._oldHasSelection=!1,W._oldSelectionStart=void 0,W._oldSelectionEnd=void 0,W._onLinuxMouseSelection=W.register(new f.EventEmitter),W._onRedrawRequest=W.register(new f.EventEmitter),W._onSelectionChange=W.register(new f.EventEmitter),W._onRequestScrollLines=W.register(new f.EventEmitter),W._mouseMoveListener=function(Y){return W._onMouseMove(Y)},W._mouseUpListener=function(Y){return W._onMouseUp(Y)},W._coreService.onUserInput(function(){W.hasSelection&&W.clearSelection()}),W._trimListener=W._bufferService.buffer.lines.onTrim(function(Y){return W._onTrim(Y)}),W.register(W._bufferService.buffers.onBufferActivate(function(Y){return W._onBufferActivate(Y)})),W.enable(),W._model=new C.SelectionModel(W._bufferService),W._activeSelectionMode=0,W}return b(D,B),Object.defineProperty(D.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),D.prototype.dispose=function(){this._removeMouseDownListeners()},D.prototype.reset=function(){this.clearSelection()},D.prototype.disable=function(){this.clearSelection(),this._enabled=!1},D.prototype.enable=function(){this._enabled=!0},Object.defineProperty(D.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"hasSelection",{get:function(){var R=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!R||!E||R[0]===E[0]&&R[1]===E[1])},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"selectionText",{get:function(){var R=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!R||!E)return"";var I=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(R[0]===E[0])return"";for(var U=R[1];U<=E[1];U++){var N=I.translateBufferLineToString(U,!0,R[0],E[0]);w.push(N)}}else{var L=R[1]===E[1]?E[0]:void 0;for(w.push(I.translateBufferLineToString(R[1],!0,R[0],L)),U=R[1]+1;U<=E[1]-1;U++){var O=I.lines.get(U);N=I.translateBufferLineToString(U,!0),(O==null?void 0:O.isWrapped)?w[w.length-1]+=N:w.push(N)}R[1]!==E[1]&&(O=I.lines.get(E[1]),N=I.translateBufferLineToString(E[1],!0,0,E[0]),O&&O.isWrapped?w[w.length-1]+=N:w.push(N))}return w.map(function(W){return W.replace(T," ")}).join(y.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),D.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},D.prototype.refresh=function(R){var E=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return E._refresh()})),y.isLinux&&R&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},D.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},D.prototype._isClickInSelection=function(R){var E=this._getMouseBufferCoords(R),I=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(I&&w&&E)&&this._areCoordsInSelection(E,I,w)},D.prototype._areCoordsInSelection=function(R,E,I){return R[1]>E[1]&&R[1]<I[1]||E[1]===I[1]&&R[1]===E[1]&&R[0]>=E[0]&&R[0]<I[0]||E[1]<I[1]&&R[1]===I[1]&&R[0]<I[0]||E[1]<I[1]&&R[1]===E[1]&&R[0]>=E[0]},D.prototype._selectWordAtCursor=function(R,E){var I,w,U=(w=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||w===void 0?void 0:w.range;if(U)return this._model.selectionStart=[U.start.x-1,U.start.y-1],this._model.selectionStartLength=(0,p.getRangeLength)(U,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var N=this._getMouseBufferCoords(R);return!!N&&(this._selectWordAt(N,E),this._model.selectionEnd=void 0,!0)},D.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},D.prototype.selectLines=function(R,E){this._model.clearSelection(),R=Math.max(R,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,R],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()},D.prototype._onTrim=function(R){this._model.onTrim(R)&&this.refresh()},D.prototype._getMouseBufferCoords=function(R){var E=this._mouseService.getCoords(R,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E},D.prototype._getMouseEventScrollAmount=function(R){var E=(0,s.getCoordsRelativeToElement)(R,this._screenElement)[1],I=this._renderService.dimensions.canvasHeight;return E>=0&&E<=I?0:(E>I&&(E-=I),E=Math.min(Math.max(E,-50),50),(E/=50)/Math.abs(E)+Math.round(14*E))},D.prototype.shouldForceSelection=function(R){return y.isMac?R.altKey&&this._optionsService.options.macOptionClickForcesSelection:R.shiftKey},D.prototype.onMouseDown=function(R){if(this._mouseDownTimeStamp=R.timeStamp,(R.button!==2||!this.hasSelection)&&R.button===0){if(!this._enabled){if(!this.shouldForceSelection(R))return;R.stopPropagation()}R.preventDefault(),this._dragScrollAmount=0,this._enabled&&R.shiftKey?this._onIncrementalClick(R):R.detail===1?this._onSingleClick(R):R.detail===2?this._onDoubleClick(R):R.detail===3&&this._onTripleClick(R),this._addMouseDownListeners(),this.refresh(!0)}},D.prototype._addMouseDownListeners=function(){var R=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return R._dragScroll()},50)},D.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},D.prototype._onIncrementalClick=function(R){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(R))},D.prototype._onSingleClick=function(R){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(R)?3:0,this._model.selectionStart=this._getMouseBufferCoords(R),this._model.selectionStart){this._model.selectionEnd=void 0;var E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},D.prototype._onDoubleClick=function(R){this._selectWordAtCursor(R,!0)&&(this._activeSelectionMode=1)},D.prototype._onTripleClick=function(R){var E=this._getMouseBufferCoords(R);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))},D.prototype.shouldColumnSelect=function(R){return R.altKey&&!(y.isMac&&this._optionsService.options.macOptionClickForcesSelection)},D.prototype._onMouseMove=function(R){if(R.stopImmediatePropagation(),this._model.selectionStart){var E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(R),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(R),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){var w=I.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},D.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var R=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(R.ydisp+this._bufferService.rows,R.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=R.ydisp),this.refresh()}},D.prototype._onMouseUp=function(R){var E=R.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&R.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var I=this._mouseService.getCoords(R,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){var w=(0,o.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()},D.prototype._fireEventIfSelectionChanged=function(){var R=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,I=!(!R||!E||R[0]===E[0]&&R[1]===E[1]);I?R&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&R[0]===this._oldSelectionStart[0]&&R[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(R,E,I)):this._oldHasSelection&&this._fireOnSelectionChange(R,E,I)},D.prototype._fireOnSelectionChange=function(R,E,I){this._oldSelectionStart=R,this._oldSelectionEnd=E,this._oldHasSelection=I,this._onSelectionChange.fire()},D.prototype._onBufferActivate=function(R){var E=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=R.activeBuffer.lines.onTrim(function(I){return E._onTrim(I)})},D.prototype._convertViewportColToCharacterIndex=function(R,E){for(var I=E[0],w=0;E[0]>=w;w++){var U=R.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:U>1&&E[0]!==w&&(I+=U-1)}return I},D.prototype.setSelection=function(R,E,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[R,E],this._model.selectionStartLength=I,this.refresh()},D.prototype.rightClickSelect=function(R){this._isClickInSelection(R)||(this._selectWordAtCursor(R,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},D.prototype._getWordAt=function(R,E,I,w){if(I===void 0&&(I=!0),w===void 0&&(w=!0),!(R[0]>=this._bufferService.cols)){var U=this._bufferService.buffer,N=U.lines.get(R[1]);if(N){var L=U.translateBufferLineToString(R[1],!1),O=this._convertViewportColToCharacterIndex(N,R),W=O,Y=R[0]-O,ue=0,le=0,we=0,xe=0;if(L.charAt(O)===" "){for(;O>0&&L.charAt(O-1)===" ";)O--;for(;W<L.length&&L.charAt(W+1)===" ";)W++}else{var de=R[0],F=R[0];N.getWidth(de)===0&&(ue++,de--),N.getWidth(F)===2&&(le++,F++);var z=N.getString(F).length;for(z>1&&(xe+=z-1,W+=z-1);de>0&&O>0&&!this._isCharWordSeparator(N.loadCell(de-1,this._workCell));){N.loadCell(de-1,this._workCell);var K=this._workCell.getChars().length;this._workCell.getWidth()===0?(ue++,de--):K>1&&(we+=K-1,O-=K-1),O--,de--}for(;F<N.length&&W+1<L.length&&!this._isCharWordSeparator(N.loadCell(F+1,this._workCell));){N.loadCell(F+1,this._workCell);var re=this._workCell.getChars().length;this._workCell.getWidth()===2?(le++,F++):re>1&&(xe+=re-1,W+=re-1),W++,F++}}W++;var $=O+Y-ue+we,be=Math.min(this._bufferService.cols,W-O+ue+le-we-xe);if(E||L.slice(O,W).trim()!==""){if(I&&$===0&&N.getCodePoint(0)!==32){var Te=U.lines.get(R[1]-1);if(Te&&N.isWrapped&&Te.getCodePoint(this._bufferService.cols-1)!==32){var Ke=this._getWordAt([this._bufferService.cols-1,R[1]-1],!1,!0,!1);if(Ke){var Me=this._bufferService.cols-Ke.start;$-=Me,be+=Me}}}if(w&&$+be===this._bufferService.cols&&N.getCodePoint(this._bufferService.cols-1)!==32){var He=U.lines.get(R[1]+1);if((He==null?void 0:He.isWrapped)&&He.getCodePoint(0)!==32){var ge=this._getWordAt([0,R[1]+1],!1,!1,!0);ge&&(be+=ge.length)}}return{start:$,length:be}}}}},D.prototype._selectWordAt=function(R,E){var I=this._getWordAt(R,E);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,R[1]--;this._model.selectionStart=[I.start,R[1]],this._model.selectionStartLength=I.length}},D.prototype._selectToWordAt=function(R){var E=this._getWordAt(R,!0);if(E){for(var I=R[1];E.start<0;)E.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,I]}},D.prototype._isCharWordSeparator=function(R){return R.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(R.getChars())>=0},D.prototype._selectLineAt=function(R){var E=this._bufferService.buffer.getWrappedRangeForLine(R);this._model.selectionStart=[0,E.first],this._model.selectionEnd=[this._bufferService.cols,E.last],this._model.selectionStartLength=0},S([v(3,a.IBufferService),v(4,a.ICoreService),v(5,d.IMouseService),v(6,a.IOptionsService),v(7,d.IRenderService)],D)}(l.Disposable);h.SelectionService=A},4725:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ICharacterJoinerService=h.ISoundService=h.ISelectionService=h.IRenderService=h.IMouseService=h.ICoreBrowserService=h.ICharSizeService=void 0;var _=x(8343);h.ICharSizeService=(0,_.createDecorator)("CharSizeService"),h.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),h.IMouseService=(0,_.createDecorator)("MouseService"),h.IRenderService=(0,_.createDecorator)("RenderService"),h.ISelectionService=(0,_.createDecorator)("SelectionService"),h.ISoundService=(0,_.createDecorator)("SoundService"),h.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService")},357:function(J,h,x){var _=this&&this.__decorate||function(y,C,u,f){var d,a=arguments.length,s=a<3?C:f===null?f=Object.getOwnPropertyDescriptor(C,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(y,C,u,f);else for(var o=y.length-1;o>=0;o--)(d=y[o])&&(s=(a<3?d(s):a>3?d(C,u,s):d(C,u))||s);return a>3&&s&&Object.defineProperty(C,u,s),s},b=this&&this.__param||function(y,C){return function(u,f){C(u,f,y)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SoundService=void 0;var S=x(2585),v=function(){function y(C){this._optionsService=C}return Object.defineProperty(y,"audioContext",{get:function(){if(!y._audioContext){var C=window.AudioContext||window.webkitAudioContext;if(!C)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;y._audioContext=new C}return y._audioContext},enumerable:!1,configurable:!0}),y.prototype.playBellSound=function(){var C=y.audioContext;if(C){var u=C.createBufferSource();C.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(f){u.buffer=f,u.connect(C.destination),u.start(0)})}},y.prototype._base64ToArrayBuffer=function(C){for(var u=window.atob(C),f=u.length,d=new Uint8Array(f),a=0;a<f;a++)d[a]=u.charCodeAt(a);return d.buffer},y.prototype._removeMimeType=function(C){return C.split(",")[1]},y=_([b(0,S.IOptionsService)],y)}();h.SoundService=v},6349:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CircularList=void 0;var _=x(8460),b=function(){function S(v){this._maxLength=v,this.onDeleteEmitter=new _.EventEmitter,this.onInsertEmitter=new _.EventEmitter,this.onTrimEmitter=new _.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(S.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"maxLength",{get:function(){return this._maxLength},set:function(v){if(this._maxLength!==v){for(var y=new Array(v),C=0;C<Math.min(v,this.length);C++)y[C]=this._array[this._getCyclicIndex(C)];this._array=y,this._maxLength=v,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"length",{get:function(){return this._length},set:function(v){if(v>this._length)for(var y=this._length;y<v;y++)this._array[y]=void 0;this._length=v},enumerable:!1,configurable:!0}),S.prototype.get=function(v){return this._array[this._getCyclicIndex(v)]},S.prototype.set=function(v,y){this._array[this._getCyclicIndex(v)]=y},S.prototype.push=function(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},S.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(S.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),S.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},S.prototype.splice=function(v,y){for(var C=[],u=2;u<arguments.length;u++)C[u-2]=arguments[u];if(y){for(var f=v;f<this._length-y;f++)this._array[this._getCyclicIndex(f)]=this._array[this._getCyclicIndex(f+y)];this._length-=y,this.onDeleteEmitter.fire({index:v,amount:y})}for(f=this._length-1;f>=v;f--)this._array[this._getCyclicIndex(f+C.length)]=this._array[this._getCyclicIndex(f)];for(f=0;f<C.length;f++)this._array[this._getCyclicIndex(v+f)]=C[f];if(C.length&&this.onInsertEmitter.fire({index:v,amount:C.length}),this._length+C.length>this._maxLength){var d=this._length+C.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=C.length},S.prototype.trimStart=function(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)},S.prototype.shiftElements=function(v,y,C){if(!(y<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(var u=y-1;u>=0;u--)this.set(v+u+C,this.get(v+u));var f=v+y+C-this._length;if(f>0)for(this._length+=f;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(u=0;u<y;u++)this.set(v+u+C,this.get(v+u))}},S.prototype._getCyclicIndex=function(v){return(this._startIndex+v)%this._maxLength},S}();h.CircularList=b},1439:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.clone=void 0,h.clone=function x(_,b){if(b===void 0&&(b=5),typeof _!="object")return _;var S=Array.isArray(_)?[]:{};for(var v in _)S[v]=b<=1?_[v]:_[v]&&x(_[v],b-1);return S}},8969:function(J,h,x){var _,b=this&&this.__extends||(_=function(R,E){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,w){I.__proto__=w}||function(I,w){for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&(I[U]=w[U])},_(R,E)},function(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function I(){this.constructor=R}_(R,E),R.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)});Object.defineProperty(h,"__esModule",{value:!0}),h.CoreTerminal=void 0;var S=x(844),v=x(2585),y=x(4348),C=x(7866),u=x(744),f=x(7302),d=x(6975),a=x(8460),s=x(1753),o=x(3730),l=x(1480),p=x(7994),g=x(9282),T=x(5435),A=x(5981),B=!1,D=function(R){function E(I){var w=R.call(this)||this;return w._onBinary=new a.EventEmitter,w._onData=new a.EventEmitter,w._onLineFeed=new a.EventEmitter,w._onResize=new a.EventEmitter,w._onScroll=new a.EventEmitter,w._instantiationService=new y.InstantiationService,w.optionsService=new f.OptionsService(I),w._instantiationService.setService(v.IOptionsService,w.optionsService),w._bufferService=w.register(w._instantiationService.createInstance(u.BufferService)),w._instantiationService.setService(v.IBufferService,w._bufferService),w._logService=w._instantiationService.createInstance(C.LogService),w._instantiationService.setService(v.ILogService,w._logService),w.coreService=w.register(w._instantiationService.createInstance(d.CoreService,function(){return w.scrollToBottom()})),w._instantiationService.setService(v.ICoreService,w.coreService),w.coreMouseService=w._instantiationService.createInstance(s.CoreMouseService),w._instantiationService.setService(v.ICoreMouseService,w.coreMouseService),w._dirtyRowService=w._instantiationService.createInstance(o.DirtyRowService),w._instantiationService.setService(v.IDirtyRowService,w._dirtyRowService),w.unicodeService=w._instantiationService.createInstance(l.UnicodeService),w._instantiationService.setService(v.IUnicodeService,w.unicodeService),w._charsetService=w._instantiationService.createInstance(p.CharsetService),w._instantiationService.setService(v.ICharsetService,w._charsetService),w._inputHandler=new T.InputHandler(w._bufferService,w._charsetService,w.coreService,w._dirtyRowService,w._logService,w.optionsService,w.coreMouseService,w.unicodeService),w.register((0,a.forwardEvent)(w._inputHandler.onLineFeed,w._onLineFeed)),w.register(w._inputHandler),w.register((0,a.forwardEvent)(w._bufferService.onResize,w._onResize)),w.register((0,a.forwardEvent)(w.coreService.onData,w._onData)),w.register((0,a.forwardEvent)(w.coreService.onBinary,w._onBinary)),w.register(w.optionsService.onOptionChange(function(U){return w._updateOptions(U)})),w.register(w._bufferService.onScroll(function(U){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w.register(w._inputHandler.onScroll(function(U){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w._writeBuffer=new A.WriteBuffer(function(U,N){return w._inputHandler.parse(U,N)}),w}return b(E,R),Object.defineProperty(E.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onScroll",{get:function(){var I=this;return this._onScrollApi||(this._onScrollApi=new a.EventEmitter,this.register(this._onScroll.event(function(w){var U;(U=I._onScrollApi)===null||U===void 0||U.fire(w.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"options",{get:function(){return this.optionsService.options},set:function(I){for(var w in I)this.optionsService.options[w]=I[w]},enumerable:!1,configurable:!0}),E.prototype.dispose=function(){var I;this._isDisposed||(R.prototype.dispose.call(this),(I=this._windowsMode)===null||I===void 0||I.dispose(),this._windowsMode=void 0)},E.prototype.write=function(I,w){this._writeBuffer.write(I,w)},E.prototype.writeSync=function(I,w){this._logService.logLevel<=v.LogLevelEnum.WARN&&!B&&(this._logService.warn("writeSync is unreliable and will be removed soon."),B=!0),this._writeBuffer.writeSync(I,w)},E.prototype.resize=function(I,w){isNaN(I)||isNaN(w)||(I=Math.max(I,u.MINIMUM_COLS),w=Math.max(w,u.MINIMUM_ROWS),this._bufferService.resize(I,w))},E.prototype.scroll=function(I,w){w===void 0&&(w=!1),this._bufferService.scroll(I,w)},E.prototype.scrollLines=function(I,w,U){this._bufferService.scrollLines(I,w,U)},E.prototype.scrollPages=function(I){this._bufferService.scrollPages(I)},E.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},E.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},E.prototype.scrollToLine=function(I){this._bufferService.scrollToLine(I)},E.prototype.registerEscHandler=function(I,w){return this._inputHandler.registerEscHandler(I,w)},E.prototype.registerDcsHandler=function(I,w){return this._inputHandler.registerDcsHandler(I,w)},E.prototype.registerCsiHandler=function(I,w){return this._inputHandler.registerCsiHandler(I,w)},E.prototype.registerOscHandler=function(I,w){return this._inputHandler.registerOscHandler(I,w)},E.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},E.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},E.prototype._updateOptions=function(I){var w;switch(I){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((w=this._windowsMode)===null||w===void 0||w.dispose(),this._windowsMode=void 0)}},E.prototype._enableWindowsMode=function(){var I=this;if(!this._windowsMode){var w=[];w.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},function(){return(0,g.updateWindowsModeWrappedState)(I._bufferService),!1})),this._windowsMode={dispose:function(){for(var U=0,N=w;U<N.length;U++)N[U].dispose()}}}},E}(S.Disposable);h.CoreTerminal=D},8460:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.forwardEvent=h.EventEmitter=void 0;var x=function(){function _(){this._listeners=[],this._disposed=!1}return Object.defineProperty(_.prototype,"event",{get:function(){var b=this;return this._event||(this._event=function(S){return b._listeners.push(S),{dispose:function(){if(!b._disposed){for(var v=0;v<b._listeners.length;v++)if(b._listeners[v]===S)return void b._listeners.splice(v,1)}}}}),this._event},enumerable:!1,configurable:!0}),_.prototype.fire=function(b,S){for(var v=[],y=0;y<this._listeners.length;y++)v.push(this._listeners[y]);for(y=0;y<v.length;y++)v[y].call(void 0,b,S)},_.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},_}();h.EventEmitter=x,h.forwardEvent=function(_,b){return _(function(S){return b.fire(S)})}},5435:function(J,h,x){var _,b=this&&this.__extends||(_=function(U,N){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&(L[W]=O[W])},_(U,N)},function(U,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function L(){this.constructor=U}_(U,N),U.prototype=N===null?Object.create(N):(L.prototype=N.prototype,new L)});Object.defineProperty(h,"__esModule",{value:!0}),h.InputHandler=h.WindowsOptionsReportType=void 0;var S,v=x(2584),y=x(7116),C=x(2015),u=x(844),f=x(8273),d=x(482),a=x(8437),s=x(8460),o=x(643),l=x(511),p=x(3734),g=x(2585),T=x(6242),A=x(6351),B=x(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function E(U,N){if(U>24)return N.setWinLines||!1;switch(U){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(S=h.WindowsOptionsReportType||(h.WindowsOptionsReportType={}));var I=function(){function U(N,L,O,W){this._bufferService=N,this._coreService=L,this._logService=O,this._optionsService=W,this._data=new Uint32Array(0)}return U.prototype.hook=function(N){this._data=new Uint32Array(0)},U.prototype.put=function(N,L,O){this._data=(0,f.concat)(this._data,N.subarray(L,O))},U.prototype.unhook=function(N){if(!N)return this._data=new Uint32Array(0),!0;var L=(0,d.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),L){case'"q':this._coreService.triggerDataEvent(v.C0.ESC+'P1$r0"q'+v.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(v.C0.ESC+'P1$r61;1"p'+v.C0.ESC+"\\");break;case"r":var O=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(v.C0.ESC+"P1$r"+O+v.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(v.C0.ESC+"P1$r0m"+v.C0.ESC+"\\");break;case" q":var W={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];W-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(v.C0.ESC+"P1$r"+W+" q"+v.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",L),this._coreService.triggerDataEvent(v.C0.ESC+"P0$r"+v.C0.ESC+"\\")}return!0},U}(),w=function(U){function N(L,O,W,Y,ue,le,we,xe,de){de===void 0&&(de=new C.EscapeSequenceParser);var F=U.call(this)||this;F._bufferService=L,F._charsetService=O,F._coreService=W,F._dirtyRowService=Y,F._logService=ue,F._optionsService=le,F._coreMouseService=we,F._unicodeService=xe,F._parser=de,F._parseBuffer=new Uint32Array(4096),F._stringDecoder=new d.StringToUtf32,F._utf8Decoder=new d.Utf8ToUtf32,F._workCell=new l.CellData,F._windowTitle="",F._iconName="",F._windowTitleStack=[],F._iconNameStack=[],F._curAttrData=a.DEFAULT_ATTR_DATA.clone(),F._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),F._onRequestBell=new s.EventEmitter,F._onRequestRefreshRows=new s.EventEmitter,F._onRequestReset=new s.EventEmitter,F._onRequestSendFocus=new s.EventEmitter,F._onRequestSyncScrollBar=new s.EventEmitter,F._onRequestWindowsOptionsReport=new s.EventEmitter,F._onA11yChar=new s.EventEmitter,F._onA11yTab=new s.EventEmitter,F._onCursorMove=new s.EventEmitter,F._onLineFeed=new s.EventEmitter,F._onScroll=new s.EventEmitter,F._onTitleChange=new s.EventEmitter,F._onColor=new s.EventEmitter,F._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},F._specialColors=[256,257,258],F.register(F._parser),F._activeBuffer=F._bufferService.buffer,F.register(F._bufferService.buffers.onBufferActivate(function($){return F._activeBuffer=$.activeBuffer})),F._parser.setCsiHandlerFallback(function($,be){F._logService.debug("Unknown CSI code: ",{identifier:F._parser.identToString($),params:be.toArray()})}),F._parser.setEscHandlerFallback(function($){F._logService.debug("Unknown ESC code: ",{identifier:F._parser.identToString($)})}),F._parser.setExecuteHandlerFallback(function($){F._logService.debug("Unknown EXECUTE code: ",{code:$})}),F._parser.setOscHandlerFallback(function($,be,Te){F._logService.debug("Unknown OSC code: ",{identifier:$,action:be,data:Te})}),F._parser.setDcsHandlerFallback(function($,be,Te){be==="HOOK"&&(Te=Te.toArray()),F._logService.debug("Unknown DCS code: ",{identifier:F._parser.identToString($),action:be,payload:Te})}),F._parser.setPrintHandler(function($,be,Te){return F.print($,be,Te)}),F._parser.registerCsiHandler({final:"@"},function($){return F.insertChars($)}),F._parser.registerCsiHandler({intermediates:" ",final:"@"},function($){return F.scrollLeft($)}),F._parser.registerCsiHandler({final:"A"},function($){return F.cursorUp($)}),F._parser.registerCsiHandler({intermediates:" ",final:"A"},function($){return F.scrollRight($)}),F._parser.registerCsiHandler({final:"B"},function($){return F.cursorDown($)}),F._parser.registerCsiHandler({final:"C"},function($){return F.cursorForward($)}),F._parser.registerCsiHandler({final:"D"},function($){return F.cursorBackward($)}),F._parser.registerCsiHandler({final:"E"},function($){return F.cursorNextLine($)}),F._parser.registerCsiHandler({final:"F"},function($){return F.cursorPrecedingLine($)}),F._parser.registerCsiHandler({final:"G"},function($){return F.cursorCharAbsolute($)}),F._parser.registerCsiHandler({final:"H"},function($){return F.cursorPosition($)}),F._parser.registerCsiHandler({final:"I"},function($){return F.cursorForwardTab($)}),F._parser.registerCsiHandler({final:"J"},function($){return F.eraseInDisplay($)}),F._parser.registerCsiHandler({prefix:"?",final:"J"},function($){return F.eraseInDisplay($)}),F._parser.registerCsiHandler({final:"K"},function($){return F.eraseInLine($)}),F._parser.registerCsiHandler({prefix:"?",final:"K"},function($){return F.eraseInLine($)}),F._parser.registerCsiHandler({final:"L"},function($){return F.insertLines($)}),F._parser.registerCsiHandler({final:"M"},function($){return F.deleteLines($)}),F._parser.registerCsiHandler({final:"P"},function($){return F.deleteChars($)}),F._parser.registerCsiHandler({final:"S"},function($){return F.scrollUp($)}),F._parser.registerCsiHandler({final:"T"},function($){return F.scrollDown($)}),F._parser.registerCsiHandler({final:"X"},function($){return F.eraseChars($)}),F._parser.registerCsiHandler({final:"Z"},function($){return F.cursorBackwardTab($)}),F._parser.registerCsiHandler({final:"`"},function($){return F.charPosAbsolute($)}),F._parser.registerCsiHandler({final:"a"},function($){return F.hPositionRelative($)}),F._parser.registerCsiHandler({final:"b"},function($){return F.repeatPrecedingCharacter($)}),F._parser.registerCsiHandler({final:"c"},function($){return F.sendDeviceAttributesPrimary($)}),F._parser.registerCsiHandler({prefix:">",final:"c"},function($){return F.sendDeviceAttributesSecondary($)}),F._parser.registerCsiHandler({final:"d"},function($){return F.linePosAbsolute($)}),F._parser.registerCsiHandler({final:"e"},function($){return F.vPositionRelative($)}),F._parser.registerCsiHandler({final:"f"},function($){return F.hVPosition($)}),F._parser.registerCsiHandler({final:"g"},function($){return F.tabClear($)}),F._parser.registerCsiHandler({final:"h"},function($){return F.setMode($)}),F._parser.registerCsiHandler({prefix:"?",final:"h"},function($){return F.setModePrivate($)}),F._parser.registerCsiHandler({final:"l"},function($){return F.resetMode($)}),F._parser.registerCsiHandler({prefix:"?",final:"l"},function($){return F.resetModePrivate($)}),F._parser.registerCsiHandler({final:"m"},function($){return F.charAttributes($)}),F._parser.registerCsiHandler({final:"n"},function($){return F.deviceStatus($)}),F._parser.registerCsiHandler({prefix:"?",final:"n"},function($){return F.deviceStatusPrivate($)}),F._parser.registerCsiHandler({intermediates:"!",final:"p"},function($){return F.softReset($)}),F._parser.registerCsiHandler({intermediates:" ",final:"q"},function($){return F.setCursorStyle($)}),F._parser.registerCsiHandler({final:"r"},function($){return F.setScrollRegion($)}),F._parser.registerCsiHandler({final:"s"},function($){return F.saveCursor($)}),F._parser.registerCsiHandler({final:"t"},function($){return F.windowOptions($)}),F._parser.registerCsiHandler({final:"u"},function($){return F.restoreCursor($)}),F._parser.registerCsiHandler({intermediates:"'",final:"}"},function($){return F.insertColumns($)}),F._parser.registerCsiHandler({intermediates:"'",final:"~"},function($){return F.deleteColumns($)}),F._parser.setExecuteHandler(v.C0.BEL,function(){return F.bell()}),F._parser.setExecuteHandler(v.C0.LF,function(){return F.lineFeed()}),F._parser.setExecuteHandler(v.C0.VT,function(){return F.lineFeed()}),F._parser.setExecuteHandler(v.C0.FF,function(){return F.lineFeed()}),F._parser.setExecuteHandler(v.C0.CR,function(){return F.carriageReturn()}),F._parser.setExecuteHandler(v.C0.BS,function(){return F.backspace()}),F._parser.setExecuteHandler(v.C0.HT,function(){return F.tab()}),F._parser.setExecuteHandler(v.C0.SO,function(){return F.shiftOut()}),F._parser.setExecuteHandler(v.C0.SI,function(){return F.shiftIn()}),F._parser.setExecuteHandler(v.C1.IND,function(){return F.index()}),F._parser.setExecuteHandler(v.C1.NEL,function(){return F.nextLine()}),F._parser.setExecuteHandler(v.C1.HTS,function(){return F.tabSet()}),F._parser.registerOscHandler(0,new T.OscHandler(function($){return F.setTitle($),F.setIconName($),!0})),F._parser.registerOscHandler(1,new T.OscHandler(function($){return F.setIconName($)})),F._parser.registerOscHandler(2,new T.OscHandler(function($){return F.setTitle($)})),F._parser.registerOscHandler(4,new T.OscHandler(function($){return F.setOrReportIndexedColor($)})),F._parser.registerOscHandler(10,new T.OscHandler(function($){return F.setOrReportFgColor($)})),F._parser.registerOscHandler(11,new T.OscHandler(function($){return F.setOrReportBgColor($)})),F._parser.registerOscHandler(12,new T.OscHandler(function($){return F.setOrReportCursorColor($)})),F._parser.registerOscHandler(104,new T.OscHandler(function($){return F.restoreIndexedColor($)})),F._parser.registerOscHandler(110,new T.OscHandler(function($){return F.restoreFgColor($)})),F._parser.registerOscHandler(111,new T.OscHandler(function($){return F.restoreBgColor($)})),F._parser.registerOscHandler(112,new T.OscHandler(function($){return F.restoreCursorColor($)})),F._parser.registerEscHandler({final:"7"},function(){return F.saveCursor()}),F._parser.registerEscHandler({final:"8"},function(){return F.restoreCursor()}),F._parser.registerEscHandler({final:"D"},function(){return F.index()}),F._parser.registerEscHandler({final:"E"},function(){return F.nextLine()}),F._parser.registerEscHandler({final:"H"},function(){return F.tabSet()}),F._parser.registerEscHandler({final:"M"},function(){return F.reverseIndex()}),F._parser.registerEscHandler({final:"="},function(){return F.keypadApplicationMode()}),F._parser.registerEscHandler({final:">"},function(){return F.keypadNumericMode()}),F._parser.registerEscHandler({final:"c"},function(){return F.fullReset()}),F._parser.registerEscHandler({final:"n"},function(){return F.setgLevel(2)}),F._parser.registerEscHandler({final:"o"},function(){return F.setgLevel(3)}),F._parser.registerEscHandler({final:"|"},function(){return F.setgLevel(3)}),F._parser.registerEscHandler({final:"}"},function(){return F.setgLevel(2)}),F._parser.registerEscHandler({final:"~"},function(){return F.setgLevel(1)}),F._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return F.selectDefaultCharset()}),F._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return F.selectDefaultCharset()});var z=function($){K._parser.registerEscHandler({intermediates:"(",final:$},function(){return F.selectCharset("("+$)}),K._parser.registerEscHandler({intermediates:")",final:$},function(){return F.selectCharset(")"+$)}),K._parser.registerEscHandler({intermediates:"*",final:$},function(){return F.selectCharset("*"+$)}),K._parser.registerEscHandler({intermediates:"+",final:$},function(){return F.selectCharset("+"+$)}),K._parser.registerEscHandler({intermediates:"-",final:$},function(){return F.selectCharset("-"+$)}),K._parser.registerEscHandler({intermediates:".",final:$},function(){return F.selectCharset("."+$)}),K._parser.registerEscHandler({intermediates:"/",final:$},function(){return F.selectCharset("/"+$)})},K=this;for(var re in y.CHARSETS)z(re);return F._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return F.screenAlignmentPattern()}),F._parser.setErrorHandler(function($){return F._logService.error("Parsing error: ",$),$}),F._parser.registerDcsHandler({intermediates:"$",final:"q"},new I(F._bufferService,F._coreService,F._logService,F._optionsService)),F}return b(N,U),Object.defineProperty(N.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),N.prototype.dispose=function(){U.prototype.dispose.call(this)},N.prototype._preserveStack=function(L,O,W,Y){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=W,this._parseStack.position=Y},N.prototype._logSlowResolvingAsync=function(L){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([L,new Promise(function(O,W){return setTimeout(function(){return W("#SLOW_TIMEOUT")},5e3)})]).catch(function(O){if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})},N.prototype.parse=function(L,O){var W,Y=this._activeBuffer.x,ue=this._activeBuffer.y,le=0,we=this._parseStack.paused;if(we){if(W=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(W),W;Y=this._parseStack.cursorStartX,ue=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>R&&(le=this._parseStack.position+R)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?' "'+L+'"':""),typeof L=="string"?L.split("").map(function(z){return z.charCodeAt(0)}):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(L.length,R))),we||this._dirtyRowService.clearRange(),L.length>R)for(var xe=le;xe<L.length;xe+=R){var de=xe+R<L.length?xe+R:L.length,F=typeof L=="string"?this._stringDecoder.decode(L.substring(xe,de),this._parseBuffer):this._utf8Decoder.decode(L.subarray(xe,de),this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,F))return this._preserveStack(Y,ue,F,xe),this._logSlowResolvingAsync(W),W}else if(!we&&(F=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer),W=this._parser.parse(this._parseBuffer,F)))return this._preserveStack(Y,ue,F,0),this._logSlowResolvingAsync(W),W;this._activeBuffer.x===Y&&this._activeBuffer.y===ue||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},N.prototype.print=function(L,O,W){var Y,ue,le=this._charsetService.charset,we=this._optionsService.options.screenReaderMode,xe=this._bufferService.cols,de=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,z=this._curAttrData,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&W-O>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(var re=O;re<W;++re){if(Y=L[re],ue=this._unicodeService.wcwidth(Y),Y<127&&le){var $=le[String.fromCharCode(Y)];$&&(Y=$.charCodeAt(0))}if(we&&this._onA11yChar.fire((0,d.stringFromCodePoint)(Y)),ue||!this._activeBuffer.x){if(this._activeBuffer.x+ue-1>=xe){if(de){for(;this._activeBuffer.x<xe;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=xe-1,ue===2)continue}if(F&&(K.insertCells(this._activeBuffer.x,ue,this._activeBuffer.getNullCell(z),z),K.getWidth(xe-1)===2&&K.setCellFromCodePoint(xe-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,Y,ue,z.fg,z.bg,z.extended),ue>0)for(;--ue;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,Y):K.addCodepointToCell(this._activeBuffer.x-2,Y)}W-O>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<xe&&W-O>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype.registerCsiHandler=function(L,O){var W=this;return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,O):this._parser.registerCsiHandler(L,function(Y){return!E(Y.params[0],W._optionsService.options.windowOptions)||O(Y)})},N.prototype.registerDcsHandler=function(L,O){return this._parser.registerDcsHandler(L,new A.DcsHandler(O))},N.prototype.registerEscHandler=function(L,O){return this._parser.registerEscHandler(L,O)},N.prototype.registerOscHandler=function(L,O){return this._parser.registerOscHandler(L,new T.OscHandler(O))},N.prototype.bell=function(){return this._onRequestBell.fire(),!0},N.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},N.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},N.prototype.backspace=function(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0?void 0:L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},N.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0},N.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},N.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},N.prototype._restrictCursor=function(L){L===void 0&&(L=this._bufferService.cols-1),this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype._setCursor=function(L,O){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=L,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},N.prototype._moveCursor=function(L,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+O)},N.prototype.cursorUp=function(L){var O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0},N.prototype.cursorDown=function(L){var O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0},N.prototype.cursorForward=function(L){return this._moveCursor(L.params[0]||1,0),!0},N.prototype.cursorBackward=function(L){return this._moveCursor(-(L.params[0]||1),0),!0},N.prototype.cursorNextLine=function(L){return this.cursorDown(L),this._activeBuffer.x=0,!0},N.prototype.cursorPrecedingLine=function(L){return this.cursorUp(L),this._activeBuffer.x=0,!0},N.prototype.cursorCharAbsolute=function(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0},N.prototype.cursorPosition=function(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0},N.prototype.charPosAbsolute=function(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0},N.prototype.hPositionRelative=function(L){return this._moveCursor(L.params[0]||1,0),!0},N.prototype.linePosAbsolute=function(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0},N.prototype.vPositionRelative=function(L){return this._moveCursor(0,L.params[0]||1),!0},N.prototype.hVPosition=function(L){return this.cursorPosition(L),!0},N.prototype.tabClear=function(L){var O=L.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0},N.prototype.cursorForwardTab=function(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var O=L.params[0]||1;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},N.prototype.cursorBackwardTab=function(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var O=L.params[0]||1;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},N.prototype._eraseInBufferLine=function(L,O,W,Y){Y===void 0&&(Y=!1);var ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ue.replaceCells(O,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Y&&(ue.isWrapped=!1)},N.prototype._resetBufferLine=function(L){var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);O.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),O.isWrapped=!1},N.prototype.eraseInDisplay=function(L){var O;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowService.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);O<this._bufferService.rows;O++)this._resetBufferLine(O);this._dirtyRowService.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowService.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O);this._dirtyRowService.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowService.markDirty(O-1);O--;)this._resetBufferLine(O);this._dirtyRowService.markDirty(0);break;case 3:var W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0},N.prototype.eraseInLine=function(L){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},N.prototype.insertLines=function(L){this._restrictCursor();var O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var W=this._activeBuffer.ybase+this._activeBuffer.y,Y=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ue=this._bufferService.rows-1+this._activeBuffer.ybase-Y+1;O--;)this._activeBuffer.lines.splice(ue-1,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},N.prototype.deleteLines=function(L){this._restrictCursor();var O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var W,Y=this._activeBuffer.ybase+this._activeBuffer.y;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;O--;)this._activeBuffer.lines.splice(Y,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},N.prototype.insertChars=function(L){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.deleteChars=function(L){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.scrollUp=function(L){for(var O=L.params[0]||1;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollDown=function(L){for(var O=L.params[0]||1;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollLeft=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=L.params[0]||1,W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){var Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);Y.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Y.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.scrollRight=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=L.params[0]||1,W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){var Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);Y.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Y.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.insertColumns=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=L.params[0]||1,W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){var Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);Y.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Y.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.deleteColumns=function(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var O=L.params[0]||1,W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){var Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);Y.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),Y.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},N.prototype.eraseChars=function(L){this._restrictCursor();var O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},N.prototype.repeatPrecedingCharacter=function(L){if(!this._parser.precedingCodepoint)return!0;for(var O=L.params[0]||1,W=new Uint32Array(O),Y=0;Y<O;++Y)W[Y]=this._parser.precedingCodepoint;return this.print(W,0,W.length),!0},N.prototype.sendDeviceAttributesPrimary=function(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(v.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(v.C0.ESC+"[?6c")),!0},N.prototype.sendDeviceAttributesSecondary=function(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(v.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(v.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(v.C0.ESC+"[>83;40003;0c")),!0},N.prototype._is=function(L){return(this._optionsService.options.termName+"").indexOf(L)===0},N.prototype.setMode=function(L){for(var O=0;O<L.length;O++)L.params[O]===4&&(this._coreService.modes.insertMode=!0);return!0},N.prototype.setModePrivate=function(L){for(var O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},N.prototype.resetMode=function(L){for(var O=0;O<L.length;O++)L.params[O]===4&&(this._coreService.modes.insertMode=!1);return!0},N.prototype.resetModePrivate=function(L){for(var O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},N.prototype._updateAttrColor=function(L,O,W,Y,ue){return O===2?(L|=50331648,L&=-16777216,L|=p.AttributeData.fromColorRGB([W,Y,ue])):O===5&&(L&=-50331904,L|=33554432|255&W),L},N.prototype._extractColor=function(L,O,W){var Y=[0,0,-1,0,0,0],ue=0,le=0;do{if(Y[le+ue]=L.params[O+le],L.hasSubParams(O+le)){var we=L.getSubParams(O+le),xe=0;do Y[1]===5&&(ue=1),Y[le+xe+1+ue]=we[xe];while(++xe<we.length&&xe+le+1+ue<Y.length);break}if(Y[1]===5&&le+ue>=2||Y[1]===2&&le+ue>=5)break;Y[1]&&(ue=1)}while(++le+O<L.length&&le+ue<Y.length);for(xe=2;xe<Y.length;++xe)Y[xe]===-1&&(Y[xe]=0);switch(Y[0]){case 38:W.fg=this._updateAttrColor(W.fg,Y[1],Y[3],Y[4],Y[5]);break;case 48:W.bg=this._updateAttrColor(W.bg,Y[1],Y[3],Y[4],Y[5]);break;case 58:W.extended=W.extended.clone(),W.extended.underlineColor=this._updateAttrColor(W.extended.underlineColor,Y[1],Y[3],Y[4],Y[5])}return le},N.prototype._processUnderline=function(L,O){O.extended=O.extended.clone(),(!~L||L>5)&&(L=1),O.extended.underlineStyle=L,O.fg|=268435456,L===0&&(O.fg&=-268435457),O.updateExtended()},N.prototype.charAttributes=function(L){if(L.length===1&&L.params[0]===0)return this._curAttrData.fg=a.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=a.DEFAULT_ATTR_DATA.bg,!0;for(var O,W=L.length,Y=this._curAttrData,ue=0;ue<W;ue++)(O=L.params[ue])>=30&&O<=37?(Y.fg&=-50331904,Y.fg|=16777216|O-30):O>=40&&O<=47?(Y.bg&=-50331904,Y.bg|=16777216|O-40):O>=90&&O<=97?(Y.fg&=-50331904,Y.fg|=16777224|O-90):O>=100&&O<=107?(Y.bg&=-50331904,Y.bg|=16777224|O-100):O===0?(Y.fg=a.DEFAULT_ATTR_DATA.fg,Y.bg=a.DEFAULT_ATTR_DATA.bg):O===1?Y.fg|=134217728:O===3?Y.bg|=67108864:O===4?(Y.fg|=268435456,this._processUnderline(L.hasSubParams(ue)?L.getSubParams(ue)[0]:1,Y)):O===5?Y.fg|=536870912:O===7?Y.fg|=67108864:O===8?Y.fg|=1073741824:O===9?Y.fg|=2147483648:O===2?Y.bg|=134217728:O===21?this._processUnderline(2,Y):O===22?(Y.fg&=-134217729,Y.bg&=-134217729):O===23?Y.bg&=-67108865:O===24?Y.fg&=-268435457:O===25?Y.fg&=-536870913:O===27?Y.fg&=-67108865:O===28?Y.fg&=-1073741825:O===29?Y.fg&=2147483647:O===39?(Y.fg&=-67108864,Y.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):O===49?(Y.bg&=-67108864,Y.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?ue+=this._extractColor(L,ue,Y):O===59?(Y.extended=Y.extended.clone(),Y.extended.underlineColor=-1,Y.updateExtended()):O===100?(Y.fg&=-67108864,Y.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,Y.bg&=-67108864,Y.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0},N.prototype.deviceStatus=function(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(v.C0.ESC+"[0n");break;case 6:var O=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(v.C0.ESC+"["+O+";"+W+"R")}return!0},N.prototype.deviceStatusPrivate=function(L){if(L.params[0]===6){var O=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(v.C0.ESC+"[?"+O+";"+W+"R")}return!0},N.prototype.softReset=function(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},N.prototype.setCursorStyle=function(L){var O=L.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var W=O%2==1;return this._optionsService.options.cursorBlink=W,!0},N.prototype.setScrollRegion=function(L){var O,W=L.params[0]||1;return(L.length<2||(O=L.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>W&&(this._activeBuffer.scrollTop=W-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0},N.prototype.windowOptions=function(L){if(!E(L.params[0],this._optionsService.options.windowOptions))return!0;var O=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(S.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(S.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(v.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},N.prototype.saveCursor=function(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},N.prototype.restoreCursor=function(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},N.prototype.setTitle=function(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0},N.prototype.setIconName=function(L){return this._iconName=L,!0},N.prototype.setOrReportIndexedColor=function(L){for(var O=[],W=L.split(";");W.length>1;){var Y=W.shift(),ue=W.shift();if(/^\d+$/.exec(Y)){var le=parseInt(Y);if(0<=le&&le<256)if(ue==="?")O.push({type:0,index:le});else{var we=(0,B.parseColor)(ue);we&&O.push({type:1,index:le,color:we})}}}return O.length&&this._onColor.fire(O),!0},N.prototype._setOrReportSpecialColor=function(L,O){for(var W=L.split(";"),Y=0;Y<W.length&&!(O>=this._specialColors.length);++Y,++O)if(W[Y]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{var ue=(0,B.parseColor)(W[Y]);ue&&this._onColor.fire([{type:1,index:this._specialColors[O],color:ue}])}return!0},N.prototype.setOrReportFgColor=function(L){return this._setOrReportSpecialColor(L,0)},N.prototype.setOrReportBgColor=function(L){return this._setOrReportSpecialColor(L,1)},N.prototype.setOrReportCursorColor=function(L){return this._setOrReportSpecialColor(L,2)},N.prototype.restoreIndexedColor=function(L){if(!L)return this._onColor.fire([{type:2}]),!0;for(var O=[],W=L.split(";"),Y=0;Y<W.length;++Y)if(/^\d+$/.exec(W[Y])){var ue=parseInt(W[Y]);0<=ue&&ue<256&&O.push({type:2,index:ue})}return O.length&&this._onColor.fire(O),!0},N.prototype.restoreFgColor=function(L){return this._onColor.fire([{type:2,index:256}]),!0},N.prototype.restoreBgColor=function(L){return this._onColor.fire([{type:2,index:257}]),!0},N.prototype.restoreCursorColor=function(L){return this._onColor.fire([{type:2,index:258}]),!0},N.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},N.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},N.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},N.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0},N.prototype.selectCharset=function(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(D[L[0]],y.CHARSETS[L[1]]||y.DEFAULT_CHARSET),!0)},N.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},N.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},N.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},N.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},N.prototype.reset=function(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()},N.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},N.prototype.setgLevel=function(L){return this._charsetService.setgLevel(L),!0},N.prototype.screenAlignmentPattern=function(){var L=new l.CellData;L.content=1<<22|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(var O=0;O<this._bufferService.rows;++O){var W=this._activeBuffer.ybase+this._activeBuffer.y+O,Y=this._activeBuffer.lines.get(W);Y&&(Y.fill(L),Y.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},N}(u.Disposable);h.InputHandler=w},844:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getDisposeArrayDisposable=h.disposeArray=h.Disposable=void 0;var x=function(){function b(){this._disposables=[],this._isDisposed=!1}return b.prototype.dispose=function(){this._isDisposed=!0;for(var S=0,v=this._disposables;S<v.length;S++)v[S].dispose();this._disposables.length=0},b.prototype.register=function(S){return this._disposables.push(S),S},b.prototype.unregister=function(S){var v=this._disposables.indexOf(S);v!==-1&&this._disposables.splice(v,1)},b}();function _(b){for(var S=0,v=b;S<v.length;S++)v[S].dispose();b.length=0}h.Disposable=x,h.disposeArray=_,h.getDisposeArrayDisposable=function(b){return{dispose:function(){return _(b)}}}},6114:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isLinux=h.isWindows=h.isIphone=h.isIpad=h.isMac=h.isSafari=h.isFirefox=void 0;var x=typeof navigator=="undefined",_=x?"node":navigator.userAgent,b=x?"node":navigator.platform;h.isFirefox=_.includes("Firefox"),h.isSafari=/^((?!chrome|android).)*safari/i.test(_),h.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(b),h.isIpad=b==="iPad",h.isIphone=b==="iPhone",h.isWindows=["Windows","Win16","Win32","WinCE"].includes(b),h.isLinux=b.indexOf("Linux")>=0},8273:(J,h)=>{function x(_,b,S,v){if(S===void 0&&(S=0),v===void 0&&(v=_.length),S>=_.length)return _;S=(_.length+S)%_.length,v=v>=_.length?_.length:(_.length+v)%_.length;for(var y=S;y<v;++y)_[y]=b;return _}Object.defineProperty(h,"__esModule",{value:!0}),h.concat=h.fillFallback=h.fill=void 0,h.fill=function(_,b,S,v){return _.fill?_.fill(b,S,v):x(_,b,S,v)},h.fillFallback=x,h.concat=function(_,b){var S=new _.constructor(_.length+b.length);return S.set(_),S.set(b,_.length),S}},9282:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.updateWindowsModeWrappedState=void 0;var _=x(643);h.updateWindowsModeWrappedState=function(b){var S=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),v=S==null?void 0:S.get(b.cols-1),y=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);y&&v&&(y.isWrapped=v[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&v[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ExtendedAttrs=h.AttributeData=void 0;var x=function(){function b(){this.fg=0,this.bg=0,this.extended=new _}return b.toColorRGB=function(S){return[S>>>16&255,S>>>8&255,255&S]},b.fromColorRGB=function(S){return(255&S[0])<<16|(255&S[1])<<8|255&S[2]},b.prototype.clone=function(){var S=new b;return S.fg=this.fg,S.bg=this.bg,S.extended=this.extended.clone(),S},b.prototype.isInverse=function(){return 67108864&this.fg},b.prototype.isBold=function(){return 134217728&this.fg},b.prototype.isUnderline=function(){return 268435456&this.fg},b.prototype.isBlink=function(){return 536870912&this.fg},b.prototype.isInvisible=function(){return 1073741824&this.fg},b.prototype.isItalic=function(){return 67108864&this.bg},b.prototype.isDim=function(){return 134217728&this.bg},b.prototype.isStrikethrough=function(){return 2147483648&this.fg},b.prototype.getFgColorMode=function(){return 50331648&this.fg},b.prototype.getBgColorMode=function(){return 50331648&this.bg},b.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},b.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},b.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},b.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},b.prototype.isFgDefault=function(){return(50331648&this.fg)==0},b.prototype.isBgDefault=function(){return(50331648&this.bg)==0},b.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},b.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},b.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},b.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},b.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},b.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},b.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},b.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},b.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},b.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},b.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},b}();h.AttributeData=x;var _=function(){function b(S,v){S===void 0&&(S=0),v===void 0&&(v=-1),this.underlineStyle=S,this.underlineColor=v}return b.prototype.clone=function(){return new b(this.underlineStyle,this.underlineColor)},b.prototype.isEmpty=function(){return this.underlineStyle===0},b}();h.ExtendedAttrs=_},9092:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferStringIterator=h.Buffer=h.MAX_BUFFER_SIZE=void 0;var _=x(6349),b=x(8437),S=x(511),v=x(643),y=x(4634),C=x(4863),u=x(7116),f=x(3734);h.MAX_BUFFER_SIZE=4294967295;var d=function(){function s(o,l,p){this._hasScrollback=o,this._optionsService=l,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=b.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return s.prototype.getNullCell=function(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell},s.prototype.getWhitespaceCell=function(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell},s.prototype.getBlankLine=function(o,l){return new b.BufferLine(this._bufferService.cols,this.getNullCell(o),l)},Object.defineProperty(s.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isCursorInViewport",{get:function(){var o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows},enumerable:!1,configurable:!0}),s.prototype._getCorrectBufferLength=function(o){if(!this._hasScrollback)return o;var l=o+this._optionsService.options.scrollback;return l>h.MAX_BUFFER_SIZE?h.MAX_BUFFER_SIZE:l},s.prototype.fillViewportRows=function(o){if(this.lines.length===0){o===void 0&&(o=b.DEFAULT_ATTR_DATA);for(var l=this._rows;l--;)this.lines.push(this.getBlankLine(o))}},s.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},s.prototype.resize=function(o,l){var p=this.getNullCell(b.DEFAULT_ATTR_DATA),g=this._getCorrectBufferLength(l);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<o)for(var T=0;T<this.lines.length;T++)this.lines.get(T).resize(o,p);var A=0;if(this._rows<l)for(var B=this._rows;B<l;B++)this.lines.length<l+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new b.BufferLine(o,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+A+1?(this.ybase--,A++,this.ydisp>0&&this.ydisp--):this.lines.push(new b.BufferLine(o,p)));else for(B=this._rows;B>l;B--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){var D=this.lines.length-g;D>0&&(this.lines.trimStart(D),this.ybase=Math.max(this.ybase-D,0),this.ydisp=Math.max(this.ydisp-D,0),this.savedY=Math.max(this.savedY-D,0)),this.lines.maxLength=g}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,l-1),A&&(this.y+=A),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(o,l),this._cols>o))for(T=0;T<this.lines.length;T++)this.lines.get(T).resize(o,p);this._cols=o,this._rows=l},Object.defineProperty(s.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),s.prototype._reflow=function(o,l){this._cols!==o&&(o>this._cols?this._reflowLarger(o,l):this._reflowSmaller(o,l))},s.prototype._reflowLarger=function(o,l){var p=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(b.DEFAULT_ATTR_DATA));if(p.length>0){var g=(0,y.reflowLargerCreateNewLayout)(this.lines,p);(0,y.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(o,l,g.countRemoved)}},s.prototype._reflowLargerAdjustViewport=function(o,l,p){for(var g=this.getNullCell(b.DEFAULT_ATTR_DATA),T=p;T-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new b.BufferLine(o,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)},s.prototype._reflowSmaller=function(o,l){for(var p=this.getNullCell(b.DEFAULT_ATTR_DATA),g=[],T=0,A=this.lines.length-1;A>=0;A--){var B=this.lines.get(A);if(!(!B||!B.isWrapped&&B.getTrimmedLength()<=o)){for(var D=[B];B.isWrapped&&A>0;)B=this.lines.get(--A),D.unshift(B);var R=this.ybase+this.y;if(!(R>=A&&R<A+D.length)){var E,I=D[D.length-1].getTrimmedLength(),w=(0,y.reflowSmallerGetNewLineLengths)(D,this._cols,o),U=w.length-D.length;E=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);for(var N=[],L=0;L<U;L++){var O=this.getBlankLine(b.DEFAULT_ATTR_DATA,!0);N.push(O)}N.length>0&&(g.push({start:A+D.length+T,newLines:N}),T+=N.length),D.push.apply(D,N);var W=w.length-1,Y=w[W];Y===0&&(Y=w[--W]);for(var ue=D.length-U-1,le=I;ue>=0;){var we=Math.min(le,Y);if(D[W].copyCellsFrom(D[ue],le-we,Y-we,we,!0),(Y-=we)==0&&(Y=w[--W]),(le-=we)==0){ue--;var xe=Math.max(ue,0);le=(0,y.getWrappedLineTrimmedLength)(D,xe,this._cols)}}for(L=0;L<D.length;L++)w[L]<o&&D[L].setCell(w[L],p);for(var de=U-E;de-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+T)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+l-1)}}}if(g.length>0){var F=[],z=[];for(L=0;L<this.lines.length;L++)z.push(this.lines.get(L));var K=this.lines.length,re=K-1,$=0,be=g[$];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+T);var Te=0;for(L=Math.min(this.lines.maxLength-1,K+T-1);L>=0;L--)if(be&&be.start>re+Te){for(var Ke=be.newLines.length-1;Ke>=0;Ke--)this.lines.set(L--,be.newLines[Ke]);L++,F.push({index:re+1,amount:be.newLines.length}),Te+=be.newLines.length,be=g[++$]}else this.lines.set(L,z[re--]);var Me=0;for(L=F.length-1;L>=0;L--)F[L].index+=Me,this.lines.onInsertEmitter.fire(F[L]),Me+=F[L].amount;var He=Math.max(0,K+T-this.lines.maxLength);He>0&&this.lines.onTrimEmitter.fire(He)}},s.prototype.stringIndexToBufferIndex=function(o,l,p){for(p===void 0&&(p=!1);l;){var g=this.lines.get(o);if(!g)return[-1,-1];for(var T=p?g.getTrimmedLength():g.length,A=0;A<T;++A)if(g.get(A)[v.CHAR_DATA_WIDTH_INDEX]&&(l-=g.get(A)[v.CHAR_DATA_CHAR_INDEX].length||1),l<0)return[o,A];o++}return[o,0]},s.prototype.translateBufferLineToString=function(o,l,p,g){p===void 0&&(p=0);var T=this.lines.get(o);return T?T.translateToString(l,p,g):""},s.prototype.getWrappedRangeForLine=function(o){for(var l=o,p=o;l>0&&this.lines.get(l).isWrapped;)l--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:l,last:p}},s.prototype.setupTabStops=function(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.options.tabStopWidth)this.tabs[o]=!0},s.prototype.prevStop=function(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.nextStop=function(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o},s.prototype.addMarker=function(o){var l=this,p=new C.Marker(o);return this.markers.push(p),p.register(this.lines.onTrim(function(g){p.line-=g,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(function(g){p.line>=g.index&&(p.line+=g.amount)})),p.register(this.lines.onDelete(function(g){p.line>=g.index&&p.line<g.index+g.amount&&p.dispose(),p.line>g.index&&(p.line-=g.amount)})),p.register(p.onDispose(function(){return l._removeMarker(p)})),p},s.prototype._removeMarker=function(o){this.markers.splice(this.markers.indexOf(o),1)},s.prototype.iterator=function(o,l,p,g,T){return new a(this,o,l,p,g,T)},s}();h.Buffer=d;var a=function(){function s(o,l,p,g,T,A){p===void 0&&(p=0),g===void 0&&(g=o.lines.length),T===void 0&&(T=0),A===void 0&&(A=0),this._buffer=o,this._trimRight=l,this._startIndex=p,this._endIndex=g,this._startOverscan=T,this._endOverscan=A,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return s.prototype.hasNext=function(){return this._current<this._endIndex},s.prototype.next=function(){var o=this._buffer.getWrappedRangeForLine(this._current);o.first<this._startIndex-this._startOverscan&&(o.first=this._startIndex-this._startOverscan),o.last>this._endIndex+this._endOverscan&&(o.last=this._endIndex+this._endOverscan),o.first=Math.max(o.first,0),o.last=Math.min(o.last,this._buffer.lines.length);for(var l="",p=o.first;p<=o.last;++p)l+=this._buffer.translateBufferLineToString(p,this._trimRight);return this._current=o.last+1,{range:o,content:l}},s}();h.BufferStringIterator=a},8437:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLine=h.DEFAULT_ATTR_DATA=void 0;var _=x(482),b=x(643),S=x(511),v=x(3734);h.DEFAULT_ATTR_DATA=Object.freeze(new v.AttributeData);var y=function(){function C(u,f,d){d===void 0&&(d=!1),this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);for(var a=f||S.CellData.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]),s=0;s<u;++s)this.setCell(s,a);this.length=u}return C.prototype.get=function(u){var f=this._data[3*u+0],d=2097151&f;return[this._data[3*u+1],2097152&f?this._combined[u]:d?(0,_.stringFromCodePoint)(d):"",f>>22,2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):d]},C.prototype.set=function(u,f){this._data[3*u+1]=f[b.CHAR_DATA_ATTR_INDEX],f[b.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[3*u+0]=2097152|u|f[b.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=f[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[b.CHAR_DATA_WIDTH_INDEX]<<22},C.prototype.getWidth=function(u){return this._data[3*u+0]>>22},C.prototype.hasWidth=function(u){return 12582912&this._data[3*u+0]},C.prototype.getFg=function(u){return this._data[3*u+1]},C.prototype.getBg=function(u){return this._data[3*u+2]},C.prototype.hasContent=function(u){return 4194303&this._data[3*u+0]},C.prototype.getCodePoint=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&f},C.prototype.isCombined=function(u){return 2097152&this._data[3*u+0]},C.prototype.getString=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u]:2097151&f?(0,_.stringFromCodePoint)(2097151&f):""},C.prototype.loadCell=function(u,f){var d=3*u;return f.content=this._data[d+0],f.fg=this._data[d+1],f.bg=this._data[d+2],2097152&f.content&&(f.combinedData=this._combined[u]),268435456&f.bg&&(f.extended=this._extendedAttrs[u]),f},C.prototype.setCell=function(u,f){2097152&f.content&&(this._combined[u]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=f.content,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg},C.prototype.setCellFromCodePoint=function(u,f,d,a,s,o){268435456&s&&(this._extendedAttrs[u]=o),this._data[3*u+0]=f|d<<22,this._data[3*u+1]=a,this._data[3*u+2]=s},C.prototype.addCodepointToCell=function(u,f){var d=this._data[3*u+0];2097152&d?this._combined[u]+=(0,_.stringFromCodePoint)(f):(2097151&d?(this._combined[u]=(0,_.stringFromCodePoint)(2097151&d)+(0,_.stringFromCodePoint)(f),d&=-2097152,d|=2097152):d=f|1<<22,this._data[3*u+0]=d)},C.prototype.insertCells=function(u,f,d,a){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs),f<this.length-u){for(var s=new S.CellData,o=this.length-u-f-1;o>=0;--o)this.setCell(u+f+o,this.loadCell(u+o,s));for(o=0;o<f;++o)this.setCell(u+o,d)}else for(o=u;o<this.length;++o)this.setCell(o,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs)},C.prototype.deleteCells=function(u,f,d,a){if(u%=this.length,f<this.length-u){for(var s=new S.CellData,o=0;o<this.length-u-f;++o)this.setCell(u+o,this.loadCell(u+f+o,s));for(o=this.length-f;o<this.length;++o)this.setCell(o,d)}else for(o=u;o<this.length;++o)this.setCell(o,d);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs)},C.prototype.replaceCells=function(u,f,d,a){for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new v.ExtendedAttrs);u<f&&u<this.length;)this.setCell(u++,d)},C.prototype.resize=function(u,f){if(u!==this.length){if(u>this.length){var d=new Uint32Array(3*u);this.length&&(3*u<this._data.length?d.set(this._data.subarray(0,3*u)):d.set(this._data)),this._data=d;for(var a=this.length;a<u;++a)this.setCell(a,f)}else if(u){(d=new Uint32Array(3*u)).set(this._data.subarray(0,3*u)),this._data=d;var s=Object.keys(this._combined);for(a=0;a<s.length;a++){var o=parseInt(s[a],10);o>=u&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},C.prototype.fill=function(u){this._combined={},this._extendedAttrs={};for(var f=0;f<this.length;++f)this.setCell(f,u)},C.prototype.copyFrom=function(u){for(var f in this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={},u._combined)this._combined[f]=u._combined[f];for(var f in this._extendedAttrs={},u._extendedAttrs)this._extendedAttrs[f]=u._extendedAttrs[f];this.isWrapped=u.isWrapped},C.prototype.clone=function(){var u=new C(0);for(var f in u._data=new Uint32Array(this._data),u.length=this.length,this._combined)u._combined[f]=this._combined[f];for(var f in this._extendedAttrs)u._extendedAttrs[f]=this._extendedAttrs[f];return u.isWrapped=this.isWrapped,u},C.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0},C.prototype.copyCellsFrom=function(u,f,d,a,s){var o=u._data;if(s)for(var l=a-1;l>=0;l--)for(var p=0;p<3;p++)this._data[3*(d+l)+p]=o[3*(f+l)+p];else for(l=0;l<a;l++)for(p=0;p<3;p++)this._data[3*(d+l)+p]=o[3*(f+l)+p];var g=Object.keys(u._combined);for(p=0;p<g.length;p++){var T=parseInt(g[p],10);T>=f&&(this._combined[T-f+d]=u._combined[T])}},C.prototype.translateToString=function(u,f,d){u===void 0&&(u=!1),f===void 0&&(f=0),d===void 0&&(d=this.length),u&&(d=Math.min(d,this.getTrimmedLength()));for(var a="";f<d;){var s=this._data[3*f+0],o=2097151&s;a+=2097152&s?this._combined[f]:o?(0,_.stringFromCodePoint)(o):b.WHITESPACE_CELL_CHAR,f+=s>>22||1}return a},C}();h.BufferLine=y},4841:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getRangeLength=void 0,h.getRangeLength=function(x,_){if(x.start.y>x.end.y)throw new Error("Buffer range end ("+x.end.x+", "+x.end.y+") cannot be before start ("+x.start.x+", "+x.start.y+")");return _*(x.end.y-x.start.y)+(x.end.x-x.start.x+1)}},4634:(J,h)=>{function x(_,b,S){if(b===_.length-1)return _[b].getTrimmedLength();var v=!_[b].hasContent(S-1)&&_[b].getWidth(S-1)===1,y=_[b+1].getWidth(0)===2;return v&&y?S-1:S}Object.defineProperty(h,"__esModule",{value:!0}),h.getWrappedLineTrimmedLength=h.reflowSmallerGetNewLineLengths=h.reflowLargerApplyNewLayout=h.reflowLargerCreateNewLayout=h.reflowLargerGetLinesToRemove=void 0,h.reflowLargerGetLinesToRemove=function(_,b,S,v,y){for(var C=[],u=0;u<_.length-1;u++){var f=u,d=_.get(++f);if(d.isWrapped){for(var a=[_.get(u)];f<_.length&&d.isWrapped;)a.push(d),d=_.get(++f);if(v>=u&&v<f)u+=a.length-1;else{for(var s=0,o=x(a,s,b),l=1,p=0;l<a.length;){var g=x(a,l,b),T=g-p,A=S-o,B=Math.min(T,A);a[s].copyCellsFrom(a[l],p,o,B,!1),(o+=B)===S&&(s++,o=0),(p+=B)===g&&(l++,p=0),o===0&&s!==0&&a[s-1].getWidth(S-1)===2&&(a[s].copyCellsFrom(a[s-1],S-1,o++,1,!1),a[s-1].setCell(S-1,y))}a[s].replaceCells(o,S,y);for(var D=0,R=a.length-1;R>0&&(R>s||a[R].getTrimmedLength()===0);R--)D++;D>0&&(C.push(u+a.length-D),C.push(D)),u+=a.length-1}}}return C},h.reflowLargerCreateNewLayout=function(_,b){for(var S=[],v=0,y=b[v],C=0,u=0;u<_.length;u++)if(y===u){var f=b[++v];_.onDeleteEmitter.fire({index:u-C,amount:f}),u+=f-1,C+=f,y=b[++v]}else S.push(u);return{layout:S,countRemoved:C}},h.reflowLargerApplyNewLayout=function(_,b){for(var S=[],v=0;v<b.length;v++)S.push(_.get(b[v]));for(v=0;v<S.length;v++)_.set(v,S[v]);_.length=b.length},h.reflowSmallerGetNewLineLengths=function(_,b,S){for(var v=[],y=_.map(function(o,l){return x(_,l,b)}).reduce(function(o,l){return o+l}),C=0,u=0,f=0;f<y;){if(y-f<S){v.push(y-f);break}C+=S;var d=x(_,u,b);C>d&&(C-=d,u++);var a=_[u].getWidth(C-1)===2;a&&C--;var s=a?S-1:S;v.push(s),f+=s}return v},h.getWrappedLineTrimmedLength=x},5295:function(J,h,x){var _,b=this&&this.__extends||(_=function(C,u){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(f[a]=d[a])},_(C,u)},function(C,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=C}_(C,u),C.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.BufferSet=void 0;var S=x(9092),v=x(8460),y=function(C){function u(f,d){var a=C.call(this)||this;return a._optionsService=f,a._bufferService=d,a._onBufferActivate=a.register(new v.EventEmitter),a.reset(),a}return b(u,C),Object.defineProperty(u.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),u.prototype.reset=function(){this._normal=new S.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new S.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(u.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),u.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},u.prototype.activateAltBuffer=function(f){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(f),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},u.prototype.resize=function(f,d){this._normal.resize(f,d),this._alt.resize(f,d)},u.prototype.setupTabStops=function(f){this._normal.setupTabStops(f),this._alt.setupTabStops(f)},u}(x(844).Disposable);h.BufferSet=y},511:function(J,h,x){var _,b=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,a){d.__proto__=a}||function(d,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(d[s]=a[s])},_(u,f)},function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function d(){this.constructor=u}_(u,f),u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)});Object.defineProperty(h,"__esModule",{value:!0}),h.CellData=void 0;var S=x(482),v=x(643),y=x(3734),C=function(u){function f(){var d=u!==null&&u.apply(this,arguments)||this;return d.content=0,d.fg=0,d.bg=0,d.extended=new y.ExtendedAttrs,d.combinedData="",d}return b(f,u),f.fromCharData=function(d){var a=new f;return a.setFromCharData(d),a},f.prototype.isCombined=function(){return 2097152&this.content},f.prototype.getWidth=function(){return this.content>>22},f.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,S.stringFromCodePoint)(2097151&this.content):""},f.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},f.prototype.setFromCharData=function(d){this.fg=d[v.CHAR_DATA_ATTR_INDEX],this.bg=0;var a=!1;if(d[v.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(d[v.CHAR_DATA_CHAR_INDEX].length===2){var s=d[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){var o=d[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(s-55296)+o-56320+65536|d[v.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=d[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[v.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=d[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[v.CHAR_DATA_WIDTH_INDEX]<<22)},f.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},f}(y.AttributeData);h.CellData=C},643:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WHITESPACE_CELL_CODE=h.WHITESPACE_CELL_WIDTH=h.WHITESPACE_CELL_CHAR=h.NULL_CELL_CODE=h.NULL_CELL_WIDTH=h.NULL_CELL_CHAR=h.CHAR_DATA_CODE_INDEX=h.CHAR_DATA_WIDTH_INDEX=h.CHAR_DATA_CHAR_INDEX=h.CHAR_DATA_ATTR_INDEX=h.DEFAULT_ATTR=h.DEFAULT_COLOR=void 0,h.DEFAULT_COLOR=256,h.DEFAULT_ATTR=256|h.DEFAULT_COLOR<<9,h.CHAR_DATA_ATTR_INDEX=0,h.CHAR_DATA_CHAR_INDEX=1,h.CHAR_DATA_WIDTH_INDEX=2,h.CHAR_DATA_CODE_INDEX=3,h.NULL_CELL_CHAR="",h.NULL_CELL_WIDTH=1,h.NULL_CELL_CODE=0,h.WHITESPACE_CELL_CHAR=" ",h.WHITESPACE_CELL_WIDTH=1,h.WHITESPACE_CELL_CODE=32},4863:function(J,h,x){var _,b=this&&this.__extends||(_=function(y,C){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(y,C)},function(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function u(){this.constructor=y}_(y,C),y.prototype=C===null?Object.create(C):(u.prototype=C.prototype,new u)});Object.defineProperty(h,"__esModule",{value:!0}),h.Marker=void 0;var S=x(8460),v=function(y){function C(u){var f=y.call(this)||this;return f.line=u,f._id=C._nextId++,f.isDisposed=!1,f._onDispose=new S.EventEmitter,f}return b(C,y),Object.defineProperty(C.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),y.prototype.dispose.call(this))},C._nextId=1,C}(x(844).Disposable);h.Marker=v},7116:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DEFAULT_CHARSET=h.CHARSETS=void 0,h.CHARSETS={},h.DEFAULT_CHARSET=h.CHARSETS.B,h.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},h.CHARSETS.A={"#":"\xA3"},h.CHARSETS.B=void 0,h.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},h.CHARSETS.C=h.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},h.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},h.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},h.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},h.CHARSETS.E=h.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},h.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},h.CHARSETS.H=h.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(J,h)=>{var x,_;Object.defineProperty(h,"__esModule",{value:!0}),h.C1=h.C0=void 0,(_=h.C0||(h.C0={})).NUL="\0",_.SOH="",_.STX="",_.ETX="",_.EOT="",_.ENQ="",_.ACK="",_.BEL="\x07",_.BS="\b",_.HT="	",_.LF=`
`,_.VT="\v",_.FF="\f",_.CR="\r",_.SO="",_.SI="",_.DLE="",_.DC1="",_.DC2="",_.DC3="",_.DC4="",_.NAK="",_.SYN="",_.ETB="",_.CAN="",_.EM="",_.SUB="",_.ESC="\x1B",_.FS="",_.GS="",_.RS="",_.US="",_.SP=" ",_.DEL="\x7F",(x=h.C1||(h.C1={})).PAD="\x80",x.HOP="\x81",x.BPH="\x82",x.NBH="\x83",x.IND="\x84",x.NEL="\x85",x.SSA="\x86",x.ESA="\x87",x.HTS="\x88",x.HTJ="\x89",x.VTS="\x8A",x.PLD="\x8B",x.PLU="\x8C",x.RI="\x8D",x.SS2="\x8E",x.SS3="\x8F",x.DCS="\x90",x.PU1="\x91",x.PU2="\x92",x.STS="\x93",x.CCH="\x94",x.MW="\x95",x.SPA="\x96",x.EPA="\x97",x.SOS="\x98",x.SGCI="\x99",x.SCI="\x9A",x.CSI="\x9B",x.ST="\x9C",x.OSC="\x9D",x.PM="\x9E",x.APC="\x9F"},7399:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.evaluateKeyboardEvent=void 0;var _=x(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};h.evaluateKeyboardEvent=function(S,v,y,C){var u={type:0,cancel:!1,key:void 0},f=(S.shiftKey?1:0)|(S.altKey?2:0)|(S.ctrlKey?4:0)|(S.metaKey?8:0);switch(S.keyCode){case 0:S.key==="UIKeyInputUpArrow"?u.key=v?_.C0.ESC+"OA":_.C0.ESC+"[A":S.key==="UIKeyInputLeftArrow"?u.key=v?_.C0.ESC+"OD":_.C0.ESC+"[D":S.key==="UIKeyInputRightArrow"?u.key=v?_.C0.ESC+"OC":_.C0.ESC+"[C":S.key==="UIKeyInputDownArrow"&&(u.key=v?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(S.shiftKey){u.key=_.C0.BS;break}if(S.altKey){u.key=_.C0.ESC+_.C0.DEL;break}u.key=_.C0.DEL;break;case 9:if(S.shiftKey){u.key=_.C0.ESC+"[Z";break}u.key=_.C0.HT,u.cancel=!0;break;case 13:u.key=S.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,u.cancel=!0;break;case 27:u.key=_.C0.ESC,S.altKey&&(u.key=_.C0.ESC+_.C0.ESC),u.cancel=!0;break;case 37:if(S.metaKey)break;f?(u.key=_.C0.ESC+"[1;"+(f+1)+"D",u.key===_.C0.ESC+"[1;3D"&&(u.key=_.C0.ESC+(y?"b":"[1;5D"))):u.key=v?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(S.metaKey)break;f?(u.key=_.C0.ESC+"[1;"+(f+1)+"C",u.key===_.C0.ESC+"[1;3C"&&(u.key=_.C0.ESC+(y?"f":"[1;5C"))):u.key=v?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(S.metaKey)break;f?(u.key=_.C0.ESC+"[1;"+(f+1)+"A",y||u.key!==_.C0.ESC+"[1;3A"||(u.key=_.C0.ESC+"[1;5A")):u.key=v?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(S.metaKey)break;f?(u.key=_.C0.ESC+"[1;"+(f+1)+"B",y||u.key!==_.C0.ESC+"[1;3B"||(u.key=_.C0.ESC+"[1;5B")):u.key=v?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:S.shiftKey||S.ctrlKey||(u.key=_.C0.ESC+"[2~");break;case 46:u.key=f?_.C0.ESC+"[3;"+(f+1)+"~":_.C0.ESC+"[3~";break;case 36:u.key=f?_.C0.ESC+"[1;"+(f+1)+"H":v?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:u.key=f?_.C0.ESC+"[1;"+(f+1)+"F":v?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:S.shiftKey?u.type=2:u.key=_.C0.ESC+"[5~";break;case 34:S.shiftKey?u.type=3:u.key=_.C0.ESC+"[6~";break;case 112:u.key=f?_.C0.ESC+"[1;"+(f+1)+"P":_.C0.ESC+"OP";break;case 113:u.key=f?_.C0.ESC+"[1;"+(f+1)+"Q":_.C0.ESC+"OQ";break;case 114:u.key=f?_.C0.ESC+"[1;"+(f+1)+"R":_.C0.ESC+"OR";break;case 115:u.key=f?_.C0.ESC+"[1;"+(f+1)+"S":_.C0.ESC+"OS";break;case 116:u.key=f?_.C0.ESC+"[15;"+(f+1)+"~":_.C0.ESC+"[15~";break;case 117:u.key=f?_.C0.ESC+"[17;"+(f+1)+"~":_.C0.ESC+"[17~";break;case 118:u.key=f?_.C0.ESC+"[18;"+(f+1)+"~":_.C0.ESC+"[18~";break;case 119:u.key=f?_.C0.ESC+"[19;"+(f+1)+"~":_.C0.ESC+"[19~";break;case 120:u.key=f?_.C0.ESC+"[20;"+(f+1)+"~":_.C0.ESC+"[20~";break;case 121:u.key=f?_.C0.ESC+"[21;"+(f+1)+"~":_.C0.ESC+"[21~";break;case 122:u.key=f?_.C0.ESC+"[23;"+(f+1)+"~":_.C0.ESC+"[23~";break;case 123:u.key=f?_.C0.ESC+"[24;"+(f+1)+"~":_.C0.ESC+"[24~";break;default:if(!S.ctrlKey||S.shiftKey||S.altKey||S.metaKey)if(y&&!C||!S.altKey||S.metaKey)!y||S.altKey||S.ctrlKey||S.shiftKey||!S.metaKey?S.key&&!S.ctrlKey&&!S.altKey&&!S.metaKey&&S.keyCode>=48&&S.key.length===1?u.key=S.key:S.key&&S.ctrlKey&&S.key==="_"&&(u.key=_.C0.US):S.keyCode===65&&(u.type=1);else{var d=b[S.keyCode],a=d==null?void 0:d[S.shiftKey?1:0];if(a)u.key=_.C0.ESC+a;else if(S.keyCode>=65&&S.keyCode<=90){var s=S.ctrlKey?S.keyCode-64:S.keyCode+32;u.key=_.C0.ESC+String.fromCharCode(s)}}else S.keyCode>=65&&S.keyCode<=90?u.key=String.fromCharCode(S.keyCode-64):S.keyCode===32?u.key=_.C0.NUL:S.keyCode>=51&&S.keyCode<=55?u.key=String.fromCharCode(S.keyCode-51+27):S.keyCode===56?u.key=_.C0.DEL:S.keyCode===219?u.key=_.C0.ESC:S.keyCode===220?u.key=_.C0.FS:S.keyCode===221&&(u.key=_.C0.GS)}return u}},482:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Utf8ToUtf32=h.StringToUtf32=h.utf32ToString=h.stringFromCodePoint=void 0,h.stringFromCodePoint=function(b){return b>65535?(b-=65536,String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):String.fromCharCode(b)},h.utf32ToString=function(b,S,v){S===void 0&&(S=0),v===void 0&&(v=b.length);for(var y="",C=S;C<v;++C){var u=b[C];u>65535?(u-=65536,y+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):y+=String.fromCharCode(u)}return y};var x=function(){function b(){this._interim=0}return b.prototype.clear=function(){this._interim=0},b.prototype.decode=function(S,v){var y=S.length;if(!y)return 0;var C=0,u=0;this._interim&&(56320<=(a=S.charCodeAt(u++))&&a<=57343?v[C++]=1024*(this._interim-55296)+a-56320+65536:(v[C++]=this._interim,v[C++]=a),this._interim=0);for(var f=u;f<y;++f){var d=S.charCodeAt(f);if(55296<=d&&d<=56319){if(++f>=y)return this._interim=d,C;var a;56320<=(a=S.charCodeAt(f))&&a<=57343?v[C++]=1024*(d-55296)+a-56320+65536:(v[C++]=d,v[C++]=a)}else d!==65279&&(v[C++]=d)}return C},b}();h.StringToUtf32=x;var _=function(){function b(){this.interim=new Uint8Array(3)}return b.prototype.clear=function(){this.interim.fill(0)},b.prototype.decode=function(S,v){var y=S.length;if(!y)return 0;var C,u,f,d,a=0,s=0,o=0;if(this.interim[0]){var l=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;for(var g=0,T=void 0;(T=63&this.interim[++g])&&g<4;)p<<=6,p|=T;for(var A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=A-g;o<B;){if(o>=y)return 0;if((192&(T=S[o++]))!=128){o--,l=!0;break}this.interim[g++]=T,p<<=6,p|=63&T}l||(A===2?p<128?o--:v[a++]=p:A===3?p<2048||p>=55296&&p<=57343||p===65279||(v[a++]=p):p<65536||p>1114111||(v[a++]=p)),this.interim.fill(0)}for(var D=y-4,R=o;R<y;){for(;!(!(R<D)||128&(C=S[R])||128&(u=S[R+1])||128&(f=S[R+2])||128&(d=S[R+3]));)v[a++]=C,v[a++]=u,v[a++]=f,v[a++]=d,R+=4;if((C=S[R++])<128)v[a++]=C;else if((224&C)==192){if(R>=y)return this.interim[0]=C,a;if((192&(u=S[R++]))!=128){R--;continue}if((s=(31&C)<<6|63&u)<128){R--;continue}v[a++]=s}else if((240&C)==224){if(R>=y)return this.interim[0]=C,a;if((192&(u=S[R++]))!=128){R--;continue}if(R>=y)return this.interim[0]=C,this.interim[1]=u,a;if((192&(f=S[R++]))!=128){R--;continue}if((s=(15&C)<<12|(63&u)<<6|63&f)<2048||s>=55296&&s<=57343||s===65279)continue;v[a++]=s}else if((248&C)==240){if(R>=y)return this.interim[0]=C,a;if((192&(u=S[R++]))!=128){R--;continue}if(R>=y)return this.interim[0]=C,this.interim[1]=u,a;if((192&(f=S[R++]))!=128){R--;continue}if(R>=y)return this.interim[0]=C,this.interim[1]=u,this.interim[2]=f,a;if((192&(d=S[R++]))!=128){R--;continue}if((s=(7&C)<<18|(63&u)<<12|(63&f)<<6|63&d)<65536||s>1114111)continue;v[a++]=s}}return a},b}();h.Utf8ToUtf32=_},225:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeV6=void 0;var _,b=x(8273),S=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],v=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function C(){if(this.version="6",!_){_=new Uint8Array(65536),(0,b.fill)(_,1),_[0]=0,(0,b.fill)(_,0,1,32),(0,b.fill)(_,0,127,160),(0,b.fill)(_,2,4352,4448),_[9001]=2,_[9002]=2,(0,b.fill)(_,2,11904,42192),_[12351]=1,(0,b.fill)(_,2,44032,55204),(0,b.fill)(_,2,63744,64256),(0,b.fill)(_,2,65040,65050),(0,b.fill)(_,2,65072,65136),(0,b.fill)(_,2,65280,65377),(0,b.fill)(_,2,65504,65511);for(var u=0;u<S.length;++u)(0,b.fill)(_,0,S[u][0],S[u][1]+1)}}return C.prototype.wcwidth=function(u){return u<32?0:u<127?1:u<65536?_[u]:function(f,d){var a,s=0,o=d.length-1;if(f<d[0][0]||f>d[o][1])return!1;for(;o>=s;)if(f>d[a=s+o>>1][1])s=a+1;else{if(!(f<d[a][0]))return!0;o=a-1}return!1}(u,v)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1},C}();h.UnicodeV6=y},5981:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WriteBuffer=void 0;var x=typeof queueMicrotask=="undefined"?function(b){Promise.resolve().then(b)}:queueMicrotask,_=function(){function b(S){this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return b.prototype.writeSync=function(S,v){if(v!==void 0&&this._syncCalls>v)this._syncCalls=0;else if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);var C=this._callbacks.shift();C&&C()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},b.prototype.write=function(S,v){var y=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return y._innerWrite()})),this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(v)},b.prototype._innerWrite=function(S,v){var y=this;S===void 0&&(S=0),v===void 0&&(v=!0);for(var C=S||Date.now();this._writeBuffer.length>this._bufferOffset;){var u=this._writeBuffer[this._bufferOffset],f=this._action(u,v);if(f)return void f.catch(function(a){return x(function(){throw a}),Promise.resolve(!1)}).then(function(a){return Date.now()-C>=12?setTimeout(function(){return y._innerWrite(0,a)}):y._innerWrite(C,a)});var d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return y._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},b}();h.WriteBuffer=_},5941:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.toRgbString=h.parseColor=void 0;var x=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function b(S,v){var y=S.toString(16),C=y.length<2?"0"+y:y;switch(v){case 4:return y[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}h.parseColor=function(S){if(S){var v=S.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);var y=x.exec(v);if(y){var C=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/C*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/C*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/C*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),_.exec(v)&&[3,6,9,12].includes(v.length))){for(var u=v.length/3,f=[0,0,0],d=0;d<3;++d){var a=parseInt(v.slice(u*d,u*d+u),16);f[d]=u===1?a<<4:u===2?a:u===3?a>>4:a>>8}return f}}},h.toRgbString=function(S,v){v===void 0&&(v=16);var y=S[0],C=S[1],u=S[2];return"rgb:"+b(y,v)+"/"+b(C,v)+"/"+b(u,v)}},5770:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PAYLOAD_LIMIT=void 0,h.PAYLOAD_LIMIT=1e7},6351:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DcsHandler=h.DcsParser=void 0;var _=x(482),b=x(8742),S=x(5770),v=[],y=function(){function f(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return f.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=v},f.prototype.registerHandler=function(d,a){this._handlers[d]===void 0&&(this._handlers[d]=[]);var s=this._handlers[d];return s.push(a),{dispose:function(){var o=s.indexOf(a);o!==-1&&s.splice(o,1)}}},f.prototype.clearHandler=function(d){this._handlers[d]&&delete this._handlers[d]},f.prototype.setHandlerFallback=function(d){this._handlerFb=d},f.prototype.reset=function(){if(this._active.length)for(var d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0},f.prototype.hook=function(d,a){if(this.reset(),this._ident=d,this._active=this._handlers[d]||v,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].hook(a);else this._handlerFb(this._ident,"HOOK",a)},f.prototype.put=function(d,a,s){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(d,a,s);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(d,a,s))},f.prototype.unhook=function(d,a){if(a===void 0&&(a=!0),this._active.length){var s=!1,o=this._active.length-1,l=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=a,l=this._stack.fallThrough,this._stack.paused=!1),!l&&s===!1){for(;o>=0&&(s=this._active[o].unhook(d))!==!0;o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if((s=this._active[o].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",d);this._active=v,this._ident=0},f}();h.DcsParser=y;var C=new b.Params;C.addParam(0);var u=function(){function f(d){this._handler=d,this._data="",this._params=C,this._hitLimit=!1}return f.prototype.hook=function(d){this._params=d.length>1||d.params[0]?d.clone():C,this._data="",this._hitLimit=!1},f.prototype.put=function(d,a,s){this._hitLimit||(this._data+=(0,_.utf32ToString)(d,a,s),this._data.length>S.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},f.prototype.unhook=function(d){var a=this,s=!1;if(this._hitLimit)s=!1;else if(d&&(s=this._handler(this._data,this._params))instanceof Promise)return s.then(function(o){return a._params=C,a._data="",a._hitLimit=!1,o});return this._params=C,this._data="",this._hitLimit=!1,s},f}();h.DcsHandler=u},2015:function(J,h,x){var _,b=this&&this.__extends||(_=function(s,o){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(l[g]=p[g])},_(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=s}_(s,o),s.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.EscapeSequenceParser=h.VT500_TRANSITION_TABLE=h.TransitionTable=void 0;var S=x(844),v=x(8273),y=x(8742),C=x(6242),u=x(6351),f=function(){function s(o){this.table=new Uint8Array(o)}return s.prototype.setDefault=function(o,l){(0,v.fill)(this.table,o<<4|l)},s.prototype.add=function(o,l,p,g){this.table[l<<8|o]=p<<4|g},s.prototype.addMany=function(o,l,p,g){for(var T=0;T<o.length;T++)this.table[l<<8|o[T]]=p<<4|g},s}();h.TransitionTable=f;var d=160;h.VT500_TRANSITION_TABLE=function(){var s=new f(4095),o=Array.apply(null,Array(256)).map(function(B,D){return D}),l=function(B,D){return o.slice(B,D)},p=l(32,127),g=l(0,24);g.push(25),g.push.apply(g,l(28,32));var T,A=l(0,14);for(T in s.setDefault(1,0),s.addMany(p,0,2,0),A)s.addMany([24,26,153,154],T,3,0),s.addMany(l(128,144),T,3,0),s.addMany(l(144,152),T,3,0),s.add(156,T,0,0),s.add(27,T,11,1),s.add(157,T,4,8),s.addMany([152,158,159],T,0,7),s.add(155,T,11,3),s.add(144,T,11,9);return s.addMany(g,0,3,0),s.addMany(g,1,3,1),s.add(127,1,0,1),s.addMany(g,8,0,8),s.addMany(g,3,3,3),s.add(127,3,0,3),s.addMany(g,4,3,4),s.add(127,4,0,4),s.addMany(g,6,3,6),s.addMany(g,5,3,5),s.add(127,5,0,5),s.addMany(g,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(p,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(l(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(p,7,0,7),s.addMany(g,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(l(64,127),3,7,0),s.addMany(l(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(l(48,60),4,8,4),s.addMany(l(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(l(32,64),6,0,6),s.add(127,6,0,6),s.addMany(l(64,127),6,0,0),s.addMany(l(32,48),3,9,5),s.addMany(l(32,48),5,9,5),s.addMany(l(48,64),5,0,6),s.addMany(l(64,127),5,7,0),s.addMany(l(32,48),4,9,5),s.addMany(l(32,48),1,9,2),s.addMany(l(32,48),2,9,2),s.addMany(l(48,127),2,10,0),s.addMany(l(48,80),1,10,0),s.addMany(l(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(l(96,127),1,10,0),s.add(80,1,11,9),s.addMany(g,9,0,9),s.add(127,9,0,9),s.addMany(l(28,32),9,0,9),s.addMany(l(32,48),9,9,12),s.addMany(l(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(g,11,0,11),s.addMany(l(32,128),11,0,11),s.addMany(l(28,32),11,0,11),s.addMany(g,10,0,10),s.add(127,10,0,10),s.addMany(l(28,32),10,0,10),s.addMany(l(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(l(32,48),10,9,12),s.addMany(g,12,0,12),s.add(127,12,0,12),s.addMany(l(28,32),12,0,12),s.addMany(l(32,48),12,9,12),s.addMany(l(48,64),12,0,11),s.addMany(l(64,127),12,12,13),s.addMany(l(64,127),10,12,13),s.addMany(l(64,127),9,12,13),s.addMany(g,13,13,13),s.addMany(p,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(d,0,2,0),s.add(d,8,5,8),s.add(d,6,0,6),s.add(d,11,0,11),s.add(d,13,13,13),s}();var a=function(s){function o(l){l===void 0&&(l=h.VT500_TRANSITION_TABLE);var p=s.call(this)||this;return p._transitions=l,p._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},p.initialState=0,p.currentState=p.initialState,p._params=new y.Params,p._params.addParam(0),p._collect=0,p.precedingCodepoint=0,p._printHandlerFb=function(g,T,A){},p._executeHandlerFb=function(g){},p._csiHandlerFb=function(g,T){},p._escHandlerFb=function(g){},p._errorHandlerFb=function(g){return g},p._printHandler=p._printHandlerFb,p._executeHandlers=Object.create(null),p._csiHandlers=Object.create(null),p._escHandlers=Object.create(null),p._oscParser=new C.OscParser,p._dcsParser=new u.DcsParser,p._errorHandler=p._errorHandlerFb,p.registerEscHandler({final:"\\"},function(){return!0}),p}return b(o,s),o.prototype._identifier=function(l,p){p===void 0&&(p=[64,126]);var g=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if((g=l.prefix.charCodeAt(0))&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var T=0;T<l.intermediates.length;++T){var A=l.intermediates.charCodeAt(T);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=A}}if(l.final.length!==1)throw new Error("final must be a single byte");var B=l.final.charCodeAt(0);if(p[0]>B||B>p[1])throw new Error("final must be in range "+p[0]+" .. "+p[1]);return(g<<=8)|B},o.prototype.identToString=function(l){for(var p=[];l;)p.push(String.fromCharCode(255&l)),l>>=8;return p.reverse().join("")},o.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},o.prototype.setPrintHandler=function(l){this._printHandler=l},o.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},o.prototype.registerEscHandler=function(l,p){var g=this._identifier(l,[48,126]);this._escHandlers[g]===void 0&&(this._escHandlers[g]=[]);var T=this._escHandlers[g];return T.push(p),{dispose:function(){var A=T.indexOf(p);A!==-1&&T.splice(A,1)}}},o.prototype.clearEscHandler=function(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]},o.prototype.setEscHandlerFallback=function(l){this._escHandlerFb=l},o.prototype.setExecuteHandler=function(l,p){this._executeHandlers[l.charCodeAt(0)]=p},o.prototype.clearExecuteHandler=function(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]},o.prototype.setExecuteHandlerFallback=function(l){this._executeHandlerFb=l},o.prototype.registerCsiHandler=function(l,p){var g=this._identifier(l);this._csiHandlers[g]===void 0&&(this._csiHandlers[g]=[]);var T=this._csiHandlers[g];return T.push(p),{dispose:function(){var A=T.indexOf(p);A!==-1&&T.splice(A,1)}}},o.prototype.clearCsiHandler=function(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]},o.prototype.setCsiHandlerFallback=function(l){this._csiHandlerFb=l},o.prototype.registerDcsHandler=function(l,p){return this._dcsParser.registerHandler(this._identifier(l),p)},o.prototype.clearDcsHandler=function(l){this._dcsParser.clearHandler(this._identifier(l))},o.prototype.setDcsHandlerFallback=function(l){this._dcsParser.setHandlerFallback(l)},o.prototype.registerOscHandler=function(l,p){return this._oscParser.registerHandler(l,p)},o.prototype.clearOscHandler=function(l){this._oscParser.clearHandler(l)},o.prototype.setOscHandlerFallback=function(l){this._oscParser.setHandlerFallback(l)},o.prototype.setErrorHandler=function(l){this._errorHandler=l},o.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},o.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},o.prototype._preserveStack=function(l,p,g,T,A){this._parseStack.state=l,this._parseStack.handlers=p,this._parseStack.handlerPos=g,this._parseStack.transition=T,this._parseStack.chunkPos=A},o.prototype.parse=function(l,p,g){var T,A=0,B=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(g===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var R=this._parseStack.handlers,E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(g===!1&&E>-1){for(;E>=0&&(T=R[E](this._params))!==!0;E--)if(T instanceof Promise)return this._parseStack.handlerPos=E,T}this._parseStack.handlers=[];break;case 4:if(g===!1&&E>-1){for(;E>=0&&(T=R[E]())!==!0;E--)if(T instanceof Promise)return this._parseStack.handlerPos=E,T}this._parseStack.handlers=[];break;case 6:if(A=l[this._parseStack.chunkPos],T=this._dcsParser.unhook(A!==24&&A!==26,g))return T;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(A=l[this._parseStack.chunkPos],T=this._oscParser.end(A!==24&&A!==26,g))return T;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var I=D;I<p;++I){switch(A=l[I],(B=this._transitions.table[this.currentState<<8|(A<160?A:d)])>>4){case 2:for(var w=I+1;;++w){if(w>=p||(A=l[w])<32||A>126&&A<d){this._printHandler(l,I,w),I=w-1;break}if(++w>=p||(A=l[w])<32||A>126&&A<d){this._printHandler(l,I,w),I=w-1;break}if(++w>=p||(A=l[w])<32||A>126&&A<d){this._printHandler(l,I,w),I=w-1;break}if(++w>=p||(A=l[w])<32||A>126&&A<d){this._printHandler(l,I,w),I=w-1;break}}break;case 3:this._executeHandlers[A]?this._executeHandlers[A]():this._executeHandlerFb(A),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:I,code:A,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var U=(R=this._csiHandlers[this._collect<<8|A])?R.length-1:-1;U>=0&&(T=R[U](this._params))!==!0;U--)if(T instanceof Promise)return this._preserveStack(3,R,U,B,I),T;U<0&&this._csiHandlerFb(this._collect<<8|A,this._params),this.precedingCodepoint=0;break;case 8:do switch(A){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(A-48)}while(++I<p&&(A=l[I])>47&&A<60);I--;break;case 9:this._collect<<=8,this._collect|=A;break;case 10:for(var N=this._escHandlers[this._collect<<8|A],L=N?N.length-1:-1;L>=0&&(T=N[L]())!==!0;L--)if(T instanceof Promise)return this._preserveStack(4,N,L,B,I),T;L<0&&this._escHandlerFb(this._collect<<8|A),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|A,this._params);break;case 13:for(var O=I+1;;++O)if(O>=p||(A=l[O])===24||A===26||A===27||A>127&&A<d){this._dcsParser.put(l,I,O),I=O-1;break}break;case 14:if(T=this._dcsParser.unhook(A!==24&&A!==26))return this._preserveStack(6,[],0,B,I),T;A===27&&(B|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var W=I+1;;W++)if(W>=p||(A=l[W])<32||A>127&&A<d){this._oscParser.put(l,I,W),I=W-1;break}break;case 6:if(T=this._oscParser.end(A!==24&&A!==26))return this._preserveStack(5,[],0,B,I),T;A===27&&(B|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&B}},o}(S.Disposable);h.EscapeSequenceParser=a},6242:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OscHandler=h.OscParser=void 0;var _=x(5770),b=x(482),S=[],v=function(){function C(){this._state=0,this._active=S,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return C.prototype.registerHandler=function(u,f){this._handlers[u]===void 0&&(this._handlers[u]=[]);var d=this._handlers[u];return d.push(f),{dispose:function(){var a=d.indexOf(f);a!==-1&&d.splice(a,1)}}},C.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},C.prototype.setHandlerFallback=function(u){this._handlerFb=u},C.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=S},C.prototype.reset=function(){if(this._state===2)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=S,this._id=-1,this._state=0},C.prototype._start=function(){if(this._active=this._handlers[this._id]||S,this._active.length)for(var u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")},C.prototype._put=function(u,f,d){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(u,f,d);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(u,f,d))},C.prototype.start=function(){this.reset(),this._state=1},C.prototype.put=function(u,f,d){if(this._state!==3){if(this._state===1)for(;f<d;){var a=u[f++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&d-f>0&&this._put(u,f,d)}},C.prototype.end=function(u,f){if(f===void 0&&(f=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var d=!1,a=this._active.length-1,s=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,d=f,s=this._stack.fallThrough,this._stack.paused=!1),!s&&d===!1){for(;a>=0&&(d=this._active[a].end(u))!==!0;a--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,d;a--}for(;a>=0;a--)if((d=this._active[a].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",u);this._active=S,this._id=-1,this._state=0}},C}();h.OscParser=v;var y=function(){function C(u){this._handler=u,this._data="",this._hitLimit=!1}return C.prototype.start=function(){this._data="",this._hitLimit=!1},C.prototype.put=function(u,f,d){this._hitLimit||(this._data+=(0,b.utf32ToString)(u,f,d),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},C.prototype.end=function(u){var f=this,d=!1;if(this._hitLimit)d=!1;else if(u&&(d=this._handler(this._data))instanceof Promise)return d.then(function(a){return f._data="",f._hitLimit=!1,a});return this._data="",this._hitLimit=!1,d},C}();h.OscHandler=y},8742:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Params=void 0;var x=2147483647,_=function(){function b(S,v){if(S===void 0&&(S=32),v===void 0&&(v=32),this.maxLength=S,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(S),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(S),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return b.fromArray=function(S){var v=new b;if(!S.length)return v;for(var y=Array.isArray(S[0])?1:0;y<S.length;++y){var C=S[y];if(Array.isArray(C))for(var u=0;u<C.length;++u)v.addSubParam(C[u]);else v.addParam(C)}return v},b.prototype.clone=function(){var S=new b(this.maxLength,this.maxSubParamsLength);return S.params.set(this.params),S.length=this.length,S._subParams.set(this._subParams),S._subParamsLength=this._subParamsLength,S._subParamsIdx.set(this._subParamsIdx),S._rejectDigits=this._rejectDigits,S._rejectSubDigits=this._rejectSubDigits,S._digitIsSub=this._digitIsSub,S},b.prototype.toArray=function(){for(var S=[],v=0;v<this.length;++v){S.push(this.params[v]);var y=this._subParamsIdx[v]>>8,C=255&this._subParamsIdx[v];C-y>0&&S.push(Array.prototype.slice.call(this._subParams,y,C))}return S},b.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},b.prototype.addParam=function(S){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=S>x?x:S}},b.prototype.addSubParam=function(S){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(S<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=S>x?x:S,this._subParamsIdx[this.length-1]++}},b.prototype.hasSubParams=function(S){return(255&this._subParamsIdx[S])-(this._subParamsIdx[S]>>8)>0},b.prototype.getSubParams=function(S){var v=this._subParamsIdx[S]>>8,y=255&this._subParamsIdx[S];return y-v>0?this._subParams.subarray(v,y):null},b.prototype.getSubParamsAll=function(){for(var S={},v=0;v<this.length;++v){var y=this._subParamsIdx[v]>>8,C=255&this._subParamsIdx[v];C-y>0&&(S[v]=this._subParams.slice(y,C))}return S},b.prototype.addDigit=function(S){var v;if(!(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var y=this._digitIsSub?this._subParams:this.params,C=y[v-1];y[v-1]=~C?Math.min(10*C+S,x):S}},b}();h.Params=_},5741:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AddonManager=void 0;var x=function(){function _(){this._addons=[]}return _.prototype.dispose=function(){for(var b=this._addons.length-1;b>=0;b--)this._addons[b].instance.dispose()},_.prototype.loadAddon=function(b,S){var v=this,y={instance:S,dispose:S.dispose,isDisposed:!1};this._addons.push(y),S.dispose=function(){return v._wrappedAddonDispose(y)},S.activate(b)},_.prototype._wrappedAddonDispose=function(b){if(!b.isDisposed){for(var S=-1,v=0;v<this._addons.length;v++)if(this._addons[v]===b){S=v;break}if(S===-1)throw new Error("Could not dispose an addon that has not been loaded");b.isDisposed=!0,b.dispose.apply(b.instance),this._addons.splice(S,1)}},_}();h.AddonManager=x},8771:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferApiView=void 0;var _=x(3785),b=x(511),S=function(){function v(y,C){this._buffer=y,this.type=C}return v.prototype.init=function(y){return this._buffer=y,this},Object.defineProperty(v.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),v.prototype.getLine=function(y){var C=this._buffer.lines.get(y);if(C)return new _.BufferLineApiView(C)},v.prototype.getNullCell=function(){return new b.CellData},v}();h.BufferApiView=S},3785:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLineApiView=void 0;var _=x(511),b=function(){function S(v){this._line=v}return Object.defineProperty(S.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),S.prototype.getCell=function(v,y){if(!(v<0||v>=this._line.length))return y?(this._line.loadCell(v,y),y):this._line.loadCell(v,new _.CellData)},S.prototype.translateToString=function(v,y,C){return this._line.translateToString(v,y,C)},S}();h.BufferLineApiView=b},8285:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferNamespaceApi=void 0;var _=x(8771),b=x(8460),S=function(){function v(y){var C=this;this._core=y,this._onBufferChange=new b.EventEmitter,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return C._onBufferChange.fire(C.active)})}return Object.defineProperty(v.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),v}();h.BufferNamespaceApi=S},7975:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ParserApi=void 0;var x=function(){function _(b){this._core=b}return _.prototype.registerCsiHandler=function(b,S){return this._core.registerCsiHandler(b,function(v){return S(v.toArray())})},_.prototype.addCsiHandler=function(b,S){return this.registerCsiHandler(b,S)},_.prototype.registerDcsHandler=function(b,S){return this._core.registerDcsHandler(b,function(v,y){return S(v,y.toArray())})},_.prototype.addDcsHandler=function(b,S){return this.registerDcsHandler(b,S)},_.prototype.registerEscHandler=function(b,S){return this._core.registerEscHandler(b,S)},_.prototype.addEscHandler=function(b,S){return this.registerEscHandler(b,S)},_.prototype.registerOscHandler=function(b,S){return this._core.registerOscHandler(b,S)},_.prototype.addOscHandler=function(b,S){return this.registerOscHandler(b,S)},_}();h.ParserApi=x},7090:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeApi=void 0;var x=function(){function _(b){this._core=b}return _.prototype.register=function(b){this._core.unicodeService.register(b)},Object.defineProperty(_.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(b){this._core.unicodeService.activeVersion=b},enumerable:!1,configurable:!0}),_}();h.UnicodeApi=x},744:function(J,h,x){var _,b=this&&this.__extends||(_=function(a,s){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])},_(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=a}_(a,s),a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}),S=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},v=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.BufferService=h.MINIMUM_ROWS=h.MINIMUM_COLS=void 0;var y=x(2585),C=x(5295),u=x(8460),f=x(844);h.MINIMUM_COLS=2,h.MINIMUM_ROWS=1;var d=function(a){function s(o){var l=a.call(this)||this;return l._optionsService=o,l.isUserScrolling=!1,l._onResize=new u.EventEmitter,l._onScroll=new u.EventEmitter,l.cols=Math.max(o.options.cols||0,h.MINIMUM_COLS),l.rows=Math.max(o.options.rows||0,h.MINIMUM_ROWS),l.buffers=new C.BufferSet(o,l),l}return b(s,a),Object.defineProperty(s.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),s.prototype.dispose=function(){a.prototype.dispose.call(this),this.buffers.dispose()},s.prototype.resize=function(o,l){this.cols=o,this.rows=l,this.buffers.resize(o,l),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:o,rows:l})},s.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},s.prototype.scroll=function(o,l){l===void 0&&(l=!1);var p,g=this.buffer;(p=this._cachedBlankLine)&&p.length===this.cols&&p.getFg(0)===o.fg&&p.getBg(0)===o.bg||(p=g.getBlankLine(o,l),this._cachedBlankLine=p),p.isWrapped=l;var T=g.ybase+g.scrollTop,A=g.ybase+g.scrollBottom;if(g.scrollTop===0){var B=g.lines.isFull;A===g.lines.length-1?B?g.lines.recycle().copyFrom(p):g.lines.push(p.clone()):g.lines.splice(A+1,0,p.clone()),B?this.isUserScrolling&&(g.ydisp=Math.max(g.ydisp-1,0)):(g.ybase++,this.isUserScrolling||g.ydisp++)}else{var D=A-T+1;g.lines.shiftElements(T+1,D-1,-1),g.lines.set(A,p.clone())}this.isUserScrolling||(g.ydisp=g.ybase),this._onScroll.fire(g.ydisp)},s.prototype.scrollLines=function(o,l,p){var g=this.buffer;if(o<0){if(g.ydisp===0)return;this.isUserScrolling=!0}else o+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);var T=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+o,g.ybase),0),T!==g.ydisp&&(l||this._onScroll.fire(g.ydisp))},s.prototype.scrollPages=function(o){this.scrollLines(o*(this.rows-1))},s.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},s.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},s.prototype.scrollToLine=function(o){var l=o-this.buffer.ydisp;l!==0&&this.scrollLines(l)},S([v(0,y.IOptionsService)],s)}(f.Disposable);h.BufferService=d},7994:(J,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CharsetService=void 0;var x=function(){function _(){this.glevel=0,this._charsets=[]}return _.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},_.prototype.setgLevel=function(b){this.glevel=b,this.charset=this._charsets[b]},_.prototype.setgCharset=function(b,S){this._charsets[b]=S,this.glevel===b&&(this.charset=S)},_}();h.CharsetService=x},1753:function(J,h,x){var _=this&&this.__decorate||function(a,s,o,l){var p,g=arguments.length,T=g<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(a,s,o,l);else for(var A=a.length-1;A>=0;A--)(p=a[A])&&(T=(g<3?p(T):g>3?p(s,o,T):p(s,o))||T);return g>3&&T&&Object.defineProperty(s,o,T),T},b=this&&this.__param||function(a,s){return function(o,l){s(o,l,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreMouseService=void 0;var S=x(2585),v=x(8460),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(a){return a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)}},VT200:{events:19,restrict:function(a){return a.action!==32}},DRAG:{events:23,restrict:function(a){return a.action!==32||a.button!==3}},ANY:{events:31,restrict:function(a){return!0}}};function C(a,s){var o=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(o|=64,o|=a.action):(o|=3&a.button,4&a.button&&(o|=64),8&a.button&&(o|=128),a.action===32?o|=32:a.action!==0||s||(o|=3)),o}var u=String.fromCharCode,f={DEFAULT:function(a){var s=[C(a,!1)+32,a.col+32,a.row+32];return s[0]>255||s[1]>255||s[2]>255?"":"\x1B[M"+u(s[0])+u(s[1])+u(s[2])},SGR:function(a){var s=a.action===0&&a.button!==4?"m":"M";return"\x1B[<"+C(a,!0)+";"+a.col+";"+a.row+s}},d=function(){function a(s,o){this._bufferService=s,this._coreService=o,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new v.EventEmitter,this._lastEvent=null;for(var l=0,p=Object.keys(y);l<p.length;l++){var g=p[l];this.addProtocol(g,y[g])}for(var T=0,A=Object.keys(f);T<A.length;T++){var B=A[T];this.addEncoding(B,f[B])}this.reset()}return a.prototype.addProtocol=function(s,o){this._protocols[s]=o},a.prototype.addEncoding=function(s,o){this._encodings[s]=o},Object.defineProperty(a.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(s){if(!this._protocols[s])throw new Error('unknown protocol "'+s+'"');this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(s){if(!this._encodings[s])throw new Error('unknown encoding "'+s+'"');this._activeEncoding=s},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(a.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),a.prototype.triggerMouseEvent=function(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,s))||!this._protocols[this._activeProtocol].restrict(s))return!1;var o=this._encodings[this._activeEncoding](s);return o&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(o):this._coreService.triggerDataEvent(o,!0)),this._lastEvent=s,!0},a.prototype.explainEvents=function(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}},a.prototype._compareEvents=function(s,o){return s.col===o.col&&s.row===o.row&&s.button===o.button&&s.action===o.action&&s.ctrl===o.ctrl&&s.alt===o.alt&&s.shift===o.shift},_([b(0,S.IBufferService),b(1,S.ICoreService)],a)}();h.CoreMouseService=d},6975:function(J,h,x){var _,b=this&&this.__extends||(_=function(o,l){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(p[T]=g[T])},_(o,l)},function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=o}_(o,l),o.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}),S=this&&this.__decorate||function(o,l,p,g){var T,A=arguments.length,B=A<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(o,l,p,g);else for(var D=o.length-1;D>=0;D--)(T=o[D])&&(B=(A<3?T(B):A>3?T(l,p,B):T(l,p))||B);return A>3&&B&&Object.defineProperty(l,p,B),B},v=this&&this.__param||function(o,l){return function(p,g){l(p,g,o)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreService=void 0;var y=x(2585),C=x(8460),u=x(1439),f=x(844),d=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),s=function(o){function l(p,g,T,A){var B=o.call(this)||this;return B._bufferService=g,B._logService=T,B._optionsService=A,B.isCursorInitialized=!1,B.isCursorHidden=!1,B._onData=B.register(new C.EventEmitter),B._onUserInput=B.register(new C.EventEmitter),B._onBinary=B.register(new C.EventEmitter),B._scrollToBottom=p,B.register({dispose:function(){return B._scrollToBottom=void 0}}),B.modes=(0,u.clone)(d),B.decPrivateModes=(0,u.clone)(a),B}return b(l,o),Object.defineProperty(l.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.modes=(0,u.clone)(d),this.decPrivateModes=(0,u.clone)(a)},l.prototype.triggerDataEvent=function(p,g){if(g===void 0&&(g=!1),!this._optionsService.options.disableStdin){var T=this._bufferService.buffer;T.ybase!==T.ydisp&&this._scrollToBottom(),g&&this._onUserInput.fire(),this._logService.debug('sending data "'+p+'"',function(){return p.split("").map(function(A){return A.charCodeAt(0)})}),this._onData.fire(p)}},l.prototype.triggerBinaryEvent=function(p){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+p+'"',function(){return p.split("").map(function(g){return g.charCodeAt(0)})}),this._onBinary.fire(p))},S([v(1,y.IBufferService),v(2,y.ILogService),v(3,y.IOptionsService)],l)}(f.Disposable);h.CoreService=s},3730:function(J,h,x){var _=this&&this.__decorate||function(y,C,u,f){var d,a=arguments.length,s=a<3?C:f===null?f=Object.getOwnPropertyDescriptor(C,u):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(y,C,u,f);else for(var o=y.length-1;o>=0;o--)(d=y[o])&&(s=(a<3?d(s):a>3?d(C,u,s):d(C,u))||s);return a>3&&s&&Object.defineProperty(C,u,s),s},b=this&&this.__param||function(y,C){return function(u,f){C(u,f,y)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DirtyRowService=void 0;var S=x(2585),v=function(){function y(C){this._bufferService=C,this.clearRange()}return Object.defineProperty(y.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),y.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},y.prototype.markDirty=function(C){C<this._start?this._start=C:C>this._end&&(this._end=C)},y.prototype.markRangeDirty=function(C,u){if(C>u){var f=C;C=u,u=f}C<this._start&&(this._start=C),u>this._end&&(this._end=u)},y.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},_([b(0,S.IBufferService)],y)}();h.DirtyRowService=v},4348:function(J,h,x){var _=this&&this.__spreadArray||function(C,u,f){if(f||arguments.length===2)for(var d,a=0,s=u.length;a<s;a++)!d&&a in u||(d||(d=Array.prototype.slice.call(u,0,a)),d[a]=u[a]);return C.concat(d||Array.prototype.slice.call(u))};Object.defineProperty(h,"__esModule",{value:!0}),h.InstantiationService=h.ServiceCollection=void 0;var b=x(2585),S=x(8343),v=function(){function C(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];this._entries=new Map;for(var d=0,a=u;d<a.length;d++){var s=a[d],o=s[0],l=s[1];this.set(o,l)}}return C.prototype.set=function(u,f){var d=this._entries.get(u);return this._entries.set(u,f),d},C.prototype.forEach=function(u){this._entries.forEach(function(f,d){return u(d,f)})},C.prototype.has=function(u){return this._entries.has(u)},C.prototype.get=function(u){return this._entries.get(u)},C}();h.ServiceCollection=v;var y=function(){function C(){this._services=new v,this._services.set(b.IInstantiationService,this)}return C.prototype.setService=function(u,f){this._services.set(u,f)},C.prototype.getService=function(u){return this._services.get(u)},C.prototype.createInstance=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];for(var a=(0,S.getServiceDependencies)(u).sort(function(A,B){return A.index-B.index}),s=[],o=0,l=a;o<l.length;o++){var p=l[o],g=this._services.get(p.id);if(!g)throw new Error("[createInstance] "+u.name+" depends on UNKNOWN service "+p.id+".");s.push(g)}var T=a.length>0?a[0].index:f.length;if(f.length!==T)throw new Error("[createInstance] First service dependency of "+u.name+" at position "+(T+1)+" conflicts with "+f.length+" static arguments");return new(u.bind.apply(u,_([void 0],_(_([],f,!0),s,!0),!1)))},C}();h.InstantiationService=y},7866:function(J,h,x){var _=this&&this.__decorate||function(u,f,d,a){var s,o=arguments.length,l=o<3?f:a===null?a=Object.getOwnPropertyDescriptor(f,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(u,f,d,a);else for(var p=u.length-1;p>=0;p--)(s=u[p])&&(l=(o<3?s(l):o>3?s(f,d,l):s(f,d))||l);return o>3&&l&&Object.defineProperty(f,d,l),l},b=this&&this.__param||function(u,f){return function(d,a){f(d,a,u)}},S=this&&this.__spreadArray||function(u,f,d){if(d||arguments.length===2)for(var a,s=0,o=f.length;s<o;s++)!a&&s in f||(a||(a=Array.prototype.slice.call(f,0,s)),a[s]=f[s]);return u.concat(a||Array.prototype.slice.call(f))};Object.defineProperty(h,"__esModule",{value:!0}),h.LogService=void 0;var v=x(2585),y={debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},C=function(){function u(f){var d=this;this._optionsService=f,this.logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(a){a==="logLevel"&&d._updateLogLevel()})}return u.prototype._updateLogLevel=function(){this.logLevel=y[this._optionsService.options.logLevel]},u.prototype._evalLazyOptionalParams=function(f){for(var d=0;d<f.length;d++)typeof f[d]=="function"&&(f[d]=f[d]())},u.prototype._log=function(f,d,a){this._evalLazyOptionalParams(a),f.call.apply(f,S([console,"xterm.js: "+d],a,!1))},u.prototype.debug=function(f){for(var d=[],a=1;a<arguments.length;a++)d[a-1]=arguments[a];this.logLevel<=v.LogLevelEnum.DEBUG&&this._log(console.log,f,d)},u.prototype.info=function(f){for(var d=[],a=1;a<arguments.length;a++)d[a-1]=arguments[a];this.logLevel<=v.LogLevelEnum.INFO&&this._log(console.info,f,d)},u.prototype.warn=function(f){for(var d=[],a=1;a<arguments.length;a++)d[a-1]=arguments[a];this.logLevel<=v.LogLevelEnum.WARN&&this._log(console.warn,f,d)},u.prototype.error=function(f){for(var d=[],a=1;a<arguments.length;a++)d[a-1]=arguments[a];this.logLevel<=v.LogLevelEnum.ERROR&&this._log(console.error,f,d)},_([b(0,v.IOptionsService)],u)}();h.LogService=C},7302:function(J,h,x){var _=this&&this.__assign||function(){return _=Object.assign||function(C){for(var u,f=1,d=arguments.length;f<d;f++)for(var a in u=arguments[f])Object.prototype.hasOwnProperty.call(u,a)&&(C[a]=u[a]);return C},_.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0}),h.OptionsService=h.DEFAULT_OPTIONS=h.DEFAULT_BELL_SOUND=void 0;var b=x(8460),S=x(6114);h.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",h.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:h.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:S.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var v=["normal","bold","100","200","300","400","500","600","700","800","900"],y=function(){function C(u){for(var f in this._onOptionChange=new b.EventEmitter,this._options=_({},h.DEFAULT_OPTIONS),u)if(f in this._options)try{var d=u[f];this._options[f]=this._sanitizeAndValidateOption(f,d)}catch(a){console.error(a)}this.options=this._setupOptions(this._options)}return Object.defineProperty(C.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),C.prototype._setupOptions=function(u){var f=this,d=_({},u),a=function(o){Object.defineProperty(d,o,{get:function(){if(!(o in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return f._options[o]},set:function(l){if(!(o in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');l=f._sanitizeAndValidateOption(o,l),f._options[o]!==l&&(f._options[o]=l,f._onOptionChange.fire(o))}})};for(var s in d)a(s);return d},C.prototype.setOption=function(u,f){this.options[u]=f},C.prototype._sanitizeAndValidateOption=function(u,f){switch(u){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":f||(f=h.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof f=="number"&&1<=f&&f<=1e3)break;f=v.includes(f)?f:h.DEFAULT_OPTIONS[u];break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(u+" cannot be less than 1, value: "+f);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(u+" cannot be less than 0, value: "+f);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(u+" cannot be less than or equal to 0, value: "+f);case"rows":case"cols":if(!f&&f!==0)throw new Error(u+" must be numeric, value: "+f)}return f},C.prototype.getOption=function(u){return this.options[u]},C}();h.OptionsService=y},8343:(J,h)=>{function x(_,b,S){b.di$target===b?b.di$dependencies.push({id:_,index:S}):(b.di$dependencies=[{id:_,index:S}],b.di$target=b)}Object.defineProperty(h,"__esModule",{value:!0}),h.createDecorator=h.getServiceDependencies=h.serviceRegistry=void 0,h.serviceRegistry=new Map,h.getServiceDependencies=function(_){return _.di$dependencies||[]},h.createDecorator=function(_){if(h.serviceRegistry.has(_))return h.serviceRegistry.get(_);var b=function(S,v,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");x(b,S,y)};return b.toString=function(){return _},h.serviceRegistry.set(_,b),b}},2585:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IUnicodeService=h.IOptionsService=h.ILogService=h.LogLevelEnum=h.IInstantiationService=h.IDirtyRowService=h.ICharsetService=h.ICoreService=h.ICoreMouseService=h.IBufferService=void 0;var _,b=x(8343);h.IBufferService=(0,b.createDecorator)("BufferService"),h.ICoreMouseService=(0,b.createDecorator)("CoreMouseService"),h.ICoreService=(0,b.createDecorator)("CoreService"),h.ICharsetService=(0,b.createDecorator)("CharsetService"),h.IDirtyRowService=(0,b.createDecorator)("DirtyRowService"),h.IInstantiationService=(0,b.createDecorator)("InstantiationService"),(_=h.LogLevelEnum||(h.LogLevelEnum={}))[_.DEBUG=0]="DEBUG",_[_.INFO=1]="INFO",_[_.WARN=2]="WARN",_[_.ERROR=3]="ERROR",_[_.OFF=4]="OFF",h.ILogService=(0,b.createDecorator)("LogService"),h.IOptionsService=(0,b.createDecorator)("OptionsService"),h.IUnicodeService=(0,b.createDecorator)("UnicodeService")},1480:(J,h,x)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeService=void 0;var _=x(8460),b=x(225),S=function(){function v(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter;var y=new b.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}return Object.defineProperty(v.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"activeVersion",{get:function(){return this._active},set:function(y){if(!this._providers[y])throw new Error('unknown Unicode version "'+y+'"');this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)},enumerable:!1,configurable:!0}),v.prototype.register=function(y){this._providers[y.version]=y},v.prototype.wcwidth=function(y){return this._activeProvider.wcwidth(y)},v.prototype.getStringCellWidth=function(y){for(var C=0,u=y.length,f=0;f<u;++f){var d=y.charCodeAt(f);if(55296<=d&&d<=56319){if(++f>=u)return C+this.wcwidth(d);var a=y.charCodeAt(f);56320<=a&&a<=57343?d=1024*(d-55296)+a-56320+65536:C+=this.wcwidth(a)}C+=this.wcwidth(d)}return C},v}();h.UnicodeService=S}},q={};function Z(J){var h=q[J];if(h!==void 0)return h.exports;var x=q[J]={exports:{}};return V[J].call(x.exports,x,x.exports,Z),x.exports}var ie={};return(()=>{var J=ie;Object.defineProperty(J,"__esModule",{value:!0}),J.Terminal=void 0;var h=Z(3236),x=Z(9042),_=Z(7975),b=Z(7090),S=Z(5741),v=Z(8285),y=["cols","rows"],C=function(){function u(f){var d=this;this._core=new h.Terminal(f),this._addonManager=new S.AddonManager,this._publicOptions={};var a=function(l){Object.defineProperty(s._publicOptions,l,{get:function(){return d._core.options[l]},set:function(p){d._checkReadonlyOptions(l),d._core.options[l]=p}})},s=this;for(var o in this._core.options)a(o)}return u.prototype._checkReadonlyOptions=function(f){if(y.includes(f))throw new Error('Option "'+f+'" can only be set in the constructor')},u.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(u.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new _.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"unicode",{get:function(){return this._checkProposedApi(),new b.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new v.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"modes",{get:function(){var f=this._core.coreService.decPrivateModes,d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"options",{get:function(){return this._publicOptions},set:function(f){for(var d in f)this._publicOptions[d]=f[d]},enumerable:!1,configurable:!0}),u.prototype.blur=function(){this._core.blur()},u.prototype.focus=function(){this._core.focus()},u.prototype.resize=function(f,d){this._verifyIntegers(f,d),this._core.resize(f,d)},u.prototype.open=function(f){this._core.open(f)},u.prototype.attachCustomKeyEventHandler=function(f){this._core.attachCustomKeyEventHandler(f)},u.prototype.registerLinkMatcher=function(f,d,a){return this._checkProposedApi(),this._core.registerLinkMatcher(f,d,a)},u.prototype.deregisterLinkMatcher=function(f){this._checkProposedApi(),this._core.deregisterLinkMatcher(f)},u.prototype.registerLinkProvider=function(f){return this._checkProposedApi(),this._core.registerLinkProvider(f)},u.prototype.registerCharacterJoiner=function(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)},u.prototype.deregisterCharacterJoiner=function(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)},u.prototype.registerMarker=function(f){return this._checkProposedApi(),this._verifyIntegers(f),this._core.addMarker(f)},u.prototype.addMarker=function(f){return this.registerMarker(f)},u.prototype.hasSelection=function(){return this._core.hasSelection()},u.prototype.select=function(f,d,a){this._verifyIntegers(f,d,a),this._core.select(f,d,a)},u.prototype.getSelection=function(){return this._core.getSelection()},u.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},u.prototype.clearSelection=function(){this._core.clearSelection()},u.prototype.selectAll=function(){this._core.selectAll()},u.prototype.selectLines=function(f,d){this._verifyIntegers(f,d),this._core.selectLines(f,d)},u.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},u.prototype.scrollLines=function(f){this._verifyIntegers(f),this._core.scrollLines(f)},u.prototype.scrollPages=function(f){this._verifyIntegers(f),this._core.scrollPages(f)},u.prototype.scrollToTop=function(){this._core.scrollToTop()},u.prototype.scrollToBottom=function(){this._core.scrollToBottom()},u.prototype.scrollToLine=function(f){this._verifyIntegers(f),this._core.scrollToLine(f)},u.prototype.clear=function(){this._core.clear()},u.prototype.write=function(f,d){this._core.write(f,d)},u.prototype.writeUtf8=function(f,d){this._core.write(f,d)},u.prototype.writeln=function(f,d){this._core.write(f),this._core.write(`\r
`,d)},u.prototype.paste=function(f){this._core.paste(f)},u.prototype.getOption=function(f){return this._core.optionsService.getOption(f)},u.prototype.setOption=function(f,d){this._checkReadonlyOptions(f),this._core.optionsService.setOption(f,d)},u.prototype.refresh=function(f,d){this._verifyIntegers(f,d),this._core.refresh(f,d)},u.prototype.reset=function(){this._core.reset()},u.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},u.prototype.loadAddon=function(f){return this._addonManager.loadAddon(this,f)},Object.defineProperty(u,"strings",{get:function(){return x},enumerable:!1,configurable:!0}),u.prototype._verifyIntegers=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];for(var a=0,s=f;a<s.length;a++){var o=s[a];if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}},u}();J.Terminal=C})(),ie})()})});var Sl=lr(ri=>{"use strict";var no=ri&&ri.__assign||function(){return no=Object.assign||function(V){for(var q,Z=1,ie=arguments.length;Z<ie;Z++){q=arguments[Z];for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(V[J]=q[J])}return V},no.apply(this,arguments)},yl=ri&&ri.__spreadArray||function(V,q,Z){if(Z||arguments.length===2)for(var ie=0,J=q.length,h;ie<J;ie++)(h||!(ie in q))&&(h||(h=Array.prototype.slice.call(q,0,ie)),h[ie]=q[ie]);return V.concat(h||Array.prototype.slice.call(q))};Object.defineProperty(ri,"__esModule",{value:!0});ri.Melba=void 0;var ml=function(){var V=document.createElement("a");return["matches","msMatchesSelector","webkitMatchesSelector"].filter(function(q){return q in V})}()[0],Au=function(){var V=document.createElement("a");try{return V[ml](":focus-within"),":focus-within, :focus, :hover"}catch{return":focus, :hover"}}(),bl=function(){function V(q){var Z=this,ie=q.animation,J=ie===void 0?V.defaults.animation:ie,h=q.animationDuration,x=h===void 0?V.defaults.animationDuration:h,_=q.closeLabel,b=_===void 0?V.defaults.closeLabel:_,S=q.container,v=S===void 0?null:S,y=q.containerClass,C=y===void 0?V.defaults.containerClass:y,u=q.containerElement,f=u===void 0?V.defaults.containerElement:u,d=q.content,a=q.events,s=a===void 0?{}:a,o=q.hide,l=o===void 0?V.defaults.hide:o,p=q.root,g=p===void 0?V.defaults.root:p,T=q.toastClass,A=T===void 0?V.defaults.toastClass:T,B=q.toastElement,D=B===void 0?V.defaults.toastElement:B,R=q.toastEvents,E=R===void 0?yl([],V.defaults.toastEvents,!0):R,I=q.toastHideClass,w=I===void 0?V.defaults.toastHideClass:I,U=q.toastShowClass,N=U===void 0?V.defaults.toastShowClass:U,L=q.type,O=L===void 0?V.defaults.toastType:L;if(!d)throw new TypeError("'content' cannot be empty.");if(this.animation=J,this.events=s,this.toastHideClass=w,this.toastShowClass=N,v||(v=this.getContainer({containerClass:C,containerElement:f,root:g})),this.container=v,l===!0&&(l=V.defaults.hideDelay),l!==!1&&l<100&&(l*=1e3),this.hideDelay=l,x<100&&(x*=1e3),this.build({closeLabel:b,content:d,toastClass:A,toastElement:D,toastEvents:E,type:O}),this.hideDelay!==!1&&this.autohide({animationDuration:x}),this.animation){window.requestAnimationFrame(function(){return Z.show()});return}this.show()}return V.prototype.autohide=function(q){var Z=this,ie=q.animationDuration;if(!!this.hideDelay)return window.setTimeout(function(){return Z.hide()},this.hideDelay+(this.animation?ie:0))},V.prototype.build=function(q){var Z=this,ie=q.closeLabel,J=q.content,h=q.toastClass,x=q.toastElement,_=q.toastEvents,b=q.type;this.element=document.createElement(x),this.element.setAttribute("title",J),this.element.setAttribute("role","status"),this.element.setAttribute("tabindex","0"),this.element.classList.add(h),this.element.classList.add("toast--".concat(b)),this.element.appendChild(this.buildClose(ie)),this.element.appendChild(document.createTextNode(J)),this.element.addEventListener("keydown",function(S){S.key==="Escape"&&(S.preventDefault(),Z.hide())}),_.forEach(function(S){Z.element.addEventListener(S,function(v){Z.trigger(S,v)})}),this.container.appendChild(this.element),this.trigger("build")},V.prototype.show=function(){this.element.classList.remove(this.toastHideClass),this.element.classList.add(this.toastShowClass),this.trigger("show")},V.prototype.hide=function(q){var Z=this;if(q===void 0&&(q=!1),!(!q&&this.hasFocus)){if(!q&&this.element[ml](Au)&&this.element.addEventListener("mouseout",function(){Z.hasFocus=!1,Z.hideDelay>0&&Z.hide()}),this.element.classList.remove(this.toastShowClass),this.element.classList.add(this.toastHideClass),this.trigger("hide"),this.animation){var ie=function(){return Z.remove()},J=function(){x||(Z.element.addEventListener("transitionend",function(){return ie()}),x=!0)},h=function(){Z.show(),Z.element.removeEventListener("transitionstart",function(){return J()}),Z.element.removeEventListener("transitionend",function(){return ie()}),Z.element.removeEventListener("mouseover",function(){return h()}),Z.element.addEventListener("mouseout",function(){return Z.hide()})},x=!1;this.element.addEventListener("mouseover",function(){return h()}),this.element.addEventListener("transitionstart",function(){return J()});return}this.remove()}},V.prototype.remove=function(){this.element.parentNode===this.container&&(this.container.removeChild(this.element),this.trigger("remove"))},V.prototype.buildClose=function(q){var Z=this,ie=document.createElement("button");return ie.setAttribute("title",q),ie.appendChild(document.createTextNode(q)),ie.addEventListener("click",function(){return Z.hide()}),ie},V.prototype.getContainer=function(q){var Z=q.containerClass,ie=q.containerElement,J=q.root,h=J.querySelector("".concat(ie,".").concat(Z));if(h)return h;var x=document.createElement(ie);return x.classList.add(Z),J.appendChild(x),x},V.prototype.on=function(q,Z){this.events[q]||(this.events[q]=[]),this.events[q].push(Z)},V.prototype.off=function(q,Z){if(Z===void 0&&(Z=null),!Z){this.events[q]=[];return}var ie=this.events[q].indexOf(Z);ie===-1&&this.events[q].splice(ie,1)},V.prototype.trigger=function(q){for(var Z=this,ie=[],J=1;J<arguments.length;J++)ie[J-1]=arguments[J];(this.events[q]||[]).forEach(function(h){return h.apply(void 0,yl([Z,Z.element],ie,!1))})},V.settings=function(q){V.defaults=no(no({},V.defaults),q)},V.defaults={animation:!0,animationDuration:400,closeLabel:"Close",containerClass:"toast__container",containerElement:"div",hide:!1,hideDelay:5,root:document.body,toastClass:"toast",toastElement:"div",toastEvents:["click","focus","keydown"],toastHideClass:"toast--hide",toastShowClass:"toast--show",toastType:"info"},V}();ri.Melba=bl;ri.default=bl});var xl=lr((Cl,wl)=>{(function(V){typeof Cl=="object"&&typeof wl=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){V.defineOption("placeholder","",function(_,b,S){var v=S&&S!=V.Init;if(b&&!v)_.on("blur",J),_.on("change",h),_.on("swapDoc",h),V.on(_.getInputField(),"compositionupdate",_.state.placeholderCompose=function(){ie(_)}),h(_);else if(!b&&v){_.off("blur",J),_.off("change",h),_.off("swapDoc",h),V.off(_.getInputField(),"compositionupdate",_.state.placeholderCompose),q(_);var y=_.getWrapperElement();y.className=y.className.replace(" CodeMirror-empty","")}b&&!_.hasFocus()&&J(_)});function q(_){_.state.placeholder&&(_.state.placeholder.parentNode.removeChild(_.state.placeholder),_.state.placeholder=null)}function Z(_){q(_);var b=_.state.placeholder=document.createElement("pre");b.style.cssText="height: 0; overflow: visible",b.style.direction=_.getOption("direction"),b.className="CodeMirror-placeholder CodeMirror-line-like";var S=_.getOption("placeholder");typeof S=="string"&&(S=document.createTextNode(S)),b.appendChild(S),_.display.lineSpace.insertBefore(b,_.display.lineSpace.firstChild)}function ie(_){setTimeout(function(){var b=!1;if(_.lineCount()==1){var S=_.getInputField();b=S.nodeName=="TEXTAREA"?!_.getLine(0).length:!/[^\u200b]/.test(S.querySelector(".CodeMirror-line").textContent)}b?Z(_):q(_)},20)}function J(_){x(_)&&Z(_)}function h(_){var b=_.getWrapperElement(),S=x(_);b.className=b.className.replace(" CodeMirror-empty","")+(S?" CodeMirror-empty":""),S?Z(_):q(_)}function x(_){return _.lineCount()===1&&_.getLine(0)===""}})});var El=lr((kl,Ll)=>{(function(V){typeof kl=="object"&&typeof Ll=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){var q={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},Z=V.Pos;V.defineOption("autoCloseBrackets",!1,function(d,a,s){s&&s!=V.Init&&(d.removeKeyMap(J),d.state.closeBrackets=null),a&&(h(ie(a,"pairs")),d.state.closeBrackets=a,d.addKeyMap(J))});function ie(d,a){return a=="pairs"&&typeof d=="string"?d:typeof d=="object"&&d[a]!=null?d[a]:q[a]}var J={Backspace:b,Enter:S};function h(d){for(var a=0;a<d.length;a++){var s=d.charAt(a),o="'"+s+"'";J[o]||(J[o]=x(s))}}h(q.pairs+"`");function x(d){return function(a){return C(a,d)}}function _(d){var a=d.state.closeBrackets;if(!a||a.override)return a;var s=d.getModeAt(d.getCursor());return s.closeBrackets||a}function b(d){var a=_(d);if(!a||d.getOption("disableInput"))return V.Pass;for(var s=ie(a,"pairs"),o=d.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return V.Pass;var p=u(d,o[l].head);if(!p||s.indexOf(p)%2!=0)return V.Pass}for(var l=o.length-1;l>=0;l--){var g=o[l].head;d.replaceRange("",Z(g.line,g.ch-1),Z(g.line,g.ch+1),"+delete")}}function S(d){var a=_(d),s=a&&ie(a,"explode");if(!s||d.getOption("disableInput"))return V.Pass;for(var o=d.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return V.Pass;var p=u(d,o[l].head);if(!p||s.indexOf(p)%2!=0)return V.Pass}d.operation(function(){var g=d.lineSeparator()||`
`;d.replaceSelection(g+g,null),v(d,-1),o=d.listSelections();for(var T=0;T<o.length;T++){var A=o[T].head.line;d.indentLine(A,null,!0),d.indentLine(A+1,null,!0)}})}function v(d,a){for(var s=[],o=d.listSelections(),l=0,p=0;p<o.length;p++){var g=o[p];g.head==d.getCursor()&&(l=p);var T=g.head.ch||a>0?{line:g.head.line,ch:g.head.ch+a}:{line:g.head.line-1};s.push({anchor:T,head:T})}d.setSelections(s,l)}function y(d){var a=V.cmpPos(d.anchor,d.head)>0;return{anchor:new Z(d.anchor.line,d.anchor.ch+(a?-1:1)),head:new Z(d.head.line,d.head.ch+(a?1:-1))}}function C(d,a){var s=_(d);if(!s||d.getOption("disableInput"))return V.Pass;var o=ie(s,"pairs"),l=o.indexOf(a);if(l==-1)return V.Pass;for(var p=ie(s,"closeBefore"),g=ie(s,"triples"),T=o.charAt(l+1)==a,A=d.listSelections(),B=l%2==0,D,R=0;R<A.length;R++){var E=A[R],I=E.head,w,U=d.getRange(I,Z(I.line,I.ch+1));if(B&&!E.empty())w="surround";else if((T||!B)&&U==a)T&&f(d,I)?w="both":g.indexOf(a)>=0&&d.getRange(I,Z(I.line,I.ch+3))==a+a+a?w="skipThree":w="skip";else if(T&&I.ch>1&&g.indexOf(a)>=0&&d.getRange(Z(I.line,I.ch-2),I)==a+a){if(I.ch>2&&/\bstring/.test(d.getTokenTypeAt(Z(I.line,I.ch-2))))return V.Pass;w="addFour"}else if(T){var N=I.ch==0?" ":d.getRange(Z(I.line,I.ch-1),I);if(!V.isWordChar(U)&&N!=a&&!V.isWordChar(N))w="both";else return V.Pass}else if(B&&(U.length===0||/\s/.test(U)||p.indexOf(U)>-1))w="both";else return V.Pass;if(!D)D=w;else if(D!=w)return V.Pass}var L=l%2?o.charAt(l-1):a,O=l%2?a:o.charAt(l+1);d.operation(function(){if(D=="skip")v(d,1);else if(D=="skipThree")v(d,3);else if(D=="surround"){for(var W=d.getSelections(),Y=0;Y<W.length;Y++)W[Y]=L+W[Y]+O;d.replaceSelections(W,"around"),W=d.listSelections().slice();for(var Y=0;Y<W.length;Y++)W[Y]=y(W[Y]);d.setSelections(W)}else D=="both"?(d.replaceSelection(L+O,null),d.triggerElectric(L+O),v(d,-1)):D=="addFour"&&(d.replaceSelection(L+L+L+L,"before"),v(d,1))})}function u(d,a){var s=d.getRange(Z(a.line,a.ch-1),Z(a.line,a.ch+1));return s.length==2?s:null}function f(d,a){var s=d.getTokenAt(Z(a.line,a.ch+1));return/\bstring/.test(s.type)&&s.start==a.ch&&(a.ch==0||!/\bstring/.test(d.getTokenTypeAt(a)))}})});var Al=lr((Tl,Ml)=>{(function(V){typeof Tl=="object"&&typeof Ml=="object"?V(pr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],V):V(CodeMirror)})(function(V){var q=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),Z=V.Pos,ie={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function J(v){return v&&v.bracketRegex||/[(){}[\]]/}function h(v,y,C){var u=v.getLineHandle(y.line),f=y.ch-1,d=C&&C.afterCursor;d==null&&(d=/(^| )cm-fat-cursor($| )/.test(v.getWrapperElement().className));var a=J(C),s=!d&&f>=0&&a.test(u.text.charAt(f))&&ie[u.text.charAt(f)]||a.test(u.text.charAt(f+1))&&ie[u.text.charAt(++f)];if(!s)return null;var o=s.charAt(1)==">"?1:-1;if(C&&C.strict&&o>0!=(f==y.ch))return null;var l=v.getTokenTypeAt(Z(y.line,f+1)),p=x(v,Z(y.line,f+(o>0?1:0)),o,l,C);return p==null?null:{from:Z(y.line,f),to:p&&p.pos,match:p&&p.ch==s.charAt(0),forward:o>0}}function x(v,y,C,u,f){for(var d=f&&f.maxScanLineLength||1e4,a=f&&f.maxScanLines||1e3,s=[],o=J(f),l=C>0?Math.min(y.line+a,v.lastLine()+1):Math.max(v.firstLine()-1,y.line-a),p=y.line;p!=l;p+=C){var g=v.getLine(p);if(!!g){var T=C>0?0:g.length-1,A=C>0?g.length:-1;if(!(g.length>d))for(p==y.line&&(T=y.ch-(C<0?1:0));T!=A;T+=C){var B=g.charAt(T);if(o.test(B)&&(u===void 0||(v.getTokenTypeAt(Z(p,T+1))||"")==(u||""))){var D=ie[B];if(D&&D.charAt(1)==">"==C>0)s.push(B);else if(s.length)s.pop();else return{pos:Z(p,T),ch:B}}}}}return p-C==(C>0?v.lastLine():v.firstLine())?!1:null}function _(v,y,C){for(var u=v.state.matchBrackets.maxHighlightLineLength||1e3,f=C&&C.highlightNonMatching,d=[],a=v.listSelections(),s=0;s<a.length;s++){var o=a[s].empty()&&h(v,a[s].head,C);if(o&&(o.match||f!==!1)&&v.getLine(o.from.line).length<=u){var l=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";d.push(v.markText(o.from,Z(o.from.line,o.from.ch+1),{className:l})),o.to&&v.getLine(o.to.line).length<=u&&d.push(v.markText(o.to,Z(o.to.line,o.to.ch+1),{className:l}))}}if(d.length){q&&v.state.focused&&v.focus();var p=function(){v.operation(function(){for(var g=0;g<d.length;g++)d[g].clear()})};if(y)setTimeout(p,800);else return p}}function b(v){v.operation(function(){v.state.matchBrackets.currentlyHighlighted&&(v.state.matchBrackets.currentlyHighlighted(),v.state.matchBrackets.currentlyHighlighted=null),v.state.matchBrackets.currentlyHighlighted=_(v,!1,v.state.matchBrackets)})}function S(v){v.state.matchBrackets&&v.state.matchBrackets.currentlyHighlighted&&(v.state.matchBrackets.currentlyHighlighted(),v.state.matchBrackets.currentlyHighlighted=null)}V.defineOption("matchBrackets",!1,function(v,y,C){C&&C!=V.Init&&(v.off("cursorActivity",b),v.off("focus",b),v.off("blur",S),S(v)),y&&(v.state.matchBrackets=typeof y=="object"?y:{},v.on("cursorActivity",b),v.on("focus",b),v.on("blur",S))}),V.defineExtension("matchBrackets",function(){_(this,!0)}),V.defineExtension("findMatchingBracket",function(v,y,C){return(C||typeof y=="boolean")&&(C?(C.strict=y,y=C):y=y?{strict:!0}:null),h(this,v,y)}),V.defineExtension("scanForBracket",function(v,y,C,u){return x(this,v,y,C,u)})})});var Ha=class{name(){return"base64"}matches(q){if(q.length<4)return!1;try{return atob(q),!0}catch{return!1}}decode(q){return Array.from(atob(q)).map(Z=>Z.charCodeAt(0))}},Fa=Ha;var Na=class{name(){return"default"}matches(){return!0}decode(q){return Array.from(q).map(Z=>Z.charCodeAt(0))}},Wa=Na;var qa=class{name(){return"hexdump"}matches(q){return/^(\d{7} (((.{2}){1,2} ){1,8})(\n|$))+$/.test(q)}decode(q){return q.trim().replace(/(?<=^|\n)\d{7} (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").replace(/(..)(..)/g,"$2$1").replace(/00$/,"").match(/../g).map(Z=>parseInt(Z,16))}},ja=qa;var Ai=class{constructor(q,Z,ie,J=null,h=null,x=q){this.id=q;this.name=Z;this.runner=ie;this.url=J;this.args=h;this.highlighterRef=x}getId(){return this.id}getName(){return this.name}getURL(){return this.url}getArgs(){return this.args}getHighlighterRef(){return this.highlighterRef}run(q,Z,ie){return this.runner(q,ie,Z)}};var Hu=ti(Vo()),Ka=class extends Ai{constructor(){super("javascript-browser","JavaScript (Browser)",(q,Z,ie)=>{let J=new Worker("dist/js/langs/javascript-browser/worker.js");return J.postMessage({type:"run",code:q,args:ie,input:Z}),J},"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/",null,"javascript")}},Ga=Ka;var Wu=ti(al()),ll=class extends Ai{constructor(){super("pib-7.4","PHP 7.4 (pib)",(q,Z,ie)=>{let J=new Worker("dist/js/langs/pib-7.4/worker.js");return J.postMessage({type:"run",code:q,args:ie,input:Z}),J},"https://www.php.net/",["-r","-R","-l","-p"],"php")}},cl=ll;var zu=ti(hl()),dl=class extends Ai{constructor(){super("webperl-5.28.1","Perl 5.28.1 (webperl)",(q,Z,ie)=>{let J=new Worker("dist/js/langs/webperl-5.28.1/worker.js");return J.postMessage({type:"run",code:q,args:ie,input:Z}),J},"https://www.perl.org/",["-M5.10.0","-F","-l","-p"],"perl")}},pl=dl;var Rl=ti(pr()),Ol=ti(vl());var Tu=2,Mu=1,Jo=class{constructor(){}activate(q){this._terminal=q}dispose(){}fit(){let q=this.proposeDimensions();if(!q||!this._terminal)return;let Z=this._terminal._core;(this._terminal.rows!==q.rows||this._terminal.cols!==q.cols)&&(Z._renderService.clear(),this._terminal.resize(q.cols,q.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let q=this._terminal._core;if(q._renderService.dimensions.actualCellWidth===0||q._renderService.dimensions.actualCellHeight===0)return;let Z=window.getComputedStyle(this._terminal.element.parentElement),ie=parseInt(Z.getPropertyValue("height")),J=Math.max(0,parseInt(Z.getPropertyValue("width"))),h=window.getComputedStyle(this._terminal.element),x={top:parseInt(h.getPropertyValue("padding-top")),bottom:parseInt(h.getPropertyValue("padding-bottom")),right:parseInt(h.getPropertyValue("padding-right")),left:parseInt(h.getPropertyValue("padding-left"))},_=x.top+x.bottom,b=x.right+x.left,S=ie-_,v=J-b-q.viewport.scrollBarWidth;return{cols:Math.max(Tu,Math.floor(v/q._renderService.dimensions.actualCellWidth)),rows:Math.max(Mu,Math.floor(S/q._renderService.dimensions.actualCellHeight))}}};var _l=class{constructor(){this.registered=[]}register(...q){this.registered.push(...q)}decode(q){return this.decoder(q).decode(q)}decoder(q){let[Z]=this.registered.filter(ie=>ie.matches(q));return Z}};var di=new _l;var Fr=class{constructor(q,Z,ie,J,h,x,_,b,S){this.languageSelector=q;this.header=Z;this.code=ie;this.footer=J;this.stdin=h;this.stdout=x;this.stderr=_;this.args=b;this.htmlOut=S;this.stdoutBuffer="";this.htmlOutMimeType="text/html";this.htmlOutTimeout=null}writeStdout(q){this.stdoutBuffer+=q,this.stdout.write(q.replace(/(?<!\r)\n/g,`\r
`)),this.htmlOutTimeout&&clearTimeout(this.htmlOutTimeout),this.htmlOutTimeout=setTimeout(()=>{this.htmlOut.src=`data:${this.htmlOutMimeType};base64,${btoa(this.stdoutBuffer)}`,this.htmlOutTimeout=null},100)}writeStderr(q){this.stderr.write(q.replace(/(?<!\r)\n/g,`\r
`))}clearStdout(){this.stdoutBuffer="",this.stdout.reset(),this.htmlOut.src=`data:${this.htmlOutMimeType};base64,`}clearStderr(){this.stderr.reset()}getHTMLOutMimeType(){return this.htmlOutMimeType}setHTMLOutMimeType(q){this.htmlOutMimeType=q,this.htmlOut.src=`data:${this.htmlOutMimeType};base64,${btoa(this.stdoutBuffer)}`}static getRaw(q){return q.getValue()}static getAsArray(q){return di.decode(Fr.getRaw(q))}getRawCodeHeader(){return Fr.getRaw(this.header)}getCodeHeaderAsArray(){return Fr.getAsArray(this.header)}setCodeHeader(q){this.header.setValue(q)}getRawCode(){return Fr.getRaw(this.code)}getCodeAsArray(){return Fr.getAsArray(this.code)}getCodeAsString(q="."){let Z=this.getRawCode(),ie=di.decoder(Z);return ie.name()!=="default"&&(Z=String.fromCharCode(...ie.decode(Z))),q!==null&&(Z=Z.replace(/[\x00-\x1f\x7f-\xff]/g,q)),Z}getFullCodeAsArray(){return[...this.getCodeHeaderAsArray(),...this.getCodeAsArray(),...this.getCodeFooterAsArray()]}setCode(q){this.code.setValue(q)}onCodeChange(q){this.code.on("change",()=>q())}getRawCodeFooter(){return Fr.getRaw(this.footer)}getCodeFooterAsArray(){return Fr.getAsArray(this.footer)}setCodeFooter(q){this.footer.setValue(q)}getArgs(){return this.args.getValue()}setArgs(q){this.args.setValue(q)}argsRefresh(){this.args.refresh()}getStdin(){return this.stdin.getValue()}setStdin(q){this.stdin.setValue(q)}},Qo=Fr;var gl=class{constructor(){this.data={}}register(...q){q.forEach(Z=>{this.data[Z.getId()]=Z})}get(q){return this.data[q]}all(){return Object.keys(this.data)}run(q,Z,ie,J){return this.data[q].run(Z,ie,J)}},Nr=new gl;var Dl=ti(Sl()),af=ti(xl()),lf=ti(El()),cf=ti(Al());var Lt=class{constructor(){this.langSelector=document.querySelector('select[name="lang"]'),this.addRegisteredLangs(),this.stdout=Lt.createTerminal(),this.stderr=Lt.createTerminal({theme:{foreground:"#f92672"}}),this.fit=new Jo,this.stdout.loadAddon(this.fit),this.stdout.open(document.querySelector("div.stdout")),this.stderr.open(document.querySelector("div.stderr")),this.codeHeader=Lt.createEditor(document.querySelector('textarea[name="header"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.code=Lt.createEditor(document.querySelector('textarea[name="code"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.codeFooter=Lt.createEditor(document.querySelector('textarea[name="footer"]'),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0}),this.stdin=Lt.createEditor(document.querySelector('textarea[name="input"]')),this.args=Lt.createEditor(document.querySelector('textarea[name="args"]')),this.io=new Qo(this.langSelector,this.codeHeader,this.code,this.codeFooter,this.stdin,this.stdout,this.stderr,this.args,document.querySelector(".html-out")),this.expanders=document.querySelectorAll('input[name="expand"]'),this.argsWrapper=document.querySelector(".args-wrapper"),this.addArg=document.querySelector(".add-arg"),this.runButton=document.querySelector('input[name="run"]'),this.stopButton=document.querySelector('input[name="stop"]'),this.bytesCount=document.querySelector(".bytes .byte-count"),this.bytesPlural=document.querySelector(".bytes .plural"),this.encoded=document.querySelector(".encoded"),this.format=document.querySelector(".format"),this.copyLinkButton=document.querySelector('input[name="copy"]'),this.markdownButton=document.querySelector('input[name="markdown"]'),this.outputTypes=document.querySelectorAll(".stdout-header button"),this.connectExpanders(),this.parseHashData(window.location.hash);try{this.populateArgs()}catch(q){this.toast(q.message,"error")}this.codeOnChange(),this.io.getCodeAsArray().length&&this.runCode(),this.resize(),this.io.onCodeChange(()=>this.codeOnChange()),this.runButton.addEventListener("click",()=>this.runCode()),this.langSelector.addEventListener("change",()=>this.populateArgs()),this.copyLinkButton.addEventListener("click",()=>{let q=this.buildLink();window.history.pushState(this.buildHashData(),document.title,q),navigator.clipboard.writeText(q),Lt.copied(this.copyLinkButton)}),this.markdownButton.addEventListener("click",()=>{navigator.clipboard.writeText(this.buildMarkdown()),Lt.copied(this.markdownButton)}),this.outputTypes.forEach(q=>q.addEventListener("click",()=>this.setOutputType(q))),window.addEventListener("hashchange",()=>{this.parseHashData(window.location.hash),this.io.getCodeAsArray().length&&this.runCode()}),window.addEventListener("resize",()=>this.resize())}addRegisteredLangs(){Nr.all().forEach(q=>{let Z=Nr.get(q),ie=document.createElement("option");ie.setAttribute("value",Z.getId()),ie.append(document.createTextNode(Z.getName())),this.langSelector.append(ie)})}setLang(q){if(!Nr.all().includes(q))throw new TypeError(`Unknown lang: ${q}.`);this.langSelector.value=q,this.setCodeHighlight()}getLangId(){return this.langSelector.value}setCodeHighlight(){let q=Nr.get(this.getLangId());[this.codeHeader,this.code,this.codeFooter].forEach(Z=>{if(di.decoder(Qo.getRaw(Z)).name()!=="default"){Z.getOption("mode")!==null&&Z.setOption("mode",null);return}Z.getOption("mode")!==q.getHighlighterRef()&&Z.setOption("mode",q.getHighlighterRef())})}static createTerminal(q={}){return new Ol.Terminal({...q,theme:{background:"#272822",cursor:"transparent",foreground:"#f8f8f2",...q.theme??{}}})}static createEditor(q,Z={}){return(0,Rl.fromTextArea)(q,{mode:null,theme:"monokai",viewportMargin:1/0,extraKeys:{"Shift-Tab":!1,Tab:!1},...Z})}resize(){if(this.stdout.element.parentElement.hasAttribute("hidden")){this.fit.activate(this.stderr),this.fit.fit(),this.stderr.resize(this.stderr.cols,6);return}this.fit.activate(this.stdout),this.fit.fit(),this.stderr.resize(this.stdout.cols,6)}codeOnChange(){let q=this.io.getCodeAsArray();this.encoded.setAttribute("hidden",""),this.setCodeHighlight();let Z=di.decoder(this.io.getRawCode());Z.name()!=="default"&&(this.encoded.removeAttribute("hidden"),this.format.innerText=Z.name()),this.showBytes(q.length)}runCode(){let q=Date.now(),Z=()=>{ie.terminate(),this.io.writeStderr(`Aborted execution after ${Date.now()-q}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",Z)};this.io.clearStdout(),this.io.clearStderr(),this.runButton.setAttribute("disabled",""),this.stopButton.removeAttribute("disabled");let ie=Nr.run(this.getLangId(),this.io.getFullCodeAsArray(),this.io.getArgs(),this.io.getStdin());this.stopButton.addEventListener("click",Z),ie.onmessage=({data:J})=>{let{type:h,output:x,error:_}=J;x&&this.io.writeStdout(x),_&&this.io.writeStderr(_??""),h==="done"&&(this.io.writeStderr(`Completed execution after ${Date.now()-q}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",Z),ie.terminate())},ie.onerror=J=>{this.toast(`Worker error: ${J.message}`,"error"),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled","")}}populateArgs(){for(;this.addArg.firstElementChild;)this.addArg.firstElementChild.remove();let q=Nr.get(this.getLangId());if(!q)throw new TypeError("Unregistered lang: "+this.getLangId());let Z=q.getArgs();Z!==null?(this.argsWrapper.removeAttribute("hidden"),Z.forEach(ie=>{let J=document.createElement("input");J.setAttribute("type","button"),J.setAttribute("value",ie),J.addEventListener("click",()=>{let h=this.io.getArgs()??"";new RegExp("(\\n|^)"+ie+"(\\n|$)").test(h)||this.io.setArgs((h+`
`+ie).trim())}),this.addArg.append(J)})):this.argsWrapper.setAttribute("hidden",""),this.io.argsRefresh()}static expand(q){let Z=q.nextElementSibling,ie=document.querySelector(q.dataset.target);if(!ie){console.debug("No collapser or target for expander: ",q);return}q.setAttribute("hidden",""),ie.removeAttribute("hidden"),Z.removeAttribute("hidden")}static collapse(q){let Z=q.nextElementSibling,ie=document.querySelector(q.dataset.target);if(!ie){console.debug("No collapser or target for expander: ",q);return}q.removeAttribute("hidden"),ie.setAttribute("hidden",""),Z.setAttribute("hidden","")}connectExpanders(){this.expanders.forEach(q=>{let Z=q.nextElementSibling;if(!Z||!Z.matches('input[name="collapse"]')){console.debug("No collapser or target for expander: ",q);return}q.addEventListener("click",()=>Lt.expand(q)),Z.addEventListener("click",()=>Lt.collapse(q))})}setOutputType(q){let[Z]=Array.from(this.outputTypes).filter(ie=>ie.hasAttribute("disabled"));Z!==q&&(Z.removeAttribute("disabled"),document.querySelector(Z.dataset.target).setAttribute("hidden",""),q.setAttribute("disabled",""),document.querySelector(q.dataset.target).removeAttribute("hidden"),this.resize())}getOutputType(){let[q]=Array.from(this.outputTypes).filter(Z=>Z.hasAttribute("disabled"));return q.dataset.type}static copied(q){let Z=q.value;q.setAttribute("disabled",""),q.style.width=q.offsetWidth+"px",q.value="Copied!",window.setTimeout(()=>{q.removeAttribute("disabled"),q.style.width=null,q.value=Z},1e3)}parseHashData(q){if(!q||q.length<2)return;let Z;try{let h=atob(q.slice(1));Z=JSON.parse(h)}catch(h){if(h instanceof DOMException){this.toast("Unable to decode URL data. Aborting.","error");return}if(h instanceof SyntaxError){this.toast("Unable to decode JSON data. Aborting.","error");return}throw h}let[ie]=Array.from(this.expanders).filter(h=>h.parentElement.matches(".code-header")),[J]=Array.from(this.expanders).filter(h=>h.parentElement.matches(".code-footer"));Z.header?Lt.expand(ie):Lt.collapse(ie),Z.footer?Lt.expand(J):Lt.collapse(J),this.setLang(Z.lang??this.getLangId()),this.io.setCodeHeader(Z.header??""),this.io.setCode(Z.code??""),this.io.setCodeFooter(Z.footer??""),this.io.setArgs(Z.args??""),this.io.setStdin(Z.input??""),Z.type&&this.outputTypes.forEach(h=>{h.dataset.type===Z.type&&this.setOutputType(h)}),Z.mime&&(this.io.setHTMLOutMimeType(Z.mime),Z.type||this.outputTypes.forEach(h=>{h.dataset.type==="resource"&&this.setOutputType(h)}))}buildHashData(){let q={lang:this.getLangId(),code:this.io.getRawCode()},Z=this.io.getRawCodeHeader(),ie=this.io.getRawCodeFooter(),J=this.io.getArgs(),h=this.io.getStdin(),x=this.getOutputType(),_=this.io.getHTMLOutMimeType();return Object.entries({header:Z,footer:ie,args:J,input:h}).forEach(([b,S])=>{S&&(q[b]=S)}),x==="resource"&&(_==="text/html"?q.type="resource":q.mime=_),btoa(JSON.stringify(q))}buildLink(){let q=this.buildHashData();return window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+q}buildMarkdown(){let q=this.io.getArgs().trim().split(/\n/).join(" "),Z=Nr.get(this.getLangId()),ie=Math.random().toString(36).slice(2,10),J=this.io.getCodeAsArray().length;return`# [${Z.getName()}]${q?` + \`${q}\``:""}, ${J} byte${J===1?"":"s"}

<!-- language-all: lang-${Z.getHighlighterRef()} -->

<pre><code>${this.io.getCodeAsString().replace(/[&<>]/g,h=>h==="<"?"&lt;":h===">"?"&gt;":h==="&"?"&amp;":h)}</code></pre>

[Try it online!][TIO-${ie}]

[${Z.getName()}]: ${Z.getURL()}
[TIO-${ie}]: ${this.buildLink()}`}showBytes(q){if(this.bytesCount.innerText=q.toString(),q===1){this.bytesPlural.setAttribute("hidden","");return}this.bytesPlural.removeAttribute("hidden")}toast(q,Z,ie={}){return ie.events||(ie.events={}),ie.events.click||(ie.events.click=[]),ie.events.click.push(J=>J.hide()),new Dl.Melba({...ie,content:q,type:Z})}},Pl=Lt;var Bl=class{name(){return"xxd"}matches(q){return/^(\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\n|$))+$/.test(q)}decode(q){return q.trim().replace(/(?<=^|\n)\d{7,8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map(Z=>parseInt(Z,16))}},Il=Bl;di.register(new Il,new ja,new Fa,new Wa);Nr.register(new Ga,new cl,new pl);var wf=new Pl;})();
/**
 * Copyright (c) 2017 The xterm.js authors. All rights reserved.
 * @license MIT
 */
//# sourceMappingURL=app.js.map
