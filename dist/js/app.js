(()=>{var qu=Object.create;var fl=Object.defineProperty;var Ku=Object.getOwnPropertyDescriptor;var Gu=Object.getOwnPropertyNames;var Xu=Object.getPrototypeOf,Yu=Object.prototype.hasOwnProperty;var Qt=($,F)=>()=>(F||$((F={exports:{}}).exports,F),F.exports);var Zu=($,F,D,h)=>{if(F&&typeof F=="object"||typeof F=="function")for(let L of Gu(F))!Yu.call($,L)&&L!==D&&fl($,L,{get:()=>F[L],enumerable:!(h=Ku(F,L))||h.enumerable});return $};var Nt=($,F,D)=>(D=$!=null?qu(Xu($)):{},Zu(F||!$||!$.__esModule?fl(D,"default",{value:$,enumerable:!0}):D,$));var er=Qt((os,ss)=>{(function($,F){typeof os=="object"&&typeof ss<"u"?ss.exports=F():typeof define=="function"&&define.amd?define(F):($=$||self,$.CodeMirror=F())})(os,function(){"use strict";var $=navigator.userAgent,F=navigator.platform,D=/gecko\/\d/i.test($),h=/MSIE \d/.test($),L=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($),y=/Edge\/(\d+)/.exec($),m=h||L||y,_=m&&(h?document.documentMode||6:+(y||L)[1]),v=!y&&/WebKit\//.test($),T=v&&/Qt\/\d+\.\d+/.test($),w=!y&&/Chrome\//.test($),c=/Opera\//.test($),p=/Apple Computer/.test(navigator.vendor),C=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test($),d=/PhantomJS/.test($),s=p&&(/Mobile\/\w+/.test($)||navigator.maxTouchPoints>2),n=/Android/.test($),l=s||n||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test($),a=s||/Mac/.test(F),u=/\bCrOS\b/.test($),g=/win/i.test(F),b=c&&$.match(/Version\/(\d*\.\d*)/);b&&(b=Number(b[1])),b&&b>=15&&(c=!1,v=!0);var k=a&&(T||c&&(b==null||b<12.11)),O=D||m&&_>=9;function E(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var A=function(e,t){var i=e.className,r=E(t).exec(i);if(r){var o=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(o?r[1]+o:"")}};function W(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function R(e,t){return W(e).appendChild(t)}function j(e,t,i,r){var o=document.createElement(e);if(i&&(o.className=i),r&&(o.style.cssText=r),typeof t=="string")o.appendChild(document.createTextNode(t));else if(t)for(var f=0;f<t.length;++f)o.appendChild(t[f]);return o}function B(e,t,i,r){var o=j(e,t,i,r);return o.setAttribute("role","presentation"),o}var P;document.createRange?P=function(e,t,i,r){var o=document.createRange();return o.setEnd(r||e,i),o.setStart(e,t),o}:P=function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};function N(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function z(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function V(e,t){var i=e.className;E(t).test(i)||(e.className+=(i?" ":"")+t)}function te(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!E(i[r]).test(t)&&(t+=" "+i[r]);return t}var re=function(e){e.select()};s?re=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:m&&(re=function(e){try{e.select()}catch{}});function fe(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function he(e,t,i){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function xe(e,t,i,r,o){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var f=r||0,S=o||0;;){var x=e.indexOf("	",f);if(x<0||x>=t)return S+(t-f);S+=x-f,S+=i-S%i,f=x+1}}var U=function(){this.id=null,this.f=null,this.time=0,this.handler=fe(this.onTimeout,this)};U.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},U.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};function ee(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}var K=50,Y={toString:function(){return"CodeMirror.Pass"}},G={scroll:!1},Se={origin:"*mouse"},de={origin:"+move"};function Ce(e,t,i){for(var r=0,o=0;;){var f=e.indexOf("	",r);f==-1&&(f=e.length);var S=f-r;if(f==e.length||o+S>=t)return r+Math.min(S,t-o);if(o+=f-r,o+=i-o%i,r=f+1,o>=t)return r}}var De=[""];function Fe(e){for(;De.length<=e;)De.push(Ae(De)+" ");return De[e]}function Ae(e){return e[e.length-1]}function ye(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function je(e,t,i){for(var r=0,o=i(t);r<e.length&&i(e[r])<=o;)r++;e.splice(r,0,t)}function Je(){}function Tt(e,t){var i;return Object.create?i=Object.create(e):(Je.prototype=e,i=new Je),t&&he(t,i),i}var ar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Sr(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||ar.test(e))}function Cr(e,t){return t?t.source.indexOf("\\w")>-1&&Sr(e)?!0:t.test(e):Sr(e)}function Jr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var di=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Fr(e){return e.charCodeAt(0)>=768&&di.test(e)}function Qr(e,t,i){for(;(i<0?t>0:t<e.length)&&Fr(e.charAt(t));)t+=i;return t}function Wt(e,t,i){for(var r=t>i?-1:1;;){if(t==i)return t;var o=(t+i)/2,f=r<0?Math.ceil(o):Math.floor(o);if(f==t)return e(f)?t:i;e(f)?i=f:t=f+r}}function pi(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var o=!1,f=0;f<e.length;++f){var S=e[f];(S.from<i&&S.to>t||t==i&&S.to==t)&&(r(Math.max(S.from,t),Math.min(S.to,i),S.level==1?"rtl":"ltr",f),o=!0)}o||r(t,i,"ltr")}var vt=null;function Ne(e,t,i){var r;vt=null;for(var o=0;o<e.length;++o){var f=e[o];if(f.from<t&&f.to>t)return o;f.to==t&&(f.from!=f.to&&i=="before"?r=o:vt=o),f.from==t&&(f.from!=f.to&&i!="before"?r=o:vt=o)}return r??vt}var lr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(I){return I<=247?e.charAt(I):1424<=I&&I<=1524?"R":1536<=I&&I<=1785?t.charAt(I-1536):1774<=I&&I<=2220?"r":8192<=I&&I<=8203?"w":I==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,f=/[LRr]/,S=/[Lb1n]/,x=/[1n]/;function M(I,q,Z){this.level=I,this.from=q,this.to=Z}return function(I,q){var Z=q=="ltr"?"L":"R";if(I.length==0||q=="ltr"&&!r.test(I))return!1;for(var Q=I.length,J=[],ne=0;ne<Q;++ne)J.push(i(I.charCodeAt(ne)));for(var ae=0,ue=Z;ae<Q;++ae){var pe=J[ae];pe=="m"?J[ae]=ue:ue=pe}for(var _e=0,ve=Z;_e<Q;++_e){var me=J[_e];me=="1"&&ve=="r"?J[_e]="n":f.test(me)&&(ve=me,me=="r"&&(J[_e]="R"))}for(var ke=1,Le=J[0];ke<Q-1;++ke){var Me=J[ke];Me=="+"&&Le=="1"&&J[ke+1]=="1"?J[ke]="1":Me==","&&Le==J[ke+1]&&(Le=="1"||Le=="n")&&(J[ke]=Le),Le=Me}for(var He=0;He<Q;++He){var lt=J[He];if(lt==",")J[He]="N";else if(lt=="%"){var qe=void 0;for(qe=He+1;qe<Q&&J[qe]=="%";++qe);for(var Xt=He&&J[He-1]=="!"||qe<Q&&J[qe]=="1"?"1":"N",It=He;It<qe;++It)J[It]=Xt;He=qe-1}}for(var Ve=0,Ht=Z;Ve<Q;++Ve){var pt=J[Ve];Ht=="L"&&pt=="1"?J[Ve]="L":f.test(pt)&&(Ht=pt)}for(var rt=0;rt<Q;++rt)if(o.test(J[rt])){var $e=void 0;for($e=rt+1;$e<Q&&o.test(J[$e]);++$e);for(var Ge=(rt?J[rt-1]:Z)=="L",Ft=($e<Q?J[$e]:Z)=="L",rn=Ge==Ft?Ge?"L":"R":Z,ui=rt;ui<$e;++ui)J[ui]=rn;rt=$e-1}for(var mt=[],Ir,ct=0;ct<Q;)if(S.test(J[ct])){var Qo=ct;for(++ct;ct<Q&&S.test(J[ct]);++ct);mt.push(new M(0,Qo,ct))}else{var Vr=ct,Ti=mt.length,Ai=q=="rtl"?1:0;for(++ct;ct<Q&&J[ct]!="L";++ct);for(var Et=Vr;Et<ct;)if(x.test(J[Et])){Vr<Et&&(mt.splice(Ti,0,new M(1,Vr,Et)),Ti+=Ai);var nn=Et;for(++Et;Et<ct&&x.test(J[Et]);++Et);mt.splice(Ti,0,new M(2,nn,Et)),Ti+=Ai,Vr=Et}else++Et;Vr<ct&&mt.splice(Ti,0,new M(1,Vr,ct))}return q=="ltr"&&(mt[0].level==1&&(Ir=I.match(/^\s+/))&&(mt[0].from=Ir[0].length,mt.unshift(new M(0,0,Ir[0].length))),Ae(mt).level==1&&(Ir=I.match(/\s+$/))&&(Ae(mt).to-=Ir[0].length,mt.push(new M(0,Q-Ir[0].length,Q)))),q=="rtl"?mt.reverse():mt}}();function ut(e,t){var i=e.order;return i==null&&(i=e.order=lr(e.text,t)),i}var jt=[],we=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||jt).concat(i)}};function cr(e,t){return e._handlers&&e._handlers[t]||jt}function Qe(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,o=r&&r[t];if(o){var f=ee(o,i);f>-1&&(r[t]=o.slice(0,f).concat(o.slice(f+1)))}}}function Ee(e,t){var i=cr(e,t);if(!!i.length)for(var r=Array.prototype.slice.call(arguments,2),o=0;o<i.length;++o)i[o].apply(null,r)}function We(e,t,i){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ee(e,i||t.type,e,t),ft(t)||t.codemirrorIgnore}function ur(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)ee(i,t[r])==-1&&i.push(t[r])}function Ke(e,t){return cr(e,t).length>0}function At(e){e.prototype.on=function(t,i){we(this,t,i)},e.prototype.off=function(t,i){Qe(this,t,i)}}function Xe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function fr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function tr(e){Xe(e),fr(e)}function Yt(e){return e.target||e.srcElement}function Nr(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),a&&e.ctrlKey&&t==1&&(t=3),t}var wr=function(){if(m&&_<9)return!1;var e=j("div");return"draggable"in e||"dragDrop"in e}(),et;function Wr(e){if(et==null){var t=j("span","\u200B");R(e,j("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(et=t.offsetWidth<=1&&t.offsetHeight>2&&!(m&&_<8))}var i=et?j("span","\u200B"):j("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}var Lr;function Mt(e){if(Lr!=null)return Lr;var t=R(e,document.createTextNode("A\u062EA")),i=P(t,0,1).getBoundingClientRect(),r=P(t,1,2).getBoundingClientRect();return W(e),!i||i.left==i.right?!1:Lr=r.right-i.right<3}var xr=`

b`.split(/\n/).length!=3?function(e){for(var t=0,i=[],r=e.length;t<=r;){var o=e.indexOf(`
`,t);o==-1&&(o=e.length);var f=e.slice(t,e.charAt(o-1)=="\r"?o-1:o),S=f.indexOf("\r");S!=-1?(i.push(f.slice(0,S)),t+=S+1):(i.push(f),t=o+1)}return i}:function(e){return e.split(/\r\n?|\n/)},jr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Ur=function(){var e=j("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),kr=null;function Zt(e){if(kr!=null)return kr;var t=R(e,j("span","x")),i=t.getBoundingClientRect(),r=P(t,0,1).getBoundingClientRect();return kr=Math.abs(i.left-r.left)>1}var gt={},ht={};function zr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),gt[e]=t}function Ut(e,t){ht[e]=t}function hr(e){if(typeof e=="string"&&ht.hasOwnProperty(e))e=ht[e];else if(e&&typeof e.name=="string"&&ht.hasOwnProperty(e.name)){var t=ht[e.name];typeof t=="string"&&(t={name:t}),e=Tt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return hr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return hr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function dr(e,t){t=hr(t);var i=gt[t.name];if(!i)return dr(e,"text/plain");var r=i(e,t);if(bt.hasOwnProperty(t.name)){var o=bt[t.name];for(var f in o)!o.hasOwnProperty(f)||(r.hasOwnProperty(f)&&(r["_"+f]=r[f]),r[f]=o[f])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var S in t.modeProps)r[S]=t.modeProps[S];return r}var bt={};function St(e,t){var i=bt.hasOwnProperty(e)?bt[e]:bt[e]={};he(t,i)}function dt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var o=t[r];o instanceof Array&&(o=o.concat([])),i[r]=o}return i}function Er(e,t){for(var i;e.innerMode&&(i=e.innerMode(t),!(!i||i.mode==e));)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Tr(e,t,i){return e.startState?e.startState(t,i):!0}var Ie=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Ie.prototype.eol=function(){return this.pos>=this.string.length},Ie.prototype.sol=function(){return this.pos==this.lineStart},Ie.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ie.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ie.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e.test?e.test(t):e(t)),i)return++this.pos,t},Ie.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ie.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ie.prototype.skipToEnd=function(){this.pos=this.string.length},Ie.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ie.prototype.backUp=function(e){this.pos-=e},Ie.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=xe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?xe(this.string,this.lineStart,this.tabSize):0)},Ie.prototype.indentation=function(){return xe(this.string,null,this.tabSize)-(this.lineStart?xe(this.string,this.lineStart,this.tabSize):0)},Ie.prototype.match=function(e,t,i){if(typeof e=="string"){var r=function(S){return i?S.toLowerCase():S},o=this.string.substr(this.pos,e.length);if(r(o)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var f=this.string.slice(this.pos).match(e);return f&&f.index>0?null:(f&&t!==!1&&(this.pos+=f[0].length),f)}},Ie.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ie.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ie.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ie.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function be(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var o=i.children[r],f=o.chunkSize();if(t<f){i=o;break}t-=f}return i.lines[t]}function Ot(e,t,i){var r=[],o=t.line;return e.iter(t.line,i.line+1,function(f){var S=f.text;o==i.line&&(S=S.slice(0,i.ch)),o==t.line&&(S=S.slice(t.ch)),r.push(S),++o}),r}function Ar(e,t,i){var r=[];return e.iter(t,i,function(o){r.push(o.text)}),r}function it(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function Re(e){if(e.parent==null)return null;for(var t=e.parent,i=ee(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var o=0;r.children[o]!=t;++o)i+=r.children[o].chunkSize();return i+t.first}function Rt(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var o=e.children[r],f=o.height;if(t<f){e=o;continue e}t-=f,i+=o.chunkSize()}return i}while(!e.lines);for(var S=0;S<e.lines.length;++S){var x=e.lines[S],M=x.height;if(t<M)break;t-=M}return i+S}function rr(e,t){return t>=e.first&&t<e.first+e.size}function Mr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function le(e,t,i){if(i===void 0&&(i=null),!(this instanceof le))return new le(e,t,i);this.line=e,this.ch=t,this.sticky=i}function H(e,t){return e.line-t.line||e.ch-t.ch}function X(e,t){return e.sticky==t.sticky&&H(e,t)==0}function oe(e){return le(e.line,e.ch)}function ce(e,t){return H(e,t)<0?t:e}function Te(e,t){return H(e,t)<0?e:t}function Oe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return le(e.first,0);var i=e.first+e.size-1;return t.line>i?le(i,be(e,i).text.length):Ze(t,be(e,t.line).text.length)}function Ze(e,t){var i=e.ch;return i==null||i>t?le(e.line,t):i<0?le(e.line,0):e}function _t(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=ge(e,t[r]);return i}var Or=function(e,t){this.state=e,this.lookAhead=t},zt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};zt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},zt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(e,t,i){return t instanceof Or?new zt(e,dt(e.mode,t.state),i,t.lookAhead):new zt(e,dt(e.mode,t),i)},zt.prototype.save=function(e){var t=e!==!1?dt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Or(t,this.maxLookAhead):t};function Di(e,t,i,r){var o=[e.state.modeGen],f={};cn(e,t.text,e.doc.mode,i,function(I,q){return o.push(I,q)},f,r);for(var S=i.state,x=function(I){i.baseTokens=o;var q=e.state.overlays[I],Z=1,Q=0;i.state=!0,cn(e,t.text,q.mode,i,function(J,ne){for(var ae=Z;Q<J;){var ue=o[Z];ue>J&&o.splice(Z,1,J,o[Z+1],ue),Z+=2,Q=Math.min(J,ue)}if(!!ne)if(q.opaque)o.splice(ae,Z-ae,J,"overlay "+ne),Z=ae+2;else for(;ae<Z;ae+=2){var pe=o[ae+1];o[ae+1]=(pe?pe+" ":"")+"overlay "+ne}},f),i.state=S,i.baseTokens=null,i.baseTokenPos=1},M=0;M<e.state.overlays.length;++M)x(M);return{styles:o,classes:f.bgClass||f.textClass?f:null}}function Bi(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=qr(e,Re(t)),o=t.text.length>e.options.maxHighlightLength&&dt(e.doc.mode,r.state),f=Di(e,t,r);o&&(r.state=o),t.stateAfter=r.save(!o),t.styles=f.styles,f.classes?t.styleClasses=f.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function qr(e,t,i){var r=e.doc,o=e.display;if(!r.mode.startState)return new zt(r,!0,t);var f=po(e,t,i),S=f>r.first&&be(r,f-1).stateAfter,x=S?zt.fromSaved(r,S,f):new zt(r,Tr(r.mode),f);return r.iter(f,t,function(M){vi(e,M.text,x);var I=x.line;M.stateAfter=I==t-1||I%5==0||I>=o.viewFrom&&I<o.viewTo?x.save():null,x.nextLine()}),i&&(r.modeFrontier=x.line),x}function vi(e,t,i,r){var o=e.doc.mode,f=new Ie(t,e.options.tabSize,i);for(f.start=f.pos=r||0,t==""&&Pi(o,i.state);!f.eol();)gi(o,f,i.state),f.start=f.pos}function Pi(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var i=Er(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function gi(e,t,i,r){for(var o=0;o<10;o++){r&&(r[0]=Er(e,i).mode);var f=e.token(t,i);if(t.pos>t.start)return f}throw new Error("Mode "+e.name+" failed to advance stream.")}var Ii=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Hi(e,t,i,r){var o=e.doc,f=o.mode,S;t=ge(o,t);var x=be(o,t.line),M=qr(e,t.line,i),I=new Ie(x.text,e.options.tabSize,M),q;for(r&&(q=[]);(r||I.pos<t.ch)&&!I.eol();)I.start=I.pos,S=gi(f,I,M.state),r&&q.push(new Ii(I,S,dt(o.mode,M.state)));return r?q:new Ii(I,S,M.state)}function Fi(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";t[r]==null?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return e}function cn(e,t,i,r,o,f,S){var x=i.flattenSpans;x==null&&(x=e.options.flattenSpans);var M=0,I=null,q=new Ie(t,e.options.tabSize,r),Z,Q=e.options.addModeClass&&[null];for(t==""&&Fi(Pi(i,r.state),f);!q.eol();){if(q.pos>e.options.maxHighlightLength?(x=!1,S&&vi(e,t,r,q.pos),q.pos=t.length,Z=null):Z=Fi(gi(i,q,r.state,Q),f),Q){var J=Q[0].name;J&&(Z="m-"+(Z?J+" "+Z:J))}if(!x||I!=Z){for(;M<q.start;)M=Math.min(q.start,M+5e3),o(M,I);I=Z}q.start=q.pos}for(;M<q.pos;){var ne=Math.min(q.pos,M+5e3);o(ne,I),M=ne}}function po(e,t,i){for(var r,o,f=e.doc,S=i?-1:t-(e.doc.mode.innerMode?1e3:100),x=t;x>S;--x){if(x<=f.first)return f.first;var M=be(f,x-1),I=M.stateAfter;if(I&&(!i||x+(I instanceof Or?I.lookAhead:0)<=f.modeFrontier))return x;var q=xe(M.text,null,e.options.tabSize);(o==null||r>q)&&(o=x-1,r=q)}return o}function In(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var o=be(e,r).stateAfter;if(o&&(!(o instanceof Or)||r+o.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}var un=!1,pr=!1;function vo(){un=!0}function se(){pr=!0}function ie(e,t,i){this.marker=e,this.from=t,this.to=i}function Ct(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function _i(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function yi(e,t,i){var r=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));r&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function tt(e,t,i){var r;if(e)for(var o=0;o<e.length;++o){var f=e[o],S=f.marker,x=f.from==null||(S.inclusiveLeft?f.from<=t:f.from<t);if(x||f.from==t&&S.type=="bookmark"&&(!i||!f.marker.insertLeft)){var M=f.to==null||(S.inclusiveRight?f.to>=t:f.to>t);(r||(r=[])).push(new ie(S,f.from,M?null:f.to))}}return r}function ir(e,t,i){var r;if(e)for(var o=0;o<e.length;++o){var f=e[o],S=f.marker,x=f.to==null||(S.inclusiveRight?f.to>=t:f.to>t);if(x||f.from==t&&S.type=="bookmark"&&(!i||f.marker.insertLeft)){var M=f.from==null||(S.inclusiveLeft?f.from<=t:f.from<t);(r||(r=[])).push(new ie(S,M?null:f.from-t,f.to==null?null:f.to-t))}}return r}function qt(e,t){if(t.full)return null;var i=rr(e,t.from.line)&&be(e,t.from.line).markedSpans,r=rr(e,t.to.line)&&be(e,t.to.line).markedSpans;if(!i&&!r)return null;var o=t.from.ch,f=t.to.ch,S=H(t.from,t.to)==0,x=tt(i,o,S),M=ir(r,f,S),I=t.text.length==1,q=Ae(t.text).length+(I?o:0);if(x)for(var Z=0;Z<x.length;++Z){var Q=x[Z];if(Q.to==null){var J=Ct(M,Q.marker);J?I&&(Q.to=J.to==null?null:J.to+q):Q.to=o}}if(M)for(var ne=0;ne<M.length;++ne){var ae=M[ne];if(ae.to!=null&&(ae.to+=q),ae.from==null){var ue=Ct(x,ae.marker);ue||(ae.from=q,I&&(x||(x=[])).push(ae))}else ae.from+=q,I&&(x||(x=[])).push(ae)}x&&(x=ei(x)),M&&M!=x&&(M=ei(M));var pe=[x];if(!I){var _e=t.text.length-2,ve;if(_e>0&&x)for(var me=0;me<x.length;++me)x[me].to==null&&(ve||(ve=[])).push(new ie(x[me].marker,null,null));for(var ke=0;ke<_e;++ke)pe.push(ve);pe.push(M)}return pe}function ei(e){for(var t=0;t<e.length;++t){var i=e[t];i.from!=null&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function wt(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(J){if(J.markedSpans)for(var ne=0;ne<J.markedSpans.length;++ne){var ae=J.markedSpans[ne].marker;ae.readOnly&&(!r||ee(r,ae)==-1)&&(r||(r=[])).push(ae)}}),!r)return null;for(var o=[{from:t,to:i}],f=0;f<r.length;++f)for(var S=r[f],x=S.find(0),M=0;M<o.length;++M){var I=o[M];if(!(H(I.to,x.from)<0||H(I.from,x.to)>0)){var q=[M,1],Z=H(I.from,x.from),Q=H(I.to,x.to);(Z<0||!S.inclusiveLeft&&!Z)&&q.push({from:I.from,to:x.from}),(Q>0||!S.inclusiveRight&&!Q)&&q.push({from:x.to,to:I.to}),o.splice.apply(o,q),M+=q.length-3}}return o}function Vt(e){var t=e.markedSpans;if(!!t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function ti(e,t){if(!!t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Rr(e){return e.inclusiveLeft?-1:0}function vr(e){return e.inclusiveRight?1:0}function Dr(e,t){var i=e.lines.length-t.lines.length;if(i!=0)return i;var r=e.find(),o=t.find(),f=H(r.from,o.from)||Rr(e)-Rr(t);if(f)return-f;var S=H(r.to,o.to)||vr(e)-vr(t);return S||t.id-e.id}function Dt(e,t){var i=pr&&e.markedSpans,r;if(i)for(var o=void 0,f=0;f<i.length;++f)o=i[f],o.marker.collapsed&&(t?o.from:o.to)==null&&(!r||Dr(r,o.marker)<0)&&(r=o.marker);return r}function Lt(e){return Dt(e,!0)}function Ue(e){return Dt(e,!1)}function gr(e,t){var i=pr&&e.markedSpans,r;if(i)for(var o=0;o<i.length;++o){var f=i[o];f.marker.collapsed&&(f.from==null||f.from<t)&&(f.to==null||f.to>t)&&(!r||Dr(r,f.marker)<0)&&(r=f.marker)}return r}function Kt(e,t,i,r,o){var f=be(e,t),S=pr&&f.markedSpans;if(S)for(var x=0;x<S.length;++x){var M=S[x];if(!!M.marker.collapsed){var I=M.marker.find(0),q=H(I.from,i)||Rr(M.marker)-Rr(o),Z=H(I.to,r)||vr(M.marker)-vr(o);if(!(q>=0&&Z<=0||q<=0&&Z>=0)&&(q<=0&&(M.marker.inclusiveRight&&o.inclusiveLeft?H(I.to,i)>=0:H(I.to,i)>0)||q>=0&&(M.marker.inclusiveRight&&o.inclusiveLeft?H(I.from,r)<=0:H(I.from,r)<0)))return!0}}}function nt(e){for(var t;t=Lt(e);)e=t.find(-1,!0).line;return e}function Kr(e){for(var t;t=Ue(e);)e=t.find(1,!0).line;return e}function Ni(e){for(var t,i;t=Ue(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function nr(e,t){var i=be(e,t),r=nt(i);return i==r?t:Re(r)}function Gr(e,t){if(t>e.lastLine())return t;var i=be(e,t),r;if(!xt(e,i))return t;for(;r=Ue(i);)i=r.find(1,!0).line;return Re(i)+1}function xt(e,t){var i=pr&&t.markedSpans;if(i){for(var r=void 0,o=0;o<i.length;++o)if(r=i[o],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&mi(e,t,r))return!0}}}function mi(e,t,i){if(i.to==null){var r=i.marker.find(1,!0);return mi(e,r.line,Ct(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var o=void 0,f=0;f<t.markedSpans.length;++f)if(o=t.markedSpans[f],o.marker.collapsed&&!o.marker.widgetNode&&o.from==i.to&&(o.to==null||o.to!=i.from)&&(o.marker.inclusiveLeft||i.marker.inclusiveRight)&&mi(e,t,o))return!0}function $t(e){e=nt(e);for(var t=0,i=e.parent,r=0;r<i.lines.length;++r){var o=i.lines[r];if(o==e)break;t+=o.height}for(var f=i.parent;f;i=f,f=i.parent)for(var S=0;S<f.children.length;++S){var x=f.children[S];if(x==i)break;t+=x.height}return t}function or(e){if(e.height==0)return 0;for(var t=e.text.length,i,r=e;i=Lt(r);){var o=i.find(0,!0);r=o.from.line,t+=o.from.ch-o.to.ch}for(r=e;i=Ue(r);){var f=i.find(0,!0);t-=r.text.length-f.from.ch,r=f.to.line,t+=r.text.length-f.to.ch}return t}function _r(e){var t=e.display,i=e.doc;t.maxLine=be(i,i.first),t.maxLineLength=or(t.maxLine),t.maxLineChanged=!0,i.iter(function(r){var o=or(r);o>t.maxLineLength&&(t.maxLineLength=o,t.maxLine=r)})}var ri=function(e,t,i){this.text=e,ti(this,t),this.height=i?i(this):1};ri.prototype.lineNo=function(){return Re(this)},At(ri);function nc(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Vt(e),ti(e,i);var o=r?r(e):1;o!=e.height&&it(e,o)}function oc(e){e.parent=null,Vt(e)}var sc={},ac={};function Ts(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?ac:sc;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function As(e,t){var i=B("span",null,null,v?"padding-right: .1px":null),r={pre:B("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var f=o?t.rest[o-1]:t.line,S=void 0;r.pos=0,r.addToken=cc,Mt(e.display.measure)&&(S=ut(f,e.doc.direction))&&(r.addToken=fc(r.addToken,S)),r.map=[];var x=t!=e.display.externalMeasured&&Re(f);hc(f,r,Bi(e,f,x)),f.styleClasses&&(f.styleClasses.bgClass&&(r.bgClass=te(f.styleClasses.bgClass,r.bgClass||"")),f.styleClasses.textClass&&(r.textClass=te(f.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(Wr(e.display.measure))),o==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(v){var M=r.content.lastChild;(/\bcm-tab\b/.test(M.className)||M.querySelector&&M.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ee(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=te(r.pre.className,r.textClass||"")),r}function lc(e){var t=j("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function cc(e,t,i,r,o,f,S){if(!!t){var x=e.splitSpaces?uc(t,e.trailingSpace):t,M=e.cm.state.specialChars,I=!1,q;if(!M.test(t))e.col+=t.length,q=document.createTextNode(x),e.map.push(e.pos,e.pos+t.length,q),m&&_<9&&(I=!0),e.pos+=t.length;else{q=document.createDocumentFragment();for(var Z=0;;){M.lastIndex=Z;var Q=M.exec(t),J=Q?Q.index-Z:t.length-Z;if(J){var ne=document.createTextNode(x.slice(Z,Z+J));m&&_<9?q.appendChild(j("span",[ne])):q.appendChild(ne),e.map.push(e.pos,e.pos+J,ne),e.col+=J,e.pos+=J}if(!Q)break;Z+=J+1;var ae=void 0;if(Q[0]=="	"){var ue=e.cm.options.tabSize,pe=ue-e.col%ue;ae=q.appendChild(j("span",Fe(pe),"cm-tab")),ae.setAttribute("role","presentation"),ae.setAttribute("cm-text","	"),e.col+=pe}else Q[0]=="\r"||Q[0]==`
`?(ae=q.appendChild(j("span",Q[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),ae.setAttribute("cm-text",Q[0]),e.col+=1):(ae=e.cm.options.specialCharPlaceholder(Q[0]),ae.setAttribute("cm-text",Q[0]),m&&_<9?q.appendChild(j("span",[ae])):q.appendChild(ae),e.col+=1);e.map.push(e.pos,e.pos+1,ae),e.pos++}}if(e.trailingSpace=x.charCodeAt(t.length-1)==32,i||r||o||I||f||S){var _e=i||"";r&&(_e+=r),o&&(_e+=o);var ve=j("span",[q],_e,f);if(S)for(var me in S)S.hasOwnProperty(me)&&me!="style"&&me!="class"&&ve.setAttribute(me,S[me]);return e.content.appendChild(ve)}e.content.appendChild(q)}}function uc(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",o=0;o<e.length;o++){var f=e.charAt(o);f==" "&&i&&(o==e.length-1||e.charCodeAt(o+1)==32)&&(f="\xA0"),r+=f,i=f==" "}return r}function fc(e,t){return function(i,r,o,f,S,x,M){o=o?o+" cm-force-border":"cm-force-border";for(var I=i.pos,q=I+r.length;;){for(var Z=void 0,Q=0;Q<t.length&&(Z=t[Q],!(Z.to>I&&Z.from<=I));Q++);if(Z.to>=q)return e(i,r,o,f,S,x,M);e(i,r.slice(0,Z.to-I),o,f,null,x,M),f=null,r=r.slice(Z.to-I),I=Z.to}}}function Ms(e,t,i,r){var o=!r&&i.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!r&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",i.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function hc(e,t,i){var r=e.markedSpans,o=e.text,f=0;if(!r){for(var S=1;S<i.length;S+=2)t.addToken(t,o.slice(f,f=i[S]),Ts(i[S+1],t.cm.options));return}for(var x=o.length,M=0,I=1,q="",Z,Q,J=0,ne,ae,ue,pe,_e;;){if(J==M){ne=ae=ue=Q="",_e=null,pe=null,J=1/0;for(var ve=[],me=void 0,ke=0;ke<r.length;++ke){var Le=r[ke],Me=Le.marker;if(Me.type=="bookmark"&&Le.from==M&&Me.widgetNode)ve.push(Me);else if(Le.from<=M&&(Le.to==null||Le.to>M||Me.collapsed&&Le.to==M&&Le.from==M)){if(Le.to!=null&&Le.to!=M&&J>Le.to&&(J=Le.to,ae=""),Me.className&&(ne+=" "+Me.className),Me.css&&(Q=(Q?Q+";":"")+Me.css),Me.startStyle&&Le.from==M&&(ue+=" "+Me.startStyle),Me.endStyle&&Le.to==J&&(me||(me=[])).push(Me.endStyle,Le.to),Me.title&&((_e||(_e={})).title=Me.title),Me.attributes)for(var He in Me.attributes)(_e||(_e={}))[He]=Me.attributes[He];Me.collapsed&&(!pe||Dr(pe.marker,Me)<0)&&(pe=Le)}else Le.from>M&&J>Le.from&&(J=Le.from)}if(me)for(var lt=0;lt<me.length;lt+=2)me[lt+1]==J&&(ae+=" "+me[lt]);if(!pe||pe.from==M)for(var qe=0;qe<ve.length;++qe)Ms(t,0,ve[qe]);if(pe&&(pe.from||0)==M){if(Ms(t,(pe.to==null?x+1:pe.to)-M,pe.marker,pe.from==null),pe.to==null)return;pe.to==M&&(pe=!1)}}if(M>=x)break;for(var Xt=Math.min(x,J);;){if(q){var It=M+q.length;if(!pe){var Ve=It>Xt?q.slice(0,Xt-M):q;t.addToken(t,Ve,Z?Z+ne:ne,ue,M+Ve.length==J?ae:"",Q,_e)}if(It>=Xt){q=q.slice(Xt-M),M=Xt;break}M=It,ue=""}q=o.slice(f,f=i[I++]),Z=Ts(i[I++],t.cm.options)}}}function Os(e,t,i){this.line=t,this.rest=Ni(t),this.size=this.rest?Re(Ae(this.rest))-i+1:1,this.node=this.text=null,this.hidden=xt(e,t)}function Hn(e,t,i){for(var r=[],o,f=t;f<i;f=o){var S=new Os(e.doc,be(e.doc,f),f);o=f+S.size,r.push(S)}return r}var Wi=null;function dc(e){Wi?Wi.ops.push(e):e.ownsGroup=Wi={ops:[e],delayedCallbacks:[]}}function pc(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var o=e.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(i<t.length)}function vc(e,t){var i=e.ownsGroup;if(!!i)try{pc(i)}finally{Wi=null,t(i)}}var fn=null;function ot(e,t){var i=cr(e,t);if(!!i.length){var r=Array.prototype.slice.call(arguments,2),o;Wi?o=Wi.delayedCallbacks:fn?o=fn:(o=fn=[],setTimeout(gc,0));for(var f=function(x){o.push(function(){return i[x].apply(null,r)})},S=0;S<i.length;++S)f(S)}}function gc(){var e=fn;fn=null;for(var t=0;t<e.length;++t)e[t]()}function Rs(e,t,i,r){for(var o=0;o<t.changes.length;o++){var f=t.changes[o];f=="text"?yc(e,t):f=="gutter"?Bs(e,t,i,r):f=="class"?go(e,t):f=="widget"&&mc(e,t,r)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=j("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),m&&_<8&&(e.node.style.zIndex=2)),e.node}function _c(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=hn(t);t.background=r.insertBefore(j("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}function Ds(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):As(e,t)}function yc(e,t){var i=t.text.className,r=Ds(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,go(e,t)):i&&(t.text.className=i)}function go(e,t){_c(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function Bs(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=hn(t);t.gutterBackground=j("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var f=t.line.gutterMarkers;if(e.options.lineNumbers||f){var S=hn(t),x=t.gutter=j("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(x.setAttribute("aria-hidden","true"),e.display.input.setUneditable(x),S.insertBefore(x,t.text),t.line.gutterClass&&(x.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!f||!f["CodeMirror-linenumbers"])&&(t.lineNumber=x.appendChild(j("div",Mr(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),f)for(var M=0;M<e.display.gutterSpecs.length;++M){var I=e.display.gutterSpecs[M].className,q=f.hasOwnProperty(I)&&f[I];q&&x.appendChild(j("div",[q],"CodeMirror-gutter-elt","left: "+r.gutterLeft[I]+"px; width: "+r.gutterWidth[I]+"px"))}}}function mc(e,t,i){t.alignable&&(t.alignable=null);for(var r=E("CodeMirror-linewidget"),o=t.node.firstChild,f=void 0;o;o=f)f=o.nextSibling,r.test(o.className)&&t.node.removeChild(o);Ps(e,t,i)}function bc(e,t,i,r){var o=Ds(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),go(e,t),Bs(e,t,i,r),Ps(e,t,r),t.node}function Ps(e,t,i){if(Is(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)Is(e,t.rest[r],t,i,!1)}function Is(e,t,i,r,o){if(!!t.widgets)for(var f=hn(i),S=0,x=t.widgets;S<x.length;++S){var M=x[S],I=j("div",[M.node],"CodeMirror-linewidget"+(M.className?" "+M.className:""));M.handleMouseEvents||I.setAttribute("cm-ignore-events","true"),Sc(M,I,i,r),e.display.input.setUneditable(I),o&&M.above?f.insertBefore(I,i.gutter||i.text):f.appendChild(I),ot(M,"redraw")}}function Sc(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var o=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(o-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function dn(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!N(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),R(t.display.measure,j("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Xr(e,t){for(var i=Yt(t);i!=e.wrapper;i=i.parentNode)if(!i||i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true"||i.parentNode==e.sizer&&i!=e.mover)return!0}function Fn(e){return e.lineSpace.offsetTop}function _o(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Hs(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=R(e.measure,j("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Br(e){return K-e.display.nativeBarWidth}function bi(e){return e.display.scroller.clientWidth-Br(e)-e.display.barWidth}function yo(e){return e.display.scroller.clientHeight-Br(e)-e.display.barHeight}function Cc(e,t,i){var r=e.options.lineWrapping,o=r&&bi(e);if(!t.measure.heights||r&&t.measure.width!=o){var f=t.measure.heights=[];if(r){t.measure.width=o;for(var S=t.text.firstChild.getClientRects(),x=0;x<S.length-1;x++){var M=S[x],I=S[x+1];Math.abs(M.bottom-I.bottom)>2&&f.push((M.bottom+I.top)/2-i.top)}}f.push(i.bottom-i.top)}}function Fs(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var o=0;o<e.rest.length;o++)if(Re(e.rest[o])>i)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}}function wc(e,t){t=nt(t);var i=Re(t),r=e.display.externalMeasured=new Os(e.doc,t,i);r.lineN=i;var o=r.built=As(e,r);return r.text=o.pre,R(e.display.lineMeasure,o.pre),r}function Ns(e,t,i,r){return Pr(e,ji(e,t),i,r)}function mo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[wi(e,t)];var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function ji(e,t){var i=Re(t),r=mo(e,i);r&&!r.text?r=null:r&&r.changes&&(Rs(e,r,i,Lo(e)),e.curOp.forceUpdate=!0),r||(r=wc(e,t));var o=Fs(r,t,i);return{line:t,view:r,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Pr(e,t,i,r,o){t.before&&(i=-1);var f=i+(r||""),S;return t.cache.hasOwnProperty(f)?S=t.cache[f]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Cc(e,t.view,t.rect),t.hasHeights=!0),S=xc(e,t,i,r),S.bogus||(t.cache[f]=S)),{left:S.left,right:S.right,top:o?S.rtop:S.top,bottom:o?S.rbottom:S.bottom}}var Ws={left:0,right:0,top:0,bottom:0};function js(e,t,i){for(var r,o,f,S,x,M,I=0;I<e.length;I+=3)if(x=e[I],M=e[I+1],t<x?(o=0,f=1,S="left"):t<M?(o=t-x,f=o+1):(I==e.length-3||t==M&&e[I+3]>t)&&(f=M-x,o=f-1,t>=M&&(S="right")),o!=null){if(r=e[I+2],x==M&&i==(r.insertLeft?"left":"right")&&(S=i),i=="left"&&o==0)for(;I&&e[I-2]==e[I-3]&&e[I-1].insertLeft;)r=e[(I-=3)+2],S="left";if(i=="right"&&o==M-x)for(;I<e.length-3&&e[I+3]==e[I+4]&&!e[I+5].insertLeft;)r=e[(I+=3)+2],S="right";break}return{node:r,start:o,end:f,collapse:S,coverStart:x,coverEnd:M}}function Lc(e,t){var i=Ws;if(t=="left")for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var o=e.length-1;o>=0&&(i=e[o]).left==i.right;o--);return i}function xc(e,t,i,r){var o=js(t.map,i,r),f=o.node,S=o.start,x=o.end,M=o.collapse,I;if(f.nodeType==3){for(var q=0;q<4;q++){for(;S&&Fr(t.line.text.charAt(o.coverStart+S));)--S;for(;o.coverStart+x<o.coverEnd&&Fr(t.line.text.charAt(o.coverStart+x));)++x;if(m&&_<9&&S==0&&x==o.coverEnd-o.coverStart?I=f.parentNode.getBoundingClientRect():I=Lc(P(f,S,x).getClientRects(),r),I.left||I.right||S==0)break;x=S,S=S-1,M="right"}m&&_<11&&(I=kc(e.display.measure,I))}else{S>0&&(M=r="right");var Z;e.options.lineWrapping&&(Z=f.getClientRects()).length>1?I=Z[r=="right"?Z.length-1:0]:I=f.getBoundingClientRect()}if(m&&_<9&&!S&&(!I||!I.left&&!I.right)){var Q=f.parentNode.getClientRects()[0];Q?I={left:Q.left,right:Q.left+zi(e.display),top:Q.top,bottom:Q.bottom}:I=Ws}for(var J=I.top-t.rect.top,ne=I.bottom-t.rect.top,ae=(J+ne)/2,ue=t.view.measure.heights,pe=0;pe<ue.length-1&&!(ae<ue[pe]);pe++);var _e=pe?ue[pe-1]:0,ve=ue[pe],me={left:(M=="right"?I.right:I.left)-t.rect.left,right:(M=="left"?I.left:I.right)-t.rect.left,top:_e,bottom:ve};return!I.left&&!I.right&&(me.bogus=!0),e.options.singleCursorHeightPerLine||(me.rtop=J,me.rbottom=ne),me}function kc(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Zt(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function Us(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function zs(e){e.display.externalMeasure=null,W(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Us(e.display.view[t])}function pn(e){zs(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function qs(){return w&&n?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ks(){return w&&n?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function bo(e){var t=nt(e),i=t.widgets,r=0;if(i)for(var o=0;o<i.length;++o)i[o].above&&(r+=dn(i[o]));return r}function Nn(e,t,i,r,o){if(!o){var f=bo(t);i.top+=f,i.bottom+=f}if(r=="line")return i;r||(r="local");var S=$t(t);if(r=="local"?S+=Fn(e.display):S-=e.display.viewOffset,r=="page"||r=="window"){var x=e.display.lineSpace.getBoundingClientRect();S+=x.top+(r=="window"?0:Ks());var M=x.left+(r=="window"?0:qs());i.left+=M,i.right+=M}return i.top+=S,i.bottom+=S,i}function Gs(e,t,i){if(i=="div")return t;var r=t.left,o=t.top;if(i=="page")r-=qs(),o-=Ks();else if(i=="local"||!i){var f=e.display.sizer.getBoundingClientRect();r+=f.left,o+=f.top}var S=e.display.lineSpace.getBoundingClientRect();return{left:r-S.left,top:o-S.top}}function Wn(e,t,i,r,o){return r||(r=be(e.doc,t.line)),Nn(e,r,Ns(e,r,t.ch,o),i)}function yr(e,t,i,r,o,f){r=r||be(e.doc,t.line),o||(o=ji(e,r));function S(ne,ae){var ue=Pr(e,o,ne,ae?"right":"left",f);return ae?ue.left=ue.right:ue.right=ue.left,Nn(e,r,ue,i)}var x=ut(r,e.doc.direction),M=t.ch,I=t.sticky;if(M>=r.text.length?(M=r.text.length,I="before"):M<=0&&(M=0,I="after"),!x)return S(I=="before"?M-1:M,I=="before");function q(ne,ae,ue){var pe=x[ae],_e=pe.level==1;return S(ue?ne-1:ne,_e!=ue)}var Z=Ne(x,M,I),Q=vt,J=q(M,Z,I=="before");return Q!=null&&(J.other=q(M,Q,I!="before")),J}function Xs(e,t){var i=0;t=ge(e.doc,t),e.options.lineWrapping||(i=zi(e.display)*t.ch);var r=be(e.doc,t.line),o=$t(r)+Fn(e.display);return{left:i,right:i,top:o,bottom:o+r.height}}function So(e,t,i,r,o){var f=le(e,t,i);return f.xRel=o,r&&(f.outside=r),f}function Co(e,t,i){var r=e.doc;if(i+=e.display.viewOffset,i<0)return So(r.first,0,null,-1,-1);var o=Rt(r,i),f=r.first+r.size-1;if(o>f)return So(r.first+r.size-1,be(r,f).text.length,null,1,1);t<0&&(t=0);for(var S=be(r,o);;){var x=Ec(e,S,o,t,i),M=gr(S,x.ch+(x.xRel>0||x.outside>0?1:0));if(!M)return x;var I=M.find(1);if(I.line==o)return I;S=be(r,o=I.line)}}function Ys(e,t,i,r){r-=bo(t);var o=t.text.length,f=Wt(function(S){return Pr(e,i,S-1).bottom<=r},o,0);return o=Wt(function(S){return Pr(e,i,S).top>r},f,o),{begin:f,end:o}}function Zs(e,t,i,r){i||(i=ji(e,t));var o=Nn(e,t,Pr(e,i,r),"line").top;return Ys(e,t,i,o)}function wo(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t}function Ec(e,t,i,r,o){o-=$t(t);var f=ji(e,t),S=bo(t),x=0,M=t.text.length,I=!0,q=ut(t,e.doc.direction);if(q){var Z=(e.options.lineWrapping?Ac:Tc)(e,t,i,f,q,r,o);I=Z.level!=1,x=I?Z.from:Z.to-1,M=I?Z.to:Z.from-1}var Q=null,J=null,ne=Wt(function(ke){var Le=Pr(e,f,ke);return Le.top+=S,Le.bottom+=S,wo(Le,r,o,!1)?(Le.top<=o&&Le.left<=r&&(Q=ke,J=Le),!0):!1},x,M),ae,ue,pe=!1;if(J){var _e=r-J.left<J.right-r,ve=_e==I;ne=Q+(ve?0:1),ue=ve?"after":"before",ae=_e?J.left:J.right}else{!I&&(ne==M||ne==x)&&ne++,ue=ne==0?"after":ne==t.text.length?"before":Pr(e,f,ne-(I?1:0)).bottom+S<=o==I?"after":"before";var me=yr(e,le(i,ne,ue),"line",t,f);ae=me.left,pe=o<me.top?-1:o>=me.bottom?1:0}return ne=Qr(t.text,ne,1),So(i,ne,ue,pe,r-ae)}function Tc(e,t,i,r,o,f,S){var x=Wt(function(Z){var Q=o[Z],J=Q.level!=1;return wo(yr(e,le(i,J?Q.to:Q.from,J?"before":"after"),"line",t,r),f,S,!0)},0,o.length-1),M=o[x];if(x>0){var I=M.level!=1,q=yr(e,le(i,I?M.from:M.to,I?"after":"before"),"line",t,r);wo(q,f,S,!0)&&q.top>S&&(M=o[x-1])}return M}function Ac(e,t,i,r,o,f,S){var x=Ys(e,t,r,S),M=x.begin,I=x.end;/\s/.test(t.text.charAt(I-1))&&I--;for(var q=null,Z=null,Q=0;Q<o.length;Q++){var J=o[Q];if(!(J.from>=I||J.to<=M)){var ne=J.level!=1,ae=Pr(e,r,ne?Math.min(I,J.to)-1:Math.max(M,J.from)).right,ue=ae<f?f-ae+1e9:ae-f;(!q||Z>ue)&&(q=J,Z=ue)}}return q||(q=o[o.length-1]),q.from<M&&(q={from:M,to:q.to,level:q.level}),q.to>I&&(q={from:q.from,to:I,level:q.level}),q}var Si;function Ui(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Si==null){Si=j("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Si.appendChild(document.createTextNode("x")),Si.appendChild(j("br"));Si.appendChild(document.createTextNode("x"))}R(e.measure,Si);var i=Si.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),W(e.measure),i||1}function zi(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=j("span","xxxxxxxxxx"),i=j("pre",[t],"CodeMirror-line-like");R(e.measure,i);var r=t.getBoundingClientRect(),o=(r.right-r.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function Lo(e){for(var t=e.display,i={},r={},o=t.gutters.clientLeft,f=t.gutters.firstChild,S=0;f;f=f.nextSibling,++S){var x=e.display.gutterSpecs[S].className;i[x]=f.offsetLeft+f.clientLeft+o,r[x]=f.clientWidth}return{fixedPos:xo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function xo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Vs(e){var t=Ui(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/zi(e.display)-3);return function(o){if(xt(e.doc,o))return 0;var f=0;if(o.widgets)for(var S=0;S<o.widgets.length;S++)o.widgets[S].height&&(f+=o.widgets[S].height);return i?f+(Math.ceil(o.text.length/r)||1)*t:f+t}}function ko(e){var t=e.doc,i=Vs(e);t.iter(function(r){var o=i(r);o!=r.height&&it(r,o)})}function Ci(e,t,i,r){var o=e.display;if(!i&&Yt(t).getAttribute("cm-not-content")=="true")return null;var f,S,x=o.lineSpace.getBoundingClientRect();try{f=t.clientX-x.left,S=t.clientY-x.top}catch{return null}var M=Co(e,f,S),I;if(r&&M.xRel>0&&(I=be(e.doc,M.line).text).length==M.ch){var q=xe(I,I.length,e.options.tabSize)-I.length;M=le(M.line,Math.max(0,Math.round((f-Hs(e.display).left)/zi(e.display))-q))}return M}function wi(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var i=e.display.view,r=0;r<i.length;r++)if(t-=i[r].size,t<0)return r}function Bt(e,t,i,r){t==null&&(t=e.doc.first),i==null&&(i=e.doc.first+e.doc.size),r||(r=0);var o=e.display;if(r&&i<o.viewTo&&(o.updateLineNumbers==null||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)pr&&nr(e.doc,t)<o.viewTo&&ni(e);else if(i<=o.viewFrom)pr&&Gr(e.doc,i+r)>o.viewFrom?ni(e):(o.viewFrom+=r,o.viewTo+=r);else if(t<=o.viewFrom&&i>=o.viewTo)ni(e);else if(t<=o.viewFrom){var f=jn(e,i,i+r,1);f?(o.view=o.view.slice(f.index),o.viewFrom=f.lineN,o.viewTo+=r):ni(e)}else if(i>=o.viewTo){var S=jn(e,t,t,-1);S?(o.view=o.view.slice(0,S.index),o.viewTo=S.lineN):ni(e)}else{var x=jn(e,t,t,-1),M=jn(e,i,i+r,1);x&&M?(o.view=o.view.slice(0,x.index).concat(Hn(e,x.lineN,M.lineN)).concat(o.view.slice(M.index)),o.viewTo+=r):ni(e)}var I=o.externalMeasured;I&&(i<I.lineN?I.lineN+=r:t<I.lineN+I.size&&(o.externalMeasured=null))}function ii(e,t,i){e.curOp.viewChanged=!0;var r=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var f=r.view[wi(e,t)];if(f.node!=null){var S=f.changes||(f.changes=[]);ee(S,i)==-1&&S.push(i)}}}function ni(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function jn(e,t,i,r){var o=wi(e,t),f,S=e.display.view;if(!pr||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var x=e.display.viewFrom,M=0;M<o;M++)x+=S[M].size;if(x!=t){if(r>0){if(o==S.length-1)return null;f=x+S[o].size-t,o++}else f=x-t;t+=f,i+=f}for(;nr(e.doc,i)!=i;){if(o==(r<0?0:S.length-1))return null;i+=r*S[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:i}}function Mc(e,t,i){var r=e.display,o=r.view;o.length==0||t>=r.viewTo||i<=r.viewFrom?(r.view=Hn(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=Hn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(wi(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(Hn(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,wi(e,i)))),r.viewTo=i}function $s(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var o=t[r];!o.hidden&&(!o.node||o.changes)&&++i}return i}function vn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Js(e,t){t===void 0&&(t=!0);var i=e.doc,r={},o=r.cursors=document.createDocumentFragment(),f=r.selection=document.createDocumentFragment(),S=e.options.$customCursor;S&&(t=!0);for(var x=0;x<i.sel.ranges.length;x++)if(!(!t&&x==i.sel.primIndex)){var M=i.sel.ranges[x];if(!(M.from().line>=e.display.viewTo||M.to().line<e.display.viewFrom)){var I=M.empty();if(S){var q=S(e,M);q&&Eo(e,q,o)}else(I||e.options.showCursorWhenSelecting)&&Eo(e,M.head,o);I||Oc(e,M,f)}}return r}function Eo(e,t,i){var r=yr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=i.appendChild(j("div","\xA0","CodeMirror-cursor"));if(o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var f=Wn(e,t,"div",null,null),S=f.right-f.left;o.style.width=(S>0?S:e.defaultCharWidth())+"px"}if(r.other){var x=i.appendChild(j("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));x.style.display="",x.style.left=r.other.left+"px",x.style.top=r.other.top+"px",x.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Un(e,t){return e.top-t.top||e.left-t.left}function Oc(e,t,i){var r=e.display,o=e.doc,f=document.createDocumentFragment(),S=Hs(e.display),x=S.left,M=Math.max(r.sizerWidth,bi(e)-r.sizer.offsetLeft)-S.right,I=o.direction=="ltr";function q(ve,me,ke,Le){me<0&&(me=0),me=Math.round(me),Le=Math.round(Le),f.appendChild(j("div",null,"CodeMirror-selected","position: absolute; left: "+ve+`px;
                             top: `+me+"px; width: "+(ke??M-ve)+`px;
                             height: `+(Le-me)+"px"))}function Z(ve,me,ke){var Le=be(o,ve),Me=Le.text.length,He,lt;function qe(Ve,Ht){return Wn(e,le(ve,Ve),"div",Le,Ht)}function Xt(Ve,Ht,pt){var rt=Zs(e,Le,null,Ve),$e=Ht=="ltr"==(pt=="after")?"left":"right",Ge=pt=="after"?rt.begin:rt.end-(/\s/.test(Le.text.charAt(rt.end-1))?2:1);return qe(Ge,$e)[$e]}var It=ut(Le,o.direction);return pi(It,me||0,ke??Me,function(Ve,Ht,pt,rt){var $e=pt=="ltr",Ge=qe(Ve,$e?"left":"right"),Ft=qe(Ht-1,$e?"right":"left"),rn=me==null&&Ve==0,ui=ke==null&&Ht==Me,mt=rt==0,Ir=!It||rt==It.length-1;if(Ft.top-Ge.top<=3){var ct=(I?rn:ui)&&mt,Qo=(I?ui:rn)&&Ir,Vr=ct?x:($e?Ge:Ft).left,Ti=Qo?M:($e?Ft:Ge).right;q(Vr,Ge.top,Ti-Vr,Ge.bottom)}else{var Ai,Et,nn,es;$e?(Ai=I&&rn&&mt?x:Ge.left,Et=I?M:Xt(Ve,pt,"before"),nn=I?x:Xt(Ht,pt,"after"),es=I&&ui&&Ir?M:Ft.right):(Ai=I?Xt(Ve,pt,"before"):x,Et=!I&&rn&&mt?M:Ge.right,nn=!I&&ui&&Ir?x:Ft.left,es=I?Xt(Ht,pt,"after"):M),q(Ai,Ge.top,Et-Ai,Ge.bottom),Ge.bottom<Ft.top&&q(x,Ge.bottom,null,Ft.top),q(nn,Ft.top,es-nn,Ft.bottom)}(!He||Un(Ge,He)<0)&&(He=Ge),Un(Ft,He)<0&&(He=Ft),(!lt||Un(Ge,lt)<0)&&(lt=Ge),Un(Ft,lt)<0&&(lt=Ft)}),{start:He,end:lt}}var Q=t.from(),J=t.to();if(Q.line==J.line)Z(Q.line,Q.ch,J.ch);else{var ne=be(o,Q.line),ae=be(o,J.line),ue=nt(ne)==nt(ae),pe=Z(Q.line,Q.ch,ue?ne.text.length+1:null).end,_e=Z(J.line,ue?0:null,J.ch).start;ue&&(pe.top<_e.top-2?(q(pe.right,pe.top,null,pe.bottom),q(x,_e.top,_e.left,_e.bottom)):q(pe.right,pe.top,_e.left-pe.right,pe.bottom)),pe.bottom<_e.top&&q(x,pe.bottom,null,_e.top)}i.appendChild(f)}function To(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||qi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Qs(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Mo(e))}function Ao(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&qi(e))},100)}function Mo(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Ee(e,"focus",e,t),e.state.focused=!0,V(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),v&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),To(e))}function qi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ee(e,"blur",e,t),e.state.focused=!1,A(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function zn(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),o=t.lineDiv.getBoundingClientRect().top,f=0,S=0;S<t.view.length;S++){var x=t.view[S],M=e.options.lineWrapping,I=void 0,q=0;if(!x.hidden){if(o+=x.line.height,m&&_<8){var Z=x.node.offsetTop+x.node.offsetHeight;I=Z-i,i=Z}else{var Q=x.node.getBoundingClientRect();I=Q.bottom-Q.top,!M&&x.text.firstChild&&(q=x.text.firstChild.getBoundingClientRect().right-Q.left-1)}var J=x.line.height-I;if((J>.005||J<-.005)&&(o<r&&(f-=J),it(x.line,I),ea(x.line),x.rest))for(var ne=0;ne<x.rest.length;ne++)ea(x.rest[ne]);if(q>e.display.sizerWidth){var ae=Math.ceil(q/zi(e.display));ae>e.display.maxLineLength&&(e.display.maxLineLength=ae,e.display.maxLine=x.line,e.display.maxLineChanged=!0)}}}Math.abs(f)>2&&(t.scroller.scrollTop+=f)}function ea(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function qn(e,t,i){var r=i&&i.top!=null?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Fn(e));var o=i&&i.bottom!=null?i.bottom:r+e.wrapper.clientHeight,f=Rt(t,r),S=Rt(t,o);if(i&&i.ensure){var x=i.ensure.from.line,M=i.ensure.to.line;x<f?(f=x,S=Rt(t,$t(be(t,x))+e.wrapper.clientHeight)):Math.min(M,t.lastLine())>=S&&(f=Rt(t,$t(be(t,M))-e.wrapper.clientHeight),S=M)}return{from:f,to:Math.max(S,f+1)}}function Rc(e,t){if(!We(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),o=null;if(t.top+r.top<0?o=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),o!=null&&!d){var f=j("div","\u200B",null,`position: absolute;
                         top: `+(t.top-i.viewOffset-Fn(e.display))+`px;
                         height: `+(t.bottom-t.top+Br(e)+i.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(f),f.scrollIntoView(o),e.display.lineSpace.removeChild(f)}}}function Dc(e,t,i,r){r==null&&(r=0);var o;!e.options.lineWrapping&&t==i&&(i=t.sticky=="before"?le(t.line,t.ch+1,"before"):t,t=t.ch?le(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var f=0;f<5;f++){var S=!1,x=yr(e,t),M=!i||i==t?x:yr(e,i);o={left:Math.min(x.left,M.left),top:Math.min(x.top,M.top)-r,right:Math.max(x.left,M.left),bottom:Math.max(x.bottom,M.bottom)+r};var I=Oo(e,o),q=e.doc.scrollTop,Z=e.doc.scrollLeft;if(I.scrollTop!=null&&(_n(e,I.scrollTop),Math.abs(e.doc.scrollTop-q)>1&&(S=!0)),I.scrollLeft!=null&&(Li(e,I.scrollLeft),Math.abs(e.doc.scrollLeft-Z)>1&&(S=!0)),!S)break}return o}function Bc(e,t){var i=Oo(e,t);i.scrollTop!=null&&_n(e,i.scrollTop),i.scrollLeft!=null&&Li(e,i.scrollLeft)}function Oo(e,t){var i=e.display,r=Ui(e.display);t.top<0&&(t.top=0);var o=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:i.scroller.scrollTop,f=yo(e),S={};t.bottom-t.top>f&&(t.bottom=t.top+f);var x=e.doc.height+_o(i),M=t.top<r,I=t.bottom>x-r;if(t.top<o)S.scrollTop=M?0:t.top;else if(t.bottom>o+f){var q=Math.min(t.top,(I?x:t.bottom)-f);q!=o&&(S.scrollTop=q)}var Z=e.options.fixedGutter?0:i.gutters.offsetWidth,Q=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:i.scroller.scrollLeft-Z,J=bi(e)-i.gutters.offsetWidth,ne=t.right-t.left>J;return ne&&(t.right=t.left+J),t.left<10?S.scrollLeft=0:t.left<Q?S.scrollLeft=Math.max(0,t.left+Z-(ne?0:10)):t.right>J+Q-3&&(S.scrollLeft=t.right+(ne?0:10)-J),S}function Ro(e,t){t!=null&&(Kn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ki(e){Kn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function gn(e,t,i){(t!=null||i!=null)&&Kn(e),t!=null&&(e.curOp.scrollLeft=t),i!=null&&(e.curOp.scrollTop=i)}function Pc(e,t){Kn(e),e.curOp.scrollToPos=t}function Kn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=Xs(e,t.from),r=Xs(e,t.to);ta(e,i,r,t.margin)}}function ta(e,t,i,r){var o=Oo(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});gn(e,o.scrollLeft,o.scrollTop)}function _n(e,t){Math.abs(e.doc.scrollTop-t)<2||(D||Bo(e,{top:t}),ra(e,t,!0),D&&Bo(e),bn(e,100))}function ra(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Li(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,aa(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function yn(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+_o(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Br(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var xi=function(e,t,i){this.cm=i;var r=this.vert=j("div",[j("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=j("div",[j("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=o.tabIndex=-1,e(r),e(o),we(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),we(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&_<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};xi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var o=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var f=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},xi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},xi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},xi.prototype.zeroWidthHack=function(){var e=a&&!C?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new U,this.disableVert=new U},xi.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var o=e.getBoundingClientRect(),f=i=="vert"?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1);f!=e?e.style.pointerEvents="none":t.set(1e3,r)}t.set(1e3,r)},xi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var mn=function(){};mn.prototype.update=function(){return{bottom:0,right:0}},mn.prototype.setScrollLeft=function(){},mn.prototype.setScrollTop=function(){},mn.prototype.clear=function(){};function Gi(e,t){t||(t=yn(e));var i=e.display.barWidth,r=e.display.barHeight;ia(e,t);for(var o=0;o<4&&i!=e.display.barWidth||r!=e.display.barHeight;o++)i!=e.display.barWidth&&e.options.lineWrapping&&zn(e),ia(e,yn(e)),i=e.display.barWidth,r=e.display.barHeight}function ia(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}var na={native:xi,null:mn};function oa(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&A(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new na[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),we(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){i=="horizontal"?Li(e,t):_n(e,t)},e),e.display.scrollbars.addClass&&V(e.display.wrapper,e.display.scrollbars.addClass)}var Ic=0;function ki(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ic,markArrays:null},dc(e.curOp)}function Ei(e){var t=e.curOp;t&&vc(t,function(i){for(var r=0;r<i.ops.length;r++)i.ops[r].cm.curOp=null;Hc(i)})}function Hc(e){for(var t=e.ops,i=0;i<t.length;i++)Fc(t[i]);for(var r=0;r<t.length;r++)Nc(t[r]);for(var o=0;o<t.length;o++)Wc(t[o]);for(var f=0;f<t.length;f++)jc(t[f]);for(var S=0;S<t.length;S++)Uc(t[S])}function Fc(e){var t=e.cm,i=t.display;qc(t),e.updateMaxLine&&_r(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Gn(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Nc(e){e.updatedDisplay=e.mustUpdate&&Do(e.cm,e.update)}function Wc(e){var t=e.cm,i=t.display;e.updatedDisplay&&zn(t),e.barMeasure=yn(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ns(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Br(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-bi(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function jc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Li(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==z();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Gi(t,e.barMeasure),e.updatedDisplay&&Io(t,e.barMeasure),e.selectionChanged&&To(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&Qs(e.cm)}function Uc(e){var t=e.cm,i=t.display,r=t.doc;if(e.updatedDisplay&&sa(t,e.update),i.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),e.scrollTop!=null&&ra(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Li(t,e.scrollLeft,!0,!0),e.scrollToPos){var o=Dc(t,ge(r,e.scrollToPos.from),ge(r,e.scrollToPos.to),e.scrollToPos.margin);Rc(t,o)}var f=e.maybeHiddenMarkers,S=e.maybeUnhiddenMarkers;if(f)for(var x=0;x<f.length;++x)f[x].lines.length||Ee(f[x],"hide");if(S)for(var M=0;M<S.length;++M)S[M].lines.length&&Ee(S[M],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ee(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Gt(e,t){if(e.curOp)return t();ki(e);try{return t()}finally{Ei(e)}}function st(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ki(e);try{return t.apply(e,arguments)}finally{Ei(e)}}}function kt(e){return function(){if(this.curOp)return e.apply(this,arguments);ki(this);try{return e.apply(this,arguments)}finally{Ei(this)}}}function at(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ki(t);try{return e.apply(this,arguments)}finally{Ei(t)}}}function bn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,fe(zc,e))}function zc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=qr(e,t.highlightFrontier),o=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(f){if(r.line>=e.display.viewFrom){var S=f.styles,x=f.text.length>e.options.maxHighlightLength?dt(t.mode,r.state):null,M=Di(e,f,r,!0);x&&(r.state=x),f.styles=M.styles;var I=f.styleClasses,q=M.classes;q?f.styleClasses=q:I&&(f.styleClasses=null);for(var Z=!S||S.length!=f.styles.length||I!=q&&(!I||!q||I.bgClass!=q.bgClass||I.textClass!=q.textClass),Q=0;!Z&&Q<S.length;++Q)Z=S[Q]!=f.styles[Q];Z&&o.push(r.line),f.stateAfter=r.save(),r.nextLine()}else f.text.length<=e.options.maxHighlightLength&&vi(e,f.text,r),f.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return bn(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),o.length&&Gt(e,function(){for(var f=0;f<o.length;f++)ii(e,o[f],"text")})}}var Gn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=qn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=bi(e),this.force=i,this.dims=Lo(e),this.events=[]};Gn.prototype.signal=function(e,t){Ke(e,t)&&this.events.push(arguments)},Gn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ee.apply(null,this.events[e])};function qc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Br(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Br(e)+"px",t.scrollbarsClipped=!0)}function Kc(e){if(e.hasFocus())return null;var t=z();if(!t||!N(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&N(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}function Gc(e){if(!(!e||!e.activeElt||e.activeElt==z())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&N(document.body,e.anchorNode)&&N(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}function Do(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return ni(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&$s(e)==0)return!1;la(e)&&(ni(e),t.dims=Lo(e));var o=r.first+r.size,f=Math.max(t.visible.from-e.options.viewportMargin,r.first),S=Math.min(o,t.visible.to+e.options.viewportMargin);i.viewFrom<f&&f-i.viewFrom<20&&(f=Math.max(r.first,i.viewFrom)),i.viewTo>S&&i.viewTo-S<20&&(S=Math.min(o,i.viewTo)),pr&&(f=nr(e.doc,f),S=Gr(e.doc,S));var x=f!=i.viewFrom||S!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Mc(e,f,S),i.viewOffset=$t(be(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var M=$s(e);if(!x&&M==0&&!t.force&&i.renderedView==i.view&&(i.updateLineNumbers==null||i.updateLineNumbers>=i.viewTo))return!1;var I=Kc(e);return M>4&&(i.lineDiv.style.display="none"),Xc(e,i.updateLineNumbers,t.dims),M>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,Gc(I),W(i.cursorDiv),W(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,x&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,bn(e,400)),i.updateLineNumbers=null,!0}function sa(e,t){for(var i=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==bi(e)){if(i&&i.top!=null&&(i={top:Math.min(e.doc.height+_o(e.display)-yo(e),i.top)}),t.visible=qn(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=qn(e.display,e.doc,i));if(!Do(e,t))break;zn(e);var o=yn(e);vn(e),Gi(e,o),Io(e,o),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Bo(e,t){var i=new Gn(e,t);if(Do(e,i)){zn(e),sa(e,i);var r=yn(e);vn(e),Gi(e,r),Io(e,r),i.finish()}}function Xc(e,t,i){var r=e.display,o=e.options.lineNumbers,f=r.lineDiv,S=f.firstChild;function x(ne){var ae=ne.nextSibling;return v&&a&&e.display.currentWheelTarget==ne?ne.style.display="none":ne.parentNode.removeChild(ne),ae}for(var M=r.view,I=r.viewFrom,q=0;q<M.length;q++){var Z=M[q];if(!Z.hidden)if(!Z.node||Z.node.parentNode!=f){var Q=bc(e,Z,I,i);f.insertBefore(Q,S)}else{for(;S!=Z.node;)S=x(S);var J=o&&t!=null&&t<=I&&Z.lineNumber;Z.changes&&(ee(Z.changes,"gutter")>-1&&(J=!1),Rs(e,Z,I,i)),J&&(W(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(Mr(e.options,I)))),S=Z.node.nextSibling}I+=Z.size}for(;S;)S=x(S)}function Po(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",ot(e,"gutterChanged",e)}function Io(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Br(e)+"px"}function aa(e){var t=e.display,i=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=xo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,f=r+"px",S=0;S<i.length;S++)if(!i[S].hidden){e.options.fixedGutter&&(i[S].gutter&&(i[S].gutter.style.left=f),i[S].gutterBackground&&(i[S].gutterBackground.style.left=f));var x=i[S].alignable;if(x)for(var M=0;M<x.length;M++)x[M].style.left=f}e.options.fixedGutter&&(t.gutters.style.left=r+o+"px")}}function la(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=Mr(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var o=r.measure.appendChild(j("div",[j("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=o.firstChild.offsetWidth,S=o.offsetWidth-f;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(f,r.lineGutter.offsetWidth-S)+1,r.lineNumWidth=r.lineNumInnerWidth+S,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Po(e.display),!0}return!1}function Ho(e,t){for(var i=[],r=!1,o=0;o<e.length;o++){var f=e[o],S=null;if(typeof f!="string"&&(S=f.style,f=f.className),f=="CodeMirror-linenumbers")if(t)r=!0;else continue;i.push({className:f,style:S})}return t&&!r&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function ca(e){var t=e.gutters,i=e.gutterSpecs;W(t),e.lineGutter=null;for(var r=0;r<i.length;++r){var o=i[r],f=o.className,S=o.style,x=t.appendChild(j("div",null,"CodeMirror-gutter "+f));S&&(x.style.cssText=S),f=="CodeMirror-linenumbers"&&(e.lineGutter=x,x.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",Po(e)}function Sn(e){ca(e.display),Bt(e),aa(e)}function Yc(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=j("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=j("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=B("div",null,"CodeMirror-code"),o.selectionDiv=j("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=j("div",null,"CodeMirror-cursors"),o.measure=j("div",null,"CodeMirror-measure"),o.lineMeasure=j("div",null,"CodeMirror-measure"),o.lineSpace=B("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var f=B("div",[o.lineSpace],"CodeMirror-lines");o.mover=j("div",[f],null,"position: relative"),o.sizer=j("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=j("div",null,null,"position: absolute; height: "+K+"px; width: 1px;"),o.gutters=j("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=j("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=j("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),m&&_<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),!v&&!(D&&l)&&(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Ho(r.gutters,r.lineNumbers),ca(o),i.init(o)}var Xn=0,Yr=null;m?Yr=-.53:D?Yr=15:w?Yr=-.7:p&&(Yr=-1/3);function ua(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),i==null&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:i==null&&(i=e.wheelDelta),{x:t,y:i}}function Zc(e){var t=ua(e);return t.x*=Yr,t.y*=Yr,t}function fa(e,t){var i=ua(t),r=i.x,o=i.y,f=Yr;t.deltaMode===0&&(r=t.deltaX,o=t.deltaY,f=1);var S=e.display,x=S.scroller,M=x.scrollWidth>x.clientWidth,I=x.scrollHeight>x.clientHeight;if(!!(r&&M||o&&I)){if(o&&a&&v){e:for(var q=t.target,Z=S.view;q!=x;q=q.parentNode)for(var Q=0;Q<Z.length;Q++)if(Z[Q].node==q){e.display.currentWheelTarget=q;break e}}if(r&&!D&&!c&&f!=null){o&&I&&_n(e,Math.max(0,x.scrollTop+o*f)),Li(e,Math.max(0,x.scrollLeft+r*f)),(!o||o&&I)&&Xe(t),S.wheelStartX=null;return}if(o&&f!=null){var J=o*f,ne=e.doc.scrollTop,ae=ne+S.wrapper.clientHeight;J<0?ne=Math.max(0,ne+J-50):ae=Math.min(e.doc.height,ae+J+50),Bo(e,{top:ne,bottom:ae})}Xn<20&&t.deltaMode!==0&&(S.wheelStartX==null?(S.wheelStartX=x.scrollLeft,S.wheelStartY=x.scrollTop,S.wheelDX=r,S.wheelDY=o,setTimeout(function(){if(S.wheelStartX!=null){var ue=x.scrollLeft-S.wheelStartX,pe=x.scrollTop-S.wheelStartY,_e=pe&&S.wheelDY&&pe/S.wheelDY||ue&&S.wheelDX&&ue/S.wheelDX;S.wheelStartX=S.wheelStartY=null,_e&&(Yr=(Yr*Xn+_e)/(Xn+1),++Xn)}},200)):(S.wheelDX+=r,S.wheelDY+=o))}}var Jt=function(e,t){this.ranges=e,this.primIndex=t};Jt.prototype.primary=function(){return this.ranges[this.primIndex]},Jt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!X(i.anchor,r.anchor)||!X(i.head,r.head))return!1}return!0},Jt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Be(oe(this.ranges[t].anchor),oe(this.ranges[t].head));return new Jt(e,this.primIndex)},Jt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Jt.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(H(t,r.from())>=0&&H(e,r.to())<=0)return i}return-1};var Be=function(e,t){this.anchor=e,this.head=t};Be.prototype.from=function(){return Te(this.anchor,this.head)},Be.prototype.to=function(){return ce(this.anchor,this.head)},Be.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function mr(e,t,i){var r=e&&e.options.selectionsMayTouch,o=t[i];t.sort(function(Q,J){return H(Q.from(),J.from())}),i=ee(t,o);for(var f=1;f<t.length;f++){var S=t[f],x=t[f-1],M=H(x.to(),S.from());if(r&&!S.empty()?M>0:M>=0){var I=Te(x.from(),S.from()),q=ce(x.to(),S.to()),Z=x.empty()?S.from()==S.head:x.from()==x.head;f<=i&&--i,t.splice(--f,2,new Be(Z?q:I,Z?I:q))}}return new Jt(t,i)}function oi(e,t){return new Jt([new Be(e,t||e)],0)}function si(e){return e.text?le(e.from.line+e.text.length-1,Ae(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function ha(e,t){if(H(e,t.from)<0)return e;if(H(e,t.to)<=0)return si(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=si(t).ch-t.to.ch),le(i,r)}function Fo(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var o=e.sel.ranges[r];i.push(new Be(ha(o.anchor,t),ha(o.head,t)))}return mr(e.cm,i,e.sel.primIndex)}function da(e,t,i){return e.line==t.line?le(i.line,e.ch-t.ch+i.ch):le(i.line+(e.line-t.line),e.ch)}function Vc(e,t,i){for(var r=[],o=le(e.first,0),f=o,S=0;S<t.length;S++){var x=t[S],M=da(x.from,o,f),I=da(si(x),o,f);if(o=x.to,f=I,i=="around"){var q=e.sel.ranges[S],Z=H(q.head,q.anchor)<0;r[S]=new Be(Z?I:M,Z?M:I)}else r[S]=new Be(M,M)}return new Jt(r,e.sel.primIndex)}function No(e){e.doc.mode=dr(e.options,e.doc.modeOption),Cn(e)}function Cn(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,bn(e,100),e.state.modeGen++,e.curOp&&Bt(e)}function pa(e,t){return t.from.ch==0&&t.to.ch==0&&Ae(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Wo(e,t,i,r){function o(_e){return i?i[_e]:null}function f(_e,ve,me){nc(_e,ve,me,r),ot(_e,"change",_e,t)}function S(_e,ve){for(var me=[],ke=_e;ke<ve;++ke)me.push(new ri(I[ke],o(ke),r));return me}var x=t.from,M=t.to,I=t.text,q=be(e,x.line),Z=be(e,M.line),Q=Ae(I),J=o(I.length-1),ne=M.line-x.line;if(t.full)e.insert(0,S(0,I.length)),e.remove(I.length,e.size-I.length);else if(pa(e,t)){var ae=S(0,I.length-1);f(Z,Z.text,J),ne&&e.remove(x.line,ne),ae.length&&e.insert(x.line,ae)}else if(q==Z)if(I.length==1)f(q,q.text.slice(0,x.ch)+Q+q.text.slice(M.ch),J);else{var ue=S(1,I.length-1);ue.push(new ri(Q+q.text.slice(M.ch),J,r)),f(q,q.text.slice(0,x.ch)+I[0],o(0)),e.insert(x.line+1,ue)}else if(I.length==1)f(q,q.text.slice(0,x.ch)+I[0]+Z.text.slice(M.ch),o(0)),e.remove(x.line+1,ne);else{f(q,q.text.slice(0,x.ch)+I[0],o(0)),f(Z,Q+Z.text.slice(M.ch),J);var pe=S(1,I.length-1);ne>1&&e.remove(x.line+1,ne-1),e.insert(x.line+1,pe)}ot(e,"change",e,t)}function ai(e,t,i){function r(o,f,S){if(o.linked)for(var x=0;x<o.linked.length;++x){var M=o.linked[x];if(M.doc!=f){var I=S&&M.sharedHist;i&&!I||(t(M.doc,I),r(M.doc,o,I))}}}r(e,null,!0)}function va(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ko(e),No(e),ga(e),e.options.direction=t.direction,e.options.lineWrapping||_r(e),e.options.mode=t.modeOption,Bt(e)}function ga(e){(e.doc.direction=="rtl"?V:A)(e.display.lineDiv,"CodeMirror-rtl")}function $c(e){Gt(e,function(){ga(e),Bt(e)})}function Yn(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function jo(e,t){var i={from:oe(t.from),to:si(t),text:Ot(e,t.from,t.to)};return ma(e,i,t.from.line,t.to.line+1),ai(e,function(r){return ma(r,i,t.from.line,t.to.line+1)},!0),i}function _a(e){for(;e.length;){var t=Ae(e);if(t.ranges)e.pop();else break}}function Jc(e,t){if(t)return _a(e.done),Ae(e.done);if(e.done.length&&!Ae(e.done).ranges)return Ae(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ae(e.done)}function ya(e,t,i,r){var o=e.history;o.undone.length=0;var f=+new Date,S,x;if((o.lastOp==r||o.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&o.lastModTime>f-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(S=Jc(o,o.lastOp==r)))x=Ae(S.changes),H(t.from,t.to)==0&&H(t.from,x.to)==0?x.to=si(t):S.changes.push(jo(e,t));else{var M=Ae(o.done);for((!M||!M.ranges)&&Zn(e.sel,o.done),S={changes:[jo(e,t)],generation:o.generation},o.done.push(S);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(i),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=f,o.lastOp=o.lastSelOp=r,o.lastOrigin=o.lastSelOrigin=t.origin,x||Ee(e,"historyAdded")}function Qc(e,t,i,r){var o=t.charAt(0);return o=="*"||o=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function eu(e,t,i,r){var o=e.history,f=r&&r.origin;i==o.lastSelOp||f&&o.lastSelOrigin==f&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==f||Qc(e,f,Ae(o.done),t))?o.done[o.done.length-1]=t:Zn(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=f,o.lastSelOp=i,r&&r.clearRedo!==!1&&_a(o.undone)}function Zn(e,t){var i=Ae(t);i&&i.ranges&&i.equals(e)||t.push(e)}function ma(e,t,i,r){var o=t["spans_"+e.id],f=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(S){S.markedSpans&&((o||(o=t["spans_"+e.id]={}))[f]=S.markedSpans),++f})}function tu(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function ru(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],o=0;o<t.text.length;++o)r.push(tu(i[o]));return r}function ba(e,t){var i=ru(e,t),r=qt(e,t);if(!i)return r;if(!r)return i;for(var o=0;o<i.length;++o){var f=i[o],S=r[o];if(f&&S){e:for(var x=0;x<S.length;++x){for(var M=S[x],I=0;I<f.length;++I)if(f[I].marker==M.marker)continue e;f.push(M)}}else S&&(i[o]=S)}return i}function Xi(e,t,i){for(var r=[],o=0;o<e.length;++o){var f=e[o];if(f.ranges){r.push(i?Jt.prototype.deepCopy.call(f):f);continue}var S=f.changes,x=[];r.push({changes:x});for(var M=0;M<S.length;++M){var I=S[M],q=void 0;if(x.push({from:I.from,to:I.to,text:I.text}),t)for(var Z in I)(q=Z.match(/^spans_(\d+)$/))&&ee(t,Number(q[1]))>-1&&(Ae(x)[Z]=I[Z],delete I[Z])}}return r}function Uo(e,t,i,r){if(r){var o=e.anchor;if(i){var f=H(t,o)<0;f!=H(i,o)<0?(o=t,t=i):f!=H(t,i)<0&&(t=i)}return new Be(o,t)}else return new Be(i||t,t)}function Vn(e,t,i,r,o){o==null&&(o=e.cm&&(e.cm.display.shift||e.extend)),yt(e,new Jt([Uo(e.sel.primary(),t,i,o)],0),r)}function Sa(e,t,i){for(var r=[],o=e.cm&&(e.cm.display.shift||e.extend),f=0;f<e.sel.ranges.length;f++)r[f]=Uo(e.sel.ranges[f],t[f],null,o);var S=mr(e.cm,r,e.sel.primIndex);yt(e,S,i)}function zo(e,t,i,r){var o=e.sel.ranges.slice(0);o[t]=i,yt(e,mr(e.cm,o,e.sel.primIndex),r)}function Ca(e,t,i,r){yt(e,oi(t,i),r)}function iu(e,t,i){var r={ranges:t.ranges,update:function(o){this.ranges=[];for(var f=0;f<o.length;f++)this.ranges[f]=new Be(ge(e,o[f].anchor),ge(e,o[f].head))},origin:i&&i.origin};return Ee(e,"beforeSelectionChange",e,r),e.cm&&Ee(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?mr(e.cm,r.ranges,r.ranges.length-1):t}function wa(e,t,i){var r=e.history.done,o=Ae(r);o&&o.ranges?(r[r.length-1]=t,$n(e,t,i)):yt(e,t,i)}function yt(e,t,i){$n(e,t,i),eu(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function $n(e,t,i){(Ke(e,"beforeSelectionChange")||e.cm&&Ke(e.cm,"beforeSelectionChange"))&&(t=iu(e,t,i));var r=i&&i.bias||(H(t.primary().head,e.sel.primary().head)<0?-1:1);La(e,ka(e,t,r,!0)),!(i&&i.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Ki(e.cm)}function La(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ur(e.cm)),ot(e,"cursorActivity",e))}function xa(e){La(e,ka(e,e.sel,null,!1))}function ka(e,t,i,r){for(var o,f=0;f<t.ranges.length;f++){var S=t.ranges[f],x=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[f],M=Jn(e,S.anchor,x&&x.anchor,i,r),I=Jn(e,S.head,x&&x.head,i,r);(o||M!=S.anchor||I!=S.head)&&(o||(o=t.ranges.slice(0,f)),o[f]=new Be(M,I))}return o?mr(e.cm,o,t.primIndex):t}function Yi(e,t,i,r,o){var f=be(e,t.line);if(f.markedSpans)for(var S=0;S<f.markedSpans.length;++S){var x=f.markedSpans[S],M=x.marker,I="selectLeft"in M?!M.selectLeft:M.inclusiveLeft,q="selectRight"in M?!M.selectRight:M.inclusiveRight;if((x.from==null||(I?x.from<=t.ch:x.from<t.ch))&&(x.to==null||(q?x.to>=t.ch:x.to>t.ch))){if(o&&(Ee(M,"beforeCursorEnter"),M.explicitlyCleared))if(f.markedSpans){--S;continue}else break;if(!M.atomic)continue;if(i){var Z=M.find(r<0?1:-1),Q=void 0;if((r<0?q:I)&&(Z=Ea(e,Z,-r,Z&&Z.line==t.line?f:null)),Z&&Z.line==t.line&&(Q=H(Z,i))&&(r<0?Q<0:Q>0))return Yi(e,Z,t,r,o)}var J=M.find(r<0?-1:1);return(r<0?I:q)&&(J=Ea(e,J,r,J.line==t.line?f:null)),J?Yi(e,J,t,r,o):null}}return t}function Jn(e,t,i,r,o){var f=r||1,S=Yi(e,t,i,f,o)||!o&&Yi(e,t,i,f,!0)||Yi(e,t,i,-f,o)||!o&&Yi(e,t,i,-f,!0);return S||(e.cantEdit=!0,le(e.first,0))}function Ea(e,t,i,r){return i<0&&t.ch==0?t.line>e.first?ge(e,le(t.line-1)):null:i>0&&t.ch==(r||be(e,t.line)).text.length?t.line<e.first+e.size-1?le(t.line+1,0):null:new le(t.line,t.ch+i)}function Ta(e){e.setSelection(le(e.firstLine(),0),le(e.lastLine()),G)}function Aa(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(o,f,S,x){o&&(r.from=ge(e,o)),f&&(r.to=ge(e,f)),S&&(r.text=S),x!==void 0&&(r.origin=x)}),Ee(e,"beforeChange",e,r),e.cm&&Ee(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Zi(e,t,i){if(e.cm){if(!e.cm.curOp)return st(e.cm,Zi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!((Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"))&&(t=Aa(e,t,!0),!t))){var r=un&&!i&&wt(e,t.from,t.to);if(r)for(var o=r.length-1;o>=0;--o)Ma(e,{from:r[o].from,to:r[o].to,text:o?[""]:t.text,origin:t.origin});else Ma(e,t)}}function Ma(e,t){if(!(t.text.length==1&&t.text[0]==""&&H(t.from,t.to)==0)){var i=Fo(e,t);ya(e,t,i,e.cm?e.cm.curOp.id:NaN),wn(e,t,i,qt(e,t));var r=[];ai(e,function(o,f){!f&&ee(r,o.history)==-1&&(Ba(o.history,t),r.push(o.history)),wn(o,t,null,qt(o,t))})}}function Qn(e,t,i){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!i)){for(var o=e.history,f,S=e.sel,x=t=="undo"?o.done:o.undone,M=t=="undo"?o.undone:o.done,I=0;I<x.length&&(f=x[I],!(i?f.ranges&&!f.equals(e.sel):!f.ranges));I++);if(I!=x.length){for(o.lastOrigin=o.lastSelOrigin=null;;)if(f=x.pop(),f.ranges){if(Zn(f,M),i&&!f.equals(e.sel)){yt(e,f,{clearRedo:!1});return}S=f}else if(r){x.push(f);return}else break;var q=[];Zn(S,M),M.push({changes:q,generation:o.generation}),o.generation=f.generation||++o.maxGeneration;for(var Z=Ke(e,"beforeChange")||e.cm&&Ke(e.cm,"beforeChange"),Q=function(ae){var ue=f.changes[ae];if(ue.origin=t,Z&&!Aa(e,ue,!1))return x.length=0,{};q.push(jo(e,ue));var pe=ae?Fo(e,ue):Ae(x);wn(e,ue,pe,ba(e,ue)),!ae&&e.cm&&e.cm.scrollIntoView({from:ue.from,to:si(ue)});var _e=[];ai(e,function(ve,me){!me&&ee(_e,ve.history)==-1&&(Ba(ve.history,ue),_e.push(ve.history)),wn(ve,ue,null,ba(ve,ue))})},J=f.changes.length-1;J>=0;--J){var ne=Q(J);if(ne)return ne.v}}}}function Oa(e,t){if(t!=0&&(e.first+=t,e.sel=new Jt(ye(e.sel.ranges,function(o){return new Be(le(o.anchor.line+t,o.anchor.ch),le(o.head.line+t,o.head.ch))}),e.sel.primIndex),e.cm)){Bt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)ii(e.cm,r,"gutter")}}function wn(e,t,i,r){if(e.cm&&!e.cm.curOp)return st(e.cm,wn)(e,t,i,r);if(t.to.line<e.first){Oa(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Oa(e,o),t={from:le(e.first,0),to:le(t.to.line+o,t.to.ch),text:[Ae(t.text)],origin:t.origin}}var f=e.lastLine();t.to.line>f&&(t={from:t.from,to:le(f,be(e,f).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ot(e,t.from,t.to),i||(i=Fo(e,t)),e.cm?nu(e.cm,t,r):Wo(e,t,r),$n(e,i,G),e.cantEdit&&Jn(e,le(e.firstLine(),0))&&(e.cantEdit=!1)}}function nu(e,t,i){var r=e.doc,o=e.display,f=t.from,S=t.to,x=!1,M=f.line;e.options.lineWrapping||(M=Re(nt(be(r,f.line))),r.iter(M,S.line+1,function(J){if(J==o.maxLine)return x=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ur(e),Wo(r,t,i,Vs(e)),e.options.lineWrapping||(r.iter(M,f.line+t.text.length,function(J){var ne=or(J);ne>o.maxLineLength&&(o.maxLine=J,o.maxLineLength=ne,o.maxLineChanged=!0,x=!1)}),x&&(e.curOp.updateMaxLine=!0)),In(r,f.line),bn(e,400);var I=t.text.length-(S.line-f.line)-1;t.full?Bt(e):f.line==S.line&&t.text.length==1&&!pa(e.doc,t)?ii(e,f.line,"text"):Bt(e,f.line,S.line+1,I);var q=Ke(e,"changes"),Z=Ke(e,"change");if(Z||q){var Q={from:f,to:S,text:t.text,removed:t.removed,origin:t.origin};Z&&ot(e,"change",e,Q),q&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(Q)}e.display.selForContextMenu=null}function Vi(e,t,i,r,o){var f;r||(r=i),H(r,i)<0&&(f=[r,i],i=f[0],r=f[1]),typeof t=="string"&&(t=e.splitLines(t)),Zi(e,{from:i,to:r,text:t,origin:o})}function Ra(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Da(e,t,i,r){for(var o=0;o<e.length;++o){var f=e[o],S=!0;if(f.ranges){f.copied||(f=e[o]=f.deepCopy(),f.copied=!0);for(var x=0;x<f.ranges.length;x++)Ra(f.ranges[x].anchor,t,i,r),Ra(f.ranges[x].head,t,i,r);continue}for(var M=0;M<f.changes.length;++M){var I=f.changes[M];if(i<I.from.line)I.from=le(I.from.line+r,I.from.ch),I.to=le(I.to.line+r,I.to.ch);else if(t<=I.to.line){S=!1;break}}S||(e.splice(0,o+1),o=0)}}function Ba(e,t){var i=t.from.line,r=t.to.line,o=t.text.length-(r-i)-1;Da(e.done,i,r,o),Da(e.undone,i,r,o)}function Ln(e,t,i,r){var o=t,f=t;return typeof t=="number"?f=be(e,Oe(e,t)):o=Re(t),o==null?null:(r(f,o)&&e.cm&&ii(e.cm,o,i),f)}function xn(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}xn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var o=this.lines[i];this.height-=o.height,oc(o),ot(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}};function kn(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var o=e[r];t+=o.chunkSize(),i+=o.height,o.parent=this}this.size=t,this.height=i,this.parent=null}kn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var f=Math.min(t,o-e),S=r.height;if(r.removeInner(e,f),this.height-=S-r.height,o==f&&(this.children.splice(i--,1),r.parent=null),(t-=f)==0)break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof xn))){var x=[];this.collapse(x),this.children=[new xn(x)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var o=this.children[r],f=o.chunkSize();if(e<=f){if(o.insertInner(e,t,i),o.lines&&o.lines.length>50){for(var S=o.lines.length%25+25,x=S;x<o.lines.length;){var M=new xn(o.lines.slice(x,x+=25));o.height-=M.height,this.children.splice(++r,0,M),M.parent=this}o.lines=o.lines.slice(0,S),this.maybeSpill()}break}e-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new kn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var o=ee(e.parent.children,e);e.parent.children.splice(o+1,0,i)}else{var r=new kn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var o=this.children[r],f=o.chunkSize();if(e<f){var S=Math.min(t,f-e);if(o.iterN(e,S,i))return!0;if((t-=S)==0)break;e=0}else e-=f}}};var En=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};En.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=Re(i);if(!(r==null||!t)){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(i.widgets=null);var f=dn(this);it(i,Math.max(0,i.height-f)),e&&(Gt(e,function(){Pa(e,i,-f),ii(e,r,"widget")}),ot(e,"lineWidgetCleared",e,this,r))}},En.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var o=dn(this)-t;!o||(xt(this.doc,r)||it(r,r.height+o),i&&Gt(i,function(){i.curOp.forceUpdate=!0,Pa(i,r,o),ot(i,"lineWidgetChanged",i,e,Re(r))}))},At(En);function Pa(e,t,i){$t(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ro(e,i)}function ou(e,t,i,r){var o=new En(e,i,r),f=e.cm;return f&&o.noHScroll&&(f.display.alignWidgets=!0),Ln(e,t,"widget",function(S){var x=S.widgets||(S.widgets=[]);if(o.insertAt==null?x.push(o):x.splice(Math.min(x.length,Math.max(0,o.insertAt)),0,o),o.line=S,f&&!xt(e,S)){var M=$t(S)<e.scrollTop;it(S,S.height+dn(o)),M&&Ro(f,o.height),f.curOp.forceUpdate=!0}return!0}),f&&ot(f,"lineWidgetAdded",f,o,typeof t=="number"?t:Re(t)),o}var Ia=0,li=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Ia};li.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ki(e),Ke(this,"clear")){var i=this.find();i&&ot(this,"clear",i.from,i.to)}for(var r=null,o=null,f=0;f<this.lines.length;++f){var S=this.lines[f],x=Ct(S.markedSpans,this);e&&!this.collapsed?ii(e,Re(S),"text"):e&&(x.to!=null&&(o=Re(S)),x.from!=null&&(r=Re(S))),S.markedSpans=_i(S.markedSpans,x),x.from==null&&this.collapsed&&!xt(this.doc,S)&&e&&it(S,Ui(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var M=0;M<this.lines.length;++M){var I=nt(this.lines[M]),q=or(I);q>e.display.maxLineLength&&(e.display.maxLine=I,e.display.maxLineLength=q,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Bt(e,r,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&xa(e.doc)),e&&ot(e,"markerCleared",e,this,r,o),t&&Ei(e),this.parent&&this.parent.clear()}},li.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var i,r,o=0;o<this.lines.length;++o){var f=this.lines[o],S=Ct(f.markedSpans,this);if(S.from!=null&&(i=le(t?f:Re(f),S.from),e==-1))return i;if(S.to!=null&&(r=le(t?f:Re(f),S.to),e==1))return r}return i&&{from:i,to:r}},li.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;!t||!r||Gt(r,function(){var o=t.line,f=Re(t.line),S=mo(r,f);if(S&&(Us(S),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!xt(i.doc,o)&&i.height!=null){var x=i.height;i.height=null;var M=dn(i)-x;M&&it(o,o.height+M)}ot(r,"markerChanged",r,e)})},li.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ee(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},li.prototype.detachLine=function(e){if(this.lines.splice(ee(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},At(li);function $i(e,t,i,r,o){if(r&&r.shared)return su(e,t,i,r,o);if(e.cm&&!e.cm.curOp)return st(e.cm,$i)(e,t,i,r,o);var f=new li(e,o),S=H(t,i);if(r&&he(r,f,!1),S>0||S==0&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=B("span",[f.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(Kt(e,t.line,t,i,f)||t.line!=i.line&&Kt(e,i.line,t,i,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");se()}f.addToHistory&&ya(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var x=t.line,M=e.cm,I;if(e.iter(x,i.line+1,function(Z){M&&f.collapsed&&!M.options.lineWrapping&&nt(Z)==M.display.maxLine&&(I=!0),f.collapsed&&x!=t.line&&it(Z,0),yi(Z,new ie(f,x==t.line?t.ch:null,x==i.line?i.ch:null),e.cm&&e.cm.curOp),++x}),f.collapsed&&e.iter(t.line,i.line+1,function(Z){xt(e,Z)&&it(Z,0)}),f.clearOnEnter&&we(f,"beforeCursorEnter",function(){return f.clear()}),f.readOnly&&(vo(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),f.collapsed&&(f.id=++Ia,f.atomic=!0),M){if(I&&(M.curOp.updateMaxLine=!0),f.collapsed)Bt(M,t.line,i.line+1);else if(f.className||f.startStyle||f.endStyle||f.css||f.attributes||f.title)for(var q=t.line;q<=i.line;q++)ii(M,q,"text");f.atomic&&xa(M.doc),ot(M,"markerAdded",M,f)}return f}var Tn=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Tn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ot(this,"clear")}},Tn.prototype.find=function(e,t){return this.primary.find(e,t)},At(Tn);function su(e,t,i,r,o){r=he(r),r.shared=!1;var f=[$i(e,t,i,r,o)],S=f[0],x=r.widgetNode;return ai(e,function(M){x&&(r.widgetNode=x.cloneNode(!0)),f.push($i(M,ge(M,t),ge(M,i),r,o));for(var I=0;I<M.linked.length;++I)if(M.linked[I].isParent)return;S=Ae(f)}),new Tn(f,S)}function Ha(e){return e.findMarks(le(e.first,0),e.clipPos(le(e.lastLine())),function(t){return t.parent})}function au(e,t){for(var i=0;i<t.length;i++){var r=t[i],o=r.find(),f=e.clipPos(o.from),S=e.clipPos(o.to);if(H(f,S)){var x=$i(e,f,S,r.primary,r.primary.type);r.markers.push(x),x.parent=r}}}function lu(e){for(var t=function(r){var o=e[r],f=[o.primary.doc];ai(o.primary.doc,function(M){return f.push(M)});for(var S=0;S<o.markers.length;S++){var x=o.markers[S];ee(f,x.doc)==-1&&(x.parent=null,o.markers.splice(S--,1))}},i=0;i<e.length;i++)t(i)}var cu=0,Pt=function(e,t,i,r,o){if(!(this instanceof Pt))return new Pt(e,t,i,r,o);i==null&&(i=0),kn.call(this,[new xn([new ri("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var f=le(i,0);this.sel=oi(f),this.history=new Yn(null),this.id=++cu,this.modeOption=t,this.lineSep=r,this.direction=o=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Wo(this,{from:f,to:f,text:e}),yt(this,oi(f),G)};Pt.prototype=Tt(kn.prototype,{constructor:Pt,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ar(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:at(function(e){var t=le(this.first,0),i=this.first+this.size-1;Zi(this,{from:t,to:le(i,be(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&gn(this.cm,0,0),yt(this,oi(t),G)}),replaceRange:function(e,t,i,r){t=ge(this,t),i=i?ge(this,i):t,Vi(this,e,t,i,r)},getRange:function(e,t,i){var r=Ot(this,ge(this,e),ge(this,t));return i===!1?r:i===""?r.join(""):r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(rr(this,e))return be(this,e)},getLineNumber:function(e){return Re(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=be(this,e)),nt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t=this.sel.primary(),i;return e==null||e=="head"?i=t.head:e=="anchor"?i=t.anchor:e=="end"||e=="to"||e===!1?i=t.to():i=t.from(),i},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:at(function(e,t,i){Ca(this,ge(this,typeof e=="number"?le(e,t||0):e),null,i)}),setSelection:at(function(e,t,i){Ca(this,ge(this,e),ge(this,t||e),i)}),extendSelection:at(function(e,t,i){Vn(this,ge(this,e),t&&ge(this,t),i)}),extendSelections:at(function(e,t){Sa(this,_t(this,e),t)}),extendSelectionsBy:at(function(e,t){var i=ye(this.sel.ranges,e);Sa(this,_t(this,i),t)}),setSelections:at(function(e,t,i){if(!!e.length){for(var r=[],o=0;o<e.length;o++)r[o]=new Be(ge(this,e[o].anchor),ge(this,e[o].head||e[o].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),yt(this,mr(this.cm,r,t),i)}}),addSelection:at(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new Be(ge(this,e),ge(this,t||e))),yt(this,mr(this.cm,r,r.length-1),i)}),getSelection:function(e){for(var t=this.sel.ranges,i,r=0;r<t.length;r++){var o=Ot(this,t[r].from(),t[r].to());i=i?i.concat(o):o}return e===!1?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var o=Ot(this,i[r].from(),i[r].to());e!==!1&&(o=o.join(e||this.lineSeparator())),t[r]=o}return t},replaceSelection:function(e,t,i){for(var r=[],o=0;o<this.sel.ranges.length;o++)r[o]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:at(function(e,t,i){for(var r=[],o=this.sel,f=0;f<o.ranges.length;f++){var S=o.ranges[f];r[f]={from:S.from(),to:S.to(),text:this.splitLines(e[f]),origin:i}}for(var x=t&&t!="end"&&Vc(this,r,t),M=r.length-1;M>=0;M--)Zi(this,r[M]);x?wa(this,x):this.cm&&Ki(this.cm)}),undo:at(function(){Qn(this,"undo")}),redo:at(function(){Qn(this,"redo")}),undoSelection:at(function(){Qn(this,"undo",!0)}),redoSelection:at(function(){Qn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new Yn(this.history),ai(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Xi(this.history.done),undone:Xi(this.history.undone)}},setHistory:function(e){var t=this.history=new Yn(this.history);t.done=Xi(e.done.slice(0),null,!0),t.undone=Xi(e.undone.slice(0),null,!0)},setGutterMarker:at(function(e,t,i){return Ln(this,e,"gutter",function(r){var o=r.gutterMarkers||(r.gutterMarkers={});return o[t]=i,!i&&Jr(o)&&(r.gutterMarkers=null),!0})}),clearGutter:at(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&Ln(t,i,"gutter",function(){return i.gutterMarkers[e]=null,Jr(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!rr(this,e)||(t=e,e=be(this,e),!e))return null}else if(t=Re(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:at(function(e,t,i){return Ln(this,e,t=="gutter"?"gutter":"class",function(r){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[o])r[o]=i;else{if(E(i).test(r[o]))return!1;r[o]+=" "+i}return!0})}),removeLineClass:at(function(e,t,i){return Ln(this,e,t=="gutter"?"gutter":"class",function(r){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",f=r[o];if(f)if(i==null)r[o]=null;else{var S=f.match(E(i));if(!S)return!1;var x=S.index+S[0].length;r[o]=f.slice(0,S.index)+(!S.index||x==f.length?"":" ")+f.slice(x)||null}else return!1;return!0})}),addLineWidget:at(function(e,t,i){return ou(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return $i(this,ge(this,e),ge(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),$i(this,e,e,i,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],i=be(this,e.line).markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];(o.from==null||o.from<=e.ch)&&(o.to==null||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,i){e=ge(this,e),t=ge(this,t);var r=[],o=e.line;return this.iter(e.line,t.line+1,function(f){var S=f.markedSpans;if(S)for(var x=0;x<S.length;x++){var M=S[x];!(M.to!=null&&o==e.line&&e.ch>=M.to||M.from==null&&o!=e.line||M.from!=null&&o==t.line&&M.from>=t.ch)&&(!i||i(M.marker))&&r.push(M.marker.parent||M.marker)}++o}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)i[r].from!=null&&e.push(i[r].marker)}),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter(function(o){var f=o.text.length+r;if(f>e)return t=e,!0;e-=f,++i}),ge(this,le(i,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+i}),t},copy:function(e){var t=new Pt(Ar(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<i&&(i=e.to);var r=new Pt(Ar(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],au(r,Ha(this)),r},unlinkDoc:function(e){if(e instanceof ze&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var i=this.linked[t];if(i.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),lu(Ha(this));break}}if(e.history==this.history){var r=[e.id];ai(e,function(o){return r.push(o.id)},!0),e.history=new Yn(null),e.history.done=Xi(this.history.done,r),e.history.undone=Xi(this.history.undone,r)}},iterLinkedDocs:function(e){ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:at(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&$c(this.cm))})}),Pt.prototype.eachLine=Pt.prototype.iter;var Fa=0;function uu(e){var t=this;if(Na(t),!(We(t,e)||Xr(t.display,e))){Xe(e),m&&(Fa=+new Date);var i=Ci(t,e,!0),r=e.dataTransfer.files;if(!(!i||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var o=r.length,f=Array(o),S=0,x=function(){++S==o&&st(t,function(){i=ge(t.doc,i);var J={from:i,to:i,text:t.doc.splitLines(f.filter(function(ne){return ne!=null}).join(t.doc.lineSeparator())),origin:"paste"};Zi(t.doc,J),wa(t.doc,oi(ge(t.doc,i),ge(t.doc,si(J))))})()},M=function(J,ne){if(t.options.allowDropFileTypes&&ee(t.options.allowDropFileTypes,J.type)==-1){x();return}var ae=new FileReader;ae.onerror=function(){return x()},ae.onload=function(){var ue=ae.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ue)){x();return}f[ne]=ue,x()},ae.readAsText(J)},I=0;I<r.length;I++)M(r[I],I);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var q=e.dataTransfer.getData("Text");if(q){var Z;if(t.state.draggingText&&!t.state.draggingText.copy&&(Z=t.listSelections()),$n(t.doc,oi(i,i)),Z)for(var Q=0;Q<Z.length;++Q)Vi(t.doc,"",Z[Q].anchor,Z[Q].head,"drag");t.replaceSelection(q,"around","paste"),t.display.input.focus()}}catch{}}}}function fu(e,t){if(m&&(!e.state.draggingText||+new Date-Fa<100)){tr(t);return}if(!(We(e,t)||Xr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var i=j("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),c&&i.parentNode.removeChild(i)}}function hu(e,t){var i=Ci(e,t);if(!!i){var r=document.createDocumentFragment();Eo(e,i,r),e.display.dragCursor||(e.display.dragCursor=j("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),R(e.display.dragCursor,r)}}function Na(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Wa(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],r=0;r<t.length;r++){var o=t[r].CodeMirror;o&&i.push(o)}i.length&&i[0].operation(function(){for(var f=0;f<i.length;f++)e(i[f])})}}var ja=!1;function du(){ja||(pu(),ja=!0)}function pu(){var e;we(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,Wa(vu)},100))}),we(window,"blur",function(){return Wa(qi)})}function vu(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var ci={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},An=0;An<10;An++)ci[An+48]=ci[An+96]=String(An);for(var eo=65;eo<=90;eo++)ci[eo]=String.fromCharCode(eo);for(var Mn=1;Mn<=12;Mn++)ci[Mn+111]=ci[Mn+63235]="F"+Mn;var Zr={};Zr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Zr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Zr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Zr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Zr.default=a?Zr.macDefault:Zr.pcDefault;function gu(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,r,o,f,S=0;S<t.length-1;S++){var x=t[S];if(/^(cmd|meta|m)$/i.test(x))f=!0;else if(/^a(lt)?$/i.test(x))i=!0;else if(/^(c|ctrl|control)$/i.test(x))r=!0;else if(/^s(hift)?$/i.test(x))o=!0;else throw new Error("Unrecognized modifier name: "+x)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),f&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function _u(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if(r=="..."){delete e[i];continue}for(var o=ye(i.split(" "),gu),f=0;f<o.length;f++){var S=void 0,x=void 0;f==o.length-1?(x=o.join(" "),S=r):(x=o.slice(0,f+1).join(" "),S="...");var M=t[x];if(!M)t[x]=S;else if(M!=S)throw new Error("Inconsistent bindings for "+x)}delete e[i]}for(var I in t)e[I]=t[I];return e}function Ji(e,t,i,r){t=to(t);var o=t.call?t.call(e,r):t[e];if(o===!1)return"nothing";if(o==="...")return"multi";if(o!=null&&i(o))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Ji(e,t.fallthrough,i,r);for(var f=0;f<t.fallthrough.length;f++){var S=Ji(e,t.fallthrough[f],i,r);if(S)return S}}}function Ua(e){var t=typeof e=="string"?e:ci[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function za(e,t,i){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!i&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function qa(e,t){if(c&&e.keyCode==34&&e.char)return!1;var i=ci[e.keyCode];return i==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(i=e.code),za(i,e,t))}function to(e){return typeof e=="string"?Zr[e]:e}function Qi(e,t){for(var i=e.doc.sel.ranges,r=[],o=0;o<i.length;o++){for(var f=t(i[o]);r.length&&H(f.from,Ae(r).to)<=0;){var S=r.pop();if(H(S.from,f.from)<0){f.from=S.from;break}}r.push(f)}Gt(e,function(){for(var x=r.length-1;x>=0;x--)Vi(e.doc,"",r[x].from,r[x].to,"+delete");Ki(e)})}function qo(e,t,i){var r=Qr(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Ko(e,t,i){var r=qo(e,t.ch,i);return r==null?null:new le(t.line,r,i<0?"after":"before")}function Go(e,t,i,r,o){if(e){t.doc.direction=="rtl"&&(o=-o);var f=ut(i,t.doc.direction);if(f){var S=o<0?Ae(f):f[0],x=o<0==(S.level==1),M=x?"after":"before",I;if(S.level>0||t.doc.direction=="rtl"){var q=ji(t,i);I=o<0?i.text.length-1:0;var Z=Pr(t,q,I).top;I=Wt(function(Q){return Pr(t,q,Q).top==Z},o<0==(S.level==1)?S.from:S.to-1,I),M=="before"&&(I=qo(i,I,1))}else I=o<0?S.to:S.from;return new le(r,I,M)}}return new le(r,o<0?i.text.length:0,o<0?"before":"after")}function yu(e,t,i,r){var o=ut(t,e.doc.direction);if(!o)return Ko(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var f=Ne(o,i.ch,i.sticky),S=o[f];if(e.doc.direction=="ltr"&&S.level%2==0&&(r>0?S.to>i.ch:S.from<i.ch))return Ko(t,i,r);var x=function(pe,_e){return qo(t,pe instanceof le?pe.ch:pe,_e)},M,I=function(pe){return e.options.lineWrapping?(M=M||ji(e,t),Zs(e,t,M,pe)):{begin:0,end:t.text.length}},q=I(i.sticky=="before"?x(i,-1):i.ch);if(e.doc.direction=="rtl"||S.level==1){var Z=S.level==1==r<0,Q=x(i,Z?1:-1);if(Q!=null&&(Z?Q<=S.to&&Q<=q.end:Q>=S.from&&Q>=q.begin)){var J=Z?"before":"after";return new le(i.line,Q,J)}}var ne=function(pe,_e,ve){for(var me=function(He,lt){return lt?new le(i.line,x(He,1),"before"):new le(i.line,He,"after")};pe>=0&&pe<o.length;pe+=_e){var ke=o[pe],Le=_e>0==(ke.level!=1),Me=Le?ve.begin:x(ve.end,-1);if(ke.from<=Me&&Me<ke.to||(Me=Le?ke.from:x(ke.to,-1),ve.begin<=Me&&Me<ve.end))return me(Me,Le)}},ae=ne(f+r,r,q);if(ae)return ae;var ue=r>0?q.end:x(q.begin,-1);return ue!=null&&!(r>0&&ue==t.text.length)&&(ae=ne(r>0?0:o.length-1,r,I(ue)),ae)?ae:null}var On={selectAll:Ta,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),G)},killLine:function(e){return Qi(e,function(t){if(t.empty()){var i=be(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:le(t.head.line+1,0)}:{from:t.head,to:le(t.head.line,i)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Qi(e,function(t){return{from:le(t.from().line,0),to:ge(e.doc,le(t.to().line+1,0))}})},delLineLeft:function(e){return Qi(e,function(t){return{from:le(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Qi(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(le(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(le(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Ka(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ga(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return mu(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},de)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},de)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?Ga(e,t.head):r},de)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,o=0;o<i.length;o++){var f=i[o].from(),S=xe(e.getLine(f.line),f.ch,r);t.push(Fe(r-S%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Gt(e,function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(!!t[r].empty()){var o=t[r].head,f=be(e.doc,o.line).text;if(f){if(o.ch==f.length&&(o=new le(o.line,o.ch-1)),o.ch>0)o=new le(o.line,o.ch+1),e.replaceRange(f.charAt(o.ch-1)+f.charAt(o.ch-2),le(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var S=be(e.doc,o.line-1).text;S&&(o=new le(o.line,1),e.replaceRange(f.charAt(0)+e.doc.lineSeparator()+S.charAt(S.length-1),le(o.line-1,S.length-1),o,"+transpose"))}}i.push(new Be(o,o))}e.setSelections(i)})},newlineAndIndent:function(e){return Gt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ki(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ka(e,t){var i=be(e.doc,t),r=nt(i);return r!=i&&(t=Re(r)),Go(!0,e,r,t,1)}function mu(e,t){var i=be(e.doc,t),r=Kr(i);return r!=i&&(t=Re(r)),Go(!0,e,i,t,-1)}function Ga(e,t){var i=Ka(e,t.line),r=be(e.doc,i.line),o=ut(r,e.doc.direction);if(!o||o[0].level==0){var f=Math.max(i.ch,r.text.search(/\S/)),S=t.line==i.line&&t.ch<=f&&t.ch;return le(i.line,S?0:f,i.sticky)}return i}function ro(e,t,i){if(typeof t=="string"&&(t=On[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),o=t(e)!=Y}finally{e.display.shift=r,e.state.suppressEdits=!1}return o}function bu(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var o=Ji(t,e.state.keyMaps[r],i,e);if(o)return o}return e.options.extraKeys&&Ji(t,e.options.extraKeys,i,e)||Ji(t,e.options.keyMap,i,e)}var Su=new U;function Rn(e,t,i,r){var o=e.state.keySeq;if(o){if(Ua(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Su.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),Xa(e,o+" "+t,i,r))return!0}return Xa(e,t,i,r)}function Xa(e,t,i,r){var o=bu(e,t,r);return o=="multi"&&(e.state.keySeq=t),o=="handled"&&ot(e,"keyHandled",e,t,i),(o=="handled"||o=="multi")&&(Xe(i),To(e)),!!o}function Ya(e,t){var i=qa(t,!0);return i?t.shiftKey&&!e.state.keySeq?Rn(e,"Shift-"+i,t,function(r){return ro(e,r,!0)})||Rn(e,i,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return ro(e,r)}):Rn(e,i,t,function(r){return ro(e,r)}):!1}function Cu(e,t,i){return Rn(e,"'"+i+"'",t,function(r){return ro(e,r,!0)})}var Xo=null;function Za(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=z(),!We(t,e))){m&&_<11&&e.keyCode==27&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=Ya(t,e);c&&(Xo=r?i:null,!r&&i==88&&!Ur&&(a?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),D&&!a&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&wu(t)}}function wu(e){var t=e.display.lineDiv;V(t,"CodeMirror-crosshair");function i(r){(r.keyCode==18||!r.altKey)&&(A(t,"CodeMirror-crosshair"),Qe(document,"keyup",i),Qe(document,"mouseover",i))}we(document,"keyup",i),we(document,"mouseover",i)}function Va(e){e.keyCode==16&&(this.doc.sel.shift=!1),We(this,e)}function $a(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(Xr(t.display,e)||We(t,e)||e.ctrlKey&&!e.altKey||a&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(c&&i==Xo){Xo=null,Xe(e);return}if(!(c&&(!e.which||e.which<10)&&Ya(t,e))){var o=String.fromCharCode(r??i);o!="\b"&&(Cu(t,e,o)||t.display.input.onKeyPress(e))}}}var Lu=400,Yo=function(e,t,i){this.time=e,this.pos=t,this.button=i};Yo.prototype.compare=function(e,t,i){return this.time+Lu>e&&H(t,this.pos)==0&&i==this.button};var Dn,Bn;function xu(e,t){var i=+new Date;return Bn&&Bn.compare(i,e,t)?(Dn=Bn=null,"triple"):Dn&&Dn.compare(i,e,t)?(Bn=new Yo(i,e,t),Dn=null,"double"):(Dn=new Yo(i,e,t),Bn=null,"single")}function Ja(e){var t=this,i=t.display;if(!(We(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,Xr(i,e)){v||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));return}if(!Zo(t,e)){var r=Ci(t,e),o=Nr(e),f=r?xu(r,o):"single";window.focus(),o==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&ku(t,o,r,f,e))&&(o==1?r?Tu(t,r,f,e):Yt(e)==i.scroller&&Xe(e):o==2?(r&&Vn(t.doc,r),setTimeout(function(){return i.input.focus()},20)):o==3&&(O?t.display.input.onContextMenu(e):Ao(t)))}}}function ku(e,t,i,r,o){var f="Click";return r=="double"?f="Double"+f:r=="triple"&&(f="Triple"+f),f=(t==1?"Left":t==2?"Middle":"Right")+f,Rn(e,za(f,o),o,function(S){if(typeof S=="string"&&(S=On[S]),!S)return!1;var x=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),x=S(e,i)!=Y}finally{e.state.suppressEdits=!1}return x})}function Eu(e,t,i){var r=e.getOption("configureMouse"),o=r?r(e,t,i):{};if(o.unit==null){var f=u?i.shiftKey&&i.metaKey:i.altKey;o.unit=f?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(o.extend==null||e.doc.extend)&&(o.extend=e.doc.extend||i.shiftKey),o.addNew==null&&(o.addNew=a?i.metaKey:i.ctrlKey),o.moveOnDrag==null&&(o.moveOnDrag=!(a?i.altKey:i.ctrlKey)),o}function Tu(e,t,i,r){m?setTimeout(fe(Qs,e),0):e.curOp.focus=z();var o=Eu(e,i,r),f=e.doc.sel,S;e.options.dragDrop&&wr&&!e.isReadOnly()&&i=="single"&&(S=f.contains(t))>-1&&(H((S=f.ranges[S]).from(),t)<0||t.xRel>0)&&(H(S.to(),t)>0||t.xRel<0)?Au(e,r,t,o):Mu(e,r,t,o)}function Au(e,t,i,r){var o=e.display,f=!1,S=st(e,function(I){v&&(o.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ao(e)),Qe(o.wrapper.ownerDocument,"mouseup",S),Qe(o.wrapper.ownerDocument,"mousemove",x),Qe(o.scroller,"dragstart",M),Qe(o.scroller,"drop",S),f||(Xe(I),r.addNew||Vn(e.doc,i,null,null,r.extend),v&&!p||m&&_==9?setTimeout(function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()},20):o.input.focus())}),x=function(I){f=f||Math.abs(t.clientX-I.clientX)+Math.abs(t.clientY-I.clientY)>=10},M=function(){return f=!0};v&&(o.scroller.draggable=!0),e.state.draggingText=S,S.copy=!r.moveOnDrag,we(o.wrapper.ownerDocument,"mouseup",S),we(o.wrapper.ownerDocument,"mousemove",x),we(o.scroller,"dragstart",M),we(o.scroller,"drop",S),e.state.delayingBlurEvent=!0,setTimeout(function(){return o.input.focus()},20),o.scroller.dragDrop&&o.scroller.dragDrop()}function Qa(e,t,i){if(i=="char")return new Be(t,t);if(i=="word")return e.findWordAt(t);if(i=="line")return new Be(le(t.line,0),ge(e.doc,le(t.line+1,0)));var r=i(e,t);return new Be(r.from,r.to)}function Mu(e,t,i,r){m&&Ao(e);var o=e.display,f=e.doc;Xe(t);var S,x,M=f.sel,I=M.ranges;if(r.addNew&&!r.extend?(x=f.sel.contains(i),x>-1?S=I[x]:S=new Be(i,i)):(S=f.sel.primary(),x=f.sel.primIndex),r.unit=="rectangle")r.addNew||(S=new Be(i,i)),i=Ci(e,t,!0,!0),x=-1;else{var q=Qa(e,i,r.unit);r.extend?S=Uo(S,q.anchor,q.head,r.extend):S=q}r.addNew?x==-1?(x=I.length,yt(f,mr(e,I.concat([S]),x),{scroll:!1,origin:"*mouse"})):I.length>1&&I[x].empty()&&r.unit=="char"&&!r.extend?(yt(f,mr(e,I.slice(0,x).concat(I.slice(x+1)),0),{scroll:!1,origin:"*mouse"}),M=f.sel):zo(f,x,S,Se):(x=0,yt(f,new Jt([S],0),Se),M=f.sel);var Z=i;function Q(ve){if(H(Z,ve)!=0)if(Z=ve,r.unit=="rectangle"){for(var me=[],ke=e.options.tabSize,Le=xe(be(f,i.line).text,i.ch,ke),Me=xe(be(f,ve.line).text,ve.ch,ke),He=Math.min(Le,Me),lt=Math.max(Le,Me),qe=Math.min(i.line,ve.line),Xt=Math.min(e.lastLine(),Math.max(i.line,ve.line));qe<=Xt;qe++){var It=be(f,qe).text,Ve=Ce(It,He,ke);He==lt?me.push(new Be(le(qe,Ve),le(qe,Ve))):It.length>Ve&&me.push(new Be(le(qe,Ve),le(qe,Ce(It,lt,ke))))}me.length||me.push(new Be(i,i)),yt(f,mr(e,M.ranges.slice(0,x).concat(me),x),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ve)}else{var Ht=S,pt=Qa(e,ve,r.unit),rt=Ht.anchor,$e;H(pt.anchor,rt)>0?($e=pt.head,rt=Te(Ht.from(),pt.anchor)):($e=pt.anchor,rt=ce(Ht.to(),pt.head));var Ge=M.ranges.slice(0);Ge[x]=Ou(e,new Be(ge(f,rt),$e)),yt(f,mr(e,Ge,x),Se)}}var J=o.wrapper.getBoundingClientRect(),ne=0;function ae(ve){var me=++ne,ke=Ci(e,ve,!0,r.unit=="rectangle");if(!!ke)if(H(ke,Z)!=0){e.curOp.focus=z(),Q(ke);var Le=qn(o,f);(ke.line>=Le.to||ke.line<Le.from)&&setTimeout(st(e,function(){ne==me&&ae(ve)}),150)}else{var Me=ve.clientY<J.top?-20:ve.clientY>J.bottom?20:0;Me&&setTimeout(st(e,function(){ne==me&&(o.scroller.scrollTop+=Me,ae(ve))}),50)}}function ue(ve){e.state.selectingText=!1,ne=1/0,ve&&(Xe(ve),o.input.focus()),Qe(o.wrapper.ownerDocument,"mousemove",pe),Qe(o.wrapper.ownerDocument,"mouseup",_e),f.history.lastSelOrigin=null}var pe=st(e,function(ve){ve.buttons===0||!Nr(ve)?ue(ve):ae(ve)}),_e=st(e,ue);e.state.selectingText=_e,we(o.wrapper.ownerDocument,"mousemove",pe),we(o.wrapper.ownerDocument,"mouseup",_e)}function Ou(e,t){var i=t.anchor,r=t.head,o=be(e.doc,i.line);if(H(i,r)==0&&i.sticky==r.sticky)return t;var f=ut(o);if(!f)return t;var S=Ne(f,i.ch,i.sticky),x=f[S];if(x.from!=i.ch&&x.to!=i.ch)return t;var M=S+(x.from==i.ch==(x.level!=1)?0:1);if(M==0||M==f.length)return t;var I;if(r.line!=i.line)I=(r.line-i.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var q=Ne(f,r.ch,r.sticky),Z=q-S||(r.ch-i.ch)*(x.level==1?-1:1);q==M-1||q==M?I=Z<0:I=Z>0}var Q=f[M+(I?-1:0)],J=I==(Q.level==1),ne=J?Q.from:Q.to,ae=J?"after":"before";return i.ch==ne&&i.sticky==ae?t:new Be(new le(i.line,ne,ae),r)}function el(e,t,i,r){var o,f;if(t.touches)o=t.touches[0].clientX,f=t.touches[0].clientY;else try{o=t.clientX,f=t.clientY}catch{return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Xe(t);var S=e.display,x=S.lineDiv.getBoundingClientRect();if(f>x.bottom||!Ke(e,i))return ft(t);f-=x.top-S.viewOffset;for(var M=0;M<e.display.gutterSpecs.length;++M){var I=S.gutters.childNodes[M];if(I&&I.getBoundingClientRect().right>=o){var q=Rt(e.doc,f),Z=e.display.gutterSpecs[M];return Ee(e,i,e,q,Z.className,t),ft(t)}}}function Zo(e,t){return el(e,t,"gutterClick",!0)}function tl(e,t){Xr(e.display,t)||Ru(e,t)||We(e,t,"contextmenu")||O||e.display.input.onContextMenu(t)}function Ru(e,t){return Ke(e,"gutterContextMenu")?el(e,t,"gutterContextMenu",!1):!1}function rl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pn(e)}var en={toString:function(){return"CodeMirror.Init"}},il={},io={};function Du(e){var t=e.optionHandlers;function i(r,o,f,S){e.defaults[r]=o,f&&(t[r]=S?function(x,M,I){I!=en&&f(x,M,I)}:f)}e.defineOption=i,e.Init=en,i("value","",function(r,o){return r.setValue(o)},!0),i("mode",null,function(r,o){r.doc.modeOption=o,No(r)},!0),i("indentUnit",2,No,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(r){Cn(r),pn(r),Bt(r)},!0),i("lineSeparator",null,function(r,o){if(r.doc.lineSep=o,!!o){var f=[],S=r.doc.first;r.doc.iter(function(M){for(var I=0;;){var q=M.text.indexOf(o,I);if(q==-1)break;I=q+o.length,f.push(le(S,q))}S++});for(var x=f.length-1;x>=0;x--)Vi(r.doc,o,f[x],le(f[x].line,f[x].ch+o.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(r,o,f){r.state.specialChars=new RegExp(o.source+(o.test("	")?"":"|	"),"g"),f!=en&&r.refresh()}),i("specialCharPlaceholder",lc,function(r){return r.refresh()},!0),i("electricChars",!0),i("inputStyle",l?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(r,o){return r.getInputField().spellcheck=o},!0),i("autocorrect",!1,function(r,o){return r.getInputField().autocorrect=o},!0),i("autocapitalize",!1,function(r,o){return r.getInputField().autocapitalize=o},!0),i("rtlMoveVisually",!g),i("wholeLineUpdateBefore",!0),i("theme","default",function(r){rl(r),Sn(r)},!0),i("keyMap","default",function(r,o,f){var S=to(o),x=f!=en&&to(f);x&&x.detach&&x.detach(r,S),S.attach&&S.attach(r,x||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,Pu,!0),i("gutters",[],function(r,o){r.display.gutterSpecs=Ho(o,r.options.lineNumbers),Sn(r)},!0),i("fixedGutter",!0,function(r,o){r.display.gutters.style.left=o?xo(r.display)+"px":"0",r.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(r){return Gi(r)},!0),i("scrollbarStyle","native",function(r){oa(r),Gi(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),i("lineNumbers",!1,function(r,o){r.display.gutterSpecs=Ho(r.options.gutters,o),Sn(r)},!0),i("firstLineNumber",1,Sn,!0),i("lineNumberFormatter",function(r){return r},Sn,!0),i("showCursorWhenSelecting",!1,vn,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(r,o){o=="nocursor"&&(qi(r),r.display.input.blur()),r.display.input.readOnlyChanged(o)}),i("screenReaderLabel",null,function(r,o){o=o===""?null:o,r.display.input.screenReaderLabelChanged(o)}),i("disableInput",!1,function(r,o){o||r.display.input.reset()},!0),i("dragDrop",!0,Bu),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,vn,!0),i("singleCursorHeightPerLine",!0,vn,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,Cn,!0),i("addModeClass",!1,Cn,!0),i("pollInterval",100),i("undoDepth",200,function(r,o){return r.doc.history.undoDepth=o}),i("historyEventDelay",1250),i("viewportMargin",10,function(r){return r.refresh()},!0),i("maxHighlightLength",1e4,Cn,!0),i("moveInputWithCursor",!0,function(r,o){o||r.display.input.resetPosition()}),i("tabindex",null,function(r,o){return r.display.input.getField().tabIndex=o||""}),i("autofocus",null),i("direction","ltr",function(r,o){return r.doc.setDirection(o)},!0),i("phrases",null)}function Bu(e,t,i){var r=i&&i!=en;if(!t!=!r){var o=e.display.dragFunctions,f=t?we:Qe;f(e.display.scroller,"dragstart",o.start),f(e.display.scroller,"dragenter",o.enter),f(e.display.scroller,"dragover",o.over),f(e.display.scroller,"dragleave",o.leave),f(e.display.scroller,"drop",o.drop)}}function Pu(e){e.options.lineWrapping?(V(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(A(e.display.wrapper,"CodeMirror-wrap"),_r(e)),ko(e),Bt(e),pn(e),setTimeout(function(){return Gi(e)},100)}function ze(e,t){var i=this;if(!(this instanceof ze))return new ze(e,t);this.options=t=t?he(t):{},he(il,t,!1);var r=t.value;typeof r=="string"?r=new Pt(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var o=new ze.inputStyles[t.inputStyle](this),f=this.display=new Yc(e,r,o,t);f.wrapper.CodeMirror=this,rl(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),oa(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},t.autofocus&&!l&&f.input.focus(),m&&_<11&&setTimeout(function(){return i.display.input.reset(!0)},20),Iu(this),du(),ki(this),this.curOp.forceUpdate=!0,va(this,r),t.autofocus&&!l||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&Mo(i)},20):qi(this);for(var S in io)io.hasOwnProperty(S)&&io[S](this,t[S],en);la(this),t.finishInit&&t.finishInit(this);for(var x=0;x<Vo.length;++x)Vo[x](this);Ei(this),v&&t.lineWrapping&&getComputedStyle(f.lineDiv).textRendering=="optimizelegibility"&&(f.lineDiv.style.textRendering="auto")}ze.defaults=il,ze.optionHandlers=io;function Iu(e){var t=e.display;we(t.scroller,"mousedown",st(e,Ja)),m&&_<11?we(t.scroller,"dblclick",st(e,function(M){if(!We(e,M)){var I=Ci(e,M);if(!(!I||Zo(e,M)||Xr(e.display,M))){Xe(M);var q=e.findWordAt(I);Vn(e.doc,q.anchor,q.head)}}})):we(t.scroller,"dblclick",function(M){return We(e,M)||Xe(M)}),we(t.scroller,"contextmenu",function(M){return tl(e,M)}),we(t.input.getField(),"contextmenu",function(M){t.scroller.contains(M.target)||tl(e,M)});var i,r={end:0};function o(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function f(M){if(M.touches.length!=1)return!1;var I=M.touches[0];return I.radiusX<=1&&I.radiusY<=1}function S(M,I){if(I.left==null)return!0;var q=I.left-M.left,Z=I.top-M.top;return q*q+Z*Z>20*20}we(t.scroller,"touchstart",function(M){if(!We(e,M)&&!f(M)&&!Zo(e,M)){t.input.ensurePolled(),clearTimeout(i);var I=+new Date;t.activeTouch={start:I,moved:!1,prev:I-r.end<=300?r:null},M.touches.length==1&&(t.activeTouch.left=M.touches[0].pageX,t.activeTouch.top=M.touches[0].pageY)}}),we(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),we(t.scroller,"touchend",function(M){var I=t.activeTouch;if(I&&!Xr(t,M)&&I.left!=null&&!I.moved&&new Date-I.start<300){var q=e.coordsChar(t.activeTouch,"page"),Z;!I.prev||S(I,I.prev)?Z=new Be(q,q):!I.prev.prev||S(I,I.prev.prev)?Z=e.findWordAt(q):Z=new Be(le(q.line,0),ge(e.doc,le(q.line+1,0))),e.setSelection(Z.anchor,Z.head),e.focus(),Xe(M)}o()}),we(t.scroller,"touchcancel",o),we(t.scroller,"scroll",function(){t.scroller.clientHeight&&(_n(e,t.scroller.scrollTop),Li(e,t.scroller.scrollLeft,!0),Ee(e,"scroll",e))}),we(t.scroller,"mousewheel",function(M){return fa(e,M)}),we(t.scroller,"DOMMouseScroll",function(M){return fa(e,M)}),we(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(M){We(e,M)||tr(M)},over:function(M){We(e,M)||(hu(e,M),tr(M))},start:function(M){return fu(e,M)},drop:st(e,uu),leave:function(M){We(e,M)||Na(e)}};var x=t.input.getField();we(x,"keyup",function(M){return Va.call(e,M)}),we(x,"keydown",st(e,Za)),we(x,"keypress",st(e,$a)),we(x,"focus",function(M){return Mo(e,M)}),we(x,"blur",function(M){return qi(e,M)})}var Vo=[];ze.defineInitHook=function(e){return Vo.push(e)};function Pn(e,t,i,r){var o=e.doc,f;i==null&&(i="add"),i=="smart"&&(o.mode.indent?f=qr(e,t).state:i="prev");var S=e.options.tabSize,x=be(o,t),M=xe(x.text,null,S);x.stateAfter&&(x.stateAfter=null);var I=x.text.match(/^\s*/)[0],q;if(!r&&!/\S/.test(x.text))q=0,i="not";else if(i=="smart"&&(q=o.mode.indent(f,x.text.slice(I.length),x.text),q==Y||q>150)){if(!r)return;i="prev"}i=="prev"?t>o.first?q=xe(be(o,t-1).text,null,S):q=0:i=="add"?q=M+e.options.indentUnit:i=="subtract"?q=M-e.options.indentUnit:typeof i=="number"&&(q=M+i),q=Math.max(0,q);var Z="",Q=0;if(e.options.indentWithTabs)for(var J=Math.floor(q/S);J;--J)Q+=S,Z+="	";if(Q<q&&(Z+=Fe(q-Q)),Z!=I)return Vi(o,Z,le(t,0),le(t,I.length),"+input"),x.stateAfter=null,!0;for(var ne=0;ne<o.sel.ranges.length;ne++){var ae=o.sel.ranges[ne];if(ae.head.line==t&&ae.head.ch<I.length){var ue=le(t,I.length);zo(o,ne,new Be(ue,ue));break}}}var br=null;function no(e){br=e}function $o(e,t,i,r,o){var f=e.doc;e.display.shift=!1,r||(r=f.sel);var S=+new Date-200,x=o=="paste"||e.state.pasteIncoming>S,M=xr(t),I=null;if(x&&r.ranges.length>1)if(br&&br.text.join(`
`)==t){if(r.ranges.length%br.text.length==0){I=[];for(var q=0;q<br.text.length;q++)I.push(f.splitLines(br.text[q]))}}else M.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(I=ye(M,function(pe){return[pe]}));for(var Z=e.curOp.updateInput,Q=r.ranges.length-1;Q>=0;Q--){var J=r.ranges[Q],ne=J.from(),ae=J.to();J.empty()&&(i&&i>0?ne=le(ne.line,ne.ch-i):e.state.overwrite&&!x?ae=le(ae.line,Math.min(be(f,ae.line).text.length,ae.ch+Ae(M).length)):x&&br&&br.lineWise&&br.text.join(`
`)==M.join(`
`)&&(ne=ae=le(ne.line,0)));var ue={from:ne,to:ae,text:I?I[Q%I.length]:M,origin:o||(x?"paste":e.state.cutIncoming>S?"cut":"+input")};Zi(e.doc,ue),ot(e,"inputRead",e,ue)}t&&!x&&ol(e,t),Ki(e),e.curOp.updateInput<2&&(e.curOp.updateInput=Z),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function nl(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Gt(t,function(){return $o(t,i,0,null,"paste")}),!0}function ol(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var o=i.ranges[r];if(!(o.head.ch>100||r&&i.ranges[r-1].head.line==o.head.line)){var f=e.getModeAt(o.head),S=!1;if(f.electricChars){for(var x=0;x<f.electricChars.length;x++)if(t.indexOf(f.electricChars.charAt(x))>-1){S=Pn(e,o.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(be(e.doc,o.head.line).text.slice(0,o.head.ch))&&(S=Pn(e,o.head.line,"smart"));S&&ot(e,"electricInput",e,o.head.line)}}}function sl(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var o=e.doc.sel.ranges[r].head.line,f={anchor:le(o,0),head:le(o+1,0)};i.push(f),t.push(e.getRange(f.anchor,f.head))}return{text:t,ranges:i}}function al(e,t,i,r){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function ll(){var e=j("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=j("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return v?e.style.width="1000px":e.setAttribute("wrap","off"),s&&(e.style.border="1px solid black"),al(e),t}function Hu(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(r,o){var f=this.options,S=f[r];f[r]==o&&r!="mode"||(f[r]=o,t.hasOwnProperty(r)&&st(this,t[r])(this,o,S),Ee(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,o){this.state.keyMaps[o?"push":"unshift"](to(r))},removeKeyMap:function(r){for(var o=this.state.keyMaps,f=0;f<o.length;++f)if(o[f]==r||o[f].name==r)return o.splice(f,1),!0},addOverlay:kt(function(r,o){var f=r.token?r:e.getMode(this.options,r);if(f.startState)throw new Error("Overlays may not be stateful.");je(this.state.overlays,{mode:f,modeSpec:r,opaque:o&&o.opaque,priority:o&&o.priority||0},function(S){return S.priority}),this.state.modeGen++,Bt(this)}),removeOverlay:kt(function(r){for(var o=this.state.overlays,f=0;f<o.length;++f){var S=o[f].modeSpec;if(S==r||typeof r=="string"&&S.name==r){o.splice(f,1),this.state.modeGen++,Bt(this);return}}}),indentLine:kt(function(r,o,f){typeof o!="string"&&typeof o!="number"&&(o==null?o=this.options.smartIndent?"smart":"prev":o=o?"add":"subtract"),rr(this.doc,r)&&Pn(this,r,o,f)}),indentSelection:kt(function(r){for(var o=this.doc.sel.ranges,f=-1,S=0;S<o.length;S++){var x=o[S];if(x.empty())x.head.line>f&&(Pn(this,x.head.line,r,!0),f=x.head.line,S==this.doc.sel.primIndex&&Ki(this));else{var M=x.from(),I=x.to(),q=Math.max(f,M.line);f=Math.min(this.lastLine(),I.line-(I.ch?0:1))+1;for(var Z=q;Z<f;++Z)Pn(this,Z,r);var Q=this.doc.sel.ranges;M.ch==0&&o.length==Q.length&&Q[S].from().ch>0&&zo(this.doc,S,new Be(M,Q[S].to()),G)}}}),getTokenAt:function(r,o){return Hi(this,r,o)},getLineTokens:function(r,o){return Hi(this,le(r),o,!0)},getTokenTypeAt:function(r){r=ge(this.doc,r);var o=Bi(this,be(this.doc,r.line)),f=0,S=(o.length-1)/2,x=r.ch,M;if(x==0)M=o[2];else for(;;){var I=f+S>>1;if((I?o[I*2-1]:0)>=x)S=I;else if(o[I*2+1]<x)f=I+1;else{M=o[I*2+2];break}}var q=M?M.indexOf("overlay "):-1;return q<0?M:q==0?null:M.slice(0,q-1)},getModeAt:function(r){var o=this.doc.mode;return o.innerMode?e.innerMode(o,this.getTokenAt(r).state).mode:o},getHelper:function(r,o){return this.getHelpers(r,o)[0]},getHelpers:function(r,o){var f=[];if(!i.hasOwnProperty(o))return f;var S=i[o],x=this.getModeAt(r);if(typeof x[o]=="string")S[x[o]]&&f.push(S[x[o]]);else if(x[o])for(var M=0;M<x[o].length;M++){var I=S[x[o][M]];I&&f.push(I)}else x.helperType&&S[x.helperType]?f.push(S[x.helperType]):S[x.name]&&f.push(S[x.name]);for(var q=0;q<S._global.length;q++){var Z=S._global[q];Z.pred(x,this)&&ee(f,Z.val)==-1&&f.push(Z.val)}return f},getStateAfter:function(r,o){var f=this.doc;return r=Oe(f,r??f.first+f.size-1),qr(this,r+1,o).state},cursorCoords:function(r,o){var f,S=this.doc.sel.primary();return r==null?f=S.head:typeof r=="object"?f=ge(this.doc,r):f=r?S.from():S.to(),yr(this,f,o||"page")},charCoords:function(r,o){return Wn(this,ge(this.doc,r),o||"page")},coordsChar:function(r,o){return r=Gs(this,r,o||"page"),Co(this,r.left,r.top)},lineAtHeight:function(r,o){return r=Gs(this,{top:r,left:0},o||"page").top,Rt(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,o,f){var S=!1,x;if(typeof r=="number"){var M=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>M&&(r=M,S=!0),x=be(this.doc,r)}else x=r;return Nn(this,x,{top:0,left:0},o||"page",f||S).top+(S?this.doc.height-$t(x):0)},defaultTextHeight:function(){return Ui(this.display)},defaultCharWidth:function(){return zi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,o,f,S,x){var M=this.display;r=yr(this,ge(this.doc,r));var I=r.bottom,q=r.left;if(o.style.position="absolute",o.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(o),M.sizer.appendChild(o),S=="over")I=r.top;else if(S=="above"||S=="near"){var Z=Math.max(M.wrapper.clientHeight,this.doc.height),Q=Math.max(M.sizer.clientWidth,M.lineSpace.clientWidth);(S=="above"||r.bottom+o.offsetHeight>Z)&&r.top>o.offsetHeight?I=r.top-o.offsetHeight:r.bottom+o.offsetHeight<=Z&&(I=r.bottom),q+o.offsetWidth>Q&&(q=Q-o.offsetWidth)}o.style.top=I+"px",o.style.left=o.style.right="",x=="right"?(q=M.sizer.clientWidth-o.offsetWidth,o.style.right="0px"):(x=="left"?q=0:x=="middle"&&(q=(M.sizer.clientWidth-o.offsetWidth)/2),o.style.left=q+"px"),f&&Bc(this,{left:q,top:I,right:q+o.offsetWidth,bottom:I+o.offsetHeight})},triggerOnKeyDown:kt(Za),triggerOnKeyPress:kt($a),triggerOnKeyUp:Va,triggerOnMouseDown:kt(Ja),execCommand:function(r){if(On.hasOwnProperty(r))return On[r].call(null,this)},triggerElectric:kt(function(r){ol(this,r)}),findPosH:function(r,o,f,S){var x=1;o<0&&(x=-1,o=-o);for(var M=ge(this.doc,r),I=0;I<o&&(M=Jo(this.doc,M,x,f,S),!M.hitSide);++I);return M},moveH:kt(function(r,o){var f=this;this.extendSelectionsBy(function(S){return f.display.shift||f.doc.extend||S.empty()?Jo(f.doc,S.head,r,o,f.options.rtlMoveVisually):r<0?S.from():S.to()},de)}),deleteH:kt(function(r,o){var f=this.doc.sel,S=this.doc;f.somethingSelected()?S.replaceSelection("",null,"+delete"):Qi(this,function(x){var M=Jo(S,x.head,r,o,!1);return r<0?{from:M,to:x.head}:{from:x.head,to:M}})}),findPosV:function(r,o,f,S){var x=1,M=S;o<0&&(x=-1,o=-o);for(var I=ge(this.doc,r),q=0;q<o;++q){var Z=yr(this,I,"div");if(M==null?M=Z.left:Z.left=M,I=cl(this,Z,x,f),I.hitSide)break}return I},moveV:kt(function(r,o){var f=this,S=this.doc,x=[],M=!this.display.shift&&!S.extend&&S.sel.somethingSelected();if(S.extendSelectionsBy(function(q){if(M)return r<0?q.from():q.to();var Z=yr(f,q.head,"div");q.goalColumn!=null&&(Z.left=q.goalColumn),x.push(Z.left);var Q=cl(f,Z,r,o);return o=="page"&&q==S.sel.primary()&&Ro(f,Wn(f,Q,"div").top-Z.top),Q},de),x.length)for(var I=0;I<S.sel.ranges.length;I++)S.sel.ranges[I].goalColumn=x[I]}),findWordAt:function(r){var o=this.doc,f=be(o,r.line).text,S=r.ch,x=r.ch;if(f){var M=this.getHelper(r,"wordChars");(r.sticky=="before"||x==f.length)&&S?--S:++x;for(var I=f.charAt(S),q=Cr(I,M)?function(Z){return Cr(Z,M)}:/\s/.test(I)?function(Z){return/\s/.test(Z)}:function(Z){return!/\s/.test(Z)&&!Cr(Z)};S>0&&q(f.charAt(S-1));)--S;for(;x<f.length&&q(f.charAt(x));)++x}return new Be(le(r.line,S),le(r.line,x))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?V(this.display.cursorDiv,"CodeMirror-overwrite"):A(this.display.cursorDiv,"CodeMirror-overwrite"),Ee(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==z()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:kt(function(r,o){gn(this,r,o)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-Br(this)-this.display.barHeight,width:r.scrollWidth-Br(this)-this.display.barWidth,clientHeight:yo(this),clientWidth:bi(this)}},scrollIntoView:kt(function(r,o){r==null?(r={from:this.doc.sel.primary().head,to:null},o==null&&(o=this.options.cursorScrollMargin)):typeof r=="number"?r={from:le(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=o||0,r.from.line!=null?Pc(this,r):ta(this,r.from,r.to,r.margin)}),setSize:kt(function(r,o){var f=this,S=function(M){return typeof M=="number"||/^\d+$/.test(String(M))?M+"px":M};r!=null&&(this.display.wrapper.style.width=S(r)),o!=null&&(this.display.wrapper.style.height=S(o)),this.options.lineWrapping&&zs(this);var x=this.display.viewFrom;this.doc.iter(x,this.display.viewTo,function(M){if(M.widgets){for(var I=0;I<M.widgets.length;I++)if(M.widgets[I].noHScroll){ii(f,x,"widget");break}}++x}),this.curOp.forceUpdate=!0,Ee(this,"refresh",this)}),operation:function(r){return Gt(this,r)},startOperation:function(){return ki(this)},endOperation:function(){return Ei(this)},refresh:kt(function(){var r=this.display.cachedTextHeight;Bt(this),this.curOp.forceUpdate=!0,pn(this),gn(this,this.doc.scrollLeft,this.doc.scrollTop),Po(this.display),(r==null||Math.abs(r-Ui(this.display))>.5||this.options.lineWrapping)&&ko(this),Ee(this,"refresh",this)}),swapDoc:kt(function(r){var o=this.doc;return o.cm=null,this.state.selectingText&&this.state.selectingText(),va(this,r),pn(this),this.display.input.reset(),gn(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,ot(this,"swapDoc",this,o),o}),phrase:function(r){var o=this.options.phrases;return o&&Object.prototype.hasOwnProperty.call(o,r)?o[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},At(e),e.registerHelper=function(r,o,f){i.hasOwnProperty(r)||(i[r]=e[r]={_global:[]}),i[r][o]=f},e.registerGlobalHelper=function(r,o,f,S){e.registerHelper(r,o,S),i[r]._global.push({pred:f,val:S})}}function Jo(e,t,i,r,o){var f=t,S=i,x=be(e,t.line),M=o&&e.direction=="rtl"?-i:i;function I(){var _e=t.line+M;return _e<e.first||_e>=e.first+e.size?!1:(t=new le(_e,t.ch,t.sticky),x=be(e,_e))}function q(_e){var ve;if(r=="codepoint"){var me=x.text.charCodeAt(t.ch+(i>0?0:-1));if(isNaN(me))ve=null;else{var ke=i>0?me>=55296&&me<56320:me>=56320&&me<57343;ve=new le(t.line,Math.max(0,Math.min(x.text.length,t.ch+i*(ke?2:1))),-i)}}else o?ve=yu(e.cm,x,t,i):ve=Ko(x,t,i);if(ve==null)if(!_e&&I())t=Go(o,e.cm,x,t.line,M);else return!1;else t=ve;return!0}if(r=="char"||r=="codepoint")q();else if(r=="column")q(!0);else if(r=="word"||r=="group")for(var Z=null,Q=r=="group",J=e.cm&&e.cm.getHelper(t,"wordChars"),ne=!0;!(i<0&&!q(!ne));ne=!1){var ae=x.text.charAt(t.ch)||`
`,ue=Cr(ae,J)?"w":Q&&ae==`
`?"n":!Q||/\s/.test(ae)?null:"p";if(Q&&!ne&&!ue&&(ue="s"),Z&&Z!=ue){i<0&&(i=1,q(),t.sticky="after");break}if(ue&&(Z=ue),i>0&&!q(!ne))break}var pe=Jn(e,t,f,S,!0);return X(f,pe)&&(pe.hitSide=!0),pe}function cl(e,t,i,r){var o=e.doc,f=t.left,S;if(r=="page"){var x=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),M=Math.max(x-.5*Ui(e.display),3);S=(i>0?t.bottom:t.top)+i*M}else r=="line"&&(S=i>0?t.bottom+3:t.top-3);for(var I;I=Co(e,f,S),!!I.outside;){if(i<0?S<=0:S>=o.height){I.hitSide=!0;break}S+=i*5}return I}var Pe=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Pe.prototype.init=function(e){var t=this,i=this,r=i.cm,o=i.div=e.lineDiv;o.contentEditable=!0,al(o,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function f(x){for(var M=x.target;M;M=M.parentNode){if(M==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(M.className))break}return!1}we(o,"paste",function(x){!f(x)||We(r,x)||nl(x,r)||_<=11&&setTimeout(st(r,function(){return t.updateFromDOM()}),20)}),we(o,"compositionstart",function(x){t.composing={data:x.data,done:!1}}),we(o,"compositionupdate",function(x){t.composing||(t.composing={data:x.data,done:!1})}),we(o,"compositionend",function(x){t.composing&&(x.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),we(o,"touchstart",function(){return i.forceCompositionEnd()}),we(o,"input",function(){t.composing||t.readFromDOMSoon()});function S(x){if(!(!f(x)||We(r,x))){if(r.somethingSelected())no({lineWise:!1,text:r.getSelections()}),x.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var M=sl(r);no({lineWise:!0,text:M.text}),x.type=="cut"&&r.operation(function(){r.setSelections(M.ranges,0,G),r.replaceSelection("",null,"cut")})}else return;if(x.clipboardData){x.clipboardData.clearData();var I=br.text.join(`
`);if(x.clipboardData.setData("Text",I),x.clipboardData.getData("Text")==I){x.preventDefault();return}}var q=ll(),Z=q.firstChild;r.display.lineSpace.insertBefore(q,r.display.lineSpace.firstChild),Z.value=br.text.join(`
`);var Q=z();re(Z),setTimeout(function(){r.display.lineSpace.removeChild(q),Q.focus(),Q==o&&i.showPrimarySelection()},50)}}we(o,"copy",S),we(o,"cut",S)},Pe.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Pe.prototype.prepareSelection=function(){var e=Js(this.cm,!1);return e.focus=z()==this.div,e},Pe.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Pe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Pe.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var f=oo(t,e.anchorNode,e.anchorOffset),S=oo(t,e.focusNode,e.focusOffset);if(!(f&&!f.bad&&S&&!S.bad&&H(Te(f,S),r)==0&&H(ce(f,S),o)==0)){var x=t.display.view,M=r.line>=t.display.viewFrom&&ul(t,r)||{node:x[0].measure.map[2],offset:0},I=o.line<t.display.viewTo&&ul(t,o);if(!I){var q=x[x.length-1].measure,Z=q.maps?q.maps[q.maps.length-1]:q.map;I={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(!M||!I){e.removeAllRanges();return}var Q=e.rangeCount&&e.getRangeAt(0),J;try{J=P(M.node,M.offset,I.offset,I.node)}catch{}J&&(!D&&t.state.focused?(e.collapse(M.node,M.offset),J.collapsed||(e.removeAllRanges(),e.addRange(J))):(e.removeAllRanges(),e.addRange(J)),Q&&e.anchorNode==null?e.addRange(Q):D&&this.startGracePeriod()),this.rememberSelection()}},Pe.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Pe.prototype.showMultipleSelections=function(e){R(this.cm.display.cursorDiv,e.cursors),R(this.cm.display.selectionDiv,e.selection)},Pe.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Pe.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return N(this.div,t)},Pe.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||z()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Pe.prototype.blur=function(){this.div.blur()},Pe.prototype.getField=function(){return this.div},Pe.prototype.supportsTouch=function(){return!0},Pe.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Gt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))}this.polling.set(this.cm.options.pollInterval,i)},Pe.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Pe.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(n&&w&&this.cm.display.gutterSpecs.length&&Fu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var i=oo(t,e.anchorNode,e.anchorOffset),r=oo(t,e.focusNode,e.focusOffset);i&&r&&Gt(t,function(){yt(t.doc,oi(i,r),G),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Pe.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(r.ch==0&&r.line>e.firstLine()&&(r=le(r.line-1,be(e.doc,r.line-1).length)),o.ch==be(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=le(o.line+1,0)),r.line<t.viewFrom||o.line>t.viewTo-1)return!1;var f,S,x;r.line==t.viewFrom||(f=wi(e,r.line))==0?(S=Re(t.view[0].line),x=t.view[0].node):(S=Re(t.view[f].line),x=t.view[f-1].node.nextSibling);var M=wi(e,o.line),I,q;if(M==t.view.length-1?(I=t.viewTo-1,q=t.lineDiv.lastChild):(I=Re(t.view[M+1].line)-1,q=t.view[M+1].node.previousSibling),!x)return!1;for(var Z=e.doc.splitLines(Nu(e,x,q,S,I)),Q=Ot(e.doc,le(S,0),le(I,be(e.doc,I).text.length));Z.length>1&&Q.length>1;)if(Ae(Z)==Ae(Q))Z.pop(),Q.pop(),I--;else if(Z[0]==Q[0])Z.shift(),Q.shift(),S++;else break;for(var J=0,ne=0,ae=Z[0],ue=Q[0],pe=Math.min(ae.length,ue.length);J<pe&&ae.charCodeAt(J)==ue.charCodeAt(J);)++J;for(var _e=Ae(Z),ve=Ae(Q),me=Math.min(_e.length-(Z.length==1?J:0),ve.length-(Q.length==1?J:0));ne<me&&_e.charCodeAt(_e.length-ne-1)==ve.charCodeAt(ve.length-ne-1);)++ne;if(Z.length==1&&Q.length==1&&S==r.line)for(;J&&J>r.ch&&_e.charCodeAt(_e.length-ne-1)==ve.charCodeAt(ve.length-ne-1);)J--,ne++;Z[Z.length-1]=_e.slice(0,_e.length-ne).replace(/^\u200b+/,""),Z[0]=Z[0].slice(J).replace(/\u200b+$/,"");var ke=le(S,J),Le=le(I,Q.length?Ae(Q).length-ne:0);if(Z.length>1||Z[0]||H(ke,Le))return Vi(e.doc,Z,ke,Le,"+input"),!0},Pe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Pe.prototype.reset=function(){this.forceCompositionEnd()},Pe.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Pe.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Pe.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Gt(this.cm,function(){return Bt(e.cm)})},Pe.prototype.setUneditable=function(e){e.contentEditable="false"},Pe.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||st(this.cm,$o)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Pe.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Pe.prototype.onContextMenu=function(){},Pe.prototype.resetPosition=function(){},Pe.prototype.needsContentAttribute=!0;function ul(e,t){var i=mo(e,t.line);if(!i||i.hidden)return null;var r=be(e.doc,t.line),o=Fs(i,r,t.line),f=ut(r,e.doc.direction),S="left";if(f){var x=Ne(f,t.ch);S=x%2?"right":"left"}var M=js(o.map,t.ch,S);return M.offset=M.collapse=="right"?M.end:M.start,M}function Fu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tn(e,t){return t&&(e.bad=!0),e}function Nu(e,t,i,r,o){var f="",S=!1,x=e.doc.lineSeparator(),M=!1;function I(J){return function(ne){return ne.id==J}}function q(){S&&(f+=x,M&&(f+=x),S=M=!1)}function Z(J){J&&(q(),f+=J)}function Q(J){if(J.nodeType==1){var ne=J.getAttribute("cm-text");if(ne){Z(ne);return}var ae=J.getAttribute("cm-marker"),ue;if(ae){var pe=e.findMarks(le(r,0),le(o+1,0),I(+ae));pe.length&&(ue=pe[0].find(0))&&Z(Ot(e.doc,ue.from,ue.to).join(x));return}if(J.getAttribute("contenteditable")=="false")return;var _e=/^(pre|div|p|li|table|br)$/i.test(J.nodeName);if(!/^br$/i.test(J.nodeName)&&J.textContent.length==0)return;_e&&q();for(var ve=0;ve<J.childNodes.length;ve++)Q(J.childNodes[ve]);/^(pre|p)$/i.test(J.nodeName)&&(M=!0),_e&&(S=!0)}else J.nodeType==3&&Z(J.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Q(t),t!=i;)t=t.nextSibling,M=!1;return f}function oo(e,t,i){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[i],!r)return tn(e.clipPos(le(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var f=e.display.view[o];if(f.node==r)return Wu(f,t,i)}}function Wu(e,t,i){var r=e.text.firstChild,o=!1;if(!t||!N(r,t))return tn(le(Re(e.line),0),!0);if(t==r&&(o=!0,t=r.childNodes[i],i=0,!t)){var f=e.rest?Ae(e.rest):e.line;return tn(le(Re(f),f.text.length),o)}var S=t.nodeType==3?t:null,x=t;for(!S&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(S=t.firstChild,i&&(i=S.nodeValue.length));x.parentNode!=r;)x=x.parentNode;var M=e.measure,I=M.maps;function q(ue,pe,_e){for(var ve=-1;ve<(I?I.length:0);ve++)for(var me=ve<0?M.map:I[ve],ke=0;ke<me.length;ke+=3){var Le=me[ke+2];if(Le==ue||Le==pe){var Me=Re(ve<0?e.line:e.rest[ve]),He=me[ke]+_e;return(_e<0||Le!=ue)&&(He=me[ke+(_e?1:0)]),le(Me,He)}}}var Z=q(S,x,i);if(Z)return tn(Z,o);for(var Q=x.nextSibling,J=S?S.nodeValue.length-i:0;Q;Q=Q.nextSibling){if(Z=q(Q,Q.firstChild,0),Z)return tn(le(Z.line,Z.ch-J),o);J+=Q.textContent.length}for(var ne=x.previousSibling,ae=i;ne;ne=ne.previousSibling){if(Z=q(ne,ne.firstChild,-1),Z)return tn(le(Z.line,Z.ch+ae),o);ae+=ne.textContent.length}}var Ye=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null};Ye.prototype.init=function(e){var t=this,i=this,r=this.cm;this.createField(e);var o=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),s&&(o.style.width="0px"),we(o,"input",function(){m&&_>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),we(o,"paste",function(S){We(r,S)||nl(S,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())});function f(S){if(!We(r,S)){if(r.somethingSelected())no({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var x=sl(r);no({lineWise:!0,text:x.text}),S.type=="cut"?r.setSelections(x.ranges,null,G):(i.prevInput="",o.value=x.text.join(`
`),re(o))}else return;S.type=="cut"&&(r.state.cutIncoming=+new Date)}}we(o,"cut",f),we(o,"copy",f),we(e.scroller,"paste",function(S){if(!(Xr(e,S)||We(r,S))){if(!o.dispatchEvent){r.state.pasteIncoming=+new Date,i.focus();return}var x=new Event("paste");x.clipboardData=S.clipboardData,o.dispatchEvent(x)}}),we(e.lineSpace,"selectstart",function(S){Xr(e,S)||Xe(S)}),we(o,"compositionstart",function(){var S=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:S,range:r.markText(S,r.getCursor("to"),{className:"CodeMirror-composing"})}}),we(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ye.prototype.createField=function(e){this.wrapper=ll(),this.textarea=this.wrapper.firstChild},Ye.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ye.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=Js(e);if(e.options.moveInputWithCursor){var o=yr(e,i.sel.primary().head,"div"),f=t.wrapper.getBoundingClientRect(),S=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+S.top-f.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+S.left-f.left))}return r},Ye.prototype.showSelection=function(e){var t=this.cm,i=t.display;R(i.cursorDiv,e.cursors),R(i.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ye.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&re(this.textarea),m&&_>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",m&&_>=9&&(this.hasSelection=null))}},Ye.prototype.getField=function(){return this.textarea},Ye.prototype.supportsTouch=function(){return!1},Ye.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!l||z()!=this.textarea))try{this.textarea.focus()}catch{}},Ye.prototype.blur=function(){this.textarea.blur()},Ye.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ye.prototype.receivedFocus=function(){this.slowPoll()},Ye.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ye.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function i(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,i)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,i)},Ye.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||jr(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=i.value;if(o==r&&!t.somethingSelected())return!1;if(m&&_>=9&&this.hasSelection===o||a&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var f=o.charCodeAt(0);if(f==8203&&!r&&(r="\u200B"),f==8666)return this.reset(),this.cm.execCommand("undo")}for(var S=0,x=Math.min(r.length,o.length);S<x&&r.charCodeAt(S)==o.charCodeAt(S);)++S;return Gt(t,function(){$o(t,o.slice(S),r.length-S,null,e.composing?"*compose":null),o.length>1e3||o.indexOf(`
`)>-1?i.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ye.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ye.prototype.onKeyPress=function(){m&&_>=9&&(this.hasSelection=null),this.fastPoll()},Ye.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var f=Ci(i,e),S=r.scroller.scrollTop;if(!f||c)return;var x=i.options.resetSelectionOnContextMenu;x&&i.doc.sel.contains(f)==-1&&st(i,yt)(i.doc,oi(f),G);var M=o.style.cssText,I=t.wrapper.style.cssText,q=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",o.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-q.top-5)+"px; left: "+(e.clientX-q.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Z;v&&(Z=window.scrollY),r.input.focus(),v&&window.scrollTo(null,Z),r.input.reset(),i.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=J,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll);function Q(){if(o.selectionStart!=null){var ae=i.somethingSelected(),ue="\u200B"+(ae?o.value:"");o.value="\u21DA",o.value=ue,t.prevInput=ae?"":"\u200B",o.selectionStart=1,o.selectionEnd=ue.length,r.selForContextMenu=i.doc.sel}}function J(){if(t.contextMenuPending==J&&(t.contextMenuPending=!1,t.wrapper.style.cssText=I,o.style.cssText=M,m&&_<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=S),o.selectionStart!=null)){(!m||m&&_<9)&&Q();var ae=0,ue=function(){r.selForContextMenu==i.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&t.prevInput=="\u200B"?st(i,Ta)(i):ae++<10?r.detectingSelectAll=setTimeout(ue,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(ue,200)}}if(m&&_>=9&&Q(),O){tr(e);var ne=function(){Qe(window,"mouseup",ne),setTimeout(J,20)};we(window,"mouseup",ne)}else setTimeout(J,50)},Ye.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ye.prototype.setUneditable=function(){},Ye.prototype.needsContentAttribute=!1;function ju(e,t){if(t=t?he(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var i=z();t.autofocus=i==e||e.getAttribute("autofocus")!=null&&i==document.body}function r(){e.value=x.getValue()}var o;if(e.form&&(we(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var f=e.form;o=f.submit;try{var S=f.submit=function(){r(),f.submit=o,f.submit(),f.submit=S}}catch{}}t.finishInit=function(M){M.save=r,M.getTextArea=function(){return e},M.toTextArea=function(){M.toTextArea=isNaN,r(),e.parentNode.removeChild(M.getWrapperElement()),e.style.display="",e.form&&(Qe(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=o))}},e.style.display="none";var x=ze(function(M){return e.parentNode.insertBefore(M,e.nextSibling)},t);return x}function Uu(e){e.off=Qe,e.on=we,e.wheelEventPixels=Zc,e.Doc=Pt,e.splitLines=xr,e.countColumn=xe,e.findColumn=Ce,e.isWordChar=Sr,e.Pass=Y,e.signal=Ee,e.Line=ri,e.changeEnd=si,e.scrollbarModel=na,e.Pos=le,e.cmpPos=H,e.modes=gt,e.mimeModes=ht,e.resolveMode=hr,e.getMode=dr,e.modeExtensions=bt,e.extendMode=St,e.copyState=dt,e.startState=Tr,e.innerMode=Er,e.commands=On,e.keyMap=Zr,e.keyName=qa,e.isModifierKey=Ua,e.lookupKey=Ji,e.normalizeKeyMap=_u,e.StringStream=Ie,e.SharedTextMarker=Tn,e.TextMarker=li,e.LineWidget=En,e.e_preventDefault=Xe,e.e_stopPropagation=fr,e.e_stop=tr,e.addClass=V,e.contains=N,e.rmClass=A,e.keyNames=ci}Du(ze),Hu(ze);var zu="iter insert remove copy getEditor constructor".split(" ");for(var so in Pt.prototype)Pt.prototype.hasOwnProperty(so)&&ee(zu,so)<0&&(ze.prototype[so]=function(e){return function(){return e.apply(this.doc,arguments)}}(Pt.prototype[so]));return At(Pt),ze.inputStyles={textarea:Ye,contenteditable:Pe},ze.defineMode=function(e){!ze.defaults.mode&&e!="null"&&(ze.defaults.mode=e),zr.apply(this,arguments)},ze.defineMIME=Ut,ze.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ze.defineMIME("text/plain","null"),ze.defineExtension=function(e,t){ze.prototype[e]=t},ze.defineDocExtension=function(e,t){Pt.prototype[e]=t},ze.fromTextArea=ju,Uu(ze),ze.version="5.65.2",ze})});var as=Qt((pl,vl)=>{(function($){typeof pl=="object"&&typeof vl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){"use strict";$.defineMode("javascript",function(F,D){var h=F.indentUnit,L=D.statementIndent,y=D.jsonld,m=D.json||y,_=D.trackScope!==!1,v=D.typescript,T=D.wordCharacters||/[\w$\xa1-\uffff]/,w=function(){function H(Ze){return{type:Ze,style:"keyword"}}var X=H("keyword a"),oe=H("keyword b"),ce=H("keyword c"),Te=H("keyword d"),Oe=H("operator"),ge={type:"atom",style:"atom"};return{if:H("if"),while:X,with:X,else:oe,do:oe,try:oe,finally:oe,return:Te,break:Te,continue:Te,new:H("new"),delete:ce,void:ce,throw:ce,debugger:H("debugger"),var:H("var"),const:H("var"),let:H("var"),function:H("function"),catch:H("catch"),for:H("for"),switch:H("switch"),case:H("case"),default:H("default"),in:Oe,typeof:Oe,instanceof:Oe,true:ge,false:ge,null:ge,undefined:ge,NaN:ge,Infinity:ge,this:H("this"),class:H("class"),super:H("atom"),yield:ce,export:H("export"),import:H("import"),extends:ce,await:ce}}(),c=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function C(H){for(var X=!1,oe,ce=!1;(oe=H.next())!=null;){if(!X){if(oe=="/"&&!ce)return;oe=="["?ce=!0:ce&&oe=="]"&&(ce=!1)}X=!X&&oe=="\\"}}var d,s;function n(H,X,oe){return d=H,s=oe,X}function l(H,X){var oe=H.next();if(oe=='"'||oe=="'")return X.tokenize=a(oe),X.tokenize(H,X);if(oe=="."&&H.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return n("number","number");if(oe=="."&&H.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(oe))return n(oe);if(oe=="="&&H.eat(">"))return n("=>","operator");if(oe=="0"&&H.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return n("number","number");if(/\d/.test(oe))return H.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),n("number","number");if(oe=="/")return H.eat("*")?(X.tokenize=u,u(H,X)):H.eat("/")?(H.skipToEnd(),n("comment","comment")):le(H,X,1)?(C(H),H.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),n("regexp","string-2")):(H.eat("="),n("operator","operator",H.current()));if(oe=="`")return X.tokenize=g,g(H,X);if(oe=="#"&&H.peek()=="!")return H.skipToEnd(),n("meta","meta");if(oe=="#"&&H.eatWhile(T))return n("variable","property");if(oe=="<"&&H.match("!--")||oe=="-"&&H.match("->")&&!/\S/.test(H.string.slice(0,H.start)))return H.skipToEnd(),n("comment","comment");if(c.test(oe))return(oe!=">"||!X.lexical||X.lexical.type!=">")&&(H.eat("=")?(oe=="!"||oe=="=")&&H.eat("="):/[<>*+\-|&?]/.test(oe)&&(H.eat(oe),oe==">"&&H.eat(oe))),oe=="?"&&H.eat(".")?n("."):n("operator","operator",H.current());if(T.test(oe)){H.eatWhile(T);var ce=H.current();if(X.lastType!="."){if(w.propertyIsEnumerable(ce)){var Te=w[ce];return n(Te.type,Te.style,ce)}if(ce=="async"&&H.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return n("async","keyword",ce)}return n("variable","variable",ce)}}function a(H){return function(X,oe){var ce=!1,Te;if(y&&X.peek()=="@"&&X.match(p))return oe.tokenize=l,n("jsonld-keyword","meta");for(;(Te=X.next())!=null&&!(Te==H&&!ce);)ce=!ce&&Te=="\\";return ce||(oe.tokenize=l),n("string","string")}}function u(H,X){for(var oe=!1,ce;ce=H.next();){if(ce=="/"&&oe){X.tokenize=l;break}oe=ce=="*"}return n("comment","comment")}function g(H,X){for(var oe=!1,ce;(ce=H.next())!=null;){if(!oe&&(ce=="`"||ce=="$"&&H.eat("{"))){X.tokenize=l;break}oe=!oe&&ce=="\\"}return n("quasi","string-2",H.current())}var b="([{}])";function k(H,X){X.fatArrowAt&&(X.fatArrowAt=null);var oe=H.string.indexOf("=>",H.start);if(!(oe<0)){if(v){var ce=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(H.string.slice(H.start,oe));ce&&(oe=ce.index)}for(var Te=0,Oe=!1,ge=oe-1;ge>=0;--ge){var Ze=H.string.charAt(ge),_t=b.indexOf(Ze);if(_t>=0&&_t<3){if(!Te){++ge;break}if(--Te==0){Ze=="("&&(Oe=!0);break}}else if(_t>=3&&_t<6)++Te;else if(T.test(Ze))Oe=!0;else if(/["'\/`]/.test(Ze))for(;;--ge){if(ge==0)return;var Or=H.string.charAt(ge-1);if(Or==Ze&&H.string.charAt(ge-2)!="\\"){ge--;break}}else if(Oe&&!Te){++ge;break}}Oe&&!Te&&(X.fatArrowAt=ge)}}var O={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function E(H,X,oe,ce,Te,Oe){this.indented=H,this.column=X,this.type=oe,this.prev=Te,this.info=Oe,ce!=null&&(this.align=ce)}function A(H,X){if(!_)return!1;for(var oe=H.localVars;oe;oe=oe.next)if(oe.name==X)return!0;for(var ce=H.context;ce;ce=ce.prev)for(var oe=ce.vars;oe;oe=oe.next)if(oe.name==X)return!0}function W(H,X,oe,ce,Te){var Oe=H.cc;for(R.state=H,R.stream=Te,R.marked=null,R.cc=Oe,R.style=X,H.lexical.hasOwnProperty("align")||(H.lexical.align=!0);;){var ge=Oe.length?Oe.pop():m?de:G;if(ge(oe,ce)){for(;Oe.length&&Oe[Oe.length-1].lex;)Oe.pop()();return R.marked?R.marked:oe=="variable"&&A(H,ce)?"variable-2":X}}}var R={state:null,column:null,marked:null,cc:null};function j(){for(var H=arguments.length-1;H>=0;H--)R.cc.push(arguments[H])}function B(){return j.apply(null,arguments),!0}function P(H,X){for(var oe=X;oe;oe=oe.next)if(oe.name==H)return!0;return!1}function N(H){var X=R.state;if(R.marked="def",!!_){if(X.context){if(X.lexical.info=="var"&&X.context&&X.context.block){var oe=z(H,X.context);if(oe!=null){X.context=oe;return}}else if(!P(H,X.localVars)){X.localVars=new re(H,X.localVars);return}}D.globalVars&&!P(H,X.globalVars)&&(X.globalVars=new re(H,X.globalVars))}}function z(H,X){if(X)if(X.block){var oe=z(H,X.prev);return oe?oe==X.prev?X:new te(oe,X.vars,!0):null}else return P(H,X.vars)?X:new te(X.prev,new re(H,X.vars),!1);else return null}function V(H){return H=="public"||H=="private"||H=="protected"||H=="abstract"||H=="readonly"}function te(H,X,oe){this.prev=H,this.vars=X,this.block=oe}function re(H,X){this.name=H,this.next=X}var fe=new re("this",new re("arguments",null));function he(){R.state.context=new te(R.state.context,R.state.localVars,!1),R.state.localVars=fe}function xe(){R.state.context=new te(R.state.context,R.state.localVars,!0),R.state.localVars=null}he.lex=xe.lex=!0;function U(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}U.lex=!0;function ee(H,X){var oe=function(){var ce=R.state,Te=ce.indented;if(ce.lexical.type=="stat")Te=ce.lexical.indented;else for(var Oe=ce.lexical;Oe&&Oe.type==")"&&Oe.align;Oe=Oe.prev)Te=Oe.indented;ce.lexical=new E(Te,R.stream.column(),H,null,ce.lexical,X)};return oe.lex=!0,oe}function K(){var H=R.state;H.lexical.prev&&(H.lexical.type==")"&&(H.indented=H.lexical.indented),H.lexical=H.lexical.prev)}K.lex=!0;function Y(H){function X(oe){return oe==H?B():H==";"||oe=="}"||oe==")"||oe=="]"?j():B(X)}return X}function G(H,X){return H=="var"?B(ee("vardef",X),wr,Y(";"),K):H=="keyword a"?B(ee("form"),De,G,K):H=="keyword b"?B(ee("form"),G,K):H=="keyword d"?R.stream.match(/^\s*$/,!1)?B():B(ee("stat"),Ae,Y(";"),K):H=="debugger"?B(Y(";")):H=="{"?B(ee("}"),xe,ut,K,U):H==";"?B():H=="if"?(R.state.lexical.info=="else"&&R.state.cc[R.state.cc.length-1]==K&&R.state.cc.pop()(),B(ee("form"),De,G,K,jr)):H=="function"?B(gt):H=="for"?B(ee("form"),xe,Ur,G,U,K):H=="class"||v&&X=="interface"?(R.marked="keyword",B(ee("form",H=="class"?H:X),dr,K)):H=="variable"?v&&X=="declare"?(R.marked="keyword",B(G)):v&&(X=="module"||X=="enum"||X=="type")&&R.stream.match(/^\s*\w/,!1)?(R.marked="keyword",X=="enum"?B(Rt):X=="type"?B(zr,Y("operator"),Ee,Y(";")):B(ee("form"),et,Y("{"),ee("}"),ut,K,K)):v&&X=="namespace"?(R.marked="keyword",B(ee("form"),de,G,K)):v&&X=="abstract"?(R.marked="keyword",B(G)):B(ee("stat"),Fr):H=="switch"?B(ee("form"),De,Y("{"),ee("}","switch"),xe,ut,K,K,U):H=="case"?B(de,Y(":")):H=="default"?B(Y(":")):H=="catch"?B(ee("form"),he,Se,G,K,U):H=="export"?B(ee("stat"),Er,K):H=="import"?B(ee("stat"),Ie,K):H=="async"?B(G):X=="@"?B(de,G):j(ee("stat"),de,Y(";"),K)}function Se(H){if(H=="(")return B(Ut,Y(")"))}function de(H,X){return Fe(H,X,!1)}function Ce(H,X){return Fe(H,X,!0)}function De(H){return H!="("?j():B(ee(")"),Ae,Y(")"),K)}function Fe(H,X,oe){if(R.state.fatArrowAt==R.stream.start){var ce=oe?Sr:ar;if(H=="(")return B(he,ee(")"),Ne(Ut,")"),K,Y("=>"),ce,U);if(H=="variable")return j(he,et,Y("=>"),ce,U)}var Te=oe?je:ye;return O.hasOwnProperty(H)?B(Te):H=="function"?B(gt,Te):H=="class"||v&&X=="interface"?(R.marked="keyword",B(ee("form"),hr,K)):H=="keyword c"||H=="async"?B(oe?Ce:de):H=="("?B(ee(")"),Ae,Y(")"),K,Te):H=="operator"||H=="spread"?B(oe?Ce:de):H=="["?B(ee("]"),Re,K,Te):H=="{"?lr(Wt,"}",null,Te):H=="quasi"?j(Je,Te):H=="new"?B(Cr(oe)):B()}function Ae(H){return H.match(/[;\}\)\],]/)?j():j(de)}function ye(H,X){return H==","?B(Ae):je(H,X,!1)}function je(H,X,oe){var ce=oe==!1?ye:je,Te=oe==!1?de:Ce;if(H=="=>")return B(he,oe?Sr:ar,U);if(H=="operator")return/\+\+|--/.test(X)||v&&X=="!"?B(ce):v&&X=="<"&&R.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?B(ee(">"),Ne(Ee,">"),K,ce):X=="?"?B(de,Y(":"),Te):B(Te);if(H=="quasi")return j(Je,ce);if(H!=";"){if(H=="(")return lr(Ce,")","call",ce);if(H==".")return B(Qr,ce);if(H=="[")return B(ee("]"),Ae,Y("]"),K,ce);if(v&&X=="as")return R.marked="keyword",B(Ee,ce);if(H=="regexp")return R.state.lastType=R.marked="operator",R.stream.backUp(R.stream.pos-R.stream.start-1),B(Te)}}function Je(H,X){return H!="quasi"?j():X.slice(X.length-2)!="${"?B(Je):B(Ae,Tt)}function Tt(H){if(H=="}")return R.marked="string-2",R.state.tokenize=g,B(Je)}function ar(H){return k(R.stream,R.state),j(H=="{"?G:de)}function Sr(H){return k(R.stream,R.state),j(H=="{"?G:Ce)}function Cr(H){return function(X){return X=="."?B(H?di:Jr):X=="variable"&&v?B(tr,H?je:ye):j(H?Ce:de)}}function Jr(H,X){if(X=="target")return R.marked="keyword",B(ye)}function di(H,X){if(X=="target")return R.marked="keyword",B(je)}function Fr(H){return H==":"?B(K,G):j(ye,Y(";"),K)}function Qr(H){if(H=="variable")return R.marked="property",B()}function Wt(H,X){if(H=="async")return R.marked="property",B(Wt);if(H=="variable"||R.style=="keyword"){if(R.marked="property",X=="get"||X=="set")return B(pi);var oe;return v&&R.state.fatArrowAt==R.stream.start&&(oe=R.stream.match(/^\s*:\s*/,!1))&&(R.state.fatArrowAt=R.stream.pos+oe[0].length),B(vt)}else{if(H=="number"||H=="string")return R.marked=y?"property":R.style+" property",B(vt);if(H=="jsonld-keyword")return B(vt);if(v&&V(X))return R.marked="keyword",B(Wt);if(H=="[")return B(de,jt,Y("]"),vt);if(H=="spread")return B(Ce,vt);if(X=="*")return R.marked="keyword",B(Wt);if(H==":")return j(vt)}}function pi(H){return H!="variable"?j(vt):(R.marked="property",B(gt))}function vt(H){if(H==":")return B(Ce);if(H=="(")return j(gt)}function Ne(H,X,oe){function ce(Te,Oe){if(oe?oe.indexOf(Te)>-1:Te==","){var ge=R.state.lexical;return ge.info=="call"&&(ge.pos=(ge.pos||0)+1),B(function(Ze,_t){return Ze==X||_t==X?j():j(H)},ce)}return Te==X||Oe==X?B():oe&&oe.indexOf(";")>-1?j(H):B(Y(X))}return function(Te,Oe){return Te==X||Oe==X?B():j(H,ce)}}function lr(H,X,oe){for(var ce=3;ce<arguments.length;ce++)R.cc.push(arguments[ce]);return B(ee(X,oe),Ne(H,X),K)}function ut(H){return H=="}"?B():j(G,ut)}function jt(H,X){if(v){if(H==":")return B(Ee);if(X=="?")return B(jt)}}function we(H,X){if(v&&(H==":"||X=="in"))return B(Ee)}function cr(H){if(v&&H==":")return R.stream.match(/^\s*\w+\s+is\b/,!1)?B(de,Qe,Ee):B(Ee)}function Qe(H,X){if(X=="is")return R.marked="keyword",B()}function Ee(H,X){if(X=="keyof"||X=="typeof"||X=="infer"||X=="readonly")return R.marked="keyword",B(X=="typeof"?Ce:Ee);if(H=="variable"||X=="void")return R.marked="type",B(ft);if(X=="|"||X=="&")return B(Ee);if(H=="string"||H=="number"||H=="atom")return B(ft);if(H=="[")return B(ee("]"),Ne(Ee,"]",","),K,ft);if(H=="{")return B(ee("}"),ur,K,ft);if(H=="(")return B(Ne(fr,")"),We,ft);if(H=="<")return B(Ne(Ee,">"),Ee);if(H=="quasi")return j(At,ft)}function We(H){if(H=="=>")return B(Ee)}function ur(H){return H.match(/[\}\)\]]/)?B():H==","||H==";"?B(ur):j(Ke,ur)}function Ke(H,X){if(H=="variable"||R.style=="keyword")return R.marked="property",B(Ke);if(X=="?"||H=="number"||H=="string")return B(Ke);if(H==":")return B(Ee);if(H=="[")return B(Y("variable"),we,Y("]"),Ke);if(H=="(")return j(ht,Ke);if(!H.match(/[;\}\)\],]/))return B()}function At(H,X){return H!="quasi"?j():X.slice(X.length-2)!="${"?B(At):B(Ee,Xe)}function Xe(H){if(H=="}")return R.marked="string-2",R.state.tokenize=g,B(At)}function fr(H,X){return H=="variable"&&R.stream.match(/^\s*[?:]/,!1)||X=="?"?B(fr):H==":"?B(Ee):H=="spread"?B(fr):j(Ee)}function ft(H,X){if(X=="<")return B(ee(">"),Ne(Ee,">"),K,ft);if(X=="|"||H=="."||X=="&")return B(Ee);if(H=="[")return B(Ee,Y("]"),ft);if(X=="extends"||X=="implements")return R.marked="keyword",B(Ee);if(X=="?")return B(Ee,Y(":"),Ee)}function tr(H,X){if(X=="<")return B(ee(">"),Ne(Ee,">"),K,ft)}function Yt(){return j(Ee,Nr)}function Nr(H,X){if(X=="=")return B(Ee)}function wr(H,X){return X=="enum"?(R.marked="keyword",B(Rt)):j(et,jt,Mt,xr)}function et(H,X){if(v&&V(X))return R.marked="keyword",B(et);if(H=="variable")return N(X),B();if(H=="spread")return B(et);if(H=="[")return lr(Lr,"]");if(H=="{")return lr(Wr,"}")}function Wr(H,X){return H=="variable"&&!R.stream.match(/^\s*:/,!1)?(N(X),B(Mt)):(H=="variable"&&(R.marked="property"),H=="spread"?B(et):H=="}"?j():H=="["?B(de,Y("]"),Y(":"),Wr):B(Y(":"),et,Mt))}function Lr(){return j(et,Mt)}function Mt(H,X){if(X=="=")return B(Ce)}function xr(H){if(H==",")return B(wr)}function jr(H,X){if(H=="keyword b"&&X=="else")return B(ee("form","else"),G,K)}function Ur(H,X){if(X=="await")return B(Ur);if(H=="(")return B(ee(")"),kr,K)}function kr(H){return H=="var"?B(wr,Zt):H=="variable"?B(Zt):j(Zt)}function Zt(H,X){return H==")"?B():H==";"?B(Zt):X=="in"||X=="of"?(R.marked="keyword",B(de,Zt)):j(de,Zt)}function gt(H,X){if(X=="*")return R.marked="keyword",B(gt);if(H=="variable")return N(X),B(gt);if(H=="(")return B(he,ee(")"),Ne(Ut,")"),K,cr,G,U);if(v&&X=="<")return B(ee(">"),Ne(Yt,">"),K,gt)}function ht(H,X){if(X=="*")return R.marked="keyword",B(ht);if(H=="variable")return N(X),B(ht);if(H=="(")return B(he,ee(")"),Ne(Ut,")"),K,cr,U);if(v&&X=="<")return B(ee(">"),Ne(Yt,">"),K,ht)}function zr(H,X){if(H=="keyword"||H=="variable")return R.marked="type",B(zr);if(X=="<")return B(ee(">"),Ne(Yt,">"),K)}function Ut(H,X){return X=="@"&&B(de,Ut),H=="spread"?B(Ut):v&&V(X)?(R.marked="keyword",B(Ut)):v&&H=="this"?B(jt,Mt):j(et,jt,Mt)}function hr(H,X){return H=="variable"?dr(H,X):bt(H,X)}function dr(H,X){if(H=="variable")return N(X),B(bt)}function bt(H,X){if(X=="<")return B(ee(">"),Ne(Yt,">"),K,bt);if(X=="extends"||X=="implements"||v&&H==",")return X=="implements"&&(R.marked="keyword"),B(v?Ee:de,bt);if(H=="{")return B(ee("}"),St,K)}function St(H,X){if(H=="async"||H=="variable"&&(X=="static"||X=="get"||X=="set"||v&&V(X))&&R.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return R.marked="keyword",B(St);if(H=="variable"||R.style=="keyword")return R.marked="property",B(dt,St);if(H=="number"||H=="string")return B(dt,St);if(H=="[")return B(de,jt,Y("]"),dt,St);if(X=="*")return R.marked="keyword",B(St);if(v&&H=="(")return j(ht,St);if(H==";"||H==",")return B(St);if(H=="}")return B();if(X=="@")return B(de,St)}function dt(H,X){if(X=="!"||X=="?")return B(dt);if(H==":")return B(Ee,Mt);if(X=="=")return B(Ce);var oe=R.state.lexical.prev,ce=oe&&oe.info=="interface";return j(ce?ht:gt)}function Er(H,X){return X=="*"?(R.marked="keyword",B(it,Y(";"))):X=="default"?(R.marked="keyword",B(de,Y(";"))):H=="{"?B(Ne(Tr,"}"),it,Y(";")):j(G)}function Tr(H,X){if(X=="as")return R.marked="keyword",B(Y("variable"));if(H=="variable")return j(Ce,Tr)}function Ie(H){return H=="string"?B():H=="("?j(de):H=="."?j(ye):j(be,Ot,it)}function be(H,X){return H=="{"?lr(be,"}"):(H=="variable"&&N(X),X=="*"&&(R.marked="keyword"),B(Ar))}function Ot(H){if(H==",")return B(be,Ot)}function Ar(H,X){if(X=="as")return R.marked="keyword",B(be)}function it(H,X){if(X=="from")return R.marked="keyword",B(de)}function Re(H){return H=="]"?B():j(Ne(Ce,"]"))}function Rt(){return j(ee("form"),et,Y("{"),ee("}"),Ne(rr,"}"),K,K)}function rr(){return j(et,Mt)}function Mr(H,X){return H.lastType=="operator"||H.lastType==","||c.test(X.charAt(0))||/[,.]/.test(X.charAt(0))}function le(H,X,oe){return X.tokenize==l&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(X.lastType)||X.lastType=="quasi"&&/\{\s*$/.test(H.string.slice(0,H.pos-(oe||0)))}return{startState:function(H){var X={tokenize:l,lastType:"sof",cc:[],lexical:new E((H||0)-h,0,"block",!1),localVars:D.localVars,context:D.localVars&&new te(null,null,!1),indented:H||0};return D.globalVars&&typeof D.globalVars=="object"&&(X.globalVars=D.globalVars),X},token:function(H,X){if(H.sol()&&(X.lexical.hasOwnProperty("align")||(X.lexical.align=!1),X.indented=H.indentation(),k(H,X)),X.tokenize!=u&&H.eatSpace())return null;var oe=X.tokenize(H,X);return d=="comment"?oe:(X.lastType=d=="operator"&&(s=="++"||s=="--")?"incdec":d,W(X,oe,d,s,H))},indent:function(H,X){if(H.tokenize==u||H.tokenize==g)return $.Pass;if(H.tokenize!=l)return 0;var oe=X&&X.charAt(0),ce=H.lexical,Te;if(!/^\s*else\b/.test(X))for(var Oe=H.cc.length-1;Oe>=0;--Oe){var ge=H.cc[Oe];if(ge==K)ce=ce.prev;else if(ge!=jr&&ge!=U)break}for(;(ce.type=="stat"||ce.type=="form")&&(oe=="}"||(Te=H.cc[H.cc.length-1])&&(Te==ye||Te==je)&&!/^[,\.=+\-*:?[\(]/.test(X));)ce=ce.prev;L&&ce.type==")"&&ce.prev.type=="stat"&&(ce=ce.prev);var Ze=ce.type,_t=oe==Ze;return Ze=="vardef"?ce.indented+(H.lastType=="operator"||H.lastType==","?ce.info.length+1:0):Ze=="form"&&oe=="{"?ce.indented:Ze=="form"?ce.indented+h:Ze=="stat"?ce.indented+(Mr(H,X)?L||h:0):ce.info=="switch"&&!_t&&D.doubleIndentSwitch!=!1?ce.indented+(/^(?:case|default)\b/.test(X)?h:2*h):ce.align?ce.column+(_t?0:1):ce.indented+(_t?0:h)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:y,jsonMode:m,expressionAllowed:le,skipExpression:function(H){W(H,"atom","atom","true",new $.StringStream("",2,null))}}}),$.registerHelper("wordChars","javascript",/[\w$]/),$.defineMIME("text/javascript","javascript"),$.defineMIME("text/ecmascript","javascript"),$.defineMIME("application/javascript","javascript"),$.defineMIME("application/x-javascript","javascript"),$.defineMIME("application/ecmascript","javascript"),$.defineMIME("application/json",{name:"javascript",json:!0}),$.defineMIME("application/x-json",{name:"javascript",json:!0}),$.defineMIME("application/manifest+json",{name:"javascript",json:!0}),$.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),$.defineMIME("text/typescript",{name:"javascript",typescript:!0}),$.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var cs=Qt((_l,yl)=>{(function($){typeof _l=="object"&&typeof yl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){"use strict";$.defineMode("perl",function(){var y={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},m="string-2",_=/[goseximacplud]/;function v(c,p,C,d,s){return p.chain=null,p.style=null,p.tail=null,p.tokenize=function(n,l){for(var a=!1,u,g=0;u=n.next();){if(u===C[g]&&!a)return C[++g]!==void 0?(l.chain=C[g],l.style=d,l.tail=s):s&&n.eatWhile(s),l.tokenize=w,d;a=!a&&u=="\\"}return d},p.tokenize(c,p)}function T(c,p,C){return p.tokenize=function(d,s){return d.string==C&&(s.tokenize=w),d.skipToEnd(),"string"},p.tokenize(c,p)}function w(c,p){if(c.eatSpace())return null;if(p.chain)return v(c,p,p.chain,p.style,p.tail);if(c.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(c.match(/^<<(?=[_a-zA-Z])/))return c.eatWhile(/\w/),T(c,p,c.current().substr(2));if(c.sol()&&c.match(/^\=item(?!\w)/))return T(c,p,"=cut");var C=c.next();if(C=='"'||C=="'"){if(D(c,3)=="<<"+C){var d=c.pos;c.eatWhile(/\w/);var s=c.current().substr(1);if(s&&c.eat(C))return T(c,p,s);c.pos=d}return v(c,p,[C],"string")}if(C=="q"){var n=F(c,-2);if(!(n&&/\w/.test(n))){if(n=F(c,0),n=="x"){if(n=F(c,1),n=="(")return L(c,2),v(c,p,[")"],m,_);if(n=="[")return L(c,2),v(c,p,["]"],m,_);if(n=="{")return L(c,2),v(c,p,["}"],m,_);if(n=="<")return L(c,2),v(c,p,[">"],m,_);if(/[\^'"!~\/]/.test(n))return L(c,1),v(c,p,[c.eat(n)],m,_)}else if(n=="q"){if(n=F(c,1),n=="(")return L(c,2),v(c,p,[")"],"string");if(n=="[")return L(c,2),v(c,p,["]"],"string");if(n=="{")return L(c,2),v(c,p,["}"],"string");if(n=="<")return L(c,2),v(c,p,[">"],"string");if(/[\^'"!~\/]/.test(n))return L(c,1),v(c,p,[c.eat(n)],"string")}else if(n=="w"){if(n=F(c,1),n=="(")return L(c,2),v(c,p,[")"],"bracket");if(n=="[")return L(c,2),v(c,p,["]"],"bracket");if(n=="{")return L(c,2),v(c,p,["}"],"bracket");if(n=="<")return L(c,2),v(c,p,[">"],"bracket");if(/[\^'"!~\/]/.test(n))return L(c,1),v(c,p,[c.eat(n)],"bracket")}else if(n=="r"){if(n=F(c,1),n=="(")return L(c,2),v(c,p,[")"],m,_);if(n=="[")return L(c,2),v(c,p,["]"],m,_);if(n=="{")return L(c,2),v(c,p,["}"],m,_);if(n=="<")return L(c,2),v(c,p,[">"],m,_);if(/[\^'"!~\/]/.test(n))return L(c,1),v(c,p,[c.eat(n)],m,_)}else if(/[\^'"!~\/(\[{<]/.test(n)){if(n=="(")return L(c,1),v(c,p,[")"],"string");if(n=="[")return L(c,1),v(c,p,["]"],"string");if(n=="{")return L(c,1),v(c,p,["}"],"string");if(n=="<")return L(c,1),v(c,p,[">"],"string");if(/[\^'"!~\/]/.test(n))return v(c,p,[c.eat(n)],"string")}}}if(C=="m"){var n=F(c,-2);if(!(n&&/\w/.test(n))&&(n=c.eat(/[(\[{<\^'"!~\/]/),n)){if(/[\^'"!~\/]/.test(n))return v(c,p,[n],m,_);if(n=="(")return v(c,p,[")"],m,_);if(n=="[")return v(c,p,["]"],m,_);if(n=="{")return v(c,p,["}"],m,_);if(n=="<")return v(c,p,[">"],m,_)}}if(C=="s"){var n=/[\/>\]})\w]/.test(F(c,-2));if(!n&&(n=c.eat(/[(\[{<\^'"!~\/]/),n))return n=="["?v(c,p,["]","]"],m,_):n=="{"?v(c,p,["}","}"],m,_):n=="<"?v(c,p,[">",">"],m,_):n=="("?v(c,p,[")",")"],m,_):v(c,p,[n,n],m,_)}if(C=="y"){var n=/[\/>\]})\w]/.test(F(c,-2));if(!n&&(n=c.eat(/[(\[{<\^'"!~\/]/),n))return n=="["?v(c,p,["]","]"],m,_):n=="{"?v(c,p,["}","}"],m,_):n=="<"?v(c,p,[">",">"],m,_):n=="("?v(c,p,[")",")"],m,_):v(c,p,[n,n],m,_)}if(C=="t"){var n=/[\/>\]})\w]/.test(F(c,-2));if(!n&&(n=c.eat("r"),n&&(n=c.eat(/[(\[{<\^'"!~\/]/),n)))return n=="["?v(c,p,["]","]"],m,_):n=="{"?v(c,p,["}","}"],m,_):n=="<"?v(c,p,[">",">"],m,_):n=="("?v(c,p,[")",")"],m,_):v(c,p,[n,n],m,_)}if(C=="`")return v(c,p,[C],"variable-2");if(C=="/")return/~\s*$/.test(D(c))?v(c,p,[C],m,_):"operator";if(C=="$"){var d=c.pos;if(c.eatWhile(/\d/)||c.eat("{")&&c.eatWhile(/\d/)&&c.eat("}"))return"variable-2";c.pos=d}if(/[$@%]/.test(C)){var d=c.pos;if(c.eat("^")&&c.eat(/[A-Z]/)||!/[@$%&]/.test(F(c,-2))&&c.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var n=c.current();if(y[n])return"variable-2"}c.pos=d}if(/[$@%&]/.test(C)&&(c.eatWhile(/[\w$]/)||c.eat("{")&&c.eatWhile(/[\w$]/)&&c.eat("}"))){var n=c.current();return y[n]?"variable-2":"variable"}if(C=="#"&&F(c,-2)!="$")return c.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(C)){var d=c.pos;if(c.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),y[c.current()])return"operator";c.pos=d}if(C=="_"&&c.pos==1){if(h(c,6)=="_END__")return v(c,p,["\0"],"comment");if(h(c,7)=="_DATA__")return v(c,p,["\0"],"variable-2");if(h(c,7)=="_C__")return v(c,p,["\0"],"string")}if(/\w/.test(C)){var d=c.pos;if(F(c,-2)=="{"&&(F(c,0)=="}"||c.eatWhile(/\w/)&&F(c,0)=="}"))return"string";c.pos=d}if(/[A-Z]/.test(C)){var l=F(c,-2),d=c.pos;if(c.eatWhile(/[A-Z_]/),/[\da-z]/.test(F(c,0)))c.pos=d;else{var n=y[c.current()];return n?(n[1]&&(n=n[0]),l!=":"?n==1?"keyword":n==2?"def":n==3?"atom":n==4?"operator":n==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(C)){var l=F(c,-2);c.eatWhile(/\w/);var n=y[c.current()];return n?(n[1]&&(n=n[0]),l!=":"?n==1?"keyword":n==2?"def":n==3?"atom":n==4?"operator":n==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:w,chain:null,style:null,tail:null}},token:function(c,p){return(p.tokenize||w)(c,p)},lineComment:"#"}}),$.registerHelper("wordChars","perl",/[\w$]/),$.defineMIME("text/x-perl","perl");function F(y,m){return y.string.charAt(y.pos+(m||0))}function D(y,m){if(m){var _=y.pos-m;return y.string.substr(_>=0?_:0,m)}else return y.string.substr(0,y.pos-1)}function h(y,m){var _=y.string.length,v=_-y.pos+1;return y.string.substr(y.pos,m&&m<_?m:v)}function L(y,m){var _=y.pos+m,v;_<=0?y.pos=0:_>=(v=y.string.length-1)?y.pos=v:y.pos=_}})});var wl=Qt($r=>{"use strict";var ao=$r&&$r.__assign||function(){return ao=Object.assign||function($){for(var F,D=1,h=arguments.length;D<h;D++){F=arguments[D];for(var L in F)Object.prototype.hasOwnProperty.call(F,L)&&($[L]=F[L])}return $},ao.apply(this,arguments)},bl=$r&&$r.__spreadArray||function($,F,D){if(D||arguments.length===2)for(var h=0,L=F.length,y;h<L;h++)(y||!(h in F))&&(y||(y=Array.prototype.slice.call(F,0,h)),y[h]=F[h]);return $.concat(y||Array.prototype.slice.call(F))};Object.defineProperty($r,"__esModule",{value:!0});$r.Melba=void 0;var Sl=function(){var $=document.createElement("a");return["matches","msMatchesSelector","webkitMatchesSelector"].filter(function(F){return F in $})}()[0],Vu=function(){var $=document.createElement("a");try{return $[Sl](":focus-within"),":focus-within, :focus, :hover"}catch{return":focus, :hover"}}(),Cl=function(){function $(F){var D=this,h=F.animation,L=h===void 0?$.defaults.animation:h,y=F.animationDuration,m=y===void 0?$.defaults.animationDuration:y,_=F.closeLabel,v=_===void 0?$.defaults.closeLabel:_,T=F.container,w=T===void 0?null:T,c=F.containerClass,p=c===void 0?$.defaults.containerClass:c,C=F.containerElement,d=C===void 0?$.defaults.containerElement:C,s=F.content,n=F.events,l=n===void 0?{}:n,a=F.hide,u=a===void 0?$.defaults.hide:a,g=F.root,b=g===void 0?$.defaults.root:g,k=F.toastClass,O=k===void 0?$.defaults.toastClass:k,E=F.toastElement,A=E===void 0?$.defaults.toastElement:E,W=F.toastEvents,R=W===void 0?bl([],$.defaults.toastEvents,!0):W,j=F.toastHideClass,B=j===void 0?$.defaults.toastHideClass:j,P=F.toastShowClass,N=P===void 0?$.defaults.toastShowClass:P,z=F.type,V=z===void 0?$.defaults.toastType:z;if(!s)throw new TypeError("'content' cannot be empty.");if(this.animation=L,this.events=l,this.toastHideClass=B,this.toastShowClass=N,w||(w=this.getContainer({containerClass:p,containerElement:d,root:b})),this.container=w,u===!0&&(u=$.defaults.hideDelay),u!==!1&&u<100&&(u*=1e3),this.hideDelay=u,m<100&&(m*=1e3),this.build({closeLabel:v,content:s,toastClass:O,toastElement:A,toastEvents:R,type:V}),this.hideDelay!==!1&&this.autohide({animationDuration:m}),this.animation){window.requestAnimationFrame(function(){return D.show()});return}this.show()}return $.prototype.autohide=function(F){var D=this,h=F.animationDuration;if(!!this.hideDelay)return window.setTimeout(function(){return D.hide()},this.hideDelay+(this.animation?h:0))},$.prototype.build=function(F){var D=this,h=F.closeLabel,L=F.content,y=F.toastClass,m=F.toastElement,_=F.toastEvents,v=F.type;this.element=document.createElement(m),this.element.setAttribute("title",L),this.element.setAttribute("role","status"),this.element.setAttribute("tabindex","0"),this.element.classList.add(y),this.element.classList.add("toast--".concat(v)),this.element.appendChild(this.buildClose(h)),this.element.appendChild(document.createTextNode(L)),this.element.addEventListener("keydown",function(T){T.key==="Escape"&&(T.preventDefault(),D.hide())}),_.forEach(function(T){D.element.addEventListener(T,function(w){D.trigger(T,w)})}),this.container.appendChild(this.element),this.trigger("build")},$.prototype.show=function(){this.element.classList.remove(this.toastHideClass),this.element.classList.add(this.toastShowClass),this.trigger("show")},$.prototype.hide=function(F){var D=this;if(F===void 0&&(F=!1),!(!F&&this.hasFocus)){if(!F&&this.element[Sl](Vu)&&this.element.addEventListener("mouseout",function(){D.hasFocus=!1,D.hideDelay>0&&D.hide()}),this.element.classList.remove(this.toastShowClass),this.element.classList.add(this.toastHideClass),this.trigger("hide"),this.animation){var h=function(){return D.remove()},L=function(){m||(D.element.addEventListener("transitionend",function(){return h()}),m=!0)},y=function(){D.show(),D.element.removeEventListener("transitionstart",function(){return L()}),D.element.removeEventListener("transitionend",function(){return h()}),D.element.removeEventListener("mouseover",function(){return y()}),D.element.addEventListener("mouseout",function(){return D.hide()})},m=!1;this.element.addEventListener("mouseover",function(){return y()}),this.element.addEventListener("transitionstart",function(){return L()});return}this.remove()}},$.prototype.remove=function(){this.element.parentNode===this.container&&(this.container.removeChild(this.element),this.trigger("remove"))},$.prototype.buildClose=function(F){var D=this,h=document.createElement("button");return h.setAttribute("title",F),h.appendChild(document.createTextNode(F)),h.addEventListener("click",function(){return D.hide()}),h},$.prototype.getContainer=function(F){var D=F.containerClass,h=F.containerElement,L=F.root,y=L.querySelector("".concat(h,".").concat(D));if(y)return y;var m=document.createElement(h);return m.classList.add(D),L.appendChild(m),m},$.prototype.on=function(F,D){this.events[F]||(this.events[F]=[]),this.events[F].push(D)},$.prototype.off=function(F,D){if(D===void 0&&(D=null),!D){this.events[F]=[];return}var h=this.events[F].indexOf(D);h===-1&&this.events[F].splice(h,1)},$.prototype.trigger=function(F){for(var D=this,h=[],L=1;L<arguments.length;L++)h[L-1]=arguments[L];(this.events[F]||[]).forEach(function(y){return y.apply(void 0,bl([D,D.element],h,!1))})},$.settings=function(F){$.defaults=ao(ao({},$.defaults),F)},$.defaults={animation:!0,animationDuration:400,closeLabel:"Close",containerClass:"toast__container",containerElement:"div",hide:!1,hideDelay:5,root:document.body,toastClass:"toast",toastElement:"div",toastEvents:["click","focus","keydown"],toastHideClass:"toast--hide",toastShowClass:"toast--show",toastType:"info"},$}();$r.Melba=Cl;$r.default=Cl});var Al=Qt((fo,Cs)=>{(function($,F){if(typeof fo=="object"&&typeof Cs=="object")Cs.exports=F();else if(typeof define=="function"&&define.amd)define([],F);else{var D=F();for(var h in D)(typeof fo=="object"?fo:$)[h]=D[h]}})(self,function(){return(()=>{"use strict";var $={4567:function(D,h,L){var y,m=this&&this.__extends||(y=function(s,n){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},y(s,n)},function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function l(){this.constructor=s}y(s,n),s.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.AccessibilityManager=void 0;var _=L(9042),v=L(6114),T=L(9924),w=L(3656),c=L(844),p=L(5596),C=L(9631),d=function(s){function n(l,a){var u=s.call(this)||this;u._terminal=l,u._renderService=a,u._liveRegionLineCount=0,u._charsToConsume=[],u._charsToAnnounce="",u._accessibilityTreeRoot=document.createElement("div"),u._accessibilityTreeRoot.classList.add("xterm-accessibility"),u._accessibilityTreeRoot.tabIndex=0,u._rowContainer=document.createElement("div"),u._rowContainer.setAttribute("role","list"),u._rowContainer.classList.add("xterm-accessibility-tree"),u._rowElements=[];for(var g=0;g<u._terminal.rows;g++)u._rowElements[g]=u._createAccessibilityTreeNode(),u._rowContainer.appendChild(u._rowElements[g]);if(u._topBoundaryFocusListener=function(b){return u._onBoundaryFocus(b,0)},u._bottomBoundaryFocusListener=function(b){return u._onBoundaryFocus(b,1)},u._rowElements[0].addEventListener("focus",u._topBoundaryFocusListener),u._rowElements[u._rowElements.length-1].addEventListener("focus",u._bottomBoundaryFocusListener),u._refreshRowsDimensions(),u._accessibilityTreeRoot.appendChild(u._rowContainer),u._renderRowsDebouncer=new T.TimeBasedDebouncer(u._renderRows.bind(u)),u._refreshRows(),u._liveRegion=document.createElement("div"),u._liveRegion.classList.add("live-region"),u._liveRegion.setAttribute("aria-live","assertive"),u._accessibilityTreeRoot.appendChild(u._liveRegion),!u._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return u._terminal.element.insertAdjacentElement("afterbegin",u._accessibilityTreeRoot),u.register(u._renderRowsDebouncer),u.register(u._terminal.onResize(function(b){return u._onResize(b.rows)})),u.register(u._terminal.onRender(function(b){return u._refreshRows(b.start,b.end)})),u.register(u._terminal.onScroll(function(){return u._refreshRows()})),u.register(u._terminal.onA11yChar(function(b){return u._onChar(b)})),u.register(u._terminal.onLineFeed(function(){return u._onChar(`
`)})),u.register(u._terminal.onA11yTab(function(b){return u._onTab(b)})),u.register(u._terminal.onKey(function(b){return u._onKey(b.key)})),u.register(u._terminal.onBlur(function(){return u._clearLiveRegion()})),u.register(u._renderService.onDimensionsChange(function(){return u._refreshRowsDimensions()})),u._screenDprMonitor=new p.ScreenDprMonitor,u.register(u._screenDprMonitor),u._screenDprMonitor.setListener(function(){return u._refreshRowsDimensions()}),u.register((0,w.addDisposableDomListener)(window,"resize",function(){return u._refreshRowsDimensions()})),u}return m(n,s),n.prototype.dispose=function(){s.prototype.dispose.call(this),(0,C.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},n.prototype._onBoundaryFocus=function(l,a){var u=l.target,g=this._rowElements[a===0?1:this._rowElements.length-2];if(u.getAttribute("aria-posinset")!==(a===0?"1":""+this._terminal.buffer.lines.length)&&l.relatedTarget===g){var b,k;if(a===0?(b=u,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(b=this._rowElements.shift(),k=u,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){var O=this._createAccessibilityTreeNode();this._rowElements.unshift(O),this._rowContainer.insertAdjacentElement("afterbegin",O)}else O=this._createAccessibilityTreeNode(),this._rowElements.push(O),this._rowContainer.appendChild(O);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}},n.prototype._onResize=function(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},n.prototype._createAccessibilityTreeNode=function(){var l=document.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l},n.prototype._onTab=function(l){for(var a=0;a<l;a++)this._onChar(" ")},n.prototype._onChar=function(l){var a=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=_.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){a._accessibilityTreeRoot.appendChild(a._liveRegion)},0))},n.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&(0,C.removeElementFromParent)(this._liveRegion)},n.prototype._onKey=function(l){this._clearLiveRegion(),this._charsToConsume.push(l)},n.prototype._refreshRows=function(l,a){this._renderRowsDebouncer.refresh(l,a,this._terminal.rows)},n.prototype._renderRows=function(l,a){for(var u=this._terminal.buffer,g=u.lines.length.toString(),b=l;b<=a;b++){var k=u.translateBufferLineToString(u.ydisp+b,!0),O=(u.ydisp+b+1).toString(),E=this._rowElements[b];E&&(k.length===0?E.innerText="\xA0":E.textContent=k,E.setAttribute("aria-posinset",O),E.setAttribute("aria-setsize",g))}this._announceCharacters()},n.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}},n.prototype._refreshRowDimensions=function(l){l.style.height=this._renderService.dimensions.actualCellHeight+"px"},n.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},n}(c.Disposable);h.AccessibilityManager=d},3614:(D,h)=>{function L(v){return v.replace(/\r?\n/g,"\r")}function y(v,T){return T?"\x1B[200~"+v+"\x1B[201~":v}function m(v,T,w){v=y(v=L(v),w.decPrivateModes.bracketedPasteMode),w.triggerDataEvent(v,!0),T.value=""}function _(v,T,w){var c=w.getBoundingClientRect(),p=v.clientX-c.left-10,C=v.clientY-c.top-10;T.style.width="20px",T.style.height="20px",T.style.left=p+"px",T.style.top=C+"px",T.style.zIndex="1000",T.focus()}Object.defineProperty(h,"__esModule",{value:!0}),h.rightClickHandler=h.moveTextAreaUnderMouseCursor=h.paste=h.handlePasteEvent=h.copyHandler=h.bracketTextForPaste=h.prepareTextForTerminal=void 0,h.prepareTextForTerminal=L,h.bracketTextForPaste=y,h.copyHandler=function(v,T){v.clipboardData&&v.clipboardData.setData("text/plain",T.selectionText),v.preventDefault()},h.handlePasteEvent=function(v,T,w){v.stopPropagation(),v.clipboardData&&m(v.clipboardData.getData("text/plain"),T,w)},h.paste=m,h.moveTextAreaUnderMouseCursor=_,h.rightClickHandler=function(v,T,w,c,p){_(v,T,w),p&&c.rightClickSelect(v),T.value=c.selectionText,T.select()}},4774:(D,h)=>{var L,y,m,_;function v(w){var c=w.toString(16);return c.length<2?"0"+c:c}function T(w,c){return w<c?(c+.05)/(w+.05):(w+.05)/(c+.05)}Object.defineProperty(h,"__esModule",{value:!0}),h.contrastRatio=h.toPaddedHex=h.rgba=h.rgb=h.css=h.color=h.channels=void 0,function(w){w.toCss=function(c,p,C,d){return d!==void 0?"#"+v(c)+v(p)+v(C)+v(d):"#"+v(c)+v(p)+v(C)},w.toRgba=function(c,p,C,d){return d===void 0&&(d=255),(c<<24|p<<16|C<<8|d)>>>0}}(L=h.channels||(h.channels={})),(y=h.color||(h.color={})).blend=function(w,c){var p=(255&c.rgba)/255;if(p===1)return{css:c.css,rgba:c.rgba};var C=c.rgba>>24&255,d=c.rgba>>16&255,s=c.rgba>>8&255,n=w.rgba>>24&255,l=w.rgba>>16&255,a=w.rgba>>8&255,u=n+Math.round((C-n)*p),g=l+Math.round((d-l)*p),b=a+Math.round((s-a)*p);return{css:L.toCss(u,g,b),rgba:L.toRgba(u,g,b)}},y.isOpaque=function(w){return(255&w.rgba)==255},y.ensureContrastRatio=function(w,c,p){var C=_.ensureContrastRatio(w.rgba,c.rgba,p);if(C)return _.toColor(C>>24&255,C>>16&255,C>>8&255)},y.opaque=function(w){var c=(255|w.rgba)>>>0,p=_.toChannels(c),C=p[0],d=p[1],s=p[2];return{css:L.toCss(C,d,s),rgba:c}},y.opacity=function(w,c){var p=Math.round(255*c),C=_.toChannels(w.rgba),d=C[0],s=C[1],n=C[2];return{css:L.toCss(d,s,n,p),rgba:L.toRgba(d,s,n,p)}},y.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]},(h.css||(h.css={})).toColor=function(w){switch(w.length){case 7:return{css:w,rgba:(parseInt(w.slice(1),16)<<8|255)>>>0};case 9:return{css:w,rgba:parseInt(w.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(w){function c(p,C,d){var s=p/255,n=C/255,l=d/255;return .2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))}w.relativeLuminance=function(p){return c(p>>16&255,p>>8&255,255&p)},w.relativeLuminance2=c}(m=h.rgb||(h.rgb={})),function(w){function c(C,d,s){for(var n=C>>24&255,l=C>>16&255,a=C>>8&255,u=d>>24&255,g=d>>16&255,b=d>>8&255,k=T(m.relativeLuminance2(u,b,g),m.relativeLuminance2(n,l,a));k<s&&(u>0||g>0||b>0);)u-=Math.max(0,Math.ceil(.1*u)),g-=Math.max(0,Math.ceil(.1*g)),b-=Math.max(0,Math.ceil(.1*b)),k=T(m.relativeLuminance2(u,b,g),m.relativeLuminance2(n,l,a));return(u<<24|g<<16|b<<8|255)>>>0}function p(C,d,s){for(var n=C>>24&255,l=C>>16&255,a=C>>8&255,u=d>>24&255,g=d>>16&255,b=d>>8&255,k=T(m.relativeLuminance2(u,b,g),m.relativeLuminance2(n,l,a));k<s&&(u<255||g<255||b<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),g=Math.min(255,g+Math.ceil(.1*(255-g))),b=Math.min(255,b+Math.ceil(.1*(255-b))),k=T(m.relativeLuminance2(u,b,g),m.relativeLuminance2(n,l,a));return(u<<24|g<<16|b<<8|255)>>>0}w.ensureContrastRatio=function(C,d,s){var n=m.relativeLuminance(C>>8),l=m.relativeLuminance(d>>8);if(T(n,l)<s)return l<n?c(C,d,s):p(C,d,s)},w.reduceLuminance=c,w.increaseLuminance=p,w.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},w.toColor=function(C,d,s){return{css:L.toCss(C,d,s),rgba:L.toRgba(C,d,s)}}}(_=h.rgba||(h.rgba={})),h.toPaddedHex=v,h.contrastRatio=T},7239:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorContrastCache=void 0;var L=function(){function y(){this._color={},this._rgba={}}return y.prototype.clear=function(){this._color={},this._rgba={}},y.prototype.setCss=function(m,_,v){this._rgba[m]||(this._rgba[m]={}),this._rgba[m][_]=v},y.prototype.getCss=function(m,_){return this._rgba[m]?this._rgba[m][_]:void 0},y.prototype.setColor=function(m,_,v){this._color[m]||(this._color[m]={}),this._color[m][_]=v},y.prototype.getColor=function(m,_){return this._color[m]?this._color[m][_]:void 0},y}();h.ColorContrastCache=L},5680:function(D,h,L){var y=this&&this.__spreadArray||function(d,s,n){if(n||arguments.length===2)for(var l,a=0,u=s.length;a<u;a++)!l&&a in s||(l||(l=Array.prototype.slice.call(s,0,a)),l[a]=s[a]);return d.concat(l||Array.prototype.slice.call(s))};Object.defineProperty(h,"__esModule",{value:!0}),h.ColorManager=h.DEFAULT_ANSI_COLORS=void 0;var m=L(4774),_=L(7239),v=m.css.toColor("#ffffff"),T=m.css.toColor("#000000"),w=m.css.toColor("#ffffff"),c=m.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};h.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var d=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],s=[0,95,135,175,215,255],n=0;n<216;n++){var l=s[n/36%6|0],a=s[n/6%6|0],u=s[n%6];d.push({css:m.channels.toCss(l,a,u),rgba:m.channels.toRgba(l,a,u)})}for(n=0;n<24;n++){var g=8+10*n;d.push({css:m.channels.toCss(g,g,g),rgba:m.channels.toRgba(g,g,g)})}return d}());var C=function(){function d(s,n){this.allowTransparency=n;var l=s.createElement("canvas");l.width=1,l.height=1;var a=l.getContext("2d");if(!a)throw new Error("Could not get rendering context");this._ctx=a,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new _.ColorContrastCache,this.colors={foreground:v,background:T,cursor:w,cursorAccent:c,selectionTransparent:p,selectionOpaque:m.color.blend(T,p),ansi:h.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return d.prototype.onOptionsChange=function(s){s==="minimumContrastRatio"&&this._contrastCache.clear()},d.prototype.setTheme=function(s){s===void 0&&(s={}),this.colors.foreground=this._parseColor(s.foreground,v),this.colors.background=this._parseColor(s.background,T),this.colors.cursor=this._parseColor(s.cursor,w,!0),this.colors.cursorAccent=this._parseColor(s.cursorAccent,c,!0),this.colors.selectionTransparent=this._parseColor(s.selection,p,!0),this.colors.selectionOpaque=m.color.blend(this.colors.background,this.colors.selectionTransparent),m.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=m.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(s.black,h.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(s.red,h.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(s.green,h.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(s.yellow,h.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(s.blue,h.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(s.magenta,h.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(s.cyan,h.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(s.white,h.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(s.brightBlack,h.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(s.brightRed,h.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(s.brightGreen,h.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(s.brightYellow,h.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(s.brightBlue,h.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(s.brightMagenta,h.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(s.brightCyan,h.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(s.brightWhite,h.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},d.prototype.restoreColor=function(s){if(s!==void 0)switch(s){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[s]=this._restoreColors.ansi[s]}else for(var n=0;n<this._restoreColors.ansi.length;++n)this.colors.ansi[n]=this._restoreColors.ansi[n]},d.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:y([],this.colors.ansi,!0)}},d.prototype._parseColor=function(s,n,l){if(l===void 0&&(l=this.allowTransparency),s===void 0)return n;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+s+" is invalid using fallback "+n.css),n;this._ctx.fillRect(0,0,1,1);var a=this._ctx.getImageData(0,0,1,1).data;if(a[3]!==255){if(!l)return console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+n.css+"."),n;var u=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(A){return Number(A)}),g=u[0],b=u[1],k=u[2],O=u[3],E=Math.round(255*O);return{rgba:m.channels.toRgba(g,b,k,E),css:s}}return{css:this._ctx.fillStyle,rgba:m.channels.toRgba(a[0],a[1],a[2],a[3])}},d}();h.ColorManager=C},9631:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeElementFromParent=void 0,h.removeElementFromParent=function(){for(var L,y=[],m=0;m<arguments.length;m++)y[m]=arguments[m];for(var _=0,v=y;_<v.length;_++){var T=v[_];(L=T?.parentElement)===null||L===void 0||L.removeChild(T)}}},3656:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.addDisposableDomListener=void 0,h.addDisposableDomListener=function(L,y,m,_){L.addEventListener(y,m,_);var v=!1;return{dispose:function(){v||(v=!0,L.removeEventListener(y,m,_))}}}},3551:function(D,h,L){var y=this&&this.__decorate||function(c,p,C,d){var s,n=arguments.length,l=n<3?p:d===null?d=Object.getOwnPropertyDescriptor(p,C):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,p,C,d);else for(var a=c.length-1;a>=0;a--)(s=c[a])&&(l=(n<3?s(l):n>3?s(p,C,l):s(p,C))||l);return n>3&&l&&Object.defineProperty(p,C,l),l},m=this&&this.__param||function(c,p){return function(C,d){p(C,d,c)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZone=h.Linkifier=void 0;var _=L(8460),v=L(2585),T=function(){function c(p,C,d){this._bufferService=p,this._logService=C,this._unicodeService=d,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new _.EventEmitter,this._onHideLinkUnderline=new _.EventEmitter,this._onLinkTooltip=new _.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(c.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),c.prototype.attachToDom=function(p,C){this._element=p,this._mouseZoneManager=C},c.prototype.linkifyRows=function(p,C){var d=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=p,this._rowsToLinkify.end=C):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,p),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,C)),this._mouseZoneManager.clearAll(p,C),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return d._linkifyRows()},c._timeBeforeLatency))},c.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var p=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var C=p.ydisp+this._rowsToLinkify.start;if(!(C>=p.lines.length)){for(var d=p.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,s=Math.ceil(2e3/this._bufferService.cols),n=this._bufferService.buffer.iterator(!1,C,d,s,s);n.hasNext();)for(var l=n.next(),a=0;a<this._linkMatchers.length;a++)this._doLinkifyRow(l.range.first,l.content,this._linkMatchers[a]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},c.prototype.registerLinkMatcher=function(p,C,d){if(d===void 0&&(d={}),!C)throw new Error("handler must be defined");var s={id:this._nextLinkMatcherId++,regex:p,handler:C,matchIndex:d.matchIndex,validationCallback:d.validationCallback,hoverTooltipCallback:d.tooltipCallback,hoverLeaveCallback:d.leaveCallback,willLinkActivate:d.willLinkActivate,priority:d.priority||0};return this._addLinkMatcherToList(s),s.id},c.prototype._addLinkMatcherToList=function(p){if(this._linkMatchers.length!==0){for(var C=this._linkMatchers.length-1;C>=0;C--)if(p.priority<=this._linkMatchers[C].priority)return void this._linkMatchers.splice(C+1,0,p);this._linkMatchers.splice(0,0,p)}else this._linkMatchers.push(p)},c.prototype.deregisterLinkMatcher=function(p){for(var C=0;C<this._linkMatchers.length;C++)if(this._linkMatchers[C].id===p)return this._linkMatchers.splice(C,1),!0;return!1},c.prototype._doLinkifyRow=function(p,C,d){for(var s,n=this,l=new RegExp(d.regex.source,(d.regex.flags||"")+"g"),a=-1,u=function(){var b=s[typeof d.matchIndex!="number"?0:d.matchIndex];if(!b)return g._logService.debug("match found without corresponding matchIndex",s,d),"break";if(a=C.indexOf(b,a+1),l.lastIndex=a+b.length,a<0)return"break";var k=g._bufferService.buffer.stringIndexToBufferIndex(p,a);if(k[0]<0)return"break";var O=g._bufferService.buffer.lines.get(k[0]);if(!O)return"break";var E=O.getFg(k[1]),A=E?E>>9&511:void 0;d.validationCallback?d.validationCallback(b,function(W){n._rowsTimeoutId||W&&n._addLink(k[1],k[0]-n._bufferService.buffer.ydisp,b,d,A)}):g._addLink(k[1],k[0]-g._bufferService.buffer.ydisp,b,d,A)},g=this;(s=l.exec(C))!==null&&u()!=="break";);},c.prototype._addLink=function(p,C,d,s,n){var l=this;if(this._mouseZoneManager&&this._element){var a=this._unicodeService.getStringCellWidth(d),u=p%this._bufferService.cols,g=C+Math.floor(p/this._bufferService.cols),b=(u+a)%this._bufferService.cols,k=g+Math.floor((u+a)/this._bufferService.cols);b===0&&(b=this._bufferService.cols,k--),this._mouseZoneManager.add(new w(u+1,g+1,b+1,k+1,function(O){if(s.handler)return s.handler(O,d);var E=window.open();E?(E.opener=null,E.location.href=d):console.warn("Opening link blocked as opener could not be cleared")},function(){l._onShowLinkUnderline.fire(l._createLinkHoverEvent(u,g,b,k,n)),l._element.classList.add("xterm-cursor-pointer")},function(O){l._onLinkTooltip.fire(l._createLinkHoverEvent(u,g,b,k,n)),s.hoverTooltipCallback&&s.hoverTooltipCallback(O,d,{start:{x:u,y:g},end:{x:b,y:k}})},function(){l._onHideLinkUnderline.fire(l._createLinkHoverEvent(u,g,b,k,n)),l._element.classList.remove("xterm-cursor-pointer"),s.hoverLeaveCallback&&s.hoverLeaveCallback()},function(O){return!s.willLinkActivate||s.willLinkActivate(O,d)}))}},c.prototype._createLinkHoverEvent=function(p,C,d,s,n){return{x1:p,y1:C,x2:d,y2:s,cols:this._bufferService.cols,fg:n}},c._timeBeforeLatency=200,c=y([m(0,v.IBufferService),m(1,v.ILogService),m(2,v.IUnicodeService)],c)}();h.Linkifier=T;var w=function(c,p,C,d,s,n,l,a,u){this.x1=c,this.y1=p,this.x2=C,this.y2=d,this.clickCallback=s,this.hoverCallback=n,this.tooltipCallback=l,this.leaveCallback=a,this.willLinkActivate=u};h.MouseZone=w},6465:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Linkifier2=void 0;var T=L(2585),w=L(8460),c=L(844),p=L(3656),C=function(d){function s(n){var l=d.call(this)||this;return l._bufferService=n,l._linkProviders=[],l._linkCacheDisposables=[],l._isMouseOut=!0,l._activeLine=-1,l._onShowLinkUnderline=l.register(new w.EventEmitter),l._onHideLinkUnderline=l.register(new w.EventEmitter),l.register((0,c.getDisposeArrayDisposable)(l._linkCacheDisposables)),l}return m(s,d),Object.defineProperty(s.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),s.prototype.registerLinkProvider=function(n){var l=this;return this._linkProviders.push(n),{dispose:function(){var a=l._linkProviders.indexOf(n);a!==-1&&l._linkProviders.splice(a,1)}}},s.prototype.attachToDom=function(n,l,a){var u=this;this._element=n,this._mouseService=l,this._renderService=a,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",function(){u._isMouseOut=!0,u._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},s.prototype._onMouseMove=function(n){if(this._lastMouseEvent=n,this._element&&this._mouseService){var l=this._positionFromMouseEvent(n,this._element,this._mouseService);if(l){this._isMouseOut=!1;for(var a=n.composedPath(),u=0;u<a.length;u++){var g=a[u];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._onHover(l),this._lastBufferCell=l)}}},s.prototype._onHover=function(n){if(this._activeLine!==n.y)return this._clearCurrentLink(),void this._askForLink(n,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))},s.prototype._askForLink=function(n,l){var a,u=this;this._activeProviderReplies&&l||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(function(b){b?.forEach(function(k){k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);var g=!1;this._linkProviders.forEach(function(b,k){var O;l?!((O=u._activeProviderReplies)===null||O===void 0)&&O.get(k)&&(g=u._checkLinkProviderResult(k,n,g)):b.provideLinks(n.y,function(E){var A,W;if(!u._isMouseOut){var R=E?.map(function(j){return{link:j}});(A=u._activeProviderReplies)===null||A===void 0||A.set(k,R),g=u._checkLinkProviderResult(k,n,g),((W=u._activeProviderReplies)===null||W===void 0?void 0:W.size)===u._linkProviders.length&&u._removeIntersectingLinks(n.y,u._activeProviderReplies)}})})},s.prototype._removeIntersectingLinks=function(n,l){for(var a=new Set,u=0;u<l.size;u++){var g=l.get(u);if(g)for(var b=0;b<g.length;b++)for(var k=g[b],O=k.link.range.start.y<n?0:k.link.range.start.x,E=k.link.range.end.y>n?this._bufferService.cols:k.link.range.end.x,A=O;A<=E;A++){if(a.has(A)){g.splice(b--,1);break}a.add(A)}}},s.prototype._checkLinkProviderResult=function(n,l,a){var u,g=this;if(!this._activeProviderReplies)return a;for(var b=this._activeProviderReplies.get(n),k=!1,O=0;O<n;O++)this._activeProviderReplies.has(O)&&!this._activeProviderReplies.get(O)||(k=!0);if(!k&&b){var E=b.find(function(W){return g._linkAtPosition(W.link,l)});E&&(a=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(O=0;O<this._activeProviderReplies.size;O++){var A=(u=this._activeProviderReplies.get(O))===null||u===void 0?void 0:u.find(function(W){return g._linkAtPosition(W.link,l)});if(A){a=!0,this._handleNewLink(A);break}}return a},s.prototype._onClick=function(n){if(this._element&&this._mouseService&&this._currentLink){var l=this._positionFromMouseEvent(n,this._element,this._mouseService);l&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(n,this._currentLink.link.text)}},s.prototype._clearCurrentLink=function(n,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!l||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,c.disposeArray)(this._linkCacheDisposables))},s.prototype._handleNewLink=function(n){var l=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(n.link,a)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:function(){var u,g;return(g=(u=l._currentLink)===null||u===void 0?void 0:u.state)===null||g===void 0?void 0:g.decorations.pointerCursor},set:function(u){var g,b;((g=l._currentLink)===null||g===void 0?void 0:g.state)&&l._currentLink.state.decorations.pointerCursor!==u&&(l._currentLink.state.decorations.pointerCursor=u,l._currentLink.state.isHovered&&((b=l._element)===null||b===void 0||b.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,g;return(g=(u=l._currentLink)===null||u===void 0?void 0:u.state)===null||g===void 0?void 0:g.decorations.underline},set:function(u){var g,b,k;((g=l._currentLink)===null||g===void 0?void 0:g.state)&&((k=(b=l._currentLink)===null||b===void 0?void 0:b.state)===null||k===void 0?void 0:k.decorations.underline)!==u&&(l._currentLink.state.decorations.underline=u,l._currentLink.state.isHovered&&l._fireUnderlineEvent(n.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(u){var g=u.start===0?0:u.start+1+l._bufferService.buffer.ydisp;l._clearCurrentLink(g,u.end+1+l._bufferService.buffer.ydisp)})))}},s.prototype._linkHover=function(n,l,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(a,l.text)},s.prototype._fireUnderlineEvent=function(n,l){var a=n.range,u=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-u-1,a.end.x,a.end.y-u-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)},s.prototype._linkLeave=function(n,l,a){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(a,l.text)},s.prototype._linkAtPosition=function(n,l){var a=n.range.start.y===n.range.end.y,u=n.range.start.y<l.y,g=n.range.end.y>l.y;return(a&&n.range.start.x<=l.x&&n.range.end.x>=l.x||u&&n.range.end.x>=l.x||g&&n.range.start.x<=l.x||u&&g)&&n.range.start.y<=l.y&&n.range.end.y>=l.y},s.prototype._positionFromMouseEvent=function(n,l,a){var u=a.getCoords(n,l,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}},s.prototype._createLinkUnderlineEvent=function(n,l,a,u,g){return{x1:n,y1:l,x2:a,y2:u,cols:this._bufferService.cols,fg:g}},_([v(0,T.IBufferService)],s)}(c.Disposable);h.Linkifier2=C},9042:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.tooMuchOutput=h.promptLabel=void 0,h.promptLabel="Terminal input",h.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseZoneManager=void 0;var T=L(844),w=L(3656),c=L(4725),p=L(2585),C=function(d){function s(n,l,a,u,g,b){var k=d.call(this)||this;return k._element=n,k._screenElement=l,k._bufferService=a,k._mouseService=u,k._selectionService=g,k._optionsService=b,k._zones=[],k._areZonesActive=!1,k._lastHoverCoords=[void 0,void 0],k._initialSelectionLength=0,k.register((0,w.addDisposableDomListener)(k._element,"mousedown",function(O){return k._onMouseDown(O)})),k._mouseMoveListener=function(O){return k._onMouseMove(O)},k._mouseLeaveListener=function(O){return k._onMouseLeave(O)},k._clickListener=function(O){return k._onClick(O)},k}return m(s,d),s.prototype.dispose=function(){d.prototype.dispose.call(this),this._deactivate()},s.prototype.add=function(n){this._zones.push(n),this._zones.length===1&&this._activate()},s.prototype.clearAll=function(n,l){if(this._zones.length!==0){n&&l||(n=0,l=this._bufferService.rows-1);for(var a=0;a<this._zones.length;a++){var u=this._zones[a];(u.y1>n&&u.y1<=l+1||u.y2>n&&u.y2<=l+1||u.y1<n&&u.y2>l+1)&&(this._currentZone&&this._currentZone===u&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(a--,1))}this._zones.length===0&&this._deactivate()}},s.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},s.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},s.prototype._onMouseMove=function(n){this._lastHoverCoords[0]===n.pageX&&this._lastHoverCoords[1]===n.pageY||(this._onHover(n),this._lastHoverCoords=[n.pageX,n.pageY])},s.prototype._onHover=function(n){var l=this,a=this._findZoneEventAt(n);a!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),a&&(this._currentZone=a,a.hoverCallback&&a.hoverCallback(n),this._tooltipTimeout=window.setTimeout(function(){return l._onTooltip(n)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},s.prototype._onTooltip=function(n){this._tooltipTimeout=void 0;var l=this._findZoneEventAt(n);l?.tooltipCallback(n)},s.prototype._onMouseDown=function(n){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var l=this._findZoneEventAt(n);l?.willLinkActivate(n)&&(n.preventDefault(),n.stopImmediatePropagation())}},s.prototype._onMouseLeave=function(n){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},s.prototype._onClick=function(n){var l=this._findZoneEventAt(n),a=this._getSelectionLength();l&&a===this._initialSelectionLength&&(l.clickCallback(n),n.preventDefault(),n.stopImmediatePropagation())},s.prototype._getSelectionLength=function(){var n=this._selectionService.selectionText;return n?n.length:0},s.prototype._findZoneEventAt=function(n){var l=this._mouseService.getCoords(n,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(l)for(var a=l[0],u=l[1],g=0;g<this._zones.length;g++){var b=this._zones[g];if(b.y1===b.y2){if(u===b.y1&&a>=b.x1&&a<b.x2)return b}else if(u===b.y1&&a>=b.x1||u===b.y2&&a<b.x2||u>b.y1&&u<b.y2)return b}},_([v(2,p.IBufferService),v(3,c.IMouseService),v(4,c.ISelectionService),v(5,p.IOptionsService)],s)}(T.Disposable);h.MouseZoneManager=C},6193:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderDebouncer=void 0;var L=function(){function y(m){this._renderCallback=m}return y.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},y.prototype.refresh=function(m,_,v){var T=this;this._rowCount=v,m=m!==void 0?m:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return T._innerRefresh()}))},y.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var m=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(m,_)}},y}();h.RenderDebouncer=L},5596:function(D,h,L){var y,m=this&&this.__extends||(y=function(v,T){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,c){w.__proto__=c}||function(w,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(w[p]=c[p])},y(v,T)},function(v,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function w(){this.constructor=v}y(v,T),v.prototype=T===null?Object.create(T):(w.prototype=T.prototype,new w)});Object.defineProperty(h,"__esModule",{value:!0}),h.ScreenDprMonitor=void 0;var _=function(v){function T(){var w=v!==null&&v.apply(this,arguments)||this;return w._currentDevicePixelRatio=window.devicePixelRatio,w}return m(T,v),T.prototype.setListener=function(w){var c=this;this._listener&&this.clearListener(),this._listener=w,this._outerListener=function(){c._listener&&(c._listener(window.devicePixelRatio,c._currentDevicePixelRatio),c._updateDpr())},this._updateDpr()},T.prototype.dispose=function(){v.prototype.dispose.call(this),this.clearListener()},T.prototype._updateDpr=function(){var w;this._outerListener&&((w=this._resolutionMediaMatchList)===null||w===void 0||w.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},T.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},T}(L(844).Disposable);h.ScreenDprMonitor=_},3236:function(D,h,L){var y,m=this&&this.__extends||(y=function(U,ee){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Y){K.__proto__=Y}||function(K,Y){for(var G in Y)Object.prototype.hasOwnProperty.call(Y,G)&&(K[G]=Y[G])},y(U,ee)},function(U,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function K(){this.constructor=U}y(U,ee),U.prototype=ee===null?Object.create(ee):(K.prototype=ee.prototype,new K)});Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;var _=L(2950),v=L(1680),T=L(3614),w=L(2584),c=L(5435),p=L(3525),C=L(3551),d=L(9312),s=L(6114),n=L(3656),l=L(9042),a=L(357),u=L(6954),g=L(4567),b=L(1296),k=L(7399),O=L(8460),E=L(8437),A=L(5680),W=L(3230),R=L(4725),j=L(428),B=L(8934),P=L(6465),N=L(5114),z=L(8969),V=L(4774),te=L(4269),re=L(5941),fe=L(7641),he=typeof window<"u"?window.document:null,xe=function(U){function ee(K){K===void 0&&(K={});var Y=U.call(this,K)||this;return Y.browser=s,Y._keyDownHandled=!1,Y._keyPressHandled=!1,Y._unprocessedDeadKey=!1,Y._onCursorMove=new O.EventEmitter,Y._onKey=new O.EventEmitter,Y._onRender=new O.EventEmitter,Y._onSelectionChange=new O.EventEmitter,Y._onTitleChange=new O.EventEmitter,Y._onBell=new O.EventEmitter,Y._onFocus=new O.EventEmitter,Y._onBlur=new O.EventEmitter,Y._onA11yCharEmitter=new O.EventEmitter,Y._onA11yTabEmitter=new O.EventEmitter,Y._setup(),Y.linkifier=Y._instantiationService.createInstance(C.Linkifier),Y.linkifier2=Y.register(Y._instantiationService.createInstance(P.Linkifier2)),Y.decorationService=Y.register(Y._instantiationService.createInstance(fe.DecorationService)),Y.register(Y._inputHandler.onRequestBell(function(){return Y.bell()})),Y.register(Y._inputHandler.onRequestRefreshRows(function(G,Se){return Y.refresh(G,Se)})),Y.register(Y._inputHandler.onRequestSendFocus(function(){return Y._reportFocus()})),Y.register(Y._inputHandler.onRequestReset(function(){return Y.reset()})),Y.register(Y._inputHandler.onRequestWindowsOptionsReport(function(G){return Y._reportWindowsOptions(G)})),Y.register(Y._inputHandler.onColor(function(G){return Y._handleColorEvent(G)})),Y.register((0,O.forwardEvent)(Y._inputHandler.onCursorMove,Y._onCursorMove)),Y.register((0,O.forwardEvent)(Y._inputHandler.onTitleChange,Y._onTitleChange)),Y.register((0,O.forwardEvent)(Y._inputHandler.onA11yChar,Y._onA11yCharEmitter)),Y.register((0,O.forwardEvent)(Y._inputHandler.onA11yTab,Y._onA11yTabEmitter)),Y.register(Y._bufferService.onResize(function(G){return Y._afterResize(G.cols,G.rows)})),Y}return m(ee,U),Object.defineProperty(ee.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),ee.prototype._handleColorEvent=function(K){var Y,G;if(this._colorManager){for(var Se=0,de=K;Se<de.length;Se++){var Ce=de[Se],De=void 0,Fe="";switch(Ce.index){case 256:De="foreground",Fe="10";break;case 257:De="background",Fe="11";break;case 258:De="cursor",Fe="12";break;default:De="ansi",Fe="4;"+Ce.index}if(De)switch(Ce.type){case 0:var Ae=V.color.toColorRGB(De==="ansi"?this._colorManager.colors.ansi[Ce.index]:this._colorManager.colors[De]);this.coreService.triggerDataEvent(w.C0.ESC+"]"+Fe+";"+(0,re.toRgbString)(Ae)+w.C0.BEL);break;case 1:De==="ansi"?this._colorManager.colors.ansi[Ce.index]=V.rgba.toColor.apply(V.rgba,Ce.color):this._colorManager.colors[De]=V.rgba.toColor.apply(V.rgba,Ce.color);break;case 2:this._colorManager.restoreColor(Ce.index)}}(Y=this._renderService)===null||Y===void 0||Y.setColors(this._colorManager.colors),(G=this.viewport)===null||G===void 0||G.onThemeChange(this._colorManager.colors)}},ee.prototype.dispose=function(){var K,Y,G;this._isDisposed||(U.prototype.dispose.call(this),(K=this._renderService)===null||K===void 0||K.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(G=(Y=this.element)===null||Y===void 0?void 0:Y.parentNode)===null||G===void 0||G.removeChild(this.element))},ee.prototype._setup=function(){U.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(ee.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),ee.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},ee.prototype._updateOptions=function(K){var Y,G,Se,de;switch(U.prototype._updateOptions.call(this,K),K){case"fontFamily":case"fontSize":(Y=this._renderService)===null||Y===void 0||Y.clear(),(G=this._charSizeService)===null||G===void 0||G.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Se=this.viewport)===null||Se===void 0||Se.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)):((de=this._accessibilityManager)===null||de===void 0||de.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},ee.prototype._onTextAreaFocus=function(K){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(w.C0.ESC+"[I"),this.updateCursorStyle(K),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},ee.prototype.blur=function(){var K;return(K=this.textarea)===null||K===void 0?void 0:K.blur()},ee.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(w.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},ee.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var K=this.buffer.ybase+this.buffer.y,Y=this.buffer.lines.get(K);if(Y){var G=Math.min(this.buffer.x,this.cols-1),Se=this._renderService.dimensions.actualCellHeight,de=Y.getWidth(G),Ce=this._renderService.dimensions.actualCellWidth*de,De=this.buffer.y*this._renderService.dimensions.actualCellHeight,Fe=G*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Fe+"px",this.textarea.style.top=De+"px",this.textarea.style.width=Ce+"px",this.textarea.style.height=Se+"px",this.textarea.style.lineHeight=Se+"px",this.textarea.style.zIndex="-5"}}},ee.prototype._initGlobal=function(){var K=this;this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",function(G){K.hasSelection()&&(0,T.copyHandler)(G,K._selectionService)}));var Y=function(G){return(0,T.handlePasteEvent)(G,K.textarea,K.coreService)};this.register((0,n.addDisposableDomListener)(this.textarea,"paste",Y)),this.register((0,n.addDisposableDomListener)(this.element,"paste",Y)),s.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(G){G.button===2&&(0,T.rightClickHandler)(G,K.textarea,K.screenElement,K._selectionService,K.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",function(G){(0,T.rightClickHandler)(G,K.textarea,K.screenElement,K._selectionService,K.options.rightClickSelectsWord)})),s.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",function(G){G.button===1&&(0,T.moveTextAreaUnderMouseCursor)(G,K.textarea,K.screenElement)}))},ee.prototype._bindKeys=function(){var K=this;this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",function(Y){return K._keyUp(Y)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",function(Y){return K._keyDown(Y)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",function(Y){return K._keyPress(Y)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",function(){return K._compositionHelper.compositionstart()})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",function(Y){return K._compositionHelper.compositionupdate(Y)})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",function(){return K._compositionHelper.compositionend()})),this.register((0,n.addDisposableDomListener)(this.textarea,"input",function(Y){return K._inputEvent(Y)},!0)),this.register(this.onRender(function(){return K._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(Y){return K._queueLinkification(Y.start,Y.end)}))},ee.prototype.open=function(K){var Y=this;if(!K)throw new Error("Terminal requires a parent element.");K.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=K.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),K.appendChild(this.element);var G=he.createDocumentFragment();this._viewportElement=he.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),G.appendChild(this._viewportElement),this._viewportScrollArea=he.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=he.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=he.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),G.appendChild(this.screenElement),this.textarea=he.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,n.addDisposableDomListener)(this.textarea,"focus",function(Ce){return Y._onTextAreaFocus(Ce)})),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",function(){return Y._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Se=this._instantiationService.createInstance(N.CoreBrowserService,this.textarea);this._instantiationService.setService(R.ICoreBrowserService,Se),this._charSizeService=this._instantiationService.createInstance(j.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(R.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new A.ColorManager(he,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Ce){return Y._colorManager.onOptionsChange(Ce)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(te.CharacterJoinerService),this._instantiationService.setService(R.ICharacterJoinerService,this._characterJoinerService);var de=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(W.RenderService,de,this.rows,this.screenElement)),this._instantiationService.setService(R.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Ce){return Y._onRender.fire(Ce)})),this.onResize(function(Ce){return Y._renderService.resize(Ce.cols,Ce.rows)}),this._compositionView=he.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(G),this._soundService=this._instantiationService.createInstance(a.SoundService),this._instantiationService.setService(R.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(B.MouseService),this._instantiationService.setService(R.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(v.Viewport,function(Ce){return Y.scrollLines(Ce,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return Y.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){Y._renderService.onCursorMove(),Y._syncTextArea()})),this.register(this.onResize(function(){return Y._renderService.onResize(Y.cols,Y.rows)})),this.register(this.onBlur(function(){return Y._renderService.onBlur()})),this.register(this.onFocus(function(){return Y._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return Y.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(d.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(R.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Ce){return Y.scrollLines(Ce.amount,Ce.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return Y._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Ce){return Y._renderService.onSelectionChanged(Ce.start,Ce.end,Ce.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Ce){Y.textarea.value=Ce,Y.textarea.focus(),Y.textarea.select()})),this.register(this._onScroll.event(function(Ce){Y.viewport.syncScrollArea(),Y._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",function(){return Y._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(u.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return Y._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(Ce){return Y._selectionService.onMouseDown(Ce)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},ee.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(p.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(b.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},ee.prototype._setTheme=function(K){var Y,G,Se;this._theme=K,(Y=this._colorManager)===null||Y===void 0||Y.setTheme(K),(G=this._renderService)===null||G===void 0||G.setColors(this._colorManager.colors),(Se=this.viewport)===null||Se===void 0||Se.onThemeChange(this._colorManager.colors)},ee.prototype.bindMouse=function(){var K=this,Y=this,G=this.element;function Se(ye){var je,Je,Tt=Y._mouseService.getRawByteCoords(ye,Y.screenElement,Y.cols,Y.rows);if(!Tt)return!1;switch(ye.overrideType||ye.type){case"mousemove":Je=32,ye.buttons===void 0?(je=3,ye.button!==void 0&&(je=ye.button<3?ye.button:3)):je=1&ye.buttons?0:4&ye.buttons?1:2&ye.buttons?2:3;break;case"mouseup":Je=0,je=ye.button<3?ye.button:3;break;case"mousedown":Je=1,je=ye.button<3?ye.button:3;break;case"wheel":ye.deltaY!==0&&(Je=ye.deltaY<0?0:1),je=4;break;default:return!1}return!(Je===void 0||je===void 0||je>4)&&Y.coreMouseService.triggerMouseEvent({col:Tt.x-33,row:Tt.y-33,button:je,action:Je,ctrl:ye.ctrlKey,alt:ye.altKey,shift:ye.shiftKey})}var de={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ce=function(ye){return Se(ye),ye.buttons||(K._document.removeEventListener("mouseup",de.mouseup),de.mousedrag&&K._document.removeEventListener("mousemove",de.mousedrag)),K.cancel(ye)},De=function(ye){return Se(ye),K.cancel(ye,!0)},Fe=function(ye){ye.buttons&&Se(ye)},Ae=function(ye){ye.buttons||Se(ye)};this.register(this.coreMouseService.onProtocolChange(function(ye){ye?(K.optionsService.rawOptions.logLevel==="debug"&&K._logService.debug("Binding to mouse events:",K.coreMouseService.explainEvents(ye)),K.element.classList.add("enable-mouse-events"),K._selectionService.disable()):(K._logService.debug("Unbinding from mouse events."),K.element.classList.remove("enable-mouse-events"),K._selectionService.enable()),8&ye?de.mousemove||(G.addEventListener("mousemove",Ae),de.mousemove=Ae):(G.removeEventListener("mousemove",de.mousemove),de.mousemove=null),16&ye?de.wheel||(G.addEventListener("wheel",De,{passive:!1}),de.wheel=De):(G.removeEventListener("wheel",de.wheel),de.wheel=null),2&ye?de.mouseup||(de.mouseup=Ce):(K._document.removeEventListener("mouseup",de.mouseup),de.mouseup=null),4&ye?de.mousedrag||(de.mousedrag=Fe):(K._document.removeEventListener("mousemove",de.mousedrag),de.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(G,"mousedown",function(ye){if(ye.preventDefault(),K.focus(),K.coreMouseService.areMouseEventsActive&&!K._selectionService.shouldForceSelection(ye))return Se(ye),de.mouseup&&K._document.addEventListener("mouseup",de.mouseup),de.mousedrag&&K._document.addEventListener("mousemove",de.mousedrag),K.cancel(ye)})),this.register((0,n.addDisposableDomListener)(G,"wheel",function(ye){if(!de.wheel){if(!K.buffer.hasScrollback){var je=K.viewport.getLinesScrolled(ye);if(je===0)return;for(var Je=w.C0.ESC+(K.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ye.deltaY<0?"A":"B"),Tt="",ar=0;ar<Math.abs(je);ar++)Tt+=Je;return K.coreService.triggerDataEvent(Tt,!0),K.cancel(ye,!0)}return K.viewport.onWheel(ye)?K.cancel(ye):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(G,"touchstart",function(ye){if(!K.coreMouseService.areMouseEventsActive)return K.viewport.onTouchStart(ye),K.cancel(ye)},{passive:!0})),this.register((0,n.addDisposableDomListener)(G,"touchmove",function(ye){if(!K.coreMouseService.areMouseEventsActive)return K.viewport.onTouchMove(ye)?void 0:K.cancel(ye)},{passive:!1}))},ee.prototype.refresh=function(K,Y){var G;(G=this._renderService)===null||G===void 0||G.refreshRows(K,Y)},ee.prototype._queueLinkification=function(K,Y){var G;(G=this.linkifier)===null||G===void 0||G.linkifyRows(K,Y)},ee.prototype.updateCursorStyle=function(K){var Y;!((Y=this._selectionService)===null||Y===void 0)&&Y.shouldColumnSelect(K)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},ee.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},ee.prototype.scrollLines=function(K,Y,G){G===void 0&&(G=0),U.prototype.scrollLines.call(this,K,Y,G),this.refresh(0,this.rows-1)},ee.prototype.paste=function(K){(0,T.paste)(K,this.textarea,this.coreService)},ee.prototype.attachCustomKeyEventHandler=function(K){this._customKeyEventHandler=K},ee.prototype.registerLinkMatcher=function(K,Y,G){var Se=this.linkifier.registerLinkMatcher(K,Y,G);return this.refresh(0,this.rows-1),Se},ee.prototype.deregisterLinkMatcher=function(K){this.linkifier.deregisterLinkMatcher(K)&&this.refresh(0,this.rows-1)},ee.prototype.registerLinkProvider=function(K){return this.linkifier2.registerLinkProvider(K)},ee.prototype.registerCharacterJoiner=function(K){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var Y=this._characterJoinerService.register(K);return this.refresh(0,this.rows-1),Y},ee.prototype.deregisterCharacterJoiner=function(K){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(K)&&this.refresh(0,this.rows-1)},Object.defineProperty(ee.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),ee.prototype.addMarker=function(K){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+K)},ee.prototype.registerDecoration=function(K){return this.decorationService.registerDecoration(K)},ee.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},ee.prototype.select=function(K,Y,G){this._selectionService.setSelection(K,Y,G)},ee.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},ee.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},ee.prototype.clearSelection=function(){var K;(K=this._selectionService)===null||K===void 0||K.clearSelection()},ee.prototype.selectAll=function(){var K;(K=this._selectionService)===null||K===void 0||K.selectAll()},ee.prototype.selectLines=function(K,Y){var G;(G=this._selectionService)===null||G===void 0||G.selectLines(K,Y)},ee.prototype._keyDown=function(K){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1)return!1;if(!this._compositionHelper.keydown(K))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;K.key!=="Dead"&&K.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var Y=(0,k.evaluateKeyboardEvent)(K,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(K),Y.type===3||Y.type===2){var G=this.rows-1;return this.scrollLines(Y.type===2?-G:G),this.cancel(K,!0)}return Y.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,K)||(Y.cancel&&this.cancel(K,!0),!Y.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Y.key!==w.C0.ETX&&Y.key!==w.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Y.key,domEvent:K}),this._showCursor(),this.coreService.triggerDataEvent(Y.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(K,!0))))},ee.prototype._isThirdLevelShift=function(K,Y){var G=K.isMac&&!this.options.macOptionIsMeta&&Y.altKey&&!Y.ctrlKey&&!Y.metaKey||K.isWindows&&Y.altKey&&Y.ctrlKey&&!Y.metaKey||K.isWindows&&Y.getModifierState("AltGraph");return Y.type==="keypress"?G:G&&(!Y.keyCode||Y.keyCode>47)},ee.prototype._keyUp=function(K){this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1||(function(Y){return Y.keyCode===16||Y.keyCode===17||Y.keyCode===18}(K)||this.focus(),this.updateCursorStyle(K),this._keyPressHandled=!1)},ee.prototype._keyPress=function(K){var Y;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(K)===!1)return!1;if(this.cancel(K),K.charCode)Y=K.charCode;else if(K.which===null||K.which===void 0)Y=K.keyCode;else{if(K.which===0||K.charCode===0)return!1;Y=K.which}return!(!Y||(K.altKey||K.ctrlKey||K.metaKey)&&!this._isThirdLevelShift(this.browser,K)||(Y=String.fromCharCode(Y),this._onKey.fire({key:Y,domEvent:K}),this._showCursor(),this.coreService.triggerDataEvent(Y,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},ee.prototype._inputEvent=function(K){if(K.data&&K.inputType==="insertText"&&!K.composed&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var Y=K.data;return this.coreService.triggerDataEvent(Y,!0),this.cancel(K),!0}return!1},ee.prototype.bell=function(){var K;this._soundBell()&&((K=this._soundService)===null||K===void 0||K.playBellSound()),this._onBell.fire()},ee.prototype.resize=function(K,Y){K!==this.cols||Y!==this.rows?U.prototype.resize.call(this,K,Y):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},ee.prototype._afterResize=function(K,Y){var G,Se;(G=this._charSizeService)===null||G===void 0||G.measure(),(Se=this.viewport)===null||Se===void 0||Se.syncScrollArea(!0)},ee.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var K=1;K<this.rows;K++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},ee.prototype.reset=function(){var K,Y;this.options.rows=this.rows,this.options.cols=this.cols;var G=this._customKeyEventHandler;this._setup(),U.prototype.reset.call(this),(K=this._selectionService)===null||K===void 0||K.reset(),this._customKeyEventHandler=G,this.refresh(0,this.rows-1),(Y=this.viewport)===null||Y===void 0||Y.syncScrollArea()},ee.prototype.clearTextureAtlas=function(){var K;(K=this._renderService)===null||K===void 0||K.clearTextureAtlas()},ee.prototype._reportFocus=function(){var K;!((K=this.element)===null||K===void 0)&&K.classList.contains("focus")?this.coreService.triggerDataEvent(w.C0.ESC+"[I"):this.coreService.triggerDataEvent(w.C0.ESC+"[O")},ee.prototype._reportWindowsOptions=function(K){if(this._renderService)switch(K){case c.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var Y=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),G=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(w.C0.ESC+"[4;"+G+";"+Y+"t");break;case c.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Se=this._renderService.dimensions.scaledCellWidth.toFixed(0),de=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(w.C0.ESC+"[6;"+de+";"+Se+"t")}},ee.prototype.cancel=function(K,Y){if(this.options.cancelEvents||Y)return K.preventDefault(),K.stopPropagation(),!1},ee.prototype._visualBell=function(){return!1},ee.prototype._soundBell=function(){return this.options.bellStyle==="sound"},ee}(z.CoreTerminal);h.Terminal=xe},9924:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TimeBasedDebouncer=void 0;var L=function(){function y(m,_){_===void 0&&(_=1e3),this._renderCallback=m,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return y.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},y.prototype.refresh=function(m,_,v){var T=this;this._rowCount=v,m=m!==void 0?m:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,m):m,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;var w=Date.now();if(w-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=w,this._innerRefresh();else if(!this._additionalRefreshRequested){var c=w-this._lastRefreshMs,p=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){T._lastRefreshMs=Date.now(),T._innerRefresh(),T._additionalRefreshRequested=!1,T._refreshTimeoutID=void 0},p)}},y.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var m=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(m,_)}},y}();h.TimeBasedDebouncer=L},1680:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Viewport=void 0;var T=L(844),w=L(3656),c=L(4725),p=L(2585),C=function(d){function s(n,l,a,u,g,b,k,O){var E=d.call(this)||this;return E._scrollLines=n,E._viewportElement=l,E._scrollArea=a,E._element=u,E._bufferService=g,E._optionsService=b,E._charSizeService=k,E._renderService=O,E.scrollBarWidth=0,E._currentRowHeight=0,E._currentScaledCellHeight=0,E._lastRecordedBufferLength=0,E._lastRecordedViewportHeight=0,E._lastRecordedBufferHeight=0,E._lastTouchY=0,E._lastScrollTop=0,E._lastHadScrollBar=!1,E._wheelPartialScroll=0,E._refreshAnimationFrame=null,E._ignoreNextScrollEvent=!1,E.scrollBarWidth=E._viewportElement.offsetWidth-E._scrollArea.offsetWidth||15,E._lastHadScrollBar=!0,E.register((0,w.addDisposableDomListener)(E._viewportElement,"scroll",E._onScroll.bind(E))),E._activeBuffer=E._bufferService.buffer,E.register(E._bufferService.buffers.onBufferActivate(function(A){return E._activeBuffer=A.activeBuffer})),E._renderDimensions=E._renderService.dimensions,E.register(E._renderService.onDimensionsChange(function(A){return E._renderDimensions=A})),setTimeout(function(){return E.syncScrollArea()},0),E}return m(s,d),s.prototype.onThemeChange=function(n){this._viewportElement.style.backgroundColor=n.background.css},s.prototype._refresh=function(n){var l=this;if(n)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return l._innerRefresh()}))},s.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._optionsService.rawOptions.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var a=window.getComputedStyle(this._element),u=parseInt(a.paddingLeft)+parseInt(a.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?u:0)).toString()+"px",this._refreshAnimationFrame=null},s.prototype.syncScrollArea=function(n){if(n===void 0&&(n=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(n);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(n):this._refresh(n)},s.prototype._onScroll=function(n){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(l)}},s.prototype._bubbleScroll=function(n,l){var a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&a<this._lastRecordedBufferHeight)||(n.cancelable&&n.preventDefault(),!1)},s.prototype.onWheel=function(n){var l=this._getPixelsScrolled(n);return l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(n,l))},s.prototype._getPixelsScrolled=function(n){if(n.deltaY===0||n.shiftKey)return 0;var l=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l},s.prototype.getLinesScrolled=function(n){if(n.deltaY===0||n.shiftKey)return 0;var l=this._applyScrollModifier(n.deltaY,n);return n.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l},s.prototype._applyScrollModifier=function(n,l){var a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&l.altKey||a==="ctrl"&&l.ctrlKey||a==="shift"&&l.shiftKey?n*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:n*this._optionsService.rawOptions.scrollSensitivity},s.prototype.onTouchStart=function(n){this._lastTouchY=n.touches[0].pageY},s.prototype.onTouchMove=function(n){var l=this._lastTouchY-n.touches[0].pageY;return this._lastTouchY=n.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(n,l))},_([v(4,p.IBufferService),v(5,p.IOptionsService),v(6,c.ICharSizeService),v(7,c.IRenderService)],s)}(T.Disposable);h.Viewport=C},2950:function(D,h,L){var y=this&&this.__decorate||function(w,c,p,C){var d,s=arguments.length,n=s<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(w,c,p,C);else for(var l=w.length-1;l>=0;l--)(d=w[l])&&(n=(s<3?d(n):s>3?d(c,p,n):d(c,p))||n);return s>3&&n&&Object.defineProperty(c,p,n),n},m=this&&this.__param||function(w,c){return function(p,C){c(p,C,w)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CompositionHelper=void 0;var _=L(4725),v=L(2585),T=function(){function w(c,p,C,d,s,n){this._textarea=c,this._compositionView=p,this._bufferService=C,this._optionsService=d,this._coreService=s,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(w.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),w.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},w.prototype.compositionupdate=function(c){var p=this;this._compositionView.textContent=c.data,this.updateCompositionElements(),setTimeout(function(){p._compositionPosition.end=p._textarea.value.length},0)},w.prototype.compositionend=function(){this._finalizeComposition(!0)},w.prototype.keydown=function(c){if(this._isComposing||this._isSendingComposition){if(c.keyCode===229||c.keyCode===16||c.keyCode===17||c.keyCode===18)return!1;this._finalizeComposition(!1)}return c.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},w.prototype._finalizeComposition=function(c){var p=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,c){var C={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(p._isSendingComposition){p._isSendingComposition=!1;var s;C.start+=p._dataAlreadySent.length,(s=p._isComposing?p._textarea.value.substring(C.start,C.end):p._textarea.value.substring(C.start)).length>0&&p._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;var d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}},w.prototype._handleAnyTextareaChanges=function(){var c=this,p=this._textarea.value;setTimeout(function(){if(!c._isComposing){var C=c._textarea.value.replace(p,"");C.length>0&&(c._dataAlreadySent=C,c._coreService.triggerDataEvent(C,!0))}},0)},w.prototype.updateCompositionElements=function(c){var p=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var C=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.actualCellHeight,s=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,n=C*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=n+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var l=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}c||setTimeout(function(){return p.updateCompositionElements(!0)},0)}},y([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,v.ICoreService),m(5,_.IRenderService)],w)}();h.CompositionHelper=T},9806:(D,h)=>{function L(y,m){var _=m.getBoundingClientRect();return[y.clientX-_.left,y.clientY-_.top]}Object.defineProperty(h,"__esModule",{value:!0}),h.getRawByteCoords=h.getCoords=h.getCoordsRelativeToElement=void 0,h.getCoordsRelativeToElement=L,h.getCoords=function(y,m,_,v,T,w,c,p){if(T){var C=L(y,m);if(C)return C[0]=Math.ceil((C[0]+(p?w/2:0))/w),C[1]=Math.ceil(C[1]/c),C[0]=Math.min(Math.max(C[0],1),_+(p?1:0)),C[1]=Math.min(Math.max(C[1],1),v),C}},h.getRawByteCoords=function(y){if(y)return{x:y[0]+32,y:y[1]+32}}},9504:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.moveToCellSequence=void 0;var y=L(2584);function m(p,C,d,s){var n=p-_(d,p),l=C-_(d,C),a=Math.abs(n-l)-function(u,g,b){for(var k=0,O=u-_(b,u),E=g-_(b,g),A=0;A<Math.abs(O-E);A++){var W=v(u,g)==="A"?-1:1,R=b.buffer.lines.get(O+W*A);R?.isWrapped&&k++}return k}(p,C,d);return c(a,w(v(p,C),s))}function _(p,C){for(var d=0,s=p.buffer.lines.get(C),n=s?.isWrapped;n&&C>=0&&C<p.rows;)d++,n=(s=p.buffer.lines.get(--C))==null?void 0:s.isWrapped;return d}function v(p,C){return p>C?"A":"B"}function T(p,C,d,s,n,l){for(var a=p,u=C,g="";a!==d||u!==s;)a+=n?1:-1,n&&a>l.cols-1?(g+=l.buffer.translateBufferLineToString(u,!1,p,a),a=0,p=0,u++):!n&&a<0&&(g+=l.buffer.translateBufferLineToString(u,!1,0,p+1),p=a=l.cols-1,u--);return g+l.buffer.translateBufferLineToString(u,!1,p,a)}function w(p,C){var d=C?"O":"[";return y.C0.ESC+d+p}function c(p,C){p=Math.floor(p);for(var d="",s=0;s<p;s++)d+=C;return d}h.moveToCellSequence=function(p,C,d,s){var n,l=d.buffer.x,a=d.buffer.y;if(!d.buffer.hasScrollback)return function(g,b,k,O,E,A){return m(b,O,E,A).length===0?"":c(T(g,b,g,b-_(E,b),!1,E).length,w("D",A))}(l,a,0,C,d,s)+m(a,C,d,s)+function(g,b,k,O,E,A){var W;W=m(b,O,E,A).length>0?O-_(E,O):b;var R=O,j=function(B,P,N,z,V,te){var re;return re=m(N,z,V,te).length>0?z-_(V,z):P,B<N&&re<=z||B>=N&&re<z?"C":"D"}(g,b,k,O,E,A);return c(T(g,W,k,R,j==="C",E).length,w(j,A))}(l,a,p,C,d,s);if(a===C)return n=l>p?"D":"C",c(Math.abs(l-p),w(n,s));n=a>C?"D":"C";var u=Math.abs(a-C);return c(function(g,b){return b.cols-g}(a>C?p:l,d)+(u-1)*d.cols+1+((a>C?l:p)-1),w(n,s))}},4389:function(D,h,L){var y=this&&this.__assign||function(){return y=Object.assign||function(d){for(var s,n=1,l=arguments.length;n<l;n++)for(var a in s=arguments[n])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},y.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;var m=L(3236),_=L(9042),v=L(7975),T=L(7090),w=L(5741),c=L(8285),p=["cols","rows"],C=function(){function d(s){var n=this;this._core=new m.Terminal(s),this._addonManager=new w.AddonManager,this._publicOptions=y({},this._core.options);var l=function(b){return n._core.options[b]},a=function(b,k){n._checkReadonlyOptions(b),n._core.options[b]=k};for(var u in this._core.options){var g={get:l.bind(this,u),set:a.bind(this,u)};Object.defineProperty(this._publicOptions,u,g)}}return d.prototype._checkReadonlyOptions=function(s){if(p.includes(s))throw new Error('Option "'+s+'" can only be set in the constructor')},d.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(d.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new v.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"unicode",{get:function(){return this._checkProposedApi(),new T.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new c.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"modes",{get:function(){var s=this._core.coreService.decPrivateModes,n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"options",{get:function(){return this._publicOptions},set:function(s){for(var n in s)this._publicOptions[n]=s[n]},enumerable:!1,configurable:!0}),d.prototype.blur=function(){this._core.blur()},d.prototype.focus=function(){this._core.focus()},d.prototype.resize=function(s,n){this._verifyIntegers(s,n),this._core.resize(s,n)},d.prototype.open=function(s){this._core.open(s)},d.prototype.attachCustomKeyEventHandler=function(s){this._core.attachCustomKeyEventHandler(s)},d.prototype.registerLinkMatcher=function(s,n,l){return this._checkProposedApi(),this._core.registerLinkMatcher(s,n,l)},d.prototype.deregisterLinkMatcher=function(s){this._checkProposedApi(),this._core.deregisterLinkMatcher(s)},d.prototype.registerLinkProvider=function(s){return this._checkProposedApi(),this._core.registerLinkProvider(s)},d.prototype.registerCharacterJoiner=function(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)},d.prototype.deregisterCharacterJoiner=function(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)},d.prototype.registerMarker=function(s){return s===void 0&&(s=0),this._checkProposedApi(),this._verifyIntegers(s),this._core.addMarker(s)},d.prototype.registerDecoration=function(s){var n,l,a;return this._checkProposedApi(),this._verifyPositiveIntegers((n=s.x)!==null&&n!==void 0?n:0,(l=s.width)!==null&&l!==void 0?l:0,(a=s.height)!==null&&a!==void 0?a:0),this._core.registerDecoration(s)},d.prototype.addMarker=function(s){return this.registerMarker(s)},d.prototype.hasSelection=function(){return this._core.hasSelection()},d.prototype.select=function(s,n,l){this._verifyIntegers(s,n,l),this._core.select(s,n,l)},d.prototype.getSelection=function(){return this._core.getSelection()},d.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},d.prototype.clearSelection=function(){this._core.clearSelection()},d.prototype.selectAll=function(){this._core.selectAll()},d.prototype.selectLines=function(s,n){this._verifyIntegers(s,n),this._core.selectLines(s,n)},d.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},d.prototype.scrollLines=function(s){this._verifyIntegers(s),this._core.scrollLines(s)},d.prototype.scrollPages=function(s){this._verifyIntegers(s),this._core.scrollPages(s)},d.prototype.scrollToTop=function(){this._core.scrollToTop()},d.prototype.scrollToBottom=function(){this._core.scrollToBottom()},d.prototype.scrollToLine=function(s){this._verifyIntegers(s),this._core.scrollToLine(s)},d.prototype.clear=function(){this._core.clear()},d.prototype.write=function(s,n){this._core.write(s,n)},d.prototype.writeUtf8=function(s,n){this._core.write(s,n)},d.prototype.writeln=function(s,n){this._core.write(s),this._core.write(`\r
`,n)},d.prototype.paste=function(s){this._core.paste(s)},d.prototype.getOption=function(s){return this._core.optionsService.getOption(s)},d.prototype.setOption=function(s,n){this._checkReadonlyOptions(s),this._core.optionsService.setOption(s,n)},d.prototype.refresh=function(s,n){this._verifyIntegers(s,n),this._core.refresh(s,n)},d.prototype.reset=function(){this._core.reset()},d.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},d.prototype.loadAddon=function(s){return this._addonManager.loadAddon(this,s)},Object.defineProperty(d,"strings",{get:function(){return _},enumerable:!1,configurable:!0}),d.prototype._verifyIntegers=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];for(var l=0,a=s;l<a.length;l++){var u=a[l];if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}},d.prototype._verifyPositiveIntegers=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];for(var l=0,a=s;l<a.length;l++){var u=a[l];if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}},d}();h.Terminal=C},1546:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseRenderLayer=void 0;var y=L(643),m=L(8803),_=L(1420),v=L(3734),T=L(1752),w=L(4774),c=L(9631),p=L(8978),C=function(){function d(s,n,l,a,u,g,b,k){this._container=s,this._alpha=a,this._colors=u,this._rendererId=g,this._bufferService=b,this._optionsService=k,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+n+"-layer"),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return d.prototype.dispose=function(){var s;(0,c.removeElementFromParent)(this._canvas),(s=this._charAtlas)===null||s===void 0||s.dispose()},d.prototype._initCanvas=function(){this._ctx=(0,T.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},d.prototype.onOptionsChanged=function(){},d.prototype.onBlur=function(){},d.prototype.onFocus=function(){},d.prototype.onCursorMove=function(){},d.prototype.onGridChanged=function(s,n){},d.prototype.onSelectionChanged=function(s,n,l){l===void 0&&(l=!1)},d.prototype.setColors=function(s){this._refreshCharAtlas(s)},d.prototype._setTransparency=function(s){if(s!==this._alpha){var n=this._canvas;this._alpha=s,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,n),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},d.prototype._refreshCharAtlas=function(s){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,_.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,s,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},d.prototype.resize=function(s){this._scaledCellWidth=s.scaledCellWidth,this._scaledCellHeight=s.scaledCellHeight,this._scaledCharWidth=s.scaledCharWidth,this._scaledCharHeight=s.scaledCharHeight,this._scaledCharLeft=s.scaledCharLeft,this._scaledCharTop=s.scaledCharTop,this._canvas.width=s.scaledCanvasWidth,this._canvas.height=s.scaledCanvasHeight,this._canvas.style.width=s.canvasWidth+"px",this._canvas.style.height=s.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},d.prototype.clearTextureAtlas=function(){var s;(s=this._charAtlas)===null||s===void 0||s.clear()},d.prototype._fillCells=function(s,n,l,a){this._ctx.fillRect(s*this._scaledCellWidth,n*this._scaledCellHeight,l*this._scaledCellWidth,a*this._scaledCellHeight)},d.prototype._fillMiddleLineAtCells=function(s,n,l){l===void 0&&(l=1);var a=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(s*this._scaledCellWidth,(n+1)*this._scaledCellHeight-a-window.devicePixelRatio,l*this._scaledCellWidth,window.devicePixelRatio)},d.prototype._fillBottomLineAtCells=function(s,n,l){l===void 0&&(l=1),this._ctx.fillRect(s*this._scaledCellWidth,(n+1)*this._scaledCellHeight-window.devicePixelRatio-1,l*this._scaledCellWidth,window.devicePixelRatio)},d.prototype._fillLeftLineAtCell=function(s,n,l){this._ctx.fillRect(s*this._scaledCellWidth,n*this._scaledCellHeight,window.devicePixelRatio*l,this._scaledCellHeight)},d.prototype._strokeRectAtCell=function(s,n,l,a){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(s*this._scaledCellWidth+window.devicePixelRatio/2,n*this._scaledCellHeight+window.devicePixelRatio/2,l*this._scaledCellWidth-window.devicePixelRatio,a*this._scaledCellHeight-window.devicePixelRatio)},d.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},d.prototype._clearCells=function(s,n,l,a){this._alpha?this._ctx.clearRect(s*this._scaledCellWidth,n*this._scaledCellHeight,l*this._scaledCellWidth,a*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(s*this._scaledCellWidth,n*this._scaledCellHeight,l*this._scaledCellWidth,a*this._scaledCellHeight))},d.prototype._fillCharTrueColor=function(s,n,l){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=m.TEXT_BASELINE,this._clipRow(l);var a=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(a=(0,p.tryDrawCustomChar)(this._ctx,s.getChars(),n*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),a||this._ctx.fillText(s.getChars(),n*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},d.prototype._drawChars=function(s,n,l){var a,u,g,b=this._getContrastColor(s);b||s.isFgRGB()||s.isBgRGB()?this._drawUncachedChars(s,n,l,b):(s.isInverse()?(u=s.isBgDefault()?m.INVERTED_DEFAULT_COLOR:s.getBgColor(),g=s.isFgDefault()?m.INVERTED_DEFAULT_COLOR:s.getFgColor()):(g=s.isBgDefault()?y.DEFAULT_COLOR:s.getBgColor(),u=s.isFgDefault()?y.DEFAULT_COLOR:s.getFgColor()),u+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&s.isBold()&&u<8?8:0,this._currentGlyphIdentifier.chars=s.getChars()||y.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=s.getCode()||y.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=g,this._currentGlyphIdentifier.fg=u,this._currentGlyphIdentifier.bold=!!s.isBold(),this._currentGlyphIdentifier.dim=!!s.isDim(),this._currentGlyphIdentifier.italic=!!s.isItalic(),!((a=this._charAtlas)===null||a===void 0)&&a.draw(this._ctx,this._currentGlyphIdentifier,n*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(s,n,l))},d.prototype._drawUncachedChars=function(s,n,l,a){if(this._ctx.save(),this._ctx.font=this._getFont(!!s.isBold(),!!s.isItalic()),this._ctx.textBaseline=m.TEXT_BASELINE,s.isInverse())if(a)this._ctx.fillStyle=a.css;else if(s.isBgDefault())this._ctx.fillStyle=w.color.opaque(this._colors.background).css;else if(s.isBgRGB())this._ctx.fillStyle="rgb("+v.AttributeData.toColorRGB(s.getBgColor()).join(",")+")";else{var u=s.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&s.isBold()&&u<8&&(u+=8),this._ctx.fillStyle=this._colors.ansi[u].css}else if(a)this._ctx.fillStyle=a.css;else if(s.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(s.isFgRGB())this._ctx.fillStyle="rgb("+v.AttributeData.toColorRGB(s.getFgColor()).join(",")+")";else{var g=s.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&s.isBold()&&g<8&&(g+=8),this._ctx.fillStyle=this._colors.ansi[g].css}this._clipRow(l),s.isDim()&&(this._ctx.globalAlpha=m.DIM_OPACITY);var b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,p.tryDrawCustomChar)(this._ctx,s.getChars(),n*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),b||this._ctx.fillText(s.getChars(),n*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},d.prototype._clipRow=function(s){this._ctx.beginPath(),this._ctx.rect(0,s*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},d.prototype._getFont=function(s,n){return(n?"italic":"")+" "+(s?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},d.prototype._getContrastColor=function(s){if(this._optionsService.rawOptions.minimumContrastRatio!==1){var n=this._colors.contrastCache.getColor(s.bg,s.fg);if(n!==void 0)return n||void 0;var l=s.getFgColor(),a=s.getFgColorMode(),u=s.getBgColor(),g=s.getBgColorMode(),b=!!s.isInverse(),k=!!s.isInverse();if(b){var O=l;l=u,u=O;var E=a;a=g,g=E}var A=this._resolveBackgroundRgba(g,u,b),W=this._resolveForegroundRgba(a,l,b,k),R=w.rgba.ensureContrastRatio(A,W,this._optionsService.rawOptions.minimumContrastRatio);if(R){var j={css:w.channels.toCss(R>>24&255,R>>16&255,R>>8&255),rgba:R};return this._colors.contrastCache.setColor(s.bg,s.fg,j),j}this._colors.contrastCache.setColor(s.bg,s.fg,null)}},d.prototype._resolveBackgroundRgba=function(s,n,l){switch(s){case 16777216:case 33554432:return this._colors.ansi[n].rgba;case 50331648:return n<<8;default:return l?this._colors.foreground.rgba:this._colors.background.rgba}},d.prototype._resolveForegroundRgba=function(s,n,l,a){switch(s){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&a&&n<8&&(n+=8),this._colors.ansi[n].rgba;case 50331648:return n<<8;default:return l?this._colors.background.rgba:this._colors.foreground.rgba}},d}();h.BaseRenderLayer=C},2512:function(D,h,L){var y,m=this&&this.__extends||(y=function(n,l){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(a[g]=u[g])},y(n,l)},function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function a(){this.constructor=n}y(n,l),n.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}),_=this&&this.__decorate||function(n,l,a,u){var g,b=arguments.length,k=b<3?l:u===null?u=Object.getOwnPropertyDescriptor(l,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(n,l,a,u);else for(var O=n.length-1;O>=0;O--)(g=n[O])&&(k=(b<3?g(k):b>3?g(l,a,k):g(l,a))||k);return b>3&&k&&Object.defineProperty(l,a,k),k},v=this&&this.__param||function(n,l){return function(a,u){l(a,u,n)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CursorRenderLayer=void 0;var T=L(1546),w=L(511),c=L(2585),p=L(4725),C=600,d=function(n){function l(a,u,g,b,k,O,E,A,W){var R=n.call(this,a,"cursor",u,!0,g,b,O,E)||this;return R._onRequestRedraw=k,R._coreService=A,R._coreBrowserService=W,R._cell=new w.CellData,R._state={x:0,y:0,isFocused:!1,style:"",width:0},R._cursorRenderers={bar:R._renderBarCursor.bind(R),block:R._renderBlockCursor.bind(R),underline:R._renderUnderlineCursor.bind(R)},R}return m(l,n),l.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),n.prototype.dispose.call(this)},l.prototype.resize=function(a){n.prototype.resize.call(this,a),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},l.prototype.reset=function(){var a;this._clearCursor(),(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation(),this.onOptionsChanged()},l.prototype.onBlur=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onFocus=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onOptionsChanged=function(){var a,u=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new s(this._coreBrowserService.isFocused,function(){u._render(!0)})):((a=this._cursorBlinkStateManager)===null||a===void 0||a.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onCursorMove=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation()},l.prototype.onGridChanged=function(a,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},l.prototype._render=function(a){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,g=u-this._bufferService.buffer.ydisp;if(g<0||g>=this._bufferService.rows)this._clearCursor();else{var b=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(b,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var k=this._optionsService.rawOptions.cursorStyle;return k&&k!=="block"?this._cursorRenderers[k](b,g,this._cell):this._renderBlurCursor(b,g,this._cell),this._ctx.restore(),this._state.x=b,this._state.y=g,this._state.isFocused=!1,this._state.style=k,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===b&&this._state.y===g&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](b,g,this._cell),this._ctx.restore(),this._state.x=b,this._state.y=g,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},l.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},l.prototype._renderBarCursor=function(a,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(a,u,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},l.prototype._renderBlockCursor=function(a,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(a,u,g.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(g,a,u),this._ctx.restore()},l.prototype._renderUnderlineCursor=function(a,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(a,u),this._ctx.restore()},l.prototype._renderBlurCursor=function(a,u,g){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(a,u,g.getWidth(),1),this._ctx.restore()},_([v(5,c.IBufferService),v(6,c.IOptionsService),v(7,c.ICoreService),v(8,p.ICoreBrowserService)],l)}(T.BaseRenderLayer);h.CursorRenderLayer=d;var s=function(){function n(l,a){this._renderCallback=a,this.isCursorVisible=!0,l&&this._restartInterval()}return Object.defineProperty(n.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},n.prototype.restartBlinkAnimation=function(){var l=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=void 0})))},n.prototype._restartInterval=function(l){var a=this;l===void 0&&(l=C),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(a._animationTimeRestarted){var u=C-(Date.now()-a._animationTimeRestarted);if(a._animationTimeRestarted=void 0,u>0)return void a._restartInterval(u)}a.isCursorVisible=!1,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0}),a._blinkInterval=window.setInterval(function(){if(a._animationTimeRestarted){var g=C-(Date.now()-a._animationTimeRestarted);return a._animationTimeRestarted=void 0,void a._restartInterval(g)}a.isCursorVisible=!a.isCursorVisible,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0})},C)},l)},n.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},n.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},n}()},8978:(D,h,L)=>{var y,m,_,v,T,w,c,p,C,d,s,n,l,a,u,g,b,k,O,E,A,W,R,j,B,P,N,z,V,te,re,fe,he,xe,U,ee,K,Y,G,Se,de,Ce,De,Fe,Ae,ye,je,Je,Tt,ar,Sr,Cr,Jr,di,Fr,Qr,Wt,pi,vt,Ne,lr,ut,jt,we,cr,Qe,Ee,We,ur,Ke,At,Xe,fr,ft,tr,Yt,Nr,wr,et,Wr,Lr,Mt,xr,jr,Ur,kr,Zt,gt,ht,zr,Ut,hr,dr,bt,St,dt,Er,Tr,Ie,be,Ot,Ar,it,Re,Rt,rr,Mr,le,H,X,oe,ce,Te,Oe,ge,Ze,_t,Or,zt,Di,Bi,qr,vi,Pi,gi,Ii,Hi,Fi;Object.defineProperty(h,"__esModule",{value:!0}),h.tryDrawCustomChar=h.boxDrawingDefinitions=h.blockElementDefinitions=void 0;var cn=L(1752);h.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var po={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};h.boxDrawingDefinitions={"\u2500":(y={},y[1]="M0,.5 L1,.5",y),"\u2501":(m={},m[3]="M0,.5 L1,.5",m),"\u2502":(_={},_[1]="M.5,0 L.5,1",_),"\u2503":(v={},v[3]="M.5,0 L.5,1",v),"\u250C":(T={},T[1]="M0.5,1 L.5,.5 L1,.5",T),"\u250F":(w={},w[3]="M0.5,1 L.5,.5 L1,.5",w),"\u2510":(c={},c[1]="M0,.5 L.5,.5 L.5,1",c),"\u2513":(p={},p[3]="M0,.5 L.5,.5 L.5,1",p),"\u2514":(C={},C[1]="M.5,0 L.5,.5 L1,.5",C),"\u2517":(d={},d[3]="M.5,0 L.5,.5 L1,.5",d),"\u2518":(s={},s[1]="M.5,0 L.5,.5 L0,.5",s),"\u251B":(n={},n[3]="M.5,0 L.5,.5 L0,.5",n),"\u251C":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L1,.5",l),"\u2523":(a={},a[3]="M.5,0 L.5,1 M.5,.5 L1,.5",a),"\u2524":(u={},u[1]="M.5,0 L.5,1 M.5,.5 L0,.5",u),"\u252B":(g={},g[3]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"\u252C":(b={},b[1]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2533":(k={},k[3]="M0,.5 L1,.5 M.5,.5 L.5,1",k),"\u2534":(O={},O[1]="M0,.5 L1,.5 M.5,.5 L.5,0",O),"\u253B":(E={},E[3]="M0,.5 L1,.5 M.5,.5 L.5,0",E),"\u253C":(A={},A[1]="M0,.5 L1,.5 M.5,0 L.5,1",A),"\u254B":(W={},W[3]="M0,.5 L1,.5 M.5,0 L.5,1",W),"\u2574":(R={},R[1]="M.5,.5 L0,.5",R),"\u2578":(j={},j[3]="M.5,.5 L0,.5",j),"\u2575":(B={},B[1]="M.5,.5 L.5,0",B),"\u2579":(P={},P[3]="M.5,.5 L.5,0",P),"\u2576":(N={},N[1]="M.5,.5 L1,.5",N),"\u257A":(z={},z[3]="M.5,.5 L1,.5",z),"\u2577":(V={},V[1]="M.5,.5 L.5,1",V),"\u257B":(te={},te[3]="M.5,.5 L.5,1",te),"\u2550":(re={},re[1]=function(se,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},re),"\u2551":(fe={},fe[1]=function(se,ie){return"M"+(.5-se)+",0 L"+(.5-se)+",1 M"+(.5+se)+",0 L"+(.5+se)+",1"},fe),"\u2552":(he={},he[1]=function(se,ie){return"M.5,1 L.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},he),"\u2553":(xe={},xe[1]=function(se,ie){return"M"+(.5-se)+",1 L"+(.5-se)+",.5 L1,.5 M"+(.5+se)+",.5 L"+(.5+se)+",1"},xe),"\u2554":(U={},U[1]=function(se,ie){return"M1,"+(.5-ie)+" L"+(.5-se)+","+(.5-ie)+" L"+(.5-se)+",1 M1,"+(.5+ie)+" L"+(.5+se)+","+(.5+ie)+" L"+(.5+se)+",1"},U),"\u2555":(ee={},ee[1]=function(se,ie){return"M0,"+(.5-ie)+" L.5,"+(.5-ie)+" L.5,1 M0,"+(.5+ie)+" L.5,"+(.5+ie)},ee),"\u2556":(K={},K[1]=function(se,ie){return"M"+(.5+se)+",1 L"+(.5+se)+",.5 L0,.5 M"+(.5-se)+",.5 L"+(.5-se)+",1"},K),"\u2557":(Y={},Y[1]=function(se,ie){return"M0,"+(.5+ie)+" L"+(.5-se)+","+(.5+ie)+" L"+(.5-se)+",1 M0,"+(.5-ie)+" L"+(.5+se)+","+(.5-ie)+" L"+(.5+se)+",1"},Y),"\u2558":(G={},G[1]=function(se,ie){return"M.5,0 L.5,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5-ie)+" L1,"+(.5-ie)},G),"\u2559":(Se={},Se[1]=function(se,ie){return"M1,.5 L"+(.5-se)+",.5 L"+(.5-se)+",0 M"+(.5+se)+",.5 L"+(.5+se)+",0"},Se),"\u255A":(de={},de[1]=function(se,ie){return"M1,"+(.5-ie)+" L"+(.5+se)+","+(.5-ie)+" L"+(.5+se)+",0 M1,"+(.5+ie)+" L"+(.5-se)+","+(.5+ie)+" L"+(.5-se)+",0"},de),"\u255B":(Ce={},Ce[1]=function(se,ie){return"M0,"+(.5+ie)+" L.5,"+(.5+ie)+" L.5,0 M0,"+(.5-ie)+" L.5,"+(.5-ie)},Ce),"\u255C":(De={},De[1]=function(se,ie){return"M0,.5 L"+(.5+se)+",.5 L"+(.5+se)+",0 M"+(.5-se)+",.5 L"+(.5-se)+",0"},De),"\u255D":(Fe={},Fe[1]=function(se,ie){return"M0,"+(.5-ie)+" L"+(.5-se)+","+(.5-ie)+" L"+(.5-se)+",0 M0,"+(.5+ie)+" L"+(.5+se)+","+(.5+ie)+" L"+(.5+se)+",0"},Fe),"\u255E":(Ae={},Ae[1]=function(se,ie){return"M.5,0 L.5,1 M.5,"+(.5-ie)+" L1,"+(.5-ie)+" M.5,"+(.5+ie)+" L1,"+(.5+ie)},Ae),"\u255F":(ye={},ye[1]=function(se,ie){return"M"+(.5-se)+",0 L"+(.5-se)+",1 M"+(.5+se)+",0 L"+(.5+se)+",1 M"+(.5+se)+",.5 L1,.5"},ye),"\u2560":(je={},je[1]=function(se,ie){return"M"+(.5-se)+",0 L"+(.5-se)+",1 M1,"+(.5+ie)+" L"+(.5+se)+","+(.5+ie)+" L"+(.5+se)+",1 M1,"+(.5-ie)+" L"+(.5+se)+","+(.5-ie)+" L"+(.5+se)+",0"},je),"\u2561":(Je={},Je[1]=function(se,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L.5,"+(.5-ie)+" M0,"+(.5+ie)+" L.5,"+(.5+ie)},Je),"\u2562":(Tt={},Tt[1]=function(se,ie){return"M0,.5 L"+(.5-se)+",.5 M"+(.5-se)+",0 L"+(.5-se)+",1 M"+(.5+se)+",0 L"+(.5+se)+",1"},Tt),"\u2563":(ar={},ar[1]=function(se,ie){return"M"+(.5+se)+",0 L"+(.5+se)+",1 M0,"+(.5+ie)+" L"+(.5-se)+","+(.5+ie)+" L"+(.5-se)+",1 M0,"+(.5-ie)+" L"+(.5-se)+","+(.5-ie)+" L"+(.5-se)+",0"},ar),"\u2564":(Sr={},Sr[1]=function(se,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)+" M.5,"+(.5+ie)+" L.5,1"},Sr),"\u2565":(Cr={},Cr[1]=function(se,ie){return"M0,.5 L1,.5 M"+(.5-se)+",.5 L"+(.5-se)+",1 M"+(.5+se)+",.5 L"+(.5+se)+",1"},Cr),"\u2566":(Jr={},Jr[1]=function(se,ie){return"M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L"+(.5-se)+","+(.5+ie)+" L"+(.5-se)+",1 M1,"+(.5+ie)+" L"+(.5+se)+","+(.5+ie)+" L"+(.5+se)+",1"},Jr),"\u2567":(di={},di[1]=function(se,ie){return"M.5,0 L.5,"+(.5-ie)+" M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},di),"\u2568":(Fr={},Fr[1]=function(se,ie){return"M0,.5 L1,.5 M"+(.5-se)+",.5 L"+(.5-se)+",0 M"+(.5+se)+",.5 L"+(.5+se)+",0"},Fr),"\u2569":(Qr={},Qr[1]=function(se,ie){return"M0,"+(.5+ie)+" L1,"+(.5+ie)+" M0,"+(.5-ie)+" L"+(.5-se)+","+(.5-ie)+" L"+(.5-se)+",0 M1,"+(.5-ie)+" L"+(.5+se)+","+(.5-ie)+" L"+(.5+se)+",0"},Qr),"\u256A":(Wt={},Wt[1]=function(se,ie){return"M.5,0 L.5,1 M0,"+(.5-ie)+" L1,"+(.5-ie)+" M0,"+(.5+ie)+" L1,"+(.5+ie)},Wt),"\u256B":(pi={},pi[1]=function(se,ie){return"M0,.5 L1,.5 M"+(.5-se)+",0 L"+(.5-se)+",1 M"+(.5+se)+",0 L"+(.5+se)+",1"},pi),"\u256C":(vt={},vt[1]=function(se,ie){return"M0,"+(.5+ie)+" L"+(.5-se)+","+(.5+ie)+" L"+(.5-se)+",1 M1,"+(.5+ie)+" L"+(.5+se)+","+(.5+ie)+" L"+(.5+se)+",1 M0,"+(.5-ie)+" L"+(.5-se)+","+(.5-ie)+" L"+(.5-se)+",0 M1,"+(.5-ie)+" L"+(.5+se)+","+(.5-ie)+" L"+(.5+se)+",0"},vt),"\u2571":(Ne={},Ne[1]="M1,0 L0,1",Ne),"\u2572":(lr={},lr[1]="M0,0 L1,1",lr),"\u2573":(ut={},ut[1]="M1,0 L0,1 M0,0 L1,1",ut),"\u257C":(jt={},jt[1]="M.5,.5 L0,.5",jt[3]="M.5,.5 L1,.5",jt),"\u257D":(we={},we[1]="M.5,.5 L.5,0",we[3]="M.5,.5 L.5,1",we),"\u257E":(cr={},cr[1]="M.5,.5 L1,.5",cr[3]="M.5,.5 L0,.5",cr),"\u257F":(Qe={},Qe[1]="M.5,.5 L.5,1",Qe[3]="M.5,.5 L.5,0",Qe),"\u250D":(Ee={},Ee[1]="M.5,.5 L.5,1",Ee[3]="M.5,.5 L1,.5",Ee),"\u250E":(We={},We[1]="M.5,.5 L1,.5",We[3]="M.5,.5 L.5,1",We),"\u2511":(ur={},ur[1]="M.5,.5 L.5,1",ur[3]="M.5,.5 L0,.5",ur),"\u2512":(Ke={},Ke[1]="M.5,.5 L0,.5",Ke[3]="M.5,.5 L.5,1",Ke),"\u2515":(At={},At[1]="M.5,.5 L.5,0",At[3]="M.5,.5 L1,.5",At),"\u2516":(Xe={},Xe[1]="M.5,.5 L1,.5",Xe[3]="M.5,.5 L.5,0",Xe),"\u2519":(fr={},fr[1]="M.5,.5 L.5,0",fr[3]="M.5,.5 L0,.5",fr),"\u251A":(ft={},ft[1]="M.5,.5 L0,.5",ft[3]="M.5,.5 L.5,0",ft),"\u251D":(tr={},tr[1]="M.5,0 L.5,1",tr[3]="M.5,.5 L1,.5",tr),"\u251E":(Yt={},Yt[1]="M0.5,1 L.5,.5 L1,.5",Yt[3]="M.5,.5 L.5,0",Yt),"\u251F":(Nr={},Nr[1]="M.5,0 L.5,.5 L1,.5",Nr[3]="M.5,.5 L.5,1",Nr),"\u2520":(wr={},wr[1]="M.5,.5 L1,.5",wr[3]="M.5,0 L.5,1",wr),"\u2521":(et={},et[1]="M.5,.5 L.5,1",et[3]="M.5,0 L.5,.5 L1,.5",et),"\u2522":(Wr={},Wr[1]="M.5,.5 L.5,0",Wr[3]="M0.5,1 L.5,.5 L1,.5",Wr),"\u2525":(Lr={},Lr[1]="M.5,0 L.5,1",Lr[3]="M.5,.5 L0,.5",Lr),"\u2526":(Mt={},Mt[1]="M0,.5 L.5,.5 L.5,1",Mt[3]="M.5,.5 L.5,0",Mt),"\u2527":(xr={},xr[1]="M.5,0 L.5,.5 L0,.5",xr[3]="M.5,.5 L.5,1",xr),"\u2528":(jr={},jr[1]="M.5,.5 L0,.5",jr[3]="M.5,0 L.5,1",jr),"\u2529":(Ur={},Ur[1]="M.5,.5 L.5,1",Ur[3]="M.5,0 L.5,.5 L0,.5",Ur),"\u252A":(kr={},kr[1]="M.5,.5 L.5,0",kr[3]="M0,.5 L.5,.5 L.5,1",kr),"\u252D":(Zt={},Zt[1]="M0.5,1 L.5,.5 L1,.5",Zt[3]="M.5,.5 L0,.5",Zt),"\u252E":(gt={},gt[1]="M0,.5 L.5,.5 L.5,1",gt[3]="M.5,.5 L1,.5",gt),"\u252F":(ht={},ht[1]="M.5,.5 L.5,1",ht[3]="M0,.5 L1,.5",ht),"\u2530":(zr={},zr[1]="M0,.5 L1,.5",zr[3]="M.5,.5 L.5,1",zr),"\u2531":(Ut={},Ut[1]="M.5,.5 L1,.5",Ut[3]="M0,.5 L.5,.5 L.5,1",Ut),"\u2532":(hr={},hr[1]="M.5,.5 L0,.5",hr[3]="M0.5,1 L.5,.5 L1,.5",hr),"\u2535":(dr={},dr[1]="M.5,0 L.5,.5 L1,.5",dr[3]="M.5,.5 L0,.5",dr),"\u2536":(bt={},bt[1]="M.5,0 L.5,.5 L0,.5",bt[3]="M.5,.5 L1,.5",bt),"\u2537":(St={},St[1]="M.5,.5 L.5,0",St[3]="M0,.5 L1,.5",St),"\u2538":(dt={},dt[1]="M0,.5 L1,.5",dt[3]="M.5,.5 L.5,0",dt),"\u2539":(Er={},Er[1]="M.5,.5 L1,.5",Er[3]="M.5,0 L.5,.5 L0,.5",Er),"\u253A":(Tr={},Tr[1]="M.5,.5 L0,.5",Tr[3]="M.5,0 L.5,.5 L1,.5",Tr),"\u253D":(Ie={},Ie[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Ie[3]="M.5,.5 L0,.5",Ie),"\u253E":(be={},be[1]="M.5,0 L.5,1 M.5,.5 L0,.5",be[3]="M.5,.5 L1,.5",be),"\u253F":(Ot={},Ot[1]="M.5,0 L.5,1",Ot[3]="M0,.5 L1,.5",Ot),"\u2540":(Ar={},Ar[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ar[3]="M.5,.5 L.5,0",Ar),"\u2541":(it={},it[1]="M.5,.5 L.5,0 M0,.5 L1,.5",it[3]="M.5,.5 L.5,1",it),"\u2542":(Re={},Re[1]="M0,.5 L1,.5",Re[3]="M.5,0 L.5,1",Re),"\u2543":(Rt={},Rt[1]="M0.5,1 L.5,.5 L1,.5",Rt[3]="M.5,0 L.5,.5 L0,.5",Rt),"\u2544":(rr={},rr[1]="M0,.5 L.5,.5 L.5,1",rr[3]="M.5,0 L.5,.5 L1,.5",rr),"\u2545":(Mr={},Mr[1]="M.5,0 L.5,.5 L1,.5",Mr[3]="M0,.5 L.5,.5 L.5,1",Mr),"\u2546":(le={},le[1]="M.5,0 L.5,.5 L0,.5",le[3]="M0.5,1 L.5,.5 L1,.5",le),"\u2547":(H={},H[1]="M.5,.5 L.5,1",H[3]="M.5,.5 L.5,0 M0,.5 L1,.5",H),"\u2548":(X={},X[1]="M.5,.5 L.5,0",X[3]="M0,.5 L1,.5 M.5,.5 L.5,1",X),"\u2549":(oe={},oe[1]="M.5,.5 L1,.5",oe[3]="M.5,0 L.5,1 M.5,.5 L0,.5",oe),"\u254A":(ce={},ce[1]="M.5,.5 L0,.5",ce[3]="M.5,0 L.5,1 M.5,.5 L1,.5",ce),"\u254C":(Te={},Te[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Te),"\u254D":(Oe={},Oe[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Oe),"\u2504":(ge={},ge[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ge),"\u2505":(Ze={},Ze[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Ze),"\u2508":(_t={},_t[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",_t),"\u2509":(Or={},Or[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Or),"\u254E":(zt={},zt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",zt),"\u254F":(Di={},Di[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Di),"\u2506":(Bi={},Bi[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Bi),"\u2507":(qr={},qr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",qr),"\u250A":(vi={},vi[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vi),"\u250B":(Pi={},Pi[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Pi),"\u256D":(gi={},gi[1]="C.5,1,.5,.5,1,.5",gi),"\u256E":(Ii={},Ii[1]="C.5,1,.5,.5,0,.5",Ii),"\u256F":(Hi={},Hi[1]="C.5,0,.5,.5,0,.5",Hi),"\u2570":(Fi={},Fi[1]="C.5,0,.5,.5,1,.5",Fi)},h.tryDrawCustomChar=function(se,ie,Ct,_i,yi,tt){var ir=h.blockElementDefinitions[ie];if(ir)return function(wt,Vt,ti,Rr,vr,Dr){for(var Dt=0;Dt<Vt.length;Dt++){var Lt=Vt[Dt],Ue=vr/8,gr=Dr/8;wt.fillRect(ti+Lt.x*Ue,Rr+Lt.y*gr,Lt.w*Ue,Lt.h*gr)}}(se,ir,Ct,_i,yi,tt),!0;var qt=po[ie];if(qt)return function(wt,Vt,ti,Rr,vr,Dr){var Dt,Lt=In.get(Vt);Lt||(Lt=new Map,In.set(Vt,Lt));var Ue=wt.fillStyle;if(typeof Ue!="string")throw new Error('Unexpected fillStyle type "'+Ue+'"');var gr=Lt.get(Ue);if(!gr){var Kt=Vt[0].length,nt=Vt.length,Kr=document.createElement("canvas");Kr.width=Kt,Kr.height=nt;var Ni=(0,cn.throwIfFalsy)(Kr.getContext("2d")),nr=new ImageData(Kt,nt),Gr=void 0,xt=void 0,mi=void 0,$t=void 0;if(Ue.startsWith("#"))Gr=parseInt(Ue.substr(1,2),16),xt=parseInt(Ue.substr(3,2),16),mi=parseInt(Ue.substr(5,2),16),$t=Ue.length>7&&parseInt(Ue.substr(7,2),16)||1;else{if(!Ue.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ue+'" when drawing pattern glyph');Gr=(Dt=Ue.substring(5,Ue.length-1).split(",").map(function(ri){return parseFloat(ri)}))[0],xt=Dt[1],mi=Dt[2],$t=Dt[3]}for(var or=0;or<nt;or++)for(var _r=0;_r<Kt;_r++)nr.data[4*(or*Kt+_r)]=Gr,nr.data[4*(or*Kt+_r)+1]=xt,nr.data[4*(or*Kt+_r)+2]=mi,nr.data[4*(or*Kt+_r)+3]=Vt[or][_r]*(255*$t);Ni.putImageData(nr,0,0),gr=(0,cn.throwIfFalsy)(wt.createPattern(Kr,null)),Lt.set(Ue,gr)}wt.fillStyle=gr,wt.fillRect(ti,Rr,vr,Dr)}(se,qt,Ct,_i,yi,tt),!0;var ei=h.boxDrawingDefinitions[ie];return!!ei&&(function(wt,Vt,ti,Rr,vr,Dr){wt.strokeStyle=wt.fillStyle;for(var Dt=0,Lt=Object.entries(Vt);Dt<Lt.length;Dt++){var Ue=Lt[Dt],gr=Ue[0],Kt=Ue[1];wt.beginPath(),wt.lineWidth=window.devicePixelRatio*Number.parseInt(gr);for(var nt=0,Kr=(typeof Kt=="function"?Kt(.15,.15/Dr*vr):Kt).split(" ");nt<Kr.length;nt++){var Ni=Kr[nt],nr=Ni[0],Gr=pr[nr];if(Gr){var xt=Ni.substring(1).split(",");xt[0]&&xt[1]&&Gr(wt,vo(xt,vr,Dr,ti,Rr))}else console.error('Could not find drawing instructions for "'+nr+'"')}wt.stroke(),wt.closePath()}}(se,ei,Ct,_i,yi,tt),!0)};var In=new Map;function un(se,ie,Ct){return Ct===void 0&&(Ct=0),Math.max(Math.min(se,ie),Ct)}var pr={C:function(se,ie){return se.bezierCurveTo(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5])},L:function(se,ie){return se.lineTo(ie[0],ie[1])},M:function(se,ie){return se.moveTo(ie[0],ie[1])}};function vo(se,ie,Ct,_i,yi){var tt=se.map(function(ei){return parseFloat(ei)||parseInt(ei)});if(tt.length<2)throw new Error("Too few arguments for instruction");for(var ir=0;ir<tt.length;ir+=2)tt[ir]*=ie,tt[ir]!==0&&(tt[ir]=un(Math.round(tt[ir]+.5)-.5,ie,0)),tt[ir]+=_i;for(var qt=1;qt<tt.length;qt+=2)tt[qt]*=Ct,tt[qt]!==0&&(tt[qt]=un(Math.round(tt[qt]+.5)-.5,Ct,0)),tt[qt]+=yi;return tt}},3700:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GridCache=void 0;var L=function(){function y(){this.cache=[]}return y.prototype.resize=function(m,_){for(var v=0;v<m;v++){this.cache.length<=v&&this.cache.push([]);for(var T=this.cache[v].length;T<_;T++)this.cache[v].push(void 0);this.cache[v].length=_}this.cache.length=m},y.prototype.clear=function(){for(var m=0;m<this.cache.length;m++)for(var _=0;_<this.cache[m].length;_++)this.cache[m][_]=void 0},y}();h.GridCache=L},5098:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.LinkRenderLayer=void 0;var T=L(1546),w=L(8803),c=L(2040),p=L(2585),C=function(d){function s(n,l,a,u,g,b,k,O){var E=d.call(this,n,"link",l,!0,a,u,k,O)||this;return g.onShowLinkUnderline(function(A){return E._onShowLinkUnderline(A)}),g.onHideLinkUnderline(function(A){return E._onHideLinkUnderline(A)}),b.onShowLinkUnderline(function(A){return E._onShowLinkUnderline(A)}),b.onHideLinkUnderline(function(A){return E._onHideLinkUnderline(A)}),E}return m(s,d),s.prototype.resize=function(n){d.prototype.resize.call(this,n),this._state=void 0},s.prototype.reset=function(){this._clearCurrentLink()},s.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var n=this._state.y2-this._state.y1-1;n>0&&this._clearCells(0,this._state.y1+1,this._state.cols,n),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},s.prototype._onShowLinkUnderline=function(n){if(n.fg===w.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:n.fg&&(0,c.is256Color)(n.fg)?this._ctx.fillStyle=this._colors.ansi[n.fg].css:this._ctx.fillStyle=this._colors.foreground.css,n.y1===n.y2)this._fillBottomLineAtCells(n.x1,n.y1,n.x2-n.x1);else{this._fillBottomLineAtCells(n.x1,n.y1,n.cols-n.x1);for(var l=n.y1+1;l<n.y2;l++)this._fillBottomLineAtCells(0,l,n.cols);this._fillBottomLineAtCells(0,n.y2,n.x2)}this._state=n},s.prototype._onHideLinkUnderline=function(n){this._clearCurrentLink()},_([v(6,p.IBufferService),v(7,p.IOptionsService)],s)}(T.BaseRenderLayer);h.LinkRenderLayer=C},3525:function(D,h,L){var y,m=this&&this.__extends||(y=function(g,b){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,O){k.__proto__=O}||function(k,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(k[E]=O[E])},y(g,b)},function(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function k(){this.constructor=g}y(g,b),g.prototype=b===null?Object.create(b):(k.prototype=b.prototype,new k)}),_=this&&this.__decorate||function(g,b,k,O){var E,A=arguments.length,W=A<3?b:O===null?O=Object.getOwnPropertyDescriptor(b,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(g,b,k,O);else for(var R=g.length-1;R>=0;R--)(E=g[R])&&(W=(A<3?E(W):A>3?E(b,k,W):E(b,k))||W);return A>3&&W&&Object.defineProperty(b,k,W),W},v=this&&this.__param||function(g,b){return function(k,O){b(k,O,g)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Renderer=void 0;var T=L(9596),w=L(4149),c=L(2512),p=L(5098),C=L(844),d=L(4725),s=L(2585),n=L(1420),l=L(8460),a=1,u=function(g){function b(k,O,E,A,W,R,j,B){var P=g.call(this)||this;P._colors=k,P._screenElement=O,P._bufferService=R,P._charSizeService=j,P._optionsService=B,P._id=a++,P._onRequestRedraw=new l.EventEmitter;var N=P._optionsService.rawOptions.allowTransparency;return P._renderLayers=[W.createInstance(T.TextRenderLayer,P._screenElement,0,P._colors,N,P._id),W.createInstance(w.SelectionRenderLayer,P._screenElement,1,P._colors,P._id),W.createInstance(p.LinkRenderLayer,P._screenElement,2,P._colors,P._id,E,A),W.createInstance(c.CursorRenderLayer,P._screenElement,3,P._colors,P._id,P._onRequestRedraw)],P.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},P._devicePixelRatio=window.devicePixelRatio,P._updateDimensions(),P.onOptionsChanged(),P}return m(b,g),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){for(var k=0,O=this._renderLayers;k<O.length;k++)O[k].dispose();g.prototype.dispose.call(this),(0,n.removeTerminalFromCache)(this._id)},b.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},b.prototype.setColors=function(k){this._colors=k;for(var O=0,E=this._renderLayers;O<E.length;O++){var A=E[O];A.setColors(this._colors),A.reset()}},b.prototype.onResize=function(k,O){this._updateDimensions();for(var E=0,A=this._renderLayers;E<A.length;E++)A[E].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},b.prototype.onBlur=function(){this._runOperation(function(k){return k.onBlur()})},b.prototype.onFocus=function(){this._runOperation(function(k){return k.onFocus()})},b.prototype.onSelectionChanged=function(k,O,E){E===void 0&&(E=!1),this._runOperation(function(A){return A.onSelectionChanged(k,O,E)})},b.prototype.onCursorMove=function(){this._runOperation(function(k){return k.onCursorMove()})},b.prototype.onOptionsChanged=function(){this._runOperation(function(k){return k.onOptionsChanged()})},b.prototype.clear=function(){this._runOperation(function(k){return k.reset()})},b.prototype._runOperation=function(k){for(var O=0,E=this._renderLayers;O<E.length;O++)k(E[O])},b.prototype.renderRows=function(k,O){for(var E=0,A=this._renderLayers;E<A.length;E++)A[E].onGridChanged(k,O)},b.prototype.clearTextureAtlas=function(){for(var k=0,O=this._renderLayers;k<O.length;k++)O[k].clearTextureAtlas()},b.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},_([v(4,s.IInstantiationService),v(5,s.IBufferService),v(6,d.ICharSizeService),v(7,s.IOptionsService)],b)}(C.Disposable);h.Renderer=u},1752:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.throwIfFalsy=void 0,h.throwIfFalsy=function(L){if(!L)throw new Error("value must not be falsy");return L}},4149:function(D,h,L){var y,m=this&&this.__extends||(y=function(p,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(d[n]=s[n])},y(p,C)},function(p,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function d(){this.constructor=p}y(p,C),p.prototype=C===null?Object.create(C):(d.prototype=C.prototype,new d)}),_=this&&this.__decorate||function(p,C,d,s){var n,l=arguments.length,a=l<3?C:s===null?s=Object.getOwnPropertyDescriptor(C,d):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(p,C,d,s);else for(var u=p.length-1;u>=0;u--)(n=p[u])&&(a=(l<3?n(a):l>3?n(C,d,a):n(C,d))||a);return l>3&&a&&Object.defineProperty(C,d,a),a},v=this&&this.__param||function(p,C){return function(d,s){C(d,s,p)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionRenderLayer=void 0;var T=L(1546),w=L(2585),c=function(p){function C(d,s,n,l,a,u){var g=p.call(this,d,"selection",s,!0,n,l,a,u)||this;return g._clearState(),g}return m(C,p),C.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},C.prototype.resize=function(d){p.prototype.resize.call(this,d),this._clearState()},C.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},C.prototype.onSelectionChanged=function(d,s,n){if(this._didStateChange(d,s,n,this._bufferService.buffer.ydisp))if(this._clearAll(),d&&s){var l=d[1]-this._bufferService.buffer.ydisp,a=s[1]-this._bufferService.buffer.ydisp,u=Math.max(l,0),g=Math.min(a,this._bufferService.rows-1);if(u>=this._bufferService.rows||g<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,n){var b=d[0],k=s[0]-b,O=g-u+1;this._fillCells(b,u,k,O)}else{b=l===u?d[0]:0;var E=u===a?s[0]:this._bufferService.cols;this._fillCells(b,u,E-b,1);var A=Math.max(g-u-1,0);if(this._fillCells(0,u+1,this._bufferService.cols,A),u!==g){var W=a===g?s[0]:this._bufferService.cols;this._fillCells(0,g,W,1)}}this._state.start=[d[0],d[1]],this._state.end=[s[0],s[1]],this._state.columnSelectMode=n,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},C.prototype._didStateChange=function(d,s,n,l){return!this._areCoordinatesEqual(d,this._state.start)||!this._areCoordinatesEqual(s,this._state.end)||n!==this._state.columnSelectMode||l!==this._state.ydisp},C.prototype._areCoordinatesEqual=function(d,s){return!(!d||!s)&&d[0]===s[0]&&d[1]===s[1]},_([v(4,w.IBufferService),v(5,w.IOptionsService)],C)}(T.BaseRenderLayer);h.SelectionRenderLayer=c},9596:function(D,h,L){var y,m=this&&this.__extends||(y=function(a,u){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(g[k]=b[k])},y(a,u)},function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function g(){this.constructor=a}y(a,u),a.prototype=u===null?Object.create(u):(g.prototype=u.prototype,new g)}),_=this&&this.__decorate||function(a,u,g,b){var k,O=arguments.length,E=O<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,u,g,b);else for(var A=a.length-1;A>=0;A--)(k=a[A])&&(E=(O<3?k(E):O>3?k(u,g,E):k(u,g))||E);return O>3&&E&&Object.defineProperty(u,g,E),E},v=this&&this.__param||function(a,u){return function(g,b){u(g,b,a)}};Object.defineProperty(h,"__esModule",{value:!0}),h.TextRenderLayer=void 0;var T=L(3700),w=L(1546),c=L(3734),p=L(643),C=L(511),d=L(2585),s=L(4725),n=L(4269),l=function(a){function u(g,b,k,O,E,A,W,R){var j=a.call(this,g,"text",b,O,k,E,A,W)||this;return j._characterJoinerService=R,j._characterWidth=0,j._characterFont="",j._characterOverlapCache={},j._workCell=new C.CellData,j._state=new T.GridCache,j}return m(u,a),u.prototype.resize=function(g){a.prototype.resize.call(this,g);var b=this._getFont(!1,!1);this._characterWidth===g.scaledCharWidth&&this._characterFont===b||(this._characterWidth=g.scaledCharWidth,this._characterFont=b,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},u.prototype.reset=function(){this._state.clear(),this._clearAll()},u.prototype._forEachCell=function(g,b,k){for(var O=g;O<=b;O++)for(var E=O+this._bufferService.buffer.ydisp,A=this._bufferService.buffer.lines.get(E),W=this._characterJoinerService.getJoinedCharacters(E),R=0;R<this._bufferService.cols;R++){A.loadCell(R,this._workCell);var j=this._workCell,B=!1,P=R;if(j.getWidth()!==0){if(W.length>0&&R===W[0][0]){B=!0;var N=W.shift();j=new n.JoinedCellData(this._workCell,A.translateToString(!0,N[0],N[1]),N[1]-N[0]),P=N[1]-1}!B&&this._isOverlapping(j)&&P<A.length-1&&A.getCodePoint(P+1)===p.NULL_CELL_CODE&&(j.content&=-12582913,j.content|=2<<22),k(j,R,O),R=P}}},u.prototype._drawBackground=function(g,b){var k=this,O=this._ctx,E=this._bufferService.cols,A=0,W=0,R=null;O.save(),this._forEachCell(g,b,function(j,B,P){var N=null;j.isInverse()?N=j.isFgDefault()?k._colors.foreground.css:j.isFgRGB()?"rgb("+c.AttributeData.toColorRGB(j.getFgColor()).join(",")+")":k._colors.ansi[j.getFgColor()].css:j.isBgRGB()?N="rgb("+c.AttributeData.toColorRGB(j.getBgColor()).join(",")+")":j.isBgPalette()&&(N=k._colors.ansi[j.getBgColor()].css),R===null&&(A=B,W=P),P!==W?(O.fillStyle=R||"",k._fillCells(A,W,E-A,1),A=B,W=P):R!==N&&(O.fillStyle=R||"",k._fillCells(A,W,B-A,1),A=B,W=P),R=N}),R!==null&&(O.fillStyle=R,this._fillCells(A,W,E-A,1)),O.restore()},u.prototype._drawForeground=function(g,b){var k=this;this._forEachCell(g,b,function(O,E,A){if(!O.isInvisible()&&(k._drawChars(O,E,A),O.isUnderline()||O.isStrikethrough())){if(k._ctx.save(),O.isInverse())if(O.isBgDefault())k._ctx.fillStyle=k._colors.background.css;else if(O.isBgRGB())k._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(O.getBgColor()).join(",")+")";else{var W=O.getBgColor();k._optionsService.rawOptions.drawBoldTextInBrightColors&&O.isBold()&&W<8&&(W+=8),k._ctx.fillStyle=k._colors.ansi[W].css}else if(O.isFgDefault())k._ctx.fillStyle=k._colors.foreground.css;else if(O.isFgRGB())k._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(O.getFgColor()).join(",")+")";else{var R=O.getFgColor();k._optionsService.rawOptions.drawBoldTextInBrightColors&&O.isBold()&&R<8&&(R+=8),k._ctx.fillStyle=k._colors.ansi[R].css}O.isStrikethrough()&&k._fillMiddleLineAtCells(E,A,O.getWidth()),O.isUnderline()&&k._fillBottomLineAtCells(E,A,O.getWidth()),k._ctx.restore()}})},u.prototype.onGridChanged=function(g,b){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,g,this._bufferService.cols,b-g+1),this._drawBackground(g,b),this._drawForeground(g,b))},u.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},u.prototype._isOverlapping=function(g){if(g.getWidth()!==1||g.getCode()<256)return!1;var b=g.getChars();if(this._characterOverlapCache.hasOwnProperty(b))return this._characterOverlapCache[b];this._ctx.save(),this._ctx.font=this._characterFont;var k=Math.floor(this._ctx.measureText(b).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[b]=k,k},_([v(5,d.IBufferService),v(6,d.IOptionsService),v(7,s.ICharacterJoinerService)],u)}(w.BaseRenderLayer);h.TextRenderLayer=l},9616:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseCharAtlas=void 0;var L=function(){function y(){this._didWarmUp=!1}return y.prototype.dispose=function(){},y.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},y.prototype._doWarmUp=function(){},y.prototype.clear=function(){},y.prototype.beginFrame=function(){},y}();h.BaseCharAtlas=L},1420:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.removeTerminalFromCache=h.acquireCharAtlas=void 0;var y=L(2040),m=L(1906),_=[];h.acquireCharAtlas=function(v,T,w,c,p){for(var C=(0,y.generateConfig)(c,p,v,w),d=0;d<_.length;d++){var s=(n=_[d]).ownedBy.indexOf(T);if(s>=0){if((0,y.configEquals)(n.config,C))return n.atlas;n.ownedBy.length===1?(n.atlas.dispose(),_.splice(d,1)):n.ownedBy.splice(s,1);break}}for(d=0;d<_.length;d++){var n=_[d];if((0,y.configEquals)(n.config,C))return n.ownedBy.push(T),n.atlas}var l={atlas:new m.DynamicCharAtlas(document,C),config:C,ownedBy:[T]};return _.push(l),l.atlas},h.removeTerminalFromCache=function(v){for(var T=0;T<_.length;T++){var w=_[T].ownedBy.indexOf(v);if(w!==-1){_[T].ownedBy.length===1?(_[T].atlas.dispose(),_.splice(T,1)):_[T].ownedBy.splice(w,1);break}}}},2040:function(D,h,L){var y=this&&this.__spreadArray||function(_,v,T){if(T||arguments.length===2)for(var w,c=0,p=v.length;c<p;c++)!w&&c in v||(w||(w=Array.prototype.slice.call(v,0,c)),w[c]=v[c]);return _.concat(w||Array.prototype.slice.call(v))};Object.defineProperty(h,"__esModule",{value:!0}),h.is256Color=h.configEquals=h.generateConfig=void 0;var m=L(643);h.generateConfig=function(_,v,T,w){var c={foreground:w.foreground,background:w.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:y([],w.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:_,scaledCharHeight:v,fontFamily:T.fontFamily,fontSize:T.fontSize,fontWeight:T.fontWeight,fontWeightBold:T.fontWeightBold,allowTransparency:T.allowTransparency,colors:c}},h.configEquals=function(_,v){for(var T=0;T<_.colors.ansi.length;T++)if(_.colors.ansi[T].rgba!==v.colors.ansi[T].rgba)return!1;return _.devicePixelRatio===v.devicePixelRatio&&_.fontFamily===v.fontFamily&&_.fontSize===v.fontSize&&_.fontWeight===v.fontWeight&&_.fontWeightBold===v.fontWeightBold&&_.allowTransparency===v.allowTransparency&&_.scaledCharWidth===v.scaledCharWidth&&_.scaledCharHeight===v.scaledCharHeight&&_.colors.foreground===v.colors.foreground&&_.colors.background===v.colors.background},h.is256Color=function(_){return _<m.DEFAULT_COLOR}},8803:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CHAR_ATLAS_CELL_SPACING=h.TEXT_BASELINE=h.DIM_OPACITY=h.INVERTED_DEFAULT_COLOR=void 0;var y=L(6114);h.INVERTED_DEFAULT_COLOR=257,h.DIM_OPACITY=.5,h.TEXT_BASELINE=y.isFirefox||y.isLegacyEdge?"bottom":"ideographic",h.CHAR_ATLAS_CELL_SPACING=1},1906:function(D,h,L){var y,m=this&&this.__extends||(y=function(b,k){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(O[A]=E[A])},y(b,k)},function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function O(){this.constructor=b}y(b,k),b.prototype=k===null?Object.create(k):(O.prototype=k.prototype,new O)});Object.defineProperty(h,"__esModule",{value:!0}),h.NoneCharAtlas=h.DynamicCharAtlas=h.getGlyphCacheKey=void 0;var _=L(8803),v=L(9616),T=L(5680),w=L(7001),c=L(6114),p=L(1752),C=L(4774),d=1024,s=1024,n={css:"rgba(0, 0, 0, 0)",rgba:0};function l(b){return b.code<<21|b.bg<<12|b.fg<<3|(b.bold?0:4)+(b.dim?0:2)+(b.italic?0:1)}h.getGlyphCacheKey=l;var a=function(b){function k(O,E){var A=b.call(this)||this;A._config=E,A._drawToCacheCount=0,A._glyphsWaitingOnBitmap=[],A._bitmapCommitTimeout=null,A._bitmap=null,A._cacheCanvas=O.createElement("canvas"),A._cacheCanvas.width=d,A._cacheCanvas.height=s,A._cacheCtx=(0,p.throwIfFalsy)(A._cacheCanvas.getContext("2d",{alpha:!0}));var W=O.createElement("canvas");W.width=A._config.scaledCharWidth,W.height=A._config.scaledCharHeight,A._tmpCtx=(0,p.throwIfFalsy)(W.getContext("2d",{alpha:A._config.allowTransparency})),A._width=Math.floor(d/A._config.scaledCharWidth),A._height=Math.floor(s/A._config.scaledCharHeight);var R=A._width*A._height;return A._cacheMap=new w.LRUMap(R),A._cacheMap.prealloc(R),A}return m(k,b),k.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},k.prototype.beginFrame=function(){this._drawToCacheCount=0},k.prototype.clear=function(){if(this._cacheMap.size>0){var O=this._width*this._height;this._cacheMap=new w.LRUMap(O),this._cacheMap.prealloc(O)}this._cacheCtx.clearRect(0,0,d,s),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},k.prototype.draw=function(O,E,A,W){if(E.code===32)return!0;if(!this._canCache(E))return!1;var R=l(E),j=this._cacheMap.get(R);if(j!=null)return this._drawFromCache(O,j,A,W),!0;if(this._drawToCacheCount<100){var B;B=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var P=this._drawToCache(E,B);return this._cacheMap.set(R,P),this._drawFromCache(O,P,A,W),!0}return!1},k.prototype._canCache=function(O){return O.code<256},k.prototype._toCoordinateX=function(O){return O%this._width*this._config.scaledCharWidth},k.prototype._toCoordinateY=function(O){return Math.floor(O/this._width)*this._config.scaledCharHeight},k.prototype._drawFromCache=function(O,E,A,W){if(!E.isEmpty){var R=this._toCoordinateX(E.index),j=this._toCoordinateY(E.index);O.drawImage(E.inBitmap?this._bitmap:this._cacheCanvas,R,j,this._config.scaledCharWidth,this._config.scaledCharHeight,A,W,this._config.scaledCharWidth,this._config.scaledCharHeight)}},k.prototype._getColorFromAnsiIndex=function(O){return O<this._config.colors.ansi.length?this._config.colors.ansi[O]:T.DEFAULT_ANSI_COLORS[O]},k.prototype._getBackgroundColor=function(O){return this._config.allowTransparency?n:O.bg===_.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:O.bg<256?this._getColorFromAnsiIndex(O.bg):this._config.colors.background},k.prototype._getForegroundColor=function(O){return O.fg===_.INVERTED_DEFAULT_COLOR?C.color.opaque(this._config.colors.background):O.fg<256?this._getColorFromAnsiIndex(O.fg):this._config.colors.foreground},k.prototype._drawToCache=function(O,E){this._drawToCacheCount++,this._tmpCtx.save();var A=this._getBackgroundColor(O);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=A.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var W=O.bold?this._config.fontWeightBold:this._config.fontWeight,R=O.italic?"italic":"";this._tmpCtx.font=R+" "+W+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=_.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(O).css,O.dim&&(this._tmpCtx.globalAlpha=_.DIM_OPACITY),this._tmpCtx.fillText(O.chars,0,this._config.scaledCharHeight);var j=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),B=!1;if(this._config.allowTransparency||(B=g(j,A)),B&&O.chars==="_"&&!this._config.allowTransparency)for(var P=1;P<=5&&(this._tmpCtx.fillText(O.chars,0,this._config.scaledCharHeight-P),B=g(j=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),A));P++);this._tmpCtx.restore();var N=this._toCoordinateX(E),z=this._toCoordinateY(E);this._cacheCtx.putImageData(j,N,z);var V={index:E,isEmpty:B,inBitmap:!1};return this._addGlyphToBitmap(V),V},k.prototype._addGlyphToBitmap=function(O){var E=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this._glyphsWaitingOnBitmap.push(O),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return E._generateBitmap()},100)))},k.prototype._generateBitmap=function(){var O=this,E=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(A){O._bitmap=A;for(var W=0;W<E.length;W++)E[W].inBitmap=!0}),this._bitmapCommitTimeout=null},k}(v.BaseCharAtlas);h.DynamicCharAtlas=a;var u=function(b){function k(O,E){return b.call(this)||this}return m(k,b),k.prototype.draw=function(O,E,A,W){return!1},k}(v.BaseCharAtlas);function g(b,k){for(var O=!0,E=k.rgba>>>24,A=k.rgba>>>16&255,W=k.rgba>>>8&255,R=0;R<b.data.length;R+=4)b.data[R]===E&&b.data[R+1]===A&&b.data[R+2]===W?b.data[R+3]=0:O=!1;return O}h.NoneCharAtlas=u},7001:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LRUMap=void 0;var L=function(){function y(m){this.capacity=m,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return y.prototype._unlinkNode=function(m){var _=m.prev,v=m.next;m===this._head&&(this._head=v),m===this._tail&&(this._tail=_),_!==null&&(_.next=v),v!==null&&(v.prev=_)},y.prototype._appendNode=function(m){var _=this._tail;_!==null&&(_.next=m),m.prev=_,m.next=null,this._tail=m,this._head===null&&(this._head=m)},y.prototype.prealloc=function(m){for(var _=this._nodePool,v=0;v<m;v++)_.push({prev:null,next:null,key:null,value:null})},y.prototype.get=function(m){var _=this._map[m];return _!==void 0?(this._unlinkNode(_),this._appendNode(_),_.value):null},y.prototype.peekValue=function(m){var _=this._map[m];return _!==void 0?_.value:null},y.prototype.peek=function(){var m=this._head;return m===null?null:m.value},y.prototype.set=function(m,_){var v=this._map[m];if(v!==void 0)v=this._map[m],this._unlinkNode(v),v.value=_;else if(this.size>=this.capacity)v=this._head,this._unlinkNode(v),delete this._map[v.key],v.key=m,v.value=_,this._map[m]=v;else{var T=this._nodePool;T.length>0?((v=T.pop()).key=m,v.value=_):v={prev:null,next:null,key:m,value:_},this._map[m]=v,this.size++}this._appendNode(v)},y}();h.LRUMap=L},1296:function(D,h,L){var y,m=this&&this.__extends||(y=function(O,E){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,W){A.__proto__=W}||function(A,W){for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(A[R]=W[R])},y(O,E)},function(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function A(){this.constructor=O}y(O,E),O.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)}),_=this&&this.__decorate||function(O,E,A,W){var R,j=arguments.length,B=j<3?E:W===null?W=Object.getOwnPropertyDescriptor(E,A):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(O,E,A,W);else for(var P=O.length-1;P>=0;P--)(R=O[P])&&(B=(j<3?R(B):j>3?R(E,A,B):R(E,A))||B);return j>3&&B&&Object.defineProperty(E,A,B),B},v=this&&this.__param||function(O,E){return function(A,W){E(A,W,O)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRenderer=void 0;var T=L(3787),w=L(8803),c=L(844),p=L(4725),C=L(2585),d=L(8460),s=L(4774),n=L(9631),l="xterm-dom-renderer-owner-",a="xterm-fg-",u="xterm-bg-",g="xterm-focus",b=1,k=function(O){function E(A,W,R,j,B,P,N,z,V,te){var re=O.call(this)||this;return re._colors=A,re._element=W,re._screenElement=R,re._viewportElement=j,re._linkifier=B,re._linkifier2=P,re._charSizeService=z,re._optionsService=V,re._bufferService=te,re._terminalClass=b++,re._rowElements=[],re._rowContainer=document.createElement("div"),re._rowContainer.classList.add("xterm-rows"),re._rowContainer.style.lineHeight="normal",re._rowContainer.setAttribute("aria-hidden","true"),re._refreshRowElements(re._bufferService.cols,re._bufferService.rows),re._selectionContainer=document.createElement("div"),re._selectionContainer.classList.add("xterm-selection"),re._selectionContainer.setAttribute("aria-hidden","true"),re.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},re._updateDimensions(),re._injectCss(),re._rowFactory=N.createInstance(T.DomRendererRowFactory,document,re._colors),re._element.classList.add(l+re._terminalClass),re._screenElement.appendChild(re._rowContainer),re._screenElement.appendChild(re._selectionContainer),re._linkifier.onShowLinkUnderline(function(fe){return re._onLinkHover(fe)}),re._linkifier.onHideLinkUnderline(function(fe){return re._onLinkLeave(fe)}),re._linkifier2.onShowLinkUnderline(function(fe){return re._onLinkHover(fe)}),re._linkifier2.onHideLinkUnderline(function(fe){return re._onLinkLeave(fe)}),re}return m(E,O),Object.defineProperty(E.prototype,"onRequestRedraw",{get:function(){return new d.EventEmitter().event},enumerable:!1,configurable:!0}),E.prototype.dispose=function(){this._element.classList.remove(l+this._terminalClass),(0,n.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),O.prototype.dispose.call(this)},E.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var A=0,W=this._rowElements;A<W.length;A++){var R=W[A];R.style.width=this.dimensions.canvasWidth+"px",R.style.height=this.dimensions.actualCellHeight+"px",R.style.lineHeight=this.dimensions.actualCellHeight+"px",R.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var j=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},E.prototype.setColors=function(A){this._colors=A,this._injectCss()},E.prototype._injectCss=function(){var A=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var W=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";W+=this._terminalSelector+" span:not(."+T.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+T.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+T.ITALIC_CLASS+" { font-style: italic;}",W+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",W+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",W+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+T.CURSOR_CLASS+"."+T.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+T.CURSOR_CLASS+"."+T.CURSOR_BLINK_CLASS+":not(."+T.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+T.CURSOR_CLASS+"."+T.CURSOR_BLINK_CLASS+"."+T.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+T.CURSOR_CLASS+"."+T.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+T.CURSOR_CLASS+"."+T.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+T.CURSOR_CLASS+"."+T.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",W+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(R,j){W+=A._terminalSelector+" ."+a+j+" { color: "+R.css+"; }"+A._terminalSelector+" ."+u+j+" { background-color: "+R.css+"; }"}),W+=this._terminalSelector+" ."+a+w.INVERTED_DEFAULT_COLOR+" { color: "+s.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+u+w.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=W},E.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},E.prototype._refreshRowElements=function(A,W){for(var R=this._rowElements.length;R<=W;R++){var j=document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>W;)this._rowContainer.removeChild(this._rowElements.pop())},E.prototype.onResize=function(A,W){this._refreshRowElements(A,W),this._updateDimensions()},E.prototype.onCharSizeChanged=function(){this._updateDimensions()},E.prototype.onBlur=function(){this._rowContainer.classList.remove(g)},E.prototype.onFocus=function(){this._rowContainer.classList.add(g)},E.prototype.onSelectionChanged=function(A,W,R){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(A&&W){var j=A[1]-this._bufferService.buffer.ydisp,B=W[1]-this._bufferService.buffer.ydisp,P=Math.max(j,0),N=Math.min(B,this._bufferService.rows-1);if(!(P>=this._bufferService.rows||N<0)){var z=document.createDocumentFragment();if(R)z.appendChild(this._createSelectionElement(P,A[0],W[0],N-P+1));else{var V=j===P?A[0]:0,te=P===B?W[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(P,V,te));var re=N-P-1;if(z.appendChild(this._createSelectionElement(P+1,0,this._bufferService.cols,re)),P!==N){var fe=B===N?W[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(N,0,fe))}}this._selectionContainer.appendChild(z)}}},E.prototype._createSelectionElement=function(A,W,R,j){j===void 0&&(j=1);var B=document.createElement("div");return B.style.height=j*this.dimensions.actualCellHeight+"px",B.style.top=A*this.dimensions.actualCellHeight+"px",B.style.left=W*this.dimensions.actualCellWidth+"px",B.style.width=this.dimensions.actualCellWidth*(R-W)+"px",B},E.prototype.onCursorMove=function(){},E.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},E.prototype.clear=function(){for(var A=0,W=this._rowElements;A<W.length;A++)W[A].innerText=""},E.prototype.renderRows=function(A,W){for(var R=this._bufferService.buffer.ybase+this._bufferService.buffer.y,j=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,P=A;P<=W;P++){var N=this._rowElements[P];N.innerText="";var z=P+this._bufferService.buffer.ydisp,V=this._bufferService.buffer.lines.get(z),te=this._optionsService.rawOptions.cursorStyle;N.appendChild(this._rowFactory.createRow(V,z,z===R,te,j,B,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(E.prototype,"_terminalSelector",{get:function(){return"."+l+this._terminalClass},enumerable:!1,configurable:!0}),E.prototype._onLinkHover=function(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)},E.prototype._onLinkLeave=function(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)},E.prototype._setCellUnderline=function(A,W,R,j,B,P){for(;A!==W||R!==j;){var N=this._rowElements[R];if(!N)return;var z=N.children[A];z&&(z.style.textDecoration=P?"underline":"none"),++A>=B&&(A=0,R++)}},_([v(6,C.IInstantiationService),v(7,p.ICharSizeService),v(8,C.IOptionsService),v(9,C.IBufferService)],E)}(c.Disposable);h.DomRenderer=k},3787:function(D,h,L){var y=this&&this.__decorate||function(n,l,a,u){var g,b=arguments.length,k=b<3?l:u===null?u=Object.getOwnPropertyDescriptor(l,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(n,l,a,u);else for(var O=n.length-1;O>=0;O--)(g=n[O])&&(k=(b<3?g(k):b>3?g(l,a,k):g(l,a))||k);return b>3&&k&&Object.defineProperty(l,a,k),k},m=this&&this.__param||function(n,l){return function(a,u){l(a,u,n)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DomRendererRowFactory=h.CURSOR_STYLE_UNDERLINE_CLASS=h.CURSOR_STYLE_BAR_CLASS=h.CURSOR_STYLE_BLOCK_CLASS=h.CURSOR_BLINK_CLASS=h.CURSOR_CLASS=h.STRIKETHROUGH_CLASS=h.UNDERLINE_CLASS=h.ITALIC_CLASS=h.DIM_CLASS=h.BOLD_CLASS=void 0;var _=L(8803),v=L(643),T=L(511),w=L(2585),c=L(4774),p=L(4725),C=L(4269);h.BOLD_CLASS="xterm-bold",h.DIM_CLASS="xterm-dim",h.ITALIC_CLASS="xterm-italic",h.UNDERLINE_CLASS="xterm-underline",h.STRIKETHROUGH_CLASS="xterm-strikethrough",h.CURSOR_CLASS="xterm-cursor",h.CURSOR_BLINK_CLASS="xterm-cursor-blink",h.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",h.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",h.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var d=function(){function n(l,a,u,g,b){this._document=l,this._colors=a,this._characterJoinerService=u,this._optionsService=g,this._coreService=b,this._workCell=new T.CellData}return n.prototype.setColors=function(l){this._colors=l},n.prototype.createRow=function(l,a,u,g,b,k,O,E){for(var A=this._document.createDocumentFragment(),W=this._characterJoinerService.getJoinedCharacters(a),R=0,j=Math.min(l.length,E)-1;j>=0;j--)if(l.loadCell(j,this._workCell).getCode()!==v.NULL_CELL_CODE||u&&j===b){R=j+1;break}for(j=0;j<R;j++){l.loadCell(j,this._workCell);var B=this._workCell.getWidth();if(B!==0){var P=!1,N=j,z=this._workCell;if(W.length>0&&j===W[0][0]){P=!0;var V=W.shift();z=new C.JoinedCellData(this._workCell,l.translateToString(!0,V[0],V[1]),V[1]-V[0]),N=V[1]-1,B=z.getWidth()}var te=this._document.createElement("span");if(B>1&&(te.style.width=O*B+"px"),P&&(te.style.display="inline",b>=j&&b<=N&&(b=j)),!this._coreService.isCursorHidden&&u&&j===b)switch(te.classList.add(h.CURSOR_CLASS),k&&te.classList.add(h.CURSOR_BLINK_CLASS),g){case"bar":te.classList.add(h.CURSOR_STYLE_BAR_CLASS);break;case"underline":te.classList.add(h.CURSOR_STYLE_UNDERLINE_CLASS);break;default:te.classList.add(h.CURSOR_STYLE_BLOCK_CLASS)}z.isBold()&&te.classList.add(h.BOLD_CLASS),z.isItalic()&&te.classList.add(h.ITALIC_CLASS),z.isDim()&&te.classList.add(h.DIM_CLASS),z.isUnderline()&&te.classList.add(h.UNDERLINE_CLASS),z.isInvisible()?te.textContent=v.WHITESPACE_CELL_CHAR:te.textContent=z.getChars()||v.WHITESPACE_CELL_CHAR,z.isStrikethrough()&&te.classList.add(h.STRIKETHROUGH_CLASS);var re=z.getFgColor(),fe=z.getFgColorMode(),he=z.getBgColor(),xe=z.getBgColorMode(),U=!!z.isInverse();if(U){var ee=re;re=he,he=ee;var K=fe;fe=xe,xe=K}switch(fe){case 16777216:case 33554432:z.isBold()&&re<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(re+=8),this._applyMinimumContrast(te,this._colors.background,this._colors.ansi[re])||te.classList.add("xterm-fg-"+re);break;case 50331648:var Y=c.rgba.toColor(re>>16&255,re>>8&255,255&re);this._applyMinimumContrast(te,this._colors.background,Y)||this._addStyle(te,"color:#"+s(re.toString(16),"0",6));break;default:this._applyMinimumContrast(te,this._colors.background,this._colors.foreground)||U&&te.classList.add("xterm-fg-"+_.INVERTED_DEFAULT_COLOR)}switch(xe){case 16777216:case 33554432:te.classList.add("xterm-bg-"+he);break;case 50331648:this._addStyle(te,"background-color:#"+s(he.toString(16),"0",6));break;default:U&&te.classList.add("xterm-bg-"+_.INVERTED_DEFAULT_COLOR)}A.appendChild(te),j=N}}return A},n.prototype._applyMinimumContrast=function(l,a,u){if(this._optionsService.rawOptions.minimumContrastRatio===1)return!1;var g=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return g===void 0&&(g=c.color.ensureContrastRatio(a,u,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,g??null)),!!g&&(this._addStyle(l,"color:"+g.css),!0)},n.prototype._addStyle=function(l,a){l.setAttribute("style",""+(l.getAttribute("style")||"")+a+";")},y([m(2,p.ICharacterJoinerService),m(3,w.IOptionsService),m(4,w.ICoreService)],n)}();function s(n,l,a){for(;n.length<a;)n=l+n;return n}h.DomRendererRowFactory=d},456:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionModel=void 0;var L=function(){function y(m){this._bufferService=m,this.isSelectAllActive=!1,this.selectionStartLength=0}return y.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(y.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var m=this.selectionStart[0]+this.selectionStartLength;return m>this._bufferService.cols?m%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)-1]:[m%this._bufferService.cols,this.selectionStart[1]+Math.floor(m/this._bufferService.cols)]:[m,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),y.prototype.areSelectionValuesReversed=function(){var m=this.selectionStart,_=this.selectionEnd;return!(!m||!_)&&(m[1]>_[1]||m[1]===_[1]&&m[0]>_[0])},y.prototype.onTrim=function(m){return this.selectionStart&&(this.selectionStart[1]-=m),this.selectionEnd&&(this.selectionEnd[1]-=m),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},y}();h.SelectionModel=L},428:function(D,h,L){var y=this&&this.__decorate||function(c,p,C,d){var s,n=arguments.length,l=n<3?p:d===null?d=Object.getOwnPropertyDescriptor(p,C):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,p,C,d);else for(var a=c.length-1;a>=0;a--)(s=c[a])&&(l=(n<3?s(l):n>3?s(p,C,l):s(p,C))||l);return n>3&&l&&Object.defineProperty(p,C,l),l},m=this&&this.__param||function(c,p){return function(C,d){p(C,d,c)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharSizeService=void 0;var _=L(2585),v=L(8460),T=function(){function c(p,C,d){this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=new v.EventEmitter,this._measureStrategy=new w(p,C,this._optionsService)}return Object.defineProperty(c.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),c.prototype.measure=function(){var p=this._measureStrategy.measure();p.width===this.width&&p.height===this.height||(this.width=p.width,this.height=p.height,this._onCharSizeChange.fire())},y([m(2,_.IOptionsService)],c)}();h.CharSizeService=T;var w=function(){function c(p,C,d){this._document=p,this._parentElement=C,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return c.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var p=this._measureElement.getBoundingClientRect();return p.width!==0&&p.height!==0&&(this._result.width=p.width,this._result.height=Math.ceil(p.height)),this._result},c}()},4269:function(D,h,L){var y,m=this&&this.__extends||(y=function(s,n){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},y(s,n)},function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function l(){this.constructor=s}y(s,n),s.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}),_=this&&this.__decorate||function(s,n,l,a){var u,g=arguments.length,b=g<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,n,l,a);else for(var k=s.length-1;k>=0;k--)(u=s[k])&&(b=(g<3?u(b):g>3?u(n,l,b):u(n,l))||b);return g>3&&b&&Object.defineProperty(n,l,b),b},v=this&&this.__param||function(s,n){return function(l,a){n(l,a,s)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CharacterJoinerService=h.JoinedCellData=void 0;var T=L(3734),w=L(643),c=L(511),p=L(2585),C=function(s){function n(l,a,u){var g=s.call(this)||this;return g.content=0,g.combinedData="",g.fg=l.fg,g.bg=l.bg,g.combinedData=a,g._width=u,g}return m(n,s),n.prototype.isCombined=function(){return 2097152},n.prototype.getWidth=function(){return this._width},n.prototype.getChars=function(){return this.combinedData},n.prototype.getCode=function(){return 2097151},n.prototype.setFromCharData=function(l){throw new Error("not implemented")},n.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},n}(T.AttributeData);h.JoinedCellData=C;var d=function(){function s(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return s.prototype.register=function(n){var l={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(l),l.id},s.prototype.deregister=function(n){for(var l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===n)return this._characterJoiners.splice(l,1),!0;return!1},s.prototype.getJoinedCharacters=function(n){if(this._characterJoiners.length===0)return[];var l=this._bufferService.buffer.lines.get(n);if(!l||l.length===0)return[];for(var a=[],u=l.translateToString(!0),g=0,b=0,k=0,O=l.getFg(0),E=l.getBg(0),A=0;A<l.getTrimmedLength();A++)if(l.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==O||this._workCell.bg!==E){if(A-g>1)for(var W=this._getJoinedRanges(u,k,b,l,g),R=0;R<W.length;R++)a.push(W[R]);g=A,k=b,O=this._workCell.fg,E=this._workCell.bg}b+=this._workCell.getChars().length||w.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1)for(W=this._getJoinedRanges(u,k,b,l,g),R=0;R<W.length;R++)a.push(W[R]);return a},s.prototype._getJoinedRanges=function(n,l,a,u,g){var b=n.substring(l,a),k=[];try{k=this._characterJoiners[0].handler(b)}catch(W){console.error(W)}for(var O=1;O<this._characterJoiners.length;O++)try{for(var E=this._characterJoiners[O].handler(b),A=0;A<E.length;A++)s._mergeRanges(k,E[A])}catch(W){console.error(W)}return this._stringRangesToCellRanges(k,u,g),k},s.prototype._stringRangesToCellRanges=function(n,l,a){var u=0,g=!1,b=0,k=n[u];if(k){for(var O=a;O<this._bufferService.cols;O++){var E=l.getWidth(O),A=l.getString(O).length||w.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!g&&k[0]<=b&&(k[0]=O,g=!0),k[1]<=b){if(k[1]=O,!(k=n[++u]))break;k[0]<=b?(k[0]=O,g=!0):g=!1}b+=A}}k&&(k[1]=this._bufferService.cols)}},s._mergeRanges=function(n,l){for(var a=!1,u=0;u<n.length;u++){var g=n[u];if(a){if(l[1]<=g[0])return n[u-1][1]=l[1],n;if(l[1]<=g[1])return n[u-1][1]=Math.max(l[1],g[1]),n.splice(u,1),n;n.splice(u,1),u--}else{if(l[1]<=g[0])return n.splice(u,0,l),n;if(l[1]<=g[1])return g[0]=Math.min(l[0],g[0]),n;l[0]<g[1]&&(g[0]=Math.min(l[0],g[0]),a=!0)}}return a?n[n.length-1][1]=l[1]:n.push(l),n},s=_([v(0,p.IBufferService)],s)}();h.CharacterJoinerService=d},5114:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CoreBrowserService=void 0;var L=function(){function y(m){this._textarea=m}return Object.defineProperty(y.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),y}();h.CoreBrowserService=L},7641:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.Decoration=h.DecorationService=void 0;var T=L(8460),w=L(844),c=L(2585),p=function(d){function s(n){var l=d.call(this)||this;return l._instantiationService=n,l._decorations=[],l}return m(s,d),s.prototype.attachToDom=function(n,l){var a=this;this._renderService=l,this._screenElement=n,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),n.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return a.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return a.refresh(!0)}))},s.prototype.registerDecoration=function(n){var l=this;if(!n.marker.isDisposed&&this._container){var a=this._instantiationService.createInstance(C,n,this._container);return this._decorations.push(a),a.onDispose(function(){return l._decorations.splice(l._decorations.indexOf(a),1)}),this._queueRefresh(),a}},s.prototype._queueRefresh=function(){var n=this;this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){n.refresh(),n._animationFrame=void 0}))},s.prototype.refresh=function(n){if(this._renderService)for(var l=0,a=this._decorations;l<a.length;l++)a[l].render(this._renderService,n)},s.prototype.dispose=function(){for(var n=0,l=this._decorations;n<l.length;n++)l[n].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},_([v(0,c.IInstantiationService)],s)}(w.Disposable);h.DecorationService=p;var C=function(d){function s(n,l,a){var u,g=d.call(this)||this;return g._container=l,g._bufferService=a,g.isDisposed=!1,g._onDispose=new T.EventEmitter,g._onRender=new T.EventEmitter,g.x=(u=n.x)!==null&&u!==void 0?u:0,g._marker=n.marker,g._marker.onDispose(function(){return g.dispose()}),g.anchor=n.anchor||"left",g.width=n.width||1,g.height=n.height||1,g}return m(s,d),Object.defineProperty(s.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),s.prototype.render=function(n,l){this._element&&!l||this._createElement(n,l),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(n),this._element&&this._onRender.fire(this._element)},s.prototype._createElement=function(n,l){l&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*n.dimensions.actualCellWidth+"px",this._element.style.height=this.height*n.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*n.dimensions.actualCellHeight+"px",this._element.style.lineHeight=n.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),this.anchor==="right"?this._element.style.right=this.x?this.x*n.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*n.dimensions.actualCellWidth+"px":""},s.prototype._refreshStyle=function(n){if(this._element){var l=this.marker.line-this._bufferService.buffers.active.ydisp;l<0||l>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=l*n.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},s.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},_([v(2,c.IBufferService)],s)}(w.Disposable);h.Decoration=C},8934:function(D,h,L){var y=this&&this.__decorate||function(w,c,p,C){var d,s=arguments.length,n=s<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(w,c,p,C);else for(var l=w.length-1;l>=0;l--)(d=w[l])&&(n=(s<3?d(n):s>3?d(c,p,n):d(c,p))||n);return s>3&&n&&Object.defineProperty(c,p,n),n},m=this&&this.__param||function(w,c){return function(p,C){c(p,C,w)}};Object.defineProperty(h,"__esModule",{value:!0}),h.MouseService=void 0;var _=L(4725),v=L(9806),T=function(){function w(c,p){this._renderService=c,this._charSizeService=p}return w.prototype.getCoords=function(c,p,C,d,s){return(0,v.getCoords)(c,p,C,d,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,s)},w.prototype.getRawByteCoords=function(c,p,C,d){var s=this.getCoords(c,p,C,d);return(0,v.getRawByteCoords)(s)},y([m(0,_.IRenderService),m(1,_.ICharSizeService)],w)}();h.MouseService=T},3230:function(D,h,L){var y,m=this&&this.__extends||(y=function(l,a){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(u[b]=g[b])},y(l,a)},function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function u(){this.constructor=l}y(l,a),l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}),_=this&&this.__decorate||function(l,a,u,g){var b,k=arguments.length,O=k<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(l,a,u,g);else for(var E=l.length-1;E>=0;E--)(b=l[E])&&(O=(k<3?b(O):k>3?b(a,u,O):b(a,u))||O);return k>3&&O&&Object.defineProperty(a,u,O),O},v=this&&this.__param||function(l,a){return function(u,g){a(u,g,l)}};Object.defineProperty(h,"__esModule",{value:!0}),h.RenderService=void 0;var T=L(6193),w=L(8460),c=L(844),p=L(5596),C=L(3656),d=L(2585),s=L(4725),n=function(l){function a(u,g,b,k,O,E){var A=l.call(this)||this;if(A._renderer=u,A._rowCount=g,A._charSizeService=O,A._isPaused=!1,A._needsFullRefresh=!1,A._isNextRenderRedrawOnly=!0,A._needsSelectionRefresh=!1,A._canvasWidth=0,A._canvasHeight=0,A._selectionState={start:void 0,end:void 0,columnSelectMode:!1},A._onDimensionsChange=new w.EventEmitter,A._onRender=new w.EventEmitter,A._onRefreshRequest=new w.EventEmitter,A.register({dispose:function(){return A._renderer.dispose()}}),A._renderDebouncer=new T.RenderDebouncer(function(R,j){return A._renderRows(R,j)}),A.register(A._renderDebouncer),A._screenDprMonitor=new p.ScreenDprMonitor,A._screenDprMonitor.setListener(function(){return A.onDevicePixelRatioChange()}),A.register(A._screenDprMonitor),A.register(E.onResize(function(){return A._fullRefresh()})),A.register(E.buffers.onBufferActivate(function(){var R;return(R=A._renderer)===null||R===void 0?void 0:R.clear()})),A.register(k.onOptionChange(function(){return A._renderer.onOptionsChanged()})),A.register(A._charSizeService.onCharSizeChange(function(){return A.onCharSizeChanged()})),A._renderer.onRequestRedraw(function(R){return A.refreshRows(R.start,R.end,!0)}),A.register((0,C.addDisposableDomListener)(window,"resize",function(){return A.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var W=new IntersectionObserver(function(R){return A._onIntersectionChange(R[R.length-1])},{threshold:0});W.observe(b),A.register({dispose:function(){return W.disconnect()}})}return A}return m(a,l),Object.defineProperty(a.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),a.prototype._onIntersectionChange=function(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},a.prototype.refreshRows=function(u,g,b){b===void 0&&(b=!1),this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,g,this._rowCount))},a.prototype._renderRows=function(u,g){this._renderer.renderRows(u,g),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:u,end:g}),this._isNextRenderRedrawOnly=!0},a.prototype.resize=function(u,g){this._rowCount=g,this._fireOnCanvasResize()},a.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},a.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},a.prototype.dispose=function(){l.prototype.dispose.call(this)},a.prototype.setRenderer=function(u){var g=this;this._renderer.dispose(),this._renderer=u,this._renderer.onRequestRedraw(function(b){return g.refreshRows(b.start,b.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},a.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},a.prototype.clearTextureAtlas=function(){var u,g;(g=(u=this._renderer)===null||u===void 0?void 0:u.clearTextureAtlas)===null||g===void 0||g.call(u),this._fullRefresh()},a.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},a.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},a.prototype.onResize=function(u,g){this._renderer.onResize(u,g),this._fullRefresh()},a.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},a.prototype.onBlur=function(){this._renderer.onBlur()},a.prototype.onFocus=function(){this._renderer.onFocus()},a.prototype.onSelectionChanged=function(u,g,b){this._selectionState.start=u,this._selectionState.end=g,this._selectionState.columnSelectMode=b,this._renderer.onSelectionChanged(u,g,b)},a.prototype.onCursorMove=function(){this._renderer.onCursorMove()},a.prototype.clear=function(){this._renderer.clear()},_([v(3,d.IOptionsService),v(4,s.ICharSizeService),v(5,d.IBufferService)],a)}(c.Disposable);h.RenderService=n},9312:function(D,h,L){var y,m=this&&this.__extends||(y=function(k,O){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var W in A)Object.prototype.hasOwnProperty.call(A,W)&&(E[W]=A[W])},y(k,O)},function(k,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function E(){this.constructor=k}y(k,O),k.prototype=O===null?Object.create(O):(E.prototype=O.prototype,new E)}),_=this&&this.__decorate||function(k,O,E,A){var W,R=arguments.length,j=R<3?O:A===null?A=Object.getOwnPropertyDescriptor(O,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(k,O,E,A);else for(var B=k.length-1;B>=0;B--)(W=k[B])&&(j=(R<3?W(j):R>3?W(O,E,j):W(O,E))||j);return R>3&&j&&Object.defineProperty(O,E,j),j},v=this&&this.__param||function(k,O){return function(E,A){O(E,A,k)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionService=void 0;var T=L(6114),w=L(456),c=L(511),p=L(8460),C=L(4725),d=L(2585),s=L(9806),n=L(9504),l=L(844),a=L(4841),u=String.fromCharCode(160),g=new RegExp(u,"g"),b=function(k){function O(E,A,W,R,j,B,P,N){var z=k.call(this)||this;return z._element=E,z._screenElement=A,z._linkifier=W,z._bufferService=R,z._coreService=j,z._mouseService=B,z._optionsService=P,z._renderService=N,z._dragScrollAmount=0,z._enabled=!0,z._workCell=new c.CellData,z._mouseDownTimeStamp=0,z._oldHasSelection=!1,z._oldSelectionStart=void 0,z._oldSelectionEnd=void 0,z._onLinuxMouseSelection=z.register(new p.EventEmitter),z._onRedrawRequest=z.register(new p.EventEmitter),z._onSelectionChange=z.register(new p.EventEmitter),z._onRequestScrollLines=z.register(new p.EventEmitter),z._mouseMoveListener=function(V){return z._onMouseMove(V)},z._mouseUpListener=function(V){return z._onMouseUp(V)},z._coreService.onUserInput(function(){z.hasSelection&&z.clearSelection()}),z._trimListener=z._bufferService.buffer.lines.onTrim(function(V){return z._onTrim(V)}),z.register(z._bufferService.buffers.onBufferActivate(function(V){return z._onBufferActivate(V)})),z.enable(),z._model=new w.SelectionModel(z._bufferService),z._activeSelectionMode=0,z}return m(O,k),Object.defineProperty(O.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),O.prototype.dispose=function(){this._removeMouseDownListeners()},O.prototype.reset=function(){this.clearSelection()},O.prototype.disable=function(){this.clearSelection(),this._enabled=!1},O.prototype.enable=function(){this._enabled=!0},Object.defineProperty(O.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"hasSelection",{get:function(){var E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!E||!A||E[0]===A[0]&&E[1]===A[1])},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"selectionText",{get:function(){var E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!E||!A)return"";var W=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(E[0]===A[0])return"";for(var j=E[1];j<=A[1];j++){var B=W.translateBufferLineToString(j,!0,E[0],A[0]);R.push(B)}}else{var P=E[1]===A[1]?A[0]:void 0;for(R.push(W.translateBufferLineToString(E[1],!0,E[0],P)),j=E[1]+1;j<=A[1]-1;j++){var N=W.lines.get(j);B=W.translateBufferLineToString(j,!0),N?.isWrapped?R[R.length-1]+=B:R.push(B)}E[1]!==A[1]&&(N=W.lines.get(A[1]),B=W.translateBufferLineToString(A[1],!0,0,A[0]),N&&N.isWrapped?R[R.length-1]+=B:R.push(B))}return R.map(function(z){return z.replace(g," ")}).join(T.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),O.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},O.prototype.refresh=function(E){var A=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return A._refresh()})),T.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},O.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},O.prototype._isClickInSelection=function(E){var A=this._getMouseBufferCoords(E),W=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(W&&R&&A)&&this._areCoordsInSelection(A,W,R)},O.prototype._areCoordsInSelection=function(E,A,W){return E[1]>A[1]&&E[1]<W[1]||A[1]===W[1]&&E[1]===A[1]&&E[0]>=A[0]&&E[0]<W[0]||A[1]<W[1]&&E[1]===W[1]&&E[0]<W[0]||A[1]<W[1]&&E[1]===A[1]&&E[0]>=A[0]},O.prototype._selectWordAtCursor=function(E,A){var W,R,j=(R=(W=this._linkifier.currentLink)===null||W===void 0?void 0:W.link)===null||R===void 0?void 0:R.range;if(j)return this._model.selectionStart=[j.start.x-1,j.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(j,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var B=this._getMouseBufferCoords(E);return!!B&&(this._selectWordAt(B,A),this._model.selectionEnd=void 0,!0)},O.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},O.prototype.selectLines=function(E,A){this._model.clearSelection(),E=Math.max(E,0),A=Math.min(A,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,A],this.refresh(),this._onSelectionChange.fire()},O.prototype._onTrim=function(E){this._model.onTrim(E)&&this.refresh()},O.prototype._getMouseBufferCoords=function(E){var A=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(A)return A[0]--,A[1]--,A[1]+=this._bufferService.buffer.ydisp,A},O.prototype._getMouseEventScrollAmount=function(E){var A=(0,s.getCoordsRelativeToElement)(E,this._screenElement)[1],W=this._renderService.dimensions.canvasHeight;return A>=0&&A<=W?0:(A>W&&(A-=W),A=Math.min(Math.max(A,-50),50),(A/=50)/Math.abs(A)+Math.round(14*A))},O.prototype.shouldForceSelection=function(E){return T.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey},O.prototype.onMouseDown=function(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._onIncrementalClick(E):E.detail===1?this._onSingleClick(E):E.detail===2?this._onDoubleClick(E):E.detail===3&&this._onTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}},O.prototype._addMouseDownListeners=function(){var E=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return E._dragScroll()},50)},O.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},O.prototype._onIncrementalClick=function(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))},O.prototype._onSingleClick=function(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),this._model.selectionStart){this._model.selectionEnd=void 0;var A=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);A&&A.length!==this._model.selectionStart[0]&&A.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},O.prototype._onDoubleClick=function(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)},O.prototype._onTripleClick=function(E){var A=this._getMouseBufferCoords(E);A&&(this._activeSelectionMode=2,this._selectLineAt(A[1]))},O.prototype.shouldColumnSelect=function(E){return E.altKey&&!(T.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},O.prototype._onMouseMove=function(E){if(E.stopImmediatePropagation(),this._model.selectionStart){var A=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var W=this._bufferService.buffer;if(this._model.selectionEnd[1]<W.lines.length){var R=W.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}A&&A[0]===this._model.selectionEnd[0]&&A[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},O.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}},O.prototype._onMouseUp=function(E){var A=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&A<500&&E.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var W=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(W&&W[0]!==void 0&&W[1]!==void 0){var R=(0,n.moveToCellSequence)(W[0]-1,W[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()},O.prototype._fireEventIfSelectionChanged=function(){var E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd,W=!(!E||!A||E[0]===A[0]&&E[1]===A[1]);W?E&&A&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&A[0]===this._oldSelectionEnd[0]&&A[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,A,W)):this._oldHasSelection&&this._fireOnSelectionChange(E,A,W)},O.prototype._fireOnSelectionChange=function(E,A,W){this._oldSelectionStart=E,this._oldSelectionEnd=A,this._oldHasSelection=W,this._onSelectionChange.fire()},O.prototype._onBufferActivate=function(E){var A=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim(function(W){return A._onTrim(W)})},O.prototype._convertViewportColToCharacterIndex=function(E,A){for(var W=A[0],R=0;A[0]>=R;R++){var j=E.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?W--:j>1&&A[0]!==R&&(W+=j-1)}return W},O.prototype.setSelection=function(E,A,W){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,A],this._model.selectionStartLength=W,this.refresh()},O.prototype.rightClickSelect=function(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},O.prototype._getWordAt=function(E,A,W,R){if(W===void 0&&(W=!0),R===void 0&&(R=!0),!(E[0]>=this._bufferService.cols)){var j=this._bufferService.buffer,B=j.lines.get(E[1]);if(B){var P=j.translateBufferLineToString(E[1],!1),N=this._convertViewportColToCharacterIndex(B,E),z=N,V=E[0]-N,te=0,re=0,fe=0,he=0;if(P.charAt(N)===" "){for(;N>0&&P.charAt(N-1)===" ";)N--;for(;z<P.length&&P.charAt(z+1)===" ";)z++}else{var xe=E[0],U=E[0];B.getWidth(xe)===0&&(te++,xe--),B.getWidth(U)===2&&(re++,U++);var ee=B.getString(U).length;for(ee>1&&(he+=ee-1,z+=ee-1);xe>0&&N>0&&!this._isCharWordSeparator(B.loadCell(xe-1,this._workCell));){B.loadCell(xe-1,this._workCell);var K=this._workCell.getChars().length;this._workCell.getWidth()===0?(te++,xe--):K>1&&(fe+=K-1,N-=K-1),N--,xe--}for(;U<B.length&&z+1<P.length&&!this._isCharWordSeparator(B.loadCell(U+1,this._workCell));){B.loadCell(U+1,this._workCell);var Y=this._workCell.getChars().length;this._workCell.getWidth()===2?(re++,U++):Y>1&&(he+=Y-1,z+=Y-1),z++,U++}}z++;var G=N+V-te+fe,Se=Math.min(this._bufferService.cols,z-N+te+re-fe-he);if(A||P.slice(N,z).trim()!==""){if(W&&G===0&&B.getCodePoint(0)!==32){var de=j.lines.get(E[1]-1);if(de&&B.isWrapped&&de.getCodePoint(this._bufferService.cols-1)!==32){var Ce=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(Ce){var De=this._bufferService.cols-Ce.start;G-=De,Se+=De}}}if(R&&G+Se===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){var Fe=j.lines.get(E[1]+1);if(Fe?.isWrapped&&Fe.getCodePoint(0)!==32){var Ae=this._getWordAt([0,E[1]+1],!1,!1,!0);Ae&&(Se+=Ae.length)}}return{start:G,length:Se}}}}},O.prototype._selectWordAt=function(E,A){var W=this._getWordAt(E,A);if(W){for(;W.start<0;)W.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[W.start,E[1]],this._model.selectionStartLength=W.length}},O.prototype._selectToWordAt=function(E){var A=this._getWordAt(E,!0);if(A){for(var W=E[1];A.start<0;)A.start+=this._bufferService.cols,W--;if(!this._model.areSelectionValuesReversed())for(;A.start+A.length>this._bufferService.cols;)A.length-=this._bufferService.cols,W++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?A.start:A.start+A.length,W]}},O.prototype._isCharWordSeparator=function(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0},O.prototype._selectLineAt=function(E){var A=this._bufferService.buffer.getWrappedRangeForLine(E);this._model.selectionStart=[0,A.first],this._model.selectionEnd=[this._bufferService.cols,A.last],this._model.selectionStartLength=0},_([v(3,d.IBufferService),v(4,d.ICoreService),v(5,C.IMouseService),v(6,d.IOptionsService),v(7,C.IRenderService)],O)}(l.Disposable);h.SelectionService=b},4725:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IDecorationService=h.ICharacterJoinerService=h.ISoundService=h.ISelectionService=h.IRenderService=h.IMouseService=h.ICoreBrowserService=h.ICharSizeService=void 0;var y=L(8343);h.ICharSizeService=(0,y.createDecorator)("CharSizeService"),h.ICoreBrowserService=(0,y.createDecorator)("CoreBrowserService"),h.IMouseService=(0,y.createDecorator)("MouseService"),h.IRenderService=(0,y.createDecorator)("RenderService"),h.ISelectionService=(0,y.createDecorator)("SelectionService"),h.ISoundService=(0,y.createDecorator)("SoundService"),h.ICharacterJoinerService=(0,y.createDecorator)("CharacterJoinerService"),h.IDecorationService=(0,y.createDecorator)("DecorationService")},357:function(D,h,L){var y=this&&this.__decorate||function(T,w,c,p){var C,d=arguments.length,s=d<3?w:p===null?p=Object.getOwnPropertyDescriptor(w,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(T,w,c,p);else for(var n=T.length-1;n>=0;n--)(C=T[n])&&(s=(d<3?C(s):d>3?C(w,c,s):C(w,c))||s);return d>3&&s&&Object.defineProperty(w,c,s),s},m=this&&this.__param||function(T,w){return function(c,p){w(c,p,T)}};Object.defineProperty(h,"__esModule",{value:!0}),h.SoundService=void 0;var _=L(2585),v=function(){function T(w){this._optionsService=w}return Object.defineProperty(T,"audioContext",{get:function(){if(!T._audioContext){var w=window.AudioContext||window.webkitAudioContext;if(!w)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;T._audioContext=new w}return T._audioContext},enumerable:!1,configurable:!0}),T.prototype.playBellSound=function(){var w=T.audioContext;if(w){var c=w.createBufferSource();w.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(p){c.buffer=p,c.connect(w.destination),c.start(0)})}},T.prototype._base64ToArrayBuffer=function(w){for(var c=window.atob(w),p=c.length,C=new Uint8Array(p),d=0;d<p;d++)C[d]=c.charCodeAt(d);return C.buffer},T.prototype._removeMimeType=function(w){return w.split(",")[1]},T=y([m(0,_.IOptionsService)],T)}();h.SoundService=v},6349:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CircularList=void 0;var y=L(8460),m=function(){function _(v){this._maxLength=v,this.onDeleteEmitter=new y.EventEmitter,this.onInsertEmitter=new y.EventEmitter,this.onTrimEmitter=new y.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(_.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLength",{get:function(){return this._maxLength},set:function(v){if(this._maxLength!==v){for(var T=new Array(v),w=0;w<Math.min(v,this.length);w++)T[w]=this._array[this._getCyclicIndex(w)];this._array=T,this._maxLength=v,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._length},set:function(v){if(v>this._length)for(var T=this._length;T<v;T++)this._array[T]=void 0;this._length=v},enumerable:!1,configurable:!0}),_.prototype.get=function(v){return this._array[this._getCyclicIndex(v)]},_.prototype.set=function(v,T){this._array[this._getCyclicIndex(v)]=T},_.prototype.push=function(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},_.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(_.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),_.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},_.prototype.splice=function(v,T){for(var w=[],c=2;c<arguments.length;c++)w[c-2]=arguments[c];if(T){for(var p=v;p<this._length-T;p++)this._array[this._getCyclicIndex(p)]=this._array[this._getCyclicIndex(p+T)];this._length-=T,this.onDeleteEmitter.fire({index:v,amount:T})}for(p=this._length-1;p>=v;p--)this._array[this._getCyclicIndex(p+w.length)]=this._array[this._getCyclicIndex(p)];for(p=0;p<w.length;p++)this._array[this._getCyclicIndex(v+p)]=w[p];if(w.length&&this.onInsertEmitter.fire({index:v,amount:w.length}),this._length+w.length>this._maxLength){var C=this._length+w.length-this._maxLength;this._startIndex+=C,this._length=this._maxLength,this.onTrimEmitter.fire(C)}else this._length+=w.length},_.prototype.trimStart=function(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)},_.prototype.shiftElements=function(v,T,w){if(!(T<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(var c=T-1;c>=0;c--)this.set(v+c+w,this.get(v+c));var p=v+T+w-this._length;if(p>0)for(this._length+=p;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(c=0;c<T;c++)this.set(v+c+w,this.get(v+c))}},_.prototype._getCyclicIndex=function(v){return(this._startIndex+v)%this._maxLength},_}();h.CircularList=m},1439:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.clone=void 0,h.clone=function L(y,m){if(m===void 0&&(m=5),typeof y!="object")return y;var _=Array.isArray(y)?[]:{};for(var v in y)_[v]=m<=1?y[v]:y[v]&&L(y[v],m-1);return _}},8969:function(D,h,L){var y,m=this&&this.__extends||(y=function(E,A){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,R){W.__proto__=R}||function(W,R){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(W[j]=R[j])},y(E,A)},function(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function W(){this.constructor=E}y(E,A),E.prototype=A===null?Object.create(A):(W.prototype=A.prototype,new W)});Object.defineProperty(h,"__esModule",{value:!0}),h.CoreTerminal=void 0;var _=L(844),v=L(2585),T=L(4348),w=L(7866),c=L(744),p=L(7302),C=L(6975),d=L(8460),s=L(1753),n=L(3730),l=L(1480),a=L(7994),u=L(9282),g=L(5435),b=L(5981),k=!1,O=function(E){function A(W){var R=E.call(this)||this;return R._onBinary=new d.EventEmitter,R._onData=new d.EventEmitter,R._onLineFeed=new d.EventEmitter,R._onResize=new d.EventEmitter,R._onScroll=new d.EventEmitter,R._instantiationService=new T.InstantiationService,R.optionsService=new p.OptionsService(W),R._instantiationService.setService(v.IOptionsService,R.optionsService),R._bufferService=R.register(R._instantiationService.createInstance(c.BufferService)),R._instantiationService.setService(v.IBufferService,R._bufferService),R._logService=R._instantiationService.createInstance(w.LogService),R._instantiationService.setService(v.ILogService,R._logService),R.coreService=R.register(R._instantiationService.createInstance(C.CoreService,function(){return R.scrollToBottom()})),R._instantiationService.setService(v.ICoreService,R.coreService),R.coreMouseService=R._instantiationService.createInstance(s.CoreMouseService),R._instantiationService.setService(v.ICoreMouseService,R.coreMouseService),R._dirtyRowService=R._instantiationService.createInstance(n.DirtyRowService),R._instantiationService.setService(v.IDirtyRowService,R._dirtyRowService),R.unicodeService=R._instantiationService.createInstance(l.UnicodeService),R._instantiationService.setService(v.IUnicodeService,R.unicodeService),R._charsetService=R._instantiationService.createInstance(a.CharsetService),R._instantiationService.setService(v.ICharsetService,R._charsetService),R._inputHandler=new g.InputHandler(R._bufferService,R._charsetService,R.coreService,R._dirtyRowService,R._logService,R.optionsService,R.coreMouseService,R.unicodeService),R.register((0,d.forwardEvent)(R._inputHandler.onLineFeed,R._onLineFeed)),R.register(R._inputHandler),R.register((0,d.forwardEvent)(R._bufferService.onResize,R._onResize)),R.register((0,d.forwardEvent)(R.coreService.onData,R._onData)),R.register((0,d.forwardEvent)(R.coreService.onBinary,R._onBinary)),R.register(R.optionsService.onOptionChange(function(j){return R._updateOptions(j)})),R.register(R._bufferService.onScroll(function(j){R._onScroll.fire({position:R._bufferService.buffer.ydisp,source:0}),R._dirtyRowService.markRangeDirty(R._bufferService.buffer.scrollTop,R._bufferService.buffer.scrollBottom)})),R.register(R._inputHandler.onScroll(function(j){R._onScroll.fire({position:R._bufferService.buffer.ydisp,source:0}),R._dirtyRowService.markRangeDirty(R._bufferService.buffer.scrollTop,R._bufferService.buffer.scrollBottom)})),R._writeBuffer=new b.WriteBuffer(function(j,B){return R._inputHandler.parse(j,B)}),R}return m(A,E),Object.defineProperty(A.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onScroll",{get:function(){var W=this;return this._onScrollApi||(this._onScrollApi=new d.EventEmitter,this.register(this._onScroll.event(function(R){var j;(j=W._onScrollApi)===null||j===void 0||j.fire(R.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"options",{get:function(){return this.optionsService.options},set:function(W){for(var R in W)this.optionsService.options[R]=W[R]},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){var W;this._isDisposed||(E.prototype.dispose.call(this),(W=this._windowsMode)===null||W===void 0||W.dispose(),this._windowsMode=void 0)},A.prototype.write=function(W,R){this._writeBuffer.write(W,R)},A.prototype.writeSync=function(W,R){this._logService.logLevel<=v.LogLevelEnum.WARN&&!k&&(this._logService.warn("writeSync is unreliable and will be removed soon."),k=!0),this._writeBuffer.writeSync(W,R)},A.prototype.resize=function(W,R){isNaN(W)||isNaN(R)||(W=Math.max(W,c.MINIMUM_COLS),R=Math.max(R,c.MINIMUM_ROWS),this._bufferService.resize(W,R))},A.prototype.scroll=function(W,R){R===void 0&&(R=!1),this._bufferService.scroll(W,R)},A.prototype.scrollLines=function(W,R,j){this._bufferService.scrollLines(W,R,j)},A.prototype.scrollPages=function(W){this._bufferService.scrollPages(W)},A.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},A.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},A.prototype.scrollToLine=function(W){this._bufferService.scrollToLine(W)},A.prototype.registerEscHandler=function(W,R){return this._inputHandler.registerEscHandler(W,R)},A.prototype.registerDcsHandler=function(W,R){return this._inputHandler.registerDcsHandler(W,R)},A.prototype.registerCsiHandler=function(W,R){return this._inputHandler.registerCsiHandler(W,R)},A.prototype.registerOscHandler=function(W,R){return this._inputHandler.registerOscHandler(W,R)},A.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},A.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},A.prototype._updateOptions=function(W){var R;switch(W){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0)}},A.prototype._enableWindowsMode=function(){var W=this;if(!this._windowsMode){var R=[];R.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},function(){return(0,u.updateWindowsModeWrappedState)(W._bufferService),!1})),this._windowsMode={dispose:function(){for(var j=0,B=R;j<B.length;j++)B[j].dispose()}}}},A}(_.Disposable);h.CoreTerminal=O},8460:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.forwardEvent=h.EventEmitter=void 0;var L=function(){function y(){this._listeners=[],this._disposed=!1}return Object.defineProperty(y.prototype,"event",{get:function(){var m=this;return this._event||(this._event=function(_){return m._listeners.push(_),{dispose:function(){if(!m._disposed){for(var v=0;v<m._listeners.length;v++)if(m._listeners[v]===_)return void m._listeners.splice(v,1)}}}}),this._event},enumerable:!1,configurable:!0}),y.prototype.fire=function(m,_){for(var v=[],T=0;T<this._listeners.length;T++)v.push(this._listeners[T]);for(T=0;T<v.length;T++)v[T].call(void 0,m,_)},y.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},y}();h.EventEmitter=L,h.forwardEvent=function(y,m){return y(function(_){return m.fire(_)})}},5435:function(D,h,L){var y,m=this&&this.__extends||(y=function(j,B){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,N){P.__proto__=N}||function(P,N){for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(P[z]=N[z])},y(j,B)},function(j,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function P(){this.constructor=j}y(j,B),j.prototype=B===null?Object.create(B):(P.prototype=B.prototype,new P)});Object.defineProperty(h,"__esModule",{value:!0}),h.InputHandler=h.WindowsOptionsReportType=void 0;var _,v=L(2584),T=L(7116),w=L(2015),c=L(844),p=L(8273),C=L(482),d=L(8437),s=L(8460),n=L(643),l=L(511),a=L(3734),u=L(2585),g=L(6242),b=L(6351),k=L(5941),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function A(j,B){if(j>24)return B.setWinLines||!1;switch(j){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}(function(j){j[j.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",j[j.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(_=h.WindowsOptionsReportType||(h.WindowsOptionsReportType={}));var W=function(){function j(B,P,N,z){this._bufferService=B,this._coreService=P,this._logService=N,this._optionsService=z,this._data=new Uint32Array(0)}return j.prototype.hook=function(B){this._data=new Uint32Array(0)},j.prototype.put=function(B,P,N){this._data=(0,p.concat)(this._data,B.subarray(P,N))},j.prototype.unhook=function(B){if(!B)return this._data=new Uint32Array(0),!0;var P=(0,C.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),P){case'"q':this._coreService.triggerDataEvent(v.C0.ESC+'P1$r0"q'+v.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(v.C0.ESC+'P1$r61;1"p'+v.C0.ESC+"\\");break;case"r":var N=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(v.C0.ESC+"P1$r"+N+v.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(v.C0.ESC+"P1$r0m"+v.C0.ESC+"\\");break;case" q":var z={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];z-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(v.C0.ESC+"P1$r"+z+" q"+v.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",P),this._coreService.triggerDataEvent(v.C0.ESC+"P0$r"+v.C0.ESC+"\\")}return!0},j}(),R=function(j){function B(P,N,z,V,te,re,fe,he,xe){xe===void 0&&(xe=new w.EscapeSequenceParser);var U=j.call(this)||this;U._bufferService=P,U._charsetService=N,U._coreService=z,U._dirtyRowService=V,U._logService=te,U._optionsService=re,U._coreMouseService=fe,U._unicodeService=he,U._parser=xe,U._parseBuffer=new Uint32Array(4096),U._stringDecoder=new C.StringToUtf32,U._utf8Decoder=new C.Utf8ToUtf32,U._workCell=new l.CellData,U._windowTitle="",U._iconName="",U._windowTitleStack=[],U._iconNameStack=[],U._curAttrData=d.DEFAULT_ATTR_DATA.clone(),U._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),U._onRequestBell=new s.EventEmitter,U._onRequestRefreshRows=new s.EventEmitter,U._onRequestReset=new s.EventEmitter,U._onRequestSendFocus=new s.EventEmitter,U._onRequestSyncScrollBar=new s.EventEmitter,U._onRequestWindowsOptionsReport=new s.EventEmitter,U._onA11yChar=new s.EventEmitter,U._onA11yTab=new s.EventEmitter,U._onCursorMove=new s.EventEmitter,U._onLineFeed=new s.EventEmitter,U._onScroll=new s.EventEmitter,U._onTitleChange=new s.EventEmitter,U._onColor=new s.EventEmitter,U._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},U._specialColors=[256,257,258],U.register(U._parser),U._activeBuffer=U._bufferService.buffer,U.register(U._bufferService.buffers.onBufferActivate(function(G){return U._activeBuffer=G.activeBuffer})),U._parser.setCsiHandlerFallback(function(G,Se){U._logService.debug("Unknown CSI code: ",{identifier:U._parser.identToString(G),params:Se.toArray()})}),U._parser.setEscHandlerFallback(function(G){U._logService.debug("Unknown ESC code: ",{identifier:U._parser.identToString(G)})}),U._parser.setExecuteHandlerFallback(function(G){U._logService.debug("Unknown EXECUTE code: ",{code:G})}),U._parser.setOscHandlerFallback(function(G,Se,de){U._logService.debug("Unknown OSC code: ",{identifier:G,action:Se,data:de})}),U._parser.setDcsHandlerFallback(function(G,Se,de){Se==="HOOK"&&(de=de.toArray()),U._logService.debug("Unknown DCS code: ",{identifier:U._parser.identToString(G),action:Se,payload:de})}),U._parser.setPrintHandler(function(G,Se,de){return U.print(G,Se,de)}),U._parser.registerCsiHandler({final:"@"},function(G){return U.insertChars(G)}),U._parser.registerCsiHandler({intermediates:" ",final:"@"},function(G){return U.scrollLeft(G)}),U._parser.registerCsiHandler({final:"A"},function(G){return U.cursorUp(G)}),U._parser.registerCsiHandler({intermediates:" ",final:"A"},function(G){return U.scrollRight(G)}),U._parser.registerCsiHandler({final:"B"},function(G){return U.cursorDown(G)}),U._parser.registerCsiHandler({final:"C"},function(G){return U.cursorForward(G)}),U._parser.registerCsiHandler({final:"D"},function(G){return U.cursorBackward(G)}),U._parser.registerCsiHandler({final:"E"},function(G){return U.cursorNextLine(G)}),U._parser.registerCsiHandler({final:"F"},function(G){return U.cursorPrecedingLine(G)}),U._parser.registerCsiHandler({final:"G"},function(G){return U.cursorCharAbsolute(G)}),U._parser.registerCsiHandler({final:"H"},function(G){return U.cursorPosition(G)}),U._parser.registerCsiHandler({final:"I"},function(G){return U.cursorForwardTab(G)}),U._parser.registerCsiHandler({final:"J"},function(G){return U.eraseInDisplay(G)}),U._parser.registerCsiHandler({prefix:"?",final:"J"},function(G){return U.eraseInDisplay(G)}),U._parser.registerCsiHandler({final:"K"},function(G){return U.eraseInLine(G)}),U._parser.registerCsiHandler({prefix:"?",final:"K"},function(G){return U.eraseInLine(G)}),U._parser.registerCsiHandler({final:"L"},function(G){return U.insertLines(G)}),U._parser.registerCsiHandler({final:"M"},function(G){return U.deleteLines(G)}),U._parser.registerCsiHandler({final:"P"},function(G){return U.deleteChars(G)}),U._parser.registerCsiHandler({final:"S"},function(G){return U.scrollUp(G)}),U._parser.registerCsiHandler({final:"T"},function(G){return U.scrollDown(G)}),U._parser.registerCsiHandler({final:"X"},function(G){return U.eraseChars(G)}),U._parser.registerCsiHandler({final:"Z"},function(G){return U.cursorBackwardTab(G)}),U._parser.registerCsiHandler({final:"`"},function(G){return U.charPosAbsolute(G)}),U._parser.registerCsiHandler({final:"a"},function(G){return U.hPositionRelative(G)}),U._parser.registerCsiHandler({final:"b"},function(G){return U.repeatPrecedingCharacter(G)}),U._parser.registerCsiHandler({final:"c"},function(G){return U.sendDeviceAttributesPrimary(G)}),U._parser.registerCsiHandler({prefix:">",final:"c"},function(G){return U.sendDeviceAttributesSecondary(G)}),U._parser.registerCsiHandler({final:"d"},function(G){return U.linePosAbsolute(G)}),U._parser.registerCsiHandler({final:"e"},function(G){return U.vPositionRelative(G)}),U._parser.registerCsiHandler({final:"f"},function(G){return U.hVPosition(G)}),U._parser.registerCsiHandler({final:"g"},function(G){return U.tabClear(G)}),U._parser.registerCsiHandler({final:"h"},function(G){return U.setMode(G)}),U._parser.registerCsiHandler({prefix:"?",final:"h"},function(G){return U.setModePrivate(G)}),U._parser.registerCsiHandler({final:"l"},function(G){return U.resetMode(G)}),U._parser.registerCsiHandler({prefix:"?",final:"l"},function(G){return U.resetModePrivate(G)}),U._parser.registerCsiHandler({final:"m"},function(G){return U.charAttributes(G)}),U._parser.registerCsiHandler({final:"n"},function(G){return U.deviceStatus(G)}),U._parser.registerCsiHandler({prefix:"?",final:"n"},function(G){return U.deviceStatusPrivate(G)}),U._parser.registerCsiHandler({intermediates:"!",final:"p"},function(G){return U.softReset(G)}),U._parser.registerCsiHandler({intermediates:" ",final:"q"},function(G){return U.setCursorStyle(G)}),U._parser.registerCsiHandler({final:"r"},function(G){return U.setScrollRegion(G)}),U._parser.registerCsiHandler({final:"s"},function(G){return U.saveCursor(G)}),U._parser.registerCsiHandler({final:"t"},function(G){return U.windowOptions(G)}),U._parser.registerCsiHandler({final:"u"},function(G){return U.restoreCursor(G)}),U._parser.registerCsiHandler({intermediates:"'",final:"}"},function(G){return U.insertColumns(G)}),U._parser.registerCsiHandler({intermediates:"'",final:"~"},function(G){return U.deleteColumns(G)}),U._parser.setExecuteHandler(v.C0.BEL,function(){return U.bell()}),U._parser.setExecuteHandler(v.C0.LF,function(){return U.lineFeed()}),U._parser.setExecuteHandler(v.C0.VT,function(){return U.lineFeed()}),U._parser.setExecuteHandler(v.C0.FF,function(){return U.lineFeed()}),U._parser.setExecuteHandler(v.C0.CR,function(){return U.carriageReturn()}),U._parser.setExecuteHandler(v.C0.BS,function(){return U.backspace()}),U._parser.setExecuteHandler(v.C0.HT,function(){return U.tab()}),U._parser.setExecuteHandler(v.C0.SO,function(){return U.shiftOut()}),U._parser.setExecuteHandler(v.C0.SI,function(){return U.shiftIn()}),U._parser.setExecuteHandler(v.C1.IND,function(){return U.index()}),U._parser.setExecuteHandler(v.C1.NEL,function(){return U.nextLine()}),U._parser.setExecuteHandler(v.C1.HTS,function(){return U.tabSet()}),U._parser.registerOscHandler(0,new g.OscHandler(function(G){return U.setTitle(G),U.setIconName(G),!0})),U._parser.registerOscHandler(1,new g.OscHandler(function(G){return U.setIconName(G)})),U._parser.registerOscHandler(2,new g.OscHandler(function(G){return U.setTitle(G)})),U._parser.registerOscHandler(4,new g.OscHandler(function(G){return U.setOrReportIndexedColor(G)})),U._parser.registerOscHandler(10,new g.OscHandler(function(G){return U.setOrReportFgColor(G)})),U._parser.registerOscHandler(11,new g.OscHandler(function(G){return U.setOrReportBgColor(G)})),U._parser.registerOscHandler(12,new g.OscHandler(function(G){return U.setOrReportCursorColor(G)})),U._parser.registerOscHandler(104,new g.OscHandler(function(G){return U.restoreIndexedColor(G)})),U._parser.registerOscHandler(110,new g.OscHandler(function(G){return U.restoreFgColor(G)})),U._parser.registerOscHandler(111,new g.OscHandler(function(G){return U.restoreBgColor(G)})),U._parser.registerOscHandler(112,new g.OscHandler(function(G){return U.restoreCursorColor(G)})),U._parser.registerEscHandler({final:"7"},function(){return U.saveCursor()}),U._parser.registerEscHandler({final:"8"},function(){return U.restoreCursor()}),U._parser.registerEscHandler({final:"D"},function(){return U.index()}),U._parser.registerEscHandler({final:"E"},function(){return U.nextLine()}),U._parser.registerEscHandler({final:"H"},function(){return U.tabSet()}),U._parser.registerEscHandler({final:"M"},function(){return U.reverseIndex()}),U._parser.registerEscHandler({final:"="},function(){return U.keypadApplicationMode()}),U._parser.registerEscHandler({final:">"},function(){return U.keypadNumericMode()}),U._parser.registerEscHandler({final:"c"},function(){return U.fullReset()}),U._parser.registerEscHandler({final:"n"},function(){return U.setgLevel(2)}),U._parser.registerEscHandler({final:"o"},function(){return U.setgLevel(3)}),U._parser.registerEscHandler({final:"|"},function(){return U.setgLevel(3)}),U._parser.registerEscHandler({final:"}"},function(){return U.setgLevel(2)}),U._parser.registerEscHandler({final:"~"},function(){return U.setgLevel(1)}),U._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return U.selectDefaultCharset()}),U._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return U.selectDefaultCharset()});var ee=function(G){K._parser.registerEscHandler({intermediates:"(",final:G},function(){return U.selectCharset("("+G)}),K._parser.registerEscHandler({intermediates:")",final:G},function(){return U.selectCharset(")"+G)}),K._parser.registerEscHandler({intermediates:"*",final:G},function(){return U.selectCharset("*"+G)}),K._parser.registerEscHandler({intermediates:"+",final:G},function(){return U.selectCharset("+"+G)}),K._parser.registerEscHandler({intermediates:"-",final:G},function(){return U.selectCharset("-"+G)}),K._parser.registerEscHandler({intermediates:".",final:G},function(){return U.selectCharset("."+G)}),K._parser.registerEscHandler({intermediates:"/",final:G},function(){return U.selectCharset("/"+G)})},K=this;for(var Y in T.CHARSETS)ee(Y);return U._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return U.screenAlignmentPattern()}),U._parser.setErrorHandler(function(G){return U._logService.error("Parsing error: ",G),G}),U._parser.registerDcsHandler({intermediates:"$",final:"q"},new W(U._bufferService,U._coreService,U._logService,U._optionsService)),U}return m(B,j),Object.defineProperty(B.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),B.prototype.dispose=function(){j.prototype.dispose.call(this)},B.prototype._preserveStack=function(P,N,z,V){this._parseStack.paused=!0,this._parseStack.cursorStartX=P,this._parseStack.cursorStartY=N,this._parseStack.decodedLength=z,this._parseStack.position=V},B.prototype._logSlowResolvingAsync=function(P){this._logService.logLevel<=u.LogLevelEnum.WARN&&Promise.race([P,new Promise(function(N,z){return setTimeout(function(){return z("#SLOW_TIMEOUT")},5e3)})]).catch(function(N){if(N!=="#SLOW_TIMEOUT")throw N;console.warn("async parser handler taking longer than 5000 ms")})},B.prototype.parse=function(P,N){var z,V=this._activeBuffer.x,te=this._activeBuffer.y,re=0,fe=this._parseStack.paused;if(fe){if(z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,N))return this._logSlowResolvingAsync(z),z;V=this._parseStack.cursorStartX,te=this._parseStack.cursorStartY,this._parseStack.paused=!1,P.length>E&&(re=this._parseStack.position+E)}if(this._logService.logLevel<=u.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof P=="string"?' "'+P+'"':' "'+Array.prototype.map.call(P,function(ee){return String.fromCharCode(ee)}).join("")+'"'),typeof P=="string"?P.split("").map(function(ee){return ee.charCodeAt(0)}):P),this._parseBuffer.length<P.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(P.length,E))),fe||this._dirtyRowService.clearRange(),P.length>E)for(var he=re;he<P.length;he+=E){var xe=he+E<P.length?he+E:P.length,U=typeof P=="string"?this._stringDecoder.decode(P.substring(he,xe),this._parseBuffer):this._utf8Decoder.decode(P.subarray(he,xe),this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,U))return this._preserveStack(V,te,U,he),this._logSlowResolvingAsync(z),z}else if(!fe&&(U=typeof P=="string"?this._stringDecoder.decode(P,this._parseBuffer):this._utf8Decoder.decode(P,this._parseBuffer),z=this._parser.parse(this._parseBuffer,U)))return this._preserveStack(V,te,U,0),this._logSlowResolvingAsync(z),z;this._activeBuffer.x===V&&this._activeBuffer.y===te||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},B.prototype.print=function(P,N,z){var V,te,re=this._charsetService.charset,fe=this._optionsService.rawOptions.screenReaderMode,he=this._bufferService.cols,xe=this._coreService.decPrivateModes.wraparound,U=this._coreService.modes.insertMode,ee=this._curAttrData,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&z-N>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ee.fg,ee.bg,ee.extended);for(var Y=N;Y<z;++Y){if(V=P[Y],te=this._unicodeService.wcwidth(V),V<127&&re){var G=re[String.fromCharCode(V)];G&&(V=G.charCodeAt(0))}if(fe&&this._onA11yChar.fire((0,C.stringFromCodePoint)(V)),te||!this._activeBuffer.x){if(this._activeBuffer.x+te-1>=he){if(xe){for(;this._activeBuffer.x<he;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,ee.fg,ee.bg,ee.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=he-1,te===2)continue}if(U&&(K.insertCells(this._activeBuffer.x,te,this._activeBuffer.getNullCell(ee),ee),K.getWidth(he-1)===2&&K.setCellFromCodePoint(he-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,ee.fg,ee.bg,ee.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,V,te,ee.fg,ee.bg,ee.extended),te>0)for(;--te;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,ee.fg,ee.bg,ee.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,V):K.addCodepointToCell(this._activeBuffer.x-2,V)}z-N>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<he&&z-N>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,ee.fg,ee.bg,ee.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype.registerCsiHandler=function(P,N){var z=this;return P.final!=="t"||P.prefix||P.intermediates?this._parser.registerCsiHandler(P,N):this._parser.registerCsiHandler(P,function(V){return!A(V.params[0],z._optionsService.rawOptions.windowOptions)||N(V)})},B.prototype.registerDcsHandler=function(P,N){return this._parser.registerDcsHandler(P,new b.DcsHandler(N))},B.prototype.registerEscHandler=function(P,N){return this._parser.registerEscHandler(P,N)},B.prototype.registerOscHandler=function(P,N){return this._parser.registerOscHandler(P,new g.OscHandler(N))},B.prototype.bell=function(){return this._onRequestBell.fire(),!0},B.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},B.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},B.prototype.backspace=function(){var P;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||P===void 0?void 0:P.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);N.hasWidth(this._activeBuffer.x)&&!N.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},B.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var P=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-P),!0},B.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},B.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},B.prototype._restrictCursor=function(P){P===void 0&&(P=this._bufferService.cols-1),this._activeBuffer.x=Math.min(P,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._setCursor=function(P,N){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=P,this._activeBuffer.y=this._activeBuffer.scrollTop+N):(this._activeBuffer.x=P,this._activeBuffer.y=N),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._moveCursor=function(P,N){this._restrictCursor(),this._setCursor(this._activeBuffer.x+P,this._activeBuffer.y+N)},B.prototype.cursorUp=function(P){var N=this._activeBuffer.y-this._activeBuffer.scrollTop;return N>=0?this._moveCursor(0,-Math.min(N,P.params[0]||1)):this._moveCursor(0,-(P.params[0]||1)),!0},B.prototype.cursorDown=function(P){var N=this._activeBuffer.scrollBottom-this._activeBuffer.y;return N>=0?this._moveCursor(0,Math.min(N,P.params[0]||1)):this._moveCursor(0,P.params[0]||1),!0},B.prototype.cursorForward=function(P){return this._moveCursor(P.params[0]||1,0),!0},B.prototype.cursorBackward=function(P){return this._moveCursor(-(P.params[0]||1),0),!0},B.prototype.cursorNextLine=function(P){return this.cursorDown(P),this._activeBuffer.x=0,!0},B.prototype.cursorPrecedingLine=function(P){return this.cursorUp(P),this._activeBuffer.x=0,!0},B.prototype.cursorCharAbsolute=function(P){return this._setCursor((P.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.cursorPosition=function(P){return this._setCursor(P.length>=2?(P.params[1]||1)-1:0,(P.params[0]||1)-1),!0},B.prototype.charPosAbsolute=function(P){return this._setCursor((P.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.hPositionRelative=function(P){return this._moveCursor(P.params[0]||1,0),!0},B.prototype.linePosAbsolute=function(P){return this._setCursor(this._activeBuffer.x,(P.params[0]||1)-1),!0},B.prototype.vPositionRelative=function(P){return this._moveCursor(0,P.params[0]||1),!0},B.prototype.hVPosition=function(P){return this.cursorPosition(P),!0},B.prototype.tabClear=function(P){var N=P.params[0];return N===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:N===3&&(this._activeBuffer.tabs={}),!0},B.prototype.cursorForwardTab=function(P){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var N=P.params[0]||1;N--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},B.prototype.cursorBackwardTab=function(P){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var N=P.params[0]||1;N--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},B.prototype._eraseInBufferLine=function(P,N,z,V){V===void 0&&(V=!1);var te=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);te.replaceCells(N,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V&&(te.isWrapped=!1)},B.prototype._resetBufferLine=function(P){var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);N.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+P),N.isWrapped=!1},B.prototype.eraseInDisplay=function(P){var N;switch(this._restrictCursor(this._bufferService.cols),P.params[0]){case 0:for(N=this._activeBuffer.y,this._dirtyRowService.markDirty(N),this._eraseInBufferLine(N++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);N<this._bufferService.rows;N++)this._resetBufferLine(N);this._dirtyRowService.markDirty(N);break;case 1:for(N=this._activeBuffer.y,this._dirtyRowService.markDirty(N),this._eraseInBufferLine(N,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(N+1).isWrapped=!1);N--;)this._resetBufferLine(N);this._dirtyRowService.markDirty(0);break;case 2:for(N=this._bufferService.rows,this._dirtyRowService.markDirty(N-1);N--;)this._resetBufferLine(N);this._dirtyRowService.markDirty(0);break;case 3:var z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0},B.prototype.eraseInLine=function(P){switch(this._restrictCursor(this._bufferService.cols),P.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},B.prototype.insertLines=function(P){this._restrictCursor();var N=P.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var z=this._activeBuffer.ybase+this._activeBuffer.y,V=this._bufferService.rows-1-this._activeBuffer.scrollBottom,te=this._bufferService.rows-1+this._activeBuffer.ybase-V+1;N--;)this._activeBuffer.lines.splice(te-1,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.deleteLines=function(P){this._restrictCursor();var N=P.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var z,V=this._activeBuffer.ybase+this._activeBuffer.y;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;N--;)this._activeBuffer.lines.splice(V,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.insertChars=function(P){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.insertCells(this._activeBuffer.x,P.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.deleteChars=function(P){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.deleteCells(this._activeBuffer.x,P.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.scrollUp=function(P){for(var N=P.params[0]||1;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollDown=function(P){for(var N=P.params[0]||1;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollLeft=function(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=P.params[0]||1,z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){var V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.deleteCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollRight=function(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=P.params[0]||1,z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){var V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.insertCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.insertColumns=function(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=P.params[0]||1,z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){var V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.deleteColumns=function(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var N=P.params[0]||1,z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){var V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.deleteCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.eraseChars=function(P){this._restrictCursor();var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(P.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.repeatPrecedingCharacter=function(P){if(!this._parser.precedingCodepoint)return!0;for(var N=P.params[0]||1,z=new Uint32Array(N),V=0;V<N;++V)z[V]=this._parser.precedingCodepoint;return this.print(z,0,z.length),!0},B.prototype.sendDeviceAttributesPrimary=function(P){return P.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(v.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(v.C0.ESC+"[?6c")),!0},B.prototype.sendDeviceAttributesSecondary=function(P){return P.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(v.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(v.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(P.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(v.C0.ESC+"[>83;40003;0c")),!0},B.prototype._is=function(P){return(this._optionsService.rawOptions.termName+"").indexOf(P)===0},B.prototype.setMode=function(P){for(var N=0;N<P.length;N++)P.params[N]===4&&(this._coreService.modes.insertMode=!0);return!0},B.prototype.setModePrivate=function(P){for(var N=0;N<P.length;N++)switch(P.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,T.DEFAULT_CHARSET),this._charsetService.setgCharset(1,T.DEFAULT_CHARSET),this._charsetService.setgCharset(2,T.DEFAULT_CHARSET),this._charsetService.setgCharset(3,T.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},B.prototype.resetMode=function(P){for(var N=0;N<P.length;N++)P.params[N]===4&&(this._coreService.modes.insertMode=!1);return!0},B.prototype.resetModePrivate=function(P){for(var N=0;N<P.length;N++)switch(P.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),P.params[N]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},B.prototype._updateAttrColor=function(P,N,z,V,te){return N===2?(P|=50331648,P&=-16777216,P|=a.AttributeData.fromColorRGB([z,V,te])):N===5&&(P&=-50331904,P|=33554432|255&z),P},B.prototype._extractColor=function(P,N,z){var V=[0,0,-1,0,0,0],te=0,re=0;do{if(V[re+te]=P.params[N+re],P.hasSubParams(N+re)){var fe=P.getSubParams(N+re),he=0;do V[1]===5&&(te=1),V[re+he+1+te]=fe[he];while(++he<fe.length&&he+re+1+te<V.length);break}if(V[1]===5&&re+te>=2||V[1]===2&&re+te>=5)break;V[1]&&(te=1)}while(++re+N<P.length&&re+te<V.length);for(he=2;he<V.length;++he)V[he]===-1&&(V[he]=0);switch(V[0]){case 38:z.fg=this._updateAttrColor(z.fg,V[1],V[3],V[4],V[5]);break;case 48:z.bg=this._updateAttrColor(z.bg,V[1],V[3],V[4],V[5]);break;case 58:z.extended=z.extended.clone(),z.extended.underlineColor=this._updateAttrColor(z.extended.underlineColor,V[1],V[3],V[4],V[5])}return re},B.prototype._processUnderline=function(P,N){N.extended=N.extended.clone(),(!~P||P>5)&&(P=1),N.extended.underlineStyle=P,N.fg|=268435456,P===0&&(N.fg&=-268435457),N.updateExtended()},B.prototype.charAttributes=function(P){if(P.length===1&&P.params[0]===0)return this._curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=d.DEFAULT_ATTR_DATA.bg,!0;for(var N,z=P.length,V=this._curAttrData,te=0;te<z;te++)(N=P.params[te])>=30&&N<=37?(V.fg&=-50331904,V.fg|=16777216|N-30):N>=40&&N<=47?(V.bg&=-50331904,V.bg|=16777216|N-40):N>=90&&N<=97?(V.fg&=-50331904,V.fg|=16777224|N-90):N>=100&&N<=107?(V.bg&=-50331904,V.bg|=16777224|N-100):N===0?(V.fg=d.DEFAULT_ATTR_DATA.fg,V.bg=d.DEFAULT_ATTR_DATA.bg):N===1?V.fg|=134217728:N===3?V.bg|=67108864:N===4?(V.fg|=268435456,this._processUnderline(P.hasSubParams(te)?P.getSubParams(te)[0]:1,V)):N===5?V.fg|=536870912:N===7?V.fg|=67108864:N===8?V.fg|=1073741824:N===9?V.fg|=2147483648:N===2?V.bg|=134217728:N===21?this._processUnderline(2,V):N===22?(V.fg&=-134217729,V.bg&=-134217729):N===23?V.bg&=-67108865:N===24?V.fg&=-268435457:N===25?V.fg&=-536870913:N===27?V.fg&=-67108865:N===28?V.fg&=-1073741825:N===29?V.fg&=2147483647:N===39?(V.fg&=-67108864,V.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):N===49?(V.bg&=-67108864,V.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):N===38||N===48||N===58?te+=this._extractColor(P,te,V):N===59?(V.extended=V.extended.clone(),V.extended.underlineColor=-1,V.updateExtended()):N===100?(V.fg&=-67108864,V.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,V.bg&=-67108864,V.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",N);return!0},B.prototype.deviceStatus=function(P){switch(P.params[0]){case 5:this._coreService.triggerDataEvent(v.C0.ESC+"[0n");break;case 6:var N=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(v.C0.ESC+"["+N+";"+z+"R")}return!0},B.prototype.deviceStatusPrivate=function(P){if(P.params[0]===6){var N=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(v.C0.ESC+"[?"+N+";"+z+"R")}return!0},B.prototype.softReset=function(P){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},B.prototype.setCursorStyle=function(P){var N=P.params[0]||1;switch(N){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var z=N%2==1;return this._optionsService.options.cursorBlink=z,!0},B.prototype.setScrollRegion=function(P){var N,z=P.params[0]||1;return(P.length<2||(N=P.params[1])>this._bufferService.rows||N===0)&&(N=this._bufferService.rows),N>z&&(this._activeBuffer.scrollTop=z-1,this._activeBuffer.scrollBottom=N-1,this._setCursor(0,0)),!0},B.prototype.windowOptions=function(P){if(!A(P.params[0],this._optionsService.rawOptions.windowOptions))return!0;var N=P.length>1?P.params[1]:0;switch(P.params[0]){case 14:N!==2&&this._onRequestWindowsOptionsReport.fire(_.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(_.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(v.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:N!==0&&N!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),N!==0&&N!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:N!==0&&N!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),N!==0&&N!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},B.prototype.saveCursor=function(P){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},B.prototype.restoreCursor=function(P){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},B.prototype.setTitle=function(P){return this._windowTitle=P,this._onTitleChange.fire(P),!0},B.prototype.setIconName=function(P){return this._iconName=P,!0},B.prototype.setOrReportIndexedColor=function(P){for(var N=[],z=P.split(";");z.length>1;){var V=z.shift(),te=z.shift();if(/^\d+$/.exec(V)){var re=parseInt(V);if(0<=re&&re<256)if(te==="?")N.push({type:0,index:re});else{var fe=(0,k.parseColor)(te);fe&&N.push({type:1,index:re,color:fe})}}}return N.length&&this._onColor.fire(N),!0},B.prototype._setOrReportSpecialColor=function(P,N){for(var z=P.split(";"),V=0;V<z.length&&!(N>=this._specialColors.length);++V,++N)if(z[V]==="?")this._onColor.fire([{type:0,index:this._specialColors[N]}]);else{var te=(0,k.parseColor)(z[V]);te&&this._onColor.fire([{type:1,index:this._specialColors[N],color:te}])}return!0},B.prototype.setOrReportFgColor=function(P){return this._setOrReportSpecialColor(P,0)},B.prototype.setOrReportBgColor=function(P){return this._setOrReportSpecialColor(P,1)},B.prototype.setOrReportCursorColor=function(P){return this._setOrReportSpecialColor(P,2)},B.prototype.restoreIndexedColor=function(P){if(!P)return this._onColor.fire([{type:2}]),!0;for(var N=[],z=P.split(";"),V=0;V<z.length;++V)if(/^\d+$/.exec(z[V])){var te=parseInt(z[V]);0<=te&&te<256&&N.push({type:2,index:te})}return N.length&&this._onColor.fire(N),!0},B.prototype.restoreFgColor=function(P){return this._onColor.fire([{type:2,index:256}]),!0},B.prototype.restoreBgColor=function(P){return this._onColor.fire([{type:2,index:257}]),!0},B.prototype.restoreCursorColor=function(P){return this._onColor.fire([{type:2,index:258}]),!0},B.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},B.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},B.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},B.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,T.DEFAULT_CHARSET),!0},B.prototype.selectCharset=function(P){return P.length!==2?(this.selectDefaultCharset(),!0):(P[0]==="/"||this._charsetService.setgCharset(O[P[0]],T.CHARSETS[P[1]]||T.DEFAULT_CHARSET),!0)},B.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},B.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},B.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var P=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,P,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},B.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},B.prototype.reset=function(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()},B.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},B.prototype.setgLevel=function(P){return this._charsetService.setgLevel(P),!0},B.prototype.screenAlignmentPattern=function(){var P=new l.CellData;P.content=1<<22|"E".charCodeAt(0),P.fg=this._curAttrData.fg,P.bg=this._curAttrData.bg,this._setCursor(0,0);for(var N=0;N<this._bufferService.rows;++N){var z=this._activeBuffer.ybase+this._activeBuffer.y+N,V=this._activeBuffer.lines.get(z);V&&(V.fill(P),V.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},B}(c.Disposable);h.InputHandler=R},844:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getDisposeArrayDisposable=h.disposeArray=h.Disposable=void 0;var L=function(){function m(){this._disposables=[],this._isDisposed=!1}return m.prototype.dispose=function(){this._isDisposed=!0;for(var _=0,v=this._disposables;_<v.length;_++)v[_].dispose();this._disposables.length=0},m.prototype.register=function(_){return this._disposables.push(_),_},m.prototype.unregister=function(_){var v=this._disposables.indexOf(_);v!==-1&&this._disposables.splice(v,1)},m}();function y(m){for(var _=0,v=m;_<v.length;_++)v[_].dispose();m.length=0}h.Disposable=L,h.disposeArray=y,h.getDisposeArrayDisposable=function(m){return{dispose:function(){return y(m)}}}},6114:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isLinux=h.isWindows=h.isIphone=h.isIpad=h.isMac=h.isSafari=h.isLegacyEdge=h.isFirefox=void 0;var L=typeof navigator>"u",y=L?"node":navigator.userAgent,m=L?"node":navigator.platform;h.isFirefox=y.includes("Firefox"),h.isLegacyEdge=y.includes("Edge"),h.isSafari=/^((?!chrome|android).)*safari/i.test(y),h.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),h.isIpad=m==="iPad",h.isIphone=m==="iPhone",h.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),h.isLinux=m.indexOf("Linux")>=0},8273:(D,h)=>{function L(y,m,_,v){if(_===void 0&&(_=0),v===void 0&&(v=y.length),_>=y.length)return y;_=(y.length+_)%y.length,v=v>=y.length?y.length:(y.length+v)%y.length;for(var T=_;T<v;++T)y[T]=m;return y}Object.defineProperty(h,"__esModule",{value:!0}),h.concat=h.fillFallback=h.fill=void 0,h.fill=function(y,m,_,v){return y.fill?y.fill(m,_,v):L(y,m,_,v)},h.fillFallback=L,h.concat=function(y,m){var _=new y.constructor(y.length+m.length);return _.set(y),_.set(m,y.length),_}},9282:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.updateWindowsModeWrappedState=void 0;var y=L(643);h.updateWindowsModeWrappedState=function(m){var _=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),v=_?.get(m.cols-1),T=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);T&&v&&(T.isWrapped=v[y.CHAR_DATA_CODE_INDEX]!==y.NULL_CELL_CODE&&v[y.CHAR_DATA_CODE_INDEX]!==y.WHITESPACE_CELL_CODE)}},3734:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ExtendedAttrs=h.AttributeData=void 0;var L=function(){function m(){this.fg=0,this.bg=0,this.extended=new y}return m.toColorRGB=function(_){return[_>>>16&255,_>>>8&255,255&_]},m.fromColorRGB=function(_){return(255&_[0])<<16|(255&_[1])<<8|255&_[2]},m.prototype.clone=function(){var _=new m;return _.fg=this.fg,_.bg=this.bg,_.extended=this.extended.clone(),_},m.prototype.isInverse=function(){return 67108864&this.fg},m.prototype.isBold=function(){return 134217728&this.fg},m.prototype.isUnderline=function(){return 268435456&this.fg},m.prototype.isBlink=function(){return 536870912&this.fg},m.prototype.isInvisible=function(){return 1073741824&this.fg},m.prototype.isItalic=function(){return 67108864&this.bg},m.prototype.isDim=function(){return 134217728&this.bg},m.prototype.isStrikethrough=function(){return 2147483648&this.fg},m.prototype.getFgColorMode=function(){return 50331648&this.fg},m.prototype.getBgColorMode=function(){return 50331648&this.bg},m.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},m.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},m.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},m.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},m.prototype.isFgDefault=function(){return(50331648&this.fg)==0},m.prototype.isBgDefault=function(){return(50331648&this.bg)==0},m.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},m.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},m.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},m.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},m.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},m.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},m.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},m.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},m.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},m.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},m.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},m}();h.AttributeData=L;var y=function(){function m(_,v){_===void 0&&(_=0),v===void 0&&(v=-1),this.underlineStyle=_,this.underlineColor=v}return m.prototype.clone=function(){return new m(this.underlineStyle,this.underlineColor)},m.prototype.isEmpty=function(){return this.underlineStyle===0},m}();h.ExtendedAttrs=y},9092:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferStringIterator=h.Buffer=h.MAX_BUFFER_SIZE=void 0;var y=L(6349),m=L(8437),_=L(511),v=L(643),T=L(4634),w=L(4863),c=L(7116),p=L(3734);h.MAX_BUFFER_SIZE=4294967295;var C=function(){function s(n,l,a){this._hasScrollback=n,this._optionsService=l,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return s.prototype.getNullCell=function(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell},s.prototype.getWhitespaceCell=function(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell},s.prototype.getBlankLine=function(n,l){return new m.BufferLine(this._bufferService.cols,this.getNullCell(n),l)},Object.defineProperty(s.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isCursorInViewport",{get:function(){var n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows},enumerable:!1,configurable:!0}),s.prototype._getCorrectBufferLength=function(n){if(!this._hasScrollback)return n;var l=n+this._optionsService.rawOptions.scrollback;return l>h.MAX_BUFFER_SIZE?h.MAX_BUFFER_SIZE:l},s.prototype.fillViewportRows=function(n){if(this.lines.length===0){n===void 0&&(n=m.DEFAULT_ATTR_DATA);for(var l=this._rows;l--;)this.lines.push(this.getBlankLine(n))}},s.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},s.prototype.resize=function(n,l){var a=this.getNullCell(m.DEFAULT_ATTR_DATA),u=this._getCorrectBufferLength(l);if(u>this.lines.maxLength&&(this.lines.maxLength=u),this.lines.length>0){if(this._cols<n)for(var g=0;g<this.lines.length;g++)this.lines.get(g).resize(n,a);var b=0;if(this._rows<l)for(var k=this._rows;k<l;k++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new m.BufferLine(n,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(n,a)));else for(k=this._rows;k>l;k--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(u<this.lines.maxLength){var O=this.lines.length-u;O>0&&(this.lines.trimStart(O),this.ybase=Math.max(this.ybase-O,0),this.ydisp=Math.max(this.ydisp-O,0),this.savedY=Math.max(this.savedY-O,0)),this.lines.maxLength=u}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,l-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(n,l),this._cols>n))for(g=0;g<this.lines.length;g++)this.lines.get(g).resize(n,a);this._cols=n,this._rows=l},Object.defineProperty(s.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),s.prototype._reflow=function(n,l){this._cols!==n&&(n>this._cols?this._reflowLarger(n,l):this._reflowSmaller(n,l))},s.prototype._reflowLarger=function(n,l){var a=(0,T.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(a.length>0){var u=(0,T.reflowLargerCreateNewLayout)(this.lines,a);(0,T.reflowLargerApplyNewLayout)(this.lines,u.layout),this._reflowLargerAdjustViewport(n,l,u.countRemoved)}},s.prototype._reflowLargerAdjustViewport=function(n,l,a){for(var u=this.getNullCell(m.DEFAULT_ATTR_DATA),g=a;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new m.BufferLine(n,u))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)},s.prototype._reflowSmaller=function(n,l){for(var a=this.getNullCell(m.DEFAULT_ATTR_DATA),u=[],g=0,b=this.lines.length-1;b>=0;b--){var k=this.lines.get(b);if(!(!k||!k.isWrapped&&k.getTrimmedLength()<=n)){for(var O=[k];k.isWrapped&&b>0;)k=this.lines.get(--b),O.unshift(k);var E=this.ybase+this.y;if(!(E>=b&&E<b+O.length)){var A,W=O[O.length-1].getTrimmedLength(),R=(0,T.reflowSmallerGetNewLineLengths)(O,this._cols,n),j=R.length-O.length;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+j):Math.max(0,this.lines.length-this.lines.maxLength+j);for(var B=[],P=0;P<j;P++){var N=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);B.push(N)}B.length>0&&(u.push({start:b+O.length+g,newLines:B}),g+=B.length),O.push.apply(O,B);var z=R.length-1,V=R[z];V===0&&(V=R[--z]);for(var te=O.length-j-1,re=W;te>=0;){var fe=Math.min(re,V);if(O[z]===void 0)break;if(O[z].copyCellsFrom(O[te],re-fe,V-fe,fe,!0),(V-=fe)==0&&(V=R[--z]),(re-=fe)==0){te--;var he=Math.max(te,0);re=(0,T.getWrappedLineTrimmedLength)(O,he,this._cols)}}for(P=0;P<O.length;P++)R[P]<n&&O[P].setCell(R[P],a);for(var xe=j-A;xe-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+l-1)}}}if(u.length>0){var U=[],ee=[];for(P=0;P<this.lines.length;P++)ee.push(this.lines.get(P));var K=this.lines.length,Y=K-1,G=0,Se=u[G];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);var de=0;for(P=Math.min(this.lines.maxLength-1,K+g-1);P>=0;P--)if(Se&&Se.start>Y+de){for(var Ce=Se.newLines.length-1;Ce>=0;Ce--)this.lines.set(P--,Se.newLines[Ce]);P++,U.push({index:Y+1,amount:Se.newLines.length}),de+=Se.newLines.length,Se=u[++G]}else this.lines.set(P,ee[Y--]);var De=0;for(P=U.length-1;P>=0;P--)U[P].index+=De,this.lines.onInsertEmitter.fire(U[P]),De+=U[P].amount;var Fe=Math.max(0,K+g-this.lines.maxLength);Fe>0&&this.lines.onTrimEmitter.fire(Fe)}},s.prototype.stringIndexToBufferIndex=function(n,l,a){for(a===void 0&&(a=!1);l;){var u=this.lines.get(n);if(!u)return[-1,-1];for(var g=a?u.getTrimmedLength():u.length,b=0;b<g;++b)if(u.get(b)[v.CHAR_DATA_WIDTH_INDEX]&&(l-=u.get(b)[v.CHAR_DATA_CHAR_INDEX].length||1),l<0)return[n,b];n++}return[n,0]},s.prototype.translateBufferLineToString=function(n,l,a,u){a===void 0&&(a=0);var g=this.lines.get(n);return g?g.translateToString(l,a,u):""},s.prototype.getWrappedRangeForLine=function(n){for(var l=n,a=n;l>0&&this.lines.get(l).isWrapped;)l--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:l,last:a}},s.prototype.setupTabStops=function(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0},s.prototype.prevStop=function(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n},s.prototype.nextStop=function(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n},s.prototype.clearMarkers=function(n){if(this._isClearing=!0,n!==void 0)for(var l=0;l<this.markers.length;l++)this.markers[l].line===n&&(this.markers[l].dispose(),this.markers.splice(l--,1));else{for(var a=0,u=this.markers;a<u.length;a++)u[a].dispose();this.markers=[]}this._isClearing=!1},s.prototype.addMarker=function(n){var l=this,a=new w.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(function(u){a.line-=u,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(function(u){a.line>=u.index&&(a.line+=u.amount)})),a.register(this.lines.onDelete(function(u){a.line>=u.index&&a.line<u.index+u.amount&&a.dispose(),a.line>u.index&&(a.line-=u.amount)})),a.register(a.onDispose(function(){return l._removeMarker(a)})),a},s.prototype._removeMarker=function(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)},s.prototype.iterator=function(n,l,a,u,g){return new d(this,n,l,a,u,g)},s}();h.Buffer=C;var d=function(){function s(n,l,a,u,g,b){a===void 0&&(a=0),u===void 0&&(u=n.lines.length),g===void 0&&(g=0),b===void 0&&(b=0),this._buffer=n,this._trimRight=l,this._startIndex=a,this._endIndex=u,this._startOverscan=g,this._endOverscan=b,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return s.prototype.hasNext=function(){return this._current<this._endIndex},s.prototype.next=function(){var n=this._buffer.getWrappedRangeForLine(this._current);n.first<this._startIndex-this._startOverscan&&(n.first=this._startIndex-this._startOverscan),n.last>this._endIndex+this._endOverscan&&(n.last=this._endIndex+this._endOverscan),n.first=Math.max(n.first,0),n.last=Math.min(n.last,this._buffer.lines.length);for(var l="",a=n.first;a<=n.last;++a)l+=this._buffer.translateBufferLineToString(a,this._trimRight);return this._current=n.last+1,{range:n,content:l}},s}();h.BufferStringIterator=d},8437:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLine=h.DEFAULT_ATTR_DATA=void 0;var y=L(482),m=L(643),_=L(511),v=L(3734);h.DEFAULT_ATTR_DATA=Object.freeze(new v.AttributeData);var T=function(){function w(c,p,C){C===void 0&&(C=!1),this.isWrapped=C,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);for(var d=p||_.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),s=0;s<c;++s)this.setCell(s,d);this.length=c}return w.prototype.get=function(c){var p=this._data[3*c+0],C=2097151&p;return[this._data[3*c+1],2097152&p?this._combined[c]:C?(0,y.stringFromCodePoint)(C):"",p>>22,2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):C]},w.prototype.set=function(c,p){this._data[3*c+1]=p[m.CHAR_DATA_ATTR_INDEX],p[m.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=p[1],this._data[3*c+0]=2097152|c|p[m.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=p[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[m.CHAR_DATA_WIDTH_INDEX]<<22},w.prototype.getWidth=function(c){return this._data[3*c+0]>>22},w.prototype.hasWidth=function(c){return 12582912&this._data[3*c+0]},w.prototype.getFg=function(c){return this._data[3*c+1]},w.prototype.getBg=function(c){return this._data[3*c+2]},w.prototype.hasContent=function(c){return 4194303&this._data[3*c+0]},w.prototype.getCodePoint=function(c){var p=this._data[3*c+0];return 2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&p},w.prototype.isCombined=function(c){return 2097152&this._data[3*c+0]},w.prototype.getString=function(c){var p=this._data[3*c+0];return 2097152&p?this._combined[c]:2097151&p?(0,y.stringFromCodePoint)(2097151&p):""},w.prototype.loadCell=function(c,p){var C=3*c;return p.content=this._data[C+0],p.fg=this._data[C+1],p.bg=this._data[C+2],2097152&p.content&&(p.combinedData=this._combined[c]),268435456&p.bg&&(p.extended=this._extendedAttrs[c]),p},w.prototype.setCell=function(c,p){2097152&p.content&&(this._combined[c]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[c]=p.extended),this._data[3*c+0]=p.content,this._data[3*c+1]=p.fg,this._data[3*c+2]=p.bg},w.prototype.setCellFromCodePoint=function(c,p,C,d,s,n){268435456&s&&(this._extendedAttrs[c]=n),this._data[3*c+0]=p|C<<22,this._data[3*c+1]=d,this._data[3*c+2]=s},w.prototype.addCodepointToCell=function(c,p){var C=this._data[3*c+0];2097152&C?this._combined[c]+=(0,y.stringFromCodePoint)(p):(2097151&C?(this._combined[c]=(0,y.stringFromCodePoint)(2097151&C)+(0,y.stringFromCodePoint)(p),C&=-2097152,C|=2097152):C=p|1<<22,this._data[3*c+0]=C)},w.prototype.insertCells=function(c,p,C,d){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs),p<this.length-c){for(var s=new _.CellData,n=this.length-c-p-1;n>=0;--n)this.setCell(c+p+n,this.loadCell(c+n,s));for(n=0;n<p;++n)this.setCell(c+n,C)}else for(n=c;n<this.length;++n)this.setCell(n,C);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs)},w.prototype.deleteCells=function(c,p,C,d){if(c%=this.length,p<this.length-c){for(var s=new _.CellData,n=0;n<this.length-c-p;++n)this.setCell(c+n,this.loadCell(c+p+n,s));for(n=this.length-p;n<this.length;++n)this.setCell(n,C)}else for(n=c;n<this.length;++n)this.setCell(n,C);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs)},w.prototype.replaceCells=function(c,p,C,d){for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodePoint(p,0,1,d?.fg||0,d?.bg||0,d?.extended||new v.ExtendedAttrs);c<p&&c<this.length;)this.setCell(c++,C)},w.prototype.resize=function(c,p){if(c!==this.length){if(c>this.length){var C=new Uint32Array(3*c);this.length&&(3*c<this._data.length?C.set(this._data.subarray(0,3*c)):C.set(this._data)),this._data=C;for(var d=this.length;d<c;++d)this.setCell(d,p)}else if(c){(C=new Uint32Array(3*c)).set(this._data.subarray(0,3*c)),this._data=C;var s=Object.keys(this._combined);for(d=0;d<s.length;d++){var n=parseInt(s[d],10);n>=c&&delete this._combined[n]}}else this._data=new Uint32Array(0),this._combined={};this.length=c}},w.prototype.fill=function(c){this._combined={},this._extendedAttrs={};for(var p=0;p<this.length;++p)this.setCell(p,c)},w.prototype.copyFrom=function(c){for(var p in this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={},c._combined)this._combined[p]=c._combined[p];for(var p in this._extendedAttrs={},c._extendedAttrs)this._extendedAttrs[p]=c._extendedAttrs[p];this.isWrapped=c.isWrapped},w.prototype.clone=function(){var c=new w(0);for(var p in c._data=new Uint32Array(this._data),c.length=this.length,this._combined)c._combined[p]=this._combined[p];for(var p in this._extendedAttrs)c._extendedAttrs[p]=this._extendedAttrs[p];return c.isWrapped=this.isWrapped,c},w.prototype.getTrimmedLength=function(){for(var c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0},w.prototype.copyCellsFrom=function(c,p,C,d,s){var n=c._data;if(s)for(var l=d-1;l>=0;l--)for(var a=0;a<3;a++)this._data[3*(C+l)+a]=n[3*(p+l)+a];else for(l=0;l<d;l++)for(a=0;a<3;a++)this._data[3*(C+l)+a]=n[3*(p+l)+a];var u=Object.keys(c._combined);for(a=0;a<u.length;a++){var g=parseInt(u[a],10);g>=p&&(this._combined[g-p+C]=c._combined[g])}},w.prototype.translateToString=function(c,p,C){c===void 0&&(c=!1),p===void 0&&(p=0),C===void 0&&(C=this.length),c&&(C=Math.min(C,this.getTrimmedLength()));for(var d="";p<C;){var s=this._data[3*p+0],n=2097151&s;d+=2097152&s?this._combined[p]:n?(0,y.stringFromCodePoint)(n):m.WHITESPACE_CELL_CHAR,p+=s>>22||1}return d},w}();h.BufferLine=T},4841:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getRangeLength=void 0,h.getRangeLength=function(L,y){if(L.start.y>L.end.y)throw new Error("Buffer range end ("+L.end.x+", "+L.end.y+") cannot be before start ("+L.start.x+", "+L.start.y+")");return y*(L.end.y-L.start.y)+(L.end.x-L.start.x+1)}},4634:(D,h)=>{function L(y,m,_){if(m===y.length-1)return y[m].getTrimmedLength();var v=!y[m].hasContent(_-1)&&y[m].getWidth(_-1)===1,T=y[m+1].getWidth(0)===2;return v&&T?_-1:_}Object.defineProperty(h,"__esModule",{value:!0}),h.getWrappedLineTrimmedLength=h.reflowSmallerGetNewLineLengths=h.reflowLargerApplyNewLayout=h.reflowLargerCreateNewLayout=h.reflowLargerGetLinesToRemove=void 0,h.reflowLargerGetLinesToRemove=function(y,m,_,v,T){for(var w=[],c=0;c<y.length-1;c++){var p=c,C=y.get(++p);if(C.isWrapped){for(var d=[y.get(c)];p<y.length&&C.isWrapped;)d.push(C),C=y.get(++p);if(v>=c&&v<p)c+=d.length-1;else{for(var s=0,n=L(d,s,m),l=1,a=0;l<d.length;){var u=L(d,l,m),g=u-a,b=_-n,k=Math.min(g,b);d[s].copyCellsFrom(d[l],a,n,k,!1),(n+=k)===_&&(s++,n=0),(a+=k)===u&&(l++,a=0),n===0&&s!==0&&d[s-1].getWidth(_-1)===2&&(d[s].copyCellsFrom(d[s-1],_-1,n++,1,!1),d[s-1].setCell(_-1,T))}d[s].replaceCells(n,_,T);for(var O=0,E=d.length-1;E>0&&(E>s||d[E].getTrimmedLength()===0);E--)O++;O>0&&(w.push(c+d.length-O),w.push(O)),c+=d.length-1}}}return w},h.reflowLargerCreateNewLayout=function(y,m){for(var _=[],v=0,T=m[v],w=0,c=0;c<y.length;c++)if(T===c){var p=m[++v];y.onDeleteEmitter.fire({index:c-w,amount:p}),c+=p-1,w+=p,T=m[++v]}else _.push(c);return{layout:_,countRemoved:w}},h.reflowLargerApplyNewLayout=function(y,m){for(var _=[],v=0;v<m.length;v++)_.push(y.get(m[v]));for(v=0;v<_.length;v++)y.set(v,_[v]);y.length=m.length},h.reflowSmallerGetNewLineLengths=function(y,m,_){for(var v=[],T=y.map(function(n,l){return L(y,l,m)}).reduce(function(n,l){return n+l}),w=0,c=0,p=0;p<T;){if(T-p<_){v.push(T-p);break}w+=_;var C=L(y,c,m);w>C&&(w-=C,c++);var d=y[c].getWidth(w-1)===2;d&&w--;var s=d?_-1:_;v.push(s),p+=s}return v},h.getWrappedLineTrimmedLength=L},5295:function(D,h,L){var y,m=this&&this.__extends||(y=function(w,c){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,C){p.__proto__=C}||function(p,C){for(var d in C)Object.prototype.hasOwnProperty.call(C,d)&&(p[d]=C[d])},y(w,c)},function(w,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function p(){this.constructor=w}y(w,c),w.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)});Object.defineProperty(h,"__esModule",{value:!0}),h.BufferSet=void 0;var _=L(9092),v=L(8460),T=function(w){function c(p,C){var d=w.call(this)||this;return d._optionsService=p,d._bufferService=C,d._onBufferActivate=d.register(new v.EventEmitter),d.reset(),d}return m(c,w),Object.defineProperty(c.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),c.prototype.reset=function(){this._normal=new _.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(c.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),c.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},c.prototype.activateAltBuffer=function(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},c.prototype.resize=function(p,C){this._normal.resize(p,C),this._alt.resize(p,C)},c.prototype.setupTabStops=function(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)},c}(L(844).Disposable);h.BufferSet=T},511:function(D,h,L){var y,m=this&&this.__extends||(y=function(c,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,d){C.__proto__=d}||function(C,d){for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&(C[s]=d[s])},y(c,p)},function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function C(){this.constructor=c}y(c,p),c.prototype=p===null?Object.create(p):(C.prototype=p.prototype,new C)});Object.defineProperty(h,"__esModule",{value:!0}),h.CellData=void 0;var _=L(482),v=L(643),T=L(3734),w=function(c){function p(){var C=c!==null&&c.apply(this,arguments)||this;return C.content=0,C.fg=0,C.bg=0,C.extended=new T.ExtendedAttrs,C.combinedData="",C}return m(p,c),p.fromCharData=function(C){var d=new p;return d.setFromCharData(C),d},p.prototype.isCombined=function(){return 2097152&this.content},p.prototype.getWidth=function(){return this.content>>22},p.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,_.stringFromCodePoint)(2097151&this.content):""},p.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},p.prototype.setFromCharData=function(C){this.fg=C[v.CHAR_DATA_ATTR_INDEX],this.bg=0;var d=!1;if(C[v.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(C[v.CHAR_DATA_CHAR_INDEX].length===2){var s=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){var n=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(s-55296)+n-56320+65536|C[v.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[v.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=C[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[v.CHAR_DATA_WIDTH_INDEX]<<22)},p.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},p}(T.AttributeData);h.CellData=w},643:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WHITESPACE_CELL_CODE=h.WHITESPACE_CELL_WIDTH=h.WHITESPACE_CELL_CHAR=h.NULL_CELL_CODE=h.NULL_CELL_WIDTH=h.NULL_CELL_CHAR=h.CHAR_DATA_CODE_INDEX=h.CHAR_DATA_WIDTH_INDEX=h.CHAR_DATA_CHAR_INDEX=h.CHAR_DATA_ATTR_INDEX=h.DEFAULT_ATTR=h.DEFAULT_COLOR=void 0,h.DEFAULT_COLOR=256,h.DEFAULT_ATTR=256|h.DEFAULT_COLOR<<9,h.CHAR_DATA_ATTR_INDEX=0,h.CHAR_DATA_CHAR_INDEX=1,h.CHAR_DATA_WIDTH_INDEX=2,h.CHAR_DATA_CODE_INDEX=3,h.NULL_CELL_CHAR="",h.NULL_CELL_WIDTH=1,h.NULL_CELL_CODE=0,h.WHITESPACE_CELL_CHAR=" ",h.WHITESPACE_CELL_WIDTH=1,h.WHITESPACE_CELL_CODE=32},4863:function(D,h,L){var y,m=this&&this.__extends||(y=function(T,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(c[C]=p[C])},y(T,w)},function(T,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function c(){this.constructor=T}y(T,w),T.prototype=w===null?Object.create(w):(c.prototype=w.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.Marker=void 0;var _=L(8460),v=function(T){function w(c){var p=T.call(this)||this;return p.line=c,p._id=w._nextId++,p.isDisposed=!1,p._onDispose=new _.EventEmitter,p}return m(w,T),Object.defineProperty(w.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),T.prototype.dispose.call(this))},w._nextId=1,w}(L(844).Disposable);h.Marker=v},7116:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DEFAULT_CHARSET=h.CHARSETS=void 0,h.CHARSETS={},h.DEFAULT_CHARSET=h.CHARSETS.B,h.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},h.CHARSETS.A={"#":"\xA3"},h.CHARSETS.B=void 0,h.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},h.CHARSETS.C=h.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},h.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},h.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},h.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},h.CHARSETS.E=h.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},h.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},h.CHARSETS.H=h.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(D,h)=>{var L,y;Object.defineProperty(h,"__esModule",{value:!0}),h.C1=h.C0=void 0,(y=h.C0||(h.C0={})).NUL="\0",y.SOH="",y.STX="",y.ETX="",y.EOT="",y.ENQ="",y.ACK="",y.BEL="\x07",y.BS="\b",y.HT="	",y.LF=`
`,y.VT="\v",y.FF="\f",y.CR="\r",y.SO="",y.SI="",y.DLE="",y.DC1="",y.DC2="",y.DC3="",y.DC4="",y.NAK="",y.SYN="",y.ETB="",y.CAN="",y.EM="",y.SUB="",y.ESC="\x1B",y.FS="",y.GS="",y.RS="",y.US="",y.SP=" ",y.DEL="\x7F",(L=h.C1||(h.C1={})).PAD="\x80",L.HOP="\x81",L.BPH="\x82",L.NBH="\x83",L.IND="\x84",L.NEL="\x85",L.SSA="\x86",L.ESA="\x87",L.HTS="\x88",L.HTJ="\x89",L.VTS="\x8A",L.PLD="\x8B",L.PLU="\x8C",L.RI="\x8D",L.SS2="\x8E",L.SS3="\x8F",L.DCS="\x90",L.PU1="\x91",L.PU2="\x92",L.STS="\x93",L.CCH="\x94",L.MW="\x95",L.SPA="\x96",L.EPA="\x97",L.SOS="\x98",L.SGCI="\x99",L.SCI="\x9A",L.CSI="\x9B",L.ST="\x9C",L.OSC="\x9D",L.PM="\x9E",L.APC="\x9F"},7399:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.evaluateKeyboardEvent=void 0;var y=L(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};h.evaluateKeyboardEvent=function(_,v,T,w){var c={type:0,cancel:!1,key:void 0},p=(_.shiftKey?1:0)|(_.altKey?2:0)|(_.ctrlKey?4:0)|(_.metaKey?8:0);switch(_.keyCode){case 0:_.key==="UIKeyInputUpArrow"?c.key=v?y.C0.ESC+"OA":y.C0.ESC+"[A":_.key==="UIKeyInputLeftArrow"?c.key=v?y.C0.ESC+"OD":y.C0.ESC+"[D":_.key==="UIKeyInputRightArrow"?c.key=v?y.C0.ESC+"OC":y.C0.ESC+"[C":_.key==="UIKeyInputDownArrow"&&(c.key=v?y.C0.ESC+"OB":y.C0.ESC+"[B");break;case 8:if(_.shiftKey){c.key=y.C0.BS;break}if(_.altKey){c.key=y.C0.ESC+y.C0.DEL;break}c.key=y.C0.DEL;break;case 9:if(_.shiftKey){c.key=y.C0.ESC+"[Z";break}c.key=y.C0.HT,c.cancel=!0;break;case 13:c.key=_.altKey?y.C0.ESC+y.C0.CR:y.C0.CR,c.cancel=!0;break;case 27:c.key=y.C0.ESC,_.altKey&&(c.key=y.C0.ESC+y.C0.ESC),c.cancel=!0;break;case 37:if(_.metaKey)break;p?(c.key=y.C0.ESC+"[1;"+(p+1)+"D",c.key===y.C0.ESC+"[1;3D"&&(c.key=y.C0.ESC+(T?"b":"[1;5D"))):c.key=v?y.C0.ESC+"OD":y.C0.ESC+"[D";break;case 39:if(_.metaKey)break;p?(c.key=y.C0.ESC+"[1;"+(p+1)+"C",c.key===y.C0.ESC+"[1;3C"&&(c.key=y.C0.ESC+(T?"f":"[1;5C"))):c.key=v?y.C0.ESC+"OC":y.C0.ESC+"[C";break;case 38:if(_.metaKey)break;p?(c.key=y.C0.ESC+"[1;"+(p+1)+"A",T||c.key!==y.C0.ESC+"[1;3A"||(c.key=y.C0.ESC+"[1;5A")):c.key=v?y.C0.ESC+"OA":y.C0.ESC+"[A";break;case 40:if(_.metaKey)break;p?(c.key=y.C0.ESC+"[1;"+(p+1)+"B",T||c.key!==y.C0.ESC+"[1;3B"||(c.key=y.C0.ESC+"[1;5B")):c.key=v?y.C0.ESC+"OB":y.C0.ESC+"[B";break;case 45:_.shiftKey||_.ctrlKey||(c.key=y.C0.ESC+"[2~");break;case 46:c.key=p?y.C0.ESC+"[3;"+(p+1)+"~":y.C0.ESC+"[3~";break;case 36:c.key=p?y.C0.ESC+"[1;"+(p+1)+"H":v?y.C0.ESC+"OH":y.C0.ESC+"[H";break;case 35:c.key=p?y.C0.ESC+"[1;"+(p+1)+"F":v?y.C0.ESC+"OF":y.C0.ESC+"[F";break;case 33:_.shiftKey?c.type=2:c.key=y.C0.ESC+"[5~";break;case 34:_.shiftKey?c.type=3:c.key=y.C0.ESC+"[6~";break;case 112:c.key=p?y.C0.ESC+"[1;"+(p+1)+"P":y.C0.ESC+"OP";break;case 113:c.key=p?y.C0.ESC+"[1;"+(p+1)+"Q":y.C0.ESC+"OQ";break;case 114:c.key=p?y.C0.ESC+"[1;"+(p+1)+"R":y.C0.ESC+"OR";break;case 115:c.key=p?y.C0.ESC+"[1;"+(p+1)+"S":y.C0.ESC+"OS";break;case 116:c.key=p?y.C0.ESC+"[15;"+(p+1)+"~":y.C0.ESC+"[15~";break;case 117:c.key=p?y.C0.ESC+"[17;"+(p+1)+"~":y.C0.ESC+"[17~";break;case 118:c.key=p?y.C0.ESC+"[18;"+(p+1)+"~":y.C0.ESC+"[18~";break;case 119:c.key=p?y.C0.ESC+"[19;"+(p+1)+"~":y.C0.ESC+"[19~";break;case 120:c.key=p?y.C0.ESC+"[20;"+(p+1)+"~":y.C0.ESC+"[20~";break;case 121:c.key=p?y.C0.ESC+"[21;"+(p+1)+"~":y.C0.ESC+"[21~";break;case 122:c.key=p?y.C0.ESC+"[23;"+(p+1)+"~":y.C0.ESC+"[23~";break;case 123:c.key=p?y.C0.ESC+"[24;"+(p+1)+"~":y.C0.ESC+"[24~";break;default:if(!_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)if(T&&!w||!_.altKey||_.metaKey)!T||_.altKey||_.ctrlKey||_.shiftKey||!_.metaKey?_.key&&!_.ctrlKey&&!_.altKey&&!_.metaKey&&_.keyCode>=48&&_.key.length===1?c.key=_.key:_.key&&_.ctrlKey&&_.key==="_"&&(c.key=y.C0.US):_.keyCode===65&&(c.type=1);else{var C=m[_.keyCode],d=C?.[_.shiftKey?1:0];if(d)c.key=y.C0.ESC+d;else if(_.keyCode>=65&&_.keyCode<=90){var s=_.ctrlKey?_.keyCode-64:_.keyCode+32;c.key=y.C0.ESC+String.fromCharCode(s)}}else _.keyCode>=65&&_.keyCode<=90?c.key=String.fromCharCode(_.keyCode-64):_.keyCode===32?c.key=y.C0.NUL:_.keyCode>=51&&_.keyCode<=55?c.key=String.fromCharCode(_.keyCode-51+27):_.keyCode===56?c.key=y.C0.DEL:_.keyCode===219?c.key=y.C0.ESC:_.keyCode===220?c.key=y.C0.FS:_.keyCode===221&&(c.key=y.C0.GS)}return c}},482:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Utf8ToUtf32=h.StringToUtf32=h.utf32ToString=h.stringFromCodePoint=void 0,h.stringFromCodePoint=function(m){return m>65535?(m-=65536,String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):String.fromCharCode(m)},h.utf32ToString=function(m,_,v){_===void 0&&(_=0),v===void 0&&(v=m.length);for(var T="",w=_;w<v;++w){var c=m[w];c>65535?(c-=65536,T+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):T+=String.fromCharCode(c)}return T};var L=function(){function m(){this._interim=0}return m.prototype.clear=function(){this._interim=0},m.prototype.decode=function(_,v){var T=_.length;if(!T)return 0;var w=0,c=0;this._interim&&(56320<=(d=_.charCodeAt(c++))&&d<=57343?v[w++]=1024*(this._interim-55296)+d-56320+65536:(v[w++]=this._interim,v[w++]=d),this._interim=0);for(var p=c;p<T;++p){var C=_.charCodeAt(p);if(55296<=C&&C<=56319){if(++p>=T)return this._interim=C,w;var d;56320<=(d=_.charCodeAt(p))&&d<=57343?v[w++]=1024*(C-55296)+d-56320+65536:(v[w++]=C,v[w++]=d)}else C!==65279&&(v[w++]=C)}return w},m}();h.StringToUtf32=L;var y=function(){function m(){this.interim=new Uint8Array(3)}return m.prototype.clear=function(){this.interim.fill(0)},m.prototype.decode=function(_,v){var T=_.length;if(!T)return 0;var w,c,p,C,d=0,s=0,n=0;if(this.interim[0]){var l=!1,a=this.interim[0];a&=(224&a)==192?31:(240&a)==224?15:7;for(var u=0,g=void 0;(g=63&this.interim[++u])&&u<4;)a<<=6,a|=g;for(var b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=b-u;n<k;){if(n>=T)return 0;if((192&(g=_[n++]))!=128){n--,l=!0;break}this.interim[u++]=g,a<<=6,a|=63&g}l||(b===2?a<128?n--:v[d++]=a:b===3?a<2048||a>=55296&&a<=57343||a===65279||(v[d++]=a):a<65536||a>1114111||(v[d++]=a)),this.interim.fill(0)}for(var O=T-4,E=n;E<T;){for(;!(!(E<O)||128&(w=_[E])||128&(c=_[E+1])||128&(p=_[E+2])||128&(C=_[E+3]));)v[d++]=w,v[d++]=c,v[d++]=p,v[d++]=C,E+=4;if((w=_[E++])<128)v[d++]=w;else if((224&w)==192){if(E>=T)return this.interim[0]=w,d;if((192&(c=_[E++]))!=128){E--;continue}if((s=(31&w)<<6|63&c)<128){E--;continue}v[d++]=s}else if((240&w)==224){if(E>=T)return this.interim[0]=w,d;if((192&(c=_[E++]))!=128){E--;continue}if(E>=T)return this.interim[0]=w,this.interim[1]=c,d;if((192&(p=_[E++]))!=128){E--;continue}if((s=(15&w)<<12|(63&c)<<6|63&p)<2048||s>=55296&&s<=57343||s===65279)continue;v[d++]=s}else if((248&w)==240){if(E>=T)return this.interim[0]=w,d;if((192&(c=_[E++]))!=128){E--;continue}if(E>=T)return this.interim[0]=w,this.interim[1]=c,d;if((192&(p=_[E++]))!=128){E--;continue}if(E>=T)return this.interim[0]=w,this.interim[1]=c,this.interim[2]=p,d;if((192&(C=_[E++]))!=128){E--;continue}if((s=(7&w)<<18|(63&c)<<12|(63&p)<<6|63&C)<65536||s>1114111)continue;v[d++]=s}}return d},m}();h.Utf8ToUtf32=y},225:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeV6=void 0;var y,m=L(8273),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],v=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],T=function(){function w(){if(this.version="6",!y){y=new Uint8Array(65536),(0,m.fill)(y,1),y[0]=0,(0,m.fill)(y,0,1,32),(0,m.fill)(y,0,127,160),(0,m.fill)(y,2,4352,4448),y[9001]=2,y[9002]=2,(0,m.fill)(y,2,11904,42192),y[12351]=1,(0,m.fill)(y,2,44032,55204),(0,m.fill)(y,2,63744,64256),(0,m.fill)(y,2,65040,65050),(0,m.fill)(y,2,65072,65136),(0,m.fill)(y,2,65280,65377),(0,m.fill)(y,2,65504,65511);for(var c=0;c<_.length;++c)(0,m.fill)(y,0,_[c][0],_[c][1]+1)}}return w.prototype.wcwidth=function(c){return c<32?0:c<127?1:c<65536?y[c]:function(p,C){var d,s=0,n=C.length-1;if(p<C[0][0]||p>C[n][1])return!1;for(;n>=s;)if(p>C[d=s+n>>1][1])s=d+1;else{if(!(p<C[d][0]))return!0;n=d-1}return!1}(c,v)?0:c>=131072&&c<=196605||c>=196608&&c<=262141?2:1},w}();h.UnicodeV6=T},5981:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.WriteBuffer=void 0;var L=typeof queueMicrotask>"u"?function(m){Promise.resolve().then(m)}:queueMicrotask,y=function(){function m(_){this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return m.prototype.writeSync=function(_,v){if(v!==void 0&&this._syncCalls>v)this._syncCalls=0;else if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var T;for(this._isSyncWriting=!0;T=this._writeBuffer.shift();){this._action(T);var w=this._callbacks.shift();w&&w()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},m.prototype.write=function(_,v){var T=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return T._innerWrite()})),this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(v)},m.prototype._innerWrite=function(_,v){var T=this;_===void 0&&(_=0),v===void 0&&(v=!0);for(var w=_||Date.now();this._writeBuffer.length>this._bufferOffset;){var c=this._writeBuffer[this._bufferOffset],p=this._action(c,v);if(p)return void p.catch(function(d){return L(function(){throw d}),Promise.resolve(!1)}).then(function(d){return Date.now()-w>=12?setTimeout(function(){return T._innerWrite(0,d)}):T._innerWrite(w,d)});var C=this._callbacks[this._bufferOffset];if(C&&C(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return T._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},m}();h.WriteBuffer=y},5941:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.toRgbString=h.parseColor=void 0;var L=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,y=/^[\da-f]+$/;function m(_,v){var T=_.toString(16),w=T.length<2?"0"+T:T;switch(v){case 4:return T[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}h.parseColor=function(_){if(_){var v=_.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);var T=L.exec(v);if(T){var w=T[1]?15:T[4]?255:T[7]?4095:65535;return[Math.round(parseInt(T[1]||T[4]||T[7]||T[10],16)/w*255),Math.round(parseInt(T[2]||T[5]||T[8]||T[11],16)/w*255),Math.round(parseInt(T[3]||T[6]||T[9]||T[12],16)/w*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),y.exec(v)&&[3,6,9,12].includes(v.length))){for(var c=v.length/3,p=[0,0,0],C=0;C<3;++C){var d=parseInt(v.slice(c*C,c*C+c),16);p[C]=c===1?d<<4:c===2?d:c===3?d>>4:d>>8}return p}}},h.toRgbString=function(_,v){v===void 0&&(v=16);var T=_[0],w=_[1],c=_[2];return"rgb:"+m(T,v)+"/"+m(w,v)+"/"+m(c,v)}},5770:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PAYLOAD_LIMIT=void 0,h.PAYLOAD_LIMIT=1e7},6351:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DcsHandler=h.DcsParser=void 0;var y=L(482),m=L(8742),_=L(5770),v=[],T=function(){function p(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return p.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=v},p.prototype.registerHandler=function(C,d){this._handlers[C]===void 0&&(this._handlers[C]=[]);var s=this._handlers[C];return s.push(d),{dispose:function(){var n=s.indexOf(d);n!==-1&&s.splice(n,1)}}},p.prototype.clearHandler=function(C){this._handlers[C]&&delete this._handlers[C]},p.prototype.setHandlerFallback=function(C){this._handlerFb=C},p.prototype.reset=function(){if(this._active.length)for(var C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0},p.prototype.hook=function(C,d){if(this.reset(),this._ident=C,this._active=this._handlers[C]||v,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].hook(d);else this._handlerFb(this._ident,"HOOK",d)},p.prototype.put=function(C,d,s){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(C,d,s);else this._handlerFb(this._ident,"PUT",(0,y.utf32ToString)(C,d,s))},p.prototype.unhook=function(C,d){if(d===void 0&&(d=!0),this._active.length){var s=!1,n=this._active.length-1,l=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,s=d,l=this._stack.fallThrough,this._stack.paused=!1),!l&&s===!1){for(;n>=0&&(s=this._active[n].unhook(C))!==!0;n--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,s;n--}for(;n>=0;n--)if((s=this._active[n].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",C);this._active=v,this._ident=0},p}();h.DcsParser=T;var w=new m.Params;w.addParam(0);var c=function(){function p(C){this._handler=C,this._data="",this._params=w,this._hitLimit=!1}return p.prototype.hook=function(C){this._params=C.length>1||C.params[0]?C.clone():w,this._data="",this._hitLimit=!1},p.prototype.put=function(C,d,s){this._hitLimit||(this._data+=(0,y.utf32ToString)(C,d,s),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},p.prototype.unhook=function(C){var d=this,s=!1;if(this._hitLimit)s=!1;else if(C&&(s=this._handler(this._data,this._params))instanceof Promise)return s.then(function(n){return d._params=w,d._data="",d._hitLimit=!1,n});return this._params=w,this._data="",this._hitLimit=!1,s},p}();h.DcsHandler=c},2015:function(D,h,L){var y,m=this&&this.__extends||(y=function(s,n){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])},y(s,n)},function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function l(){this.constructor=s}y(s,n),s.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.EscapeSequenceParser=h.VT500_TRANSITION_TABLE=h.TransitionTable=void 0;var _=L(844),v=L(8273),T=L(8742),w=L(6242),c=L(6351),p=function(){function s(n){this.table=new Uint8Array(n)}return s.prototype.setDefault=function(n,l){(0,v.fill)(this.table,n<<4|l)},s.prototype.add=function(n,l,a,u){this.table[l<<8|n]=a<<4|u},s.prototype.addMany=function(n,l,a,u){for(var g=0;g<n.length;g++)this.table[l<<8|n[g]]=a<<4|u},s}();h.TransitionTable=p;var C=160;h.VT500_TRANSITION_TABLE=function(){var s=new p(4095),n=Array.apply(null,Array(256)).map(function(k,O){return O}),l=function(k,O){return n.slice(k,O)},a=l(32,127),u=l(0,24);u.push(25),u.push.apply(u,l(28,32));var g,b=l(0,14);for(g in s.setDefault(1,0),s.addMany(a,0,2,0),b)s.addMany([24,26,153,154],g,3,0),s.addMany(l(128,144),g,3,0),s.addMany(l(144,152),g,3,0),s.add(156,g,0,0),s.add(27,g,11,1),s.add(157,g,4,8),s.addMany([152,158,159],g,0,7),s.add(155,g,11,3),s.add(144,g,11,9);return s.addMany(u,0,3,0),s.addMany(u,1,3,1),s.add(127,1,0,1),s.addMany(u,8,0,8),s.addMany(u,3,3,3),s.add(127,3,0,3),s.addMany(u,4,3,4),s.add(127,4,0,4),s.addMany(u,6,3,6),s.addMany(u,5,3,5),s.add(127,5,0,5),s.addMany(u,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(a,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(l(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(a,7,0,7),s.addMany(u,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(l(64,127),3,7,0),s.addMany(l(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(l(48,60),4,8,4),s.addMany(l(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(l(32,64),6,0,6),s.add(127,6,0,6),s.addMany(l(64,127),6,0,0),s.addMany(l(32,48),3,9,5),s.addMany(l(32,48),5,9,5),s.addMany(l(48,64),5,0,6),s.addMany(l(64,127),5,7,0),s.addMany(l(32,48),4,9,5),s.addMany(l(32,48),1,9,2),s.addMany(l(32,48),2,9,2),s.addMany(l(48,127),2,10,0),s.addMany(l(48,80),1,10,0),s.addMany(l(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(l(96,127),1,10,0),s.add(80,1,11,9),s.addMany(u,9,0,9),s.add(127,9,0,9),s.addMany(l(28,32),9,0,9),s.addMany(l(32,48),9,9,12),s.addMany(l(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(u,11,0,11),s.addMany(l(32,128),11,0,11),s.addMany(l(28,32),11,0,11),s.addMany(u,10,0,10),s.add(127,10,0,10),s.addMany(l(28,32),10,0,10),s.addMany(l(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(l(32,48),10,9,12),s.addMany(u,12,0,12),s.add(127,12,0,12),s.addMany(l(28,32),12,0,12),s.addMany(l(32,48),12,9,12),s.addMany(l(48,64),12,0,11),s.addMany(l(64,127),12,12,13),s.addMany(l(64,127),10,12,13),s.addMany(l(64,127),9,12,13),s.addMany(u,13,13,13),s.addMany(a,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(C,0,2,0),s.add(C,8,5,8),s.add(C,6,0,6),s.add(C,11,0,11),s.add(C,13,13,13),s}();var d=function(s){function n(l){l===void 0&&(l=h.VT500_TRANSITION_TABLE);var a=s.call(this)||this;return a._transitions=l,a._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},a.initialState=0,a.currentState=a.initialState,a._params=new T.Params,a._params.addParam(0),a._collect=0,a.precedingCodepoint=0,a._printHandlerFb=function(u,g,b){},a._executeHandlerFb=function(u){},a._csiHandlerFb=function(u,g){},a._escHandlerFb=function(u){},a._errorHandlerFb=function(u){return u},a._printHandler=a._printHandlerFb,a._executeHandlers=Object.create(null),a._csiHandlers=Object.create(null),a._escHandlers=Object.create(null),a._oscParser=new w.OscParser,a._dcsParser=new c.DcsParser,a._errorHandler=a._errorHandlerFb,a.registerEscHandler({final:"\\"},function(){return!0}),a}return m(n,s),n.prototype._identifier=function(l,a){a===void 0&&(a=[64,126]);var u=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if((u=l.prefix.charCodeAt(0))&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var g=0;g<l.intermediates.length;++g){var b=l.intermediates.charCodeAt(g);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=b}}if(l.final.length!==1)throw new Error("final must be a single byte");var k=l.final.charCodeAt(0);if(a[0]>k||k>a[1])throw new Error("final must be in range "+a[0]+" .. "+a[1]);return(u<<=8)|k},n.prototype.identToString=function(l){for(var a=[];l;)a.push(String.fromCharCode(255&l)),l>>=8;return a.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(l){this._printHandler=l},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.registerEscHandler=function(l,a){var u=this._identifier(l,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);var g=this._escHandlers[u];return g.push(a),{dispose:function(){var b=g.indexOf(a);b!==-1&&g.splice(b,1)}}},n.prototype.clearEscHandler=function(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]},n.prototype.setEscHandlerFallback=function(l){this._escHandlerFb=l},n.prototype.setExecuteHandler=function(l,a){this._executeHandlers[l.charCodeAt(0)]=a},n.prototype.clearExecuteHandler=function(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(l){this._executeHandlerFb=l},n.prototype.registerCsiHandler=function(l,a){var u=this._identifier(l);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);var g=this._csiHandlers[u];return g.push(a),{dispose:function(){var b=g.indexOf(a);b!==-1&&g.splice(b,1)}}},n.prototype.clearCsiHandler=function(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]},n.prototype.setCsiHandlerFallback=function(l){this._csiHandlerFb=l},n.prototype.registerDcsHandler=function(l,a){return this._dcsParser.registerHandler(this._identifier(l),a)},n.prototype.clearDcsHandler=function(l){this._dcsParser.clearHandler(this._identifier(l))},n.prototype.setDcsHandlerFallback=function(l){this._dcsParser.setHandlerFallback(l)},n.prototype.registerOscHandler=function(l,a){return this._oscParser.registerHandler(l,a)},n.prototype.clearOscHandler=function(l){this._oscParser.clearHandler(l)},n.prototype.setOscHandlerFallback=function(l){this._oscParser.setHandlerFallback(l)},n.prototype.setErrorHandler=function(l){this._errorHandler=l},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},n.prototype._preserveStack=function(l,a,u,g,b){this._parseStack.state=l,this._parseStack.handlers=a,this._parseStack.handlerPos=u,this._parseStack.transition=g,this._parseStack.chunkPos=b},n.prototype.parse=function(l,a,u){var g,b=0,k=0,O=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,O=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var E=this._parseStack.handlers,A=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&A>-1){for(;A>=0&&(g=E[A](this._params))!==!0;A--)if(g instanceof Promise)return this._parseStack.handlerPos=A,g}this._parseStack.handlers=[];break;case 4:if(u===!1&&A>-1){for(;A>=0&&(g=E[A]())!==!0;A--)if(g instanceof Promise)return this._parseStack.handlerPos=A,g}this._parseStack.handlers=[];break;case 6:if(b=l[this._parseStack.chunkPos],g=this._dcsParser.unhook(b!==24&&b!==26,u))return g;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=l[this._parseStack.chunkPos],g=this._oscParser.end(b!==24&&b!==26,u))return g;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,O=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var W=O;W<a;++W){switch(b=l[W],(k=this._transitions.table[this.currentState<<8|(b<160?b:C)])>>4){case 2:for(var R=W+1;;++R){if(R>=a||(b=l[R])<32||b>126&&b<C){this._printHandler(l,W,R),W=R-1;break}if(++R>=a||(b=l[R])<32||b>126&&b<C){this._printHandler(l,W,R),W=R-1;break}if(++R>=a||(b=l[R])<32||b>126&&b<C){this._printHandler(l,W,R),W=R-1;break}if(++R>=a||(b=l[R])<32||b>126&&b<C){this._printHandler(l,W,R),W=R-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:W,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var j=(E=this._csiHandlers[this._collect<<8|b])?E.length-1:-1;j>=0&&(g=E[j](this._params))!==!0;j--)if(g instanceof Promise)return this._preserveStack(3,E,j,k,W),g;j<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++W<a&&(b=l[W])>47&&b<60);W--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:for(var B=this._escHandlers[this._collect<<8|b],P=B?B.length-1:-1;P>=0&&(g=B[P]())!==!0;P--)if(g instanceof Promise)return this._preserveStack(4,B,P,k,W),g;P<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(var N=W+1;;++N)if(N>=a||(b=l[N])===24||b===26||b===27||b>127&&b<C){this._dcsParser.put(l,W,N),W=N-1;break}break;case 14:if(g=this._dcsParser.unhook(b!==24&&b!==26))return this._preserveStack(6,[],0,k,W),g;b===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var z=W+1;;z++)if(z>=a||(b=l[z])<32||b>127&&b<C){this._oscParser.put(l,W,z),W=z-1;break}break;case 6:if(g=this._oscParser.end(b!==24&&b!==26))return this._preserveStack(5,[],0,k,W),g;b===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&k}},n}(_.Disposable);h.EscapeSequenceParser=d},6242:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OscHandler=h.OscParser=void 0;var y=L(5770),m=L(482),_=[],v=function(){function w(){this._state=0,this._active=_,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return w.prototype.registerHandler=function(c,p){this._handlers[c]===void 0&&(this._handlers[c]=[]);var C=this._handlers[c];return C.push(p),{dispose:function(){var d=C.indexOf(p);d!==-1&&C.splice(d,1)}}},w.prototype.clearHandler=function(c){this._handlers[c]&&delete this._handlers[c]},w.prototype.setHandlerFallback=function(c){this._handlerFb=c},w.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},w.prototype.reset=function(){if(this._state===2)for(var c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=_,this._id=-1,this._state=0},w.prototype._start=function(){if(this._active=this._handlers[this._id]||_,this._active.length)for(var c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")},w.prototype._put=function(c,p,C){if(this._active.length)for(var d=this._active.length-1;d>=0;d--)this._active[d].put(c,p,C);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(c,p,C))},w.prototype.start=function(){this.reset(),this._state=1},w.prototype.put=function(c,p,C){if(this._state!==3){if(this._state===1)for(;p<C;){var d=c[p++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&C-p>0&&this._put(c,p,C)}},w.prototype.end=function(c,p){if(p===void 0&&(p=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var C=!1,d=this._active.length-1,s=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,C=p,s=this._stack.fallThrough,this._stack.paused=!1),!s&&C===!1){for(;d>=0&&(C=this._active[d].end(c))!==!0;d--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,C;d--}for(;d>=0;d--)if((C=this._active[d].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",c);this._active=_,this._id=-1,this._state=0}},w}();h.OscParser=v;var T=function(){function w(c){this._handler=c,this._data="",this._hitLimit=!1}return w.prototype.start=function(){this._data="",this._hitLimit=!1},w.prototype.put=function(c,p,C){this._hitLimit||(this._data+=(0,m.utf32ToString)(c,p,C),this._data.length>y.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},w.prototype.end=function(c){var p=this,C=!1;if(this._hitLimit)C=!1;else if(c&&(C=this._handler(this._data))instanceof Promise)return C.then(function(d){return p._data="",p._hitLimit=!1,d});return this._data="",this._hitLimit=!1,C},w}();h.OscHandler=T},8742:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Params=void 0;var L=2147483647,y=function(){function m(_,v){if(_===void 0&&(_=32),v===void 0&&(v=32),this.maxLength=_,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(_),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(_),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return m.fromArray=function(_){var v=new m;if(!_.length)return v;for(var T=Array.isArray(_[0])?1:0;T<_.length;++T){var w=_[T];if(Array.isArray(w))for(var c=0;c<w.length;++c)v.addSubParam(w[c]);else v.addParam(w)}return v},m.prototype.clone=function(){var _=new m(this.maxLength,this.maxSubParamsLength);return _.params.set(this.params),_.length=this.length,_._subParams.set(this._subParams),_._subParamsLength=this._subParamsLength,_._subParamsIdx.set(this._subParamsIdx),_._rejectDigits=this._rejectDigits,_._rejectSubDigits=this._rejectSubDigits,_._digitIsSub=this._digitIsSub,_},m.prototype.toArray=function(){for(var _=[],v=0;v<this.length;++v){_.push(this.params[v]);var T=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-T>0&&_.push(Array.prototype.slice.call(this._subParams,T,w))}return _},m.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},m.prototype.addParam=function(_){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=_>L?L:_}},m.prototype.addSubParam=function(_){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=_>L?L:_,this._subParamsIdx[this.length-1]++}},m.prototype.hasSubParams=function(_){return(255&this._subParamsIdx[_])-(this._subParamsIdx[_]>>8)>0},m.prototype.getSubParams=function(_){var v=this._subParamsIdx[_]>>8,T=255&this._subParamsIdx[_];return T-v>0?this._subParams.subarray(v,T):null},m.prototype.getSubParamsAll=function(){for(var _={},v=0;v<this.length;++v){var T=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-T>0&&(_[v]=this._subParams.slice(T,w))}return _},m.prototype.addDigit=function(_){var v;if(!(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var T=this._digitIsSub?this._subParams:this.params,w=T[v-1];T[v-1]=~w?Math.min(10*w+_,L):_}},m}();h.Params=y},5741:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AddonManager=void 0;var L=function(){function y(){this._addons=[]}return y.prototype.dispose=function(){for(var m=this._addons.length-1;m>=0;m--)this._addons[m].instance.dispose()},y.prototype.loadAddon=function(m,_){var v=this,T={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(T),_.dispose=function(){return v._wrappedAddonDispose(T)},_.activate(m)},y.prototype._wrappedAddonDispose=function(m){if(!m.isDisposed){for(var _=-1,v=0;v<this._addons.length;v++)if(this._addons[v]===m){_=v;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");m.isDisposed=!0,m.dispose.apply(m.instance),this._addons.splice(_,1)}},y}();h.AddonManager=L},8771:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferApiView=void 0;var y=L(3785),m=L(511),_=function(){function v(T,w){this._buffer=T,this.type=w}return v.prototype.init=function(T){return this._buffer=T,this},Object.defineProperty(v.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),v.prototype.getLine=function(T){var w=this._buffer.lines.get(T);if(w)return new y.BufferLineApiView(w)},v.prototype.getNullCell=function(){return new m.CellData},v}();h.BufferApiView=_},3785:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferLineApiView=void 0;var y=L(511),m=function(){function _(v){this._line=v}return Object.defineProperty(_.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),_.prototype.getCell=function(v,T){if(!(v<0||v>=this._line.length))return T?(this._line.loadCell(v,T),T):this._line.loadCell(v,new y.CellData)},_.prototype.translateToString=function(v,T,w){return this._line.translateToString(v,T,w)},_}();h.BufferLineApiView=m},8285:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BufferNamespaceApi=void 0;var y=L(8771),m=L(8460),_=function(){function v(T){var w=this;this._core=T,this._onBufferChange=new m.EventEmitter,this._normal=new y.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new y.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return w._onBufferChange.fire(w.active)})}return Object.defineProperty(v.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),v}();h.BufferNamespaceApi=_},7975:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ParserApi=void 0;var L=function(){function y(m){this._core=m}return y.prototype.registerCsiHandler=function(m,_){return this._core.registerCsiHandler(m,function(v){return _(v.toArray())})},y.prototype.addCsiHandler=function(m,_){return this.registerCsiHandler(m,_)},y.prototype.registerDcsHandler=function(m,_){return this._core.registerDcsHandler(m,function(v,T){return _(v,T.toArray())})},y.prototype.addDcsHandler=function(m,_){return this.registerDcsHandler(m,_)},y.prototype.registerEscHandler=function(m,_){return this._core.registerEscHandler(m,_)},y.prototype.addEscHandler=function(m,_){return this.registerEscHandler(m,_)},y.prototype.registerOscHandler=function(m,_){return this._core.registerOscHandler(m,_)},y.prototype.addOscHandler=function(m,_){return this.registerOscHandler(m,_)},y}();h.ParserApi=L},7090:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeApi=void 0;var L=function(){function y(m){this._core=m}return y.prototype.register=function(m){this._core.unicodeService.register(m)},Object.defineProperty(y.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(m){this._core.unicodeService.activeVersion=m},enumerable:!1,configurable:!0}),y}();h.UnicodeApi=L},744:function(D,h,L){var y,m=this&&this.__extends||(y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n[a]=l[a])},y(d,s)},function(d,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function n(){this.constructor=d}y(d,s),d.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}),_=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},v=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.BufferService=h.MINIMUM_ROWS=h.MINIMUM_COLS=void 0;var T=L(2585),w=L(5295),c=L(8460),p=L(844);h.MINIMUM_COLS=2,h.MINIMUM_ROWS=1;var C=function(d){function s(n){var l=d.call(this)||this;return l._optionsService=n,l.isUserScrolling=!1,l._onResize=new c.EventEmitter,l._onScroll=new c.EventEmitter,l.cols=Math.max(n.rawOptions.cols||0,h.MINIMUM_COLS),l.rows=Math.max(n.rawOptions.rows||0,h.MINIMUM_ROWS),l.buffers=new w.BufferSet(n,l),l}return m(s,d),Object.defineProperty(s.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),s.prototype.dispose=function(){d.prototype.dispose.call(this),this.buffers.dispose()},s.prototype.resize=function(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:n,rows:l})},s.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},s.prototype.scroll=function(n,l){l===void 0&&(l=!1);var a,u=this.buffer;(a=this._cachedBlankLine)&&a.length===this.cols&&a.getFg(0)===n.fg&&a.getBg(0)===n.bg||(a=u.getBlankLine(n,l),this._cachedBlankLine=a),a.isWrapped=l;var g=u.ybase+u.scrollTop,b=u.ybase+u.scrollBottom;if(u.scrollTop===0){var k=u.lines.isFull;b===u.lines.length-1?k?u.lines.recycle().copyFrom(a):u.lines.push(a.clone()):u.lines.splice(b+1,0,a.clone()),k?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{var O=b-g+1;u.lines.shiftElements(g+1,O-1,-1),u.lines.set(b,a.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)},s.prototype.scrollLines=function(n,l,a){var u=this.buffer;if(n<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else n+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);var g=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+n,u.ybase),0),g!==u.ydisp&&(l||this._onScroll.fire(u.ydisp))},s.prototype.scrollPages=function(n){this.scrollLines(n*(this.rows-1))},s.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},s.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},s.prototype.scrollToLine=function(n){var l=n-this.buffer.ydisp;l!==0&&this.scrollLines(l)},_([v(0,T.IOptionsService)],s)}(p.Disposable);h.BufferService=C},7994:(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CharsetService=void 0;var L=function(){function y(){this.glevel=0,this._charsets=[]}return y.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},y.prototype.setgLevel=function(m){this.glevel=m,this.charset=this._charsets[m]},y.prototype.setgCharset=function(m,_){this._charsets[m]=_,this.glevel===m&&(this.charset=_)},y}();h.CharsetService=L},1753:function(D,h,L){var y=this&&this.__decorate||function(d,s,n,l){var a,u=arguments.length,g=u<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,s,n,l);else for(var b=d.length-1;b>=0;b--)(a=d[b])&&(g=(u<3?a(g):u>3?a(s,n,g):a(s,n))||g);return u>3&&g&&Object.defineProperty(s,n,g),g},m=this&&this.__param||function(d,s){return function(n,l){s(n,l,d)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreMouseService=void 0;var _=L(2585),v=L(8460),T={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(d){return d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)}},VT200:{events:19,restrict:function(d){return d.action!==32}},DRAG:{events:23,restrict:function(d){return d.action!==32||d.button!==3}},ANY:{events:31,restrict:function(d){return!0}}};function w(d,s){var n=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(n|=64,n|=d.action):(n|=3&d.button,4&d.button&&(n|=64),8&d.button&&(n|=128),d.action===32?n|=32:d.action!==0||s||(n|=3)),n}var c=String.fromCharCode,p={DEFAULT:function(d){var s=[w(d,!1)+32,d.col+32,d.row+32];return s[0]>255||s[1]>255||s[2]>255?"":"\x1B[M"+c(s[0])+c(s[1])+c(s[2])},SGR:function(d){var s=d.action===0&&d.button!==4?"m":"M";return"\x1B[<"+w(d,!0)+";"+d.col+";"+d.row+s}},C=function(){function d(s,n){this._bufferService=s,this._coreService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new v.EventEmitter,this._lastEvent=null;for(var l=0,a=Object.keys(T);l<a.length;l++){var u=a[l];this.addProtocol(u,T[u])}for(var g=0,b=Object.keys(p);g<b.length;g++){var k=b[g];this.addEncoding(k,p[k])}this.reset()}return d.prototype.addProtocol=function(s,n){this._protocols[s]=n},d.prototype.addEncoding=function(s,n){this._encodings[s]=n},Object.defineProperty(d.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(s){if(!this._protocols[s])throw new Error('unknown protocol "'+s+'"');this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(s){if(!this._encodings[s])throw new Error('unknown encoding "'+s+'"');this._activeEncoding=s},enumerable:!1,configurable:!0}),d.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(d.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),d.prototype.triggerMouseEvent=function(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,s))||!this._protocols[this._activeProtocol].restrict(s))return!1;var n=this._encodings[this._activeEncoding](s);return n&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(n):this._coreService.triggerDataEvent(n,!0)),this._lastEvent=s,!0},d.prototype.explainEvents=function(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}},d.prototype._compareEvents=function(s,n){return s.col===n.col&&s.row===n.row&&s.button===n.button&&s.action===n.action&&s.ctrl===n.ctrl&&s.alt===n.alt&&s.shift===n.shift},y([m(0,_.IBufferService),m(1,_.ICoreService)],d)}();h.CoreMouseService=C},6975:function(D,h,L){var y,m=this&&this.__extends||(y=function(n,l){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(a[g]=u[g])},y(n,l)},function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function a(){this.constructor=n}y(n,l),n.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}),_=this&&this.__decorate||function(n,l,a,u){var g,b=arguments.length,k=b<3?l:u===null?u=Object.getOwnPropertyDescriptor(l,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(n,l,a,u);else for(var O=n.length-1;O>=0;O--)(g=n[O])&&(k=(b<3?g(k):b>3?g(l,a,k):g(l,a))||k);return b>3&&k&&Object.defineProperty(l,a,k),k},v=this&&this.__param||function(n,l){return function(a,u){l(a,u,n)}};Object.defineProperty(h,"__esModule",{value:!0}),h.CoreService=void 0;var T=L(2585),w=L(8460),c=L(1439),p=L(844),C=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),s=function(n){function l(a,u,g,b){var k=n.call(this)||this;return k._bufferService=u,k._logService=g,k._optionsService=b,k.isCursorInitialized=!1,k.isCursorHidden=!1,k._onData=k.register(new w.EventEmitter),k._onUserInput=k.register(new w.EventEmitter),k._onBinary=k.register(new w.EventEmitter),k._scrollToBottom=a,k.register({dispose:function(){return k._scrollToBottom=void 0}}),k.modes=(0,c.clone)(C),k.decPrivateModes=(0,c.clone)(d),k}return m(l,n),Object.defineProperty(l.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.modes=(0,c.clone)(C),this.decPrivateModes=(0,c.clone)(d)},l.prototype.triggerDataEvent=function(a,u){if(u===void 0&&(u=!1),!this._optionsService.rawOptions.disableStdin){var g=this._bufferService.buffer;g.ybase!==g.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+a+'"',function(){return a.split("").map(function(b){return b.charCodeAt(0)})}),this._onData.fire(a)}},l.prototype.triggerBinaryEvent=function(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+a+'"',function(){return a.split("").map(function(u){return u.charCodeAt(0)})}),this._onBinary.fire(a))},_([v(1,T.IBufferService),v(2,T.ILogService),v(3,T.IOptionsService)],l)}(p.Disposable);h.CoreService=s},3730:function(D,h,L){var y=this&&this.__decorate||function(T,w,c,p){var C,d=arguments.length,s=d<3?w:p===null?p=Object.getOwnPropertyDescriptor(w,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(T,w,c,p);else for(var n=T.length-1;n>=0;n--)(C=T[n])&&(s=(d<3?C(s):d>3?C(w,c,s):C(w,c))||s);return d>3&&s&&Object.defineProperty(w,c,s),s},m=this&&this.__param||function(T,w){return function(c,p){w(c,p,T)}};Object.defineProperty(h,"__esModule",{value:!0}),h.DirtyRowService=void 0;var _=L(2585),v=function(){function T(w){this._bufferService=w,this.clearRange()}return Object.defineProperty(T.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),T.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},T.prototype.markDirty=function(w){w<this._start?this._start=w:w>this._end&&(this._end=w)},T.prototype.markRangeDirty=function(w,c){if(w>c){var p=w;w=c,c=p}w<this._start&&(this._start=w),c>this._end&&(this._end=c)},T.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},y([m(0,_.IBufferService)],T)}();h.DirtyRowService=v},4348:function(D,h,L){var y=this&&this.__spreadArray||function(w,c,p){if(p||arguments.length===2)for(var C,d=0,s=c.length;d<s;d++)!C&&d in c||(C||(C=Array.prototype.slice.call(c,0,d)),C[d]=c[d]);return w.concat(C||Array.prototype.slice.call(c))};Object.defineProperty(h,"__esModule",{value:!0}),h.InstantiationService=h.ServiceCollection=void 0;var m=L(2585),_=L(8343),v=function(){function w(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];this._entries=new Map;for(var C=0,d=c;C<d.length;C++){var s=d[C],n=s[0],l=s[1];this.set(n,l)}}return w.prototype.set=function(c,p){var C=this._entries.get(c);return this._entries.set(c,p),C},w.prototype.forEach=function(c){this._entries.forEach(function(p,C){return c(C,p)})},w.prototype.has=function(c){return this._entries.has(c)},w.prototype.get=function(c){return this._entries.get(c)},w}();h.ServiceCollection=v;var T=function(){function w(){this._services=new v,this._services.set(m.IInstantiationService,this)}return w.prototype.setService=function(c,p){this._services.set(c,p)},w.prototype.getService=function(c){return this._services.get(c)},w.prototype.createInstance=function(c){for(var p=[],C=1;C<arguments.length;C++)p[C-1]=arguments[C];for(var d=(0,_.getServiceDependencies)(c).sort(function(b,k){return b.index-k.index}),s=[],n=0,l=d;n<l.length;n++){var a=l[n],u=this._services.get(a.id);if(!u)throw new Error("[createInstance] "+c.name+" depends on UNKNOWN service "+a.id+".");s.push(u)}var g=d.length>0?d[0].index:p.length;if(p.length!==g)throw new Error("[createInstance] First service dependency of "+c.name+" at position "+(g+1)+" conflicts with "+p.length+" static arguments");return new(c.bind.apply(c,y([void 0],y(y([],p,!0),s,!0),!1)))},w}();h.InstantiationService=T},7866:function(D,h,L){var y=this&&this.__decorate||function(c,p,C,d){var s,n=arguments.length,l=n<3?p:d===null?d=Object.getOwnPropertyDescriptor(p,C):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,p,C,d);else for(var a=c.length-1;a>=0;a--)(s=c[a])&&(l=(n<3?s(l):n>3?s(p,C,l):s(p,C))||l);return n>3&&l&&Object.defineProperty(p,C,l),l},m=this&&this.__param||function(c,p){return function(C,d){p(C,d,c)}},_=this&&this.__spreadArray||function(c,p,C){if(C||arguments.length===2)for(var d,s=0,n=p.length;s<n;s++)!d&&s in p||(d||(d=Array.prototype.slice.call(p,0,s)),d[s]=p[s]);return c.concat(d||Array.prototype.slice.call(p))};Object.defineProperty(h,"__esModule",{value:!0}),h.LogService=void 0;var v=L(2585),T={debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},w=function(){function c(p){var C=this;this._optionsService=p,this.logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(d){d==="logLevel"&&C._updateLogLevel()})}return c.prototype._updateLogLevel=function(){this.logLevel=T[this._optionsService.rawOptions.logLevel]},c.prototype._evalLazyOptionalParams=function(p){for(var C=0;C<p.length;C++)typeof p[C]=="function"&&(p[C]=p[C]())},c.prototype._log=function(p,C,d){this._evalLazyOptionalParams(d),p.call.apply(p,_([console,"xterm.js: "+C],d,!1))},c.prototype.debug=function(p){for(var C=[],d=1;d<arguments.length;d++)C[d-1]=arguments[d];this.logLevel<=v.LogLevelEnum.DEBUG&&this._log(console.log,p,C)},c.prototype.info=function(p){for(var C=[],d=1;d<arguments.length;d++)C[d-1]=arguments[d];this.logLevel<=v.LogLevelEnum.INFO&&this._log(console.info,p,C)},c.prototype.warn=function(p){for(var C=[],d=1;d<arguments.length;d++)C[d-1]=arguments[d];this.logLevel<=v.LogLevelEnum.WARN&&this._log(console.warn,p,C)},c.prototype.error=function(p){for(var C=[],d=1;d<arguments.length;d++)C[d-1]=arguments[d];this.logLevel<=v.LogLevelEnum.ERROR&&this._log(console.error,p,C)},y([m(0,v.IOptionsService)],c)}();h.LogService=w},7302:function(D,h,L){var y=this&&this.__assign||function(){return y=Object.assign||function(w){for(var c,p=1,C=arguments.length;p<C;p++)for(var d in c=arguments[p])Object.prototype.hasOwnProperty.call(c,d)&&(w[d]=c[d]);return w},y.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0}),h.OptionsService=h.DEFAULT_OPTIONS=h.DEFAULT_BELL_SOUND=void 0;var m=L(8460),_=L(6114);h.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",h.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:h.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:_.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var v=["normal","bold","100","200","300","400","500","600","700","800","900"],T=function(){function w(c){this._onOptionChange=new m.EventEmitter;var p=y({},h.DEFAULT_OPTIONS);for(var C in c)if(C in p)try{var d=c[C];p[C]=this._sanitizeAndValidateOption(C,d)}catch(s){console.error(s)}this.rawOptions=p,this.options=y({},p),this._setupOptions()}return Object.defineProperty(w.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),w.prototype._setupOptions=function(){var c=this,p=function(n){if(!(n in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');return c.rawOptions[n]},C=function(n,l){if(!(n in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');l=c._sanitizeAndValidateOption(n,l),c.rawOptions[n]!==l&&(c.rawOptions[n]=l,c._onOptionChange.fire(n))};for(var d in this.rawOptions){var s={get:p.bind(this,d),set:C.bind(this,d)};Object.defineProperty(this.options,d,s)}},w.prototype.setOption=function(c,p){this.options[c]=p},w.prototype._sanitizeAndValidateOption=function(c,p){switch(c){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":p||(p=h.DEFAULT_OPTIONS[c]);break;case"fontWeight":case"fontWeightBold":if(typeof p=="number"&&1<=p&&p<=1e3)break;p=v.includes(p)?p:h.DEFAULT_OPTIONS[c];break;case"cursorWidth":p=Math.floor(p);case"lineHeight":case"tabStopWidth":if(p<1)throw new Error(c+" cannot be less than 1, value: "+p);break;case"minimumContrastRatio":p=Math.max(1,Math.min(21,Math.round(10*p)/10));break;case"scrollback":if((p=Math.min(p,4294967295))<0)throw new Error(c+" cannot be less than 0, value: "+p);break;case"fastScrollSensitivity":case"scrollSensitivity":if(p<=0)throw new Error(c+" cannot be less than or equal to 0, value: "+p);case"rows":case"cols":if(!p&&p!==0)throw new Error(c+" must be numeric, value: "+p)}return p},w.prototype.getOption=function(c){return this.options[c]},w}();h.OptionsService=T},8343:(D,h)=>{function L(y,m,_){m.di$target===m?m.di$dependencies.push({id:y,index:_}):(m.di$dependencies=[{id:y,index:_}],m.di$target=m)}Object.defineProperty(h,"__esModule",{value:!0}),h.createDecorator=h.getServiceDependencies=h.serviceRegistry=void 0,h.serviceRegistry=new Map,h.getServiceDependencies=function(y){return y.di$dependencies||[]},h.createDecorator=function(y){if(h.serviceRegistry.has(y))return h.serviceRegistry.get(y);var m=function(_,v,T){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");L(m,_,T)};return m.toString=function(){return y},h.serviceRegistry.set(y,m),m}},2585:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IUnicodeService=h.IOptionsService=h.ILogService=h.LogLevelEnum=h.IInstantiationService=h.IDirtyRowService=h.ICharsetService=h.ICoreService=h.ICoreMouseService=h.IBufferService=void 0;var y,m=L(8343);h.IBufferService=(0,m.createDecorator)("BufferService"),h.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),h.ICoreService=(0,m.createDecorator)("CoreService"),h.ICharsetService=(0,m.createDecorator)("CharsetService"),h.IDirtyRowService=(0,m.createDecorator)("DirtyRowService"),h.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(y=h.LogLevelEnum||(h.LogLevelEnum={}))[y.DEBUG=0]="DEBUG",y[y.INFO=1]="INFO",y[y.WARN=2]="WARN",y[y.ERROR=3]="ERROR",y[y.OFF=4]="OFF",h.ILogService=(0,m.createDecorator)("LogService"),h.IOptionsService=(0,m.createDecorator)("OptionsService"),h.IUnicodeService=(0,m.createDecorator)("UnicodeService")},1480:(D,h,L)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UnicodeService=void 0;var y=L(8460),m=L(225),_=function(){function v(){this._providers=Object.create(null),this._active="",this._onChange=new y.EventEmitter;var T=new m.UnicodeV6;this.register(T),this._active=T.version,this._activeProvider=T}return Object.defineProperty(v.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"activeVersion",{get:function(){return this._active},set:function(T){if(!this._providers[T])throw new Error('unknown Unicode version "'+T+'"');this._active=T,this._activeProvider=this._providers[T],this._onChange.fire(T)},enumerable:!1,configurable:!0}),v.prototype.register=function(T){this._providers[T.version]=T},v.prototype.wcwidth=function(T){return this._activeProvider.wcwidth(T)},v.prototype.getStringCellWidth=function(T){for(var w=0,c=T.length,p=0;p<c;++p){var C=T.charCodeAt(p);if(55296<=C&&C<=56319){if(++p>=c)return w+this.wcwidth(C);var d=T.charCodeAt(p);56320<=d&&d<=57343?C=1024*(C-55296)+d-56320+65536:w+=this.wcwidth(d)}w+=this.wcwidth(C)}return w},v}();h.UnicodeService=_}},F={};return function D(h){var L=F[h];if(L!==void 0)return L.exports;var y=F[h]={exports:{}};return $[h].call(y.exports,y,y.exports,D),y.exports}(4389)})()})});var Dl=Qt((Ol,Rl)=>{(function($){typeof Ol=="object"&&typeof Rl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){"use strict";var F={},D=/[^\s\u00a0]/,h=$.Pos,L=$.cmpPos;function y(v){var T=v.search(D);return T==-1?0:T}$.commands.toggleComment=function(v){v.toggleComment()},$.defineExtension("toggleComment",function(v){v||(v=F);for(var T=this,w=1/0,c=this.listSelections(),p=null,C=c.length-1;C>=0;C--){var d=c[C].from(),s=c[C].to();d.line>=w||(s.line>=w&&(s=h(w,0)),w=d.line,p==null?T.uncomment(d,s,v)?p="un":(T.lineComment(d,s,v),p="line"):p=="un"?T.uncomment(d,s,v):T.lineComment(d,s,v))}});function m(v,T,w){return/\bstring\b/.test(v.getTokenTypeAt(h(T.line,0)))&&!/^[\'\"\`]/.test(w)}function _(v,T){var w=v.getMode();return w.useInnerComments===!1||!w.innerMode?w:v.getModeAt(T)}$.defineExtension("lineComment",function(v,T,w){w||(w=F);var c=this,p=_(c,v),C=c.getLine(v.line);if(!(C==null||m(c,v,C))){var d=w.lineComment||p.lineComment;if(!d){(w.blockCommentStart||p.blockCommentStart)&&(w.fullLines=!0,c.blockComment(v,T,w));return}var s=Math.min(T.ch!=0||T.line==v.line?T.line+1:T.line,c.lastLine()+1),n=w.padding==null?" ":w.padding,l=w.commentBlankLines||v.line==T.line;c.operation(function(){if(w.indent){for(var a=null,u=v.line;u<s;++u){var g=c.getLine(u),b=g.slice(0,y(g));(a==null||a.length>b.length)&&(a=b)}for(var u=v.line;u<s;++u){var g=c.getLine(u),k=a.length;!l&&!D.test(g)||(g.slice(0,k)!=a&&(k=y(g)),c.replaceRange(a+d+n,h(u,0),h(u,k)))}}else for(var u=v.line;u<s;++u)(l||D.test(c.getLine(u)))&&c.replaceRange(d+n,h(u,0))})}}),$.defineExtension("blockComment",function(v,T,w){w||(w=F);var c=this,p=_(c,v),C=w.blockCommentStart||p.blockCommentStart,d=w.blockCommentEnd||p.blockCommentEnd;if(!C||!d){(w.lineComment||p.lineComment)&&w.fullLines!=!1&&c.lineComment(v,T,w);return}if(!/\bcomment\b/.test(c.getTokenTypeAt(h(v.line,0)))){var s=Math.min(T.line,c.lastLine());s!=v.line&&T.ch==0&&D.test(c.getLine(s))&&--s;var n=w.padding==null?" ":w.padding;v.line>s||c.operation(function(){if(w.fullLines!=!1){var l=D.test(c.getLine(s));c.replaceRange(n+d,h(s)),c.replaceRange(C+n,h(v.line,0));var a=w.blockCommentLead||p.blockCommentLead;if(a!=null)for(var u=v.line+1;u<=s;++u)(u!=s||l)&&c.replaceRange(a+n,h(u,0))}else{var g=L(c.getCursor("to"),T)==0,b=!c.somethingSelected();c.replaceRange(d,T),g&&c.setSelection(b?T:c.getCursor("from"),T),c.replaceRange(C,v)}})}}),$.defineExtension("uncomment",function(v,T,w){w||(w=F);var c=this,p=_(c,v),C=Math.min(T.ch!=0||T.line==v.line?T.line:T.line-1,c.lastLine()),d=Math.min(v.line,C),s=w.lineComment||p.lineComment,n=[],l=w.padding==null?" ":w.padding,a;e:{if(!s)break e;for(var u=d;u<=C;++u){var g=c.getLine(u),b=g.indexOf(s);if(b>-1&&!/comment/.test(c.getTokenTypeAt(h(u,b+1)))&&(b=-1),b==-1&&D.test(g)||b>-1&&D.test(g.slice(0,b)))break e;n.push(g)}if(c.operation(function(){for(var te=d;te<=C;++te){var re=n[te-d],fe=re.indexOf(s),he=fe+s.length;fe<0||(re.slice(he,he+l.length)==l&&(he+=l.length),a=!0,c.replaceRange("",h(te,fe),h(te,he)))}}),a)return!0}var k=w.blockCommentStart||p.blockCommentStart,O=w.blockCommentEnd||p.blockCommentEnd;if(!k||!O)return!1;var E=w.blockCommentLead||p.blockCommentLead,A=c.getLine(d),W=A.indexOf(k);if(W==-1)return!1;var R=C==d?A:c.getLine(C),j=R.indexOf(O,C==d?W+k.length:0),B=h(d,W+1),P=h(C,j+1);if(j==-1||!/comment/.test(c.getTokenTypeAt(B))||!/comment/.test(c.getTokenTypeAt(P))||c.getRange(B,P,`
`).indexOf(O)>-1)return!1;var N=A.lastIndexOf(k,v.ch),z=N==-1?-1:A.slice(0,v.ch).indexOf(O,N+k.length);if(N!=-1&&z!=-1&&z+O.length!=v.ch)return!1;z=R.indexOf(O,T.ch);var V=R.slice(T.ch).lastIndexOf(k,z-T.ch);return N=z==-1||V==-1?-1:T.ch+V,z!=-1&&N!=-1&&N!=T.ch?!1:(c.operation(function(){c.replaceRange("",h(C,j-(l&&R.slice(j-l.length,j)==l?l.length:0)),h(C,j+O.length));var te=W+k.length;if(l&&A.slice(te,te+l.length)==l&&(te+=l.length),c.replaceRange("",h(d,W),h(d,te)),E)for(var re=d+1;re<=C;++re){var fe=c.getLine(re),he=fe.indexOf(E);if(!(he==-1||D.test(fe.slice(0,he)))){var xe=he+E.length;l&&fe.slice(xe,xe+l.length)==l&&(xe+=l.length),c.replaceRange("",h(re,he),h(re,xe))}}}),!0)})})});var Il=Qt((Bl,Pl)=>{(function($){typeof Bl=="object"&&typeof Pl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){var F=/\S/g,D=String.prototype.repeat||function(m){return Array(m+1).join(this)};function h(m){if(m.getOption("disableInput"))return $.Pass;for(var _=m.listSelections(),v,T=[],w=0;w<_.length;w++){var c=_[w].head;if(!/\bcomment\b/.test(m.getTokenTypeAt(c)))return $.Pass;var p=m.getModeAt(c);if(!v)v=p;else if(v!=p)return $.Pass;var C=null,d,s,n=v.blockCommentStart,l=v.lineComment;if(n&&v.blockCommentContinue){d=m.getLine(c.line);var a=d.lastIndexOf(v.blockCommentEnd,c.ch-v.blockCommentEnd.length);if(!(a!=-1&&a==c.ch-v.blockCommentEnd.length||l&&(s=d.lastIndexOf(l,c.ch-1))>-1&&/\bcomment\b/.test(m.getTokenTypeAt({line:c.line,ch:s+1}))))if(c.ch>=n.length&&(s=d.lastIndexOf(n,c.ch-n.length))>-1&&s>a)if(L(0,d)>=s)C=d.slice(0,s);else{var u=m.options.tabSize,g;s=$.countColumn(d,s,u),C=m.options.indentWithTabs?D.call("	",g=Math.floor(s/u))+D.call(" ",s-u*g):D.call(" ",s)}else(s=d.indexOf(v.blockCommentContinue))>-1&&s<=c.ch&&s<=L(0,d)&&(C=d.slice(0,s));C!=null&&(C+=v.blockCommentContinue)}if(C==null&&l&&y(m)){if(d==null&&(d=m.getLine(c.line)),s=d.indexOf(l),!c.ch&&!s)C="";else if(s>-1&&L(0,d)>=s){if(C=L(c.ch,d)>-1,!C){var b=m.getLine(c.line+1)||"",k=b.indexOf(l);C=k>-1&&L(0,b)>=k||null}C&&(C=d.slice(0,s)+l+d.slice(s+l.length).match(/^\s*/)[0])}}if(C==null)return $.Pass;T[w]=`
`+C}m.operation(function(){for(var O=_.length-1;O>=0;O--)m.replaceRange(T[O],_[O].from(),_[O].to(),"+insert")})}function L(m,_){F.lastIndex=m;var v=F.exec(_);return v?v.index:-1}function y(m){var _=m.getOption("continueComments");return _&&typeof _=="object"?_.continueLineComment!==!1:!0}$.defineOption("continueComments",null,function(m,_,v){if(v&&v!=$.Init&&m.removeKeyMap("continueComment"),_){var T="Enter";typeof _=="string"?T=_:typeof _=="object"&&_.key&&(T=_.key);var w={name:"continueComment"};w[T]=h,m.addKeyMap(w)}})})});var Nl=Qt((Hl,Fl)=>{(function($){typeof Hl=="object"&&typeof Fl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){$.defineOption("placeholder","",function(_,v,T){var w=T&&T!=$.Init;if(v&&!w)_.on("blur",L),_.on("change",y),_.on("swapDoc",y),$.on(_.getInputField(),"compositionupdate",_.state.placeholderCompose=function(){h(_)}),y(_);else if(!v&&w){_.off("blur",L),_.off("change",y),_.off("swapDoc",y),$.off(_.getInputField(),"compositionupdate",_.state.placeholderCompose),F(_);var c=_.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}v&&!_.hasFocus()&&L(_)});function F(_){_.state.placeholder&&(_.state.placeholder.parentNode.removeChild(_.state.placeholder),_.state.placeholder=null)}function D(_){F(_);var v=_.state.placeholder=document.createElement("pre");v.style.cssText="height: 0; overflow: visible",v.style.direction=_.getOption("direction"),v.className="CodeMirror-placeholder CodeMirror-line-like";var T=_.getOption("placeholder");typeof T=="string"&&(T=document.createTextNode(T)),v.appendChild(T),_.display.lineSpace.insertBefore(v,_.display.lineSpace.firstChild)}function h(_){setTimeout(function(){var v=!1;if(_.lineCount()==1){var T=_.getInputField();v=T.nodeName=="TEXTAREA"?!_.getLine(0).length:!/[^\u200b]/.test(T.querySelector(".CodeMirror-line").textContent)}v?D(_):F(_)},20)}function L(_){m(_)&&D(_)}function y(_){var v=_.getWrapperElement(),T=m(_);v.className=v.className.replace(" CodeMirror-empty","")+(T?" CodeMirror-empty":""),T?D(_):F(_)}function m(_){return _.lineCount()===1&&_.getLine(0)===""}})});var Ul=Qt((Wl,jl)=>{(function($){typeof Wl=="object"&&typeof jl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){var F={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},D=$.Pos;$.defineOption("autoCloseBrackets",!1,function(s,n,l){l&&l!=$.Init&&(s.removeKeyMap(L),s.state.closeBrackets=null),n&&(y(h(n,"pairs")),s.state.closeBrackets=n,s.addKeyMap(L))});function h(s,n){return n=="pairs"&&typeof s=="string"?s:typeof s=="object"&&s[n]!=null?s[n]:F[n]}var L={Backspace:v,Enter:T};function y(s){for(var n=0;n<s.length;n++){var l=s.charAt(n),a="'"+l+"'";L[a]||(L[a]=m(l))}}y(F.pairs+"`");function m(s){return function(n){return p(n,s)}}function _(s){var n=s.state.closeBrackets;if(!n||n.override)return n;var l=s.getModeAt(s.getCursor());return l.closeBrackets||n}function v(s){var n=_(s);if(!n||s.getOption("disableInput"))return $.Pass;for(var l=h(n,"pairs"),a=s.listSelections(),u=0;u<a.length;u++){if(!a[u].empty())return $.Pass;var g=C(s,a[u].head);if(!g||l.indexOf(g)%2!=0)return $.Pass}for(var u=a.length-1;u>=0;u--){var b=a[u].head;s.replaceRange("",D(b.line,b.ch-1),D(b.line,b.ch+1),"+delete")}}function T(s){var n=_(s),l=n&&h(n,"explode");if(!l||s.getOption("disableInput"))return $.Pass;for(var a=s.listSelections(),u=0;u<a.length;u++){if(!a[u].empty())return $.Pass;var g=C(s,a[u].head);if(!g||l.indexOf(g)%2!=0)return $.Pass}s.operation(function(){var b=s.lineSeparator()||`
`;s.replaceSelection(b+b,null),w(s,-1),a=s.listSelections();for(var k=0;k<a.length;k++){var O=a[k].head.line;s.indentLine(O,null,!0),s.indentLine(O+1,null,!0)}})}function w(s,n){for(var l=[],a=s.listSelections(),u=0,g=0;g<a.length;g++){var b=a[g];b.head==s.getCursor()&&(u=g);var k=b.head.ch||n>0?{line:b.head.line,ch:b.head.ch+n}:{line:b.head.line-1};l.push({anchor:k,head:k})}s.setSelections(l,u)}function c(s){var n=$.cmpPos(s.anchor,s.head)>0;return{anchor:new D(s.anchor.line,s.anchor.ch+(n?-1:1)),head:new D(s.head.line,s.head.ch+(n?1:-1))}}function p(s,n){var l=_(s);if(!l||s.getOption("disableInput"))return $.Pass;var a=h(l,"pairs"),u=a.indexOf(n);if(u==-1)return $.Pass;for(var g=h(l,"closeBefore"),b=h(l,"triples"),k=a.charAt(u+1)==n,O=s.listSelections(),E=u%2==0,A,W=0;W<O.length;W++){var R=O[W],j=R.head,B,P=s.getRange(j,D(j.line,j.ch+1));if(E&&!R.empty())B="surround";else if((k||!E)&&P==n)k&&d(s,j)?B="both":b.indexOf(n)>=0&&s.getRange(j,D(j.line,j.ch+3))==n+n+n?B="skipThree":B="skip";else if(k&&j.ch>1&&b.indexOf(n)>=0&&s.getRange(D(j.line,j.ch-2),j)==n+n){if(j.ch>2&&/\bstring/.test(s.getTokenTypeAt(D(j.line,j.ch-2))))return $.Pass;B="addFour"}else if(k){var N=j.ch==0?" ":s.getRange(D(j.line,j.ch-1),j);if(!$.isWordChar(P)&&N!=n&&!$.isWordChar(N))B="both";else return $.Pass}else if(E&&(P.length===0||/\s/.test(P)||g.indexOf(P)>-1))B="both";else return $.Pass;if(!A)A=B;else if(A!=B)return $.Pass}var z=u%2?a.charAt(u-1):n,V=u%2?n:a.charAt(u+1);s.operation(function(){if(A=="skip")w(s,1);else if(A=="skipThree")w(s,3);else if(A=="surround"){for(var te=s.getSelections(),re=0;re<te.length;re++)te[re]=z+te[re]+V;s.replaceSelections(te,"around"),te=s.listSelections().slice();for(var re=0;re<te.length;re++)te[re]=c(te[re]);s.setSelections(te)}else A=="both"?(s.replaceSelection(z+V,null),s.triggerElectric(z+V),w(s,-1)):A=="addFour"&&(s.replaceSelection(z+z+z+z,"before"),w(s,1))})}function C(s,n){var l=s.getRange(D(n.line,n.ch-1),D(n.line,n.ch+1));return l.length==2?l:null}function d(s,n){var l=s.getTokenAt(D(n.line,n.ch+1));return/\bstring/.test(l.type)&&l.start==n.ch&&(n.ch==0||!/\bstring/.test(s.getTokenTypeAt(n)))}})});var xs=Qt((zl,ql)=>{(function($){typeof zl=="object"&&typeof ql=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){var F=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),D=$.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function L(w){return w&&w.bracketRegex||/[(){}[\]]/}function y(w,c,p){var C=w.getLineHandle(c.line),d=c.ch-1,s=p&&p.afterCursor;s==null&&(s=/(^| )cm-fat-cursor($| )/.test(w.getWrapperElement().className));var n=L(p),l=!s&&d>=0&&n.test(C.text.charAt(d))&&h[C.text.charAt(d)]||n.test(C.text.charAt(d+1))&&h[C.text.charAt(++d)];if(!l)return null;var a=l.charAt(1)==">"?1:-1;if(p&&p.strict&&a>0!=(d==c.ch))return null;var u=w.getTokenTypeAt(D(c.line,d+1)),g=m(w,D(c.line,d+(a>0?1:0)),a,u,p);return g==null?null:{from:D(c.line,d),to:g&&g.pos,match:g&&g.ch==l.charAt(0),forward:a>0}}function m(w,c,p,C,d){for(var s=d&&d.maxScanLineLength||1e4,n=d&&d.maxScanLines||1e3,l=[],a=L(d),u=p>0?Math.min(c.line+n,w.lastLine()+1):Math.max(w.firstLine()-1,c.line-n),g=c.line;g!=u;g+=p){var b=w.getLine(g);if(!!b){var k=p>0?0:b.length-1,O=p>0?b.length:-1;if(!(b.length>s))for(g==c.line&&(k=c.ch-(p<0?1:0));k!=O;k+=p){var E=b.charAt(k);if(a.test(E)&&(C===void 0||(w.getTokenTypeAt(D(g,k+1))||"")==(C||""))){var A=h[E];if(A&&A.charAt(1)==">"==p>0)l.push(E);else if(l.length)l.pop();else return{pos:D(g,k),ch:E}}}}}return g-p==(p>0?w.lastLine():w.firstLine())?!1:null}function _(w,c,p){for(var C=w.state.matchBrackets.maxHighlightLineLength||1e3,d=p&&p.highlightNonMatching,s=[],n=w.listSelections(),l=0;l<n.length;l++){var a=n[l].empty()&&y(w,n[l].head,p);if(a&&(a.match||d!==!1)&&w.getLine(a.from.line).length<=C){var u=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(w.markText(a.from,D(a.from.line,a.from.ch+1),{className:u})),a.to&&w.getLine(a.to.line).length<=C&&s.push(w.markText(a.to,D(a.to.line,a.to.ch+1),{className:u}))}}if(s.length){F&&w.state.focused&&w.focus();var g=function(){w.operation(function(){for(var b=0;b<s.length;b++)s[b].clear()})};if(c)setTimeout(g,800);else return g}}function v(w){w.operation(function(){w.state.matchBrackets.currentlyHighlighted&&(w.state.matchBrackets.currentlyHighlighted(),w.state.matchBrackets.currentlyHighlighted=null),w.state.matchBrackets.currentlyHighlighted=_(w,!1,w.state.matchBrackets)})}function T(w){w.state.matchBrackets&&w.state.matchBrackets.currentlyHighlighted&&(w.state.matchBrackets.currentlyHighlighted(),w.state.matchBrackets.currentlyHighlighted=null)}$.defineOption("matchBrackets",!1,function(w,c,p){p&&p!=$.Init&&(w.off("cursorActivity",v),w.off("focus",v),w.off("blur",T),T(w)),c&&(w.state.matchBrackets=typeof c=="object"?c:{},w.on("cursorActivity",v),w.on("focus",v),w.on("blur",T))}),$.defineExtension("matchBrackets",function(){_(this,!0)}),$.defineExtension("findMatchingBracket",function(w,c,p){return(p||typeof c=="boolean")&&(p?(p.strict=c,c=p):c=c?{strict:!0}:null),y(this,w,c)}),$.defineExtension("scanForBracket",function(w,c,p,C){return m(this,w,c,p,C)})})});var Xl=Qt((Kl,Gl)=>{(function($){typeof Kl=="object"&&typeof Gl=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){"use strict";var F=$.Pos;function D(n){var l=n.flags;return l??(n.ignoreCase?"i":"")+(n.global?"g":"")+(n.multiline?"m":"")}function h(n,l){for(var a=D(n),u=a,g=0;g<l.length;g++)u.indexOf(l.charAt(g))==-1&&(u+=l.charAt(g));return a==u?n:new RegExp(n.source,u)}function L(n){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(n.source)}function y(n,l,a){l=h(l,"g");for(var u=a.line,g=a.ch,b=n.lastLine();u<=b;u++,g=0){l.lastIndex=g;var k=n.getLine(u),O=l.exec(k);if(O)return{from:F(u,O.index),to:F(u,O.index+O[0].length),match:O}}}function m(n,l,a){if(!L(l))return y(n,l,a);l=h(l,"gm");for(var u,g=1,b=a.line,k=n.lastLine();b<=k;){for(var O=0;O<g&&!(b>k);O++){var E=n.getLine(b++);u=u==null?E:u+`
`+E}g=g*2,l.lastIndex=a.ch;var A=l.exec(u);if(A){var W=u.slice(0,A.index).split(`
`),R=A[0].split(`
`),j=a.line+W.length-1,B=W[W.length-1].length;return{from:F(j,B),to:F(j+R.length-1,R.length==1?B+R[0].length:R[R.length-1].length),match:A}}}}function _(n,l,a){for(var u,g=0;g<=n.length;){l.lastIndex=g;var b=l.exec(n);if(!b)break;var k=b.index+b[0].length;if(k>n.length-a)break;(!u||k>u.index+u[0].length)&&(u=b),g=b.index+1}return u}function v(n,l,a){l=h(l,"g");for(var u=a.line,g=a.ch,b=n.firstLine();u>=b;u--,g=-1){var k=n.getLine(u),O=_(k,l,g<0?0:k.length-g);if(O)return{from:F(u,O.index),to:F(u,O.index+O[0].length),match:O}}}function T(n,l,a){if(!L(l))return v(n,l,a);l=h(l,"gm");for(var u,g=1,b=n.getLine(a.line).length-a.ch,k=a.line,O=n.firstLine();k>=O;){for(var E=0;E<g&&k>=O;E++){var A=n.getLine(k--);u=u==null?A:A+`
`+u}g*=2;var W=_(u,l,b);if(W){var R=u.slice(0,W.index).split(`
`),j=W[0].split(`
`),B=k+R.length,P=R[R.length-1].length;return{from:F(B,P),to:F(B+j.length-1,j.length==1?P+j[0].length:j[j.length-1].length),match:W}}}}var w,c;String.prototype.normalize?(w=function(n){return n.normalize("NFD").toLowerCase()},c=function(n){return n.normalize("NFD")}):(w=function(n){return n.toLowerCase()},c=function(n){return n});function p(n,l,a,u){if(n.length==l.length)return a;for(var g=0,b=a+Math.max(0,n.length-l.length);;){if(g==b)return g;var k=g+b>>1,O=u(n.slice(0,k)).length;if(O==a)return k;O>a?b=k:g=k+1}}function C(n,l,a,u){if(!l.length)return null;var g=u?w:c,b=g(l).split(/\r|\n\r?/);e:for(var k=a.line,O=a.ch,E=n.lastLine()+1-b.length;k<=E;k++,O=0){var A=n.getLine(k).slice(O),W=g(A);if(b.length==1){var R=W.indexOf(b[0]);if(R==-1)continue e;var a=p(A,W,R,g)+O;return{from:F(k,p(A,W,R,g)+O),to:F(k,p(A,W,R+b[0].length,g)+O)}}else{var j=W.length-b[0].length;if(W.slice(j)!=b[0])continue e;for(var B=1;B<b.length-1;B++)if(g(n.getLine(k+B))!=b[B])continue e;var P=n.getLine(k+b.length-1),N=g(P),z=b[b.length-1];if(N.slice(0,z.length)!=z)continue e;return{from:F(k,p(A,W,j,g)+O),to:F(k+b.length-1,p(P,N,z.length,g))}}}}function d(n,l,a,u){if(!l.length)return null;var g=u?w:c,b=g(l).split(/\r|\n\r?/);e:for(var k=a.line,O=a.ch,E=n.firstLine()-1+b.length;k>=E;k--,O=-1){var A=n.getLine(k);O>-1&&(A=A.slice(0,O));var W=g(A);if(b.length==1){var R=W.lastIndexOf(b[0]);if(R==-1)continue e;return{from:F(k,p(A,W,R,g)),to:F(k,p(A,W,R+b[0].length,g))}}else{var j=b[b.length-1];if(W.slice(0,j.length)!=j)continue e;for(var B=1,a=k-b.length+1;B<b.length-1;B++)if(g(n.getLine(a+B))!=b[B])continue e;var P=n.getLine(k+1-b.length),N=g(P);if(N.slice(N.length-b[0].length)!=b[0])continue e;return{from:F(k+1-b.length,p(P,N,P.length-b[0].length,g)),to:F(k,p(A,W,j.length,g))}}}}function s(n,l,a,u){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=n,a=a?n.clipPos(a):F(0,0),this.pos={from:a,to:a};var g;typeof u=="object"?g=u.caseFold:(g=u,u=null),typeof l=="string"?(g==null&&(g=!1),this.matches=function(b,k){return(b?d:C)(n,l,k,g)}):(l=h(l,"gm"),!u||u.multiline!==!1?this.matches=function(b,k){return(b?T:m)(n,l,k)}:this.matches=function(b,k){return(b?v:y)(n,l,k)})}s.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(n){var l=this.doc.clipPos(n?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(l=F(l.line,l.ch),n?(l.ch--,l.ch<0&&(l.line--,l.ch=(this.doc.getLine(l.line)||"").length)):(l.ch++,l.ch>(this.doc.getLine(l.line)||"").length&&(l.ch=0,l.line++)),$.cmpPos(l,this.doc.clipPos(l))!=0))return this.atOccurrence=!1;var a=this.matches(n,l);if(this.afterEmptyMatch=a&&$.cmpPos(a.from,a.to)==0,a)return this.pos=a,this.atOccurrence=!0,this.pos.match||!0;var u=F(n?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:u,to:u},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(n,l){if(!!this.atOccurrence){var a=$.splitLines(n);this.doc.replaceRange(a,this.pos.from,this.pos.to,l),this.pos.to=F(this.pos.from.line+a.length-1,a[a.length-1].length+(a.length==1?this.pos.from.ch:0))}}},$.defineExtension("getSearchCursor",function(n,l,a){return new s(this.doc,n,l,a)}),$.defineDocExtension("getSearchCursor",function(n,l,a){return new s(this,n,l,a)}),$.defineExtension("selectMatches",function(n,l){for(var a=[],u=this.getSearchCursor(n,this.getCursor("from"),l);u.findNext()&&!($.cmpPos(u.to(),this.getCursor("to"))>0);)a.push({anchor:u.from(),head:u.to()});a.length&&this.setSelections(a,0)})})});var Vl=Qt((Yl,Zl)=>{(function($){typeof Yl=="object"&&typeof Zl=="object"?$(er(),Xl(),xs()):typeof define=="function"&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],$):$(CodeMirror)})(function($){"use strict";var F=$.commands,D=$.Pos;function h(a,u,g){if(g<0&&u.ch==0)return a.clipPos(D(u.line-1));var b=a.getLine(u.line);if(g>0&&u.ch>=b.length)return a.clipPos(D(u.line+1,0));for(var k="start",O,E=u.ch,A=E,W=g<0?0:b.length,R=0;A!=W;A+=g,R++){var j=b.charAt(g<0?A-1:A),B=j!="_"&&$.isWordChar(j)?"w":"o";if(B=="w"&&j.toUpperCase()==j&&(B="W"),k=="start")B!="o"?(k="in",O=B):E=A+g;else if(k=="in"&&O!=B){if(O=="w"&&B=="W"&&g<0&&A--,O=="W"&&B=="w"&&g>0)if(A==E+1){O="w";continue}else A--;break}}return D(u.line,A)}function L(a,u){a.extendSelectionsBy(function(g){return a.display.shift||a.doc.extend||g.empty()?h(a.doc,g.head,u):u<0?g.from():g.to()})}F.goSubwordLeft=function(a){L(a,-1)},F.goSubwordRight=function(a){L(a,1)},F.scrollLineUp=function(a){var u=a.getScrollInfo();if(!a.somethingSelected()){var g=a.lineAtHeight(u.top+u.clientHeight,"local");a.getCursor().line>=g&&a.execCommand("goLineUp")}a.scrollTo(null,u.top-a.defaultTextHeight())},F.scrollLineDown=function(a){var u=a.getScrollInfo();if(!a.somethingSelected()){var g=a.lineAtHeight(u.top,"local")+1;a.getCursor().line<=g&&a.execCommand("goLineDown")}a.scrollTo(null,u.top+a.defaultTextHeight())},F.splitSelectionByLine=function(a){for(var u=a.listSelections(),g=[],b=0;b<u.length;b++)for(var k=u[b].from(),O=u[b].to(),E=k.line;E<=O.line;++E)O.line>k.line&&E==O.line&&O.ch==0||g.push({anchor:E==k.line?k:D(E,0),head:E==O.line?O:D(E)});a.setSelections(g,0)},F.singleSelectionTop=function(a){var u=a.listSelections()[0];a.setSelection(u.anchor,u.head,{scroll:!1})},F.selectLine=function(a){for(var u=a.listSelections(),g=[],b=0;b<u.length;b++){var k=u[b];g.push({anchor:D(k.from().line,0),head:D(k.to().line+1,0)})}a.setSelections(g)};function y(a,u){if(a.isReadOnly())return $.Pass;a.operation(function(){for(var g=a.listSelections().length,b=[],k=-1,O=0;O<g;O++){var E=a.listSelections()[O].head;if(!(E.line<=k)){var A=D(E.line+(u?0:1),0);a.replaceRange(`
`,A,null,"+insertLine"),a.indentLine(A.line,null,!0),b.push({head:A,anchor:A}),k=E.line+1}}a.setSelections(b)}),a.execCommand("indentAuto")}F.insertLineAfter=function(a){return y(a,!1)},F.insertLineBefore=function(a){return y(a,!0)};function m(a,u){for(var g=u.ch,b=g,k=a.getLine(u.line);g&&$.isWordChar(k.charAt(g-1));)--g;for(;b<k.length&&$.isWordChar(k.charAt(b));)++b;return{from:D(u.line,g),to:D(u.line,b),word:k.slice(g,b)}}F.selectNextOccurrence=function(a){var u=a.getCursor("from"),g=a.getCursor("to"),b=a.state.sublimeFindFullWord==a.doc.sel;if($.cmpPos(u,g)==0){var k=m(a,u);if(!k.word)return;a.setSelection(k.from,k.to),b=!0}else{var O=a.getRange(u,g),E=b?new RegExp("\\b"+O+"\\b"):O,A=a.getSearchCursor(E,g),W=A.findNext();if(W||(A=a.getSearchCursor(E,D(a.firstLine(),0)),W=A.findNext()),!W||v(a.listSelections(),A.from(),A.to()))return;a.addSelection(A.from(),A.to())}b&&(a.state.sublimeFindFullWord=a.doc.sel)},F.skipAndSelectNextOccurrence=function(a){var u=a.getCursor("anchor"),g=a.getCursor("head");F.selectNextOccurrence(a),$.cmpPos(u,g)!=0&&a.doc.setSelections(a.doc.listSelections().filter(function(b){return b.anchor!=u||b.head!=g}))};function _(a,u){for(var g=a.listSelections(),b=[],k=0;k<g.length;k++){var O=g[k],E=a.findPosV(O.anchor,u,"line",O.anchor.goalColumn),A=a.findPosV(O.head,u,"line",O.head.goalColumn);E.goalColumn=O.anchor.goalColumn!=null?O.anchor.goalColumn:a.cursorCoords(O.anchor,"div").left,A.goalColumn=O.head.goalColumn!=null?O.head.goalColumn:a.cursorCoords(O.head,"div").left;var W={anchor:E,head:A};b.push(O),b.push(W)}a.setSelections(b)}F.addCursorToPrevLine=function(a){_(a,-1)},F.addCursorToNextLine=function(a){_(a,1)};function v(a,u,g){for(var b=0;b<a.length;b++)if($.cmpPos(a[b].from(),u)==0&&$.cmpPos(a[b].to(),g)==0)return!0;return!1}var T="(){}[]";function w(a){for(var u=a.listSelections(),g=[],b=0;b<u.length;b++){var k=u[b],O=k.head,E=a.scanForBracket(O,-1);if(!E)return!1;for(;;){var A=a.scanForBracket(O,1);if(!A)return!1;if(A.ch==T.charAt(T.indexOf(E.ch)+1)){var W=D(E.pos.line,E.pos.ch+1);if($.cmpPos(W,k.from())==0&&$.cmpPos(A.pos,k.to())==0){if(E=a.scanForBracket(E.pos,-1),!E)return!1}else{g.push({anchor:W,head:A.pos});break}}O=D(A.pos.line,A.pos.ch+1)}}return a.setSelections(g),!0}F.selectScope=function(a){w(a)||a.execCommand("selectAll")},F.selectBetweenBrackets=function(a){if(!w(a))return $.Pass};function c(a){return a?/\bpunctuation\b/.test(a)?a:void 0:null}F.goToBracket=function(a){a.extendSelectionsBy(function(u){var g=a.scanForBracket(u.head,1,c(a.getTokenTypeAt(u.head)));if(g&&$.cmpPos(g.pos,u.head)!=0)return g.pos;var b=a.scanForBracket(u.head,-1,c(a.getTokenTypeAt(D(u.head.line,u.head.ch+1))));return b&&D(b.pos.line,b.pos.ch+1)||u.head})},F.swapLineUp=function(a){if(a.isReadOnly())return $.Pass;for(var u=a.listSelections(),g=[],b=a.firstLine()-1,k=[],O=0;O<u.length;O++){var E=u[O],A=E.from().line-1,W=E.to().line;k.push({anchor:D(E.anchor.line-1,E.anchor.ch),head:D(E.head.line-1,E.head.ch)}),E.to().ch==0&&!E.empty()&&--W,A>b?g.push(A,W):g.length&&(g[g.length-1]=W),b=W}a.operation(function(){for(var R=0;R<g.length;R+=2){var j=g[R],B=g[R+1],P=a.getLine(j);a.replaceRange("",D(j,0),D(j+1,0),"+swapLine"),B>a.lastLine()?a.replaceRange(`
`+P,D(a.lastLine()),null,"+swapLine"):a.replaceRange(P+`
`,D(B,0),null,"+swapLine")}a.setSelections(k),a.scrollIntoView()})},F.swapLineDown=function(a){if(a.isReadOnly())return $.Pass;for(var u=a.listSelections(),g=[],b=a.lastLine()+1,k=u.length-1;k>=0;k--){var O=u[k],E=O.to().line+1,A=O.from().line;O.to().ch==0&&!O.empty()&&E--,E<b?g.push(E,A):g.length&&(g[g.length-1]=A),b=A}a.operation(function(){for(var W=g.length-2;W>=0;W-=2){var R=g[W],j=g[W+1],B=a.getLine(R);R==a.lastLine()?a.replaceRange("",D(R-1),D(R),"+swapLine"):a.replaceRange("",D(R,0),D(R+1,0),"+swapLine"),a.replaceRange(B+`
`,D(j,0),null,"+swapLine")}a.scrollIntoView()})},F.toggleCommentIndented=function(a){a.toggleComment({indent:!0})},F.joinLines=function(a){for(var u=a.listSelections(),g=[],b=0;b<u.length;b++){for(var k=u[b],O=k.from(),E=O.line,A=k.to().line;b<u.length-1&&u[b+1].from().line==A;)A=u[++b].to().line;g.push({start:E,end:A,anchor:!k.empty()&&O})}a.operation(function(){for(var W=0,R=[],j=0;j<g.length;j++){for(var B=g[j],P=B.anchor&&D(B.anchor.line-W,B.anchor.ch),N,z=B.start;z<=B.end;z++){var V=z-W;z==B.end&&(N=D(V,a.getLine(V).length+1)),V<a.lastLine()&&(a.replaceRange(" ",D(V),D(V+1,/^\s*/.exec(a.getLine(V+1))[0].length)),++W)}R.push({anchor:P||N,head:N})}a.setSelections(R,0)})},F.duplicateLine=function(a){a.operation(function(){for(var u=a.listSelections().length,g=0;g<u;g++){var b=a.listSelections()[g];b.empty()?a.replaceRange(a.getLine(b.head.line)+`
`,D(b.head.line,0)):a.replaceRange(a.getRange(b.from(),b.to()),b.from())}a.scrollIntoView()})};function p(a,u,g){if(a.isReadOnly())return $.Pass;for(var b=a.listSelections(),k=[],O,E=0;E<b.length;E++){var A=b[E];if(!A.empty()){for(var W=A.from().line,R=A.to().line;E<b.length-1&&b[E+1].from().line==R;)R=b[++E].to().line;b[E].to().ch||R--,k.push(W,R)}}k.length?O=!0:k.push(a.firstLine(),a.lastLine()),a.operation(function(){for(var j=[],B=0;B<k.length;B+=2){var P=k[B],N=k[B+1],z=D(P,0),V=D(N),te=a.getRange(z,V,!1);u?te.sort(function(re,fe){return re<fe?-g:re==fe?0:g}):te.sort(function(re,fe){var he=re.toUpperCase(),xe=fe.toUpperCase();return he!=xe&&(re=he,fe=xe),re<fe?-g:re==fe?0:g}),a.replaceRange(te,z,V),O&&j.push({anchor:z,head:D(N+1,0)})}O&&a.setSelections(j,0)})}F.sortLines=function(a){p(a,!0,1)},F.reverseSortLines=function(a){p(a,!0,-1)},F.sortLinesInsensitive=function(a){p(a,!1,1)},F.reverseSortLinesInsensitive=function(a){p(a,!1,-1)},F.nextBookmark=function(a){var u=a.state.sublimeBookmarks;if(u)for(;u.length;){var g=u.shift(),b=g.find();if(b)return u.push(g),a.setSelection(b.from,b.to)}},F.prevBookmark=function(a){var u=a.state.sublimeBookmarks;if(u)for(;u.length;){u.unshift(u.pop());var g=u[u.length-1].find();if(!g)u.pop();else return a.setSelection(g.from,g.to)}},F.toggleBookmark=function(a){for(var u=a.listSelections(),g=a.state.sublimeBookmarks||(a.state.sublimeBookmarks=[]),b=0;b<u.length;b++){for(var k=u[b].from(),O=u[b].to(),E=u[b].empty()?a.findMarksAt(k):a.findMarks(k,O),A=0;A<E.length;A++)if(E[A].sublimeBookmark){E[A].clear();for(var W=0;W<g.length;W++)g[W]==E[A]&&g.splice(W--,1);break}A==E.length&&g.push(a.markText(k,O,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},F.clearBookmarks=function(a){var u=a.state.sublimeBookmarks;if(u)for(var g=0;g<u.length;g++)u[g].clear();u.length=0},F.selectBookmarks=function(a){var u=a.state.sublimeBookmarks,g=[];if(u)for(var b=0;b<u.length;b++){var k=u[b].find();k?g.push({anchor:k.from,head:k.to}):u.splice(b--,0)}g.length&&a.setSelections(g,0)};function C(a,u){a.operation(function(){for(var g=a.listSelections(),b=[],k=[],O=0;O<g.length;O++){var E=g[O];E.empty()?(b.push(O),k.push("")):k.push(u(a.getRange(E.from(),E.to())))}a.replaceSelections(k,"around","case");for(var O=b.length-1,A;O>=0;O--){var E=g[b[O]];if(!(A&&$.cmpPos(E.head,A)>0)){var W=m(a,E.head);A=W.from,a.replaceRange(u(W.word),W.from,W.to)}}})}F.smartBackspace=function(a){if(a.somethingSelected())return $.Pass;a.operation(function(){for(var u=a.listSelections(),g=a.getOption("indentUnit"),b=u.length-1;b>=0;b--){var k=u[b].head,O=a.getRange({line:k.line,ch:0},k),E=$.countColumn(O,null,a.getOption("tabSize")),A=a.findPosH(k,-1,"char",!1);if(O&&!/\S/.test(O)&&E%g==0){var W=new D(k.line,$.findColumn(O,E-g,g));W.ch!=k.ch&&(A=W)}a.replaceRange("",A,k,"+delete")}})},F.delLineRight=function(a){a.operation(function(){for(var u=a.listSelections(),g=u.length-1;g>=0;g--)a.replaceRange("",u[g].anchor,D(u[g].to().line),"+delete");a.scrollIntoView()})},F.upcaseAtCursor=function(a){C(a,function(u){return u.toUpperCase()})},F.downcaseAtCursor=function(a){C(a,function(u){return u.toLowerCase()})},F.setSublimeMark=function(a){a.state.sublimeMark&&a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor())},F.selectToSublimeMark=function(a){var u=a.state.sublimeMark&&a.state.sublimeMark.find();u&&a.setSelection(a.getCursor(),u)},F.deleteToSublimeMark=function(a){var u=a.state.sublimeMark&&a.state.sublimeMark.find();if(u){var g=a.getCursor(),b=u;if($.cmpPos(g,b)>0){var k=b;b=g,g=k}a.state.sublimeKilled=a.getRange(g,b),a.replaceRange("",g,b)}},F.swapWithSublimeMark=function(a){var u=a.state.sublimeMark&&a.state.sublimeMark.find();u&&(a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor()),a.setCursor(u))},F.sublimeYank=function(a){a.state.sublimeKilled!=null&&a.replaceSelection(a.state.sublimeKilled,null,"paste")},F.showInCenter=function(a){var u=a.cursorCoords(null,"local");a.scrollTo(null,(u.top+u.bottom)/2-a.getScrollInfo().clientHeight/2)};function d(a){var u=a.getCursor("from"),g=a.getCursor("to");if($.cmpPos(u,g)==0){var b=m(a,u);if(!b.word)return;u=b.from,g=b.to}return{from:u,to:g,query:a.getRange(u,g),word:b}}function s(a,u){var g=d(a);if(!!g){var b=g.query,k=a.getSearchCursor(b,u?g.to:g.from);(u?k.findNext():k.findPrevious())?a.setSelection(k.from(),k.to()):(k=a.getSearchCursor(b,u?D(a.firstLine(),0):a.clipPos(D(a.lastLine()))),(u?k.findNext():k.findPrevious())?a.setSelection(k.from(),k.to()):g.word&&a.setSelection(g.from,g.to))}}F.findUnder=function(a){s(a,!0)},F.findUnderPrevious=function(a){s(a,!1)},F.findAllUnder=function(a){var u=d(a);if(!!u){for(var g=a.getSearchCursor(u.query),b=[],k=-1;g.findNext();)b.push({anchor:g.from(),head:g.to()}),g.from().line<=u.from.line&&g.from().ch<=u.from.ch&&k++;a.setSelections(b,k)}};var n=$.keyMap;n.macSublime={"Cmd-Left":"goLineStartSmart","Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-Left":"goSubwordLeft","Ctrl-Right":"goSubwordRight","Ctrl-Alt-Up":"scrollLineUp","Ctrl-Alt-Down":"scrollLineDown","Cmd-L":"selectLine","Shift-Cmd-L":"splitSelectionByLine",Esc:"singleSelectionTop","Cmd-Enter":"insertLineAfter","Shift-Cmd-Enter":"insertLineBefore","Cmd-D":"selectNextOccurrence","Shift-Cmd-Space":"selectScope","Shift-Cmd-M":"selectBetweenBrackets","Cmd-M":"goToBracket","Cmd-Ctrl-Up":"swapLineUp","Cmd-Ctrl-Down":"swapLineDown","Cmd-/":"toggleCommentIndented","Cmd-J":"joinLines","Shift-Cmd-D":"duplicateLine",F5:"sortLines","Shift-F5":"reverseSortLines","Cmd-F5":"sortLinesInsensitive","Shift-Cmd-F5":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Cmd-F2":"toggleBookmark","Shift-Cmd-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Cmd-K Cmd-D":"skipAndSelectNextOccurrence","Cmd-K Cmd-K":"delLineRight","Cmd-K Cmd-U":"upcaseAtCursor","Cmd-K Cmd-L":"downcaseAtCursor","Cmd-K Cmd-Space":"setSublimeMark","Cmd-K Cmd-A":"selectToSublimeMark","Cmd-K Cmd-W":"deleteToSublimeMark","Cmd-K Cmd-X":"swapWithSublimeMark","Cmd-K Cmd-Y":"sublimeYank","Cmd-K Cmd-C":"showInCenter","Cmd-K Cmd-G":"clearBookmarks","Cmd-K Cmd-Backspace":"delLineLeft","Cmd-K Cmd-1":"foldAll","Cmd-K Cmd-0":"unfoldAll","Cmd-K Cmd-J":"unfoldAll","Ctrl-Shift-Up":"addCursorToPrevLine","Ctrl-Shift-Down":"addCursorToNextLine","Cmd-F3":"findUnder","Shift-Cmd-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Cmd-[":"fold","Shift-Cmd-]":"unfold","Cmd-I":"findIncremental","Shift-Cmd-I":"findIncrementalReverse","Cmd-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"macDefault"},$.normalizeKeyMap(n.macSublime),n.pcSublime={"Shift-Tab":"indentLess","Shift-Ctrl-K":"deleteLine","Alt-Q":"wrapLines","Ctrl-T":"transposeChars","Alt-Left":"goSubwordLeft","Alt-Right":"goSubwordRight","Ctrl-Up":"scrollLineUp","Ctrl-Down":"scrollLineDown","Ctrl-L":"selectLine","Shift-Ctrl-L":"splitSelectionByLine",Esc:"singleSelectionTop","Ctrl-Enter":"insertLineAfter","Shift-Ctrl-Enter":"insertLineBefore","Ctrl-D":"selectNextOccurrence","Shift-Ctrl-Space":"selectScope","Shift-Ctrl-M":"selectBetweenBrackets","Ctrl-M":"goToBracket","Shift-Ctrl-Up":"swapLineUp","Shift-Ctrl-Down":"swapLineDown","Ctrl-/":"toggleCommentIndented","Ctrl-J":"joinLines","Shift-Ctrl-D":"duplicateLine",F9:"sortLines","Shift-F9":"reverseSortLines","Ctrl-F9":"sortLinesInsensitive","Shift-Ctrl-F9":"reverseSortLinesInsensitive",F2:"nextBookmark","Shift-F2":"prevBookmark","Ctrl-F2":"toggleBookmark","Shift-Ctrl-F2":"clearBookmarks","Alt-F2":"selectBookmarks",Backspace:"smartBackspace","Ctrl-K Ctrl-D":"skipAndSelectNextOccurrence","Ctrl-K Ctrl-K":"delLineRight","Ctrl-K Ctrl-U":"upcaseAtCursor","Ctrl-K Ctrl-L":"downcaseAtCursor","Ctrl-K Ctrl-Space":"setSublimeMark","Ctrl-K Ctrl-A":"selectToSublimeMark","Ctrl-K Ctrl-W":"deleteToSublimeMark","Ctrl-K Ctrl-X":"swapWithSublimeMark","Ctrl-K Ctrl-Y":"sublimeYank","Ctrl-K Ctrl-C":"showInCenter","Ctrl-K Ctrl-G":"clearBookmarks","Ctrl-K Ctrl-Backspace":"delLineLeft","Ctrl-K Ctrl-1":"foldAll","Ctrl-K Ctrl-0":"unfoldAll","Ctrl-K Ctrl-J":"unfoldAll","Ctrl-Alt-Up":"addCursorToPrevLine","Ctrl-Alt-Down":"addCursorToNextLine","Ctrl-F3":"findUnder","Shift-Ctrl-F3":"findUnderPrevious","Alt-F3":"findAllUnder","Shift-Ctrl-[":"fold","Shift-Ctrl-]":"unfold","Ctrl-I":"findIncremental","Shift-Ctrl-I":"findIncrementalReverse","Ctrl-H":"replace",F3:"findNext","Shift-F3":"findPrev",fallthrough:"pcDefault"},$.normalizeKeyMap(n.pcSublime);var l=n.default==n.macDefault;n.sublime=l?n.macSublime:n.pcSublime})});var rc=Qt((ec,tc)=>{(function($){typeof ec=="object"&&typeof tc=="object"?$(er()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],$):$(CodeMirror)})(function($){"use strict";function F(_){return new RegExp("^(("+_.join(")|(")+"))\\b")}var D=F(["and","or","not","is"]),h=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],L=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];$.registerHelper("hintWords","python",h.concat(L));function y(_){return _.scopes[_.scopes.length-1]}$.defineMode("python",function(_,v){for(var T="error",w=v.delimiters||v.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,c=[v.singleOperators,v.doubleOperators,v.doubleDelimiters,v.tripleDelimiters,v.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],p=0;p<c.length;p++)c[p]||c.splice(p--,1);var C=v.hangingIndent||_.indentUnit,d=h,s=L;v.extra_keywords!=null&&(d=d.concat(v.extra_keywords)),v.extra_builtins!=null&&(s=s.concat(v.extra_builtins));var n=!(v.version&&Number(v.version)<3);if(n){var l=v.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;d=d.concat(["nonlocal","False","True","None","async","await"]),s=s.concat(["ascii","bytes","exec","print"]);var a=new RegExp(`^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|"{3}|['"]))`,"i")}else{var l=v.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;d=d.concat(["exec","print"]),s=s.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var a=new RegExp(`^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))`,"i")}var u=F(d),g=F(s);function b(P,N){var z=P.sol()&&N.lastToken!="\\";if(z&&(N.indent=P.indentation()),z&&y(N).type=="py"){var V=y(N).offset;if(P.eatSpace()){var te=P.indentation();return te>V?A(N):te<V&&R(P,N)&&P.peek()!="#"&&(N.errorToken=!0),null}else{var re=k(P,N);return V>0&&R(P,N)&&(re+=" "+T),re}}return k(P,N)}function k(P,N,z){if(P.eatSpace())return null;if(!z&&P.match(/^#.*/))return"comment";if(P.match(/^[0-9\.]/,!1)){var V=!1;if(P.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(V=!0),P.match(/^[\d_]+\.\d*/)&&(V=!0),P.match(/^\.\d+/)&&(V=!0),V)return P.eat(/J/i),"number";var te=!1;if(P.match(/^0x[0-9a-f_]+/i)&&(te=!0),P.match(/^0b[01_]+/i)&&(te=!0),P.match(/^0o[0-7_]+/i)&&(te=!0),P.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(P.eat(/J/i),te=!0),P.match(/^0(?![\dx])/i)&&(te=!0),te)return P.eat(/L/i),"number"}if(P.match(a)){var re=P.current().toLowerCase().indexOf("f")!==-1;return re?(N.tokenize=O(P.current(),N.tokenize),N.tokenize(P,N)):(N.tokenize=E(P.current(),N.tokenize),N.tokenize(P,N))}for(var fe=0;fe<c.length;fe++)if(P.match(c[fe]))return"operator";return P.match(w)?"punctuation":N.lastToken=="."&&P.match(l)?"property":P.match(u)||P.match(D)?"keyword":P.match(g)?"builtin":P.match(/^(self|cls)\b/)?"variable-2":P.match(l)?N.lastToken=="def"||N.lastToken=="class"?"def":"variable":(P.next(),z?null:T)}function O(P,N){for(;"rubf".indexOf(P.charAt(0).toLowerCase())>=0;)P=P.substr(1);var z=P.length==1,V="string";function te(fe){return function(he,xe){var U=k(he,xe,!0);return U=="punctuation"&&(he.current()=="{"?xe.tokenize=te(fe+1):he.current()=="}"&&(fe>1?xe.tokenize=te(fe-1):xe.tokenize=re)),U}}function re(fe,he){for(;!fe.eol();)if(fe.eatWhile(/[^'"\{\}\\]/),fe.eat("\\")){if(fe.next(),z&&fe.eol())return V}else{if(fe.match(P))return he.tokenize=N,V;if(fe.match("{{"))return V;if(fe.match("{",!1))return he.tokenize=te(0),fe.current()?V:he.tokenize(fe,he);if(fe.match("}}"))return V;if(fe.match("}"))return T;fe.eat(/['"]/)}if(z){if(v.singleLineStringErrors)return T;he.tokenize=N}return V}return re.isString=!0,re}function E(P,N){for(;"rubf".indexOf(P.charAt(0).toLowerCase())>=0;)P=P.substr(1);var z=P.length==1,V="string";function te(re,fe){for(;!re.eol();)if(re.eatWhile(/[^'"\\]/),re.eat("\\")){if(re.next(),z&&re.eol())return V}else{if(re.match(P))return fe.tokenize=N,V;re.eat(/['"]/)}if(z){if(v.singleLineStringErrors)return T;fe.tokenize=N}return V}return te.isString=!0,te}function A(P){for(;y(P).type!="py";)P.scopes.pop();P.scopes.push({offset:y(P).offset+_.indentUnit,type:"py",align:null})}function W(P,N,z){var V=P.match(/^[\s\[\{\(]*(?:#|$)/,!1)?null:P.column()+1;N.scopes.push({offset:N.indent+C,type:z,align:V})}function R(P,N){for(var z=P.indentation();N.scopes.length>1&&y(N).offset>z;){if(y(N).type!="py")return!0;N.scopes.pop()}return y(N).offset!=z}function j(P,N){P.sol()&&(N.beginningOfLine=!0,N.dedent=!1);var z=N.tokenize(P,N),V=P.current();if(N.beginningOfLine&&V=="@")return P.match(l,!1)?"meta":n?"operator":T;if(/\S/.test(V)&&(N.beginningOfLine=!1),(z=="variable"||z=="builtin")&&N.lastToken=="meta"&&(z="meta"),(V=="pass"||V=="return")&&(N.dedent=!0),V=="lambda"&&(N.lambda=!0),V==":"&&!N.lambda&&y(N).type=="py"&&P.match(/^\s*(?:#|$)/,!1)&&A(N),V.length==1&&!/string|comment/.test(z)){var te="[({".indexOf(V);if(te!=-1&&W(P,N,"])}".slice(te,te+1)),te="])}".indexOf(V),te!=-1)if(y(N).type==V)N.indent=N.scopes.pop().offset-C;else return T}return N.dedent&&P.eol()&&y(N).type=="py"&&N.scopes.length>1&&N.scopes.pop(),z}var B={startState:function(P){return{tokenize:b,scopes:[{offset:P||0,type:"py",align:null}],indent:P||0,lastToken:null,lambda:!1,dedent:0}},token:function(P,N){var z=N.errorToken;z&&(N.errorToken=!1);var V=j(P,N);return V&&V!="comment"&&(N.lastToken=V=="keyword"||V=="punctuation"?P.current():V),V=="punctuation"&&(V=null),P.eol()&&N.lambda&&(N.lambda=!1),z?V+" "+T:V},indent:function(P,N){if(P.tokenize!=b)return P.tokenize.isString?$.Pass:0;var z=y(P),V=z.type==N.charAt(0)||z.type=="py"&&!P.dedent&&/^(else:|elif |except |finally:)/.test(N);return z.align!=null?z.align-(V?1:0):z.offset-(V?C:0)},electricInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,closeBrackets:{triples:`'"`},lineComment:"#",fold:"indent"};return B}),$.defineMIME("text/x-python","python");var m=function(_){return _.split(" ")};$.defineMIME("text/x-cython",{name:"python",extra_keywords:m("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})})});var ts=class{name(){return"default"}codePointsToString(F){return F.reduce((D,h)=>D+String.fromCharCode(h),"")}stringToCodePoints(F){return F.split("").map(D=>D.charCodeAt(0))}matches(F){return this.matchesAsString(this.codePointsToString(F))}matchesAsString(F){return!0}decode(F){return this.decodeAsString(this.codePointsToString(F))}decodeAsString(F){return this.stringToCodePoints(F)}},fi=ts;var rs=class extends fi{name(){return"base64"}matchesAsString(F){if(F.length<4)return!1;try{return atob(F),!0}catch{return!1}}decodeAsString(F){return Array.from(atob(F)).map(D=>D.charCodeAt(0))}},hl=rs;var is=class extends fi{name(){return"hexdump"}matchesAsString(F){return/^(\d{7} (((.{2}){1,2} ){1,8})(\n|$))+$/.test(F)}decodeAsString(F){return F.trim().replace(/(?<=^|\n)\d{7} (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").replace(/(..)(..)/g,"$2$1").replace(/00$/,"").match(/../g).map(D=>parseInt(D,16))}},dl=is;var hi=class{constructor(F,D,h,L=null,y=null,m=F){this.id=F;this.name=D;this.runner=h;this.url=L;this.args=y;this.highlighterRef=m}getId(){return this.id}getName(){return this.name}getURL(){return this.url}getArgs(){return this.args}getHighlighterRef(){return this.highlighterRef}run(F,D,h){return this.runner(F,h,D)}};var ns=class{constructor(){this.data={}}register(...F){F.forEach(D=>{this.data[D.getId()]=D})}get(F){return this.data[F]}all(){return Object.keys(this.data)}run(F,D,h,L){return this.data[F].run(D,h,L)}},on=$=>(F,D,h)=>{let L=new Worker($);return L.postMessage({type:"run",code:F,args:h,input:D}),L},Hr=new ns;var uf=Nt(as()),ls=class extends hi{constructor(){super("javascript-browser","JavaScript (Browser)",on("dist/js/langs/javascript-browser/worker.js"),"https://www.ecma-international.org/publications-and-standards/standards/ecma-262/",null,"javascript")}},gl=ls;var pf=Nt(cs()),us=class extends hi{constructor(){super("webperl-5.28.1","Perl 5.28.1 (webperl)",on("dist/js/langs/webperl-5.28.1/worker.js"),"https://www.perl.org/",["-M5.10.0","-F","-l","-p"],"perl")}},ml=us;var $l=Nt(er()),Jl=Nt(wl());var fs=class{constructor(...F){this.buffer="";this.registered=[];this.register(...F)}activate(F){this.registered.reduce((D,h)=>h.matches(F)&&!D?(h.isActive()||(h.activate(F),h.reset(),h.write(this.buffer)),!0):(h.deactivate(),h.reset(),D),!1),this.resize()}register(...F){this.registered.push(...F)}reset(){this.buffer="",this.registered.forEach(F=>F.reset())}resize(){this.registered.forEach(F=>{F.isActive()&&F.resize()})}write(F){typeof F=="number"&&(F=String.fromCharCode(F)),this.buffer+=F,this.registered.filter(D=>D.isActive()).forEach(D=>D.write(F))}};var hs=(...$)=>new fs(...$);var ds=class{constructor(){this.active=!1;this.mimeType="text/plain"}activate(F){this.container.removeAttribute("hidden"),this.active=!0,this.mimeType=F,this.resize()}createElement(F="div"){let D=document.createElement(F);return D.setAttribute("hidden",""),D}deactivate(){this.container.setAttribute("hidden",""),this.active=!1}isActive(){return this.active}matches(F){return!0}resize(){}},sn=ds;var Sf=Nt(as()),Cf=Nt(cs()),ps=class extends sn{constructor(D,h={}){super();let L=document.createElement("textarea");this.container=this.createElement("div"),this.container.append(L),D.append(this.container),this.editor=lo.createEditor(L,{...h,readOnly:!0}),D.append(this.container)}activate(D){super.activate(D),this.editor.setOption("mode",D)}deactivate(){super.deactivate()}matches(D){return["application/ecmascript","application/javascript","application/json","application/x-perl","text/ecmascript","text/javascript","text/json","text/x-perl"].includes(D)}reset(){this.editor.setValue("")}write(D){typeof D=="number"&&(D=String.fromCharCode(D)),this.editor.setValue(this.editor.getValue()+D)}},Ll=ps;var kl=Nt(er());var vs=class{constructor(){this.active=!1;this.inputs=null}activate(F){this.container.removeAttribute("hidden"),this.active=!0,this.inputs=F,this.resize()}createElement(F="div"){return this.container=document.createElement(F),this.container.setAttribute("hidden",""),this.container}deactivate(){this.container.setAttribute("hidden",""),this.active=!1}isActive(){return this.active}read(){return this.readAsString(null).split("").map(F=>F.charCodeAt(0))}resize(){}},xl=vs;var gs=class extends xl{constructor(D,h={}){super();let L=this.createElement("div"),y=document.createElement("textarea");D.append(L),L.append(y),this.editor=(0,kl.fromTextArea)(y,{mode:null,theme:"monokai",viewportMargin:1/0,...h,extraKeys:{"Ctrl-D":"duplicateLine","Ctrl-/":"toggleComment","Shift-Tab":!1,Tab:!1,...Object.keys(h.extraKeys||{}).length?h.extraKeys:{}}}),this.editor.on("change",()=>{this.inputs!==null&&this.inputs.setBuffer(this.editor.getValue().split("").map(m=>m.charCodeAt(0)))})}matches(D){return/^[\t\n -~]*$/.test(D)}on(D,h){this.editor.on(D,(...L)=>h(...L))}readAsString(D="."){let h=this.editor.getValue();return D===null?h:h.replace(/[\x00-\x09\x0b-\x1f\x7f-\xff]/g,D)}reset(){this.editor.setValue("")}setOption(D,h){this.editor.setOption(D,h)}setType(D){this.editor.getOption("mode")!==D&&this.editor.setOption("mode",D)}write(D){Array.isArray(D)&&(D=D.map(h=>String.fromCharCode(h)).join("")),this.editor.setValue(D)}},Mi=gs;var _s=class extends sn{constructor(D){super();this.buffer="";this.mimeType="text/html";this.container=this.createElement("iframe"),D.append(this.container),this.update()}activate(D){super.activate(D),this.update()}matches(D){return["text/html"].includes(D)}reset(){this.buffer="",this.update()}write(D){typeof D=="number"&&(D=String.fromCharCode(D)),this.buffer+=D,this.update()}update(){this.container.src=`data:${this.mimeType};base64,${btoa(this.buffer)}`}},co=_s;var ys=class{constructor(F,D,h,L,y){this.languageSelector=F;this.stdin=D;this.stdout=h;this.stderr=L;this.args=y}static getRaw(F){return F.getValue()}getArgs(){return this.args.getValue()}setArgs(F){this.args.setValue(F)}argsRefresh(){this.args.refresh()}getStdin(){return this.stdin.getValue()}setStdin(F){this.stdin.setValue(F)}},El=ys;var ms=class extends co{constructor(){super(...arguments);this.imageBuffer="";this.imageMimeType="image/png"}activate(D){super.activate("text/html"),this.imageMimeType=D}css(){return`
html, body {
  margin: 0;
  padding: 0;
}

body > img {
  --z: 1;
  image-rendering: pixelated;
  transform: scale(var(--z));
  transform-origin: 0 0;
}

.checked {
  background-image: linear-gradient(to right, rgba(192, 192, 192, 0.75), rgba(192, 192, 192, 0.75)),
    linear-gradient(to right, black 50%, white 50%),
    linear-gradient(to bottom, black 50%, white 50%);
  background-blend-mode: normal, difference, normal;
  background-size: 2em 2em;
}

.controls {
  background: rgba(255, 255, 255, .2);
  border: solid rgba(255, 255, 255, .6);
  border-radius: .3em 0 0 .3em;
  border-width: 1px 0 1px 1px;
  padding: .2em .2em .5em;
  position: fixed;
  right: 0;
  top: 1em;
}

.controls button {
  appearance: none;
  background: transparent;
  border: 0;
  cursor: pointer;
}

.controls button.toggle:after {
  content: '\\27f5';
}

.controls.left {
  border-radius: 0 .3em .3em 0;
  border-width: 1px 1px 1px 0;
  left: 0;
  right: auto;
}

.controls.left header {
  text-align: right;
}

.controls.left button.toggle:after {
  content: '\\27f6';
}
`.replace(/\s*,\s*/g,",").replace(/\s*>\s*/g,">").replace(/\s*;\s*}\s*/g,"}").replace(/\s*{\s*/g,"{").replace(/\s*:\s*/g,":").replace(/\s*;\s*/g,";")}data(){return`
<style>${this.css()}</style>
<img src="data:${this.imageMimeType};base64,${btoa(this.imageBuffer)}">
<div class="controls">
  <header>
    <button class="toggle" title="Toggle position"></button>
  </header>
  <section>
    <button class="zoom-in" title="Zoom in"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTN2M2gtMnYtM2gtM3YtMmgzdi0zaDJ2M2gzdjJ6bTguMTcyIDE0bC03LjM4Ny03LjM4N2MtMS4zODguODc0LTMuMDI0IDEuMzg3LTQuNzg1IDEuMzg3LTQuOTcxIDAtOS00LjAyOS05LTlzNC4wMjktOSA5LTkgOSA0LjAyOSA5IDljMCAxLjc2MS0uNTE0IDMuMzk4LTEuMzg3IDQuNzg1bDcuMzg3IDcuMzg3LTIuODI4IDIuODI4em0tMTIuMTcyLThjMy44NTkgMCA3LTMuMTQgNy03cy0zLjE0MS03LTctNy03IDMuMTQtNyA3IDMuMTQxIDcgNyA3eiIvPjwvc3ZnPg=="></button>
    <button class="zoom-out" title="Zoom out"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTBoLTh2LTJoOHYyem04LjE3MiAxNGwtNy4zODctNy4zODdjLTEuMzg4Ljg3NC0zLjAyNCAxLjM4Ny00Ljc4NSAxLjM4Ny00Ljk3MSAwLTktNC4wMjktOS05czQuMDI5LTkgOS05IDkgNC4wMjkgOSA5YzAgMS43NjEtLjUxNCAzLjM5OC0xLjM4NyA0Ljc4NWw3LjM4NyA3LjM4Ny0yLjgyOCAyLjgyOHptLTEyLjE3Mi04YzMuODU5IDAgNy0zLjE0IDctN3MtMy4xNDEtNy03LTctNyAzLjE0LTcgNyAzLjE0MSA3IDcgN3oiLz48L3N2Zz4="></button>
  </section>
  <section>
    <button class="checked" title="Toggle transparency checkerboard">&#x2580;&#x2584;</button>
  </section>
</div>
<script>${this.js()}<\/script>
`}js(){return'e=document.querySelector("img"),t=document.querySelector(".controls");document.addEventListener("click",(function(o){var c=o.target,l=getComputedStyle(e).getPropertyValue("--z");c.matches(".zoom-in,.zoom-in *")&&e.style.setProperty("--z",2*l),c.matches(".zoom-out,.zoom-out *")&&e.style.setProperty("--z",l/2),c.matches(".toggle,.toggle *")&&t.classList.toggle("left"),c.matches("button.checked")&&e.classList.toggle("checked")}))'}matches(D){return["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/webp"].includes(D)}reset(){super.reset(),this.imageBuffer=""}write(D){typeof D=="number"&&(D=String.fromCharCode(D)),this.imageBuffer+=D,this.buffer="",super.write(this.data())}},uo=ms;var bs=class extends TypeError{},Oi=bs;var Ss=class extends uo{constructor(){super(...arguments);this.ppmBuffer="";this.superTimeout=null}activate(D){super.activate("image/png")}matches(D){return["image/x-portable-bitmap","image/x-portable-graymap","image/x-portable-pixmap","image/x-portable-anymap"].includes(D)}reset(){super.reset(),this.ppmBuffer=""}write(D){typeof D=="number"&&(D=String.fromCharCode(D)),this.ppmBuffer+=D,!(this.ppmBuffer.length<10)&&(this.superTimeout&&clearTimeout(this.superTimeout),this.superTimeout=setTimeout(()=>{try{super.reset(),super.write(this.convertToPNG())}catch(h){console.error(h)}},50))}convertToPNG(){if(!/^P[1-7]/.test(this.ppmBuffer))throw new Oi;let D=this.extractPBMHeader();if(!D)throw new Oi;let[h]=D;if(!h)throw new Oi;if(h==="P1"){let[,L,y,m]=D;return this.parseP1(L,y,m)}if(h==="P2"){let[,L,y,m,_]=D;return this.parseP2(L,y,m,_)}if(h==="P3"){let[,L,y,m,_]=D;return this.parseP3(L,y,m,_)}if(h==="P4"){let[,L,y,m]=D;return this.parseP4(L,y,m)}if(h==="P5"){let[,L,y,m,_]=D;return this.parseP2(L,y,m,_,!0)}if(h==="P6"){let[,L,y,m,_]=D;return this.parseP3(L,y,m,_,!0)}throw new Oi("Currently unsupported.")}createCanvas(D,h){let L=document.createElement("canvas"),y=L.getContext("2d"),m=new ImageData(D,h);return L.width=D,L.height=h,[L,y,m]}canvasToRawPNG(D){return atob(D.toDataURL("image/png").replace(/^data:image\/png;base64,/,""))}parseP1(D,h,L){let[y,m,_]=this.createCanvas(D,h),v=this.asciiDataGenerator(L,!1);for(let T=0;T<D*h*4;){let w=v.next().value?0:255;_.data[T++]=w,_.data[T++]=w,_.data[T++]=w,_.data[T++]=255}return m.putImageData(_,0,0,0,0,D,h),this.canvasToRawPNG(y)}parseP2(D,h,L,y,m=!1){let[_,v,T]=this.createCanvas(D,h),w=m?this.binaryDataGenerator(y):this.asciiDataGenerator(y);for(let c=0;c<D*h*4;){let p=Math.floor(w.next().value/L*255);T.data[c++]=p,T.data[c++]=p,T.data[c++]=p,T.data[c++]=255}return v.putImageData(T,0,0,0,0,D,h),this.canvasToRawPNG(_)}parseP3(D,h,L,y,m=!1){let[_,v,T]=this.createCanvas(D,h),w=m?this.binaryDataGenerator(y):this.asciiDataGenerator(y);for(let c=0;c<D*h*4;)T.data[c++]=Math.floor((w.next().value||0)/L*255),T.data[c++]=Math.floor((w.next().value||0)/L*255),T.data[c++]=Math.floor((w.next().value||0)/L*255),T.data[c++]=255;return v.putImageData(T,0,0,0,0,D,h),this.canvasToRawPNG(_)}parseP4(D,h,L){let[y,m,_]=this.createCanvas(D,h),v=this.binaryDataGenerator(L);for(let T=0;T<D*h*4;){let w="";for(let c=0;c<Math.ceil(D/8);c++)w+=("00000000"+v.next().value.toString(2)).slice(-8);for(let c=0;c<D;c++){let p=w[c]==="1"?0:255;_.data[T++]=p,_.data[T++]=p,_.data[T++]=p,_.data[T++]=255}}return m.putImageData(_,0,0,0,0,D,h),this.canvasToRawPNG(y)}extractPBMHeader(){let D=this.ppmBuffer.slice(0,2),h=/^(P[14])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/,L=/^(P[2356])\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s+(?:#[^\n]*\s*)*(\d+)\s*(?:#[^\n]*\s*)*/;if(D==="P1"||D==="P4"){let y=this.ppmBuffer.match(h);if(!y)throw new Oi;return[y[1],parseInt(y[2],10),parseInt(y[3],10),y[0].length]}if(D==="P2"||D==="P3"||D==="P5"||D==="P6"){let y=this.ppmBuffer.match(L);if(!y)throw new Oi;return[y[1],parseInt(y[2],10),parseInt(y[3],10),parseInt(y[4],10),y[0].length]}}*asciiDataGenerator(D,h=!0){let L="";for(let y=D,m=!1;y<this.ppmBuffer.length;y++){let _=this.ppmBuffer[y];/#/.test(_)&&(L&&(yield parseInt(L,10),L=""),m=!0),/\n/.test(_)&&m&&(m=!1),!m&&(/\s/.test(_)&&L.length>0&&(yield parseInt(L,10),L=""),/\d/.test(_)&&(L+=_),h===!1&&L&&(yield parseInt(L,10),L=""))}yield parseInt(L,10)}*binaryDataGenerator(D){let h="";for(let L=D;L<this.ppmBuffer.length;L++)yield this.ppmBuffer[L].charCodeAt(0);yield parseInt(h,10)}},Tl=Ss;var Ml=Nt(Al());var $u=2,Ju=1,ho=class{constructor(){}activate(F){this._terminal=F}dispose(){}fit(){let F=this.proposeDimensions();if(!F||!this._terminal)return;let D=this._terminal._core;(this._terminal.rows!==F.rows||this._terminal.cols!==F.cols)&&(D._renderService.clear(),this._terminal.resize(F.cols,F.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let F=this._terminal._core;if(F._renderService.dimensions.actualCellWidth===0||F._renderService.dimensions.actualCellHeight===0)return;let D=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(D.getPropertyValue("height")),L=Math.max(0,parseInt(D.getPropertyValue("width"))),y=window.getComputedStyle(this._terminal.element),m={top:parseInt(y.getPropertyValue("padding-top")),bottom:parseInt(y.getPropertyValue("padding-bottom")),right:parseInt(y.getPropertyValue("padding-right")),left:parseInt(y.getPropertyValue("padding-left"))},_=m.top+m.bottom,v=m.right+m.left,T=h-_,w=L-v-F.viewport.scrollBarWidth;return{cols:Math.max($u,Math.floor(w/F._renderService.dimensions.actualCellWidth)),rows:Math.max(Ju,Math.floor(T/F._renderService.dimensions.actualCellHeight))}}};var an=class extends sn{constructor(D,h={}){super();this.container=this.createElement("div"),this.container.classList.add("tty"),D.append(this.container),this.fit=new ho,this.terminal=an.createTerminal(h),this.terminal.loadAddon(this.fit),this.terminal.open(this.container),this.options=h}matches(){return!0}write(D){typeof D=="number"&&(D=String.fromCharCode(D)),this.terminal.write(an.cleanText(D))}reset(){this.terminal.reset()}resize(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.container.hasAttribute("hidden")||(this.fit.activate(this.terminal),this.fit.fit(),(this.options.rows||this.options.cols)&&this.terminal.resize(this.options.cols||this.terminal.cols,this.options.rows||this.terminal.rows))})})}static createTerminal(D={}){return new Ml.Terminal({...D,theme:{background:"#272822",cursor:"transparent",foreground:"#f8f8f2",...D.theme??{}}})}static cleanText(D){return D.replace(/(?<!\r)\n/g,`\r
`)}},ws=an;var Ls=class{constructor(){this.registered=[]}register(...F){this.registered.push(...F)}decode(F){return this.decoder(F).decode(F)}decodeAsString(F){return this.decoderAsString(F).decodeAsString(F)}decoder(F){let[D]=this.registered.filter(h=>h.matches(F));return D}decoderAsString(F){let[D]=this.registered.filter(h=>h.matchesAsString(F));return D}};var Ri=new Ls;var lh=Nt(Dl()),ch=Nt(Il()),uh=Nt(Nl()),fh=Nt(Ul()),hh=Nt(xs()),dh=Nt(Vl());var ln=class{constructor(...F){this.buffer=[];this.registered=[];this.register(...F)}active(){let[F]=this.registered.filter(D=>D.isActive());return F}activate(F){this.registered.reduce((D,h)=>!D&&(typeof F=="function"&&h instanceof F||h===F)?(h.isActive()||(h.activate(this),h.reset(),h.write(this.buffer)),!0):(h.deactivate(),h.reset(),D),!1),this.resize()}on(F,D){this.registered.forEach(h=>h.on(F,D))}read(){return this.active().read()}readAsString(F="."){return this.active().readAsString(F)}register(...F){this.registered.push(...F)}reset(){this.buffer.splice(0),this.registered.forEach(F=>F.reset())}resize(){this.registered.forEach(F=>{F.isActive()&&F.resize()})}setBuffer(F){this.buffer.push(...F)}setType(F){this.type=F,this.registered.forEach(D=>D.setType(F))}write(F){let D=[];typeof F=="number"&&D.push(F),Array.isArray(F)&&F.forEach(h=>D.push(h)),typeof F=="string"&&F.split("").forEach(h=>D.push(h.charCodeAt(0))),this.registered.filter(h=>{h.isActive()&&h.write(D)}),D.forEach(h=>this.buffer.push(h))}};var sr=class{constructor(){this.mimeType="text/plain";this.langSelector=document.querySelector('select[name="lang"]'),this.addRegisteredLangs();let F=document.querySelector("div.stdout");this.codeHeader=new ln(new Mi(document.querySelector("div.header"),{autoCloseBrackets:!0,matchBrackets:!0,placeholder:"Header..."})),this.codeHeader.activate(Mi),this.code=new ln(new Mi(document.querySelector("div.code"),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0,placeholder:"Code..."})),this.code.activate(Mi),this.code.setType(this.langSelector.value),this.langSelector.addEventListener("change",()=>this.code.setType(this.langSelector.value)),this.codeFooter=new ln(new Mi(document.querySelector("div.footer"),{autoCloseBrackets:!0,autofocus:!0,matchBrackets:!0,placeholder:"Footer..."})),this.codeFooter.activate(Mi),this.stdout=hs(new Ll(F),new Tl(F),new uo(F),new co(F),new ws(F)),this.stdout.activate("text/plain"),this.stderr=hs(new ws(document.querySelector("div.stderr"),{rows:8,theme:{foreground:"#f92672"}})),this.stderr.activate("text/plain"),this.stdin=sr.createEditor(document.querySelector('textarea[name="input"]')),this.args=sr.createEditor(document.querySelector('textarea[name="args"]')),this.io=new El(this.langSelector,this.stdin,this.stdout,this.stderr,this.args),this.expanders=document.querySelectorAll('button[name="expand"]'),this.argsWrapper=document.querySelector(".args-wrapper"),this.addArg=document.querySelector(".args-wrapper .actions"),this.runButton=document.querySelector('button[name="run"]'),this.stopButton=document.querySelector('button[name="stop"]'),this.bytesCount=document.querySelector(".bytes .byte-count"),this.bytesPlural=document.querySelector(".bytes .plural"),this.encoded=document.querySelector(".encoded"),this.format=document.querySelector(".format"),this.copyLinkButton=document.querySelector('button[name="copy"]'),this.markdownButton=document.querySelector('button[name="markdown"]'),this.mimeTypeInput=document.querySelector(".stdout-header input"),this.connectExpanders(),this.code.on("change",()=>this.codeOnChange()),this.runButton.addEventListener("click",()=>this.runCode()),this.langSelector.addEventListener("change",()=>this.populateArgs()),this.copyLinkButton.addEventListener("click",()=>{let D=this.buildLink();location.href!==D&&history.pushState(this.buildHashData(),document.title,D),navigator.clipboard.writeText(D),sr.copied(this.copyLinkButton)}),this.markdownButton.addEventListener("click",()=>{navigator.clipboard.writeText(this.buildMarkdown()),sr.copied(this.markdownButton)}),this.mimeTypeInput.addEventListener("change",()=>this.setMimeType(this.mimeTypeInput.value||"text/plain",!1)),this.mimeTypeInput.addEventListener("keypress",({key:D})=>{D==="Enter"&&this.mimeType!==this.mimeTypeInput.value&&this.setMimeType(this.mimeTypeInput.value||"text/plain",!1)}),addEventListener("keydown",D=>{if(D.key==="s"&&(D.ctrlKey||D.metaKey)){let h=this.buildLink();history.pushState(this.buildHashData(),document.title,h),navigator.clipboard.writeText(h),this.toast("Saved!","success",{hide:2}),D.preventDefault()}}),addEventListener("hashchange",()=>{this.parseHashData(location.hash),this.code.read().length&&this.runCode()}),addEventListener("resize",()=>this.resize()),this.parseHashData(location.hash);try{this.populateArgs()}catch(D){this.toast(D.message,"error")}this.codeOnChange(),this.code.read().length&&this.runCode(),this.resize(),document.querySelector("button.fullscreen-toggle").addEventListener("click",()=>this.enterFullscreen()),document.addEventListener("fullscreenchange",()=>this.exitFullscreen())}addRegisteredLangs(){Hr.all().forEach(F=>{let D=Hr.get(F),h=document.createElement("option");h.setAttribute("value",D.getId()),h.append(document.createTextNode(D.getName())),this.langSelector.append(h)})}setLang(F){if(!Hr.all().includes(F))throw new TypeError(`Unknown lang: ${F}.`);this.langSelector.value=F,this.setCodeHighlight()}getLangId(){return this.langSelector.value}setCodeHighlight(){let F=Hr.get(this.getLangId());[this.codeHeader,this.code,this.codeFooter].forEach(D=>{if(Ri.decoderAsString(D.readAsString(null)).name()!=="default"){D.setType(null);return}D.setType(F.getHighlighterRef())})}static createEditor(F,D={}){return(0,$l.fromTextArea)(F,{mode:null,theme:"monokai",viewportMargin:1/0,...D,extraKeys:{"Ctrl-D":"duplicateLine","Ctrl-/":"toggleComment","Shift-Tab":!1,Tab:!1,...D.extraKeys||{}}})}resize(){this.stdout.resize(),this.stderr.resize()}codeOnChange(){let F=this.code.read();this.encoded.setAttribute("hidden",""),this.setCodeHighlight();let D=Ri.decoder(F);D.name()!=="default"&&(this.encoded.removeAttribute("hidden"),this.format.innerText=D.name());let h=D.decode(F);this.showBytes(h.length)}runCode(){let F=Date.now(),D=()=>{h.terminate(),this.stderr.write(`Aborted execution after ${Date.now()-F}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",D)};this.stdout.reset(),this.stderr.reset(),this.runButton.setAttribute("disabled",""),this.stopButton.removeAttribute("disabled");let h=Hr.run(this.getLangId(),[].concat([this.codeHeader.read(),this.code.read(),this.codeFooter.read()].flatMap(L=>Ri.decode(L))),this.io.getArgs(),this.io.getStdin());this.stopButton.addEventListener("click",D),h.onmessage=({data:L})=>{let{type:y,output:m,error:_}=L;m&&this.stdout.write(m),_&&this.stderr.write(_??""),y==="failed"&&(this.stderr.write(`
Failed execution after ${Date.now()-F}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",D),h.terminate()),y==="done"&&(this.stderr.write(`Completed execution after ${Date.now()-F}ms`),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled",""),this.stopButton.removeEventListener("click",D),h.terminate())},h.onerror=L=>{this.toast(`Worker error: ${L.message}`,"error"),this.runButton.removeAttribute("disabled"),this.stopButton.setAttribute("disabled","")}}populateArgs(){for(;this.addArg.firstElementChild;)this.addArg.firstElementChild.remove();let F=Hr.get(this.getLangId());if(!F)throw new TypeError("Unregistered lang: "+this.getLangId());let D=F.getArgs();D!==null?(this.argsWrapper.removeAttribute("hidden"),D.forEach(h=>{let L=document.createElement("button");L.append(document.createTextNode(h)),L.addEventListener("click",()=>{let y=this.io.getArgs()??"";new RegExp("(\\n|^)"+h+"(\\n|$)").test(y)||this.io.setArgs((y+`
`+h).trim())}),this.addArg.append(L)})):this.argsWrapper.setAttribute("hidden",""),this.io.argsRefresh()}static expand(F){let D=F.nextElementSibling,h=document.querySelector(F.dataset.target);if(!h){console.debug("No collapser or target for expander: ",F);return}F.setAttribute("hidden",""),h.removeAttribute("hidden"),D.removeAttribute("hidden"),D.focus()}static collapse(F){let D=F.nextElementSibling,h=document.querySelector(F.dataset.target);if(!h){console.debug("No collapser or target for expander: ",F);return}F.removeAttribute("hidden"),h.setAttribute("hidden",""),D.setAttribute("hidden",""),F.focus()}connectExpanders(){this.expanders.forEach(F=>{let D=F.nextElementSibling;if(!D||!D.matches('button[name="collapse"]')){console.debug("No collapser or target for expander: ",F);return}F.addEventListener("click",()=>sr.expand(F)),D.addEventListener("click",()=>sr.collapse(F))})}setMimeType(F,D=!0){this.mimeType=F,D&&(this.mimeTypeInput.value=F),this.stdout.activate(F),this.stdout.resize()}static copied(F){F.setAttribute("disabled",""),F.style.width=F.offsetWidth+"px",F.classList.toggle("copied"),setTimeout(()=>{F.removeAttribute("disabled"),F.style.width=null,F.classList.toggle("copied")},1e3)}parseHashData(F){if(!F||F.length<2)return;let D;try{let y=atob(F.slice(1));D=JSON.parse(y)}catch(y){if(y instanceof DOMException){this.toast("Unable to decode URL data. Aborting.","error");return}if(y instanceof SyntaxError){this.toast("Unable to decode JSON data. Aborting.","error");return}throw y}let[h]=Array.from(this.expanders).filter(y=>y.parentElement.matches(".code-header")),[L]=Array.from(this.expanders).filter(y=>y.parentElement.matches(".code-footer"));D.header&&sr.expand(h),D.footer&&sr.expand(L),this.setLang(D.lang??this.getLangId()),this.codeHeader.write(D.header??""),this.code.write(D.code??""),this.codeFooter.write(D.footer??""),this.io.setArgs(D.args??""),this.io.setStdin(D.input??""),D.mime&&this.setMimeType(D.mime)}buildHashData(){let F={lang:this.getLangId(),code:this.code.readAsString(null)},D=this.codeHeader.readAsString(null),h=this.codeFooter.readAsString(null),L=this.io.getArgs(),y=this.io.getStdin(),m=this.mimeType;return Object.entries({header:D,footer:h,args:L,input:y}).forEach(([_,v])=>{v&&(F[_]=v)}),m!=="text/plain"&&(F.mime=m),btoa(JSON.stringify(F))}buildLink(){let F=this.buildHashData();return location.protocol+"//"+location.host+location.pathname+"#"+F}buildMarkdown(){let F=this.io.getArgs().trim().split(/\n/).join(" "),D=Hr.get(this.getLangId()),h=Math.random().toString(36).slice(2,10),L=Ri.decode(this.code.read()).length;return`# [${D.getName()}]${F?` + \`${F}\``:""}, ${L} byte${L===1?"":"s"}

<!-- language-all: lang-${D.getHighlighterRef()} -->

<pre><code>${this.code.readAsString().replace(/[&<>]/g,y=>y==="<"?"&lt;":y===">"?"&gt;":y==="&"?"&amp;":y)}</code></pre>

[Try it online!][TIO-${h}]

[${D.getName()}]: ${D.getURL()}
[TIO-${h}]: ${this.buildLink()}`}showBytes(F){if(this.bytesCount.innerText=F.toString(),F===1){this.bytesPlural.setAttribute("hidden","");return}this.bytesPlural.removeAttribute("hidden")}enterFullscreen(){document.body.requestFullscreen().then(()=>{document.body.classList.add("fullscreen"),this.resize()})}exitFullscreen(){document.body.classList.remove("fullscreen"),this.resize()}toast(F,D,h={}){return h.events||(h.events={}),h.events.click||(h.events.click=[]),h.events.click.push(L=>L.hide()),new Jl.Melba({...h,content:F,type:D})}},lo=sr;var ks=class extends fi{name(){return"xxd"}matchesAsString(F){return/^(\d{7,8}: (((.{2}){1,2} ){1,8}) .+(\n|$))+$/.test(F)}decodeAsString(F){return F.trim().replace(/(?<=^|\n)\d{7,8}: (((.{2}){1,2} ){1,8}).+/g,"$1").replace(/\s+/g,"").match(/../g).map(D=>parseInt(D,16))}},Ql=ks;var bh=Nt(rc()),Es=class extends hi{constructor(){super("python-0.1.0-wapm","Python 3.6.7 (wapm)",on("dist/js/langs/python-wapm/worker.js"),"https://www.python.org/",[],"python")}},ic=Es;Ri.register(new Ql,new dl,new hl,new fi);Hr.register(new gl,new ml,new ic);var Rh=new lo;})();
/**
 * Copyright (c) 2017 The xterm.js authors. All rights reserved.
 * @license MIT
 */
//# sourceMappingURL=app.js.map
