{
  "version": 3,
  "sources": ["../../../../js/langs/runrb-ruby-2.6.1/worker.js"],
  "sourcesContent": ["self.exports = {};\nself.module = {\n  exports: self.exports,\n};\n\nimportScripts('../../../../js/lib/runrb-ruby-2.6.1/miniruby.js');\n\nconsole.log(module);\n\naddEventListener('message', ({ data }) =>\n  module\n    .exports({\n      locateFile: function (path) {\n        if (path.endsWith('.wasm')) {\n          return '../../lib/runrb-ruby-2.6.1/miniruby.wasm';\n        }\n\n        return path;\n      },\n      onExit: ({ status }) => {\n        // exit() system call\n        postMessage({ done: true, status });\n      },\n      noInitialRun: true,\n      noExitRuntime: false,\n\n      stdin() {\n        return null;\n      },\n      print(output) {\n        self.postMessage({ fd: 1, output: output + '\\n' });\n      },\n      printErr(output) {\n        switch (output) {\n          case 'Calling stub instead of sigaction()':\n            // ignore\n            break;\n\n          default:\n            postMessage({ fd: 2, output: output + '\\n' });\n        }\n      },\n    })\n    .then((Module) => {\n      const { FS } = Module,\n        { code, args: rawArgs, input } = data,\n        args = rawArgs.trim() ? rawArgs.trim().split(/\\n/) : [];\n\n      args.push('/tmp/script.rb');\n\n      stdinBuffer = input;\n\n      if (!FS.isDir('/tmp')) {\n        FS.createPath('/', 'tmp', true, true);\n      }\n\n      if (FS.isFile('/tmp/script.rb')) {\n        FS.unlink('/tmp/script.rb');\n      }\n\n      FS.createDataFile(\n        '/tmp',\n        'script.rb',\n        Uint8Array.from(code),\n        true,\n        true,\n        true\n      );\n\n      try {\n        Module.callMain(args);\n      } catch (e) {\n        postMessage({\n          type: 'output',\n          error: e.message,\n        });\n      }\n\n      postMessage({\n        type: 'done',\n      });\n    })\n);\n"],
  "mappings": "oEAAA,qBAAK,QAAU,GACf,KAAK,OAAS,CACZ,QAAS,KAAK,SAGhB,cAAc,mDAEd,QAAQ,IAAI,GAEZ,iBAAiB,UAAW,CAAC,CAAE,UAC7B,EACG,QAAQ,CACP,WAAY,SAAU,EAAM,CAC1B,MAAI,GAAK,SAAS,SACT,2CAGF,GAET,OAAQ,CAAC,CAAE,YAAa,CAEtB,YAAY,CAAE,KAAM,GAAM,YAE5B,aAAc,GACd,cAAe,GAEf,OAAQ,CACN,MAAO,OAET,MAAM,EAAQ,CACZ,KAAK,YAAY,CAAE,GAAI,EAAG,OAAQ,EAAS;AAAA,KAE7C,SAAS,EAAQ,CACf,OAAQ,OACD,sCAEH,cAGA,YAAY,CAAE,GAAI,EAAG,OAAQ,EAAS;AAAA,QAI7C,KAAK,AAAC,GAAW,CAChB,GAAM,CAAE,MAAO,EACb,CAAE,OAAM,KAAM,EAAS,SAAU,EACjC,EAAO,EAAQ,OAAS,EAAQ,OAAO,MAAM,MAAQ,GAEvD,EAAK,KAAK,kBAEV,YAAc,EAET,EAAG,MAAM,SACZ,EAAG,WAAW,IAAK,MAAO,GAAM,IAG9B,EAAG,OAAO,mBACZ,EAAG,OAAO,kBAGZ,EAAG,eACD,OACA,YACA,WAAW,KAAK,GAChB,GACA,GACA,IAGF,GAAI,CACF,EAAO,SAAS,SACT,EAAP,CACA,YAAY,CACV,KAAM,SACN,MAAO,EAAE,UAIb,YAAY,CACV,KAAM",
  "names": []
}
